(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Pp={exports:{}},Du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function tR(){if(AT)return Du;AT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Du.Fragment=e,Du.jsx=t,Du.jsxs=t,Du}var IT;function nR(){return IT||(IT=1,Pp.exports=tR()),Pp.exports}var w=nR(),kp={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wT;function iR(){if(wT)return xe;wT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,z={};function Q(k,ee,Y){this.props=k,this.context=ee,this.refs=z,this.updater=Y||x}Q.prototype.isReactComponent={},Q.prototype.setState=function(k,ee){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ee,"setState")},Q.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function ae(){}ae.prototype=Q.prototype;function le(k,ee,Y){this.props=k,this.context=ee,this.refs=z,this.updater=Y||x}var _e=le.prototype=new ae;_e.constructor=le,C(_e,Q.prototype),_e.isPureReactComponent=!0;var Ee=Array.isArray;function ue(){}var N={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function D(k,ee,Y){var oe=Y.ref;return{$$typeof:r,type:k,key:ee,ref:oe!==void 0?oe:null,props:Y}}function P(k,ee){return D(k.type,ee,k.props)}function M(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function U(k){var ee={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(Y){return ee[Y]})}var V=/\/+/g;function Qe(k,ee){return typeof k=="object"&&k!==null&&k.key!=null?U(""+k.key):ee.toString(36)}function We(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ue,ue):(k.status="pending",k.then(function(ee){k.status==="pending"&&(k.status="fulfilled",k.value=ee)},function(ee){k.status==="pending"&&(k.status="rejected",k.reason=ee)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function J(k,ee,Y,oe,me){var se=typeof k;(se==="undefined"||se==="boolean")&&(k=null);var pe=!1;if(k===null)pe=!0;else switch(se){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(k.$$typeof){case r:case e:pe=!0;break;case v:return pe=k._init,J(pe(k._payload),ee,Y,oe,me)}}if(pe)return me=me(k),pe=oe===""?"."+Qe(k,0):oe,Ee(me)?(Y="",pe!=null&&(Y=pe.replace(V,"$&/")+"/"),J(me,ee,Y,"",function(Ce){return Ce})):me!=null&&(M(me)&&(me=P(me,Y+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(V,"$&/")+"/")+pe)),ee.push(me)),1;pe=0;var ie=oe===""?".":oe+":";if(Ee(k))for(var ve=0;ve<k.length;ve++)oe=k[ve],se=ie+Qe(oe,ve),pe+=J(oe,ee,Y,se,me);else if(ve=R(k),typeof ve=="function")for(k=ve.call(k),ve=0;!(oe=k.next()).done;)oe=oe.value,se=ie+Qe(oe,ve++),pe+=J(oe,ee,Y,se,me);else if(se==="object"){if(typeof k.then=="function")return J(We(k),ee,Y,oe,me);throw ee=String(k),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return pe}function ce(k,ee,Y){if(k==null)return k;var oe=[],me=0;return J(k,oe,"","",function(se){return ee.call(Y,se,me++)}),oe}function Te(k){if(k._status===-1){var ee=k._result;ee=ee(),ee.then(function(Y){(k._status===0||k._status===-1)&&(k._status=1,k._result=Y)},function(Y){(k._status===0||k._status===-1)&&(k._status=2,k._result=Y)}),k._status===-1&&(k._status=0,k._result=ee)}if(k._status===1)return k._result.default;throw k._result}var Ve=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Me={map:ce,forEach:function(k,ee,Y){ce(k,function(){ee.apply(this,arguments)},Y)},count:function(k){var ee=0;return ce(k,function(){ee++}),ee},toArray:function(k){return ce(k,function(ee){return ee})||[]},only:function(k){if(!M(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return xe.Activity=T,xe.Children=Me,xe.Component=Q,xe.Fragment=t,xe.Profiler=a,xe.PureComponent=le,xe.StrictMode=i,xe.Suspense=p,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,xe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return N.H.useMemoCache(k)}},xe.cache=function(k){return function(){return k.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(k,ee,Y){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var oe=C({},k.props),me=k.key;if(ee!=null)for(se in ee.key!==void 0&&(me=""+ee.key),ee)!A.call(ee,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&ee.ref===void 0||(oe[se]=ee[se]);var se=arguments.length-2;if(se===1)oe.children=Y;else if(1<se){for(var pe=Array(se),ie=0;ie<se;ie++)pe[ie]=arguments[ie+2];oe.children=pe}return D(k.type,me,oe)},xe.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},xe.createElement=function(k,ee,Y){var oe,me={},se=null;if(ee!=null)for(oe in ee.key!==void 0&&(se=""+ee.key),ee)A.call(ee,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(me[oe]=ee[oe]);var pe=arguments.length-2;if(pe===1)me.children=Y;else if(1<pe){for(var ie=Array(pe),ve=0;ve<pe;ve++)ie[ve]=arguments[ve+2];me.children=ie}if(k&&k.defaultProps)for(oe in pe=k.defaultProps,pe)me[oe]===void 0&&(me[oe]=pe[oe]);return D(k,se,me)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(k){return{$$typeof:d,render:k}},xe.isValidElement=M,xe.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:Te}},xe.memo=function(k,ee){return{$$typeof:g,type:k,compare:ee===void 0?null:ee}},xe.startTransition=function(k){var ee=N.T,Y={};N.T=Y;try{var oe=k(),me=N.S;me!==null&&me(Y,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ue,Ve)}catch(se){Ve(se)}finally{ee!==null&&Y.types!==null&&(ee.types=Y.types),N.T=ee}},xe.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},xe.use=function(k){return N.H.use(k)},xe.useActionState=function(k,ee,Y){return N.H.useActionState(k,ee,Y)},xe.useCallback=function(k,ee){return N.H.useCallback(k,ee)},xe.useContext=function(k){return N.H.useContext(k)},xe.useDebugValue=function(){},xe.useDeferredValue=function(k,ee){return N.H.useDeferredValue(k,ee)},xe.useEffect=function(k,ee){return N.H.useEffect(k,ee)},xe.useEffectEvent=function(k){return N.H.useEffectEvent(k)},xe.useId=function(){return N.H.useId()},xe.useImperativeHandle=function(k,ee,Y){return N.H.useImperativeHandle(k,ee,Y)},xe.useInsertionEffect=function(k,ee){return N.H.useInsertionEffect(k,ee)},xe.useLayoutEffect=function(k,ee){return N.H.useLayoutEffect(k,ee)},xe.useMemo=function(k,ee){return N.H.useMemo(k,ee)},xe.useOptimistic=function(k,ee){return N.H.useOptimistic(k,ee)},xe.useReducer=function(k,ee,Y){return N.H.useReducer(k,ee,Y)},xe.useRef=function(k){return N.H.useRef(k)},xe.useState=function(k){return N.H.useState(k)},xe.useSyncExternalStore=function(k,ee,Y){return N.H.useSyncExternalStore(k,ee,Y)},xe.useTransition=function(){return N.H.useTransition()},xe.version="19.2.4",xe}var RT;function Qg(){return RT||(RT=1,kp.exports=iR()),kp.exports}var K=Qg(),Lp={exports:{}},Nu={},Up={exports:{}},zp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT;function sR(){return CT||(CT=1,(function(r){function e(J,ce){var Te=J.length;J.push(ce);e:for(;0<Te;){var Ve=Te-1>>>1,Me=J[Ve];if(0<a(Me,ce))J[Ve]=ce,J[Te]=Me,Te=Ve;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var ce=J[0],Te=J.pop();if(Te!==ce){J[0]=Te;e:for(var Ve=0,Me=J.length,k=Me>>>1;Ve<k;){var ee=2*(Ve+1)-1,Y=J[ee],oe=ee+1,me=J[oe];if(0>a(Y,Te))oe<Me&&0>a(me,Y)?(J[Ve]=me,J[oe]=Te,Ve=oe):(J[Ve]=Y,J[ee]=Te,Ve=ee);else if(oe<Me&&0>a(me,Te))J[Ve]=me,J[oe]=Te,Ve=oe;else break e}}return ce}function a(J,ce){var Te=J.sortIndex-ce.sortIndex;return Te!==0?Te:J.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,T=null,S=3,R=!1,x=!1,C=!1,z=!1,Q=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function _e(J){for(var ce=t(g);ce!==null;){if(ce.callback===null)i(g);else if(ce.startTime<=J)i(g),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(g)}}function Ee(J){if(C=!1,_e(J),!x)if(t(p)!==null)x=!0,ue||(ue=!0,U());else{var ce=t(g);ce!==null&&We(Ee,ce.startTime-J)}}var ue=!1,N=-1,A=5,D=-1;function P(){return z?!0:!(r.unstable_now()-D<A)}function M(){if(z=!1,ue){var J=r.unstable_now();D=J;var ce=!0;try{e:{x=!1,C&&(C=!1,ae(N),N=-1),R=!0;var Te=S;try{t:{for(_e(J),T=t(p);T!==null&&!(T.expirationTime>J&&P());){var Ve=T.callback;if(typeof Ve=="function"){T.callback=null,S=T.priorityLevel;var Me=Ve(T.expirationTime<=J);if(J=r.unstable_now(),typeof Me=="function"){T.callback=Me,_e(J),ce=!0;break t}T===t(p)&&i(p),_e(J)}else i(p);T=t(p)}if(T!==null)ce=!0;else{var k=t(g);k!==null&&We(Ee,k.startTime-J),ce=!1}}break e}finally{T=null,S=Te,R=!1}ce=void 0}}finally{ce?U():ue=!1}}}var U;if(typeof le=="function")U=function(){le(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Qe=V.port2;V.port1.onmessage=M,U=function(){Qe.postMessage(null)}}else U=function(){Q(M,0)};function We(J,ce){N=Q(function(){J(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(J){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var Te=S;S=ce;try{return J()}finally{S=Te}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(J,ce){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Te=S;S=J;try{return ce()}finally{S=Te}},r.unstable_scheduleCallback=function(J,ce,Te){var Ve=r.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Ve+Te:Ve):Te=Ve,J){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=Te+Me,J={id:v++,callback:ce,priorityLevel:J,startTime:Te,expirationTime:Me,sortIndex:-1},Te>Ve?(J.sortIndex=Te,e(g,J),t(p)===null&&J===t(g)&&(C?(ae(N),N=-1):C=!0,We(Ee,Te-Ve))):(J.sortIndex=Me,e(p,J),x||R||(x=!0,ue||(ue=!0,U()))),J},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(J){var ce=S;return function(){var Te=S;S=ce;try{return J.apply(this,arguments)}finally{S=Te}}}})(zp)),zp}var DT;function rR(){return DT||(DT=1,Up.exports=sR()),Up.exports}var jp={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function aR(){if(NT)return on;NT=1;var r=Qg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:g,implementation:v}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},on.flushSync=function(p){var g=c.T,v=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=v,i.d.f()}},on.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},on.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},on.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&i.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},on.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},on.requestFormReset=function(p){i.d.r(p)},on.unstable_batchedUpdates=function(p,g){return p(g)},on.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.2.4",on}var xT;function oR(){if(xT)return jp.exports;xT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jp.exports=aR(),jp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function lR(){if(VT)return Nu;VT=1;var r=rR(),e=Qg(),t=oR();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,b=f.child;b;){if(b===o){_=!0,o=f,u=m;break}if(b===u){_=!0,u=f,o=m;break}b=b.sibling}if(!_){for(b=m.child;b;){if(b===o){_=!0,o=m,u=f;break}if(b===u){_=!0,u=m,o=f;break}b=b.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),le=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var V=Symbol.for("react.client.reference");function Qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===V?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case Q:return"Profiler";case z:return"StrictMode";case Ee:return"Suspense";case ue:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case le:return n.displayName||"Context";case ae:return(n._context.displayName||"Context")+".Consumer";case _e:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return s=n.displayName||null,s!==null?s:Qe(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return Qe(n(s))}catch{}}return null}var We=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Ve=[],Me=-1;function k(n){return{current:n}}function ee(n){0>Me||(n.current=Ve[Me],Ve[Me]=null,Me--)}function Y(n,s){Me++,Ve[Me]=n.current,n.current=s}var oe=k(null),me=k(null),se=k(null),pe=k(null);function ie(n,s){switch(Y(se,s),Y(me,n),Y(oe,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?QE(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=QE(s),n=YE(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ee(oe),Y(oe,n)}function ve(){ee(oe),ee(me),ee(se)}function Ce(n){n.memoizedState!==null&&Y(pe,n);var s=oe.current,o=YE(s,n.type);s!==o&&(Y(me,n),Y(oe,o))}function je(n){me.current===n&&(ee(oe),ee(me)),pe.current===n&&(ee(pe),Iu._currentValue=Te)}var Et,Fn;function yn(n){if(Et===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Et=s&&s[1]||"",Fn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+n+Fn}var Wi=!1;function Zi(n,s){if(!n||Wi)return"";Wi=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var G=X}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(X){G=X}n.call(ne.prototype)}}else{try{throw Error()}catch(X){G=X}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&G&&typeof X.stack=="string")return[X.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],b=m[1];if(_&&b){var O=_.split(`
`),H=b.split(`
`);for(f=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===O.length||f===H.length)for(u=O.length-1,f=H.length-1;1<=u&&0<=f&&O[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(O[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||O[u]!==H[f]){var Z=`
`+O[u].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=u&&0<=f);break}}}finally{Wi=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?yn(o):""}function Vs(n,s){switch(n.tag){case 26:case 27:case 5:return yn(n.type);case 16:return yn("Lazy");case 13:return n.child!==s&&s!==null?yn("Suspense Fallback"):yn("Suspense");case 19:return yn("SuspenseList");case 0:case 15:return Zi(n.type,!1);case 11:return Zi(n.type.render,!1);case 1:return Zi(n.type,!0);case 31:return yn("Activity");default:return""}}function zr(n){try{var s="",o=null;do s+=Vs(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var St=Object.prototype.hasOwnProperty,gt=r.unstable_scheduleCallback,Rn=r.unstable_cancelCallback,Rl=r.unstable_shouldYield,Ge=r.unstable_requestPaint,Ye=r.unstable_now,Cn=r.unstable_getCurrentPriorityLevel,Cl=r.unstable_ImmediatePriority,Dl=r.unstable_UserBlockingPriority,Ms=r.unstable_NormalPriority,Ud=r.unstable_LowPriority,Uc=r.unstable_IdlePriority,zc=r.log,jc=r.unstable_setDisableYieldValue,ri=null,Zt=null;function Hn(n){if(typeof zc=="function"&&jc(n),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(ri,n)}catch{}}var wt=Math.clz32?Math.clz32:qc,Bc=Math.log,Ha=Math.LN2;function qc(n){return n>>>=0,n===0?32:31-(Bc(n)/Ha|0)|0}var Si=256,jr=262144,Ot=4194304;function bi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ai(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~m,u!==0?f=bi(u):(_&=b,_!==0?f=bi(_):o||(o=b&~n,o!==0&&(f=bi(o))))):(b=u&~m,b!==0?f=bi(b):_!==0?f=bi(_):o||(o=u&~n,o!==0&&(f=bi(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function ai(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function zd(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fc(){var n=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),n}function Ii(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Br(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function jd(n,s,o,u,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var b=n.entanglements,O=n.expirationTimes,H=n.hiddenUpdates;for(o=_&~o;0<o;){var Z=31-wt(o),ne=1<<Z;b[Z]=0,O[Z]=-1;var G=H[Z];if(G!==null)for(H[Z]=null,Z=0;Z<G.length;Z++){var X=G[Z];X!==null&&(X.lane&=-536870913)}o&=~ne}u!==0&&qr(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~s))}function qr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-wt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Nl(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-wt(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function xl(n,s){var o=s&-s;return o=(o&42)!==0?1:Fr(o),(o&(n.suspendedLanes|s))!==0?0:o}function Fr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function es(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Hc(){var n=ce.p;return n!==0?n:(n=window.event,n===void 0?32:yT(n.type))}function oi(n,s){var o=ce.p;try{return ce.p=n,s()}finally{ce.p=o}}var li=Math.random().toString(36).slice(2),Pt="__reactFiber$"+li,Yt="__reactProps$"+li,wi="__reactContainer$"+li,Ga="__reactEvents$"+li,Bd="__reactListeners$"+li,Gc="__reactHandles$"+li,Kc="__reactResources$"+li,Ri="__reactMarker$"+li;function Ka(n){delete n[Pt],delete n[Yt],delete n[Ga],delete n[Bd],delete n[Gc]}function Ci(n){var s=n[Pt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[wi]||o[Pt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=tT(n);n!==null;){if(o=n[Pt])return o;n=tT(n)}return s}n=o,o=n.parentNode}return null}function Gn(n){if(n=n[Pt]||n[wi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Dn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Di(n){var s=n[Kc];return s||(s=n[Kc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function kt(n){n[Ri]=!0}var Vl=new Set,Ml={};function Ni(n,s){xi(n,s),xi(n+"Capture",s)}function xi(n,s){for(Ml[n]=s,n=0;n<s.length;n++)Vl.add(s[n])}var Ol=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pl={},kl={};function Qc(n){return St.call(kl,n)?!0:St.call(Pl,n)?!1:Ol.test(n)?kl[n]=!0:(Pl[n]=!0,!1)}function Qa(n,s,o){if(Qc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Nn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Lt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function $t(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Os(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ll(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function nt(n){if(!n._valueTracker){var s=Os(n)?"checked":"value";n._valueTracker=Ll(n,s,""+n[s])}}function Hr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Os(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Vi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Gr=/[\n"\\]/g;function _n(n){return n.replace(Gr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ya(n,s,o,u,f,m,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+$t(s)):n.value!==""+$t(s)&&(n.value=""+$t(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?Ul(n,_,$t(s)):o!=null?Ul(n,_,$t(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+$t(b):n.removeAttribute("name")}function Yc(n,s,o,u,f,m,_,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){nt(n);return}o=o!=null?""+$t(o):"",s=s!=null?""+$t(s):o,b||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),nt(n)}function Ul(n,s,o){s==="number"&&Vi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ps(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+$t(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function $c(n,s,o){if(s!=null&&(s=""+$t(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+$t(o):""}function ks(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(We(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=$t(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),nt(n)}function vn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zl(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||Xc.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function jl(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&zl(n,f,u)}else for(var m in s)s.hasOwnProperty(m)&&zl(n,m,s[m])}function $a(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(n){return Ls.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ui(){}var Bl=null;function Kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Us=null,Mi=null;function Kr(n){var s=Gn(n);if(s&&(n=s.stateNode)){var o=n[Yt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Ya(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+_n(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Yt]||null;if(!f)throw Error(i(90));Ya(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Hr(u)}break e;case"textarea":$c(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ps(n,!!o.multiple,s,!1)}}}var Ja=!1;function zs(n,s,o){if(Ja)return n(s,o);Ja=!0;try{var u=n(s);return u}finally{if(Ja=!1,(Us!==null||Mi!==null)&&(Hh(),Us&&(s=Us,n=Mi,Mi=Us=null,Kr(s),n)))for(s=0;s<n.length;s++)Kr(n[s])}}function ci(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Yt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qr=!1;if(Qn)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{Qr=!1}var Oi=null,ql=null,Yr=null;function Fl(){if(Yr)return Yr;var n,s=ql,o=s.length,u,f="value"in Oi?Oi.value:Oi.textContent,m=f.length;for(n=0;n<o&&s[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&s[o-u]===f[m-u];u++);return Yr=f.slice(n,1<u?1-u:void 0)}function $r(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ts(){return!0}function hi(){return!1}function en(n){function s(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(o=n[b],this[b]=o?o(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ts:hi,this.isPropagationStopped=hi,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),s}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=en(ns),js=T({},ns,{view:0,detail:0}),Hl=en(js),Bs,Wa,ki,Za=T({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ki&&(ki&&n.type==="mousemove"?(Bs=n.screenX-ki.screenX,Wa=n.screenY-ki.screenY):Wa=Bs=0,ki=n),Bs)},movementY:function(n){return"movementY"in n?n.movementY:Wa}}),Gl=en(Za),Xr=T({},Za,{dataTransfer:0}),Wc=en(Xr),Zc=T({},js,{relatedTarget:0}),Jr=en(Zc),Kl=T({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=en(Kl),eo=T({},ns,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),th=en(eo),nh=T({},ns,{data:0}),Li=en(nh),ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ah(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=rh[n])?!!s[n]:!1}function qs(){return ah}var dn=T({},js,{key:function(n){if(n.key){var s=ih[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=$r(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?sh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qs,charCode:function(n){return n.type==="keypress"?$r(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$r(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oh=en(dn),lh=T({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),is=en(lh),h=T({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qs}),y=en(h),E=T({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=en(E),q=T({},Za,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$=en(q),fe=T({},ns,{newState:0,oldState:0}),Oe=en(fe),Rt=[9,13,27,32],Ze=Qn&&"CompositionEvent"in window,yt=null;Qn&&"documentMode"in document&&(yt=document.documentMode);var Yn=Qn&&"TextEvent"in window&&!yt,Ui=Qn&&(!Ze||yt&&8<yt&&11>=yt),fi=" ",di=!1;function Wr(n,s){switch(n){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function to(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var no=!1;function Iw(n,s){switch(n){case"compositionend":return to(s);case"keypress":return s.which!==32?null:(di=!0,fi);case"textInput":return n=s.data,n===fi&&di?null:n;default:return null}}function ww(n,s){if(no)return n==="compositionend"||!Ze&&Wr(n,s)?(n=Fl(),Yr=ql=Oi=null,no=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ui&&s.locale!=="ko"?null:s.data;default:return null}}var Rw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Rw[n.type]:s==="textarea"}function r_(n,s,o,u){Us?Mi?Mi.push(u):Mi=[u]:Us=u,s=Jh(s,"onChange"),0<s.length&&(o=new Pi("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Ql=null,Yl=null;function Cw(n){BE(n,0)}function uh(n){var s=Dn(n);if(Hr(s))return n}function a_(n,s){if(n==="change")return s}var o_=!1;if(Qn){var qd;if(Qn){var Fd="oninput"in document;if(!Fd){var l_=document.createElement("div");l_.setAttribute("oninput","return;"),Fd=typeof l_.oninput=="function"}qd=Fd}else qd=!1;o_=qd&&(!document.documentMode||9<document.documentMode)}function u_(){Ql&&(Ql.detachEvent("onpropertychange",c_),Yl=Ql=null)}function c_(n){if(n.propertyName==="value"&&uh(Yl)){var s=[];r_(s,Yl,n,Kn(n)),zs(Cw,s)}}function Dw(n,s,o){n==="focusin"?(u_(),Ql=s,Yl=o,Ql.attachEvent("onpropertychange",c_)):n==="focusout"&&u_()}function Nw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return uh(Yl)}function xw(n,s){if(n==="click")return uh(s)}function Vw(n,s){if(n==="input"||n==="change")return uh(s)}function Mw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var xn=typeof Object.is=="function"?Object.is:Mw;function $l(n,s){if(xn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!St.call(s,f)||!xn(n[f],s[f]))return!1}return!0}function h_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function f_(n,s){var o=h_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=h_(o)}}function d_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?d_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function m_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Vi(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Vi(n.document)}return s}function Hd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Ow=Qn&&"documentMode"in document&&11>=document.documentMode,io=null,Gd=null,Xl=null,Kd=!1;function p_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Kd||io==null||io!==Vi(u)||(u=io,"selectionStart"in u&&Hd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Xl&&$l(Xl,u)||(Xl=u,u=Jh(Gd,"onSelect"),0<u.length&&(s=new Pi("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=io)))}function Zr(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var so={animationend:Zr("Animation","AnimationEnd"),animationiteration:Zr("Animation","AnimationIteration"),animationstart:Zr("Animation","AnimationStart"),transitionrun:Zr("Transition","TransitionRun"),transitionstart:Zr("Transition","TransitionStart"),transitioncancel:Zr("Transition","TransitionCancel"),transitionend:Zr("Transition","TransitionEnd")},Qd={},g_={};Qn&&(g_=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ea(n){if(Qd[n])return Qd[n];if(!so[n])return n;var s=so[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in g_)return Qd[n]=s[o];return n}var y_=ea("animationend"),__=ea("animationiteration"),v_=ea("animationstart"),Pw=ea("transitionrun"),kw=ea("transitionstart"),Lw=ea("transitioncancel"),E_=ea("transitionend"),T_=new Map,Yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yd.push("scrollEnd");function mi(n,s){T_.set(n,s),Ni(s,[n])}var ch=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},$n=[],ro=0,$d=0;function hh(){for(var n=ro,s=$d=ro=0;s<n;){var o=$n[s];$n[s++]=null;var u=$n[s];$n[s++]=null;var f=$n[s];$n[s++]=null;var m=$n[s];if($n[s++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&S_(o,f,m)}}function fh(n,s,o,u){$n[ro++]=n,$n[ro++]=s,$n[ro++]=o,$n[ro++]=u,$d|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Xd(n,s,o,u){return fh(n,s,o,u),dh(n)}function ta(n,s){return fh(n,null,null,s),dh(n)}function S_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-wt(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function dh(n){if(50<_u)throw _u=0,rp=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ao={};function Uw(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,s,o,u){return new Uw(n,s,o,u)}function Jd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ss(n,s){var o=n.alternate;return o===null?(o=Vn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function b_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function mh(n,s,o,u,f,m){var _=0;if(u=n,typeof n=="function")Jd(n)&&(_=1);else if(typeof n=="string")_=F1(n,o,oe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case D:return n=Vn(31,o,s,f),n.elementType=D,n.lanes=m,n;case C:return na(o.children,f,m,s);case z:_=8,f|=24;break;case Q:return n=Vn(12,o,s,f|2),n.elementType=Q,n.lanes=m,n;case Ee:return n=Vn(13,o,s,f),n.elementType=Ee,n.lanes=m,n;case ue:return n=Vn(19,o,s,f),n.elementType=ue,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case le:_=10;break e;case ae:_=9;break e;case _e:_=11;break e;case N:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Vn(_,o,s,f),s.elementType=n,s.type=u,s.lanes=m,s}function na(n,s,o,u){return n=Vn(7,n,u,s),n.lanes=o,n}function Wd(n,s,o){return n=Vn(6,n,null,s),n.lanes=o,n}function A_(n){var s=Vn(18,null,null,0);return s.stateNode=n,s}function Zd(n,s,o){return s=Vn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var I_=new WeakMap;function Xn(n,s){if(typeof n=="object"&&n!==null){var o=I_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:zr(s)},I_.set(n,s),s)}return{value:n,source:s,stack:zr(s)}}var oo=[],lo=0,ph=null,Jl=0,Jn=[],Wn=0,Fs=null,zi=1,ji="";function rs(n,s){oo[lo++]=Jl,oo[lo++]=ph,ph=n,Jl=s}function w_(n,s,o){Jn[Wn++]=zi,Jn[Wn++]=ji,Jn[Wn++]=Fs,Fs=n;var u=zi;n=ji;var f=32-wt(u)-1;u&=~(1<<f),o+=1;var m=32-wt(s)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,zi=1<<32-wt(s)+f|o<<f|u,ji=m+n}else zi=1<<m|o<<f|u,ji=n}function em(n){n.return!==null&&(rs(n,1),w_(n,1,0))}function tm(n){for(;n===ph;)ph=oo[--lo],oo[lo]=null,Jl=oo[--lo],oo[lo]=null;for(;n===Fs;)Fs=Jn[--Wn],Jn[Wn]=null,ji=Jn[--Wn],Jn[Wn]=null,zi=Jn[--Wn],Jn[Wn]=null}function R_(n,s){Jn[Wn++]=zi,Jn[Wn++]=ji,Jn[Wn++]=Fs,zi=s.id,ji=s.overflow,Fs=n}var tn=null,mt=null,Ke=!1,Hs=null,Zn=!1,nm=Error(i(519));function Gs(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wl(Xn(s,n)),nm}function C_(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Pt]=n,s[Yt]=u,o){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(o=0;o<Eu.length;o++)ze(Eu[o],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),Yc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),ks(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||GE(s.textContent,o)?(u.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),u.onScroll!=null&&ze("scroll",s),u.onScrollEnd!=null&&ze("scrollend",s),u.onClick!=null&&(s.onclick=ui),s=!0):s=!1,s||Gs(n,!0)}function D_(n){for(tn=n.return;tn;)switch(tn.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:tn=tn.return}}function uo(n){if(n!==tn)return!1;if(!Ke)return D_(n),Ke=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ep(n.type,n.memoizedProps)),o=!o),o&&mt&&Gs(n),D_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));mt=eT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));mt=eT(n)}else s===27?(s=mt,rr(n.type)?(n=Ip,Ip=null,mt=n):mt=s):mt=tn?ti(n.stateNode.nextSibling):null;return!0}function ia(){mt=tn=null,Ke=!1}function im(){var n=Hs;return n!==null&&(bn===null?bn=n:bn.push.apply(bn,n),Hs=null),n}function Wl(n){Hs===null?Hs=[n]:Hs.push(n)}var sm=k(null),sa=null,as=null;function Ks(n,s,o){Y(sm,s._currentValue),s._currentValue=o}function os(n){n._currentValue=sm.current,ee(sm)}function rm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function am(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var b=m;m=f;for(var O=0;O<s.length;O++)if(b.context===s[O]){m.lanes|=o,b=m.alternate,b!==null&&(b.lanes|=o),rm(m.return,o,n),u||(_=null);break e}m=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),rm(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function co(n,s,o,u){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var b=f.type;xn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===pe.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Iu):n=[Iu])}f=f.return}n!==null&&am(s,n,o,u),s.flags|=262144}function gh(n){for(n=n.firstContext;n!==null;){if(!xn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ra(n){sa=n,as=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return N_(sa,n)}function yh(n,s){return sa===null&&ra(n),N_(n,s)}function N_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},as===null){if(n===null)throw Error(i(308));as=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else as=as.next=s;return o}var zw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},jw=r.unstable_scheduleCallback,Bw=r.unstable_NormalPriority,Ut={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function om(){return{controller:new zw,data:new Map,refCount:0}}function Zl(n){n.refCount--,n.refCount===0&&jw(Bw,function(){n.controller.abort()})}var eu=null,lm=0,ho=0,fo=null;function qw(n,s){if(eu===null){var o=eu=[];lm=0,ho=hp(),fo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return lm++,s.then(x_,x_),s}function x_(){if(--lm===0&&eu!==null){fo!==null&&(fo.status="fulfilled");var n=eu;eu=null,ho=0,fo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Fw(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var V_=J.S;J.S=function(n,s){pE=Ye(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&qw(n,s),V_!==null&&V_(n,s)};var aa=k(null);function um(){var n=aa.current;return n!==null?n:ft.pooledCache}function _h(n,s){s===null?Y(aa,aa.current):Y(aa,s.pool)}function M_(){var n=um();return n===null?null:{parent:Ut._currentValue,pool:n}}var mo=Error(i(460)),cm=Error(i(474)),vh=Error(i(542)),Eh={then:function(){}};function O_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function P_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(ui,ui),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,L_(n),n;default:if(typeof s.status=="string")s.then(ui,ui);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,L_(n),n}throw la=s,mo}}function oa(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(la=o,mo):o}}var la=null;function k_(){if(la===null)throw Error(i(459));var n=la;return la=null,n}function L_(n){if(n===mo||n===vh)throw Error(i(483))}var po=null,tu=0;function Th(n){var s=tu;return tu+=1,po===null&&(po=[]),P_(po,n,s)}function nu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Sh(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function U_(n){function s(j,L){if(n){var F=j.deletions;F===null?(j.deletions=[L],j.flags|=16):F.push(L)}}function o(j,L){if(!n)return null;for(;L!==null;)s(j,L),L=L.sibling;return null}function u(j){for(var L=new Map;j!==null;)j.key!==null?L.set(j.key,j):L.set(j.index,j),j=j.sibling;return L}function f(j,L){return j=ss(j,L),j.index=0,j.sibling=null,j}function m(j,L,F){return j.index=F,n?(F=j.alternate,F!==null?(F=F.index,F<L?(j.flags|=67108866,L):F):(j.flags|=67108866,L)):(j.flags|=1048576,L)}function _(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function b(j,L,F,te){return L===null||L.tag!==6?(L=Wd(F,j.mode,te),L.return=j,L):(L=f(L,F),L.return=j,L)}function O(j,L,F,te){var Ie=F.type;return Ie===C?Z(j,L,F.props.children,te,F.key):L!==null&&(L.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===A&&oa(Ie)===L.type)?(L=f(L,F.props),nu(L,F),L.return=j,L):(L=mh(F.type,F.key,F.props,null,j.mode,te),nu(L,F),L.return=j,L)}function H(j,L,F,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=Zd(F,j.mode,te),L.return=j,L):(L=f(L,F.children||[]),L.return=j,L)}function Z(j,L,F,te,Ie){return L===null||L.tag!==7?(L=na(F,j.mode,te,Ie),L.return=j,L):(L=f(L,F),L.return=j,L)}function ne(j,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Wd(""+L,j.mode,F),L.return=j,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case R:return F=mh(L.type,L.key,L.props,null,j.mode,F),nu(F,L),F.return=j,F;case x:return L=Zd(L,j.mode,F),L.return=j,L;case A:return L=oa(L),ne(j,L,F)}if(We(L)||U(L))return L=na(L,j.mode,F,null),L.return=j,L;if(typeof L.then=="function")return ne(j,Th(L),F);if(L.$$typeof===le)return ne(j,yh(j,L),F);Sh(j,L)}return null}function G(j,L,F,te){var Ie=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ie!==null?null:b(j,L,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return F.key===Ie?O(j,L,F,te):null;case x:return F.key===Ie?H(j,L,F,te):null;case A:return F=oa(F),G(j,L,F,te)}if(We(F)||U(F))return Ie!==null?null:Z(j,L,F,te,null);if(typeof F.then=="function")return G(j,L,Th(F),te);if(F.$$typeof===le)return G(j,L,yh(j,F),te);Sh(j,F)}return null}function X(j,L,F,te,Ie){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return j=j.get(F)||null,b(L,j,""+te,Ie);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return j=j.get(te.key===null?F:te.key)||null,O(L,j,te,Ie);case x:return j=j.get(te.key===null?F:te.key)||null,H(L,j,te,Ie);case A:return te=oa(te),X(j,L,F,te,Ie)}if(We(te)||U(te))return j=j.get(F)||null,Z(L,j,te,Ie,null);if(typeof te.then=="function")return X(j,L,F,Th(te),Ie);if(te.$$typeof===le)return X(j,L,F,yh(L,te),Ie);Sh(L,te)}return null}function ye(j,L,F,te){for(var Ie=null,Xe=null,be=L,ke=L=0,qe=null;be!==null&&ke<F.length;ke++){be.index>ke?(qe=be,be=null):qe=be.sibling;var Je=G(j,be,F[ke],te);if(Je===null){be===null&&(be=qe);break}n&&be&&Je.alternate===null&&s(j,be),L=m(Je,L,ke),Xe===null?Ie=Je:Xe.sibling=Je,Xe=Je,be=qe}if(ke===F.length)return o(j,be),Ke&&rs(j,ke),Ie;if(be===null){for(;ke<F.length;ke++)be=ne(j,F[ke],te),be!==null&&(L=m(be,L,ke),Xe===null?Ie=be:Xe.sibling=be,Xe=be);return Ke&&rs(j,ke),Ie}for(be=u(be);ke<F.length;ke++)qe=X(be,j,ke,F[ke],te),qe!==null&&(n&&qe.alternate!==null&&be.delete(qe.key===null?ke:qe.key),L=m(qe,L,ke),Xe===null?Ie=qe:Xe.sibling=qe,Xe=qe);return n&&be.forEach(function(cr){return s(j,cr)}),Ke&&rs(j,ke),Ie}function Re(j,L,F,te){if(F==null)throw Error(i(151));for(var Ie=null,Xe=null,be=L,ke=L=0,qe=null,Je=F.next();be!==null&&!Je.done;ke++,Je=F.next()){be.index>ke?(qe=be,be=null):qe=be.sibling;var cr=G(j,be,Je.value,te);if(cr===null){be===null&&(be=qe);break}n&&be&&cr.alternate===null&&s(j,be),L=m(cr,L,ke),Xe===null?Ie=cr:Xe.sibling=cr,Xe=cr,be=qe}if(Je.done)return o(j,be),Ke&&rs(j,ke),Ie;if(be===null){for(;!Je.done;ke++,Je=F.next())Je=ne(j,Je.value,te),Je!==null&&(L=m(Je,L,ke),Xe===null?Ie=Je:Xe.sibling=Je,Xe=Je);return Ke&&rs(j,ke),Ie}for(be=u(be);!Je.done;ke++,Je=F.next())Je=X(be,j,ke,Je.value,te),Je!==null&&(n&&Je.alternate!==null&&be.delete(Je.key===null?ke:Je.key),L=m(Je,L,ke),Xe===null?Ie=Je:Xe.sibling=Je,Xe=Je);return n&&be.forEach(function(eR){return s(j,eR)}),Ke&&rs(j,ke),Ie}function ht(j,L,F,te){if(typeof F=="object"&&F!==null&&F.type===C&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case R:e:{for(var Ie=F.key;L!==null;){if(L.key===Ie){if(Ie=F.type,Ie===C){if(L.tag===7){o(j,L.sibling),te=f(L,F.props.children),te.return=j,j=te;break e}}else if(L.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===A&&oa(Ie)===L.type){o(j,L.sibling),te=f(L,F.props),nu(te,F),te.return=j,j=te;break e}o(j,L);break}else s(j,L);L=L.sibling}F.type===C?(te=na(F.props.children,j.mode,te,F.key),te.return=j,j=te):(te=mh(F.type,F.key,F.props,null,j.mode,te),nu(te,F),te.return=j,j=te)}return _(j);case x:e:{for(Ie=F.key;L!==null;){if(L.key===Ie)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){o(j,L.sibling),te=f(L,F.children||[]),te.return=j,j=te;break e}else{o(j,L);break}else s(j,L);L=L.sibling}te=Zd(F,j.mode,te),te.return=j,j=te}return _(j);case A:return F=oa(F),ht(j,L,F,te)}if(We(F))return ye(j,L,F,te);if(U(F)){if(Ie=U(F),typeof Ie!="function")throw Error(i(150));return F=Ie.call(F),Re(j,L,F,te)}if(typeof F.then=="function")return ht(j,L,Th(F),te);if(F.$$typeof===le)return ht(j,L,yh(j,F),te);Sh(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(o(j,L.sibling),te=f(L,F),te.return=j,j=te):(o(j,L),te=Wd(F,j.mode,te),te.return=j,j=te),_(j)):o(j,L)}return function(j,L,F,te){try{tu=0;var Ie=ht(j,L,F,te);return po=null,Ie}catch(be){if(be===mo||be===vh)throw be;var Xe=Vn(29,be,null,j.mode);return Xe.lanes=te,Xe.return=j,Xe}finally{}}}var ua=U_(!0),z_=U_(!1),Qs=!1;function hm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ys(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $s(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(et&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=dh(n),S_(n,null,o),s}return fh(n,u,s,o),dh(n)}function iu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Nl(n,o)}}function dm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var mm=!1;function su(){if(mm){var n=fo;if(n!==null)throw n}}function ru(n,s,o,u){mm=!1;var f=n.updateQueue;Qs=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var O=b,H=O.next;O.next=null,_===null?m=H:_.next=H,_=O;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==_&&(b===null?Z.firstBaseUpdate=H:b.next=H,Z.lastBaseUpdate=O))}if(m!==null){var ne=f.baseState;_=0,Z=H=O=null,b=m;do{var G=b.lane&-536870913,X=G!==b.lane;if(X?(Be&G)===G:(u&G)===G){G!==0&&G===ho&&(mm=!0),Z!==null&&(Z=Z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ye=n,Re=b;G=s;var ht=o;switch(Re.tag){case 1:if(ye=Re.payload,typeof ye=="function"){ne=ye.call(ht,ne,G);break e}ne=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Re.payload,G=typeof ye=="function"?ye.call(ht,ne,G):ye,G==null)break e;ne=T({},ne,G);break e;case 2:Qs=!0}}G=b.callback,G!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[G]:X.push(G))}else X={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?(H=Z=X,O=ne):Z=Z.next=X,_|=G;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;X=b,b=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);Z===null&&(O=ne),f.baseState=O,f.firstBaseUpdate=H,f.lastBaseUpdate=Z,m===null&&(f.shared.lanes=0),er|=_,n.lanes=_,n.memoizedState=ne}}function j_(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function B_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)j_(o[n],s)}var go=k(null),bh=k(0);function q_(n,s){n=gs,Y(bh,n),Y(go,s),gs=n|s.baseLanes}function pm(){Y(bh,gs),Y(go,go.current)}function gm(){gs=bh.current,ee(go),ee(bh)}var Mn=k(null),ei=null;function Xs(n){var s=n.alternate;Y(Ct,Ct.current&1),Y(Mn,n),ei===null&&(s===null||go.current!==null||s.memoizedState!==null)&&(ei=n)}function ym(n){Y(Ct,Ct.current),Y(Mn,n),ei===null&&(ei=n)}function F_(n){n.tag===22?(Y(Ct,Ct.current),Y(Mn,n),ei===null&&(ei=n)):Js()}function Js(){Y(Ct,Ct.current),Y(Mn,Mn.current)}function On(n){ee(Mn),ei===n&&(ei=null),ee(Ct)}var Ct=k(0);function Ah(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||bp(o)||Ap(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ls=0,Pe=null,ut=null,zt=null,Ih=!1,yo=!1,ca=!1,wh=0,au=0,_o=null,Hw=0;function bt(){throw Error(i(321))}function _m(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!xn(n[o],s[o]))return!1;return!0}function vm(n,s,o,u,f,m){return ls=m,Pe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=n===null||n.memoizedState===null?wv:Om,ca=!1,m=o(u,f),ca=!1,yo&&(m=G_(s,o,u,f)),H_(n),m}function H_(n){J.H=uu;var s=ut!==null&&ut.next!==null;if(ls=0,zt=ut=Pe=null,Ih=!1,au=0,_o=null,s)throw Error(i(300));n===null||jt||(n=n.dependencies,n!==null&&gh(n)&&(jt=!0))}function G_(n,s,o,u){Pe=n;var f=0;do{if(yo&&(_o=null),au=0,yo=!1,25<=f)throw Error(i(301));if(f+=1,zt=ut=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=Rv,m=s(o,u)}while(yo);return m}function Gw(){var n=J.H,s=n.useState()[0];return s=typeof s.then=="function"?ou(s):s,n=n.useState()[0],(ut!==null?ut.memoizedState:null)!==n&&(Pe.flags|=1024),s}function Em(){var n=wh!==0;return wh=0,n}function Tm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Sm(n){if(Ih){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ih=!1}ls=0,zt=ut=Pe=null,yo=!1,au=wh=0,_o=null}function mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Pe.memoizedState=zt=n:zt=zt.next=n,zt}function Dt(){if(ut===null){var n=Pe.alternate;n=n!==null?n.memoizedState:null}else n=ut.next;var s=zt===null?Pe.memoizedState:zt.next;if(s!==null)zt=s,ut=n;else{if(n===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));ut=n,n={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},zt===null?Pe.memoizedState=zt=n:zt=zt.next=n}return zt}function Rh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(n){var s=au;return au+=1,_o===null&&(_o=[]),n=P_(_o,n,s),s=Pe,(zt===null?s.memoizedState:zt.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?wv:Om),n}function Ch(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ou(n);if(n.$$typeof===le)return nn(n)}throw Error(i(438,String(n)))}function bm(n){var s=null,o=Pe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Rh(),Pe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=P;return s.index++,o}function us(n,s){return typeof s=="function"?s(n):s}function Dh(n){var s=Dt();return Am(s,ut,n)}function Am(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}s.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var b=_=null,O=null,H=s,Z=!1;do{var ne=H.lane&-536870913;if(ne!==H.lane?(Be&ne)===ne:(ls&ne)===ne){var G=H.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ne===ho&&(Z=!0);else if((ls&G)===G){H=H.next,G===ho&&(Z=!0);continue}else ne={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(b=O=ne,_=m):O=O.next=ne,Pe.lanes|=G,er|=G;ne=H.action,ca&&o(m,ne),m=H.hasEagerState?H.eagerState:o(m,ne)}else G={lane:ne,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(b=O=G,_=m):O=O.next=G,Pe.lanes|=ne,er|=ne;H=H.next}while(H!==null&&H!==s);if(O===null?_=m:O.next=b,!xn(m,n.memoizedState)&&(jt=!0,Z&&(o=fo,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=O,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Im(n){var s=Dt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);xn(m,s.memoizedState)||(jt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function K_(n,s,o){var u=Pe,f=Dt(),m=Ke;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var _=!xn((ut||f).memoizedState,o);if(_&&(f.memoizedState=o,jt=!0),f=f.queue,Cm($_.bind(null,u,f,n),[n]),f.getSnapshot!==s||_||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,vo(9,{destroy:void 0},Y_.bind(null,u,f,o,s),null),ft===null)throw Error(i(349));m||(ls&127)!==0||Q_(u,s,o)}return o}function Q_(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Pe.updateQueue,s===null?(s=Rh(),Pe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Y_(n,s,o,u){s.value=o,s.getSnapshot=u,X_(s)&&J_(n)}function $_(n,s,o){return o(function(){X_(s)&&J_(n)})}function X_(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!xn(n,o)}catch{return!0}}function J_(n){var s=ta(n,2);s!==null&&An(s,n,2)}function wm(n){var s=mn();if(typeof n=="function"){var o=n;if(n=o(),ca){Hn(!0);try{o()}finally{Hn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:n},s}function W_(n,s,o,u){return n.baseState=o,Am(n,ut,typeof u=="function"?u:us)}function Kw(n,s,o,u,f){if(Vh(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};J.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Z_(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Z_(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var m=J.T,_={};J.T=_;try{var b=o(f,u),O=J.S;O!==null&&O(_,b),ev(n,s,b)}catch(H){Rm(n,s,H)}finally{m!==null&&_.types!==null&&(m.types=_.types),J.T=m}}else try{m=o(f,u),ev(n,s,m)}catch(H){Rm(n,s,H)}}function ev(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){tv(n,s,u)},function(u){return Rm(n,s,u)}):tv(n,s,o)}function tv(n,s,o){s.status="fulfilled",s.value=o,nv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Z_(n,o)))}function Rm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,nv(s),s=s.next;while(s!==u)}n.action=null}function nv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function iv(n,s){return s}function sv(n,s){if(Ke){var o=ft.formState;if(o!==null){e:{var u=Pe;if(Ke){if(mt){t:{for(var f=mt,m=Zn;f.nodeType!==8;){if(!m){f=null;break t}if(f=ti(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){mt=ti(f.nextSibling),u=f.data==="F!";break e}}Gs(u)}u=!1}u&&(s=o[0])}}return o=mn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iv,lastRenderedState:s},o.queue=u,o=bv.bind(null,Pe,u),u.dispatch=o,u=wm(!1),m=Mm.bind(null,Pe,!1,u.queue),u=mn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=Kw.bind(null,Pe,f,m,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function rv(n){var s=Dt();return av(s,ut,n)}function av(n,s,o){if(s=Am(n,s,iv)[0],n=Dh(us)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=ou(s)}catch(_){throw _===mo?vh:_}else u=s;s=Dt();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Pe.flags|=2048,vo(9,{destroy:void 0},Qw.bind(null,f,o),null)),[u,m,n]}function Qw(n,s){n.action=s}function ov(n){var s=Dt(),o=ut;if(o!==null)return av(s,o,n);Dt(),s=s.memoizedState,o=Dt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function vo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Pe.updateQueue,s===null&&(s=Rh(),Pe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function lv(){return Dt().memoizedState}function Nh(n,s,o,u){var f=mn();Pe.flags|=n,f.memoizedState=vo(1|s,{destroy:void 0},o,u===void 0?null:u)}function xh(n,s,o,u){var f=Dt();u=u===void 0?null:u;var m=f.memoizedState.inst;ut!==null&&u!==null&&_m(u,ut.memoizedState.deps)?f.memoizedState=vo(s,m,o,u):(Pe.flags|=n,f.memoizedState=vo(1|s,m,o,u))}function uv(n,s){Nh(8390656,8,n,s)}function Cm(n,s){xh(2048,8,n,s)}function Yw(n){Pe.flags|=4;var s=Pe.updateQueue;if(s===null)s=Rh(),Pe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function cv(n){var s=Dt().memoizedState;return Yw({ref:s,nextImpl:n}),function(){if((et&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function hv(n,s){return xh(4,2,n,s)}function fv(n,s){return xh(4,4,n,s)}function dv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function mv(n,s,o){o=o!=null?o.concat([n]):null,xh(4,4,dv.bind(null,s,n),o)}function Dm(){}function pv(n,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&_m(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function gv(n,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&_m(s,u[1]))return u[0];if(u=n(),ca){Hn(!0);try{n()}finally{Hn(!1)}}return o.memoizedState=[u,s],u}function Nm(n,s,o){return o===void 0||(ls&1073741824)!==0&&(Be&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=yE(),Pe.lanes|=n,er|=n,o)}function yv(n,s,o,u){return xn(o,s)?o:go.current!==null?(n=Nm(n,o,u),xn(n,s)||(jt=!0),n):(ls&42)===0||(ls&1073741824)!==0&&(Be&261930)===0?(jt=!0,n.memoizedState=o):(n=yE(),Pe.lanes|=n,er|=n,s)}function _v(n,s,o,u,f){var m=ce.p;ce.p=m!==0&&8>m?m:8;var _=J.T,b={};J.T=b,Mm(n,!1,s,o);try{var O=f(),H=J.S;if(H!==null&&H(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=Fw(O,u);lu(n,s,Z,Ln(n))}else lu(n,s,u,Ln(n))}catch(ne){lu(n,s,{then:function(){},status:"rejected",reason:ne},Ln())}finally{ce.p=m,_!==null&&b.types!==null&&(_.types=b.types),J.T=_}}function $w(){}function xm(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=vv(n).queue;_v(n,f,s,Te,o===null?$w:function(){return Ev(n),o(u)})}function vv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:Te},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Ev(n){var s=vv(n);s.next===null&&(s=n.alternate.memoizedState),lu(n,s.next.queue,{},Ln())}function Vm(){return nn(Iu)}function Tv(){return Dt().memoizedState}function Sv(){return Dt().memoizedState}function Xw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Ln();n=Ys(o);var u=$s(s,n,o);u!==null&&(An(u,s,o),iu(u,s,o)),s={cache:om()},n.payload=s;return}s=s.return}}function Jw(n,s,o){var u=Ln();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Vh(n)?Av(s,o):(o=Xd(n,s,o,u),o!==null&&(An(o,n,u),Iv(o,s,u)))}function bv(n,s,o){var u=Ln();lu(n,s,o,u)}function lu(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Vh(n))Av(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,b=m(_,o);if(f.hasEagerState=!0,f.eagerState=b,xn(b,_))return fh(n,s,f,0),ft===null&&hh(),!1}catch{}finally{}if(o=Xd(n,s,f,u),o!==null)return An(o,n,u),Iv(o,s,u),!0}return!1}function Mm(n,s,o,u){if(u={lane:2,revertLane:hp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Vh(n)){if(s)throw Error(i(479))}else s=Xd(n,o,u,2),s!==null&&An(s,n,2)}function Vh(n){var s=n.alternate;return n===Pe||s!==null&&s===Pe}function Av(n,s){yo=Ih=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Iv(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Nl(n,o)}}var uu={readContext:nn,use:Ch,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};uu.useEffectEvent=bt;var wv={readContext:nn,use:Ch,useCallback:function(n,s){return mn().memoizedState=[n,s===void 0?null:s],n},useContext:nn,useEffect:uv,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Nh(4194308,4,dv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Nh(4194308,4,n,s)},useInsertionEffect:function(n,s){Nh(4,2,n,s)},useMemo:function(n,s){var o=mn();s=s===void 0?null:s;var u=n();if(ca){Hn(!0);try{n()}finally{Hn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=mn();if(o!==void 0){var f=o(s);if(ca){Hn(!0);try{o(s)}finally{Hn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=Jw.bind(null,Pe,n),[u.memoizedState,n]},useRef:function(n){var s=mn();return n={current:n},s.memoizedState=n},useState:function(n){n=wm(n);var s=n.queue,o=bv.bind(null,Pe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Dm,useDeferredValue:function(n,s){var o=mn();return Nm(o,n,s)},useTransition:function(){var n=wm(!1);return n=_v.bind(null,Pe,n.queue,!0,!1),mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Pe,f=mn();if(Ke){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ft===null)throw Error(i(349));(Be&127)!==0||Q_(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,uv($_.bind(null,u,m,n),[n]),u.flags|=2048,vo(9,{destroy:void 0},Y_.bind(null,u,m,o,s),null),o},useId:function(){var n=mn(),s=ft.identifierPrefix;if(Ke){var o=ji,u=zi;o=(u&~(1<<32-wt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=wh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=Hw++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Vm,useFormState:sv,useActionState:sv,useOptimistic:function(n){var s=mn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Mm.bind(null,Pe,!0,o),o.dispatch=s,[n,s]},useMemoCache:bm,useCacheRefresh:function(){return mn().memoizedState=Xw.bind(null,Pe)},useEffectEvent:function(n){var s=mn(),o={impl:n};return s.memoizedState=o,function(){if((et&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Om={readContext:nn,use:Ch,useCallback:pv,useContext:nn,useEffect:Cm,useImperativeHandle:mv,useInsertionEffect:hv,useLayoutEffect:fv,useMemo:gv,useReducer:Dh,useRef:lv,useState:function(){return Dh(us)},useDebugValue:Dm,useDeferredValue:function(n,s){var o=Dt();return yv(o,ut.memoizedState,n,s)},useTransition:function(){var n=Dh(us)[0],s=Dt().memoizedState;return[typeof n=="boolean"?n:ou(n),s]},useSyncExternalStore:K_,useId:Tv,useHostTransitionStatus:Vm,useFormState:rv,useActionState:rv,useOptimistic:function(n,s){var o=Dt();return W_(o,ut,n,s)},useMemoCache:bm,useCacheRefresh:Sv};Om.useEffectEvent=cv;var Rv={readContext:nn,use:Ch,useCallback:pv,useContext:nn,useEffect:Cm,useImperativeHandle:mv,useInsertionEffect:hv,useLayoutEffect:fv,useMemo:gv,useReducer:Im,useRef:lv,useState:function(){return Im(us)},useDebugValue:Dm,useDeferredValue:function(n,s){var o=Dt();return ut===null?Nm(o,n,s):yv(o,ut.memoizedState,n,s)},useTransition:function(){var n=Im(us)[0],s=Dt().memoizedState;return[typeof n=="boolean"?n:ou(n),s]},useSyncExternalStore:K_,useId:Tv,useHostTransitionStatus:Vm,useFormState:ov,useActionState:ov,useOptimistic:function(n,s){var o=Dt();return ut!==null?W_(o,ut,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:bm,useCacheRefresh:Sv};Rv.useEffectEvent=cv;function Pm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:T({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var km={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Ln(),f=Ys(u);f.payload=s,o!=null&&(f.callback=o),s=$s(n,f,u),s!==null&&(An(s,n,u),iu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Ln(),f=Ys(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=$s(n,f,u),s!==null&&(An(s,n,u),iu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Ln(),u=Ys(o);u.tag=2,s!=null&&(u.callback=s),s=$s(n,u,o),s!==null&&(An(s,n,o),iu(s,n,o))}};function Cv(n,s,o,u,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):s.prototype&&s.prototype.isPureReactComponent?!$l(o,u)||!$l(f,m):!0}function Dv(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&km.enqueueReplaceState(s,s.state,null)}function ha(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=T({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Nv(n){ch(n)}function xv(n){console.error(n)}function Vv(n){ch(n)}function Mh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Mv(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Lm(n,s,o){return o=Ys(o),o.tag=3,o.payload={element:null},o.callback=function(){Mh(n,s)},o}function Ov(n){return n=Ys(n),n.tag=3,n}function Pv(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){Mv(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Mv(s,o,u),typeof f!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function Ww(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&co(s,o,f,!0),o=Mn.current,o!==null){switch(o.tag){case 31:case 13:return ei===null?Gh():o.alternate===null&&At===0&&(At=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Eh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),lp(n,u,f)),!1;case 22:return o.flags|=65536,u===Eh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),lp(n,u,f)),!1}throw Error(i(435,o.tag))}return lp(n,u,f),Gh(),!1}if(Ke)return s=Mn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==nm&&(n=Error(i(422),{cause:u}),Wl(Xn(n,o)))):(u!==nm&&(s=Error(i(423),{cause:u}),Wl(Xn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Xn(u,o),f=Lm(n.stateNode,u,f),dm(n,f),At!==4&&(At=2)),!1;var m=Error(i(520),{cause:u});if(m=Xn(m,o),yu===null?yu=[m]:yu.push(m),At!==4&&(At=2),s===null)return!0;u=Xn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Lm(o.stateNode,u,n),dm(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(tr===null||!tr.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Ov(f),Pv(f,n,o,u),dm(o,f),!1}o=o.return}while(o!==null);return!1}var Um=Error(i(461)),jt=!1;function sn(n,s,o,u){s.child=n===null?z_(s,null,o,u):ua(s,n.child,o,u)}function kv(n,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var _={};for(var b in u)b!=="ref"&&(_[b]=u[b])}else _=u;return ra(s),u=vm(n,s,o,_,m,f),b=Em(),n!==null&&!jt?(Tm(n,s,f),cs(n,s,f)):(Ke&&b&&em(s),s.flags|=1,sn(n,s,u,f),s.child)}function Lv(n,s,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!Jd(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,Uv(n,s,m,u,f)):(n=mh(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Km(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:$l,o(_,u)&&n.ref===s.ref)return cs(n,s,f)}return s.flags|=1,n=ss(m,u),n.ref=s.ref,n.return=s,s.child=n}function Uv(n,s,o,u,f){if(n!==null){var m=n.memoizedProps;if($l(m,u)&&n.ref===s.ref)if(jt=!1,s.pendingProps=u=m,Km(n,f))(n.flags&131072)!==0&&(jt=!0);else return s.lanes=n.lanes,cs(n,s,f)}return zm(n,s,o,u,f)}function zv(n,s,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,s.child=null;return jv(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&_h(s,m!==null?m.cachePool:null),m!==null?q_(s,m):pm(),F_(s);else return u=s.lanes=536870912,jv(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(_h(s,m.cachePool),q_(s,m),Js(),s.memoizedState=null):(n!==null&&_h(s,null),pm(),Js());return sn(n,s,f,o),s.child}function cu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function jv(n,s,o,u,f){var m=um();return m=m===null?null:{parent:Ut._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&_h(s,null),pm(),F_(s),n!==null&&co(n,s,u,!0),s.childLanes=f,null}function Oh(n,s){return s=kh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Bv(n,s,o){return ua(s,n.child,null,o),n=Oh(s,s.pendingProps),n.flags|=2,On(s),s.memoizedState=null,n}function Zw(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ke){if(u.mode==="hidden")return n=Oh(s,u),s.lanes=536870912,cu(null,n);if(ym(s),(n=mt)?(n=ZE(n,Zn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Fs!==null?{id:zi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},o=A_(n),o.return=s,s.child=o,tn=s,mt=null)):n=null,n===null)throw Gs(s);return s.lanes=536870912,null}return Oh(s,u)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(ym(s),f)if(s.flags&256)s.flags&=-257,s=Bv(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(jt||co(n,s,o,!1),f=(o&n.childLanes)!==0,jt||f){if(u=ft,u!==null&&(_=xl(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,ta(n,_),An(u,n,_),Um;Gh(),s=Bv(n,s,o)}else n=m.treeContext,mt=ti(_.nextSibling),tn=s,Ke=!0,Hs=null,Zn=!1,n!==null&&R_(s,n),s=Oh(s,u),s.flags|=4096;return s}return n=ss(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Ph(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function zm(n,s,o,u,f){return ra(s),o=vm(n,s,o,u,void 0,f),u=Em(),n!==null&&!jt?(Tm(n,s,f),cs(n,s,f)):(Ke&&u&&em(s),s.flags|=1,sn(n,s,o,f),s.child)}function qv(n,s,o,u,f,m){return ra(s),s.updateQueue=null,o=G_(s,u,o,f),H_(n),u=Em(),n!==null&&!jt?(Tm(n,s,m),cs(n,s,m)):(Ke&&u&&em(s),s.flags|=1,sn(n,s,o,m),s.child)}function Fv(n,s,o,u,f){if(ra(s),s.stateNode===null){var m=ao,_=o.contextType;typeof _=="object"&&_!==null&&(m=nn(_)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=km,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},hm(s),_=o.contextType,m.context=typeof _=="object"&&_!==null?nn(_):ao,m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Pm(s,o,_,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&km.enqueueReplaceState(m,m.state,null),ru(s,u,m,f),su(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var b=s.memoizedProps,O=ha(o,b);m.props=O;var H=m.context,Z=o.contextType;_=ao,typeof Z=="object"&&Z!==null&&(_=nn(Z));var ne=o.getDerivedStateFromProps;Z=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||H!==_)&&Dv(s,m,u,_),Qs=!1;var G=s.memoizedState;m.state=G,ru(s,u,m,f),su(),H=s.memoizedState,b||G!==H||Qs?(typeof ne=="function"&&(Pm(s,o,ne,u),H=s.memoizedState),(O=Qs||Cv(s,o,O,u,G,H,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),m.props=u,m.state=H,m.context=_,u=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,fm(n,s),_=s.memoizedProps,Z=ha(o,_),m.props=Z,ne=s.pendingProps,G=m.context,H=o.contextType,O=ao,typeof H=="object"&&H!==null&&(O=nn(H)),b=o.getDerivedStateFromProps,(H=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ne||G!==O)&&Dv(s,m,u,O),Qs=!1,G=s.memoizedState,m.state=G,ru(s,u,m,f),su();var X=s.memoizedState;_!==ne||G!==X||Qs||n!==null&&n.dependencies!==null&&gh(n.dependencies)?(typeof b=="function"&&(Pm(s,o,b,u),X=s.memoizedState),(Z=Qs||Cv(s,o,Z,u,G,X,O)||n!==null&&n.dependencies!==null&&gh(n.dependencies))?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,X,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,X,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=X),m.props=u,m.state=X,m.context=O,u=Z):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Ph(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=ua(s,n.child,null,f),s.child=ua(s,null,o,f)):sn(n,s,o,f),s.memoizedState=m.state,n=s.child):n=cs(n,s,f),n}function Hv(n,s,o,u){return ia(),s.flags|=256,sn(n,s,o,u),s.child}var jm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(n){return{baseLanes:n,cachePool:M_()}}function qm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=kn),n}function Gv(n,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ke){if(f?Xs(s):Js(),(n=mt)?(n=ZE(n,Zn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Fs!==null?{id:zi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},o=A_(n),o.return=s,s.child=o,tn=s,mt=null)):n=null,n===null)throw Gs(s);return Ap(n)?s.lanes=32:s.lanes=536870912,null}var b=u.children;return u=u.fallback,f?(Js(),f=s.mode,b=kh({mode:"hidden",children:b},f),u=na(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,u=s.child,u.memoizedState=Bm(o),u.childLanes=qm(n,_,o),s.memoizedState=jm,cu(null,u)):(Xs(s),Fm(s,b))}var O=n.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(m)s.flags&256?(Xs(s),s.flags&=-257,s=Hm(n,s,o)):s.memoizedState!==null?(Js(),s.child=n.child,s.flags|=128,s=null):(Js(),b=u.fallback,f=s.mode,u=kh({mode:"visible",children:u.children},f),b=na(b,f,o,null),b.flags|=2,u.return=s,b.return=s,u.sibling=b,s.child=u,ua(s,n.child,null,o),u=s.child,u.memoizedState=Bm(o),u.childLanes=qm(n,_,o),s.memoizedState=jm,s=cu(null,u));else if(Xs(s),Ap(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var H=_.dgst;_=H,u=Error(i(419)),u.stack="",u.digest=_,Wl({value:u,source:null,stack:null}),s=Hm(n,s,o)}else if(jt||co(n,s,o,!1),_=(o&n.childLanes)!==0,jt||_){if(_=ft,_!==null&&(u=xl(_,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,ta(n,u),An(_,n,u),Um;bp(b)||Gh(),s=Hm(n,s,o)}else bp(b)?(s.flags|=192,s.child=n.child,s=null):(n=O.treeContext,mt=ti(b.nextSibling),tn=s,Ke=!0,Hs=null,Zn=!1,n!==null&&R_(s,n),s=Fm(s,u.children),s.flags|=4096);return s}return f?(Js(),b=u.fallback,f=s.mode,O=n.child,H=O.sibling,u=ss(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,H!==null?b=ss(H,b):(b=na(b,f,o,null),b.flags|=2),b.return=s,u.return=s,u.sibling=b,s.child=u,cu(null,u),u=s.child,b=n.child.memoizedState,b===null?b=Bm(o):(f=b.cachePool,f!==null?(O=Ut._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=M_(),b={baseLanes:b.baseLanes|o,cachePool:f}),u.memoizedState=b,u.childLanes=qm(n,_,o),s.memoizedState=jm,cu(n.child,u)):(Xs(s),o=n.child,n=o.sibling,o=ss(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function Fm(n,s){return s=kh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function kh(n,s){return n=Vn(22,n,null,s),n.lanes=0,n}function Hm(n,s,o){return ua(s,n.child,null,o),n=Fm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Kv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),rm(n.return,s,o)}function Gm(n,s,o,u,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function Qv(n,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=Ct.current,b=(_&2)!==0;if(b?(_=_&1|2,s.flags|=128):_&=1,Y(Ct,_),sn(n,s,u,o),u=Ke?Jl:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Kv(n,o,s);else if(n.tag===19)Kv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&Ah(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Gm(s,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Ah(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Gm(s,!0,o,null,m,u);break;case"together":Gm(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function cs(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),er|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(co(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=ss(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ss(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Km(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&gh(n)))}function e1(n,s,o){switch(s.tag){case 3:ie(s,s.stateNode.containerInfo),Ks(s,Ut,n.memoizedState.cache),ia();break;case 27:case 5:Ce(s);break;case 4:ie(s,s.stateNode.containerInfo);break;case 10:Ks(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ym(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Xs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Gv(n,s,o):(Xs(s),n=cs(n,s,o),n!==null?n.sibling:null);Xs(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(co(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Qv(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Y(Ct,Ct.current),u)break;return null;case 22:return s.lanes=0,zv(n,s,o,s.pendingProps);case 24:Ks(s,Ut,n.memoizedState.cache)}return cs(n,s,o)}function Yv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)jt=!0;else{if(!Km(n,o)&&(s.flags&128)===0)return jt=!1,e1(n,s,o);jt=(n.flags&131072)!==0}else jt=!1,Ke&&(s.flags&1048576)!==0&&w_(s,Jl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=oa(s.elementType),s.type=n,typeof n=="function")Jd(n)?(u=ha(n,u),s.tag=1,s=Fv(null,s,n,u,o)):(s.tag=0,s=zm(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===_e){s.tag=11,s=kv(null,s,n,u,o);break e}else if(f===N){s.tag=14,s=Lv(null,s,n,u,o);break e}}throw s=Qe(n)||n,Error(i(306,s,""))}}return s;case 0:return zm(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=ha(u,s.pendingProps),Fv(n,s,u,f,o);case 3:e:{if(ie(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,fm(n,s),ru(s,u,null,o);var _=s.memoizedState;if(u=_.cache,Ks(s,Ut,u),u!==m.cache&&am(s,[Ut],o,!0),su(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Hv(n,s,u,o);break e}else if(u!==f){f=Xn(Error(i(424)),s),Wl(f),s=Hv(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(mt=ti(n.firstChild),tn=s,Ke=!0,Hs=null,Zn=!0,o=z_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ia(),u===f){s=cs(n,s,o);break e}sn(n,s,u,o)}s=s.child}return s;case 26:return Ph(n,s),n===null?(o=rT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ke||(o=s.type,n=s.pendingProps,u=Wh(se.current).createElement(o),u[Pt]=s,u[Yt]=n,rn(u,o,n),kt(u),s.stateNode=u):s.memoizedState=rT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ce(s),n===null&&Ke&&(u=s.stateNode=nT(s.type,s.pendingProps,se.current),tn=s,Zn=!0,f=mt,rr(s.type)?(Ip=f,mt=ti(u.firstChild)):mt=f),sn(n,s,s.pendingProps.children,o),Ph(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ke&&((f=u=mt)&&(u=N1(u,s.type,s.pendingProps,Zn),u!==null?(s.stateNode=u,tn=s,mt=ti(u.firstChild),Zn=!1,f=!0):f=!1),f||Gs(s)),Ce(s),f=s.type,m=s.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,Ep(f,m)?u=null:_!==null&&Ep(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=vm(n,s,Gw,null,null,o),Iu._currentValue=f),Ph(n,s),sn(n,s,u,o),s.child;case 6:return n===null&&Ke&&((n=o=mt)&&(o=x1(o,s.pendingProps,Zn),o!==null?(s.stateNode=o,tn=s,mt=null,n=!0):n=!1),n||Gs(s)),null;case 13:return Gv(n,s,o);case 4:return ie(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=ua(s,null,u,o):sn(n,s,u,o),s.child;case 11:return kv(n,s,s.type,s.pendingProps,o);case 7:return sn(n,s,s.pendingProps,o),s.child;case 8:return sn(n,s,s.pendingProps.children,o),s.child;case 12:return sn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Ks(s,s.type,u.value),sn(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ra(s),f=nn(f),u=u(f),s.flags|=1,sn(n,s,u,o),s.child;case 14:return Lv(n,s,s.type,s.pendingProps,o);case 15:return Uv(n,s,s.type,s.pendingProps,o);case 19:return Qv(n,s,o);case 31:return Zw(n,s,o);case 22:return zv(n,s,o,s.pendingProps);case 24:return ra(s),u=nn(Ut),n===null?(f=um(),f===null&&(f=ft,m=om(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},hm(s),Ks(s,Ut,f)):((n.lanes&o)!==0&&(fm(n,s),ru(s,null,null,o),su()),f=n.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Ks(s,Ut,u)):(u=m.cache,Ks(s,Ut,u),u!==f.cache&&am(s,[Ut],o,!0))),sn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function hs(n){n.flags|=4}function Qm(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(TE())n.flags|=8192;else throw la=Eh,cm}else n.flags&=-16777217}function $v(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!cT(s))if(TE())n.flags|=8192;else throw la=Eh,cm}function Lh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Fc():536870912,n.lanes|=s,bo|=s)}function hu(n,s){if(!Ke)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function pt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function t1(n,s,o){var u=s.pendingProps;switch(tm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(s),null;case 1:return pt(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),os(Ut),ve(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(uo(s)?hs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,im())),pt(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(hs(s),m!==null?(pt(s),$v(s,m)):(pt(s),Qm(s,f,null,u,o))):m?m!==n.memoizedState?(hs(s),pt(s),$v(s,m)):(pt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&hs(s),pt(s),Qm(s,f,n,u,o)),null;case 27:if(je(s),o=se.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&hs(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return pt(s),null}n=oe.current,uo(s)?C_(s):(n=nT(f,u,o),s.stateNode=n,hs(s))}return pt(s),null;case 5:if(je(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&hs(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return pt(s),null}if(m=oe.current,uo(s))C_(s);else{var _=Wh(se.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[Pt]=s,m[Yt]=u;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(rn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&hs(s)}}return pt(s),Qm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&hs(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=se.current,uo(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=tn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Pt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||GE(n.nodeValue,o)),n||Gs(s,!0)}else n=Wh(n).createTextNode(u),n[Pt]=s,s.stateNode=n}return pt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=uo(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Pt]=s}else ia(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),n=!1}else o=im(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(On(s),s):(On(s),null);if((s.flags&128)!==0)throw Error(i(558))}return pt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=uo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Pt]=s}else ia(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),f=!1}else f=im(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(On(s),s):(On(s),null)}return On(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Lh(s,s.updateQueue),pt(s),null);case 4:return ve(),n===null&&pp(s.stateNode.containerInfo),pt(s),null;case 10:return os(s.type),pt(s),null;case 19:if(ee(Ct),u=s.memoizedState,u===null)return pt(s),null;if(f=(s.flags&128)!==0,m=u.rendering,m===null)if(f)hu(u,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Ah(n),m!==null){for(s.flags|=128,hu(u,!1),n=m.updateQueue,s.updateQueue=n,Lh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)b_(o,n),o=o.sibling;return Y(Ct,Ct.current&1|2),Ke&&rs(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Ye()>qh&&(s.flags|=128,f=!0,hu(u,!1),s.lanes=4194304)}else{if(!f)if(n=Ah(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Lh(s,n),hu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Ke)return pt(s),null}else 2*Ye()-u.renderingStartTime>qh&&o!==536870912&&(s.flags|=128,f=!0,hu(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Ye(),n.sibling=null,o=Ct.current,Y(Ct,f?o&1|2:o&1),Ke&&rs(s,u.treeForkCount),n):(pt(s),null);case 22:case 23:return On(s),gm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(pt(s),s.subtreeFlags&6&&(s.flags|=8192)):pt(s),o=s.updateQueue,o!==null&&Lh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&ee(aa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),os(Ut),pt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function n1(n,s){switch(tm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return os(Ut),ve(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return je(s),null;case 31:if(s.memoizedState!==null){if(On(s),s.alternate===null)throw Error(i(340));ia()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(On(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ia()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ee(Ct),null;case 4:return ve(),null;case 10:return os(s.type),null;case 22:case 23:return On(s),gm(),n!==null&&ee(aa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return os(Ut),null;case 25:return null;default:return null}}function Xv(n,s){switch(tm(s),s.tag){case 3:os(Ut),ve();break;case 26:case 27:case 5:je(s);break;case 4:ve();break;case 31:s.memoizedState!==null&&On(s);break;case 13:On(s);break;case 19:ee(Ct);break;case 10:os(s.type);break;case 22:case 23:On(s),gm(),n!==null&&ee(aa);break;case 24:os(Ut)}}function fu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(b){st(s,s.return,b)}}function Ws(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var _=u.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=s;var O=o,H=b;try{H()}catch(Z){st(f,O,Z)}}}u=u.next}while(u!==m)}}catch(Z){st(s,s.return,Z)}}function Jv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{B_(s,o)}catch(u){st(n,n.return,u)}}}function Wv(n,s,o){o.props=ha(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){st(n,s,u)}}function du(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){st(n,s,f)}}function Bi(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){st(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){st(n,s,f)}else o.current=null}function Zv(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){st(n,n.return,f)}}function Ym(n,s,o){try{var u=n.stateNode;A1(u,n.type,o,s),u[Yt]=s}catch(f){st(n,n.return,f)}}function eE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&rr(n.type)||n.tag===4}function $m(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||eE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&rr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Xm(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ui));else if(u!==4&&(u===27&&rr(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Xm(n,s,o),n=n.sibling;n!==null;)Xm(n,s,o),n=n.sibling}function Uh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&rr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Uh(n,s,o),n=n.sibling;n!==null;)Uh(n,s,o),n=n.sibling}function tE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);rn(s,u,o),s[Pt]=n,s[Yt]=o}catch(m){st(n,n.return,m)}}var fs=!1,Bt=!1,Jm=!1,nE=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function i1(n,s){if(n=n.containerInfo,_p=af,n=m_(n),Hd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,b=-1,O=-1,H=0,Z=0,ne=n,G=null;t:for(;;){for(var X;ne!==o||f!==0&&ne.nodeType!==3||(b=_+f),ne!==m||u!==0&&ne.nodeType!==3||(O=_+u),ne.nodeType===3&&(_+=ne.nodeValue.length),(X=ne.firstChild)!==null;)G=ne,ne=X;for(;;){if(ne===n)break t;if(G===o&&++H===f&&(b=_),G===m&&++Z===u&&(O=_),(X=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=X}o=b===-1||O===-1?null:{start:b,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(vp={focusedElem:n,selectionRange:o},af=!1,Xt=s;Xt!==null;)if(s=Xt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Xt=n;else for(;Xt!==null;){switch(s=Xt,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var ye=ha(o.type,f);n=u.getSnapshotBeforeUpdate(ye,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Re){st(o,o.return,Re)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Sp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Sp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Xt=n;break}Xt=s.return}}function iE(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ms(n,o),u&4&&fu(5,o);break;case 1:if(ms(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){st(o,o.return,_)}else{var f=ha(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){st(o,o.return,_)}}u&64&&Jv(o),u&512&&du(o,o.return);break;case 3:if(ms(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{B_(n,s)}catch(_){st(o,o.return,_)}}break;case 27:s===null&&u&4&&tE(o);case 26:case 5:ms(n,o),s===null&&u&4&&Zv(o),u&512&&du(o,o.return);break;case 12:ms(n,o);break;case 31:ms(n,o),u&4&&aE(n,o);break;case 13:ms(n,o),u&4&&oE(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=f1.bind(null,o),V1(n,o))));break;case 22:if(u=o.memoizedState!==null||fs,!u){s=s!==null&&s.memoizedState!==null||Bt,f=fs;var m=Bt;fs=u,(Bt=s)&&!m?ps(n,o,(o.subtreeFlags&8772)!==0):ms(n,o),fs=f,Bt=m}break;case 30:break;default:ms(n,o)}}function sE(n){var s=n.alternate;s!==null&&(n.alternate=null,sE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ka(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var _t=null,En=!1;function ds(n,s,o){for(o=o.child;o!==null;)rE(n,s,o),o=o.sibling}function rE(n,s,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(ri,o)}catch{}switch(o.tag){case 26:Bt||Bi(o,s),ds(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Bt||Bi(o,s);var u=_t,f=En;rr(o.type)&&(_t=o.stateNode,En=!1),ds(n,s,o),Su(o.stateNode),_t=u,En=f;break;case 5:Bt||Bi(o,s);case 6:if(u=_t,f=En,_t=null,ds(n,s,o),_t=u,En=f,_t!==null)if(En)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(o.stateNode)}catch(m){st(o,s,m)}else try{_t.removeChild(o.stateNode)}catch(m){st(o,s,m)}break;case 18:_t!==null&&(En?(n=_t,JE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),xo(n)):JE(_t,o.stateNode));break;case 4:u=_t,f=En,_t=o.stateNode.containerInfo,En=!0,ds(n,s,o),_t=u,En=f;break;case 0:case 11:case 14:case 15:Ws(2,o,s),Bt||Ws(4,o,s),ds(n,s,o);break;case 1:Bt||(Bi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Wv(o,s,u)),ds(n,s,o);break;case 21:ds(n,s,o);break;case 22:Bt=(u=Bt)||o.memoizedState!==null,ds(n,s,o),Bt=u;break;default:ds(n,s,o)}}function aE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{xo(n)}catch(o){st(s,s.return,o)}}}function oE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{xo(n)}catch(o){st(s,s.return,o)}}function s1(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new nE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new nE),s;default:throw Error(i(435,n.tag))}}function zh(n,s){var o=s1(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=d1.bind(null,n,u);u.then(f,f)}})}function Tn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,_=s,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(rr(b.type)){_t=b.stateNode,En=!1;break e}break;case 5:_t=b.stateNode,En=!1;break e;case 3:case 4:_t=b.stateNode.containerInfo,En=!0;break e}b=b.return}if(_t===null)throw Error(i(160));rE(m,_,f),_t=null,En=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)lE(s,n),s=s.sibling}var pi=null;function lE(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Tn(s,n),Sn(n),u&4&&(Ws(3,n,n.return),fu(3,n),Ws(5,n,n.return));break;case 1:Tn(s,n),Sn(n),u&512&&(Bt||o===null||Bi(o,o.return)),u&64&&fs&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=pi;if(Tn(s,n),Sn(n),u&512&&(Bt||o===null||Bi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ri]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),rn(m,u,o),m[Pt]=n,kt(m),u=m;break e;case"link":var _=lT("link","href",f).get(u+(o.href||""));if(_){for(var b=0;b<_.length;b++)if(m=_[b],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(b,1);break t}}m=f.createElement(u),rn(m,u,o),f.head.appendChild(m);break;case"meta":if(_=lT("meta","content",f).get(u+(o.content||""))){for(b=0;b<_.length;b++)if(m=_[b],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(b,1);break t}}m=f.createElement(u),rn(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[Pt]=n,kt(m),u=m}n.stateNode=u}else uT(f,n.type,n.stateNode);else n.stateNode=oT(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?uT(f,n.type,n.stateNode):oT(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Ym(n,n.memoizedProps,o.memoizedProps)}break;case 27:Tn(s,n),Sn(n),u&512&&(Bt||o===null||Bi(o,o.return)),o!==null&&u&4&&Ym(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Tn(s,n),Sn(n),u&512&&(Bt||o===null||Bi(o,o.return)),n.flags&32){f=n.stateNode;try{vn(f,"")}catch(ye){st(n,n.return,ye)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Ym(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Jm=!0);break;case 6:if(Tn(s,n),Sn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ye){st(n,n.return,ye)}}break;case 3:if(tf=null,f=pi,pi=Zh(s.containerInfo),Tn(s,n),pi=f,Sn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{xo(s.containerInfo)}catch(ye){st(n,n.return,ye)}Jm&&(Jm=!1,uE(n));break;case 4:u=pi,pi=Zh(n.stateNode.containerInfo),Tn(s,n),Sn(n),pi=u;break;case 12:Tn(s,n),Sn(n);break;case 31:Tn(s,n),Sn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zh(n,u)));break;case 13:Tn(s,n),Sn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Bh=Ye()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zh(n,u)));break;case 22:f=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,H=fs,Z=Bt;if(fs=H||f,Bt=Z||O,Tn(s,n),Bt=Z,fs=H,Sn(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||O||fs||Bt||fa(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){O=o=s;try{if(m=O.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=O.stateNode;var ne=O.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ye){st(O,O.return,ye)}}}else if(s.tag===6){if(o===null){O=s;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(ye){st(O,O.return,ye)}}}else if(s.tag===18){if(o===null){O=s;try{var X=O.stateNode;f?WE(X,!0):WE(O.stateNode,!1)}catch(ye){st(O,O.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,zh(n,o))));break;case 19:Tn(s,n),Sn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zh(n,u)));break;case 30:break;case 21:break;default:Tn(s,n),Sn(n)}}function Sn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(eE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=$m(n);Uh(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(vn(_,""),o.flags&=-33);var b=$m(n);Uh(n,b,_);break;case 3:case 4:var O=o.stateNode.containerInfo,H=$m(n);Xm(n,H,O);break;default:throw Error(i(161))}}catch(Z){st(n,n.return,Z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function uE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;uE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ms(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)iE(n,s.alternate,s),s=s.sibling}function fa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ws(4,s,s.return),fa(s);break;case 1:Bi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Wv(s,s.return,o),fa(s);break;case 27:Su(s.stateNode);case 26:case 5:Bi(s,s.return),fa(s);break;case 22:s.memoizedState===null&&fa(s);break;case 30:fa(s);break;default:fa(s)}n=n.sibling}}function ps(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:ps(f,m,o),fu(4,m);break;case 1:if(ps(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){st(u,u.return,H)}if(u=m,f=u.updateQueue,f!==null){var b=u.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)j_(O[f],b)}catch(H){st(u,u.return,H)}}o&&_&64&&Jv(m),du(m,m.return);break;case 27:tE(m);case 26:case 5:ps(f,m,o),o&&u===null&&_&4&&Zv(m),du(m,m.return);break;case 12:ps(f,m,o);break;case 31:ps(f,m,o),o&&_&4&&aE(f,m);break;case 13:ps(f,m,o),o&&_&4&&oE(f,m);break;case 22:m.memoizedState===null&&ps(f,m,o),du(m,m.return);break;case 30:break;default:ps(f,m,o)}s=s.sibling}}function Wm(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Zl(o))}function Zm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Zl(n))}function gi(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)cE(n,s,o,u),s=s.sibling}function cE(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:gi(n,s,o,u),f&2048&&fu(9,s);break;case 1:gi(n,s,o,u);break;case 3:gi(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Zl(n)));break;case 12:if(f&2048){gi(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,_=m.id,b=m.onPostCommit;typeof b=="function"&&b(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){st(s,s.return,O)}}else gi(n,s,o,u);break;case 31:gi(n,s,o,u);break;case 13:gi(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?gi(n,s,o,u):mu(n,s):m._visibility&2?gi(n,s,o,u):(m._visibility|=2,Eo(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Wm(_,s);break;case 24:gi(n,s,o,u),f&2048&&Zm(s.alternate,s);break;default:gi(n,s,o,u)}}function Eo(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,_=s,b=o,O=u,H=_.flags;switch(_.tag){case 0:case 11:case 15:Eo(m,_,b,O,f),fu(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?Eo(m,_,b,O,f):mu(m,_):(Z._visibility|=2,Eo(m,_,b,O,f)),f&&H&2048&&Wm(_.alternate,_);break;case 24:Eo(m,_,b,O,f),f&&H&2048&&Zm(_.alternate,_);break;default:Eo(m,_,b,O,f)}s=s.sibling}}function mu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:mu(o,u),f&2048&&Wm(u.alternate,u);break;case 24:mu(o,u),f&2048&&Zm(u.alternate,u);break;default:mu(o,u)}s=s.sibling}}var pu=8192;function To(n,s,o){if(n.subtreeFlags&pu)for(n=n.child;n!==null;)hE(n,s,o),n=n.sibling}function hE(n,s,o){switch(n.tag){case 26:To(n,s,o),n.flags&pu&&n.memoizedState!==null&&H1(o,pi,n.memoizedState,n.memoizedProps);break;case 5:To(n,s,o);break;case 3:case 4:var u=pi;pi=Zh(n.stateNode.containerInfo),To(n,s,o),pi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=pu,pu=16777216,To(n,s,o),pu=u):To(n,s,o));break;default:To(n,s,o)}}function fE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function gu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Xt=u,mE(u,n)}fE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)dE(n),n=n.sibling}function dE(n){switch(n.tag){case 0:case 11:case 15:gu(n),n.flags&2048&&Ws(9,n,n.return);break;case 3:gu(n);break;case 12:gu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,jh(n)):gu(n);break;default:gu(n)}}function jh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Xt=u,mE(u,n)}fE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ws(8,s,s.return),jh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,jh(s));break;default:jh(s)}n=n.sibling}}function mE(n,s){for(;Xt!==null;){var o=Xt;switch(o.tag){case 0:case 11:case 15:Ws(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Zl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Xt=u;else e:for(o=n;Xt!==null;){u=Xt;var f=u.sibling,m=u.return;if(sE(u),u===o){Xt=null;break e}if(f!==null){f.return=m,Xt=f;break e}Xt=m}}}var r1={getCacheForType:function(n){var s=nn(Ut),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return nn(Ut).controller.signal}},a1=typeof WeakMap=="function"?WeakMap:Map,et=0,ft=null,Ue=null,Be=0,it=0,Pn=null,Zs=!1,So=!1,ep=!1,gs=0,At=0,er=0,da=0,tp=0,kn=0,bo=0,yu=null,bn=null,np=!1,Bh=0,pE=0,qh=1/0,Fh=null,tr=null,Gt=0,nr=null,Ao=null,ys=0,ip=0,sp=null,gE=null,_u=0,rp=null;function Ln(){return(et&2)!==0&&Be!==0?Be&-Be:J.T!==null?hp():Hc()}function yE(){if(kn===0)if((Be&536870912)===0||Ke){var n=jr;jr<<=1,(jr&3932160)===0&&(jr=262144),kn=n}else kn=536870912;return n=Mn.current,n!==null&&(n.flags|=32),kn}function An(n,s,o){(n===ft&&(it===2||it===9)||n.cancelPendingCommit!==null)&&(Io(n,0),ir(n,Be,kn,!1)),Br(n,o),((et&2)===0||n!==ft)&&(n===ft&&((et&2)===0&&(da|=o),At===4&&ir(n,Be,kn,!1)),qi(n))}function _E(n,s,o){if((et&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||ai(n,s),f=u?u1(n,s):op(n,s,!0),m=u;do{if(f===0){So&&!u&&ir(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!o1(o)){f=op(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var b=n;f=yu;var O=b.current.memoizedState.isDehydrated;if(O&&(Io(b,_).flags|=256),_=op(b,_,!1),_!==2){if(ep&&!O){b.errorRecoveryDisabledLanes|=m,da|=m,f=4;break e}m=bn,bn=f,m!==null&&(bn===null?bn=m:bn.push.apply(bn,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){Io(n,0),ir(n,s,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ir(u,s,kn,!Zs);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Bh+300-Ye(),10<f)){if(ir(u,s,kn,!Zs),Ai(u,0,!0)!==0)break e;ys=s,u.timeoutHandle=$E(vE.bind(null,u,o,bn,Fh,np,s,kn,da,bo,Zs,m,"Throttled",-0,0),f);break e}vE(u,o,bn,Fh,np,s,kn,da,bo,Zs,m,null,-0,0)}}break}while(!0);qi(n)}function vE(n,s,o,u,f,m,_,b,O,H,Z,ne,G,X){if(n.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},hE(s,m,ne);var ye=(m&62914560)===m?Bh-Ye():(m&4194048)===m?pE-Ye():0;if(ye=G1(ne,ye),ye!==null){ys=m,n.cancelPendingCommit=ye(RE.bind(null,n,s,m,o,u,f,_,b,O,Z,ne,null,G,X)),ir(n,m,_,!H);return}}RE(n,s,m,o,u,f,_,b,O)}function o1(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!xn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ir(n,s,o,u){s&=~tp,s&=~da,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var m=31-wt(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&qr(n,o,s)}function Hh(){return(et&6)===0?(vu(0),!1):!0}function ap(){if(Ue!==null){if(it===0)var n=Ue.return;else n=Ue,as=sa=null,Sm(n),po=null,tu=0,n=Ue;for(;n!==null;)Xv(n.alternate,n),n=n.return;Ue=null}}function Io(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,R1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ys=0,ap(),ft=n,Ue=o=ss(n.current,null),Be=s,it=0,Pn=null,Zs=!1,So=ai(n,s),ep=!1,bo=kn=tp=da=er=At=0,bn=yu=null,np=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-wt(u),m=1<<f;s|=n[f],u&=~m}return gs=s,hh(),o}function EE(n,s){Pe=null,J.H=uu,s===mo||s===vh?(s=k_(),it=3):s===cm?(s=k_(),it=4):it=s===Um?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Pn=s,Ue===null&&(At=1,Mh(n,Xn(s,n.current)))}function TE(){var n=Mn.current;return n===null?!0:(Be&4194048)===Be?ei===null:(Be&62914560)===Be||(Be&536870912)!==0?n===ei:!1}function SE(){var n=J.H;return J.H=uu,n===null?uu:n}function bE(){var n=J.A;return J.A=r1,n}function Gh(){At=4,Zs||(Be&4194048)!==Be&&Mn.current!==null||(So=!0),(er&134217727)===0&&(da&134217727)===0||ft===null||ir(ft,Be,kn,!1)}function op(n,s,o){var u=et;et|=2;var f=SE(),m=bE();(ft!==n||Be!==s)&&(Fh=null,Io(n,s)),s=!1;var _=At;e:do try{if(it!==0&&Ue!==null){var b=Ue,O=Pn;switch(it){case 8:ap(),_=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(s=!0);var H=it;if(it=0,Pn=null,wo(n,b,O,H),o&&So){_=0;break e}break;default:H=it,it=0,Pn=null,wo(n,b,O,H)}}l1(),_=At;break}catch(Z){EE(n,Z)}while(!0);return s&&n.shellSuspendCounter++,as=sa=null,et=u,J.H=f,J.A=m,Ue===null&&(ft=null,Be=0,hh()),_}function l1(){for(;Ue!==null;)AE(Ue)}function u1(n,s){var o=et;et|=2;var u=SE(),f=bE();ft!==n||Be!==s?(Fh=null,qh=Ye()+500,Io(n,s)):So=ai(n,s);e:do try{if(it!==0&&Ue!==null){s=Ue;var m=Pn;t:switch(it){case 1:it=0,Pn=null,wo(n,s,m,1);break;case 2:case 9:if(O_(m)){it=0,Pn=null,IE(s);break}s=function(){it!==2&&it!==9||ft!==n||(it=7),qi(n)},m.then(s,s);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:O_(m)?(it=0,Pn=null,IE(s)):(it=0,Pn=null,wo(n,s,m,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var b=Ue;if(_?cT(_):b.stateNode.complete){it=0,Pn=null;var O=b.sibling;if(O!==null)Ue=O;else{var H=b.return;H!==null?(Ue=H,Kh(H)):Ue=null}break t}}it=0,Pn=null,wo(n,s,m,5);break;case 6:it=0,Pn=null,wo(n,s,m,6);break;case 8:ap(),At=6;break e;default:throw Error(i(462))}}c1();break}catch(Z){EE(n,Z)}while(!0);return as=sa=null,J.H=u,J.A=f,et=o,Ue!==null?0:(ft=null,Be=0,hh(),At)}function c1(){for(;Ue!==null&&!Rl();)AE(Ue)}function AE(n){var s=Yv(n.alternate,n,gs);n.memoizedProps=n.pendingProps,s===null?Kh(n):Ue=s}function IE(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=qv(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=qv(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:Sm(s);default:Xv(o,s),s=Ue=b_(s,gs),s=Yv(o,s,gs)}n.memoizedProps=n.pendingProps,s===null?Kh(n):Ue=s}function wo(n,s,o,u){as=sa=null,Sm(s),po=null,tu=0;var f=s.return;try{if(Ww(n,f,s,o,Be)){At=1,Mh(n,Xn(o,n.current)),Ue=null;return}}catch(m){if(f!==null)throw Ue=f,m;At=1,Mh(n,Xn(o,n.current)),Ue=null;return}s.flags&32768?(Ke||u===1?n=!0:So||(Be&536870912)!==0?n=!1:(Zs=n=!0,(u===2||u===9||u===3||u===6)&&(u=Mn.current,u!==null&&u.tag===13&&(u.flags|=16384))),wE(s,n)):Kh(s)}function Kh(n){var s=n;do{if((s.flags&32768)!==0){wE(s,Zs);return}n=s.return;var o=t1(s.alternate,s,gs);if(o!==null){Ue=o;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=n}while(s!==null);At===0&&(At=5)}function wE(n,s){do{var o=n1(n.alternate,n);if(o!==null){o.flags&=32767,Ue=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=o}while(n!==null);At=6,Ue=null}function RE(n,s,o,u,f,m,_,b,O){n.cancelPendingCommit=null;do Qh();while(Gt!==0);if((et&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=$d,jd(n,o,m,_,b,O),n===ft&&(Ue=ft=null,Be=0),Ao=s,nr=n,ys=o,ip=m,sp=f,gE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,m1(Ms,function(){return VE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=ce.p,ce.p=2,_=et,et|=4;try{i1(n,s,o)}finally{et=_,ce.p=f,J.T=u}}Gt=1,CE(),DE(),NE()}}function CE(){if(Gt===1){Gt=0;var n=nr,s=Ao,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=ce.p;ce.p=2;var f=et;et|=4;try{lE(s,n);var m=vp,_=m_(n.containerInfo),b=m.focusedElem,O=m.selectionRange;if(_!==b&&b&&b.ownerDocument&&d_(b.ownerDocument.documentElement,b)){if(O!==null&&Hd(b)){var H=O.start,Z=O.end;if(Z===void 0&&(Z=H),"selectionStart"in b)b.selectionStart=H,b.selectionEnd=Math.min(Z,b.value.length);else{var ne=b.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var X=G.getSelection(),ye=b.textContent.length,Re=Math.min(O.start,ye),ht=O.end===void 0?Re:Math.min(O.end,ye);!X.extend&&Re>ht&&(_=ht,ht=Re,Re=_);var j=f_(b,Re),L=f_(b,ht);if(j&&L&&(X.rangeCount!==1||X.anchorNode!==j.node||X.anchorOffset!==j.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var F=ne.createRange();F.setStart(j.node,j.offset),X.removeAllRanges(),Re>ht?(X.addRange(F),X.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),X.addRange(F))}}}}for(ne=[],X=b;X=X.parentNode;)X.nodeType===1&&ne.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ne.length;b++){var te=ne[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}af=!!_p,vp=_p=null}finally{et=f,ce.p=u,J.T=o}}n.current=s,Gt=2}}function DE(){if(Gt===2){Gt=0;var n=nr,s=Ao,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=ce.p;ce.p=2;var f=et;et|=4;try{iE(n,s.alternate,s)}finally{et=f,ce.p=u,J.T=o}}Gt=3}}function NE(){if(Gt===4||Gt===3){Gt=0,Ge();var n=nr,s=Ao,o=ys,u=gE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Gt=5:(Gt=0,Ao=nr=null,xE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(tr=null),es(o),s=s.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(ri,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=J.T,f=ce.p,ce.p=2,J.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var b=u[_];m(b.value,{componentStack:b.stack})}}finally{J.T=s,ce.p=f}}(ys&3)!==0&&Qh(),qi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===rp?_u++:(_u=0,rp=n):_u=0,vu(0)}}function xE(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Zl(s)))}function Qh(){return CE(),DE(),NE(),VE()}function VE(){if(Gt!==5)return!1;var n=nr,s=ip;ip=0;var o=es(ys),u=J.T,f=ce.p;try{ce.p=32>o?32:o,J.T=null,o=sp,sp=null;var m=nr,_=ys;if(Gt=0,Ao=nr=null,ys=0,(et&6)!==0)throw Error(i(331));var b=et;if(et|=4,dE(m.current),cE(m,m.current,_,o),et=b,vu(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(ri,m)}catch{}return!0}finally{ce.p=f,J.T=u,xE(n,s)}}function ME(n,s,o){s=Xn(o,s),s=Lm(n.stateNode,s,2),n=$s(n,s,2),n!==null&&(Br(n,2),qi(n))}function st(n,s,o){if(n.tag===3)ME(n,n,o);else for(;s!==null;){if(s.tag===3){ME(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(tr===null||!tr.has(u))){n=Xn(o,n),o=Ov(2),u=$s(s,o,2),u!==null&&(Pv(o,u,s,n),Br(u,2),qi(u));break}}s=s.return}}function lp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new a1;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(ep=!0,f.add(o),n=h1.bind(null,n,s,o),s.then(n,n))}function h1(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ft===n&&(Be&o)===o&&(At===4||At===3&&(Be&62914560)===Be&&300>Ye()-Bh?(et&2)===0&&Io(n,0):tp|=o,bo===Be&&(bo=0)),qi(n)}function OE(n,s){s===0&&(s=Fc()),n=ta(n,s),n!==null&&(Br(n,s),qi(n))}function f1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),OE(n,o)}function d1(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),OE(n,o)}function m1(n,s){return gt(n,s)}var Yh=null,Ro=null,up=!1,$h=!1,cp=!1,sr=0;function qi(n){n!==Ro&&n.next===null&&(Ro===null?Yh=Ro=n:Ro=Ro.next=n),$h=!0,up||(up=!0,g1())}function vu(n,s){if(!cp&&$h){cp=!0;do for(var o=!1,u=Yh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,b=u.pingedLanes;m=(1<<31-wt(42|n)+1)-1,m&=f&~(_&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,UE(u,m))}else m=Be,m=Ai(u,u===ft?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ai(u,m)||(o=!0,UE(u,m));u=u.next}while(o);cp=!1}}function p1(){PE()}function PE(){$h=up=!1;var n=0;sr!==0&&w1()&&(n=sr);for(var s=Ye(),o=null,u=Yh;u!==null;){var f=u.next,m=kE(u,s);m===0?(u.next=null,o===null?Yh=f:o.next=f,f===null&&(Ro=o)):(o=u,(n!==0||(m&3)!==0)&&($h=!0)),u=f}Gt!==0&&Gt!==5||vu(n),sr!==0&&(sr=0)}function kE(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-wt(m),b=1<<_,O=f[_];O===-1?((b&o)===0||(b&u)!==0)&&(f[_]=zd(b,s)):O<=s&&(n.expiredLanes|=b),m&=~b}if(s=ft,o=Be,o=Ai(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(it===2||it===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Rn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ai(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Rn(u),es(o)){case 2:case 8:o=Dl;break;case 32:o=Ms;break;case 268435456:o=Uc;break;default:o=Ms}return u=LE.bind(null,n),o=gt(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Rn(u),n.callbackPriority=2,n.callbackNode=null,2}function LE(n,s){if(Gt!==0&&Gt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Qh()&&n.callbackNode!==o)return null;var u=Be;return u=Ai(n,n===ft?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(_E(n,u,s),kE(n,Ye()),n.callbackNode!=null&&n.callbackNode===o?LE.bind(null,n):null)}function UE(n,s){if(Qh())return null;_E(n,s,!0)}function g1(){C1(function(){(et&6)!==0?gt(Cl,p1):PE()})}function hp(){if(sr===0){var n=ho;n===0&&(n=Si,Si<<=1,(Si&261888)===0&&(Si=256)),sr=n}return sr}function zE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Xa(""+n)}function jE(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function y1(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=zE((f[Yt]||null).action),_=u.submitter;_&&(s=(s=_[Yt]||null)?zE(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var b=new Pi("action","action",null,u,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(sr!==0){var O=_?jE(f,_):new FormData(f);xm(o,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(b.preventDefault(),O=_?jE(f,_):new FormData(f),xm(o,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var fp=0;fp<Yd.length;fp++){var dp=Yd[fp],_1=dp.toLowerCase(),v1=dp[0].toUpperCase()+dp.slice(1);mi(_1,"on"+v1)}mi(y_,"onAnimationEnd"),mi(__,"onAnimationIteration"),mi(v_,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(Pw,"onTransitionRun"),mi(kw,"onTransitionStart"),mi(Lw,"onTransitionCancel"),mi(E_,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eu));function BE(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var _=u.length-1;0<=_;_--){var b=u[_],O=b.instance,H=b.currentTarget;if(b=b.listener,O!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=H;try{m(f)}catch(Z){ch(Z)}f.currentTarget=null,m=O}else for(_=0;_<u.length;_++){if(b=u[_],O=b.instance,H=b.currentTarget,b=b.listener,O!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=H;try{m(f)}catch(Z){ch(Z)}f.currentTarget=null,m=O}}}}function ze(n,s){var o=s[Ga];o===void 0&&(o=s[Ga]=new Set);var u=n+"__bubble";o.has(u)||(qE(s,n,2,!1),o.add(u))}function mp(n,s,o){var u=0;s&&(u|=4),qE(o,n,u,s)}var Xh="_reactListening"+Math.random().toString(36).slice(2);function pp(n){if(!n[Xh]){n[Xh]=!0,Vl.forEach(function(o){o!=="selectionchange"&&(E1.has(o)||mp(o,!1,n),mp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Xh]||(s[Xh]=!0,mp("selectionchange",!1,s))}}function qE(n,s,o,u){switch(yT(s)){case 2:var f=Y1;break;case 8:f=$1;break;default:f=Np}o=f.bind(null,s,o,n),f=void 0,!Qr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function gp(n,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var b=u.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=u.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Ci(b),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){u=m=_;continue e}b=b.parentNode}}u=u.return}zs(function(){var H=m,Z=Kn(o),ne=[];e:{var G=T_.get(n);if(G!==void 0){var X=Pi,ye=n;switch(n){case"keypress":if($r(o)===0)break e;case"keydown":case"keyup":X=oh;break;case"focusin":ye="focus",X=Jr;break;case"focusout":ye="blur",X=Jr;break;case"beforeblur":case"afterblur":X=Jr;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case y_:case __:case v_:X=eh;break;case E_:X=I;break;case"scroll":case"scrollend":X=Hl;break;case"wheel":X=$;break;case"copy":case"cut":case"paste":X=th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=is;break;case"toggle":case"beforetoggle":X=Oe}var Re=(s&4)!==0,ht=!Re&&(n==="scroll"||n==="scrollend"),j=Re?G!==null?G+"Capture":null:G;Re=[];for(var L=H,F;L!==null;){var te=L;if(F=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||F===null||j===null||(te=ci(L,j),te!=null&&Re.push(Tu(L,te,F))),ht)break;L=L.return}0<Re.length&&(G=new X(G,ye,null,o,Z),ne.push({event:G,listeners:Re}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",G&&o!==Bl&&(ye=o.relatedTarget||o.fromElement)&&(Ci(ye)||ye[wi]))break e;if((X||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,X?(ye=o.relatedTarget||o.toElement,X=H,ye=ye?Ci(ye):null,ye!==null&&(ht=l(ye),Re=ye.tag,ye!==ht||Re!==5&&Re!==27&&Re!==6)&&(ye=null)):(X=null,ye=H),X!==ye)){if(Re=Gl,te="onMouseLeave",j="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Re=is,te="onPointerLeave",j="onPointerEnter",L="pointer"),ht=X==null?G:Dn(X),F=ye==null?G:Dn(ye),G=new Re(te,L+"leave",X,o,Z),G.target=ht,G.relatedTarget=F,te=null,Ci(Z)===H&&(Re=new Re(j,L+"enter",ye,o,Z),Re.target=F,Re.relatedTarget=ht,te=Re),ht=te,X&&ye)t:{for(Re=T1,j=X,L=ye,F=0,te=j;te;te=Re(te))F++;te=0;for(var Ie=L;Ie;Ie=Re(Ie))te++;for(;0<F-te;)j=Re(j),F--;for(;0<te-F;)L=Re(L),te--;for(;F--;){if(j===L||L!==null&&j===L.alternate){Re=j;break t}j=Re(j),L=Re(L)}Re=null}else Re=null;X!==null&&FE(ne,G,X,Re,!1),ye!==null&&ht!==null&&FE(ne,ht,ye,Re,!0)}}e:{if(G=H?Dn(H):window,X=G.nodeName&&G.nodeName.toLowerCase(),X==="select"||X==="input"&&G.type==="file")var Xe=a_;else if(s_(G))if(o_)Xe=Vw;else{Xe=Nw;var be=Dw}else X=G.nodeName,!X||X.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&$a(H.elementType)&&(Xe=a_):Xe=xw;if(Xe&&(Xe=Xe(n,H))){r_(ne,Xe,o,Z);break e}be&&be(n,G,H),n==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Ul(G,"number",G.value)}switch(be=H?Dn(H):window,n){case"focusin":(s_(be)||be.contentEditable==="true")&&(io=be,Gd=H,Xl=null);break;case"focusout":Xl=Gd=io=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,p_(ne,o,Z);break;case"selectionchange":if(Ow)break;case"keydown":case"keyup":p_(ne,o,Z)}var ke;if(Ze)e:{switch(n){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else no?Wr(n,o)&&(qe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(qe="onCompositionStart");qe&&(Ui&&o.locale!=="ko"&&(no||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&no&&(ke=Fl()):(Oi=Z,ql="value"in Oi?Oi.value:Oi.textContent,no=!0)),be=Jh(H,qe),0<be.length&&(qe=new Li(qe,n,null,o,Z),ne.push({event:qe,listeners:be}),ke?qe.data=ke:(ke=to(o),ke!==null&&(qe.data=ke)))),(ke=Yn?Iw(n,o):ww(n,o))&&(qe=Jh(H,"onBeforeInput"),0<qe.length&&(be=new Li("onBeforeInput","beforeinput",null,o,Z),ne.push({event:be,listeners:qe}),be.data=ke)),y1(ne,n,H,o,Z)}BE(ne,s)})}function Tu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Jh(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ci(n,o),f!=null&&u.unshift(Tu(n,f,m)),f=ci(n,s),f!=null&&u.push(Tu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function T1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function FE(n,s,o,u,f){for(var m=s._reactName,_=[];o!==null&&o!==u;){var b=o,O=b.alternate,H=b.stateNode;if(b=b.tag,O!==null&&O===u)break;b!==5&&b!==26&&b!==27||H===null||(O=H,f?(H=ci(o,m),H!=null&&_.unshift(Tu(o,H,O))):f||(H=ci(o,m),H!=null&&_.push(Tu(o,H,O)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var S1=/\r\n?/g,b1=/\u0000|\uFFFD/g;function HE(n){return(typeof n=="string"?n:""+n).replace(S1,`
`).replace(b1,"")}function GE(n,s){return s=HE(s),HE(n)===s}function ct(n,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||vn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&vn(n,""+u);break;case"className":Nn(n,"class",u);break;case"tabIndex":Nn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(n,o,u);break;case"style":jl(n,u,m);break;case"data":if(s!=="object"){Nn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Xa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&ct(n,s,"name",f.name,f,null),ct(n,s,"formEncType",f.formEncType,f,null),ct(n,s,"formMethod",f.formMethod,f,null),ct(n,s,"formTarget",f.formTarget,f,null)):(ct(n,s,"encType",f.encType,f,null),ct(n,s,"method",f.method,f,null),ct(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Xa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ui);break;case"onScroll":u!=null&&ze("scroll",n);break;case"onScrollEnd":u!=null&&ze("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Xa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":ze("beforetoggle",n),ze("toggle",n),Qa(n,"popover",u);break;case"xlinkActuate":Lt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Lt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Lt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Lt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Lt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Lt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Lt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Lt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Lt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qa(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Jc.get(o)||o,Qa(n,o,u))}}function yp(n,s,o,u,f,m){switch(o){case"style":jl(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?vn(n,u):(typeof u=="number"||typeof u=="bigint")&&vn(n,""+u);break;case"onScroll":u!=null&&ze("scroll",n);break;case"onScrollEnd":u!=null&&ze("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ml.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=n[Yt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Qa(n,o,u)}}}function rn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",n),ze("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(n,s,m,_,o,null)}}f&&ct(n,s,"srcSet",o.srcSet,o,null),u&&ct(n,s,"src",o.src,o,null);return;case"input":ze("invalid",n);var b=m=_=f=null,O=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":_=Z;break;case"checked":O=Z;break;case"defaultChecked":H=Z;break;case"value":m=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:ct(n,s,u,Z,o,null)}}Yc(n,m,b,O,H,_,f,!1);return;case"select":ze("invalid",n),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":_=b;break;case"multiple":u=b;default:ct(n,s,f,b,o,null)}s=m,o=_,n.multiple=!!u,s!=null?Ps(n,!!u,s,!1):o!=null&&Ps(n,!!u,o,!0);return;case"textarea":ze("invalid",n),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(b=o[_],b!=null))switch(_){case"value":u=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ct(n,s,_,b,o,null)}ks(n,u,f,m);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ct(n,s,O,u,o,null)}return;case"dialog":ze("beforetoggle",n),ze("toggle",n),ze("cancel",n),ze("close",n);break;case"iframe":case"object":ze("load",n);break;case"video":case"audio":for(u=0;u<Eu.length;u++)ze(Eu[u],n);break;case"image":ze("error",n),ze("load",n);break;case"details":ze("toggle",n);break;case"embed":case"source":case"link":ze("error",n),ze("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(n,s,H,u,o,null)}return;default:if($a(s)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&yp(n,s,Z,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&ct(n,s,b,u,o,null))}function A1(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,b=null,O=null,H=null,Z=null;for(X in o){var ne=o[X];if(o.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=ne;default:u.hasOwnProperty(X)||ct(n,s,X,null,u,ne)}}for(var G in u){var X=u[G];if(ne=o[G],u.hasOwnProperty(G)&&(X!=null||ne!=null))switch(G){case"type":m=X;break;case"name":f=X;break;case"checked":H=X;break;case"defaultChecked":Z=X;break;case"value":_=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==ne&&ct(n,s,G,X,u,ne)}}Ya(n,_,b,O,H,Z,m,f);return;case"select":X=_=b=G=null;for(m in o)if(O=o[m],o.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":X=O;default:u.hasOwnProperty(m)||ct(n,s,m,null,u,O)}for(f in u)if(m=u[f],O=o[f],u.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":G=m;break;case"defaultValue":b=m;break;case"multiple":_=m;default:m!==O&&ct(n,s,f,m,u,O)}s=b,o=_,u=X,G!=null?Ps(n,!!o,G,!1):!!u!=!!o&&(s!=null?Ps(n,!!o,s,!0):Ps(n,!!o,o?[]:"",!1));return;case"textarea":X=G=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ct(n,s,b,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":G=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&ct(n,s,_,f,u,m)}$c(n,G,X);return;case"option":for(var ye in o)if(G=o[ye],o.hasOwnProperty(ye)&&G!=null&&!u.hasOwnProperty(ye))switch(ye){case"selected":n.selected=!1;break;default:ct(n,s,ye,null,u,G)}for(O in u)if(G=u[O],X=o[O],u.hasOwnProperty(O)&&G!==X&&(G!=null||X!=null))switch(O){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ct(n,s,O,G,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in o)G=o[Re],o.hasOwnProperty(Re)&&G!=null&&!u.hasOwnProperty(Re)&&ct(n,s,Re,null,u,G);for(H in u)if(G=u[H],X=o[H],u.hasOwnProperty(H)&&G!==X&&(G!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:ct(n,s,H,G,u,X)}return;default:if($a(s)){for(var ht in o)G=o[ht],o.hasOwnProperty(ht)&&G!==void 0&&!u.hasOwnProperty(ht)&&yp(n,s,ht,void 0,u,G);for(Z in u)G=u[Z],X=o[Z],!u.hasOwnProperty(Z)||G===X||G===void 0&&X===void 0||yp(n,s,Z,G,u,X);return}}for(var j in o)G=o[j],o.hasOwnProperty(j)&&G!=null&&!u.hasOwnProperty(j)&&ct(n,s,j,null,u,G);for(ne in u)G=u[ne],X=o[ne],!u.hasOwnProperty(ne)||G===X||G==null&&X==null||ct(n,s,ne,G,u,X)}function KE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function I1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,b=f.duration;if(m&&b&&KE(_)){for(_=0,b=f.responseEnd,u+=1;u<o.length;u++){var O=o[u],H=O.startTime;if(H>b)break;var Z=O.transferSize,ne=O.initiatorType;Z&&KE(ne)&&(O=O.responseEnd,_+=Z*(O<b?1:(b-H)/(O-H)))}if(--u,s+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var _p=null,vp=null;function Wh(n){return n.nodeType===9?n:n.ownerDocument}function QE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YE(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ep(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Tp=null;function w1(){var n=window.event;return n&&n.type==="popstate"?n===Tp?!1:(Tp=n,!0):(Tp=null,!1)}var $E=typeof setTimeout=="function"?setTimeout:void 0,R1=typeof clearTimeout=="function"?clearTimeout:void 0,XE=typeof Promise=="function"?Promise:void 0,C1=typeof queueMicrotask=="function"?queueMicrotask:typeof XE<"u"?function(n){return XE.resolve(null).then(n).catch(D1)}:$E;function D1(n){setTimeout(function(){throw n})}function rr(n){return n==="head"}function JE(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),xo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Su(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Su(o);for(var m=o.firstChild;m;){var _=m.nextSibling,b=m.nodeName;m[Ri]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Su(n.ownerDocument.body);o=f}while(o);xo(s)}function WE(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Sp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Sp(o),Ka(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function N1(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ri])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ti(n.nextSibling),n===null)break}return null}function x1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ti(n.nextSibling),n===null))return null;return n}function ZE(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=ti(n.nextSibling),n===null))return null;return n}function bp(n){return n.data==="$?"||n.data==="$~"}function Ap(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function V1(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ti(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Ip=null;function eT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return ti(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function tT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function nT(n,s,o){switch(s=Wh(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Su(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ka(n)}var ni=new Map,iT=new Set;function Zh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _s=ce.d;ce.d={f:M1,r:O1,D:P1,C:k1,L:L1,m:U1,X:j1,S:z1,M:B1};function M1(){var n=_s.f(),s=Hh();return n||s}function O1(n){var s=Gn(n);s!==null&&s.tag===5&&s.type==="form"?Ev(s):_s.r(n)}var Co=typeof document>"u"?null:document;function sT(n,s,o){var u=Co;if(u&&typeof s=="string"&&s){var f=_n(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),iT.has(f)||(iT.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),rn(s,"link",n),kt(s),u.head.appendChild(s)))}}function P1(n){_s.D(n),sT("dns-prefetch",n,null)}function k1(n,s){_s.C(n,s),sT("preconnect",n,s)}function L1(n,s,o){_s.L(n,s,o);var u=Co;if(u&&n&&s){var f='link[rel="preload"][as="'+_n(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+_n(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+_n(o.imageSizes)+'"]')):f+='[href="'+_n(n)+'"]';var m=f;switch(s){case"style":m=Do(n);break;case"script":m=No(n)}ni.has(m)||(n=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),ni.set(m,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(bu(m))||s==="script"&&u.querySelector(Au(m))||(s=u.createElement("link"),rn(s,"link",n),kt(s),u.head.appendChild(s)))}}function U1(n,s){_s.m(n,s);var o=Co;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+_n(u)+'"][href="'+_n(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=No(n)}if(!ni.has(m)&&(n=T({rel:"modulepreload",href:n},s),ni.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Au(m)))return}u=o.createElement("link"),rn(u,"link",n),kt(u),o.head.appendChild(u)}}}function z1(n,s,o){_s.S(n,s,o);var u=Co;if(u&&n){var f=Di(u).hoistableStyles,m=Do(n);s=s||"default";var _=f.get(m);if(!_){var b={loading:0,preload:null};if(_=u.querySelector(bu(m)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},o),(o=ni.get(m))&&wp(n,o);var O=_=u.createElement("link");kt(O),rn(O,"link",n),O._p=new Promise(function(H,Z){O.onload=H,O.onerror=Z}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,ef(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(m,_)}}}function j1(n,s){_s.X(n,s);var o=Co;if(o&&n){var u=Di(o).hoistableScripts,f=No(n),m=u.get(f);m||(m=o.querySelector(Au(f)),m||(n=T({src:n,async:!0},s),(s=ni.get(f))&&Rp(n,s),m=o.createElement("script"),kt(m),rn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function B1(n,s){_s.M(n,s);var o=Co;if(o&&n){var u=Di(o).hoistableScripts,f=No(n),m=u.get(f);m||(m=o.querySelector(Au(f)),m||(n=T({src:n,async:!0,type:"module"},s),(s=ni.get(f))&&Rp(n,s),m=o.createElement("script"),kt(m),rn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function rT(n,s,o,u){var f=(f=se.current)?Zh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Do(o.href),o=Di(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Do(o.href);var m=Di(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(bu(n)))&&!m._p&&(_.instance=m,_.state.loading=5),ni.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ni.set(n,o),m||q1(f,n,o,_.state))),s&&u===null)throw Error(i(528,""));return _}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=No(o),o=Di(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Do(n){return'href="'+_n(n)+'"'}function bu(n){return'link[rel="stylesheet"]['+n+"]"}function aT(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function q1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),rn(s,"link",o),kt(s),n.head.appendChild(s))}function No(n){return'[src="'+_n(n)+'"]'}function Au(n){return"script[async]"+n}function oT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+_n(o.href)+'"]');if(u)return s.instance=u,kt(u),u;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),kt(u),rn(u,"style",f),ef(u,o.precedence,n),s.instance=u;case"stylesheet":f=Do(o.href);var m=n.querySelector(bu(f));if(m)return s.state.loading|=4,s.instance=m,kt(m),m;u=aT(o),(f=ni.get(f))&&wp(u,f),m=(n.ownerDocument||n).createElement("link"),kt(m);var _=m;return _._p=new Promise(function(b,O){_.onload=b,_.onerror=O}),rn(m,"link",u),s.state.loading|=4,ef(m,o.precedence,n),s.instance=m;case"script":return m=No(o.src),(f=n.querySelector(Au(m)))?(s.instance=f,kt(f),f):(u=o,(f=ni.get(m))&&(u=T({},o),Rp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),kt(f),rn(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ef(u,o.precedence,n));return s.instance}function ef(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var b=u[_];if(b.dataset.precedence===s)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function wp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Rp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var tf=null;function lT(n,s,o){if(tf===null){var u=new Map,f=tf=new Map;f.set(o,u)}else f=tf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Ri]||m[Pt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=n+_;var b=u.get(_);b?b.push(m):u.set(_,[m])}}return u}function uT(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function F1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function cT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function H1(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Do(u.href),m=s.querySelector(bu(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=nf.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,kt(m);return}m=s.ownerDocument||s,u=aT(u),(f=ni.get(f))&&wp(u,f),m=m.createElement("link"),kt(m);var _=m;_._p=new Promise(function(b,O){_.onload=b,_.onerror=O}),rn(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=nf.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Cp=0;function G1(n,s){return n.stylesheets&&n.count===0&&rf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&rf(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Cp===0&&(Cp=62500*I1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&rf(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Cp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function nf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var sf=null;function rf(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,sf=new Map,s.forEach(K1,n),sf=null,nf.call(n))}function K1(n,s){if(!(s.state.loading&4)){var o=sf.get(n);if(o)var u=o.get(null);else{o=new Map,sf.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=s.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=nf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Iu={$$typeof:le,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function Q1(n,s,o,u,f,m,_,b,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function hT(n,s,o,u,f,m,_,b,O,H,Z,ne){return n=new Q1(n,s,o,_,O,H,Z,ne,b),s=1,m===!0&&(s|=24),m=Vn(3,null,null,s),n.current=m,m.stateNode=n,s=om(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},hm(m),n}function fT(n){return n?(n=ao,n):ao}function dT(n,s,o,u,f,m){f=fT(f),u.context===null?u.context=f:u.pendingContext=f,u=Ys(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=$s(n,u,s),o!==null&&(An(o,n,s),iu(o,n,s))}function mT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Dp(n,s){mT(n,s),(n=n.alternate)&&mT(n,s)}function pT(n){if(n.tag===13||n.tag===31){var s=ta(n,67108864);s!==null&&An(s,n,67108864),Dp(n,67108864)}}function gT(n){if(n.tag===13||n.tag===31){var s=Ln();s=Fr(s);var o=ta(n,s);o!==null&&An(o,n,s),Dp(n,s)}}var af=!0;function Y1(n,s,o,u){var f=J.T;J.T=null;var m=ce.p;try{ce.p=2,Np(n,s,o,u)}finally{ce.p=m,J.T=f}}function $1(n,s,o,u){var f=J.T;J.T=null;var m=ce.p;try{ce.p=8,Np(n,s,o,u)}finally{ce.p=m,J.T=f}}function Np(n,s,o,u){if(af){var f=xp(u);if(f===null)gp(n,s,u,of,o),_T(n,u);else if(J1(f,n,s,o,u))u.stopPropagation();else if(_T(n,u),s&4&&-1<X1.indexOf(n)){for(;f!==null;){var m=Gn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=bi(m.pendingLanes);if(_!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var O=1<<31-wt(_);b.entanglements[1]|=O,_&=~O}qi(m),(et&6)===0&&(qh=Ye()+500,vu(0))}}break;case 31:case 13:b=ta(m,2),b!==null&&An(b,m,2),Hh(),Dp(m,2)}if(m=xp(u),m===null&&gp(n,s,u,of,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else gp(n,s,u,null,o)}}function xp(n){return n=Kn(n),Vp(n)}var of=null;function Vp(n){if(of=null,n=Ci(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=d(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return of=n,null}function yT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cn()){case Cl:return 2;case Dl:return 8;case Ms:case Ud:return 32;case Uc:return 268435456;default:return 32}default:return 32}}var Mp=!1,ar=null,or=null,lr=null,wu=new Map,Ru=new Map,ur=[],X1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _T(n,s){switch(n){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":wu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(s.pointerId)}}function Cu(n,s,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Gn(s),s!==null&&pT(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function J1(n,s,o,u,f){switch(s){case"focusin":return ar=Cu(ar,n,s,o,u,f),!0;case"dragenter":return or=Cu(or,n,s,o,u,f),!0;case"mouseover":return lr=Cu(lr,n,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return wu.set(m,Cu(wu.get(m)||null,n,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Ru.set(m,Cu(Ru.get(m)||null,n,s,o,u,f)),!0}return!1}function vT(n){var s=Ci(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,oi(n.priority,function(){gT(o)});return}}else if(s===31){if(s=d(o),s!==null){n.blockedOn=s,oi(n.priority,function(){gT(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=xp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Bl=u,o.target.dispatchEvent(u),Bl=null}else return s=Gn(o),s!==null&&pT(s),n.blockedOn=o,!1;s.shift()}return!0}function ET(n,s,o){lf(n)&&o.delete(s)}function W1(){Mp=!1,ar!==null&&lf(ar)&&(ar=null),or!==null&&lf(or)&&(or=null),lr!==null&&lf(lr)&&(lr=null),wu.forEach(ET),Ru.forEach(ET)}function uf(n,s){n.blockedOn===s&&(n.blockedOn=null,Mp||(Mp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,W1)))}var cf=null;function TT(n){cf!==n&&(cf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){cf===n&&(cf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Vp(u||o)===null)continue;break}var m=Gn(o);m!==null&&(n.splice(s,3),s-=3,xm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function xo(n){function s(O){return uf(O,n)}ar!==null&&uf(ar,n),or!==null&&uf(or,n),lr!==null&&uf(lr,n),wu.forEach(s),Ru.forEach(s);for(var o=0;o<ur.length;o++){var u=ur[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ur.length&&(o=ur[0],o.blockedOn===null);)vT(o),o.blockedOn===null&&ur.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[Yt]||null;if(typeof m=="function")_||TT(o);else if(_){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Yt]||null)b=_.formAction;else if(Vp(f)!==null)continue}else b=_.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),TT(o)}}}function ST(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Op(n){this._internalRoot=n}hf.prototype.render=Op.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Ln();dT(o,u,n,s,null,null)},hf.prototype.unmount=Op.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;dT(n.current,2,null,n,null,null),Hh(),s[wi]=null}};function hf(n){this._internalRoot=n}hf.prototype.unstable_scheduleHydration=function(n){if(n){var s=Hc();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ur.length&&s!==0&&s<ur[o].priority;o++);ur.splice(o,0,n),o===0&&vT(n)}};var bT=e.version;if(bT!=="19.2.4")throw Error(i(527,bT,"19.2.4"));ce.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var Z1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{ri=ff.inject(Z1),Zt=ff}catch{}}return Nu.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=Nv,m=xv,_=Vv;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=hT(n,1,!1,null,null,o,u,null,f,m,_,ST),n[wi]=s.current,pp(n),new Op(s)},Nu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=Nv,_=xv,b=Vv,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),s=hT(n,1,!0,s,o??null,u,f,O,m,_,b,ST),s.context=fT(null),o=s.current,u=Ln(),u=Fr(u),f=Ys(u),f.callback=null,$s(o,f,u),o=u,s.current.lanes=o,Br(s,o),qi(s),n[wi]=s.current,pp(n),new hf(s)},Nu.version="19.2.4",Nu}var MT;function uR(){if(MT)return Lp.exports;MT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lp.exports=lR(),Lp.exports}var cR=uR();const hR=()=>{};var OT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},fR=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],d=r[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},G0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,d=c?r[a+1]:0,p=a+2<r.length,g=p?r[a+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,R=g&63;p||(R=64,c||(S=64)),i.push(t[v],t[T],t[S],t[R])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(H0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):fR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],d=a<r.length?t[r.charAt(a)]:0;++a;const g=a<r.length?t[r.charAt(a)]:64;++a;const T=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new dR;const S=l<<2|d>>4;if(i.push(S),g!==64){const R=d<<4&240|g>>2;if(i.push(R),T!==64){const x=g<<6&192|T;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class dR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mR=function(r){const e=H0(r);return G0.encodeByteArray(e,!0)},K0=function(r){return mR(r).replace(/\./g,"")},Q0=function(r){try{return G0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=()=>Y0().__FIREBASE_DEFAULTS__,gR=()=>{if(typeof process>"u"||typeof OT>"u")return;const r=OT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},yR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Q0(r[1]);return e&&JSON.parse(e)},hd=()=>{try{return hR()||pR()||gR()||yR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},_R=r=>{var e,t;return(t=(e=hd())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},$0=()=>{var r;return(r=hd())==null?void 0:r.config},X0=r=>{var e;return(e=hd())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J0(r){return(await fetch(r,{credentials:"include"})).ok}const Yu={};function ER(){const r={prod:[],emulator:[]};for(const e of Object.keys(Yu))Yu[e]?r.emulator.push(e):r.prod.push(e);return r}function TR(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let PT=!1;function SR(r,e){if(typeof window>"u"||typeof document>"u"||!_l(window.location.host)||Yu[r]===e||Yu[r]||PT)return;Yu[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=ER().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{PT=!0,c()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=TR(i),R=t("text"),x=document.getElementById(R)||document.createElement("span"),C=t("learnmore"),z=document.getElementById(C)||document.createElement("a"),Q=t("preprendIcon"),ae=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const le=S.element;d(le),v(z,C);const _e=g();p(ae,Q),le.append(ae,x,z,_e),document.body.appendChild(le)}l?(x.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function W0(){var e;const r=(e=hd())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function wR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RR(){const r=Kt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Z0(){return!W0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eb(){return!W0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function tb(){try{return typeof indexedDB=="object"}catch{return!1}}function CR(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="FirebaseError";class Ds extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=DR,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bc.prototype.create)}}class bc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?NR(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ds(a,d,i)}}function NR(r,e){return r.replace(xR,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const xR=/\{\$([^}]+)}/g;function VR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Na(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(kT(l)&&kT(c)){if(!Na(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function kT(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Bu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function qu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function MR(r,e){const t=new OR(r,e);return t.subscribe.bind(t)}class OR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");PR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Bp),a.error===void 0&&(a.error=Bp),a.complete===void 0&&(a.complete=Bp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PR(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Bp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(r){return r&&r._delegate?r._delegate:r}class xa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new vR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UR(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:LR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LR(r){return r===pa?void 0:r}function UR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Fe||(Fe={}));const jR={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},BR=Fe.INFO,qR={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},FR=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=qR[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yg{constructor(e){this.name=e,this._logLevel=BR,this._logHandler=FR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const HR=(r,e)=>e.some(t=>r instanceof t);let LT,UT;function GR(){return LT||(LT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KR(){return UT||(UT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nb=new WeakMap,og=new WeakMap,ib=new WeakMap,qp=new WeakMap,$g=new WeakMap;function QR(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Tr(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&nb.set(t,r)}).catch(()=>{}),$g.set(e,r),e}function YR(r){if(og.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});og.set(r,e)}let lg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return og.get(r);if(e==="objectStoreNames")return r.objectStoreNames||ib.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tr(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $R(r){lg=r(lg)}function XR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Fp(this),e,...t);return ib.set(i,e.sort?e.sort():[e]),Tr(i)}:KR().includes(r)?function(...e){return r.apply(Fp(this),e),Tr(nb.get(this))}:function(...e){return Tr(r.apply(Fp(this),e))}}function JR(r){return typeof r=="function"?XR(r):(r instanceof IDBTransaction&&YR(r),HR(r,GR())?new Proxy(r,lg):r)}function Tr(r){if(r instanceof IDBRequest)return QR(r);if(qp.has(r))return qp.get(r);const e=JR(r);return e!==r&&(qp.set(r,e),$g.set(e,r)),e}const Fp=r=>$g.get(r);function WR(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),d=Tr(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Tr(c.result),p.oldVersion,p.newVersion,Tr(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const ZR=["get","getKey","getAll","getAllKeys","count"],eC=["put","add","delete","clear"],Hp=new Map;function zT(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Hp.get(e))return Hp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=eC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||ZR.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return Hp.set(e,l),l}$R(r=>({...r,get:(e,t,i)=>zT(e,t)||r.get(e,t,i),has:(e,t)=>!!zT(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function nC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ug="@firebase/app",jT="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new Yg("@firebase/app"),iC="@firebase/app-compat",sC="@firebase/analytics-compat",rC="@firebase/analytics",aC="@firebase/app-check-compat",oC="@firebase/app-check",lC="@firebase/auth",uC="@firebase/auth-compat",cC="@firebase/database",hC="@firebase/data-connect",fC="@firebase/database-compat",dC="@firebase/functions",mC="@firebase/functions-compat",pC="@firebase/installations",gC="@firebase/installations-compat",yC="@firebase/messaging",_C="@firebase/messaging-compat",vC="@firebase/performance",EC="@firebase/performance-compat",TC="@firebase/remote-config",SC="@firebase/remote-config-compat",bC="@firebase/storage",AC="@firebase/storage-compat",IC="@firebase/firestore",wC="@firebase/ai",RC="@firebase/firestore-compat",CC="firebase",DC="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",NC={[ug]:"fire-core",[iC]:"fire-core-compat",[rC]:"fire-analytics",[sC]:"fire-analytics-compat",[oC]:"fire-app-check",[aC]:"fire-app-check-compat",[lC]:"fire-auth",[uC]:"fire-auth-compat",[cC]:"fire-rtdb",[hC]:"fire-data-connect",[fC]:"fire-rtdb-compat",[dC]:"fire-fn",[mC]:"fire-fn-compat",[pC]:"fire-iid",[gC]:"fire-iid-compat",[yC]:"fire-fcm",[_C]:"fire-fcm-compat",[vC]:"fire-perf",[EC]:"fire-perf-compat",[TC]:"fire-rc",[SC]:"fire-rc-compat",[bC]:"fire-gcs",[AC]:"fire-gcs-compat",[IC]:"fire-fst",[RC]:"fire-fst-compat",[wC]:"fire-vertex","fire-js":"fire-js",[CC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new Map,xC=new Map,hg=new Map;function BT(r,e){try{r.container.addComponent(e)}catch(t){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Xo(r){const e=r.name;if(hg.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;hg.set(e,r);for(const t of Lf.values())BT(t,r);for(const t of xC.values())BT(t,r);return!0}function Xg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function zn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new bc("app","Firebase",VC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=DC;function sb(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:cg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Sr.create("bad-app-name",{appName:String(a)});if(t||(t=$0()),!t)throw Sr.create("no-options");const l=Lf.get(a);if(l){if(Na(t,l.options)&&Na(i,l.config))return l;throw Sr.create("duplicate-app",{appName:a})}const c=new zR(a);for(const p of hg.values())c.addComponent(p);const d=new MC(t,i,c);return Lf.set(a,d),d}function OC(r=cg){const e=Lf.get(r);if(!e&&r===cg&&$0())return sb();if(!e)throw Sr.create("no-app",{appName:r});return e}function br(r,e,t){let i=NC[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(c.join(" "));return}Xo(new xa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="firebase-heartbeat-database",kC=1,ac="firebase-heartbeat-store";let Gp=null;function rb(){return Gp||(Gp=WR(PC,kC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ac)}catch(t){console.warn(t)}}}}).catch(r=>{throw Sr.create("idb-open",{originalErrorMessage:r.message})})),Gp}async function LC(r){try{const t=(await rb()).transaction(ac),i=await t.objectStore(ac).get(ab(r));return await t.done,i}catch(e){if(e instanceof Ds)Is.warn(e.message);else{const t=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Is.warn(t.message)}}}async function qT(r,e){try{const i=(await rb()).transaction(ac,"readwrite");await i.objectStore(ac).put(e,ab(r)),await i.done}catch(t){if(t instanceof Ds)Is.warn(t.message);else{const i=Sr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Is.warn(i.message)}}}function ab(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=1024,zC=30;class jC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=FT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>zC){const c=FC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Is.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=FT(),{heartbeatsToSend:i,unsentEntries:a}=BC(this._heartbeatsCache.heartbeats),l=K0(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Is.warn(t),""}}}function FT(){return new Date().toISOString().substring(0,10)}function BC(r,e=UC){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),HT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),HT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class qC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tb()?CR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await LC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function HT(r){return K0(JSON.stringify({version:2,heartbeats:r})).length}function FC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(r){Xo(new xa("platform-logger",e=>new tC(e),"PRIVATE")),Xo(new xa("heartbeat",e=>new jC(e),"PRIVATE")),br(ug,jT,r),br(ug,jT,"esm2020"),br("fire-js","")}HC("");var GC="firebase",KC="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(GC,KC,"app");function ob(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QC=ob,lb=new bc("auth","Firebase",ob());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Yg("@firebase/auth");function YC(r,...e){Uf.logLevel<=Fe.WARN&&Uf.warn(`Auth (${vl}): ${r}`,...e)}function Tf(r,...e){Uf.logLevel<=Fe.ERROR&&Uf.error(`Auth (${vl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(r,...e){throw Wg(r,...e)}function Ei(r,...e){return Wg(r,...e)}function Jg(r,e,t){const i={...QC(),[e]:t};return new bc("auth","Firebase",i).create(e,{appName:r.name})}function bs(r){return Jg(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $C(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&si(r,"argument-error"),Jg(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wg(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return lb.create(r,...e)}function De(r,e,...t){if(!r)throw Wg(e,...t)}function Es(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Tf(e),new Error(e)}function ws(r,e){r||Es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function XC(){return GT()==="http:"||GT()==="https:"}function GT(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XC()||IR()||"connection"in navigator)?navigator.onLine:!0}function WC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile=bR()||wR()}get(){return JC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(r,e){ws(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tD=new Ic(3e4,6e4);function Vr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Mr(r,e,t,i,a={}){return cb(r,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Ac({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...l};return AR()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&_l(r.emulatorConfig.host)&&(g.credentials="include"),ub.fetch()(await hb(r,r.config.apiHost,t,d),g)})}async function cb(r,e,t){r._canInitEmulator=!1;const i={...ZC,...e};try{const a=new iD(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw df(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw df(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw df(r,"user-disabled",c);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Jg(r,v,g);si(r,v)}}catch(a){if(a instanceof Ds)throw a;si(r,"network-request-failed",{message:String(a)})}}async function wc(r,e,t,i,a={}){const l=await Mr(r,e,t,i,a);return"mfaPendingCredential"in l&&si(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function hb(r,e,t,i){const a=`${e}${t}?${i}`,l=r,c=l.config.emulator?Zg(r.config,a):`${r.config.apiScheme}://${a}`;return eD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function nD(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),tD.get())})}}function df(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ei(r,e,i);return a.customData._tokenResponse=t,a}function KT(r){return r!==void 0&&r.enterprise!==void 0}class sD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rD(r,e){return Mr(r,"GET","/v2/recaptchaConfig",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(r,e){return Mr(r,"POST","/v1/accounts:delete",e)}async function zf(r,e){return Mr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oD(r,e=!1){const t=Vt(r),i=await t.getIdToken(e),a=ey(i);De(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:$u(Kp(a.auth_time)),issuedAtTime:$u(Kp(a.iat)),expirationTime:$u(Kp(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Kp(r){return Number(r)*1e3}function ey(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Q0(t);return a?JSON.parse(a):(Tf("Failed to decode base64 JWT payload"),null)}catch(a){return Tf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function QT(r){const e=ey(r);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ds&&lD(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function lD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jf(r){var T;const e=r.auth,t=await r.getIdToken(),i=await oc(r,zf(e,{idToken:t}));De(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=(T=a.providerUserInfo)!=null&&T.length?fb(a.providerUserInfo):[],c=hD(r.providerData,l),d=r.isAnonymous,p=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new dg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,v)}async function cD(r){const e=Vt(r);await jf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hD(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function fb(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(r,e){const t=await cb(r,{},async()=>{const i=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await hb(r,a,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return r.emulatorConfig&&_l(r.emulatorConfig.host)&&(p.credentials="include"),ub.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dD(r,e){return Mr(r,"POST","/v2/accounts:revokeToken",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=QT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await fD(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Ho;return i&&(De(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(De(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return Es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(r,e){De(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new uD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new dg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await oc(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oD(this,e)}reload(){return cD(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await jf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(bs(this.auth));const e=await this.getIdToken();return await oc(this,aD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:R,providerData:x,stsTokenManager:C}=t;De(T&&C,e,"internal-error");const z=Ho.fromJSON(this.name,C);De(typeof T=="string",e,"internal-error"),hr(i,e.name),hr(a,e.name),De(typeof S=="boolean",e,"internal-error"),De(typeof R=="boolean",e,"internal-error"),hr(l,e.name),hr(c,e.name),hr(d,e.name),hr(p,e.name),hr(g,e.name),hr(v,e.name);const Q=new vi({uid:T,auth:e,email:a,emailVerified:S,displayName:i,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:z,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(Q.providerData=x.map(ae=>({...ae}))),p&&(Q._redirectEventId=p),Q}static async _fromIdTokenResponse(e,t,i=!1){const a=new Ho;a.updateFromServerResponse(t);const l=new vi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await jf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?fb(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new Ho;d.updateFromIdToken(i);const p=new vi({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new dg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Map;function Ts(r){ws(r instanceof Function,"Expected a class definition");let e=YT.get(r);return e?(ws(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,YT.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}db.type="NONE";const $T=db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(r,e,t){return`firebase:${r}:${e}:${t}`}class Go{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Sf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Sf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await zf(this.auth,{idToken:e}).catch(()=>{});return t?vi._fromGetAccountInfoResponse(this.auth,t,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Go(Ts($T),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Ts($T);const c=Sf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let T;if(typeof v=="string"){const S=await zf(e,{idToken:v}).catch(()=>{});if(!S)break;T=await vi._fromGetAccountInfoResponse(e,S,v)}else T=vi._fromJSON(e,v);g!==l&&(d=T),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Go(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Go(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vb(e))return"Blackberry";if(Eb(e))return"Webos";if(pb(e))return"Safari";if((e.includes("chrome/")||gb(e))&&!e.includes("edge/"))return"Chrome";if(_b(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function mb(r=Kt()){return/firefox\//i.test(r)}function pb(r=Kt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gb(r=Kt()){return/crios\//i.test(r)}function yb(r=Kt()){return/iemobile/i.test(r)}function _b(r=Kt()){return/android/i.test(r)}function vb(r=Kt()){return/blackberry/i.test(r)}function Eb(r=Kt()){return/webos/i.test(r)}function ty(r=Kt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function mD(r=Kt()){var e;return ty(r)&&!!((e=window.navigator)!=null&&e.standalone)}function pD(){return RR()&&document.documentMode===10}function Tb(r=Kt()){return ty(r)||_b(r)||Eb(r)||vb(r)||/windows phone/i.test(r)||yb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(r,e=[]){let t;switch(r){case"Browser":t=XT(Kt());break;case"Worker":t=`${XT(Kt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(r,e={}){return Mr(r,"GET","/v2/passwordPolicy",Vr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=6;class vD{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_D,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JT(this),this.idTokenSubscription=new JT(this),this.beforeStateQueue=new gD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ts(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await zf(this,{idToken:e}),i=await vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(zn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(i=p.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(bs(this));const t=e?Vt(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yD(this),t=new vD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await dD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ts(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Ts(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&YC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Or(r){return Vt(r)}class JT{constructor(e){this.auth=e,this.observer=null,this.addObserver=MR(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TD(r){fd=r}function bb(r){return fd.loadJS(r)}function SD(){return fd.recaptchaEnterpriseScript}function bD(){return fd.gapiScript}function AD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class ID{constructor(){this.enterprise=new wD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class wD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const RD="recaptcha-enterprise",Ab="NO_RECAPTCHA";class CD{constructor(e){this.type=RD,this.auth=Or(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{rD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new sD(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;KT(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(Ab)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ID().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&KT(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=SD();p.length!==0&&(p+=d),bb(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function WT(r,e,t,i=!1,a=!1){const l=new CD(r);let c;if(a)c=Ab;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function mg(r,e,t,i,a){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await WT(r,e,t,t==="getOobCode");return i(r,c)}else return i(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await WT(r,e,t,t==="getOobCode");return i(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(r,e){const t=Xg(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Na(l,e??{}))return a;si(a,"already-initialized")}return t.initialize({options:e})}function ND(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ts);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function xD(r,e,t){const i=Or(r);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=Ib(e),{host:c,port:d}=VD(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Na(g,i.config.emulator)&&Na(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,_l(c)?(J0(`${l}//${c}${p}`),SR("Auth",!0)):MD()}function Ib(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function VD(r){const e=Ib(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:ZT(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:ZT(c)}}}function ZT(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function MD(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Es("not implemented")}_getIdTokenResponse(e){return Es("not implemented")}_linkToIdToken(e,t){return Es("not implemented")}_getReauthenticationResolver(e){return Es("not implemented")}}async function OD(r,e){return Mr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(r,e){return wc(r,"POST","/v1/accounts:signInWithPassword",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(r,e){return wc(r,"POST","/v1/accounts:signInWithEmailLink",Vr(r,e))}async function LD(r,e){return wc(r,"POST","/v1/accounts:signInWithEmailLink",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends ny{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new lc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new lc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,t,"signInWithPassword",PD);case"emailLink":return kD(e,{email:this._email,oobCode:this._password});default:si(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,i,"signUpPassword",OD);case"emailLink":return LD(e,{idToken:t,email:this._email,oobCode:this._password});default:si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(r,e){return wc(r,"POST","/v1/accounts:signInWithIdp",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="http://localhost";class Va extends ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):si("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Va(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ko(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:UD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ac(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jD(r){const e=Bu(qu(r)).link,t=e?Bu(qu(e)).deep_link_id:null,i=Bu(qu(r)).deep_link_id;return(i?Bu(qu(i)).link:null)||i||t||e||r}class iy{constructor(e){const t=Bu(qu(e)),i=t.apiKey??null,a=t.oobCode??null,l=zD(t.mode??null);De(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=jD(e);try{return new iy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(e,t){return lc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=iy.parseLink(t);return De(i,"argument-error"),lc._fromEmailAndCode(e,i.code,i.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends sy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Rc{constructor(){super("facebook.com")}static credential(e){return Va._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Va._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return vs.credential(t,i)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Rc{constructor(){super("github.com")}static credential(e){return Va._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Rc{constructor(){super("twitter.com")}static credential(e,t){return Va._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return _r.credential(t,i)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(r,e){return wc(r,"POST","/v1/accounts:signUp",Vr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await vi._fromIdTokenResponse(e,i,a),c=eS(i);return new Ma({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=eS(i);return new Ma({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function eS(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Ds{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Bf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Bf(e,t,i,a)}}function wb(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Bf._fromErrorAndOperation(r,l,e,i):l})}async function qD(r,e,t=!1){const i=await oc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ma._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(r,e,t=!1){const{auth:i}=r;if(zn(i.app))return Promise.reject(bs(i));const a="reauthenticate";try{const l=await oc(r,wb(i,a,e,r),t);De(l.idToken,i,"internal-error");const c=ey(l.idToken);De(c,i,"internal-error");const{sub:d}=c;return De(r.uid===d,i,"user-mismatch"),Ma._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&si(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(r,e,t=!1){if(zn(r.app))return Promise.reject(bs(r));const i="signIn",a=await wb(r,i,e),l=await Ma._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}async function HD(r,e){return Rb(Or(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(r){const e=Or(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GD(r,e,t){if(zn(r.app))return Promise.reject(bs(r));const i=Or(r),c=await mg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Cb(r),p}),d=await Ma._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function KD(r,e,t){return zn(r.app)?Promise.reject(bs(r)):HD(Vt(r),El.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Cb(r),i})}function QD(r,e,t,i){return Vt(r).onIdTokenChanged(e,t,i)}function YD(r,e,t){return Vt(r).beforeAuthStateChanged(e,t)}function $D(r,e,t,i){return Vt(r).onAuthStateChanged(e,t,i)}function XD(r){return Vt(r).signOut()}const qf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qf,"1"),this.storage.removeItem(qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=1e3,WD=10;class Nb extends Db{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);pD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,WD):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},JD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nb.type="LOCAL";const ZD=Nb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends Db{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xb.type="SESSION";const Vb=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new dd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await eN(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=ry("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const S=T;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}function nN(r){$i().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function iN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function rN(){return Mb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="firebaseLocalStorageDb",aN=1,Ff="firebaseLocalStorage",Pb="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function md(r,e){return r.transaction([Ff],e?"readwrite":"readonly").objectStore(Ff)}function oN(){const r=indexedDB.deleteDatabase(Ob);return new Cc(r).toPromise()}function pg(){const r=indexedDB.open(Ob,aN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Ff,{keyPath:Pb})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Ff)?e(i):(i.close(),await oN(),e(await pg()))})})}async function tS(r,e,t){const i=md(r,!0).put({[Pb]:e,value:t});return new Cc(i).toPromise()}async function lN(r,e){const t=md(r,!1).get(e),i=await new Cc(t).toPromise();return i===void 0?null:i.value}function nS(r,e){const t=md(r,!0).delete(e);return new Cc(t).toPromise()}const uN=800,cN=3;class kb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>cN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dd._getInstance(rN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await iN(),!this.activeServiceWorker)return;this.sender=new tN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pg();return await tS(e,qf,"1"),await nS(e,qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>tS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>lN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=md(a,!1).getAll();return new Cc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kb.type="LOCAL";const hN=kb;new Ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(r,e){return e?Ts(e):(De(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay extends ny{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fN(r){return Rb(r.auth,new ay(r),r.bypassAuthState)}function dN(r){const{auth:e,user:t}=r;return De(t,e,"internal-error"),FD(t,new ay(r),r.bypassAuthState)}async function mN(r){const{auth:e,user:t}=r;return De(t,e,"internal-error"),qD(t,new ay(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fN;case"linkViaPopup":case"linkViaRedirect":return mN;case"reauthViaPopup":case"reauthViaRedirect":return dN;default:si(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new Ic(2e3,1e4);async function gN(r,e,t){if(zn(r.app))return Promise.reject(Ei(r,"operation-not-supported-in-this-environment"));const i=Or(r);$C(r,e,sy);const a=Lb(i,t);return new ba(i,"signInViaPopup",e,a).executeNotNull()}class ba extends Ub{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,ba.currentPopupAction&&ba.currentPopupAction.cancel(),ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=ry();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pN.get())};e()}}ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="pendingRedirect",bf=new Map;class _N extends Ub{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=bf.get(this.auth._key());if(!e){try{const i=await vN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}bf.set(this.auth._key(),e)}return this.bypassAuthState||bf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vN(r,e){const t=SN(e),i=TN(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function EN(r,e){bf.set(r._key(),e)}function TN(r){return Ts(r._redirectPersistence)}function SN(r){return Sf(yN,r.config.apiKey,r.name)}async function bN(r,e,t=!1){if(zn(r.app))return Promise.reject(bs(r));const i=Or(r),a=Lb(i,e),c=await new _N(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=600*1e3;class IN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!zb(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ei(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AN&&this.cachedEventUids.clear(),this.cachedEventUids.has(iS(e))}saveEventToCache(e){this.cachedEventUids.add(iS(e)),this.lastProcessedEventTime=Date.now()}}function iS(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function zb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(r,e={}){return Mr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DN=/^https?/;async function NN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await RN(r);for(const t of e)try{if(xN(t))return}catch{}si(r,"unauthorized-domain")}function xN(r){const e=fg(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!DN.test(t))return!1;if(CN.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new Ic(3e4,6e4);function sS(){const r=$i().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function MN(r){return new Promise((e,t)=>{var a,l,c;function i(){sS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sS(),t(Ei(r,"network-request-failed"))},timeout:VN.get()})}if((l=(a=$i().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=$i().gapi)!=null&&c.load)i();else{const d=AD("iframefcb");return $i()[d]=()=>{gapi.load?i():t(Ei(r,"network-request-failed"))},bb(`${bD()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Af=null,e})}let Af=null;function ON(r){return Af=Af||MN(r),Af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new Ic(5e3,15e3),kN="__/auth/iframe",LN="emulator/auth/iframe",UN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jN(r){const e=r.config;De(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Zg(e,LN):`https://${r.config.authDomain}/${kN}`,i={apiKey:e.apiKey,appName:r.name,v:vl},a=zN.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Ac(i).slice(1)}`}async function BN(r){const e=await ON(r),t=$i().gapi;return De(t,r,"internal-error"),e.open({where:document.body,url:jN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UN,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ei(r,"network-request-failed"),d=$i().setTimeout(()=>{l(c)},PN.get());function p(){$i().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FN=500,HN=600,GN="_blank",KN="http://localhost";class rS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QN(r,e,t,i=FN,a=HN){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...qN,width:i.toString(),height:a.toString(),top:l,left:c},g=Kt().toLowerCase();t&&(d=gb(g)?GN:t),mb(g)&&(e=e||KN,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[R,x])=>`${S}${R}=${x},`,"");if(mD(g)&&d!=="_self")return YN(e||"",d),new rS(null);const T=window.open(e||"",d,v);De(T,r,"popup-blocked");try{T.focus()}catch{}return new rS(T)}function YN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="__/auth/handler",XN="emulator/auth/handler",JN=encodeURIComponent("fac");async function aS(r,e,t,i,a,l){De(r.config.authDomain,r,"auth-domain-config-required"),De(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:vl,eventId:a};if(e instanceof sy){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",VR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))c[v]=T}if(e instanceof Rc){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(c.scopes=v.join(","))}r.tenantId&&(c.tid=r.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await r._getAppCheckToken(),g=p?`#${JN}=${encodeURIComponent(p)}`:"";return`${WN(r)}?${Ac(d).slice(1)}${g}`}function WN({config:r}){return r.emulator?Zg(r,XN):`https://${r.authDomain}/${$N}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="webStorageSupport";class ZN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vb,this._completeRedirectFn=bN,this._overrideRedirectResult=EN}async _openPopup(e,t,i,a){var c;ws((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await aS(e,t,i,fg(),a);return QN(e,l,ry())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await aS(e,t,i,fg(),a);return nN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ws(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await BN(e),i=new IN(e);return t.register("authEvent",a=>(De(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qp,{type:Qp},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[Qp];l!==void 0&&t(!!l),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=NN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tb()||pb()||ty()}}const ex=ZN;var oS="@firebase/auth",lS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ix(r){Xo(new xa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sb(r)},g=new ED(i,a,l,p);return ND(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xo(new xa("auth-internal",e=>{const t=Or(e.getProvider("auth").getImmediate());return(i=>new tx(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(oS,lS,nx(r)),br(oS,lS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=300,rx=X0("authIdTokenMaxAge")||sx;let uS=null;const ax=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>rx)return;const a=t==null?void 0:t.token;uS!==a&&(uS=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function ox(r=OC()){const e=Xg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=DD(r,{popupRedirectResolver:ex,persistence:[hN,ZD,Vb]}),i=X0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=ax(l.toString());YD(t,c,()=>c(t.currentUser)),QD(t,d=>c(d))}}const a=_R("auth");return a&&xD(t,`http://${a}`),t}function lx(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}TD({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=Ei("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",lx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ix("Browser");var cS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,jb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function D(){}D.prototype=A.prototype,N.F=A.prototype,N.prototype=new D,N.prototype.constructor=N,N.D=function(P,M,U){for(var V=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)V[Qe-2]=arguments[Qe];return A.prototype[M].apply(P,V)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,A,D){D||(D=0);const P=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)P[M]=A.charCodeAt(D++)|A.charCodeAt(D++)<<8|A.charCodeAt(D++)<<16|A.charCodeAt(D++)<<24;else for(M=0;M<16;++M)P[M]=A[D++]|A[D++]<<8|A[D++]<<16|A[D++]<<24;A=N.g[0],D=N.g[1],M=N.g[2];let U=N.g[3],V;V=A+(U^D&(M^U))+P[0]+3614090360&4294967295,A=D+(V<<7&4294967295|V>>>25),V=U+(M^A&(D^M))+P[1]+3905402710&4294967295,U=A+(V<<12&4294967295|V>>>20),V=M+(D^U&(A^D))+P[2]+606105819&4294967295,M=U+(V<<17&4294967295|V>>>15),V=D+(A^M&(U^A))+P[3]+3250441966&4294967295,D=M+(V<<22&4294967295|V>>>10),V=A+(U^D&(M^U))+P[4]+4118548399&4294967295,A=D+(V<<7&4294967295|V>>>25),V=U+(M^A&(D^M))+P[5]+1200080426&4294967295,U=A+(V<<12&4294967295|V>>>20),V=M+(D^U&(A^D))+P[6]+2821735955&4294967295,M=U+(V<<17&4294967295|V>>>15),V=D+(A^M&(U^A))+P[7]+4249261313&4294967295,D=M+(V<<22&4294967295|V>>>10),V=A+(U^D&(M^U))+P[8]+1770035416&4294967295,A=D+(V<<7&4294967295|V>>>25),V=U+(M^A&(D^M))+P[9]+2336552879&4294967295,U=A+(V<<12&4294967295|V>>>20),V=M+(D^U&(A^D))+P[10]+4294925233&4294967295,M=U+(V<<17&4294967295|V>>>15),V=D+(A^M&(U^A))+P[11]+2304563134&4294967295,D=M+(V<<22&4294967295|V>>>10),V=A+(U^D&(M^U))+P[12]+1804603682&4294967295,A=D+(V<<7&4294967295|V>>>25),V=U+(M^A&(D^M))+P[13]+4254626195&4294967295,U=A+(V<<12&4294967295|V>>>20),V=M+(D^U&(A^D))+P[14]+2792965006&4294967295,M=U+(V<<17&4294967295|V>>>15),V=D+(A^M&(U^A))+P[15]+1236535329&4294967295,D=M+(V<<22&4294967295|V>>>10),V=A+(M^U&(D^M))+P[1]+4129170786&4294967295,A=D+(V<<5&4294967295|V>>>27),V=U+(D^M&(A^D))+P[6]+3225465664&4294967295,U=A+(V<<9&4294967295|V>>>23),V=M+(A^D&(U^A))+P[11]+643717713&4294967295,M=U+(V<<14&4294967295|V>>>18),V=D+(U^A&(M^U))+P[0]+3921069994&4294967295,D=M+(V<<20&4294967295|V>>>12),V=A+(M^U&(D^M))+P[5]+3593408605&4294967295,A=D+(V<<5&4294967295|V>>>27),V=U+(D^M&(A^D))+P[10]+38016083&4294967295,U=A+(V<<9&4294967295|V>>>23),V=M+(A^D&(U^A))+P[15]+3634488961&4294967295,M=U+(V<<14&4294967295|V>>>18),V=D+(U^A&(M^U))+P[4]+3889429448&4294967295,D=M+(V<<20&4294967295|V>>>12),V=A+(M^U&(D^M))+P[9]+568446438&4294967295,A=D+(V<<5&4294967295|V>>>27),V=U+(D^M&(A^D))+P[14]+3275163606&4294967295,U=A+(V<<9&4294967295|V>>>23),V=M+(A^D&(U^A))+P[3]+4107603335&4294967295,M=U+(V<<14&4294967295|V>>>18),V=D+(U^A&(M^U))+P[8]+1163531501&4294967295,D=M+(V<<20&4294967295|V>>>12),V=A+(M^U&(D^M))+P[13]+2850285829&4294967295,A=D+(V<<5&4294967295|V>>>27),V=U+(D^M&(A^D))+P[2]+4243563512&4294967295,U=A+(V<<9&4294967295|V>>>23),V=M+(A^D&(U^A))+P[7]+1735328473&4294967295,M=U+(V<<14&4294967295|V>>>18),V=D+(U^A&(M^U))+P[12]+2368359562&4294967295,D=M+(V<<20&4294967295|V>>>12),V=A+(D^M^U)+P[5]+4294588738&4294967295,A=D+(V<<4&4294967295|V>>>28),V=U+(A^D^M)+P[8]+2272392833&4294967295,U=A+(V<<11&4294967295|V>>>21),V=M+(U^A^D)+P[11]+1839030562&4294967295,M=U+(V<<16&4294967295|V>>>16),V=D+(M^U^A)+P[14]+4259657740&4294967295,D=M+(V<<23&4294967295|V>>>9),V=A+(D^M^U)+P[1]+2763975236&4294967295,A=D+(V<<4&4294967295|V>>>28),V=U+(A^D^M)+P[4]+1272893353&4294967295,U=A+(V<<11&4294967295|V>>>21),V=M+(U^A^D)+P[7]+4139469664&4294967295,M=U+(V<<16&4294967295|V>>>16),V=D+(M^U^A)+P[10]+3200236656&4294967295,D=M+(V<<23&4294967295|V>>>9),V=A+(D^M^U)+P[13]+681279174&4294967295,A=D+(V<<4&4294967295|V>>>28),V=U+(A^D^M)+P[0]+3936430074&4294967295,U=A+(V<<11&4294967295|V>>>21),V=M+(U^A^D)+P[3]+3572445317&4294967295,M=U+(V<<16&4294967295|V>>>16),V=D+(M^U^A)+P[6]+76029189&4294967295,D=M+(V<<23&4294967295|V>>>9),V=A+(D^M^U)+P[9]+3654602809&4294967295,A=D+(V<<4&4294967295|V>>>28),V=U+(A^D^M)+P[12]+3873151461&4294967295,U=A+(V<<11&4294967295|V>>>21),V=M+(U^A^D)+P[15]+530742520&4294967295,M=U+(V<<16&4294967295|V>>>16),V=D+(M^U^A)+P[2]+3299628645&4294967295,D=M+(V<<23&4294967295|V>>>9),V=A+(M^(D|~U))+P[0]+4096336452&4294967295,A=D+(V<<6&4294967295|V>>>26),V=U+(D^(A|~M))+P[7]+1126891415&4294967295,U=A+(V<<10&4294967295|V>>>22),V=M+(A^(U|~D))+P[14]+2878612391&4294967295,M=U+(V<<15&4294967295|V>>>17),V=D+(U^(M|~A))+P[5]+4237533241&4294967295,D=M+(V<<21&4294967295|V>>>11),V=A+(M^(D|~U))+P[12]+1700485571&4294967295,A=D+(V<<6&4294967295|V>>>26),V=U+(D^(A|~M))+P[3]+2399980690&4294967295,U=A+(V<<10&4294967295|V>>>22),V=M+(A^(U|~D))+P[10]+4293915773&4294967295,M=U+(V<<15&4294967295|V>>>17),V=D+(U^(M|~A))+P[1]+2240044497&4294967295,D=M+(V<<21&4294967295|V>>>11),V=A+(M^(D|~U))+P[8]+1873313359&4294967295,A=D+(V<<6&4294967295|V>>>26),V=U+(D^(A|~M))+P[15]+4264355552&4294967295,U=A+(V<<10&4294967295|V>>>22),V=M+(A^(U|~D))+P[6]+2734768916&4294967295,M=U+(V<<15&4294967295|V>>>17),V=D+(U^(M|~A))+P[13]+1309151649&4294967295,D=M+(V<<21&4294967295|V>>>11),V=A+(M^(D|~U))+P[4]+4149444226&4294967295,A=D+(V<<6&4294967295|V>>>26),V=U+(D^(A|~M))+P[11]+3174756917&4294967295,U=A+(V<<10&4294967295|V>>>22),V=M+(A^(U|~D))+P[2]+718787259&4294967295,M=U+(V<<15&4294967295|V>>>17),V=D+(U^(M|~A))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(M+(V<<21&4294967295|V>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+U&4294967295}i.prototype.v=function(N,A){A===void 0&&(A=N.length);const D=A-this.blockSize,P=this.C;let M=this.h,U=0;for(;U<A;){if(M==0)for(;U<=D;)a(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<A;)if(P[M++]=N.charCodeAt(U++),M==this.blockSize){a(this,P),M=0;break}}else for(;U<A;)if(P[M++]=N[U++],M==this.blockSize){a(this,P),M=0;break}}this.h=M,this.o+=A},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;A=this.o*8;for(var D=N.length-8;D<N.length;++D)N[D]=A&255,A/=256;for(this.v(N),N=Array(16),A=0,D=0;D<4;++D)for(let P=0;P<32;P+=8)N[A++]=this.g[D]>>>P&255;return N};function l(N,A){var D=d;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=A(N)}function c(N,A){this.h=A;const D=[];let P=!0;for(let M=N.length-1;M>=0;M--){const U=N[M]|0;P&&U==A||(D[M]=U,P=!1)}this.g=D}var d={};function p(N){return-128<=N&&N<128?l(N,function(A){return new c([A|0],A<0?-1:0)}):new c([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return z(g(-N));const A=[];let D=1;for(let P=0;N>=D;P++)A[P]=N/D|0,D*=4294967296;return new c(A,0)}function v(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return z(v(N.substring(1),A));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=g(Math.pow(A,8));let P=T;for(let U=0;U<N.length;U+=8){var M=Math.min(8,N.length-U);const V=parseInt(N.substring(U,U+M),A);M<8?(M=g(Math.pow(A,M)),P=P.j(M).add(g(V))):(P=P.j(D),P=P.add(g(V)))}return P}var T=p(0),S=p(1),R=p(16777216);r=c.prototype,r.m=function(){if(C(this))return-z(this).m();let N=0,A=1;for(let D=0;D<this.g.length;D++){const P=this.i(D);N+=(P>=0?P:4294967296+P)*A,A*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(C(this))return"-"+z(this).toString(N);const A=g(Math.pow(N,6));var D=this;let P="";for(;;){const M=_e(D,A).g;D=Q(D,M.j(A));let U=((D.g.length>0?D.g[0]:D.h)>>>0).toString(N);if(D=M,x(D))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(let A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function C(N){return N.h==-1}r.l=function(N){return N=Q(this,N),C(N)?-1:x(N)?0:1};function z(N){const A=N.g.length,D=[];for(let P=0;P<A;P++)D[P]=~N.g[P];return new c(D,~N.h).add(S)}r.abs=function(){return C(this)?z(this):this},r.add=function(N){const A=Math.max(this.g.length,N.g.length),D=[];let P=0;for(let M=0;M<=A;M++){let U=P+(this.i(M)&65535)+(N.i(M)&65535),V=(U>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);P=V>>>16,U&=65535,V&=65535,D[M]=V<<16|U}return new c(D,D[D.length-1]&-2147483648?-1:0)};function Q(N,A){return N.add(z(A))}r.j=function(N){if(x(this)||x(N))return T;if(C(this))return C(N)?z(this).j(z(N)):z(z(this).j(N));if(C(N))return z(this.j(z(N)));if(this.l(R)<0&&N.l(R)<0)return g(this.m()*N.m());const A=this.g.length+N.g.length,D=[];for(var P=0;P<2*A;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(let M=0;M<N.g.length;M++){const U=this.i(P)>>>16,V=this.i(P)&65535,Qe=N.i(M)>>>16,We=N.i(M)&65535;D[2*P+2*M]+=V*We,ae(D,2*P+2*M),D[2*P+2*M+1]+=U*We,ae(D,2*P+2*M+1),D[2*P+2*M+1]+=V*Qe,ae(D,2*P+2*M+1),D[2*P+2*M+2]+=U*Qe,ae(D,2*P+2*M+2)}for(N=0;N<A;N++)D[N]=D[2*N+1]<<16|D[2*N];for(N=A;N<2*A;N++)D[N]=0;return new c(D,0)};function ae(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function le(N,A){this.g=N,this.h=A}function _e(N,A){if(x(A))throw Error("division by zero");if(x(N))return new le(T,T);if(C(N))return A=_e(z(N),A),new le(z(A.g),z(A.h));if(C(A))return A=_e(N,z(A)),new le(z(A.g),A.h);if(N.g.length>30){if(C(N)||C(A))throw Error("slowDivide_ only works with positive integers.");for(var D=S,P=A;P.l(N)<=0;)D=Ee(D),P=Ee(P);var M=ue(D,1),U=ue(P,1);for(P=ue(P,2),D=ue(D,2);!x(P);){var V=U.add(P);V.l(N)<=0&&(M=M.add(D),U=V),P=ue(P,1),D=ue(D,1)}return A=Q(N,M.j(A)),new le(M,A)}for(M=T;N.l(A)>=0;){for(D=Math.max(1,Math.floor(N.m()/A.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=g(D),V=U.j(A);C(V)||V.l(N)>0;)D-=P,U=g(D),V=U.j(A);x(U)&&(U=S),M=M.add(U),N=Q(N,V)}return new le(M,N)}r.B=function(N){return _e(this,N).h},r.and=function(N){const A=Math.max(this.g.length,N.g.length),D=[];for(let P=0;P<A;P++)D[P]=this.i(P)&N.i(P);return new c(D,this.h&N.h)},r.or=function(N){const A=Math.max(this.g.length,N.g.length),D=[];for(let P=0;P<A;P++)D[P]=this.i(P)|N.i(P);return new c(D,this.h|N.h)},r.xor=function(N){const A=Math.max(this.g.length,N.g.length),D=[];for(let P=0;P<A;P++)D[P]=this.i(P)^N.i(P);return new c(D,this.h^N.h)};function Ee(N){const A=N.g.length+1,D=[];for(let P=0;P<A;P++)D[P]=N.i(P)<<1|N.i(P-1)>>>31;return new c(D,N.h)}function ue(N,A){const D=A>>5;A%=32;const P=N.g.length-D,M=[];for(let U=0;U<P;U++)M[U]=A>0?N.i(U+D)>>>A|N.i(U+D+1)<<32-A:N.i(U+D);return new c(M,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,jb=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Ar=c}).apply(typeof cS<"u"?cS:typeof self<"u"?self:typeof window<"u"?window:{});var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bb,Fu,qb,If,gg,Fb,Hb,Gb;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof mf=="object"&&mf];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var I=0;I<h.length-1;I++){var q=h[I];if(!(q in E))break e;E=E[q]}h=h[h.length-1],I=E[h],y=y(I),y!=I&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&E.push([I,y[I]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function v(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function T(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(I,q,$){for(var fe=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)fe[Oe-2]=arguments[Oe];return y.prototype[q].apply(I,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const E=Array(y);for(let I=0;I<y;I++)E[I]=h[I];return E}return[]}function x(h,y){for(let I=1;I<arguments.length;I++){const q=arguments[I];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=h.length||0;const $=q.length||0;h.length=E+$;for(let fe=0;fe<$;fe++)h[E+fe]=q[fe]}else h.push(q)}}class C{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(h){c.setTimeout(()=>{throw h},0)}function Q(){var h=N;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ae{constructor(){this.h=this.g=null}add(y,E){const I=le.get();I.set(y,E),this.h?this.h.next=I:this.g=I,this.h=I}}var le=new C(()=>new _e,h=>h.reset());class _e{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,ue=!1,N=new ae,A=()=>{const h=Promise.resolve(void 0);Ee=()=>{h.then(D)}};function D(){for(var h;h=Q();){try{h.h.call(h.g)}catch(E){z(E)}var y=le;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ue=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function V(h){return/^[\s\xa0]*$/.test(h)}function Qe(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(Qe,M),Qe.prototype.init=function(h,y){const E=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),J=0;function ce(h,y,E,I,q){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!I,this.ha=q,this.key=++J,this.da=this.fa=!1}function Te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ve(h,y,E){for(const I in h)y.call(E,h[I],I,h)}function Me(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function k(h){const y={};for(const E in h)y[E]=h[E];return y}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(h,y){let E,I;for(let q=1;q<arguments.length;q++){I=arguments[q];for(E in I)h[E]=I[E];for(let $=0;$<ee.length;$++)E=ee[$],Object.prototype.hasOwnProperty.call(I,E)&&(h[E]=I[E])}}function oe(h){this.src=h,this.g={},this.h=0}oe.prototype.add=function(h,y,E,I,q){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const fe=se(h,y,I,q);return fe>-1?(y=h[fe],E||(y.fa=!1)):(y=new ce(y,this.src,$,!!I,q),y.fa=E,h.push(y)),y};function me(h,y){const E=y.type;if(E in h.g){var I=h.g[E],q=Array.prototype.indexOf.call(I,y,void 0),$;($=q>=0)&&Array.prototype.splice.call(I,q,1),$&&(Te(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function se(h,y,E,I){for(let q=0;q<h.length;++q){const $=h[q];if(!$.da&&$.listener==y&&$.capture==!!E&&$.ha==I)return q}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),ie={};function ve(h,y,E,I,q){if(Array.isArray(y)){for(let $=0;$<y.length;$++)ve(h,y[$],E,I,q);return null}return E=zr(E),h&&h[We]?h.J(y,E,d(I)?!!I.capture:!1,q):Ce(h,y,E,!1,I,q)}function Ce(h,y,E,I,q,$){if(!y)throw Error("Invalid event type");const fe=d(q)?!!q.capture:!!q;let Oe=Zi(h);if(Oe||(h[pe]=Oe=new oe(h)),E=Oe.add(y,E,I,fe,$),E.proxy)return E;if(I=je(),E.proxy=I,I.src=h,I.listener=E,h.addEventListener)U||(q=fe),q===void 0&&(q=!1),h.addEventListener(y.toString(),I,q);else if(h.attachEvent)h.attachEvent(yn(y.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function je(){function h(E){return y.call(h.src,h.listener,E)}const y=Wi;return h}function Et(h,y,E,I,q){if(Array.isArray(y))for(var $=0;$<y.length;$++)Et(h,y[$],E,I,q);else I=d(I)?!!I.capture:!!I,E=zr(E),h&&h[We]?(h=h.i,$=String(y).toString(),$ in h.g&&(y=h.g[$],E=se(y,E,I,q),E>-1&&(Te(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[$],h.h--)))):h&&(h=Zi(h))&&(y=h.g[y.toString()],h=-1,y&&(h=se(y,E,I,q)),(E=h>-1?y[h]:null)&&Fn(E))}function Fn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[We])me(y.i,h);else{var E=h.type,I=h.proxy;y.removeEventListener?y.removeEventListener(E,I,h.capture):y.detachEvent?y.detachEvent(yn(E),I):y.addListener&&y.removeListener&&y.removeListener(I),(E=Zi(y))?(me(E,h),E.h==0&&(E.src=null,y[pe]=null)):Te(h)}}}function yn(h){return h in ie?ie[h]:ie[h]="on"+h}function Wi(h,y){if(h.da)h=!0;else{y=new Qe(y,this);const E=h.listener,I=h.ha||h.src;h.fa&&Fn(h),h=E.call(I,y)}return h}function Zi(h){return h=h[pe],h instanceof oe?h:null}var Vs="__closure_events_fn_"+(Math.random()*1e9>>>0);function zr(h){return typeof h=="function"?h:(h[Vs]||(h[Vs]=function(y){return h.handleEvent(y)}),h[Vs])}function St(){P.call(this),this.i=new oe(this),this.M=this,this.G=null}T(St,P),St.prototype[We]=!0,St.prototype.removeEventListener=function(h,y,E,I){Et(this,h,y,E,I)};function gt(h,y){var E,I=h.G;if(I)for(E=[];I;I=I.G)E.push(I);if(h=h.M,I=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var q=y;y=new M(I,h),Y(y,q)}q=!0;let $,fe;if(E)for(fe=E.length-1;fe>=0;fe--)$=y.g=E[fe],q=Rn($,I,!0,y)&&q;if($=y.g=h,q=Rn($,I,!0,y)&&q,q=Rn($,I,!1,y)&&q,E)for(fe=0;fe<E.length;fe++)$=y.g=E[fe],q=Rn($,I,!1,y)&&q}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let I=0;I<E.length;I++)Te(E[I]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,E,I){return this.i.add(String(h),y,!1,E,I)},St.prototype.K=function(h,y,E,I){return this.i.add(String(h),y,!0,E,I)};function Rn(h,y,E,I){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let $=0;$<y.length;++$){const fe=y[$];if(fe&&!fe.da&&fe.capture==E){const Oe=fe.listener,Rt=fe.ha||fe.src;fe.fa&&me(h.i,fe),q=Oe.call(Rt,I)!==!1&&q}}return q&&!I.defaultPrevented}function Rl(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Ge(h){h.g=Rl(()=>{h.g=null,h.i&&(h.i=!1,Ge(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ye extends P{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cn(h){P.call(this),this.h=h,this.g={}}T(Cn,P);var Cl=[];function Dl(h){Ve(h.g,function(y,E){this.g.hasOwnProperty(E)&&Fn(y)},h),h.g={}}Cn.prototype.N=function(){Cn.Z.N.call(this),Dl(this)},Cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ms=c.JSON.stringify,Ud=c.JSON.parse,Uc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function zc(){}function jc(){}var ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){M.call(this,"d")}T(Zt,M);function Hn(){M.call(this,"c")}T(Hn,M);var wt={},Bc=null;function Ha(){return Bc=Bc||new St}wt.Ia="serverreachability";function qc(h){M.call(this,wt.Ia,h)}T(qc,M);function Si(h){const y=Ha();gt(y,new qc(y))}wt.STAT_EVENT="statevent";function jr(h,y){M.call(this,wt.STAT_EVENT,h),this.stat=y}T(jr,M);function Ot(h){const y=Ha();gt(y,new jr(y,h))}wt.Ja="timingevent";function bi(h,y){M.call(this,wt.Ja,h),this.size=y}T(bi,M);function Ai(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ai(){this.g=!0}ai.prototype.ua=function(){this.g=!1};function zd(h,y,E,I,q,$){h.info(function(){if(h.g)if($){var fe="",Oe=$.split("&");for(let Ze=0;Ze<Oe.length;Ze++){var Rt=Oe[Ze].split("=");if(Rt.length>1){const yt=Rt[0];Rt=Rt[1];const Yn=yt.split("_");fe=Yn.length>=2&&Yn[1]=="type"?fe+(yt+"="+Rt+"&"):fe+(yt+"=redacted&")}}}else fe=null;else fe=$;return"XMLHTTP REQ ("+I+") [attempt "+q+"]: "+y+`
`+E+`
`+fe})}function Fc(h,y,E,I,q,$,fe){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+q+"]: "+y+`
`+E+`
`+$+" "+fe})}function Ii(h,y,E,I){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+jd(h,E)+(I?" "+I:"")})}function Br(h,y){h.info(function(){return"TIMEOUT: "+y})}ai.prototype.info=function(){};function jd(h,y){if(!h.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var E=$[h];if(!(E.length<2)){var I=E[1];if(Array.isArray(I)&&!(I.length<1)){var q=I[0];if(q!="noop"&&q!="stop"&&q!="close")for(let fe=1;fe<I.length;fe++)I[fe]=""}}}}return Ms($)}catch{return y}}var qr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xl;function Fr(){}T(Fr,zc),Fr.prototype.g=function(){return new XMLHttpRequest},xl=new Fr;function es(h){return encodeURIComponent(String(h))}function Hc(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function oi(h,y,E,I){this.j=h,this.i=y,this.l=E,this.S=I||1,this.V=new Cn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new li}function li(){this.i=null,this.g="",this.h=!1}var Pt={},Yt={};function wi(h,y,E){h.M=1,h.A=Hr(Lt(y)),h.u=E,h.R=!0,Ga(h,null)}function Ga(h,y){h.F=Date.now(),Ri(h),h.B=Lt(h.A);var E=h.B,I=h.S;Array.isArray(I)||(I=[String(I)]),$a(E.i,"t",I),h.C=0,E=h.j.L,h.h=new li,h.g=rh(h.j,E?y:null,!h.u),h.P>0&&(h.O=new Ye(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,I=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Cl[0]=q.toString()),q=Cl);for(let $=0;$<q.length;$++){const fe=ve(E,q[$],I||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Si(),zd(h.i,h.v,h.B,h.l,h.S,h.u)}oi.prototype.ba=function(h){h=h.target;const y=this.O;y&&hi(h)==3?y.j():this.Y(h)},oi.prototype.Y=function(h){try{if(h==this.g)e:{const Oe=hi(this.g),Rt=this.g.ya(),Ze=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||Oe!=4||Rt==7||(Rt==8||Ze<=0?Si(3):Si(2)),Ci(this);var y=this.g.ca();this.X=y;var E=Bd(this);if(this.o=y==200,Fc(this.i,this.v,this.B,this.l,this.S,Oe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,q=this.g;if((I=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(I)){var $=I;break t}}$=null}if(h=$)Ii(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Di(this,h);else{this.o=!1,this.m=3,Ot(12),Dn(this),Gn(this);break e}}if(this.R){h=!0;let yt;for(;!this.K&&this.C<E.length;)if(yt=Kc(this,E),yt==Yt){Oe==4&&(this.m=4,Ot(14),h=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==Pt){this.m=4,Ot(15),Ii(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Ii(this.i,this.l,yt,null),Di(this,yt);if(Gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||E.length!=0||this.h.h||(this.m=1,Ot(16),h=!1),this.o=this.o&&h,!h)Ii(this.i,this.l,E,"[Invalid Chunked Response]"),Dn(this),Gn(this);else if(E.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Kl(fe),fe.P=!0,Ot(11))}}else Ii(this.i,this.l,E,null),Di(this,E);Oe==4&&Dn(this),this.o&&!this.K&&(Oe==4?th(this.j,this):(this.o=!1,Ri(this)))}else ns(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Dn(this),Gn(this)}}}catch{}finally{}};function Bd(h){if(!Gc(h))return h.g.la();const y=en(h.g);if(y==="")return"";let E="";const I=y.length,q=hi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Dn(h),Gn(h),"";h.h.i=new c.TextDecoder}for(let $=0;$<I;$++)h.h.h=!0,E+=h.h.i.decode(y[$],{stream:!(q&&$==I-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Gc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Kc(h,y){var E=h.C,I=y.indexOf(`
`,E);return I==-1?Yt:(E=Number(y.substring(E,I)),isNaN(E)?Pt:(I+=1,I+E>y.length?Yt:(y=y.slice(I,I+E),h.C=I+E,y)))}oi.prototype.cancel=function(){this.K=!0,Dn(this)};function Ri(h){h.T=Date.now()+h.H,Ka(h,h.H)}function Ka(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ai(g(h.aa,h),y)}function Ci(h){h.D&&(c.clearTimeout(h.D),h.D=null)}oi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Br(this.i,this.B),this.M!=2&&(Si(),Ot(17)),Dn(this),this.m=2,Gn(this)):Ka(this,this.T-h)};function Gn(h){h.j.I==0||h.K||th(h.j,h)}function Dn(h){Ci(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Dl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Di(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||xi(E.h,h))){if(!h.L&&xi(E.h,h)&&E.I==3){try{var I=E.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var q=I;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)eo(E),Bs(E);else break e;Jr(E),Ot(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ai(g(E.Va,E),6e3));Ni(E.h)<=1&&E.ta&&(E.ta=void 0)}else Li(E,11)}else if((h.L||E.g==h)&&eo(E),!V(y))for(q=E.Ba.g.parse(y),y=0;y<q.length;y++){let Ze=q[y];const yt=Ze[0];if(!(yt<=E.K))if(E.K=yt,Ze=Ze[1],E.I==2)if(Ze[0]=="c"){E.M=Ze[1],E.ba=Ze[2];const Yn=Ze[3];Yn!=null&&(E.ka=Yn,E.j.info("VER="+E.ka));const Ui=Ze[4];Ui!=null&&(E.za=Ui,E.j.info("SVER="+E.za));const fi=Ze[5];fi!=null&&typeof fi=="number"&&fi>0&&(I=1.5*fi,E.O=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const di=h.g;if(di){const Wr=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wr){var $=I.h;$.g||Wr.indexOf("spdy")==-1&&Wr.indexOf("quic")==-1&&Wr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ol($,$.h),$.h=null))}if(I.G){const to=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;to&&(I.wa=to,nt(I.J,I.G,to))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),I=E;var fe=h;if(I.na=sh(I,I.L?I.ba:null,I.W),fe.L){Pl(I.h,fe);var Oe=fe,Rt=I.O;Rt&&(Oe.H=Rt),Oe.D&&(Ci(Oe),Ri(Oe)),I.g=fe}else Zc(I);E.i.length>0&&ki(E)}else Ze[0]!="stop"&&Ze[0]!="close"||Li(E,7);else E.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Li(E,7):Hl(E):Ze[0]!="noop"&&E.l&&E.l.qa(Ze),E.A=0)}}Si(4)}catch{}}var kt=class{constructor(h,y){this.g=h,this.map=y}};function Vl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ml(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ni(h){return h.h?1:h.g?h.g.size:0}function xi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ol(h,y){h.g?h.g.add(y):h.h=y}function Pl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Vl.prototype.cancel=function(){if(this.i=kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function kl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return R(h.i)}var Qc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qa(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const I=h[E].indexOf("=");let q,$=null;I>=0?(q=h[E].substring(0,I),$=h[E].substring(I+1)):q=h[E],y(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Nn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Nn?(this.l=h.l,$t(this,h.j),this.o=h.o,this.g=h.g,Os(this,h.u),this.h=h.h,Ll(this,Jc(h.i)),this.m=h.m):h&&(y=String(h).match(Qc))?(this.l=!1,$t(this,y[1]||"",!0),this.o=Vi(y[2]||""),this.g=Vi(y[3]||"",!0),Os(this,y[4]),this.h=Vi(y[5]||"",!0),Ll(this,y[6]||"",!0),this.m=Vi(y[7]||"")):(this.l=!1,this.i=new ks(null,this.l))}Nn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Gr(y,Ya,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Gr(y,Ya,!0),"@"),h.push(es(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Gr(E,E.charAt(0)=="/"?Ul:Yc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Gr(E,$c)),h.join("")},Nn.prototype.resolve=function(h){const y=Lt(this);let E=!!h.j;E?$t(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var I=h.h;if(E)Os(y,h.u);else if(E=!!h.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var q=y.h.lastIndexOf("/");q!=-1&&(I=y.h.slice(0,q+1)+I)}if(q=I,q==".."||q==".")I="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){I=q.lastIndexOf("/",0)==0,q=q.split("/");const $=[];for(let fe=0;fe<q.length;){const Oe=q[fe++];Oe=="."?I&&fe==q.length&&$.push(""):Oe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),I&&fe==q.length&&$.push("")):($.push(Oe),I=!0)}I=$.join("/")}else I=q}return E?y.h=I:E=h.i.toString()!=="",E?Ll(y,Jc(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Lt(h){return new Nn(h)}function $t(h,y,E){h.j=E?Vi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Os(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ll(h,y,E){y instanceof ks?(h.i=y,Xa(h.i,h.l)):(E||(y=Gr(y,Ps)),h.i=new ks(y,h.l))}function nt(h,y,E){h.i.set(y,E)}function Hr(h){return nt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Vi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gr(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,_n),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function _n(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ya=/[#\/\?@]/g,Yc=/[#\?:]/g,Ul=/[#\?]/g,Ps=/[#\?@]/g,$c=/#/g;function ks(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function vn(h){h.g||(h.g=new Map,h.h=0,h.i&&Qa(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}r=ks.prototype,r.add=function(h,y){vn(this),this.i=null,h=Ls(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Xc(h,y){vn(h),y=Ls(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function zl(h,y){return vn(h),y=Ls(h,y),h.g.has(y)}r.forEach=function(h,y){vn(this),this.g.forEach(function(E,I){E.forEach(function(q){h.call(y,q,I,this)},this)},this)};function jl(h,y){vn(h);let E=[];if(typeof y=="string")zl(h,y)&&(E=E.concat(h.g.get(Ls(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}r.set=function(h,y){return vn(this),this.i=null,h=Ls(this,h),zl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=jl(this,h),h.length>0?String(h[0]):y):y};function $a(h,y,E){Xc(h,y),E.length>0&&(h.i=null,h.g.set(Ls(h,y),R(E)),h.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var E=y[I];const q=es(E);E=jl(this,E);for(let $=0;$<E.length;$++){let fe=q;E[$]!==""&&(fe+="="+es(E[$])),h.push(fe)}}return this.i=h.join("&")};function Jc(h){const y=new ks;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ls(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Xa(h,y){y&&!h.j&&(vn(h),h.i=null,h.g.forEach(function(E,I){const q=I.toLowerCase();I!=q&&(Xc(this,I),$a(this,q,E))},h)),h.j=y}function ui(h,y){const E=new ai;if(c.Image){const I=new Image;I.onload=v(Kn,E,"TestLoadImage: loaded",!0,y,I),I.onerror=v(Kn,E,"TestLoadImage: error",!1,y,I),I.onabort=v(Kn,E,"TestLoadImage: abort",!1,y,I),I.ontimeout=v(Kn,E,"TestLoadImage: timeout",!1,y,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else y(!1)}function Bl(h,y){const E=new ai,I=new AbortController,q=setTimeout(()=>{I.abort(),Kn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:I.signal}).then($=>{clearTimeout(q),$.ok?Kn(E,"TestPingServer: ok",!0,y):Kn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Kn(E,"TestPingServer: error",!1,y)})}function Kn(h,y,E,I,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),I(E)}catch{}}function Us(){this.g=new Uc}function Mi(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Mi,zc),Mi.prototype.g=function(){return new Kr(this.i,this.h)};function Kr(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Kr,St),r=Kr.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ci(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zs(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?zs(this):ci(this),this.readyState==3&&Ja(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,zs(this))},r.Na=function(h){this.g&&(this.response=h,zs(this))},r.ga=function(){this.g&&zs(this)};function zs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ci(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function ci(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Qn(h){let y="";return Ve(h,function(E,I){y+=I,y+=":",y+=E,y+=`\r
`}),y}function Qr(h,y,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=Qn(E),typeof h=="string"?E!=null&&es(E):nt(h,y,E))}function lt(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(lt,St);var Oi=/^https?$/i,ql=["POST","PUT"];r=lt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xl.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch($){Yr(this,$);return}if(h=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var q in I)E.set(q,I[q]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())E.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(ql,y,void 0)>=0)||I||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,fe]of E)this.g.setRequestHeader($,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Yr(this,$)}};function Yr(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Fl(h),ts(h)}function Fl(h){h.A||(h.A=!0,gt(h,"complete"),gt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,gt(this,"complete"),gt(this,"abort"),ts(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),lt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?$r(this):this.Xa())},r.Xa=function(){$r(this)};function $r(h){if(h.h&&typeof l<"u"){if(h.v&&hi(h)==4)setTimeout(h.Ca.bind(h),0);else if(gt(h,"readystatechange"),hi(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var I;if(I=$===0){let fe=String(h.D).match(Qc)[1]||null;!fe&&c.self&&c.self.location&&(fe=c.self.location.protocol.slice(0,-1)),I=!Oi.test(fe?fe.toLowerCase():"")}E=I}if(E)gt(h,"complete"),gt(h,"success");else{h.o=6;try{var q=hi(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Fl(h)}}finally{ts(h)}}}}function ts(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||gt(h,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function hi(h){return h.g?h.g.readyState:0}r.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ud(y)}};function en(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(h){const y={};h=(h.g&&hi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(V(h[I]))continue;var E=Hc(h[I]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=y[q]||[];y[q]=$,$.push(E)}Me(y,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function js(h){this.za=0,this.i=[],this.j=new ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pi("baseRetryDelayMs",5e3,h),this.Za=Pi("retryDelaySeedMs",1e4,h),this.Ta=Pi("forwardChannelMaxRetries",2,h),this.va=Pi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Vl(h&&h.concurrentRequestLimit),this.Ba=new Us,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=js.prototype,r.ka=8,r.I=1,r.connect=function(h,y,E,I){Ot(0),this.W=h,this.H=y||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.J=sh(this,null,this.W),ki(this)};function Hl(h){if(Wa(h),h.I==3){var y=h.V++,E=Lt(h.J);if(nt(E,"SID",h.M),nt(E,"RID",y),nt(E,"TYPE","terminate"),Xr(h,E),y=new oi(h,h.j,y),y.M=2,y.A=Hr(Lt(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=rh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ri(y)}ih(h)}function Bs(h){h.g&&(Kl(h),h.g.cancel(),h.g=null)}function Wa(h){Bs(h),h.v&&(c.clearTimeout(h.v),h.v=null),eo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ki(h){if(!Ml(h.h)&&!h.m){h.m=!0;var y=h.Ea;Ee||A(),ue||(Ee(),ue=!0),N.add(y,h),h.D=0}}function Za(h,y){return Ni(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ai(g(h.Ea,h,y),nh(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new oi(this,this.j,h);let $=this.o;if(this.U&&($?($=k($),Y($,this.U)):$=this.U),this.u!==null||this.R||(q.J=$,$=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Wc(this,q,y),E=Lt(this.J),nt(E,"RID",h),nt(E,"CVER",22),this.G&&nt(E,"X-HTTP-Session-Id",this.G),Xr(this,E),$&&(this.R?y="headers="+es(Qn($))+"&"+y:this.u&&Qr(E,this.u,$)),Ol(this.h,q),this.Ra&&nt(E,"TYPE","init"),this.S?(nt(E,"$req",y),nt(E,"SID","null"),q.U=!0,wi(q,E,null)):wi(q,E,y),this.I=2}}else this.I==3&&(h?Gl(this,h):this.i.length==0||Ml(this.h)||Gl(this))};function Gl(h,y){var E;y?E=y.l:E=h.V++;const I=Lt(h.J);nt(I,"SID",h.M),nt(I,"RID",E),nt(I,"AID",h.K),Xr(h,I),h.u&&h.o&&Qr(I,h.u,h.o),E=new oi(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Wc(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ol(h.h,E),wi(E,I,y)}function Xr(h,y){h.H&&Ve(h.H,function(E,I){nt(y,I,E)}),h.l&&Ve({},function(E,I){nt(y,I,E)})}function Wc(h,y,E){E=Math.min(h.i.length,E);const I=h.l?g(h.l.Ka,h.l,h):null;e:{var q=h.i;let Oe=-1;for(;;){const Rt=["count="+E];Oe==-1?E>0?(Oe=q[0].g,Rt.push("ofs="+Oe)):Oe=0:Rt.push("ofs="+Oe);let Ze=!0;for(let yt=0;yt<E;yt++){var $=q[yt].g;const Yn=q[yt].map;if($-=Oe,$<0)Oe=Math.max(0,q[yt].g-100),Ze=!1;else try{$="req"+$+"_"||"";try{var fe=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Ui,fi]of fe){let di=fi;d(fi)&&(di=Ms(fi)),Rt.push($+Ui+"="+encodeURIComponent(di))}}catch(Ui){throw Rt.push($+"type="+encodeURIComponent("_badmap")),Ui}}catch{I&&I(Yn)}}if(Ze){fe=Rt.join("&");break e}}fe=void 0}return h=h.i.splice(0,E),y.G=h,fe}function Zc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Ee||A(),ue||(Ee(),ue=!0),N.add(y,h),h.A=0}}function Jr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ai(g(h.Da,h),nh(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,eh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ai(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),Bs(this),eh(this))};function Kl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function eh(h){h.g=new oi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Lt(h.na);nt(y,"RID","rpc"),nt(y,"SID",h.M),nt(y,"AID",h.K),nt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&nt(y,"TO",h.ia),nt(y,"TYPE","xmlhttp"),Xr(h,y),h.u&&h.o&&Qr(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Hr(Lt(y)),E.u=null,E.R=!0,Ga(E,h)}r.Va=function(){this.C!=null&&(this.C=null,Bs(this),Jr(this),Ot(19))};function eo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function th(h,y){var E=null;if(h.g==y){eo(h),Kl(h),h.g=null;var I=2}else if(xi(h.h,y))E=y.G,Pl(h.h,y),I=1;else return;if(h.I!=0){if(y.o)if(I==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;I=Ha(),gt(I,new bi(I,E)),ki(h)}else Zc(h);else if(q=y.m,q==3||q==0&&y.X>0||!(I==1&&Za(h,y)||I==2&&Jr(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),q){case 1:Li(h,5);break;case 4:Li(h,10);break;case 3:Li(h,6);break;default:Li(h,2)}}}function nh(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function Li(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),I=h.Ua;const q=!I;I=new Nn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$t(I,"https"),Hr(I),q?ui(I.toString(),E):Bl(I.toString(),E)}else Ot(2);h.I=0,h.l&&h.l.pa(y),ih(h),Wa(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function ih(h){if(h.I=0,h.ja=[],h.l){const y=kl(h.h);(y.length!=0||h.i.length!=0)&&(x(h.ja,y),x(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function sh(h,y,E){var I=E instanceof Nn?Lt(E):new Nn(E);if(I.g!="")y&&(I.g=y+"."+I.g),Os(I,I.u);else{var q=c.location;I=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const $=new Nn(null);I&&$t($,I),y&&($.g=y),q&&Os($,q),E&&($.h=E),I=$}return E=h.G,y=h.wa,E&&y&&nt(I,E,y),nt(I,"VER",h.ka),Xr(h,I),I}function rh(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new lt(new Mi({ab:E})):new lt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ah(){}r=ah.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qs(){}qs.prototype.g=function(h,y){return new dn(h,y)};function dn(h,y){St.call(this),this.g=new js(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!V(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!V(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new is(this)}T(dn,St),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Hl(this.g)},dn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Ms(h),h=E);y.i.push(new kt(y.Ya++,h)),y.I==3&&ki(y)},dn.prototype.N=function(){this.g.l=null,delete this.j,Hl(this.g),delete this.g,dn.Z.N.call(this)};function oh(h){Zt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(oh,Zt);function lh(){Hn.call(this),this.status=1}T(lh,Hn);function is(h){this.g=h}T(is,ah),is.prototype.ra=function(){gt(this.g,"a")},is.prototype.qa=function(h){gt(this.g,new oh(h))},is.prototype.pa=function(h){gt(this.g,new lh)},is.prototype.oa=function(){gt(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,Gb=function(){return new qs},Hb=function(){return Ha()},Fb=wt,gg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,If=qr,Nl.COMPLETE="complete",qb=Nl,jc.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",St.prototype.listen=St.prototype.J,Fu=jc,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,Bb=lt}).apply(typeof mf<"u"?mf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl="12.9.0";function ux(r){Tl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Yg("@firebase/firestore");function zo(){return Oa.logLevel}function re(r,...e){if(Oa.logLevel<=Fe.DEBUG){const t=e.map(oy);Oa.debug(`Firestore (${Tl}): ${r}`,...t)}}function Nt(r,...e){if(Oa.logLevel<=Fe.ERROR){const t=e.map(oy);Oa.error(`Firestore (${Tl}): ${r}`,...t)}}function Jo(r,...e){if(Oa.logLevel<=Fe.WARN){const t=e.map(oy);Oa.warn(`Firestore (${Tl}): ${r}`,...t)}}function oy(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Kb(r,i,t)}function Kb(r,e,t){let i=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Nt(i),new Error(i)}function Ae(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||Kb(e,a,i)}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ds{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class fx{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ir,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ir)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string",31837,{l:i}),new cx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class dx{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class mx{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new dx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class px{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const i=l=>{l.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=gx(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ne(r,e){return r<e?-1:r>e?1:0}function yg(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return Yp(a)===Yp(l)?Ne(a,l):Yp(a)?1:-1}return Ne(r.length,e.length)}const yx=55296,_x=57343;function Yp(r){const e=r.charCodeAt(0);return e>=yx&&e<=_x}function Wo(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function Qb(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="__name__";class Gi{constructor(e,t,i){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ge(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Gi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const i=Gi.isNumericId(e),a=Gi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Gi.extractNumericId(e).compare(Gi.extractNumericId(t)):yg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class tt extends Gi{construct(e,t,i){return new tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const vx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Gi{construct(e,t,i){return new Tt(e,t,i)}static isValidIdentifier(e){return vx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fS}static keyField(){return new Tt([fS])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new he(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new he(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new he(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(t)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(tt.fromString(e))}static fromName(e){return new de(tt.fromString(e).popFirst(5))}static empty(){return new de(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(r,e,t){if(!t)throw new he(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Ex(r,e,t,i){if(e===!0&&i===!0)throw new he(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function dS(r){if(!de.isDocumentKey(r))throw new he(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function mS(r){if(de.isDocumentKey(r))throw new he(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $b(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function pd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ge(12329,{type:typeof r})}function As(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pd(r);throw new he(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(r,e){const t={typeString:r};return e&&(t.value=e),t}function Dc(r,e){if(!$b(r))throw new he(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new he(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=-62135596800,gS=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*gS);return new rt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pS)throw new he(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gS}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dc(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Ht("string",rt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new rt(0,0))}static max(){return new we(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=-1;class Hf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function _g(r){return r.fields.find((e=>e.kind===2))}function ga(r){return r.fields.filter((e=>e.kind!==2))}Hf.UNKNOWN_ID=-1;class wf{constructor(e,t){this.fieldPath=e,this.kind=t}}class uc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new uc(0,qn.min())}}function Xb(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=we.fromTimestamp(i===1e9?new rt(t+1,0):new rt(t,i));return new qn(a,de.empty(),e)}function Jb(r){return new qn(r.readTime,r.key,Zo)}class qn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new qn(we.min(),de.empty(),Zo)}static max(){return new qn(we.max(),de.empty(),Zo)}}function uy(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(r.documentKey,e.documentKey),t!==0?t:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pr(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==Wb)throw r;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,i)=>{t(e)}))}static reject(e){return new B(((t,i)=>{i(e)}))}static waitFor(e){return new B(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=B.resolve(!1);for(const i of e)t=t.next((a=>a?B.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new B(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&i(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new B(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="SimpleDb";class gd{static open(e,t,i,a){try{return new gd(t,e.transaction(a,i))}catch(l){throw new Xu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ir,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Xu(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=cy(i.target.error);this.S.reject(new Xu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(Un,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sx(t)}}class wr{static delete(e){return re(Un,"Removing database:",e),va(Y0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!tb())return!1;if(wr.F())return!0;const e=Kt(),t=wr.M(e),i=0<t&&t<10,a=eA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,wr.M(Kt())===12.2&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(re(Un,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new Xu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new he(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new he(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Xu(e,c))},a.onupgradeneeded=l=>{re(Un,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{re(Un,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=gd.open(this.db,e,l?"readonly":"readwrite",i),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),B.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(re(Un,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function eA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Tx{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return va(this.U.delete())}}class Xu extends he{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function kr(r){return r.name==="IndexedDbTransactionError"}class Sx{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(re(Un,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(re(Un,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),va(i)}add(e){return re(Un,"ADD",this.store.name,e,e),va(this.store.add(e))}get(e){return va(this.store.get(e)).next((t=>(t===void 0&&(t=null),re(Un,"GET",this.store.name,e,t),t)))}delete(e){return re(Un,"DELETE",this.store.name,e),va(this.store.delete(e))}count(){return re(Un,"COUNT",this.store.name),va(this.store.count())}H(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new B(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new B(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}X(e,t){re(Un,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const a=this.cursor(i);return this.J(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.J(a,t)}te(e){const t=this.cursor({});return new B(((i,a)=>{t.onerror=l=>{const c=cy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}J(e,t){const i=[];return new B(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new Tx(d),g=t(d.primaryKey,d.value,p);if(g instanceof B){const v=g.catch((T=>(p.done(),B.reject(T))));i.push(v)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>B.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function va(r){return new B(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=cy(i.target.error);t(a)}}))}let yS=!1;function cy(r){const e=wr.M(Kt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yS||(yS=!0,setTimeout((()=>{throw i}),0)),i}}return r}const Ju="IndexBackfiller";class bx{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){re(Ju,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();re(Ju,`Documents written: ${t}`)}catch(t){kr(t)?re(Ju,"Ignoring IndexedDB error during index backfill: ",t):await Pr(t)}await this.re(6e4)}))}}class Ax{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return B.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return re(Ju,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(re(Ju,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=Jb(l);uy(c,i)>0&&(i=c)})),new qn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}In.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=-1;function yd(r){return r==null}function cc(r){return r===0&&1/r==-1/0}function tA(r){return typeof r=="number"&&Number.isInteger(r)&&!cc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="";function fn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=_S(e)),e=Ix(r.get(t),e);return _S(e)}function Ix(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Gf:t+="";break;default:t+=l}}return t}function _S(r){return r+Gf+""}function Qi(r){const e=r.length;if(Ae(e>=2,64408,{path:r}),e===2)return Ae(r.charAt(0)===Gf&&r.charAt(1)==="",56145,{path:r}),tt.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf(Gf,l);switch((c<0||c>t)&&ge(50515,{path:r}),r.charAt(c+1)){case"":const d=r.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),i.push(p);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:ge(61167,{path:r})}l=c+2}return new tt(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="remoteDocuments",Nc="owner",Vo="owner",hc="mutationQueues",wx="userId",_i="mutations",vS="batchId",Aa="userMutationsIndex",ES=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(r,e){return[r,fn(e)]}function nA(r,e,t){return[r,fn(e),t]}const Rx={},el="documentMutations",Kf="remoteDocumentsV14",Cx=["prefixPath","collectionGroup","readTime","documentId"],Cf="documentKeyIndex",Dx=["prefixPath","collectionGroup","documentId"],iA="collectionGroupIndex",Nx=["collectionGroup","readTime","prefixPath","documentId"],fc="remoteDocumentGlobal",vg="remoteDocumentGlobalKey",tl="targets",sA="queryTargetsIndex",xx=["canonicalId","targetId"],nl="targetDocuments",Vx=["targetId","path"],hy="documentTargetsIndex",Mx=["path","targetId"],Qf="targetGlobalKey",wa="targetGlobal",dc="collectionParents",Ox=["collectionId","parent"],il="clientMetadata",Px="clientId",_d="bundles",kx="bundleId",vd="namedQueries",Lx="name",fy="indexConfiguration",Ux="indexId",Eg="collectionGroupIndex",zx="collectionGroup",Wu="indexState",jx=["indexId","uid"],rA="sequenceNumberIndex",Bx=["uid","sequenceNumber"],Zu="indexEntries",qx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],aA="documentKeyIndex",Fx=["indexId","uid","orderedDocumentKey"],Ed="documentOverlays",Hx=["userId","collectionPath","documentId"],Tg="collectionPathOverlayIndex",Gx=["userId","collectionPath","largestBatchId"],oA="collectionGroupOverlayIndex",Kx=["userId","collectionGroup","largestBatchId"],dy="globals",Qx="name",lA=[hc,_i,el,ya,tl,Nc,wa,nl,il,fc,dc,_d,vd],Yx=[...lA,Ed],uA=[hc,_i,el,Kf,tl,Nc,wa,nl,il,fc,dc,_d,vd,Ed],cA=uA,my=[...cA,fy,Wu,Zu],$x=my,hA=[...my,dy],Xx=hA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends Zb{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Qt(r,e){const t=Se(r);return wr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Lr(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function fA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pf(this.root,e,this.comparator,!0)}}class pf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??an.RED,this.left=a??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new an(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return an.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SS(this.data.getIterator())}getIteratorFrom(e){return new SS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class SS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new wn([])}unionWith(e){let t=new ot(Tt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new dA("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const Jx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(r){if(Ae(!!r,39018),typeof r=="string"){let e=0;const t=Jx.exec(r);if(Ae(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vt(r.seconds),nanos:vt(r.nanos)}}function vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Cs(r){return typeof r=="string"?Mt.fromBase64String(r):Mt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="server_timestamp",pA="__type__",gA="__previous_value__",yA="__local_write_time__";function py(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[pA])==null?void 0:i.stringValue)===mA}function Td(r){const e=r.mapValue.fields[gA];return py(e)?Td(e):e}function mc(r){const e=Rs(r.mapValue.fields[yA].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t,i,a,l,c,d,p,g,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=T}}const Yf="(default)";class Pa{constructor(e,t){this.projectId=e,this.database=t||Yf}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===Yf}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}function Zx(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new he(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="__type__",_A="__max__",Er={mapValue:{fields:{__type__:{stringValue:_A}}}},yy="__vector__",sl="value",Df={nullValue:"NULL_VALUE"};function Cr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?py(r)?4:vA(r)?9007199254740991:Sd(r)?10:11:ge(28295,{value:r})}function Ji(r,e){if(r===e)return!0;const t=Cr(r);if(t!==Cr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return mc(r).isEqual(mc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Rs(a.timestampValue),d=Rs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return Cs(a.bytesValue).isEqual(Cs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return vt(a.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(a.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return vt(a.integerValue)===vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=vt(a.doubleValue),d=vt(l.doubleValue);return c===d?cc(c)===cc(d):isNaN(c)&&isNaN(d)}return!1})(r,e);case 9:return Wo(r.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(TS(c)!==TS(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ji(c[p],d[p])))return!1;return!0})(r,e);default:return ge(52216,{left:r})}}function pc(r,e){return(r.values||[]).find((t=>Ji(t,e)))!==void 0}function Dr(r,e){if(r===e)return 0;const t=Cr(r),i=Cr(e);if(t!==i)return Ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=vt(l.integerValue||l.doubleValue),p=vt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(r,e);case 3:return bS(r.timestampValue,e.timestampValue);case 4:return bS(mc(r),mc(e));case 5:return yg(r.stringValue,e.stringValue);case 6:return(function(l,c){const d=Cs(l),p=Cs(c);return d.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=Ne(d[g],p[g]);if(v!==0)return v}return Ne(d.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ne(vt(l.latitude),vt(c.latitude));return d!==0?d:Ne(vt(l.longitude),vt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return AS(r.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,R,x,C;const d=l.fields||{},p=c.fields||{},g=(S=d[sl])==null?void 0:S.arrayValue,v=(R=p[sl])==null?void 0:R.arrayValue,T=Ne(((x=g==null?void 0:g.values)==null?void 0:x.length)||0,((C=v==null?void 0:v.values)==null?void 0:C.length)||0);return T!==0?T:AS(g,v)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Er.mapValue&&c===Er.mapValue)return 0;if(l===Er.mapValue)return 1;if(c===Er.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=yg(p[T],v[T]);if(S!==0)return S;const R=Dr(d[p[T]],g[v[T]]);if(R!==0)return R}return Ne(p.length,v.length)})(r.mapValue,e.mapValue);default:throw ge(23264,{he:t})}}function bS(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const t=Rs(r),i=Rs(e),a=Ne(t.seconds,i.seconds);return a!==0?a:Ne(t.nanos,i.nanos)}function AS(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Dr(t[a],i[a]);if(l)return l}return Ne(t.length,i.length)}function rl(r){return bg(r)}function bg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Rs(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Cs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return de.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=bg(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${bg(t.fields[c])}`;return a+"}"})(r.mapValue):ge(61005,{value:r})}function Nf(r){switch(Cr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Td(r);return e?16+Nf(e):16;case 5:return 2*r.stringValue.length;case 6:return Cs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Nf(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Lr(i.fields,((l,c)=>{a+=l.length+Nf(c)})),a})(r.mapValue);default:throw ge(13486,{value:r})}}function gc(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ag(r){return!!r&&"integerValue"in r}function yc(r){return!!r&&"arrayValue"in r}function IS(r){return!!r&&"nullValue"in r}function wS(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function xf(r){return!!r&&"mapValue"in r}function Sd(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[gy])==null?void 0:i.stringValue)===yy}function ec(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Lr(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ec(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ec(r.arrayValue.values[t]);return e}return{...r}}function vA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===_A}const EA={mapValue:{fields:{[gy]:{stringValue:yy},[sl]:{arrayValue:{}}}}};function e2(r){return"nullValue"in r?Df:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?gc(Pa.empty(),de.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Sd(r)?EA:{mapValue:{}}:ge(35942,{value:r})}function t2(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?gc(Pa.empty(),de.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?EA:"mapValue"in r?Sd(r)?{mapValue:{}}:Er:ge(61959,{value:r})}function RS(r,e){const t=Dr(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function CS(r,e){const t=Dr(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!xf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(t)}setAll(e){let t=Tt.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=ec(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());xf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];xf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Lr(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new hn(ec(this.value))}}function TA(r){const e=[];return Lr(r.fields,((t,i)=>{const a=new Tt([t]);if(xf(i)){const l=TA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new It(e,0,we.min(),we.min(),we.min(),hn.empty(),0)}static newFoundDocument(e,t,i,a){return new It(e,1,t,we.min(),i,a,0)}static newNoDocument(e,t){return new It(e,2,t,we.min(),we.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new It(e,3,t,we.min(),we.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t){this.position=e,this.inclusive=t}}function DS(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=de.comparator(de.fromName(c.referenceValue),t.key):i=Dr(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function NS(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ji(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t="asc"){this.field=e,this.dir=t}}function n2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{}class He extends SA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new i2(e,t,i):t==="array-contains"?new a2(e,i):t==="in"?new CA(e,i):t==="not-in"?new o2(e,i):t==="array-contains-any"?new l2(e,i):new He(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new s2(e,i):new r2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Dr(t,this.value)):t!==null&&Cr(this.value)===Cr(t)&&this.matchesComparison(Dr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class at extends SA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new at(e,t)}matches(e){return ol(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ol(r){return r.op==="and"}function Ig(r){return r.op==="or"}function _y(r){return bA(r)&&ol(r)}function bA(r){for(const e of r.filters)if(e instanceof at)return!1;return!0}function wg(r){if(r instanceof He)return r.field.canonicalString()+r.op.toString()+rl(r.value);if(_y(r))return r.filters.map((e=>wg(e))).join(",");{const e=r.filters.map((t=>wg(t))).join(",");return`${r.op}(${e})`}}function AA(r,e){return r instanceof He?(function(i,a){return a instanceof He&&i.op===a.op&&i.field.isEqual(a.field)&&Ji(i.value,a.value)})(r,e):r instanceof at?(function(i,a){return a instanceof at&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&AA(c,a.filters[d])),!0):!1})(r,e):void ge(19439)}function IA(r,e){const t=r.filters.concat(e);return at.create(t,r.op)}function wA(r){return r instanceof He?(function(t){return`${t.field.canonicalString()} ${t.op} ${rl(t.value)}`})(r):r instanceof at?(function(t){return t.op.toString()+" {"+t.getFilters().map(wA).join(" ,")+"}"})(r):"Filter"}class i2 extends He{constructor(e,t,i){super(e,t,i),this.key=de.fromName(i.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class s2 extends He{constructor(e,t){super(e,"in",t),this.keys=RA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class r2 extends He{constructor(e,t){super(e,"not-in",t),this.keys=RA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function RA(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>de.fromName(i.referenceValue)))}class a2 extends He{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yc(t)&&pc(t.arrayValue,this.value)}}class CA extends He{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pc(this.value.arrayValue,t)}}class o2 extends He{constructor(e,t){super(e,"not-in",t)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pc(this.value.arrayValue,t)}}class l2 extends He{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>pc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Rg(r,e=null,t=[],i=[],a=null,l=null,c=null){return new u2(r,e,t,i,a,l,c)}function ka(r){const e=Se(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>wg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),yd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>rl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>rl(i))).join(",")),e.Te=t}return e.Te}function xc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!n2(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!AA(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!NS(r.startAt,e.startAt)&&NS(r.endAt,e.endAt)}function $f(r){return de.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Xf(r,e){return r.filters.filter((t=>t instanceof He&&t.field.isEqual(e)))}function xS(r,e,t){let i=Df,a=!0;for(const l of Xf(r,e)){let c=Df,d=!0;switch(l.op){case"<":case"<=":c=e2(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Df}RS({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];RS({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function VS(r,e,t){let i=Er,a=!0;for(const l of Xf(r,e)){let c=Er,d=!0;switch(l.op){case">=":case">":c=t2(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Er}CS({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];CS({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function DA(r,e,t,i,a,l,c,d){return new Sl(r,e,t,i,a,l,c,d)}function bd(r){return new Sl(r)}function MS(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function c2(r){return de.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function NA(r){return r.collectionGroup!==null}function tc(r){const e=Se(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new ot(Tt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new _c(l,i))})),t.has(Tt.keyField().canonicalString())||e.Ie.push(new _c(Tt.keyField(),i))}return e.Ie}function Bn(r){const e=Se(r);return e.Ee||(e.Ee=h2(e,tc(r))),e.Ee}function h2(r,e){if(r.limitType==="F")return Rg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new _c(a.field,l)}));const t=r.endAt?new al(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new al(r.startAt.position,r.startAt.inclusive):null;return Rg(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Cg(r,e){const t=r.filters.concat([e]);return new Sl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function f2(r,e){const t=r.explicitOrderBy.concat([e]);return new Sl(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Dg(r,e,t){return new Sl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ad(r,e){return xc(Bn(r),Bn(e))&&r.limitType===e.limitType}function xA(r){return`${ka(Bn(r))}|lt:${r.limitType}`}function jo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>wA(a))).join(", ")}]`),yd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>rl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>rl(a))).join(",")),`Target(${i})`})(Bn(r))}; limitType=${r.limitType})`}function Vc(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):de.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of tc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=DS(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,tc(i),a)||i.endAt&&!(function(c,d,p){const g=DS(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,tc(i),a))})(r,e)}function VA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function MA(r){return(e,t)=>{let i=!1;for(const a of tc(r)){const l=d2(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function d2(r,e,t){const i=r.field.isKeyField()?de.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Dr(p,g):ge(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return fA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new dt(de.comparator);function jn(){return m2}const OA=new dt(de.comparator);function Hu(...r){let e=OA;for(const t of r)e=e.insert(t.key,t);return e}function PA(r){let e=OA;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Yi(){return nc()}function kA(){return nc()}function nc(){return new Ns((r=>r.toString()),((r,e)=>r.isEqual(e)))}const p2=new dt(de.comparator),g2=new ot(de.comparator);function Le(...r){let e=g2;for(const t of r)e=e.add(t);return e}const y2=new ot(Ne);function vy(){return y2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(e)?"-0":e}}function LA(r){return{integerValue:""+r}}function _2(r,e){return tA(e)?LA(e):Ey(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this._=void 0}}function v2(r,e,t){return r instanceof vc?(function(a,l){const c={fields:{[pA]:{stringValue:mA},[yA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&py(l)&&(l=Td(l)),l&&(c.fields[gA]=l),{mapValue:c}})(t,e):r instanceof ll?zA(r,e):r instanceof ul?jA(r,e):(function(a,l){const c=UA(a,l),d=OS(c)+OS(a.Ae);return Ag(c)&&Ag(a.Ae)?LA(d):Ey(a.serializer,d)})(r,e)}function E2(r,e,t){return r instanceof ll?zA(r,e):r instanceof ul?jA(r,e):t}function UA(r,e){return r instanceof Ec?(function(i){return Ag(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class vc extends Id{}class ll extends Id{constructor(e){super(),this.elements=e}}function zA(r,e){const t=BA(e);for(const i of r.elements)t.some((a=>Ji(a,i)))||t.push(i);return{arrayValue:{values:t}}}class ul extends Id{constructor(e){super(),this.elements=e}}function jA(r,e){let t=BA(e);for(const i of r.elements)t=t.filter((a=>!Ji(a,i)));return{arrayValue:{values:t}}}class Ec extends Id{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function OS(r){return vt(r.integerValue||r.doubleValue)}function BA(r){return yc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t){this.field=e,this.transform=t}}function S2(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof ll&&a instanceof ll||i instanceof ul&&a instanceof ul?Wo(i.elements,a.elements,Ji):i instanceof Ec&&a instanceof Ec?Ji(i.Ae,a.Ae):i instanceof vc&&a instanceof vc})(r.transform,e.transform)}class b2{constructor(e,t){this.version=e,this.transformResults=t}}class Wt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class wd{}function qA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Mc(r.key,Wt.none()):new bl(r.key,r.data,Wt.none());{const t=r.data,i=hn.empty();let a=new ot(Tt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new xs(r.key,i,new wn(a.toArray()),Wt.none())}}function A2(r,e,t){r instanceof bl?(function(a,l,c){const d=a.value.clone(),p=kS(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):r instanceof xs?(function(a,l,c){if(!Vf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=kS(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(FA(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ic(r,e,t,i){return r instanceof bl?(function(l,c,d,p){if(!Vf(l.precondition,c))return d;const g=l.value.clone(),v=LS(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(r,e,t,i):r instanceof xs?(function(l,c,d,p){if(!Vf(l.precondition,c))return d;const g=LS(l.fieldTransforms,p,c),v=c.data;return v.setAll(FA(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,c,d){return Vf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(r,e,t)}function I2(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=UA(i.transform,a||null);l!=null&&(t===null&&(t=hn.empty()),t.set(i.field,l))}return t||null}function PS(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Wo(i,a,((l,c)=>S2(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class bl extends wd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class xs extends wd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function FA(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function kS(r,e,t){const i=new Map;Ae(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,E2(c,d,t[a]))}return i}function LS(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,v2(l,c,e))}return i}class Mc extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HA extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&A2(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ic(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ic(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=kA();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=qA(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(we.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,((t,i)=>PS(t,i)))&&Wo(this.baseMutations,e.baseMutations,((t,i)=>PS(t,i)))}}class Sy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Ae(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return p2})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Sy(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,$e;function R2(r){switch(r){case W.OK:return ge(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return ge(15467,{code:r})}}function GA(r){if(r===void 0)return Nt("GRPC error has no .code"),W.UNKNOWN;switch(r){case qt.OK:return W.OK;case qt.CANCELLED:return W.CANCELLED;case qt.UNKNOWN:return W.UNKNOWN;case qt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case qt.INTERNAL:return W.INTERNAL;case qt.UNAVAILABLE:return W.UNAVAILABLE;case qt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case qt.NOT_FOUND:return W.NOT_FOUND;case qt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case qt.ABORTED:return W.ABORTED;case qt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case qt.DATA_LOSS:return W.DATA_LOSS;default:return ge(39323,{code:r})}}($e=qt||(qt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=new Ar([4294967295,4294967295],0);function US(r){const e=C2().encode(r),t=new jb;return t.update(e),new Uint8Array(t.digest())}function zS(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ar([t,i],0),new Ar([a,l],0)]}class Ay{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Gu(`Invalid padding: ${t}`);if(i<0)throw new Gu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ar.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Ar.fromNumber(i)));return a.compare(D2)===1&&(a=new Ar([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=US(e),[i,a]=zS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ay(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=US(e),[i,a]=zS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Pc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Oc(we.min(),a,new dt(Ne),jn(),Le())}}class Pc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Pc(i,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class KA{constructor(e,t){this.targetId=e,this.Ce=t}}class QA{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class jS{constructor(){this.ve=0,this.Fe=BS(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),i=Le();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:ge(38017,{changeType:l})}})),new Pc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=BS()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class N2{constructor(e){this.Ge=e,this.ze=new Map,this.je=jn(),this.He=gf(),this.Je=gf(),this.Ze=new dt(Ne)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if($f(l))if(i===0){const c=new de(l.path);this.et(t,c,It.newNoDocument(c,we.min()))}else Ae(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Cs(i).toUint8Array()}catch(p){if(p instanceof dA)return Jo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Ay(c,a,l)}catch(p){return Jo(p instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&$f(d.target)){const p=new de(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,It.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=Le();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Oc(e,t,this.Ze,this.je,i);return this.je=jn(),this.He=gf(),this.Je=gf(),this.Ze=new dt(Ne),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new jS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ot(Ne),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ot(Ne),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gf(){return new dt(de.comparator)}function BS(){return new dt(de.comparator)}const x2={asc:"ASCENDING",desc:"DESCENDING"},V2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M2={and:"AND",or:"OR"};class O2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ng(r,e){return r.useProto3Json||yd(e)?e:{value:e}}function cl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function P2(r,e){return cl(r,e.toTimestamp())}function gn(r){return Ae(!!r,49232),we.fromTimestamp((function(t){const i=Rs(t);return new rt(i.seconds,i.nanos)})(r))}function Iy(r,e){return xg(r,e).canonicalString()}function xg(r,e){const t=(function(a){return new tt(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function $A(r){const e=tt.fromString(r);return Ae(sI(e),10190,{key:e.toString()}),e}function Jf(r,e){return Iy(r.databaseId,e.path)}function Ra(r,e){const t=$A(e);if(t.get(1)!==r.databaseId.projectId)throw new he(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new de(WA(t))}function XA(r,e){return Iy(r.databaseId,e)}function JA(r){const e=$A(r);return e.length===4?tt.emptyPath():WA(e)}function Vg(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function WA(r){return Ae(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function qS(r,e,t){return{name:Jf(r,e),fields:t.value.mapValue.fields}}function k2(r,e,t){const i=Ra(r,e.name),a=gn(e.updateTime),l=e.createTime?gn(e.createTime):we.min(),c=new hn({mapValue:{fields:e.fields}}),d=It.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function L2(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(Ae(v===void 0||typeof v=="string",58123),Mt.fromBase64String(v||"")):(Ae(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Mt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?W.UNKNOWN:GA(g.code);return new he(v,g.message||"")})(c);t=new QA(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Ra(r,i.document.name),l=gn(i.document.updateTime),c=i.document.createTime?gn(i.document.createTime):we.min(),d=new hn({mapValue:{fields:i.document.fields}}),p=It.newFoundDocument(a,l,c,d),g=i.targetIds||[],v=i.removedTargetIds||[];t=new Mf(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Ra(r,i.document),l=i.readTime?gn(i.readTime):we.min(),c=It.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Mf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Ra(r,i.document),l=i.removedTargetIds||[];t=new Mf([],l,a,null)}else{if(!("filter"in e))return ge(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new w2(a,l),d=i.targetId;t=new KA(d,c)}}return t}function Wf(r,e){let t;if(e instanceof bl)t={update:qS(r,e.key,e.value)};else if(e instanceof Mc)t={delete:Jf(r,e.key)};else if(e instanceof xs)t={update:qS(r,e.key,e.data),updateMask:F2(e.fieldMask)};else{if(!(e instanceof HA))return ge(16599,{dt:e.type});t={verify:Jf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof vc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ll)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ul)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ec)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw ge(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:P2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge(27497)})(r,e.precondition)),t}function Mg(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Wt.updateTime(gn(l.updateTime)):l.exists!==void 0?Wt.exists(l.exists):Wt.none()})(e.currentDocument):Wt.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)Ae(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new vc;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];p=new ll(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];p=new ul(v)}else"increment"in d?p=new Ec(c,d.increment):ge(16584,{proto:d});const g=Tt.fromServerFormat(d.fieldPath);return new T2(g,p)})(r,a))):[];if(e.update){e.update.name;const a=Ra(r,e.update.name),l=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new wn(g.map((v=>Tt.fromServerFormat(v))))})(e.updateMask);return new xs(a,l,c,t,i)}return new bl(a,l,t,i)}if(e.delete){const a=Ra(r,e.delete);return new Mc(a,t)}if(e.verify){const a=Ra(r,e.verify);return new HA(a,t)}return ge(1463,{proto:e})}function U2(r,e){return r&&r.length>0?(Ae(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?gn(a.updateTime):gn(l);return c.isEqual(we.min())&&(c=gn(l)),new b2(c,a.transformResults||[])})(t,e)))):[]}function ZA(r,e){return{documents:[XA(r,e.path)]}}function eI(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=XA(r,a);const l=(function(g){if(g.length!==0)return iI(at.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:Bo(S.field),direction:j2(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ng(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function tI(r){let e=JA(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Ae(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=nI(T);return S instanceof at&&_y(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(x){return new _c(qo(x.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,yd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,R=T.values||[];return new al(R,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const S=!T.before,R=T.values||[];return new al(R,S)})(t.endAt)),DA(e,a,c,l,d,"F",p,g)}function z2(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nI(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=qo(t.unaryFilter.field);return He.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=qo(t.unaryFilter.field);return He.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(t.unaryFilter.field);return He.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qo(t.unaryFilter.field);return He.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(r):r.fieldFilter!==void 0?(function(t){return He.create(qo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return at.create(t.compositeFilter.filters.map((i=>nI(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(r):ge(30097,{filter:r})}function j2(r){return x2[r]}function B2(r){return V2[r]}function q2(r){return M2[r]}function Bo(r){return{fieldPath:r.canonicalString()}}function qo(r){return Tt.fromServerFormat(r.fieldPath)}function iI(r){return r instanceof He?(function(t){if(t.op==="=="){if(wS(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(IS(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wS(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(IS(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:B2(t.op),value:t.value}}})(r):r instanceof at?(function(t){const i=t.getFilters().map((a=>iI(a)));return i.length===1?i[0]:{compositeFilter:{op:q2(t.op),filters:i}}})(r):ge(54877,{filter:r})}function F2(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sI(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function rI(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,i,a,l=we.min(),c=we.min(),d=Mt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.yt=e}}function H2(r,e){let t;if(e.document)t=k2(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=de.fromSegments(e.noDocument.path),a=Ua(e.noDocument.readTime);t=It.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge(56709);{const i=de.fromSegments(e.unknownDocument.path),a=Ua(e.unknownDocument.version);t=It.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new rt(a[0],a[1]);return we.fromTimestamp(l)})(e.readTime)),t}function FS(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:Jf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:cl(l,c.version.toTimestamp()),createTime:cl(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:La(e.version)};else{if(!e.isUnknownDocument())return ge(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:La(e.version)}}return i}function Zf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function La(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ua(r){const e=new rt(r.seconds,r.nanoseconds);return we.fromTimestamp(e)}function Ea(r,e){const t=(e.baseMutations||[]).map((l=>Mg(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>Mg(r.yt,l))),a=rt.fromMillis(e.localWriteTimeMs);return new Ty(e.batchId,a,t,i)}function Ku(r){const e=Ua(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Ua(r.lastLimboFreeSnapshotVersion):we.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return Ae(c===1,1966,{count:c}),Bn(bd(JA(l.documents[0])))})(r.query):(function(l){return Bn(tI(l))})(r.query),new Ss(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Mt.fromBase64String(r.resumeToken))}function oI(r,e){const t=La(e.snapshotVersion),i=La(e.lastLimboFreeSnapshotVersion);let a;a=$f(e.target)?ZA(r.yt,e.target):eI(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ka(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function lI(r){const e=tI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Dg(e,e.limit,"L"):e}function $p(r,e){return new by(e.largestBatchId,Mg(r.yt,e.overlayMutation))}function HS(r,e){const t=e.path.lastSegment();return[r,fn(e.path.popLast()),t]}function GS(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:La(i.readTime),documentKey:fn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{getBundleMetadata(e,t){return KS(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Ua(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return KS(e).put((function(a){return{bundleId:a.id,createTime:La(gn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return QS(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:lI(l.bundledQuery),readTime:Ua(l.readTime)}})(i)}))}saveNamedQuery(e,t){return QS(e).put((function(a){return{name:a.name,readTime:La(gn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function KS(r){return Qt(r,_d)}function QS(r){return Qt(r,vd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Rd(e,i)}getOverlay(e,t){return xu(e).get(HS(this.userId,t)).next((i=>i?$p(this.serializer,i):null))}getOverlays(e,t){const i=Yi();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new by(t,c);a.push(this.bt(e,d))})),B.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(fn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(xu(e).X(Tg,d))})),B.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Yi(),l=fn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return xu(e).H(Tg,c).next((d=>{for(const p of d){const g=$p(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Yi();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xu(e).ee({index:oA,range:d},((p,g,v)=>{const T=$p(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return xu(e).put((function(a,l,c){const[d,p,g]=HS(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Wf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function xu(r){return Qt(r,Ed)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{St(e){return Qt(e,dy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?Mt.fromUint8Array(i):Mt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(vt(e.integerValue));else if("doubleValue"in e){const i=vt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),cc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Rs(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Cs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?vA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Sd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ge(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){var c,d;const i=e.fields||{};this.Ft(t,53);const a=sl,l=((d=(c=i[a].arrayValue)==null?void 0:c.values)==null?void 0:d.length)||0;this.Ft(t,15),t.Mt(vt(l)),this.Ot(a,t),this.Ct(i[a],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),de.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ta.Wt=new Ta;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=255;function Q2(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function YS(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=Q2(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(e/8)}class Y2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),i=YS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=YS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Oo),this.sn(255)}_n(){this.an(Oo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Oo?(this.sn(Oo),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Oo?(this.an(Oo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class $2{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class X2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Vu{constructor(){this.cn=new Y2,this.ascending=new $2(this.cn),this.descending=new X2(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t,i,a){this.hn=e,this.Pn=t,this.Tn=i,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new Sa(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:Of(this.Tn),directionalValue:Of(this.In),orderedDocumentKey:Of(t),documentKey:i.path.toArray()}}An(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function fr(r,e){let t=r.hn-e.hn;return t!==0?t:(t=$S(r.Tn,e.Tn),t!==0?t:(t=$S(r.In,e.In),t!==0?t:de.comparator(r.Pn,e.Pn)))}function $S(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function Of(r){return eb()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function XS(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class JS{constructor(e){this.Vn=new ot(((t,i)=>Tt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=_g(e);if(t!==void 0&&!this.pn(t))return!1;const i=ga(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.pn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=i[l];if(!this.yn(d,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.dn.length||!this.wn(this.dn[c++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new ot(Tt.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new wf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new wf(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new wf(i.field,i.dir==="asc"?0:1)));return new Hf(Hf.UNKNOWN_ID,this.collectionId,t,uc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(r){var t,i;if(Ae(r instanceof He||r instanceof at,20012),r instanceof He){if(r instanceof CA){const a=((i=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((l=>He.create(r.field,"==",l))))||[];return at.create(a,"or")}return r}const e=r.filters.map((a=>uI(a)));return at.create(e,r.op)}function J2(r){if(r.getFilters().length===0)return[];const e=kg(uI(r));return Ae(cI(e),7391),Og(e)||Pg(e)?[e]:e.getFilters()}function Og(r){return r instanceof He}function Pg(r){return r instanceof at&&_y(r)}function cI(r){return Og(r)||Pg(r)||(function(t){if(t instanceof at&&Ig(t)){for(const i of t.getFilters())if(!Og(i)&&!Pg(i))return!1;return!0}return!1})(r)}function kg(r){if(Ae(r instanceof He||r instanceof at,34018),r instanceof He)return r;if(r.filters.length===1)return kg(r.filters[0]);const e=r.filters.map((i=>kg(i)));let t=at.create(e,r.op);return t=ed(t),cI(t)?t:(Ae(t instanceof at,64498),Ae(ol(t),40251),Ae(t.filters.length>1,57927),t.filters.reduce(((i,a)=>wy(i,a))))}function wy(r,e){let t;return Ae(r instanceof He||r instanceof at,38388),Ae(e instanceof He||e instanceof at,25473),t=r instanceof He?e instanceof He?(function(a,l){return at.create([a,l],"and")})(r,e):WS(r,e):e instanceof He?WS(e,r):(function(a,l){if(Ae(a.filters.length>0&&l.filters.length>0,48005),ol(a)&&ol(l))return IA(a,l.getFilters());const c=Ig(a)?a:l,d=Ig(a)?l:a,p=c.filters.map((g=>wy(g,d)));return at.create(p,"or")})(r,e),ed(t)}function WS(r,e){if(ol(e))return IA(e,r.getFilters());{const t=e.filters.map((i=>wy(r,i)));return at.create(t,"or")}}function ed(r){if(Ae(r instanceof He||r instanceof at,11850),r instanceof He)return r;const e=r.getFilters();if(e.length===1)return ed(e[0]);if(bA(r))return r;const t=e.map((a=>ed(a))),i=[];return t.forEach((a=>{a instanceof He?i.push(a):a instanceof at&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:at.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.Sn=new Ry}addToCollectionParentIndex(e,t){return this.Sn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(qn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(qn.min())}updateCollectionGroup(e,t,i){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class Ry{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new ot(tt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new ot(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="IndexedDbIndexManager",yf=new Uint8Array(0);class Z2{constructor(e,t){this.databaseId=t,this.Dn=new Ry,this.Cn=new Ns((i=>ka(i)),((i,a)=>xc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:i,parent:fn(a)};return e0(e).put(l)}return B.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Qb(t),""],!1,!0);return e0(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Qi(c.parent))}return i}))}addFieldIndex(e,t){const i=Mu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=ko(e);return l.next((d=>{c.put(GS(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Mu(e),a=ko(e),l=Po(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Mu(e),i=Po(e),a=ko(e);return t.X().next((()=>i.X())).next((()=>a.X()))}createTargetIndexes(e,t){return B.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new JS(i).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=Po(e);let a=!0;const l=new Map;return B.forEach(this.vn(t),(c=>this.Fn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Le();const d=[];return B.forEach(l,((p,g)=>{re(ZS,`Using index ${(function(le){return`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map((_e=>`${_e.fieldPath}:${_e.kind}`)).join(",")}`})(p)} to execute ${ka(t)}`);const v=(function(le,_e){const Ee=_g(_e);if(Ee===void 0)return null;for(const ue of Xf(le,Ee.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null})(g,p),T=(function(le,_e){const Ee=new Map;for(const ue of ga(_e))for(const N of Xf(le,ue.fieldPath))switch(N.op){case"==":case"in":Ee.set(ue.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return Ee.set(ue.fieldPath.canonicalString(),N.value),Array.from(Ee.values())}return null})(g,p),S=(function(le,_e){const Ee=[];let ue=!0;for(const N of ga(_e)){const A=N.kind===0?xS(le,N.fieldPath,le.startAt):VS(le,N.fieldPath,le.startAt);Ee.push(A.value),ue&&(ue=A.inclusive)}return new al(Ee,ue)})(g,p),R=(function(le,_e){const Ee=[];let ue=!0;for(const N of ga(_e)){const A=N.kind===0?VS(le,N.fieldPath,le.endAt):xS(le,N.fieldPath,le.endAt);Ee.push(A.value),ue&&(ue=A.inclusive)}return new al(Ee,ue)})(g,p),x=this.Mn(p,g,S),C=this.Mn(p,g,R),z=this.xn(p,g,T),Q=this.On(p.indexId,v,x,S.inclusive,C,R.inclusive,z);return B.forEach(Q,(ae=>i.Z(ae,t.limit).next((le=>{le.forEach((_e=>{const Ee=de.fromSegments(_e.documentKey);c.has(Ee)||(c=c.add(Ee),d.push(Ee))}))}))))})).next((()=>d))}return B.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=J2(at.create(e.filters,"and")).map((i=>Rg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),v=[];for(let T=0;T<p;++T){const S=t?this.Nn(t[T/g]):yf,R=this.Bn(e,S,i[T%g],a),x=this.Ln(e,S,l[T%g],c),C=d.map((z=>this.Bn(e,S,z,!0)));v.push(...this.createRange(R,x,C))}return v}Bn(e,t,i,a){const l=new Sa(e,de.empty(),t,i);return a?l:l.En()}Ln(e,t,i,a){const l=new Sa(e,de.empty(),t,i);return a?l.En():l}Fn(e,t){const i=new JS(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.gn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.vn(t);return B.forEach(a,(l=>this.Fn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new ot(Tt.comparator),v=!1;for(const T of p.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?v=!0:g=g.add(S.field));for(const T of p.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(v?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}kn(e,t){const i=new Vu;for(const a of ga(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.ln(a.kind);Ta.Wt.Dt(l,c)}return i.un()}Nn(e){const t=new Vu;return Ta.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new Vu;return Ta.Wt.Dt(gc(this.databaseId,t),i.ln((function(l){const c=ga(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let a=[];a.push(new Vu);let l=0;for(const c of ga(e)){const d=i[l++];for(const p of a)if(this.qn(t,c.fieldPath)&&yc(d))a=this.Un(a,c,d);else{const g=p.ln(c.kind);Ta.Wt.Dt(d,g)}}return this.$n(a)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const p=new Vu;p.seed(d.un()),Ta.Wt.Dt(c,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((i=>i instanceof He&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Mu(e),a=ko(e);return(t?i.H(Eg,IDBKeyRange.bound(t,t)):i.H()).next((l=>{const c=[];return B.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(v,T){const S=T?new uc(T.sequenceNumber,new qn(Ua(T.readTime),new de(Qi(T.documentKey)),T.largestBatchId)):uc.empty(),R=v.fields.map((([x,C])=>new wf(Tt.fromServerFormat(x),C)));return new Hf(v.indexId,v.collectionGroup,R,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ne(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Mu(e),l=ko(e);return this.Wn(e).next((c=>a.H(Eg,IDBKeyRange.bound(t,t)).next((d=>B.forEach(d,(p=>l.put(GS(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return B.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),B.forEach(d,(p=>this.Qn(e,a,p).next((g=>{const v=this.Gn(l,p);return g.isEqual(v)?B.resolve():this.zn(e,l,p,g,v)})))))))}))}jn(e,t,i,a){return Po(e).put(a.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,a){return Po(e).delete(a.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const a=Po(e);let l=new ot(fr);return a.ee({index:aA,range:IDBKeyRange.only([i.indexId,this.uid,Of(this.Kn(i,t))])},((c,d)=>{l=l.add(new Sa(i.indexId,t,XS(d.arrayValue),XS(d.directionalValue)))})).next((()=>l))}Gn(e,t){let i=new ot(fr);const a=this.kn(t,e);if(a==null)return i;const l=_g(t);if(l!=null){const c=e.data.field(l.fieldPath);if(yc(c))for(const d of c.arrayValue.values||[])i=i.add(new Sa(t.indexId,e.key,this.Nn(d),a))}else i=i.add(new Sa(t.indexId,e.key,yf,a));return i}zn(e,t,i,a,l){re(ZS,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,v,T,S){const R=p.getIterator(),x=g.getIterator();let C=Mo(R),z=Mo(x);for(;C||z;){let Q=!1,ae=!1;if(C&&z){const le=v(C,z);le<0?ae=!0:le>0&&(Q=!0)}else C!=null?ae=!0:Q=!0;Q?(T(z),z=Mo(x)):ae?(S(C),C=Mo(R)):(C=Mo(R),z=Mo(x))}})(a,l,fr,(d=>{c.push(this.jn(e,t,i,d))}),(d=>{c.push(this.Hn(e,t,i,d))})),B.waitFor(c)}Wn(e){let t=1;return ko(e).ee({index:rA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>fr(c,d))).filter(((c,d,p)=>!d||fr(c,p[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=fr(c,e),p=fr(c,t);if(d===0)a[0]=e.En();else if(d>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const d=a[c].An(this.uid,yf,de.empty()),p=a[c+1].An(this.uid,yf,de.empty());l.push(IDBKeyRange.bound(d,p))}return l}Jn(e,t){return fr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(t0)}getMinOffset(e,t){return B.mapArray(this.vn(t),(i=>this.Fn(e,i).next((a=>a||ge(44426))))).next(t0)}}function e0(r){return Qt(r,dc)}function Po(r){return Qt(r,Zu)}function Mu(r){return Qt(r,fy)}function ko(r){return Qt(r,Wu)}function t0(r){Ae(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;uy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new qn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hI=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(r,e,t){const i=r.store(_i),a=r.store(el),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.ee({range:c},((v,T,S)=>(d++,S.delete())));l.push(p.next((()=>{Ae(d===1,47070,{batchId:t.batchId})})));const g=[];for(const v of t.mutations){const T=nA(e,v.key.path,t.batchId);l.push(a.delete(T)),g.push(v.key)}return B.waitFor(l).next((()=>g))}function td(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ge(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(hI,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class Cd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static wt(e,t,i,a){Ae(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Cd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dr(e).ee({index:Aa,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=Fo(e),c=dr(e);return c.add({}).next((d=>{Ae(typeof d=="number",49019);const p=new Ty(d,t,i,a),g=(function(R,x,C){const z=C.baseMutations.map((ae=>Wf(R.yt,ae))),Q=C.mutations.map((ae=>Wf(R.yt,ae)));return{userId:x,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:z,mutations:Q}})(this.serializer,this.userId,p),v=[];let T=new ot(((S,R)=>Ne(S.canonicalString(),R.canonicalString())));for(const S of a){const R=nA(this.userId,S.key.path,d);T=T.add(S.key.path.popLast()),v.push(c.put(g)),v.push(l.put(R,Rx))}return T.forEach((S=>{v.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),B.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return dr(e).get(t).next((i=>i?(Ae(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Ea(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?B.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return dr(e).ee({index:Aa,range:a},((c,d,p)=>{d.userId===this.userId&&(Ae(d.batchId>=i,47524,{Yn:i}),l=Ea(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ia;return dr(e).ee({index:Aa,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ia],[this.userId,Number.POSITIVE_INFINITY]);return dr(e).H(Aa,t).next((i=>i.map((a=>Ea(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Rf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Fo(e).ee({range:a},((c,d,p)=>{const[g,v,T]=c,S=Qi(v);if(g===this.userId&&t.path.isEqual(S))return dr(e).get(T).next((R=>{if(!R)throw ge(61480,{er:c,batchId:T});Ae(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:T}),l.push(Ea(this.serializer,R))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ne);const a=[];return t.forEach((l=>{const c=Rf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Fo(e).ee({range:d},((g,v,T)=>{const[S,R,x]=g,C=Qi(R);S===this.userId&&l.path.isEqual(C)?i=i.add(x):T.done()}));a.push(p)})),B.waitFor(a).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Rf(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new ot(Ne);return Fo(e).ee({range:c},((p,g,v)=>{const[T,S,R]=p,x=Qi(S);T===this.userId&&i.isPrefixOf(x)?x.length===a&&(d=d.add(R)):v.done()})).next((()=>this.tr(e,d)))}tr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(dr(e).get(l).next((c=>{if(c===null)throw ge(35274,{batchId:l});Ae(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(Ea(this.serializer,c))})))})),B.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return fI(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),B.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Fo(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const p=Qi(l[1]);a.push(p)}else d.done()})).next((()=>{Ae(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return dI(e,this.userId,t)}ir(e){return mI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ia,lastStreamToken:""}))}}function dI(r,e,t){const i=Rf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Fo(r).ee({range:l,Y:!0},((d,p,g)=>{const[v,T,S]=d;v===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function dr(r){return Qt(r,_i)}function Fo(r){return Qt(r,el)}function mI(r){return Qt(r,hc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new za(0)}static ar(){return new za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new za(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>we.fromTimestamp(new rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Lo(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(Ae(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Lo(e).ee(((c,d)=>{const p=Ku(d);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>B.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Lo(e).ee(((i,a)=>{const l=Ku(a);t(l)}))}ur(e){return i0(e).get(Qf).next((t=>(Ae(t!==null,2888),t)))}cr(e,t){return i0(e).put(Qf,t)}lr(e,t){return Lo(e).put(oI(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=ka(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Lo(e).ee({range:a,index:sA},((c,d,p)=>{const g=Ku(d);xc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=vr(e);return t.forEach((c=>{const d=fn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),B.waitFor(a)}removeMatchingKeys(e,t,i){const a=vr(e);return B.forEach(t,(l=>{const c=fn(l.path);return B.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=vr(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=vr(e);let l=Le();return a.ee({range:i,Y:!0},((c,d,p)=>{const g=Qi(c[1]),v=new de(g);l=l.add(v)})).next((()=>l))}containsKey(e,t){const i=fn(t.path),a=IDBKeyRange.bound([i],[Qb(i)],!1,!0);let l=0;return vr(e).ee({index:hy,Y:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Lo(e).get(t).next((i=>i?Ku(i):null))}}function Lo(r){return Qt(r,tl)}function i0(r){return Qt(r,wa)}function vr(r){return Qt(r,nl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="LruGarbageCollector",pI=1048576;function r0([r,e],[t,i]){const a=Ne(r,t);return a===0?Ne(e,i):a}class tV{constructor(e){this.Pr=e,this.buffer=new ot(r0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();r0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){re(s0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){kr(t)?re(s0,"Ignoring IndexedDB error during garbage collection: ",t):await Pr(t)}await this.Ar(3e5)}))}}class nV{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(In.ce);const i=new tV(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(n0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),zo()<=Fe.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function yI(r,e){return new nV(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t){this.db=e,this.garbageCollector=yI(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,a)=>t(a)))}addReference(e,t,i){return _f(e,i)}removeReference(e,t,i){return _f(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return _f(e,t)}wr(e,t){return(function(a,l){let c=!1;return mI(a).te((d=>dI(a,d,l).next((p=>(p&&(c=!0),B.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,d)=>{if(d<=t){const p=this.wr(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,we.min()),vr(e).delete((function(T){return[0,fn(T.path)]})(c)))))}));a.push(p)}})).next((()=>B.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return _f(e,t)}yr(e,t){const i=vr(e);let a,l=In.ce;return i.ee({index:hy},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==In.ce&&t(new de(Qi(a)),l),l=g,a=p):l=In.ce})).next((()=>{l!==In.ce&&t(new de(Qi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _f(r,e){return vr(r).put((function(i,a){return{targetId:0,path:fn(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.changes=new Ns((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?B.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ma(e).put(i)}removeEntry(e,t,i){return ma(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Zf(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=It.newInvalidDocument(t);return ma(e).ee({index:Cf,range:IDBKeyRange.only(Ou(t))},((a,l)=>{i=this.Sr(t,l)})).next((()=>i))}Dr(e,t){let i={size:0,document:It.newInvalidDocument(t)};return ma(e).ee({index:Cf,range:IDBKeyRange.only(Ou(t))},((a,l)=>{i={document:this.Sr(t,l),size:td(l)}})).next((()=>i))}getEntries(e,t){let i=jn();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c)})).next((()=>i))}vr(e,t){let i=jn(),a=new dt(de.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Sr(l,c);i=i.insert(l,d),a=a.insert(l,td(c))})).next((()=>({documents:i,Fr:a})))}Cr(e,t,i){if(t.isEmpty())return B.resolve();let a=new ot(l0);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Ou(a.first()),Ou(a.last())),c=a.getIterator();let d=c.getNext();return ma(e).ee({index:Cf,range:l},((p,g,v)=>{const T=de.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&l0(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?v.j(Ou(d)):v.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Zf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ma(e).H(IDBKeyRange.bound(d,p,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let v=jn();for(const T of g){const S=this.Sr(de.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(Vc(t,S)||a.has(S.key))&&(v=v.insert(S.key,S))}return v}))}getAllFromCollectionGroup(e,t,i,a){let l=jn();const c=o0(t,i),d=o0(t,qn.max());return ma(e).ee({index:iA,range:IDBKeyRange.bound(c,d,!0)},((p,g,v)=>{const T=this.Sr(de.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new rV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return a0(e).get(vg).next((t=>(Ae(!!t,20021),t)))}br(e,t){return a0(e).put(vg,t)}Sr(e,t){if(t){const i=H2(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(we.min())))return i}return It.newInvalidDocument(e)}}function vI(r){return new sV(r)}class rV extends _I{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Ns((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new ot(((l,c)=>Ne(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=FS(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=td(p);i+=g-d.size,t.push(this.Mr.addEntry(e,l,p))}else if(i-=d.size,this.trackRemovals){const p=FS(this.Mr.serializer,c.convertToNoDocument(we.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,i)),B.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function a0(r){return Qt(r,fc)}function ma(r){return Qt(r,Kf)}function Ou(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function o0(r,e){const t=e.documentKey.path.toArray();return[r,Zf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function l0(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Ne(t[l],i[l]),a)return a;return a=Ne(t.length,i.length),a||(a=Ne(t[t.length-2],i[i.length-2]),a||Ne(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&ic(i.mutation,a,wn.empty(),rt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Le()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Le()){const a=Yi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Hu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Yi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Le())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=jn();const c=nc(),d=(function(){return nc()})();return t.forEach(((p,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof xs)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),ic(v.mutation,g,v.mutation.getFieldMask(),rt.now())):c.set(g.key,wn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new aV(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=nc();let a=new dt(((c,d)=>c-d)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=i.get(p)||wn.empty();v=d.applyToLocalView(g,v),i.set(p,v);const T=(a.get(d.batchId)||Le()).add(p);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,T=kA();v.forEach((S=>{if(!l.has(S)){const R=qA(t.get(S),i.get(S));R!==null&&T.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return B.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return c2(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):B.resolve(Yi());let d=Zo,p=l;return c.next((g=>B.forEach(g,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?B.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Le()))).next((v=>({batchId:d,changes:PA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next((i=>{let a=Hu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Hu();return this.indexManager.getCollectionParents(e,l).next((d=>B.forEach(d,(p=>{const g=(function(T,S){return new Sl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((v=>{v.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,It.newInvalidDocument(v)))}));let d=Hu();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&ic(v.mutation,g,wn.empty(),rt.now()),Vc(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return B.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:gn(a.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:lI(a.bundledQuery),readTime:gn(a.readTime)}})(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.overlays=new dt(de.comparator),this.Lr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Yi();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),B.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),B.resolve()}getOverlaysForCollection(e,t,i){const a=Yi(),l=t.length+1,c=new de(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return B.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new dt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=Yi(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Yi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return B.resolve(d)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new by(t,i));let l=this.Lr.get(t);l===void 0&&(l=Le(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.kr=new ot(Jt.Kr),this.qr=new ot(Jt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Jt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Jt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new de(new tt([])),i=new Jt(t,e),a=new Jt(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new de(new tt([])),i=new Jt(t,e),a=new Jt(t,e+1);let l=Le();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Jt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Jt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return de.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||de.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ot(Jt.Kr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ty(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new Jt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return B.resolve(c)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ia:this.Yn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Jt(t,0),a=new Jt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ne);return t.forEach((a=>{const l=new Jt(a,0),c=new Jt(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{i=i.add(d.Hr)}))})),B.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;de.isDocumentKey(l)||(l=l.child(""));const c=new Jt(new de(l),0);let d=new ot(Ne);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),B.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ae(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return B.forEach(t.mutations,(a=>{const l=new Jt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Jt(t,0),a=this.Jr.firstAfterOrEqual(i);return B.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.ti=e,this.docs=(function(){return new dt(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return B.resolve(i?i.document.mutableCopy():It.newInvalidDocument(t))}getEntries(e,t){let i=jn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():It.newInvalidDocument(a))})),B.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=jn();const c=t.path,d=new de(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||uy(Jb(v),i)<=0||(a.has(v.key)||Vc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(e,t,i,a){ge(9500)}ni(e,t){return B.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new fV(this)}getSize(e){return B.resolve(this.size)}}class fV extends _I{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),B.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.persistence=e,this.ri=new Ns((t=>ka(t)),xc),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.ii=0,this.si=new Cy,this.targetCount=0,this.oi=za._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),B.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new za(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.lr(t),B.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),B.waitFor(l).next((()=>a))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return B.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),B.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),B.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return B.resolve(i)}containsKey(e,t){return B.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,t){this._i={},this.overlays={},this.ai=new In(0),this.ui=!1,this.ui=!0,this.ci=new uV,this.referenceDelegate=e(this),this.li=new dV(this),this.indexManager=new W2,this.remoteDocumentCache=(function(a){return new hV(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new aI(t),this.Pi=new oV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new cV(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){re("MemoryPersistence","Starting transaction:",e);const a=new mV(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return B.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class mV extends Zb{constructor(e){super(),this.currentSequenceNumber=e}}class Dd{constructor(e){this.persistence=e,this.Ri=new Cy,this.Ai=null}static Vi(e){return new Dd(e)}get di(){if(this.Ai)return this.Ai;throw ge(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),B.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,(i=>{const a=de.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,we.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class nd{constructor(e,t){this.persistence=e,this.fi=new Ns((i=>fn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=yI(this,t)}static Vi(e,t){return new nd(e,t)}Ti(){}Ii(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return B.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?B.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(i++,l.removeEntry(c,we.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),B.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}wr(e,t,i){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return B.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.serializer=e}k(e,t,i,a){const l=new gd("createOrUpgrade",t);i<1&&a>=1&&((function(p){p.createObjectStore(Nc)})(e),(function(p){p.createObjectStore(hc,{keyPath:wx}),p.createObjectStore(_i,{keyPath:vS,autoIncrement:!0}).createIndex(Aa,ES,{unique:!0}),p.createObjectStore(el)})(e),u0(e),(function(p){p.createObjectStore(ya)})(e));let c=B.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(nl),p.deleteObjectStore(tl),p.deleteObjectStore(wa)})(e),u0(e)),c=c.next((()=>(function(p){const g=p.store(wa),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:we.min().toTimestamp(),targetCount:0};return g.put(Qf,v)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(_i).H().next((T=>{p.deleteObjectStore(_i),p.createObjectStore(_i,{keyPath:vS,autoIncrement:!0}).createIndex(Aa,ES,{unique:!0});const S=g.store(_i),R=T.map((x=>S.put(x)));return B.waitFor(R)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(il,{keyPath:Px})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.gi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(fc)})(e),this.pi(l))))),i<7&&a>=7&&(c=c.next((()=>this.yi(l)))),i<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.bi(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(_d,{keyPath:kx})})(e),(function(p){p.createObjectStore(vd,{keyPath:Lx})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(Ed,{keyPath:Hx});g.createIndex(Tg,Gx,{unique:!1}),g.createIndex(oA,Kx,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(Kf,{keyPath:Cx});g.createIndex(Cf,Dx),g.createIndex(iA,Nx)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(ya)))),i<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(fy,{keyPath:Ux,autoIncrement:!0}).createIndex(Eg,zx,{unique:!1}),p.createObjectStore(Wu,{keyPath:jx}).createIndex(rA,Bx,{unique:!1}),p.createObjectStore(Zu,{keyPath:qx}).createIndex(aA,Fx,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(Wu).clear()})).next((()=>{t.objectStore(Zu).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(dy,{keyPath:Qx})})(e)}))),i<18&&a>=18&&eb()&&(c=c.next((()=>{t.objectStore(Wu).clear()})).next((()=>{t.objectStore(Zu).clear()}))),c}pi(e){let t=0;return e.store(ya).ee(((i,a)=>{t+=td(a)})).next((()=>{const i={byteSize:t};return e.store(fc).put(vg,i)}))}gi(e){const t=e.store(hc),i=e.store(_i);return t.H().next((a=>B.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Ia],[l.userId,l.lastAcknowledgedBatchId]);return i.H(Aa,c).next((d=>B.forEach(d,(p=>{Ae(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=Ea(this.serializer,p);return fI(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(nl),i=e.store(ya);return e.store(wa).get(Qf).next((a=>{const l=[];return i.ee(((c,d)=>{const p=new tt(c),g=(function(T){return[0,fn(T)]})(p);l.push(t.get(g).next((v=>v?B.resolve():(T=>t.put({targetId:0,path:fn(T),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>B.waitFor(l)))}))}wi(e,t){e.createObjectStore(dc,{keyPath:Ox});const i=t.store(dc),a=new Ry,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:fn(p)})}};return t.store(ya).ee({Y:!0},((c,d)=>{const p=new tt(c);return l(p.popLast())})).next((()=>t.store(el).ee({Y:!0},(([c,d,p],g)=>{const v=Qi(d);return l(v.popLast())}))))}bi(e){const t=e.store(tl);return t.ee(((i,a)=>{const l=Ku(a),c=oI(this.serializer,l);return t.put(c)}))}Si(e,t){const i=t.store(ya),a=[];return i.ee(((l,c)=>{const d=t.store(Kf),p=(function(T){return T.document?new de(tt.fromString(T.document.name).popFirst(5)):T.noDocument?de.fromSegments(T.noDocument.path):T.unknownDocument?de.fromSegments(T.unknownDocument.path):ge(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>B.waitFor(a)))}Di(e,t){const i=t.store(_i),a=vI(this.serializer),l=new Dy(Dd.Vi,this.serializer.yt);return i.H().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??Le();Ea(this.serializer,p).keys().forEach((v=>g=g.add(v))),d.set(p.userId,g)})),B.forEach(d,((p,g)=>{const v=new un(g),T=Rd.wt(this.serializer,v),S=l.getIndexManager(v),R=Cd.wt(v,this.serializer,S,l.referenceDelegate);return new EI(a,R,T,S).recalculateAndSaveOverlaysForDocumentKeys(new Sg(t,In.ce),p).next()}))}))}}function u0(r){r.createObjectStore(nl,{keyPath:Vx}).createIndex(hy,Mx,{unique:!0}),r.createObjectStore(tl,{keyPath:"targetId"}).createIndex(sA,xx,{unique:!0}),r.createObjectStore(wa)}const mr="IndexedDbPersistence",Xp=18e5,Jp=5e3,Wp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gV="main";class Ny{constructor(e,t,i,a,l,c,d,p,g,v,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=l,this.window=c,this.document=d,this.Fi=g,this.Mi=v,this.xi=T,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!Ny.v())throw new he(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iV(this,a),this.Ki=t+gV,this.serializer=new aI(p),this.qi=new wr(this.Ki,this.xi,new pV(this.serializer)),this.ci=new K2,this.li=new eV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vI(this.serializer),this.Pi=new G2,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Nt(mr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(W.FAILED_PRECONDITION,Wp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new In(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(kr(e))return re(mr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(mr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Pu(e).get(Vo).next((t=>B.resolve(this.Xi(t))))}Yi(e){return vf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Xp)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Qt(t,il);return i.H().next((a=>{const l=this.ns(a,Xp),c=a.filter((d=>l.indexOf(d)===-1));return B.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?B.resolve(!0):Pu(e).get(Vo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Jp)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new he(W.FAILED_PRECONDITION,Wp);return!1}}return!(!this.networkEnabled||!this.inForeground)||vf(e).H().next((i=>this.ns(i,Jp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&re(mr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Nc,il],(e=>{const t=new Sg(e,In.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>vf(e).H().next((t=>this.ns(t,Xp).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Cd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Z2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Rd.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){re(mr,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?Xx:p===17?hA:p===16?$x:p===15?my:p===14?cA:p===13?uA:p===12?Yx:p===11?lA:void ge(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(d=>(c=new Sg(d,this.ai?this.ai.next():In.ce),t==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new he(W.FAILED_PRECONDITION,Wb);return i(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ps(e){return Pu(e).get(Vo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Jp)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(W.FAILED_PRECONDITION,Wp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pu(e).put(Vo,t)}static v(){return wr.v()}Ji(e){const t=Pu(e);return t.get(Vo).next((i=>this.Xi(i)?(re(mr,"Releasing primary lease."),t.delete(Vo)):B.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Nt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;Z0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const i=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return re(mr,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Nt(mr,"Failed to get zombied client id.",i),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Nt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pu(r){return Qt(r,Nc)}function vf(r){return Qt(r,il)}function TI(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=Le(),a=Le();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new xy(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Z0()?8:eA(Kt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new yV;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(zo()<=Fe.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(zo()<=Fe.DEBUG&&re("QueryEngine","Query:",jo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(zo()<=Fe.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(t))):B.resolve())}gs(e,t){if(MS(t))return B.resolve(null);let i=Bn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Dg(t,null,"F"),i=Bn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Le(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,Dg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,i,a){return MS(t)||a.isEqual(we.min())?B.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?B.resolve(null):(zo()<=Fe.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),jo(t)),this.Ds(e,c,t,Xb(a,Zo)).next((d=>d)))}))}bs(e,t){let i=new ot(MA(e));return t.forEach(((a,l)=>{Vc(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return zo()<=Fe.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",jo(t)),this.fs.getDocumentsMatchingQuery(e,t,qn.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="LocalStore",_V=3e8;class vV{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new dt(Ne),this.Fs=new Ns((l=>ka(l)),xc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function bI(r,e,t,i){return new vV(r,e,t,i)}async function AI(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=Le();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function EV(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const T=g.batch,S=T.keys();let R=B.resolve();return S.forEach((x=>{R=R.next((()=>v.getEntry(p,x))).next((C=>{const z=g.docVersions.get(x);Ae(z!==null,48541),C.version.compareTo(z)<0&&(T.applyToRemoteDocument(C,g),C.isValidDocument()&&(C.setReadTime(g.commitVersion),v.addEntry(C)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Le();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function II(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function TV(r,e){const t=Se(r),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=a.get(T);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,T))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(Mt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),a=a.insert(T,R),(function(C,z,Q){return C.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=_V?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,R,v)&&d.push(t.li.updateTargetData(l,R))}));let p=jn(),g=Le();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(SV(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!i.isEqual(we.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(v)}return B.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function SV(r,e,t){let i=Le(),a=Le();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=jn();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(we.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):re(Vy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function bV(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ia),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function id(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,B.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new Ss(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function hl(r,e,t){const i=Se(r),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!kr(c))throw c;re(Vy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function Lg(r,e,t){const i=Se(r);let a=we.min(),l=Le();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const T=Se(p),S=T.Fs.get(v);return S!==void 0?B.resolve(T.vs.get(S)):T.li.getTargetData(g,v)})(i,c,Bn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:we.min(),t?l:Le()))).next((d=>(CI(i,VA(e),d),{documents:d,ks:l})))))}function wI(r,e){const t=Se(r),i=Se(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,e).next((c=>c?c.target:null))))}function RI(r,e){const t=Se(r),i=t.Ms.get(e)||we.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,Xb(i,Zo),Number.MAX_SAFE_INTEGER))).then((a=>(CI(t,e,a),a)))}function CI(r,e,t){let i=r.Ms.get(e)||we.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="firestore_clients";function c0(r,e){return`${DI}_${r}_${e}`}const NI="firestore_mutations";function h0(r,e,t){let i=`${NI}_${r}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const xI="firestore_targets";function Zp(r,e){return`${xI}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="SharedClientState";class sd{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static $s(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new he(a.error.code,a.error.message))),c?new sd(e,t,a.state,l):(Nt(Ki,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sc{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static $s(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new he(i.error.code,i.error.message))),l?new sc(e,i.state,a):(Nt(Ki,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=vy();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=tA(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new rd(e,l):(Nt(Ki,`Failed to parse client data for instance '${e}': ${t}`),null)}}class My{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new My(t.clientId,t.onlineState):(Nt(Ki,`Failed to parse online state: ${e}`),null)}}class Ug{constructor(){this.activeTargetIds=vy()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eg{constructor(e,t,i,a,l){this.window=e,this.Ci=t,this.persistenceKey=i,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new dt(Ne),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=c0(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Ug),this.eo=new RegExp(`^${DI}_${c}_([^_]*)$`),this.no=new RegExp(`^${NI}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${xI}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const i of e){if(i===this.zs)continue;const a=this.getItem(c0(this.persistenceKey,i));if(a){const l=rd.$s(i,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const i=this._o(t);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,i){this.co(e,t,i),this.lo(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Zp(this.persistenceKey,e));if(a){const l=sc.$s(e,a);l&&(i=l.state)}}return t&&this.ho.Qs(e),this.oo(),i}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zp(this.persistenceKey,e))}updateQueryState(e,t,i){this.Po(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.lo(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return re(Ki,"READ",e,t),t}setItem(e,t){re(Ki,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){re(Ki,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(re(Ki,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const i=this.Eo(t.key);return this.Ro(i,null)}{const i=this.Ao(t.key,t.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(t.key)){if(t.newValue!==null){const i=this.Vo(t.key,t.newValue);if(i)return this.mo(i)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(t.key===this.io){if(t.newValue!==null){const i=this._o(t.newValue);if(i)return this.ao(i)}}else if(t.key===this.Ys){const i=(function(l){let c=In.ce;if(l!=null)try{const d=JSON.parse(l);Ae(typeof d=="number",30636,{yo:l}),c=d}catch(d){Nt(Ki,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);i!==In.ce&&this.sequenceNumberHandler(i)}else if(t.key===this.so){const i=this.wo(t.newValue);await Promise.all(i.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,i){const a=new sd(this.currentUser,e,t,i),l=h0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=h0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,i){const a=Zp(this.persistenceKey,e),l=new sc(e,t,i);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const i=this.Eo(e);return rd.$s(i,t)}Vo(e,t){const i=this.no.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return sd.$s(new un(l),a,t)}fo(e,t){const i=this.ro.exec(e),a=Number(i[1]);return sc.$s(a,t)}_o(e){return My.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);re(Ki,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const i=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(i),c=[],d=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||d.push(p)})),this.syncEngine.Co(c,d).then((()=>{this.Js=i}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=vy();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class VI{constructor(){this.vo=new Ug,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ug,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="ConnectivityMonitor";class d0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){re(f0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){re(f0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef=null;function zg(){return Ef===null?Ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ef++,"0x"+Ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="RestConnection",IV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class wV{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===Yf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=zg(),d=this.Qo(e,t.toUriEncodedString());re(tg,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(d),v=_l(g);return this.zo(e,d,p,i,v).then((T=>(re(tg,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Jo(tg,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=IV[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection",ku=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Qo extends wV{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Qo.c_){const e=Hb();ku(e,Fb.STAT_EVENT,(t=>{t.stat===gg.PROXY?re(ln,"STAT_EVENT: detected buffering proxy"):t.stat===gg.NOPROXY&&re(ln,"STAT_EVENT: detected no buffering proxy")})),Qo.c_=!0}}zo(e,t,i,a,l){const c=zg();return new Promise(((d,p)=>{const g=new Bb;g.setWithCredentials(!0),g.listenOnce(qb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case If.NO_ERROR:const T=g.getResponseJson();re(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case If.TIMEOUT:re(ln,`RPC '${e}' ${c} timed out`),p(new he(W.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const S=g.getStatus();if(re(ln,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const x=R==null?void 0:R.error;if(x&&x.status&&x.message){const C=(function(Q){const ae=Q.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ae)>=0?ae:W.UNKNOWN})(x.status);p(new he(C,x.message))}else p(new he(W.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new he(W.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{re(ln,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);re(ln,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=zg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=l.join("");re(ln,`Creating RPC '${e}' stream ${a}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let T=!1,S=!1;const R=new RV({Ho:x=>{S?re(ln,`Not sending because RPC '${e}' stream ${a} is closed:`,x):(T||(re(ln,`Opening RPC '${e}' stream ${a} transport.`),v.open(),T=!0),re(ln,`RPC '${e}' stream ${a} sending:`,x),v.send(x))},Jo:()=>v.close()});return ku(v,Fu.EventType.OPEN,(()=>{S||(re(ln,`RPC '${e}' stream ${a} transport opened.`),R.i_())})),ku(v,Fu.EventType.CLOSE,(()=>{S||(S=!0,re(ln,`RPC '${e}' stream ${a} transport closed`),R.o_(),this.E_(v))})),ku(v,Fu.EventType.ERROR,(x=>{S||(S=!0,Jo(ln,`RPC '${e}' stream ${a} transport errored. Name:`,x.name,"Message:",x.message),R.o_(new he(W.UNAVAILABLE,"The operation could not be completed")))})),ku(v,Fu.EventType.MESSAGE,(x=>{var C;if(!S){const z=x.data[0];Ae(!!z,16349);const Q=z,ae=(Q==null?void 0:Q.error)||((C=Q[0])==null?void 0:C.error);if(ae){re(ln,`RPC '${e}' stream ${a} received error:`,ae);const le=ae.status;let _e=(function(N){const A=qt[N];if(A!==void 0)return GA(A)})(le),Ee=ae.message;le==="NOT_FOUND"&&Ee.includes("database")&&Ee.includes("does not exist")&&Ee.includes(this.databaseId.database)&&Jo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),_e===void 0&&(_e=W.INTERNAL,Ee="Unknown error status: "+le+" with message "+ae.message),S=!0,R.o_(new he(_e,Ee)),v.close()}else re(ln,`RPC '${e}' stream ${a} received:`,z),R.__(z)}})),Qo.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Gb()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(r){return new Qo(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(){return typeof window<"u"?window:null}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(r){return new O2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo.c_=!1;class OI{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="PersistentStream";class PI{constructor(e,t,i,a,l,c,d,p){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Nt(t.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new he(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(m0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(re(m0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DV extends PI{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=L2(this.serializer,e),i=(function(l){if(!("targetChange"in l))return we.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?we.min():c.readTime?gn(c.readTime):we.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Vg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=$f(p)?{documents:ZA(l,p)}:{query:eI(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=YA(l,c.resumeToken);const g=Ng(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(we.min())>0){d.readTime=cl(l,c.snapshotVersion.toTimestamp());const g=Ng(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=z2(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Vg(this.serializer),t.removeTarget=e,this.K_(t)}}class NV extends PI{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=U2(e.writeResults,e.commitTime),i=gn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Vg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Wf(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{}class VV extends xV{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new he(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,xg(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(W.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,xg(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(W.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function MV(r,e,t,i){return new VV(r,e,t,i)}class OV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nt(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="RemoteStore";class PV{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{qa(this)&&(re(ja,"Restarting streams for network reachability change."),await(async function(p){const g=Se(p);g.Ea.add(4),await kc(g),g.Va.set("Unknown"),g.Ea.delete(4),await xd(g)})(this))}))})),this.Va=new OV(i,a)}}async function xd(r){if(qa(r))for(const e of r.Ra)await e(!0)}async function kc(r){for(const e of r.Ra)await e(!1)}function Vd(r,e){const t=Se(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ky(t)?Py(t):Il(t).O_()&&Oy(t,e))}function fl(r,e){const t=Se(r),i=Il(t);t.Ia.delete(e),i.O_()&&kI(t,e),t.Ia.size===0&&(i.O_()?i.L_():qa(t)&&t.Va.set("Unknown"))}function Oy(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Il(r).Z_(e)}function kI(r,e){r.da.$e(e),Il(r).X_(e)}function Py(r){r.da=new N2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Il(r).start(),r.Va.ua()}function ky(r){return qa(r)&&!Il(r).x_()&&r.Ia.size>0}function qa(r){return Se(r).Ea.size===0}function LI(r){r.da=void 0}async function kV(r){r.Va.set("Online")}async function LV(r){r.Ia.forEach(((e,t)=>{Oy(r,e)}))}async function UV(r,e){LI(r),ky(r)?(r.Va.ha(e),Py(r)):r.Va.set("Unknown")}async function zV(r,e,t){if(r.Va.set("Online"),e instanceof QA&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(r,e)}catch(i){re(ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ad(r,i)}else if(e instanceof Mf?r.da.Xe(e):e instanceof KA?r.da.st(e):r.da.tt(e),!t.isEqual(we.min()))try{const i=await II(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Mt.EMPTY_BYTE_STRING,v.snapshotVersion)),kI(l,p);const T=new Ss(v.target,p,g,v.sequenceNumber);Oy(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(i){re(ja,"Failed to raise snapshot:",i),await ad(r,i)}}async function ad(r,e,t){if(!kr(e))throw e;r.Ea.add(1),await kc(r),r.Va.set("Offline"),t||(t=()=>II(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{re(ja,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await xd(r)}))}function UI(r,e){return e().catch((t=>ad(r,t,e)))}async function Al(r){const e=Se(r),t=Nr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ia;for(;jV(e);)try{const a=await bV(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,BV(e,a)}catch(a){await ad(e,a)}zI(e)&&jI(e)}function jV(r){return qa(r)&&r.Ta.length<10}function BV(r,e){r.Ta.push(e);const t=Nr(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function zI(r){return qa(r)&&!Nr(r).x_()&&r.Ta.length>0}function jI(r){Nr(r).start()}async function qV(r){Nr(r).ra()}async function FV(r){const e=Nr(r);for(const t of r.Ta)e.ea(t.mutations)}async function HV(r,e,t){const i=r.Ta.shift(),a=Sy.from(i,e,t);await UI(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Al(r)}async function GV(r,e){e&&Nr(r).Y_&&await(async function(i,a){if((function(c){return R2(c)&&c!==W.ABORTED})(a.code)){const l=i.Ta.shift();Nr(i).B_(),await UI(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Al(i)}})(r,e),zI(r)&&jI(r)}async function p0(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),re(ja,"RemoteStore received new credentials");const i=qa(t);t.Ea.add(3),await kc(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await xd(t)}async function jg(r,e){const t=Se(r);e?(t.Ea.delete(2),await xd(t)):e||(t.Ea.add(2),await kc(t),t.Va.set("Unknown"))}function Il(r){return r.ma||(r.ma=(function(t,i,a){const l=Se(t);return l.sa(),new DV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:kV.bind(null,r),Yo:LV.bind(null,r),t_:UV.bind(null,r),J_:zV.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),ky(r)?Py(r):r.Va.set("Unknown")):(await r.ma.stop(),LI(r))}))),r.ma}function Nr(r){return r.fa||(r.fa=(function(t,i,a){const l=Se(t);return l.sa(),new NV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:qV.bind(null,r),t_:GV.bind(null,r),ta:FV.bind(null,r),na:HV.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Al(r)):(await r.fa.stop(),r.Ta.length>0&&(re(ja,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new Ly(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uy(r,e){if(Nt("AsyncQueue",`${e}: ${r}`),kr(r))return new he(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||de.comparator(t.key,i.key):(t,i)=>de.comparator(t.key,i.key),this.keyedMap=Hu(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.ga=new dt(de.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ge(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class dl{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new dl(e,t,Yo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class QV{constructor(){this.queries=y0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Se(t),l=a.queries;a.queries=y0(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(i)}))})(this,new he(W.ABORTED,"Firestore shutting down"))}}function y0(){return new Ns((r=>xA(r)),Ad)}async function YV(r,e){const t=Se(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new KV,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Uy(c,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&zy(t)}async function $V(r,e){const t=Se(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function XV(r,e){const t=Se(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(i=!0);c.wa=a}}i&&zy(t)}function JV(r,e,t){const i=Se(r),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function zy(r){r.Ca.forEach((e=>{e.next()}))}var Bg,_0;(_0=Bg||(Bg={})).Ma="default",_0.Cache="cache";class WV{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new dl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.key=e}}class qI{constructor(e){this.key=e}}class ZV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Le(),this.mutatedKeys=Le(),this.eu=MA(e),this.tu=new Yo(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new g0,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,T)=>{const S=a.get(v),R=Vc(this.query,T)?T:null,x=!!S&&this.mutatedKeys.has(S.key),C=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let z=!1;S&&R?S.data.isEqual(R.data)?x!==C&&(i.track({type:3,doc:R}),z=!0):this.su(S,R)||(i.track({type:2,doc:R}),z=!0,(p&&this.eu(R,p)>0||g&&this.eu(R,g)<0)&&(d=!0)):!S&&R?(i.track({type:0,doc:R}),z=!0):S&&!R&&(i.track({type:1,doc:S}),z=!0,(p||g)&&(d=!0)),z&&(R?(c=c.add(R),l=C?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:c,iu:i,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,T)=>(function(R,x){const C=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Vt:z})}};return C(R)-C(x)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new dl(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new g0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Le(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new qI(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new BI(i))})),t}cu(e){this.Za=e.ks,this.Ya=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return dl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const wl="SyncEngine";class eM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class tM{constructor(e){this.key=e,this.hu=!1}}class nM{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ns((d=>xA(d)),Ad),this.Iu=new Map,this.Eu=new Set,this.Ru=new dt(de.comparator),this.Au=new Map,this.Vu=new Cy,this.du={},this.mu=new Map,this.fu=za.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iM(r,e,t=!0){const i=Md(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await FI(i,e,t,!0),a}async function sM(r,e){const t=Md(r);await FI(t,e,!0,!1)}async function FI(r,e,t,i){const a=await id(r.localStore,Bn(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await jy(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&Vd(r.remoteStore,a),d}async function jy(r,e,t,i,a){r.pu=(T,S,R)=>(async function(C,z,Q,ae){let le=z.view.ru(Q);le.Ss&&(le=await Lg(C.localStore,z.query,!1).then((({documents:N})=>z.view.ru(N,le))));const _e=ae&&ae.targetChanges.get(z.targetId),Ee=ae&&ae.targetMismatches.get(z.targetId)!=null,ue=z.view.applyChanges(le,C.isPrimaryClient,_e,Ee);return qg(C,z.targetId,ue.au),ue.snapshot})(r,T,S,R);const l=await Lg(r.localStore,e,!0),c=new ZV(e,l.ks),d=c.ru(l.documents),p=Pc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),g=c.applyChanges(d,r.isPrimaryClient,p);qg(r,t,g.au);const v=new eM(e,t,c);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function rM(r,e,t){const i=Se(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Ad(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await hl(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&fl(i.remoteStore,a.targetId),ml(i,a.targetId)})).catch(Pr)):(ml(i,a.targetId),await hl(i.localStore,a.targetId,!0))}async function aM(r,e){const t=Se(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),fl(t.remoteStore,i.targetId))}async function oM(r,e,t){const i=Hy(r);try{const a=await(function(c,d){const p=Se(c),g=rt.now(),v=d.reduce(((R,x)=>R.add(x.key)),Le());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let x=jn(),C=Le();return p.xs.getEntries(R,v).next((z=>{x=z,x.forEach(((Q,ae)=>{ae.isValidDocument()||(C=C.add(Q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,x))).next((z=>{T=z;const Q=[];for(const ae of d){const le=I2(ae,T.get(ae.key).overlayedDocument);le!=null&&Q.push(new xs(ae.key,le,TA(le.value.mapValue),Wt.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,Q,d)})).next((z=>{S=z;const Q=z.applyToLocalDocumentSet(T,C);return p.documentOverlayCache.saveOverlays(R,z.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:PA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new dt(Ne)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(i,a.batchId,t),await Ur(i,a.changes),await Al(i.remoteStore)}catch(a){const l=Uy(a,"Failed to persist write");t.reject(l)}}async function HI(r,e){const t=Se(r);try{const i=await TV(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Ae(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ae(c.hu,14607):a.removedDocuments.size>0&&(Ae(c.hu,42227),c.hu=!1))})),await Ur(t,i,e)}catch(i){await Pr(i)}}function v0(r,e,t){const i=Se(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=Se(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,T)=>{for(const S of T.ba)S.va(d)&&(g=!0)})),g&&zy(p)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lM(r,e,t){const i=Se(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new dt(de.comparator);c=c.insert(l,It.newNoDocument(l,we.min()));const d=Le().add(l),p=new Oc(we.min(),new Map,new dt(Ne),c,d);await HI(i,p),i.Ru=i.Ru.remove(l),i.Au.delete(e),Fy(i)}else await hl(i.localStore,e,!1).then((()=>ml(i,e,t))).catch(Pr)}async function uM(r,e){const t=Se(r),i=e.batch.batchId;try{const a=await EV(t.localStore,e);qy(t,i,null),By(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ur(t,a)}catch(a){await Pr(a)}}async function cM(r,e,t){const i=Se(r);try{const a=await(function(c,d){const p=Se(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((T=>(Ae(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);qy(i,e,t),By(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ur(i,a)}catch(a){await Pr(a)}}function By(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function qy(r,e,t){const i=Se(r);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function ml(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||GI(r,i)}))}function GI(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(fl(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Fy(r))}function qg(r,e,t){for(const i of t)i instanceof BI?(r.Vu.addReference(i.key,e),hM(r,i)):i instanceof qI?(re(wl,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||GI(r,i.key)):ge(19791,{wu:i})}function hM(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(re(wl,"New document in limbo: "+t),r.Eu.add(i),Fy(r))}function Fy(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new de(tt.fromString(e)),i=r.fu.next();r.Au.set(i,new tM(t)),r.Ru=r.Ru.insert(t,i),Vd(r.remoteStore,new Ss(Bn(bd(t.path)),i,"TargetPurposeLimboResolution",In.ce))}}async function Ur(r,e,t){const i=Se(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{var v;if((g||t)&&i.isPrimaryClient){const T=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(g){a.push(g);const T=xy.Es(p.targetId,g);l.push(T)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(p,g){const v=Se(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>B.forEach(g,(S=>B.forEach(S.Ts,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>B.forEach(S.Is,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!kr(T))throw T;re(Vy,"Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const R=v.vs.get(S),x=R.snapshotVersion,C=R.withLastLimboFreeSnapshotVersion(x);v.vs=v.vs.insert(S,C)}}})(i.localStore,l))}async function fM(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){re(wl,"User change. New user:",e.toKey());const i=await AI(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new he(W.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ur(t,i.Ns)}}function dM(r,e){const t=Se(r),i=t.Au.get(e);if(i&&i.hu)return Le().add(i.key);{let a=Le();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function mM(r,e){const t=Se(r),i=await Lg(t.localStore,e.query,!0),a=e.view.cu(i);return t.isPrimaryClient&&qg(t,e.targetId,a.au),a}async function pM(r,e){const t=Se(r);return RI(t.localStore,e).then((i=>Ur(t,i)))}async function gM(r,e,t,i){const a=Se(r),l=await(function(d,p){const g=Se(d),v=Se(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(T=>v.Xn(T,p).next((S=>S?g.localDocuments.getDocuments(T,S):B.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Al(a.remoteStore):t==="acknowledged"||t==="rejected"?(qy(a,e,i||null),By(a,e),(function(d,p){Se(Se(d).mutationQueue).nr(p)})(a.localStore,e)):ge(6720,"Unknown batchState",{bu:t}),await Ur(a,l)):re(wl,"Cannot apply mutation batch with id: "+e)}async function yM(r,e){const t=Se(r);if(Md(t),Hy(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await E0(t,i.toArray());t.gu=!0,await jg(t.remoteStore,!0);for(const l of a)Vd(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const i=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(ml(t,c),hl(t.localStore,c,!0)))),fl(t.remoteStore,c)})),await a,await E0(t,i),(function(c){const d=Se(c);d.Au.forEach(((p,g)=>{fl(d.remoteStore,g)})),d.Vu.zr(),d.Au=new Map,d.Ru=new dt(de.comparator)})(t),t.gu=!1,await jg(t.remoteStore,!1)}}async function E0(r,e,t){const i=Se(r),a=[],l=[];for(const c of e){let d;const p=i.Iu.get(c);if(p&&p.length!==0){d=await id(i.localStore,Bn(p[0]));for(const g of p){const v=i.Tu.get(g),T=await mM(i,v);T.snapshot&&l.push(T.snapshot)}}else{const g=await wI(i.localStore,c);d=await id(i.localStore,g),await jy(i,KI(g),c,!1,d.resumeToken)}a.push(d)}return i.Pu.J_(l),a}function KI(r){return DA(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function _M(r){return(function(t){return Se(Se(t).persistence).hs()})(Se(r).localStore)}async function vM(r,e,t,i){const a=Se(r);if(a.gu)return void re(wl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await RI(a.localStore,VA(l[0])),d=Oc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Mt.EMPTY_BYTE_STRING);await Ur(a,c,d);break}case"rejected":await hl(a.localStore,e,!0),ml(a,e,i);break;default:ge(64155,t)}}async function EM(r,e,t){const i=Md(r);if(i.gu){for(const a of e){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){re(wl,"Adding an already active target "+a);continue}const l=await wI(i.localStore,a),c=await id(i.localStore,l);await jy(i,KI(l),c.targetId,!1,c.resumeToken),Vd(i.remoteStore,c)}for(const a of t)i.Iu.has(a)&&await hl(i.localStore,a,!1).then((()=>{fl(i.remoteStore,a),ml(i,a)})).catch(Pr)}}function Md(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=HI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lM.bind(null,e),e.Pu.J_=XV.bind(null,e.eventManager),e.Pu.yu=JV.bind(null,e.eventManager),e}function Hy(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cM.bind(null,e),e}class Tc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return bI(this.persistence,new SI,e.initialUser,this.serializer)}Cu(e){return new Dy(Dd.Vi,this.serializer)}Du(e){return new VI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tc.provider={build:()=>new Tc};class TM extends Tc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof nd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new gI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Dy((i=>nd.Vi(i,t)),this.serializer)}}class QI extends Tc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Hy(this.xu.syncEngine),await Al(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return bI(this.persistence,new SI,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new gI(i,e.asyncQueue,t)}Mu(e,t){const i=new Ax(t,this.persistence);return new bx(e.asyncQueue,i)}Cu(e){const t=TI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Ny(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,MI(),Pf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new VI}}class SM extends QI{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof eg&&(this.sharedClientState.syncEngine={So:gM.bind(null,t),Do:vM.bind(null,t),Co:EM.bind(null,t),hs:_M.bind(null,t),bo:pM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await yM(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=MI();if(!eg.v(t))throw new he(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=TI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eg(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Sc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>v0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fM.bind(null,this.syncEngine),await jg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new QV})()}createDatastore(e){const t=Nd(e.databaseInfo.databaseId),i=CV(e.databaseInfo);return MV(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new PV(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>v0(this.syncEngine,t,0)),(function(){return d0.v()?new d0:new AV})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,v){const T=new nM(a,l,c,d,p,g);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Se(a);re(ja,"RemoteStore shutting down."),l.Ea.add(5),await kc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Sc.provider={build:()=>new Sc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Nt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="FirestoreClient";class AM{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=un.UNAUTHENTICATED,this.clientId=ly.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{re(xr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(re(xr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Uy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ng(r,e){r.asyncQueue.verifyOperationInProgress(),re(xr,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await AI(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function T0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await IM(r);re(xr,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>p0(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>p0(e.remoteStore,a))),r._onlineComponents=e}async function IM(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){re(xr,"Using user provided OfflineComponentProvider");try{await ng(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Jo("Error using user provided cache. Falling back to memory cache: "+t),await ng(r,new Tc)}}else re(xr,"Using default OfflineComponentProvider"),await ng(r,new TM(void 0));return r._offlineComponents}async function YI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(re(xr,"Using user provided OnlineComponentProvider"),await T0(r,r._uninitializedComponentsProvider._online)):(re(xr,"Using default OnlineComponentProvider"),await T0(r,new Sc))),r._onlineComponents}function wM(r){return YI(r).then((e=>e.syncEngine))}async function S0(r){const e=await YI(r),t=e.eventManager;return t.onListen=iM.bind(null,e.syncEngine),t.onUnlisten=rM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aM.bind(null,e.syncEngine),t}function RM(r,e,t,i){const a=new bM(i),l=new WV(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>YV(await S0(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>$V(await S0(r),l)))}}function CM(r,e){const t=new Ir;return r.asyncQueue.enqueueAndForget((async()=>oM(await wM(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="ComponentProvider",b0=new Map;function NM(r,e,t,i,a){return new Wx(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,$I(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="firestore.googleapis.com",A0=!0;class I0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xM,this.ssl=A0}else this.host=e.host,this.ssl=e.ssl??A0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pI)throw new he(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ex("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$I(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gy{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new hx;switch(i.type){case"firstParty":return new mx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=b0.get(t);i&&(re(DM,"Removing Datastore"),b0.delete(t),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fa(this.firestore,e,this._query)}}class xt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Dc(t,xt._jsonSchema))return new xt(e,i||null,new de(tt.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Ht("string",xt._jsonSchemaVersion),referencePath:Ht("string")};class Rr extends Fa{constructor(e,t,i){super(e,t,bd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new de(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function XI(r,e,...t){if(r=Vt(r),Yb("collection","path",e),r instanceof Gy){const i=tt.fromString(e,...t);return mS(i),new Rr(r,null,i)}{if(!(r instanceof xt||r instanceof Rr))throw new he(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(tt.fromString(e,...t));return mS(i),new Rr(r.firestore,null,i)}}function pn(r,e,...t){if(r=Vt(r),arguments.length===1&&(e=ly.newId()),Yb("doc","path",e),r instanceof Gy){const i=tt.fromString(e,...t);return dS(i),new xt(r,null,new de(i))}{if(!(r instanceof xt||r instanceof Rr))throw new he(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(tt.fromString(e,...t));return dS(i),new xt(r.firestore,r instanceof Rr?r.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="AsyncQueue";class R0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OI(this,"async_queue_retry"),this._c=()=>{const i=Pf();i&&re(w0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Pf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ir;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!kr(e))throw e;re(w0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Nt("INTERNAL UNHANDLED ERROR: ",C0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Ly.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ge(47125,{Pc:C0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function C0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ba extends Gy{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new R0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function VM(r,e,t){t||(t=Yf);const i=Xg(r,"firestore");if(i.isInitialized(t)){const a=i.getImmediate({identifier:t}),l=i.getOptions(t);if(Na(l,e))return a;throw new he(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pI)throw new he(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&_l(e.host)&&J0(e.host),i.initialize({options:e,instanceIdentifier:t})}function Ky(r){if(r._terminated)throw new he(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||MM(r),r._firestoreClient}function MM(r){var i,a,l,c;const e=r._freezeSettings(),t=NM(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new AM(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ii(Mt.fromBase64String(e))}catch(t){throw new he(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ii(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ii._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dc(e,ii._jsonSchema))return ii.fromBase64String(e.bytes)}}ii._jsonSchemaVersion="firestore/bytes/1.0",ii._jsonSchema={type:Ht("string",ii._jsonSchemaVersion),bytes:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(Dc(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:Ht("string",Xi._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dc(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ti(e.vectorValues);throw new he(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:Ht("string",Ti._jsonSchemaVersion),vectorValues:Ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=/^__.*__$/;class PM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new bl(e,this.data,t,this.fieldTransforms)}}class JI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function WI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{dataSource:r})}}class Yy{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Yy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return od(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(WI(this.dataSource)&&OM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class kM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Nd(e)}createContext(e,t,i,a=!1){return new Yy({dataSource:e,methodName:t,targetDoc:i,path:Tt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pd(r){const e=r._freezeSettings(),t=Nd(r._databaseId);return new kM(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ZI(r,e,t,i,a,l={}){const c=r.createContext(l.merge||l.mergeFields?2:0,e,t,a);$y("Data must be an object, but it was:",c,i);const d=nw(i,c);let p,g;if(l.merge)p=new wn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const S=pl(e,T,t);if(!c.contains(S))throw new he(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);rw(v,S)||v.push(S)}p=new wn(v),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new PM(new hn(d),p,g)}class kd extends Qy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function ew(r,e,t,i){const a=r.createContext(1,e,t);$y("Data must be an object, but it was:",a,i);const l=[],c=hn.empty();Lr(i,((p,g)=>{const v=sw(e,p,t);g=Vt(g);const T=a.childContextForFieldPath(v);if(g instanceof kd)l.push(v);else{const S=Lc(g,T);S!=null&&(l.push(v),c.set(v,S))}}));const d=new wn(l);return new JI(c,d,a.fieldTransforms)}function tw(r,e,t,i,a,l){const c=r.createContext(1,e,t),d=[pl(e,i,t)],p=[a];if(l.length%2!=0)throw new he(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(pl(e,l[S])),p.push(l[S+1]);const g=[],v=hn.empty();for(let S=d.length-1;S>=0;--S)if(!rw(g,d[S])){const R=d[S];let x=p[S];x=Vt(x);const C=c.childContextForFieldPath(R);if(x instanceof kd)g.push(R);else{const z=Lc(x,C);z!=null&&(g.push(R),v.set(R,z))}}const T=new wn(g);return new JI(v,T,c.fieldTransforms)}function LM(r,e,t,i=!1){return Lc(t,r.createContext(i?4:3,e))}function Lc(r,e){if(iw(r=Vt(r)))return $y("Unsupported field value:",e,r),nw(r,e);if(r instanceof Qy)return(function(i,a){if(!WI(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=Lc(d,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return _2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=rt.fromDate(i);return{timestampValue:cl(a.serializer,l)}}if(i instanceof rt){const l=new rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cl(a.serializer,l)}}if(i instanceof Xi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ii)return{bytesValue:YA(a.serializer,i._byteString)};if(i instanceof xt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Iy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Ti)return(function(c,d){const p=c instanceof Ti?c.toArray():c;return{mapValue:{fields:{[gy]:{stringValue:yy},[sl]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Ey(d.serializer,v)}))}}}}}})(i,a);if(rI(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${pd(i)}`)})(r,e)}function nw(r,e){const t={};return fA(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(r,((i,a)=>{const l=Lc(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function iw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof rt||r instanceof Xi||r instanceof ii||r instanceof xt||r instanceof Qy||r instanceof Ti||rI(r))}function $y(r,e,t){if(!iw(t)||!$b(t)){const i=pd(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function pl(r,e,t){if((e=Vt(e))instanceof Od)return e._internalPath;if(typeof e=="string")return sw(r,e);throw od("Field path arguments must be of type string or ",r,!1,void 0,t)}const UM=new RegExp("[~\\*/\\[\\]]");function sw(r,e,t){if(e.search(UM)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Od(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function od(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new he(W.INVALID_ARGUMENT,d+r+p)}function rw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{convertValue(e,t="none"){switch(Cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Lr(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[sl].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>vt(c.doubleValue)));return new Ti(t)}convertGeoPoint(e){return new Xi(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Td(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){const t=Rs(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tt.fromString(e);Ae(sI(i),9688,{name:e});const a=new Pa(i.get(1),i.get(3)),l=new de(i.popFirst(5));return a.isEqual(t)||Nt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends zM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ii(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}const D0="@firebase/firestore",N0="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(pl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jM extends ow{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}class lw extends Xy{}function uw(r,e,...t){let i=[];e instanceof Xy&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof Wy)).length,d=l.filter((p=>p instanceof Jy)).length;if(c>1||c>0&&d>0)throw new he(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class Jy extends lw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Jy(e,t,i)}_apply(e){const t=this._parse(e);return hw(e._query,t),new Fa(e.firestore,e.converter,Cg(e._query,t))}_parse(e){const t=Pd(e.firestore);return(function(l,c,d,p,g,v,T){let S;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){M0(T,v);const x=[];for(const C of T)x.push(V0(p,l,C));S={arrayValue:{values:x}}}else S=V0(p,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||M0(T,v),S=LM(d,c,T,v==="in"||v==="not-in");return He.create(g,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wy extends Xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:at.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)hw(c,p),c=Cg(c,p)})(e._query,t),new Fa(e.firestore,e.converter,Cg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zy extends lw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zy(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new he(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _c(l,c)})(e._query,this._field,this._direction);return new Fa(e.firestore,e.converter,f2(e._query,t))}}function cw(r,e="asc"){const t=e,i=pl("orderBy",r);return Zy._create(i,t)}function V0(r,e,t){if(typeof(t=Vt(t))=="string"){if(t==="")throw new he(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NA(e)&&t.indexOf("/")!==-1)throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(tt.fromString(t));if(!de.isDocumentKey(i))throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gc(r,new de(i))}if(t instanceof xt)return gc(r,t._key);throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pd(t)}.`)}function M0(r,e){if(!Array.isArray(r)||r.length===0)throw new he(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hw(r,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function fw(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class qM{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=KM(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function FM(r){return new qM(r)}class HM{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Sc.provider,this._offlineComponentProvider={build:t=>new QI(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class GM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Sc.provider,this._offlineComponentProvider={build:t=>new SM(t,e==null?void 0:e.cacheSizeBytes)}}}function KM(r){return new HM(r==null?void 0:r.forceOwnership)}function QM(){return new GM}class Qu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends ow{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(pl("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ca._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ca._jsonSchema={type:Ht("string",Ca._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class kf extends Ca{data(e={}){return super.data(e)}}class $o{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Qu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new kf(this._firestore,this._userDataWriter,i.key,i,new Qu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new kf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Qu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new kf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Qu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:YM(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ly.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:Ht("string",$o._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pd(e)}set(e,t,i){this._verifyNotCommitted();const a=ig(e,this._firestore),l=fw(a.converter,t,i),c=ZI(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,Wt.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=ig(e,this._firestore);let c;return c=typeof(t=Vt(t))=="string"||t instanceof Od?tw(this._dataReader,"WriteBatch.update",l._key,t,i,a):ew(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ig(e,this._firestore);return this._mutations=this._mutations.concat(new Mc(t._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ig(r,e){if((r=Vt(r)).firestore!==e)throw new he(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Fg(r,e,t){r=As(r,xt);const i=As(r.firestore,Ba),a=fw(r.converter,e,t),l=Pd(i);return Ld(i,[ZI(l,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Wt.none())])}function pr(r,e,t,...i){r=As(r,xt);const a=As(r.firestore,Ba),l=Pd(a);let c;return c=typeof(e=Vt(e))=="string"||e instanceof Od?tw(l,"updateDoc",r._key,e,t,i):ew(l,"updateDoc",r._key,e),Ld(a,[c.toMutation(r._key,Wt.exists(!0))])}function dw(r){return Ld(As(r.firestore,Ba),[new Mc(r._key,Wt.none())])}function mw(r,...e){var g,v,T;r=Vt(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||x0(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(x0(e[i])){const S=e[i];e[i]=(g=S.next)==null?void 0:g.bind(S),e[i+1]=(v=S.error)==null?void 0:v.bind(S),e[i+2]=(T=S.complete)==null?void 0:T.bind(S)}let l,c,d;if(r instanceof xt)c=As(r.firestore,Ba),d=bd(r._key.path),l={next:S=>{e[i]&&e[i](XM(c,r,S))},error:e[i+1],complete:e[i+2]};else{const S=As(r,Fa);c=As(S.firestore,Ba),d=S._query;const R=new aw(c);l={next:x=>{e[i]&&e[i](new $o(c,R,S,x))},error:e[i+1],complete:e[i+2]},BM(r._query)}const p=Ky(c);return RM(p,d,a,l)}function Ld(r,e){const t=Ky(r);return CM(t,e)}function XM(r,e,t){const i=t.docs.get(e._key),a=new aw(r);return new Ca(r,a,e._key,i,new Qu(t.hasPendingWrites,t.fromCache),e.converter)}function pw(r){return r=As(r,Ba),Ky(r),new $M(r,(e=>Ld(r,e)))}(function(e,t=!0){ux(vl),Xo(new xa("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Ba(new fx(i.getProvider("auth-internal")),new px(c,i.getProvider("app-check-internal")),Zx(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),br(D0,N0,e),br(D0,N0,"esm2020")})();const Hg={apiKey:"AIzaSyCMQRCfBaVdJWgqMkaWrBHgHlMX51K7tbM",authDomain:"entrypoint-v2.firebaseapp.com",projectId:"entrypoint-v2",storageBucket:"entrypoint-v2.firebasestorage.app",messagingSenderId:"240107297798",appId:"1:240107297798:web:9e4a6c13a2751aead9b787"},gl=!!Hg.apiKey&&!!Hg.projectId;let _a=null,Ft=null;if(gl){const r=sb(Hg);_a=ox(r),Ft=VM(r,{localCache:FM({tabManager:QM()})})}const gw=K.createContext(null);function JM({children:r}){const[e,t]=K.useState(null),[i,a]=K.useState(gl);K.useEffect(()=>!gl||!_a?void 0:$D(_a,v=>{t(v),a(!1)}),[]);const l=(g,v)=>KD(_a,g,v),c=(g,v)=>GD(_a,g,v),d=()=>gN(_a,new vs),p=()=>XD(_a);return w.jsx(gw.Provider,{value:{user:e,loading:i,signin:l,signup:c,signinGoogle:d,logout:p},children:r})}function e_(){return K.useContext(gw)}function WM(){const{signin:r,signup:e,signinGoogle:t}=e_(),[i,a]=K.useState(!1),[l,c]=K.useState(""),[d,p]=K.useState(""),[g,v]=K.useState(""),[T,S]=K.useState(!1),R=async C=>{C.preventDefault(),v(""),S(!0);try{i?await e(l,d):await r(l,d)}catch(z){v(z.message.replace("Firebase: ",""))}finally{S(!1)}},x=async()=>{v(""),S(!0);try{await t()}catch(C){v(C.message.replace("Firebase: ",""))}finally{S(!1)}};return w.jsxs("div",{className:"auth-container",children:[w.jsxs("div",{className:"auth-header",children:[w.jsx("div",{className:"auth-subtitle",children:"ENTRYPOINT V2"}),w.jsx("h1",{className:"auth-title",children:"Lock-In"})]}),w.jsx("button",{className:"auth-google-btn",onClick:x,disabled:T,children:"Sign in with Google"}),w.jsx("div",{className:"auth-divider",children:w.jsx("span",{children:"or"})}),w.jsxs("form",{onSubmit:R,className:"auth-form",children:[w.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:C=>c(C.target.value),className:"auth-input",required:!0}),w.jsx("input",{type:"password",placeholder:"Password",value:d,onChange:C=>p(C.target.value),className:"auth-input",minLength:6,required:!0}),g&&w.jsx("div",{className:"auth-error",children:g}),w.jsx("button",{type:"submit",className:"auth-btn",disabled:T,children:T?"...":i?"Create Account":"Sign In"})]}),w.jsx("button",{className:"auth-toggle",onClick:()=>{a(!i),v("")},children:i?"Already have an account? Sign in":"Need an account? Sign up"})]})}function ZM({children:r}){const{user:e,loading:t}=e_();return t?w.jsx("div",{className:"loading",children:"loading..."}):e?r:w.jsx(WM,{})}const Da={prayer:{bg:"rgba(34, 139, 34, 0.12)",border:"#22a845",text:"#22a845"},spiritual:{bg:"rgba(234, 179, 8, 0.10)",border:"#ca8a04",text:"#ca8a04"},course:{bg:"rgba(37, 99, 235, 0.10)",border:"#2563eb",text:"#2563eb"},study:{bg:"rgba(8, 145, 178, 0.10)",border:"#0891b2",text:"#0891b2"},work:{bg:"rgba(180, 83, 9, 0.10)",border:"#b45309",text:"#b45309"},project:{bg:"rgba(124, 58, 237, 0.10)",border:"#7c3aed",text:"#7c3aed"},sport:{bg:"rgba(220, 38, 38, 0.10)",border:"#dc2626",text:"#dc2626"},therapy:{bg:"rgba(219, 39, 119, 0.10)",border:"#db2777",text:"#db2777"},rest:{bg:"rgba(100, 116, 139, 0.08)",border:"#64748b",text:"#64748b"},neutral:{bg:"rgba(163, 163, 163, 0.06)",border:"#a3a3a3",text:"#a3a3a3"}},yw=Object.keys(Da),eO=yw,tO=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function nO(r){const e=Math.floor(r/60)%24,t=Math.round(r%60),i=e>=12?"PM":"AM";return`${e%12||12}:${String(t).padStart(2,"0")} ${i}`}const yl=["#2d8a4e","#0055a4","#7c3aed","#b45309","#dc2626","#db2777","#0891b2","#64748b"],_w=()=>{const r={};return tO.forEach(e=>{r[e]={blocks:[]}}),r},t_=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function n_(r){const[e,t,i]=r.split("-").map(Number);return new Date(e,t-1,i)}function i_(r){const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0");return`${e}-${t}-${i}`}function rc(){return i_(new Date)}function iO(r){const e=(r.getDay()+6)%7;return t_[e]}function vw(r,e,t){return r>=e&&r<=t}function ld(r){return n_(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function sO(r,e){return`${ld(r)}  ${ld(e)}`}function rO(r){const[e,t,i]=r.split("-");return`${i}-${t}-${e}`}function aO(r,e){const t=n_(r),i=(t.getDay()+6)%7,l=t_.indexOf(e)-i,c=new Date(t);return c.setDate(c.getDate()+l),i_(c)}function oO(r,e){const t=[],i=new Date(r,e,1);for(;i.getMonth()===e;)t.push({iso:i_(i),date:new Date(i)}),i.setDate(i.getDate()+1);return t}const lO=new Date().getFullYear(),uO={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};function O0(r){const e=r.trim().match(/^(\w{3})\s+(\d{1,2})$/);if(!e)return null;const t=uO[e[1]],i=parseInt(e[2],10);if(t==null||isNaN(i))return null;const a=new Date(lO,t,i),l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${l}-${c}-${d}`}function cO(r){if(!r)return{startDate:"",endDate:""};const e=r.split(/\u2192|->||/).map(a=>a.trim()),t=O0(e[0]),i=e[1]?O0(e[1]):t;return{startDate:t||"",endDate:i||""}}function hO(r){return{id:r.id||crypto.randomUUID(),activity:r.activity||"",type:r.type||"neutral",icon:r.icon||"",duration:r.duration||60,segment:null,offsetMinutes:0,time:r.time||"08:00",tasks:[]}}function fO(r,e){var c;const{startDate:t,endDate:i}=cO(r.dates),a={},l=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const d of l){const p=(c=r.days)==null?void 0:c[d];a[d]={blocks:((p==null?void 0:p.blocks)||[]).map(hO)}}return{id:r.id||crypto.randomUUID(),label:r.label||`Plan ${e+1}`,color:yl[e%yl.length],startDate:t,endDate:i,order:r.order??e,routine:a}}function dO(){const e=localStorage.getItem("entrypoint-v2-tabs");if(!e)return null;try{const t=JSON.parse(e);return!Array.isArray(t)||t.length===0?null:t.map(fO)}catch{return null}}function mO(){const r=!!localStorage.getItem("entrypoint-v2-tabs"),e=!!localStorage.getItem("entrypoint-v2-plans");return r&&!e}const ud="entrypoint-v2-plans",pO="entrypoint-v2-tabs";function P0(){if(mO()){const r=dO();if(r)return Ew(r),r}try{const r=localStorage.getItem(ud);if(r){const e=JSON.parse(r);if(Array.isArray(e)&&e.length>0)return e}}catch{}return[]}function Ew(r){localStorage.setItem(ud,JSON.stringify(r))}async function gO(r){const e=`entrypoint-v2-migrated-${r}`;if(localStorage.getItem(e))return;let t=null;try{const i=localStorage.getItem(ud);if(i){const a=JSON.parse(i);Array.isArray(a)&&a.length>0&&(t=a)}}catch{}if(t&&t.length>0){const i=pw(Ft);for(const a of t)i.set(pn(Ft,"users",r,"plans",a.id),{...a});await i.commit()}localStorage.setItem(e,"1"),localStorage.removeItem(ud),localStorage.removeItem(pO)}function yO(){const[r,e]=K.useState(()=>P0()),[t,i]=K.useState(()=>{var S;return((S=P0()[0])==null?void 0:S.id)||null}),a=r.find(S=>S.id===t)||r[0]||null;a&&t!==a.id&&i(a.id);const l=K.useCallback(S=>{e(R=>{const x=typeof S=="function"?S(R):S;return Ew(x),x})},[]),c=K.useCallback(S=>{const R=crypto.randomUUID(),x={id:R,label:S.label||"New Plan",color:S.color||yl[0],startDate:S.startDate||"",endDate:S.endDate||"",order:S.order??r.length,routine:S.routine||_w()};return l(C=>[...C,x]),i(R),R},[l,r.length]),d=K.useCallback((S,R)=>{l(x=>x.map(C=>C.id===S?{...C,...R}:C))},[l]),p=K.useCallback(S=>{l(R=>R.filter(x=>x.id!==S)),t===S&&i(null)},[t,l]),g=K.useCallback((S,R,x)=>{const C=S||(a==null?void 0:a.id);C&&l(z=>z.map(Q=>Q.id===C?{...Q,routine:{...Q.routine,[R]:{...Q.routine[R],blocks:x}}}:Q))},[a,l]),v=K.useCallback(S=>r.find(R=>R.startDate&&R.endDate&&vw(S,R.startDate,R.endDate))||null,[r]),T=K.useCallback(S=>{const R=new Set(r.map(C=>C.id)),x=S.filter(C=>!R.has(C.id));x.length!==0&&l(C=>[...C,...x.map((z,Q)=>({...z,order:C.length+Q}))])},[r,l]);return{plans:r,loading:!1,activePlan:a,activePlanId:t,setActivePlanId:i,createPlan:c,updatePlan:d,deletePlan:p,updateRoutineBlocks:g,getPlanForDate:v,mergePlans:T}}function _O(r){const[e,t]=K.useState([]),[i,a]=K.useState(!0),[l,c]=K.useState(null),d=e.find(x=>x.id===l)||e[0]||null;d&&l!==d.id&&c(d.id),K.useEffect(()=>{if(!r){a(!1);return}gO(r).catch(()=>{});const x=uw(XI(Ft,"users",r,"plans"),cw("order"));return mw(x,z=>{t(z.docs.map(Q=>({id:Q.id,...Q.data()}))),a(!1)},()=>a(!1))},[r]),K.useEffect(()=>{e.length>0&&!l&&c(e[0].id)},[e,l]);const p=K.useCallback(async x=>{const C=crypto.randomUUID(),z={id:C,label:x.label||"New Plan",color:x.color||yl[0],startDate:x.startDate||"",endDate:x.endDate||"",order:x.order??e.length,routine:x.routine||_w()};return await Fg(pn(Ft,"users",r,"plans",C),z),c(C),C},[r,e.length]),g=K.useCallback(async(x,C)=>{await pr(pn(Ft,"users",r,"plans",x),C)},[r]),v=K.useCallback(async x=>{await dw(pn(Ft,"users",r,"plans",x)),l===x&&c(null)},[r,l]),T=K.useCallback(async(x,C,z)=>{const Q=x||(d==null?void 0:d.id);Q&&await pr(pn(Ft,"users",r,"plans",Q),{[`routine.${C}.blocks`]:z})},[r,d]),S=K.useCallback(x=>e.find(C=>C.startDate&&C.endDate&&x>=C.startDate&&x<=C.endDate)||null,[e]),R=K.useCallback(async x=>{const C=new Set(e.map(ae=>ae.id)),z=x.filter(ae=>!C.has(ae.id));if(z.length===0)return;const Q=pw(Ft);z.forEach((ae,le)=>{const _e={...ae,order:e.length+le};Q.set(pn(Ft,"users",r,"plans",_e.id),_e)}),await Q.commit()},[r,e]);return{plans:e,loading:i,activePlan:d,activePlanId:l,setActivePlanId:c,createPlan:p,updatePlan:g,deletePlan:v,updateRoutineBlocks:T,getPlanForDate:S,mergePlans:R}}function vO(r){return gl&&r?_O(r):yO()}const Tw="entrypoint-v2-pipelines";function EO(){try{const r=localStorage.getItem(Tw);if(r){const e=JSON.parse(r);if(Array.isArray(e))return e}}catch{}return[]}function TO(r){localStorage.setItem(Tw,JSON.stringify(r))}function SO(){const[r,e]=K.useState(()=>EO()),t=K.useCallback(S=>{e(R=>{const x=typeof S=="function"?S(R):S;return TO(x),x})},[]),i=K.useCallback(S=>{const R=crypto.randomUUID(),x={id:R,title:S||"New Section",order:r.length,collapsed:!1,items:[]};return t(C=>[...C,x]),R},[t,r.length]),a=K.useCallback((S,R)=>{t(x=>x.map(C=>C.id===S?{...C,...R}:C))},[t]),l=K.useCallback(S=>{t(R=>R.filter(x=>x.id!==S))},[t]),c=K.useCallback(S=>{t(S.map((R,x)=>({...R,order:x})))},[t]),d=K.useCallback(S=>{t(R=>R.map(x=>x.id===S?{...x,collapsed:!x.collapsed}:x))},[t]),p=K.useCallback((S,R)=>{const x={id:crypto.randomUUID(),icon:"",title:"",description:"",...R};t(C=>C.map(z=>z.id===S?{...z,items:[...z.items||[],x]}:z))},[t]),g=K.useCallback((S,R,x)=>{t(C=>C.map(z=>z.id===S?{...z,items:(z.items||[]).map(Q=>Q.id===R?{...Q,...x}:Q)}:z))},[t]),v=K.useCallback((S,R)=>{t(x=>x.map(C=>C.id===S?{...C,items:(C.items||[]).filter(z=>z.id!==R)}:C))},[t]),T=K.useCallback(S=>{const R=new Set(r.map(C=>C.id)),x=S.filter(C=>!R.has(C.id));x.length!==0&&t(C=>[...C,...x.map((z,Q)=>({...z,order:C.length+Q}))])},[r,t]);return{sections:r,loading:!1,addSection:i,updateSection:a,deleteSection:l,reorderSections:c,toggleCollapse:d,addItem:p,updateItem:g,deleteItem:v,mergeSections:T}}function bO(r){const[e,t]=K.useState([]),[i,a]=K.useState(!0);K.useEffect(()=>{if(!r){a(!1);return}const x=uw(XI(Ft,"users",r,"pipelines"),cw("order"));return mw(x,z=>{t(z.docs.map(Q=>({id:Q.id,...Q.data()}))),a(!1)},()=>a(!1))},[r]);const l=K.useCallback(async x=>{const C=crypto.randomUUID(),z={id:C,title:x||"New Section",order:e.length,collapsed:!1,items:[]};return await Fg(pn(Ft,"users",r,"pipelines",C),z),C},[r,e.length]),c=K.useCallback(async(x,C)=>{await pr(pn(Ft,"users",r,"pipelines",x),C)},[r]),d=K.useCallback(async x=>{await dw(pn(Ft,"users",r,"pipelines",x))},[r]),p=K.useCallback(async x=>{for(let C=0;C<x.length;C++)await pr(pn(Ft,"users",r,"pipelines",x[C].id),{order:C})},[r]),g=K.useCallback(async x=>{const C=e.find(z=>z.id===x);C&&await pr(pn(Ft,"users",r,"pipelines",x),{collapsed:!C.collapsed})},[r,e]),v=K.useCallback(async(x,C)=>{const z=e.find(ae=>ae.id===x);if(!z)return;const Q={id:crypto.randomUUID(),icon:"",title:"",description:"",...C};await pr(pn(Ft,"users",r,"pipelines",x),{items:[...z.items||[],Q]})},[r,e]),T=K.useCallback(async(x,C,z)=>{const Q=e.find(ae=>ae.id===x);Q&&await pr(pn(Ft,"users",r,"pipelines",x),{items:(Q.items||[]).map(ae=>ae.id===C?{...ae,...z}:ae)})},[r,e]),S=K.useCallback(async(x,C)=>{const z=e.find(Q=>Q.id===x);z&&await pr(pn(Ft,"users",r,"pipelines",x),{items:(z.items||[]).filter(Q=>Q.id!==C)})},[r,e]),R=K.useCallback(async x=>{const C=new Set(e.map(Q=>Q.id)),z=x.filter(Q=>!C.has(Q.id));if(z.length!==0)for(let Q=0;Q<z.length;Q++){const ae={...z[Q],order:e.length+Q};await Fg(pn(Ft,"users",r,"pipelines",ae.id),ae)}},[r,e]);return{sections:e,loading:i,addSection:l,updateSection:c,deleteSection:d,reorderSections:p,toggleCollapse:g,addItem:v,updateItem:T,deleteItem:S,mergeSections:R}}function AO(r){return gl&&r?bO(r):SO()}function IO(){const[r,e]=K.useState(rc()),t=rc(),[i,a]=K.useState(()=>new Date().getFullYear()),[l,c]=K.useState(()=>new Date().getMonth()),d=K.useCallback(()=>{c(T=>T===0?(a(S=>S-1),11):T-1)},[]),p=K.useCallback(()=>{c(T=>T===11?(a(S=>S+1),0):T+1)},[]),g=K.useCallback(()=>{const T=new Date;a(T.getFullYear()),c(T.getMonth()),e(rc())},[]),v=K.useCallback((T,S)=>{a(T),c(S)},[]);return{selectedDate:r,setSelectedDate:e,today:t,viewYear:i,setViewYear:a,viewMonth:l,setViewMonth:c,prevMonth:d,nextMonth:p,goToday:g,setViewYearMonth:v}}const Sw="entrypoint-v2-custom-types",wO=["#0d9488","#84cc16","#e11d48","#6366f1","#f97316","#06b6d4","#a21caf","#65a30d","#be185d","#1d4ed8","#c026d3","#ea580c","#0f766e","#4f46e5","#15803d","#9333ea"],RO=new Set(Object.values(Da).map(r=>r.border.toLowerCase())),sg=wO.filter(r=>!RO.has(r.toLowerCase()));function CO(r){if(r.startsWith("hsl"))return{bg:r.replace(")",", 0.10)").replace("hsl(","hsla("),border:r,text:r};const e=parseInt(r.slice(1,3),16),t=parseInt(r.slice(3,5),16),i=parseInt(r.slice(5,7),16);return{bg:`rgba(${e}, ${t}, ${i}, 0.10)`,border:r,text:r}}function DO(r){if(r<sg.length)return sg[r];const e=((r-sg.length)*137.5+30)%360;return`hsl(${Math.round(e)}, 65%, 50%)`}function NO(){try{const r=localStorage.getItem(Sw);return r?JSON.parse(r).map(t=>({key:t.key,name:t.name})):[]}catch{return[]}}function rg(r){localStorage.setItem(Sw,JSON.stringify(r.map(e=>({key:e.key,name:e.name}))))}function xO(){const[r,e]=K.useState(NO),t=K.useMemo(()=>r.map((d,p)=>{const g=DO(p);return{...d,color:g,colors:CO(g)}}),[r]),i=K.useCallback(d=>{const p=d.toLowerCase().replace(/\s+/g,"-");return e(g=>{if(g.find(T=>T.key===p))return g;const v=[...g,{key:p,name:d}];return rg(v),v}),p},[]),a=K.useCallback(d=>{e(p=>{const g=p.filter(v=>v.key!==d);return rg(g),g})},[]),l=K.useCallback(d=>{e(p=>{const g=new Set(p.map(S=>S.key)),v=d.filter(S=>!g.has(S.key));if(v.length===0)return p;const T=[...p,...v.map(S=>({key:S.key,name:S.name}))];return rg(T),T})},[]),c=K.useMemo(()=>t.reduce((d,p)=>(d[p.key]=p.colors,d),{}),[t]);return{customTypes:t,customTypeColors:c,addCustomType:i,removeCustomType:a,mergeCustomTypes:l}}function bw({title:r,message:e,confirmLabel:t="Delete",onConfirm:i,onClose:a}){return K.useEffect(()=>{const l=c=>{c.key==="Escape"&&a()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[a]),w.jsx("div",{className:"modal-overlay",onClick:a,children:w.jsxs("div",{className:"modal",onClick:l=>l.stopPropagation(),style:{maxWidth:360},children:[w.jsx("h3",{className:"modal-title",children:r}),w.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 20px",lineHeight:1.5},children:e}),w.jsxs("div",{className:"modal-actions",children:[w.jsx("button",{className:"btn-secondary",onClick:a,children:"Cancel"}),w.jsx("button",{className:"btn-danger",onClick:i,children:t})]})]})})}function VO({plans:r,activePlanId:e,onSelect:t,onCreate:i,onEdit:a,onDelete:l}){const[c,d]=K.useState(null),[p,g]=K.useState(null),v=K.useRef(null);K.useEffect(()=>{if(!c)return;const R=x=>{x.key==="Escape"&&d(null)};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[c]);const T=(R,x)=>{R.preventDefault(),d({x:R.clientX,y:R.clientY,plan:x})},S=R=>{const x=v.current;x&&x.scrollWidth>x.clientWidth&&(R.preventDefault(),x.scrollLeft+=R.deltaY)};return w.jsxs("div",{className:"plan-sidebar",children:[w.jsxs("div",{className:"plan-list",ref:v,onWheel:S,children:[r.map(R=>w.jsxs("button",{className:`plan-item ${R.id===e?"active":""}`,onClick:()=>t(R.id),onContextMenu:x=>T(x,R),children:[w.jsx("span",{className:"plan-dot",style:{background:R.color}}),w.jsxs("div",{className:"plan-info",children:[w.jsx("span",{className:"plan-label",children:R.label}),R.startDate&&R.endDate&&w.jsx("span",{className:"plan-dates",children:sO(R.startDate,R.endDate)})]})]},R.id)),w.jsx("button",{className:"plan-item plan-add",onClick:i,children:"+ New Plan"})]}),c&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"context-overlay",onClick:()=>d(null)}),w.jsxs("div",{className:"context-menu",style:{top:c.y,left:c.x},children:[w.jsx("button",{onClick:()=>{a(c.plan),d(null)},children:"Edit"}),w.jsx("button",{className:"danger",onClick:()=>{g(c.plan),d(null)},children:"Delete"})]})]}),p&&w.jsx(bw,{title:"Delete Plan",message:`Delete "${p.label}"? This cannot be undone.`,onConfirm:()=>{l(p.id),g(null)},onClose:()=>g(null)})]})}function MO(r,e,t,i){if(!r||!e)return null;for(const a of t)if(a.id!==i&&!(!a.startDate||!a.endDate)&&r<=a.endDate&&e>=a.startDate)return a;return null}function k0({plan:r,plans:e=[],onSave:t,onClose:i}){const a=!!r,[l,c]=K.useState((r==null?void 0:r.label)||""),[d,p]=K.useState((r==null?void 0:r.color)||yl[0]),[g,v]=K.useState((r==null?void 0:r.startDate)||""),[T,S]=K.useState((r==null?void 0:r.endDate)||""),[R,x]=K.useState(""),C=z=>{if(z.preventDefault(),x(""),T<g){x("End date must be after start date.");return}const Q=MO(g,T,e,r==null?void 0:r.id);if(Q){x(`Overlaps with "${Q.label}" (${Q.startDate}  ${Q.endDate}).`);return}t({label:l.trim(),color:d,startDate:g,endDate:T})};return w.jsx("div",{className:"modal-overlay",onClick:i,onKeyDown:z=>{z.key==="Escape"&&i()},children:w.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),children:[w.jsx("h3",{className:"modal-title",children:a?"Edit Plan":"New Plan"}),w.jsxs("form",{onSubmit:C,className:"modal-form",children:[w.jsxs("label",{className:"modal-label",children:["Label",w.jsx("input",{className:"modal-input",value:l,onChange:z=>c(z.target.value),placeholder:"e.g. Ramadan",required:!0,autoFocus:!0})]}),w.jsxs("div",{className:"modal-row",children:[w.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start Date",w.jsx("input",{className:"modal-input",type:"date",value:g,onChange:z=>v(z.target.value),required:!0})]}),w.jsxs("label",{className:"modal-label",style:{flex:1},children:["End Date",w.jsx("input",{className:"modal-input",type:"date",value:T,onChange:z=>S(z.target.value),required:!0})]})]}),R&&w.jsx("div",{className:"plan-error",children:R}),w.jsxs("div",{className:"modal-label",children:["Color",w.jsx("div",{className:"color-grid",children:yl.map(z=>w.jsx("button",{type:"button",className:`color-btn ${d===z?"active":""}`,style:{background:z},onClick:()=>p(z)},z))})]}),w.jsxs("div",{className:"modal-actions",children:[w.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Cancel"}),w.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const OO=["January","February","March","April","May","June","July","August","September","October","November","December"],PO=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function kO({viewYear:r,viewMonth:e,selectedDate:t,today:i,plans:a,highlightDate:l,onPrevMonth:c,onNextMonth:d,onGoToday:p,onSelectDate:g,onPlanClick:v}){const T=K.useMemo(()=>{const R=oO(r,e),x=(R[0].date.getDay()+6)%7;return[...Array.from({length:x},()=>null),...R]},[r,e]),S=K.useMemo(()=>{const R={};for(const x of T){if(!x)continue;const C=a.find(z=>z.startDate&&z.endDate&&vw(x.iso,z.startDate,z.endDate));C&&(R[x.iso]=C)}return R},[T,a]);return w.jsxs("div",{className:"calendar-view",children:[w.jsxs("div",{className:"cal-header",children:[w.jsx("button",{className:"cal-nav",onClick:c,children:""}),w.jsxs("div",{className:"cal-title",children:[w.jsx("span",{className:"cal-month",children:OO[e]}),w.jsx("span",{className:"cal-year",children:r})]}),w.jsx("button",{className:"cal-nav",onClick:d,children:""}),w.jsx("button",{className:"cal-today-btn",onClick:p,children:"Today"})]}),w.jsxs("div",{className:"cal-grid",children:[PO.map(R=>w.jsx("div",{className:"cal-dow",children:R},R)),T.map((R,x)=>{if(!R)return w.jsx("div",{className:"cal-cell cal-blank"},`blank-${x}`);const C=S[R.iso],z=R.iso===i,Q=R.iso===t,ae=R.iso===l;return w.jsxs("button",{className:`cal-cell ${z?"cal-today":""} ${Q?"cal-selected":""} ${C?"cal-has-plan":""} ${ae?"cal-highlight":""}`,style:C?{"--plan-color":C.color}:void 0,onClick:()=>g(R.iso),children:[w.jsx("span",{className:"cal-day-num",children:R.date.getDate()}),C&&w.jsx("span",{className:"cal-plan-dot",style:{background:C.color}})]},R.iso)})]}),a.length>0&&w.jsx("div",{className:"cal-plan-legend",children:a.filter(R=>R.startDate&&R.endDate).map(R=>w.jsxs("button",{className:"cal-plan-chip",onClick:()=>v==null?void 0:v(R),children:[w.jsx("span",{className:"cal-plan-chip-dot",style:{background:R.color}}),w.jsx("span",{children:R.label})]},R.id))})]})}const Fi=60,cd=5,Lu=15,Uu=52,L0=8;function Uo(r){return Math.max(0,Math.min(1435,Math.round(r/cd)*cd))}function Hi(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function U0({block:r,top:e,height:t,col:i=0,totalCols:a=1,isNew:l,isPrayer:c,extraTypeColors:d={},onEdit:p,onDelete:g,onTimeChange:v,onResize:T,onToggleTask:S}){var me;const R=K.useRef(null),x=K.useRef(null),C=K.useRef(null),z=K.useRef(null),[Q,ae]=K.useState(null),le=Da[r.type]||d[r.type]||Da.neutral,_e=c?"#2d8a4e":le.text==="#94a3b8"?"#b0b0ba":le.text,Ee=r.type==="prayer"||c?600:400,ue=e/Fi*60,N=t/Fi*60,A=Hi(Math.min(ue+N,1440)),D=r.time,P=`calc(100% - ${Uu}px - ${L0}px)`,M=c?P:`calc((${P}) / ${a})`,U=c?`${Uu}px`:`calc(${Uu}px + (${P}) * ${i} / ${a})`,V=K.useCallback((se,pe)=>{const ie=R.current,ve=x.current;if(ie){if(pe==="move"){const Ce=e+se;ie.style.top=`${Ce}px`,ie.style.left=`${Uu}px`,ie.style.width=`calc(100% - ${Uu}px - ${L0}px)`,ie.style.zIndex="100",ie.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",ie.style.opacity="0.85",ie.style.cursor="grabbing";const je=Uo((e+se)/Fi*60);ve&&(ve.textContent=`${Hi(je)}  ${Hi(Math.min(je+N,1440))}`)}else if(pe==="top"){const Ce=e+se,je=Math.max(t-se,Lu/60*Fi);ie.style.top=`${Ce}px`,ie.style.height=`${Math.max(je,24)}px`,ie.style.zIndex="100",ie.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",ie.style.opacity="0.85";const Et=Uo(ue+se/Fi*60);ve&&(ve.textContent=`${Hi(Et)}  ${Hi(Math.min(ue+N,1440))}`)}else if(pe==="bottom"){const Ce=Math.max(t+se,Lu/60*Fi);ie.style.height=`${Math.max(Ce,24)}px`,ie.style.zIndex="100",ie.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",ie.style.opacity="0.85";const je=ue+Math.max(Lu,Uo(N+se/Fi*60));ve&&(ve.textContent=`${Hi(ue)}  ${Hi(Math.min(je,1440))}`)}}},[e,t,ue,N]),Qe=K.useCallback(()=>{const se=R.current;se&&(se.style.top=`${e}px`,se.style.height=`${Math.max(t,24)}px`,se.style.left=U,se.style.width=M,se.style.zIndex=c?"10":"1",se.style.boxShadow="none",se.style.opacity="1",se.style.cursor=c?"default":"pointer",x.current&&(x.current.textContent=`${D}  ${A}`))},[e,t,U,M,D,A,c]);K.useEffect(()=>{x.current&&(x.current.textContent=`${D}  ${A}`)},[D,A]);const We=se=>{c||se.button!==0||(C.current={y:se.clientY,mode:"move",moved:!1},R.current.setPointerCapture(se.pointerId))},J=se=>{if(!C.current)return;const pe=se.clientY-C.current.y;!C.current.moved&&Math.abs(pe)>4&&(C.current.moved=!0),C.current.moved&&(z.current&&cancelAnimationFrame(z.current),z.current=requestAnimationFrame(()=>V(pe,C.current.mode)))},ce=se=>{if(!C.current)return;const pe=se.clientY-C.current.y,{mode:ie,moved:ve}=C.current;if(C.current=null,z.current&&cancelAnimationFrame(z.current),Qe(),!ve){c||p(r);return}if(ie==="move"){const Ce=Uo((e+pe)/Fi*60);v(r.id,Hi(Ce))}else if(ie==="top"){const Ce=Uo(ue+pe/Fi*60),je=Math.max(Lu,Math.round((ue+N-Ce)/cd)*cd);T(r.id,Hi(Ce),je)}else if(ie==="bottom"){const Ce=Math.max(Lu,Uo(N+pe/Fi*60));T(r.id,Hi(ue),Ce)}},Te=se=>pe=>{c||(pe.stopPropagation(),pe.button===0&&(C.current={y:pe.clientY,mode:se,moved:!0},pe.target.setPointerCapture(pe.pointerId)))},Ve=se=>{c||(se.preventDefault(),se.stopPropagation(),ae({x:se.clientX,y:se.clientY}))},Me=()=>ae(null);K.useEffect(()=>{if(!Q)return;const se=pe=>{pe.key==="Escape"&&Me()};return window.addEventListener("keydown",se),()=>window.removeEventListener("keydown",se)},[Q]);const k=!c&&((me=r.tasks)==null?void 0:me.length)>0,ee=k?r.tasks.filter(se=>se.done).length:0,Y=t<36,oe=k&&t>=60;return w.jsxs(w.Fragment,{children:[w.jsxs("div",{ref:R,className:`timeline-block ${l?"new-block":""} ${c?"prayer-block":""}`,style:{top:e,height:Math.max(t,24),left:U,width:M,right:"auto",background:c?"rgba(34, 139, 34, 0.10)":le.bg,borderLeft:`3px solid ${c?"#2d8a4e":le.border}`,zIndex:c?10:1,cursor:c?"default":"pointer",transition:"box-shadow 0.15s"},onPointerDown:We,onPointerMove:J,onPointerUp:ce,onContextMenu:Ve,children:[!c&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"resize-handle resize-handle-top",onPointerDown:Te("top"),onPointerMove:J,onPointerUp:ce}),w.jsx("div",{className:"resize-handle resize-handle-bottom",onPointerDown:Te("bottom"),onPointerMove:J,onPointerUp:ce})]}),Y?w.jsxs("div",{className:"block-compact",children:[w.jsxs("span",{ref:x,className:"block-time-sm",children:[D,"  ",A]}),w.jsx("span",{className:"block-icon-sm",children:r.icon}),w.jsx("span",{className:"block-act-sm",style:{color:_e,fontWeight:Ee},children:r.activity}),k&&w.jsxs("span",{className:"block-task-badge",children:[ee,"/",r.tasks.length]})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{ref:x,className:"block-time-sm",children:[D,"  ",A]}),w.jsxs("div",{className:"block-row",children:[w.jsx("span",{className:"block-icon-sm",children:r.icon}),w.jsx("span",{className:"block-act",style:{color:_e,fontWeight:Ee},children:r.activity}),k&&!oe&&w.jsxs("span",{className:"block-task-badge",children:[ee,"/",r.tasks.length]})]}),oe&&w.jsx("div",{className:"block-tasks",onWheel:se=>{const pe=se.currentTarget;pe.scrollHeight>pe.clientHeight&&se.stopPropagation()},children:r.tasks.map(se=>w.jsxs("label",{className:`block-task-item ${se.done?"done":""}`,onPointerDown:pe=>pe.stopPropagation(),onClick:pe=>pe.stopPropagation(),children:[w.jsx("input",{type:"checkbox",checked:se.done,onChange:()=>S==null?void 0:S(r.id,se.id)}),w.jsx("span",{children:se.text})]},se.id))})]})]}),Q&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"context-overlay",onClick:se=>{se.stopPropagation(),Me()}}),w.jsxs("div",{className:"context-menu",style:{top:Q.y,left:Q.x},onClick:se=>se.stopPropagation(),children:[w.jsx("button",{onClick:()=>{Me(),p(r)},children:"Edit"}),w.jsx("button",{className:"danger",onClick:()=>{Me(),g(r.id)},children:"Delete"})]})]})]})}const LO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function z0(r){return`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function UO({block:r,defaultTime:e,segments:t,onSave:i,onDelete:a,onClose:l,customTypes:c=[],customTypeColors:d={},onAddCustomType:p,onRemoveCustomType:g}){K.useEffect(()=>{if(!r)return;const Y=oe=>{oe.key==="Delete"&&(oe.preventDefault(),a(r.id))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[r,a]);const v=!!r,T=(r==null?void 0:r.time)||e||"08:00",S=(r==null?void 0:r.duration)||60,[R,x]=K.useState(T),[C,z]=K.useState(()=>{const[Y,oe]=T.split(":").map(Number),me=Y*60+oe+S;return z0(me)}),[Q,ae]=K.useState((r==null?void 0:r.activity)||""),[le,_e]=K.useState((r==null?void 0:r.type)||"neutral"),[Ee,ue]=K.useState((r==null?void 0:r.icon)||""),[N,A]=K.useState((r==null?void 0:r.tasks)||[]),[D,P]=K.useState(""),[M,U]=K.useState(!1),[V,Qe]=K.useState(!1),[We,J]=K.useState(""),ce=new Set(c.map(Y=>Y.key)),Te=[...eO,...c.map(Y=>Y.key)],Ve={...Da,...d},Me=Ve[le]||Da.neutral,k=()=>{const[Y,oe]=R.split(":").map(Number),[me,se]=C.split(":").map(Number);return Math.max(15,me*60+se-(Y*60+oe))},ee=Y=>{Y.preventDefault(),i({id:(r==null?void 0:r.id)||crypto.randomUUID(),time:R,activity:Q.trim(),type:le,icon:Ee,duration:k(),segment:null,offsetMinutes:0,tasks:N})};return w.jsx("div",{className:"modal-overlay",onClick:l,onKeyDown:Y=>{Y.key==="Escape"&&l()},children:w.jsxs("div",{className:"modal",onClick:Y=>{Y.stopPropagation(),M&&U(!1)},children:[w.jsx("h3",{className:"modal-title",children:v?"Edit Block":"Add Block"}),w.jsxs("form",{onSubmit:ee,className:"modal-form",children:[w.jsxs("div",{className:"modal-row",children:[w.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start",w.jsx("input",{className:"modal-input",value:R,onChange:Y=>{const oe=Y.target.value;x(oe);const[me,se]=R.split(":").map(Number),[pe,ie]=C.split(":").map(Number),ve=pe*60+ie-(me*60+se);if(ve>0&&/^\d{2}:\d{2}$/.test(oe)){const[Ce,je]=oe.split(":").map(Number);z(z0(Ce*60+je+ve))}},placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]}),w.jsxs("label",{className:"modal-label",style:{flex:1},children:["End",w.jsx("input",{className:"modal-input",value:C,onChange:Y=>z(Y.target.value),placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]})]}),w.jsxs("label",{className:"modal-label",children:["Activity",w.jsx("input",{className:"modal-input",value:Q,onChange:Y=>ae(Y.target.value),placeholder:"e.g. Quran revision",required:!0,autoFocus:!0})]}),w.jsxs("div",{className:"modal-label",children:["Type",w.jsxs("div",{className:"modal-row",style:{gap:6,alignItems:"center"},children:[w.jsxs("div",{className:"type-picker",style:{flex:1},onClick:Y=>Y.stopPropagation(),children:[w.jsxs("button",{type:"button",className:"type-picker-btn",onClick:()=>U(Y=>!Y),children:[w.jsx("span",{className:"type-color-dot",style:{background:Me.border}}),w.jsx("span",{children:le.charAt(0).toUpperCase()+le.slice(1).replace(/-/g," ")}),w.jsx("span",{className:"type-picker-arrow",children:M?"":""})]}),M&&w.jsx("div",{className:"type-dropdown",children:Te.map(Y=>{const oe=Ve[Y]||Da.neutral,me=ce.has(Y);return w.jsxs("div",{className:`type-dropdown-item${Y===le?" active":""}`,children:[w.jsxs("button",{type:"button",className:"type-dropdown-select",onClick:()=>{_e(Y),U(!1)},children:[w.jsx("span",{className:"type-color-dot",style:{background:oe.border}}),w.jsx("span",{children:Y.charAt(0).toUpperCase()+Y.slice(1).replace(/-/g," ")})]}),me&&g&&w.jsx("button",{type:"button",className:"type-delete-btn",onClick:()=>{g(Y),le===Y&&_e("neutral")},children:""})]},Y)})})]}),w.jsx("button",{type:"button",className:"btn-add-type",onClick:()=>Qe(Y=>!Y),title:"Add custom type",children:"+"})]})]}),V&&w.jsxs("div",{className:"new-type-form",children:[w.jsx("input",{className:"modal-input",placeholder:"Type name",value:We,onChange:Y=>J(Y.target.value),onKeyDown:Y=>{if(Y.key==="Enter"&&We.trim()&&p){Y.preventDefault();const oe=p(We.trim());_e(oe),J(""),Qe(!1)}}}),w.jsx("button",{type:"button",className:"btn-primary btn-sm",disabled:!We.trim(),onClick:()=>{if(!We.trim()||!p)return;const Y=p(We.trim());_e(Y),J(""),Qe(!1)},children:"Add"})]}),w.jsxs("div",{className:"modal-label",children:["Icon",w.jsx("div",{className:"icon-grid",children:LO.map(Y=>w.jsx("button",{type:"button",className:`icon-btn ${Ee===Y?"active":""}`,onClick:()=>ue(Y),children:Y},Y))})]}),w.jsxs("div",{className:"modal-label",children:["Tasks",w.jsxs("div",{className:"task-list-editor",children:[N.map((Y,oe)=>w.jsxs("div",{className:"task-edit-row",children:[w.jsx("input",{type:"checkbox",checked:Y.done,onChange:()=>{const me=[...N];me[oe]={...Y,done:!Y.done},A(me)}}),w.jsx("input",{className:`modal-input task-edit-input${Y.done?" task-done":""}`,value:Y.text,onChange:me=>{const se=[...N];se[oe]={...Y,text:me.target.value},A(se)}}),w.jsx("button",{type:"button",className:"task-remove-btn",onClick:()=>A(N.filter((me,se)=>se!==oe)),children:""})]},Y.id)),w.jsxs("div",{className:"task-edit-row",children:[w.jsx("input",{className:"modal-input task-edit-input",placeholder:"Add task...",value:D,onChange:Y=>P(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&D.trim()&&(Y.preventDefault(),A([...N,{id:crypto.randomUUID(),text:D.trim(),done:!1}]),P(""))}}),w.jsx("button",{type:"button",className:"task-add-btn",disabled:!D.trim(),onClick:()=>{D.trim()&&(A([...N,{id:crypto.randomUUID(),text:D.trim(),done:!1}]),P(""))},children:"+"})]})]})]}),w.jsxs("div",{className:"modal-actions",children:[v&&w.jsx("button",{type:"button",className:"btn-danger",onClick:()=>a(r.id),children:"Delete"}),w.jsx("div",{style:{flex:1}}),w.jsx("button",{type:"button",className:"btn-secondary",onClick:l,children:"Cancel"}),w.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const zO=["","","","","","","","","","","","","","","",""];function jO({value:r,onChange:e}){const[t,i]=K.useState(!1),a=K.useRef(null);return K.useEffect(()=>{if(!t)return;const l=c=>{a.current&&!a.current.contains(c.target)&&i(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[t]),w.jsxs("div",{className:"pipeline-emoji-picker",ref:a,children:[w.jsx("button",{className:"pipeline-emoji-btn",onClick:()=>i(!t),children:r||""}),t&&w.jsx("div",{className:"pipeline-emoji-grid",children:zO.map(l=>w.jsx("button",{className:"pipeline-emoji-option",onClick:()=>{e(l),i(!1)},children:l},l))})]})}function Gg({value:r,onChange:e,className:t,placeholder:i,singleClick:a}){const[l,c]=K.useState(!1),[d,p]=K.useState(r),g=K.useRef(null);K.useEffect(()=>{l&&g.current&&g.current.focus()},[l]);const v=()=>{c(!1),d.trim()!==r&&e(d.trim())},T=R=>{R.stopPropagation(),p(r),c(!0)};if(l)return w.jsx("input",{ref:g,className:`pipeline-inline-input ${t||""}`,value:d,placeholder:i,onClick:R=>R.stopPropagation(),onChange:R=>p(R.target.value),onBlur:v,onKeyDown:R=>{R.key==="Enter"&&v(),R.key==="Escape"&&(p(r),c(!1))}});const S=a?{onClick:T}:{onDoubleClick:T};return w.jsx("span",{className:`pipeline-inline-text ${t||""} ${r?"":"pipeline-placeholder"}`,...S,children:r||i})}function BO({item:r,sectionId:e,onUpdate:t,onDelete:i}){return w.jsxs("div",{className:"pipeline-item",children:[w.jsx(jO,{value:r.icon,onChange:a=>t(e,r.id,{icon:a})}),w.jsxs("div",{className:"pipeline-item-content",children:[w.jsx(Gg,{value:r.title,onChange:a=>t(e,r.id,{title:a}),className:"pipeline-item-title",placeholder:"Item title"}),w.jsx(Gg,{value:r.description,onChange:a=>t(e,r.id,{description:a}),className:"pipeline-item-desc",placeholder:"Description"})]}),w.jsx("button",{className:"pipeline-item-delete",onClick:()=>i(e,r.id),children:""})]})}function qO({sections:r,addSection:e,updateSection:t,deleteSection:i,toggleCollapse:a,addItem:l,updateItem:c,deleteItem:d}){const[p,g]=K.useState(null);return w.jsxs("div",{className:"pipeline-sections",children:[r.map(v=>w.jsxs("div",{className:"pipeline-section",children:[w.jsxs("div",{className:"pipeline-section-header",onClick:()=>a(v.id),children:[w.jsx("span",{className:"pipeline-collapse-btn",children:v.collapsed?"":""}),w.jsx(Gg,{value:v.title,onChange:T=>t(v.id,{title:T}),className:"pipeline-section-title",placeholder:"Section title",singleClick:!0}),w.jsx("button",{className:"pipeline-section-delete",onClick:T=>{T.stopPropagation(),g(v.id)},children:""})]}),!v.collapsed&&w.jsxs("div",{className:"pipeline-section-body",children:[(v.items||[]).map(T=>w.jsx(BO,{item:T,sectionId:v.id,onUpdate:c,onDelete:d},T.id)),w.jsx("button",{className:"pipeline-add-item",onClick:()=>l(v.id,{}),children:"+ Add"})]})]},v.id)),w.jsx("button",{className:"pipeline-add-section",onClick:()=>e("New Section"),children:"+ New Section"}),p&&w.jsx(bw,{title:"Delete Section",message:"This will delete the section and all its items.",onConfirm:()=>{i(p),g(null)},onClose:()=>g(null)})]})}const Kg="prayerTimesCache";function ag(r){try{const e=localStorage.getItem(Kg);if(!e)return null;const t=JSON.parse(e);return t[r]?t[r]:null}catch{return null}}function FO(r,e){try{const t=localStorage.getItem(Kg),i=t?JSON.parse(t):{};i[r]=e;const a=Object.keys(i);a.length>30&&(a.sort(),delete i[a[0]]),localStorage.setItem(Kg,JSON.stringify(i))}catch{}}function HO({date:r,city:e="Lyon",country:t="France",method:i=12}={}){const a=r||rc(),[l,c]=K.useState(()=>ag(a)),[d,p]=K.useState(!ag(a)),[g,v]=K.useState(null);return K.useEffect(()=>{const T=ag(a);if(T){c(T),p(!1);return}let S=!1;p(!0);async function R(){try{const x=rO(a),z=await(await fetch(`https://api.aladhan.com/v1/timingsByCity/${x}?city=${encodeURIComponent(e)}&country=${encodeURIComponent(t)}&method=${i}`)).json();if(!S&&z.data){const Q=z.data.timings,ae={Fajr:Q.Fajr,Dhuhr:Q.Dhuhr,Asr:Q.Asr,Maghrib:Q.Maghrib,Isha:Q.Isha};c(ae),FO(a,ae)}}catch(x){S||v(x.message)}finally{S||p(!1)}}return R(),()=>{S=!0}},[a,e,t,i]),{times:l,loading:d,error:g}}const GO=["pre-fajr","fajr-dhuhr","dhuhr-asr","asr-maghrib","maghrib-isha","post-isha"],KO={"pre-fajr":"Pre-Fajr","fajr-dhuhr":"Fajr  Dhuhr","dhuhr-asr":"Dhuhr  Asr","asr-maghrib":"Asr  Maghrib","maghrib-isha":"Maghrib  Isha","post-isha":"Post-Isha"};function zu(r){const[e,t]=r.split(":").map(Number);return e*60+t}function QO(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function YO(r){if(!r)return null;const e=zu(r.Fajr),t=zu(r.Dhuhr),i=zu(r.Asr),a=zu(r.Maghrib),l=zu(r.Isha);return{"pre-fajr":{start:"00:00",end:r.Fajr,startMin:0,endMin:e},"fajr-dhuhr":{start:r.Fajr,end:r.Dhuhr,startMin:e,endMin:t},"dhuhr-asr":{start:r.Dhuhr,end:r.Asr,startMin:t,endMin:i},"asr-maghrib":{start:r.Asr,end:r.Maghrib,startMin:i,endMin:a},"maghrib-isha":{start:r.Maghrib,end:r.Isha,startMin:a,endMin:l},"post-isha":{start:r.Isha,end:"23:59",startMin:l,endMin:1439}}}function $O(r,e){if(!r.segment||!e||!e[r.segment])return r.time||"08:00";const i=e[r.segment].startMin+(r.offsetMinutes||0);return QO(Math.max(0,Math.min(1435,i)))}const ju=25;function XO(r){return r?[{id:"prayer-fajr",time:r.Fajr,activity:"Fajr",type:"prayer",icon:"",duration:ju,isPrayer:!0},{id:"prayer-dhuhr",time:r.Dhuhr,activity:"Dhuhr",type:"prayer",icon:"",duration:ju,isPrayer:!0},{id:"prayer-asr",time:r.Asr,activity:"Asr",type:"prayer",icon:"",duration:ju,isPrayer:!0},{id:"prayer-maghrib",time:r.Maghrib,activity:"Maghrib",type:"prayer",icon:"",duration:ju,isPrayer:!0},{id:"prayer-isha",time:r.Isha,activity:"Isha",type:"prayer",icon:"",duration:ju,isPrayer:!0}]:[]}const JO=60;function Aw(r){const[e,t]=r.split(":").map(Number);return e*60+t}function WO(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function ZO(r,e=5){return Math.max(0,Math.min(1435,Math.round(r/e)*e))}function eP(r){if(!r.length)return[];const e=r.map(p=>{const g=Aw(p.time),v=p.duration||JO;return{...p,startMin:g,endMin:g+v}});e.sort((p,g)=>p.startMin-g.startMin||g.endMin-g.startMin-(p.endMin-p.startMin));const t=[],i=[];for(const p of e){let g=-1;for(let v=0;v<t.length;v++)if(t[v]<=p.startMin){g=v;break}g===-1&&(g=t.length,t.push(0)),t[g]=p.endMin,i.push({...p,col:g})}const a=[];let l=[],c=0;for(const p of i)l.length===0||p.startMin<c?(l.push(p),c=Math.max(c,p.endMin)):(a.push(l),l=[p],c=p.endMin);l.length&&a.push(l);const d=[];for(const p of a){const g=Math.max(...p.map(v=>v.col))+1;for(const v of p)d.push({...v,totalCols:g})}return d}const yi=60,j0=24,B0=60,tP=Array.from({length:24},(r,e)=>e),nP=["rgba(34, 139, 34, 0.03)","rgba(34, 139, 34, 0.06)"],q0={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},iP=["M","T","W","T","F","S","S"];function sP({date:r,plan:e,onUpdateBlocks:t,onMonth:i,onSelectDate:a,customTypes:l=[],customTypeColors:c={},onAddCustomType:d,onRemoveCustomType:p,pipelineSections:g=[],onAddSection:v,onUpdateSection:T,onDeleteSection:S,onToggleCollapse:R,onAddItem:x,onUpdateItem:C,onDeleteItem:z}){var se,pe;const[Q,ae]=K.useState(null),[le,_e]=K.useState(null),Ee=K.useRef(null),ue=iO(n_(r)),N=r===rc(),{times:A}=HO({date:r}),D=K.useMemo(()=>YO(A),[A]),P=K.useMemo(()=>XO(A),[A]),M=((pe=(se=e==null?void 0:e.routine)==null?void 0:se[ue])==null?void 0:pe.blocks)||[],U=K.useMemo(()=>M.map(ie=>ie.segment&&D?{...ie,time:$O(ie,D)}:ie),[M,D]),V=K.useMemo(()=>{const ie=U.map(Ce=>({...Ce,duration:Ce.duration||B0}));return eP(ie).map(Ce=>({...Ce,top:Ce.startMin/60*yi,height:Math.max(Ce.duration/60*yi,j0)}))},[U]),Qe=K.useMemo(()=>P.map(ie=>{const ve=Aw(ie.time);return{...ie,startMin:ve,top:ve/60*yi,height:Math.max(ie.duration/60*yi,j0)}}),[P]),We=K.useMemo(()=>D?GO.map((ie,ve)=>{const Ce=D[ie],je=Ce.startMin/60*yi,Et=(Ce.endMin-Ce.startMin)/60*yi;return{id:ie,top:je,height:Et,color:nP[ve%2],label:KO[ie]}}):[],[D]),J=ie=>{if(!e||ie.target.closest(".timeline-block")||ie.target.closest(".segment-label"))return;const ve=Ee.current.getBoundingClientRect(),Ce=ie.clientY-ve.top,je=ZO(Ce/yi*60),Et=WO(je),Fn=crypto.randomUUID(),yn={id:Fn,time:Et,activity:"(New)",type:"neutral",icon:"",duration:B0,segment:null,offsetMinutes:0,tasks:[]};t(ue,[...M,yn]),_e(Fn)},ce=(ie,ve)=>{const Ce=M.map(je=>je.id===ie?{...je,time:ve,segment:null,offsetMinutes:0}:je);t(ue,Ce)},Te=(ie,ve,Ce)=>{const je=M.map(Et=>Et.id===ie?{...Et,time:ve,duration:Ce,segment:null,offsetMinutes:0}:Et);t(ue,je)},Ve=ie=>{let ve=M.map(Ce=>Ce.id===ie.id?ie:Ce);M.find(Ce=>Ce.id===ie.id)||ve.push(ie),t(ue,ve),ae(null),_e(null)},Me=ie=>{t(ue,M.filter(ve=>ve.id!==ie)),ae(null),_e(null)},k=(ie,ve)=>{const Ce=M.map(je=>je.id!==ie?je:{...je,tasks:(je.tasks||[]).map(Et=>Et.id===ve?{...Et,done:!Et.done}:Et)});t(ue,Ce)},ee=()=>{le&&(t(ue,M.filter(ie=>ie.id!==le)),_e(null)),ae(null)},Y=new Date,me=(Y.getHours()*60+Y.getMinutes())/60*yi;return w.jsxs("div",{className:"daily-view",children:[w.jsxs("div",{className:"daily-header",children:[w.jsx("button",{className:"daily-back",onClick:i,children:" Month"}),w.jsxs("div",{className:"daily-date-info",children:[w.jsx("span",{className:"daily-day-name",children:q0[ue]}),w.jsxs("span",{className:"daily-date-str",children:[ld(r),N?" (today)":""]})]}),e&&w.jsx("span",{className:"daily-plan-badge",style:{borderColor:e.color,color:e.color},children:e.label})]}),w.jsx("div",{className:"day-selector",children:t_.map((ie,ve)=>w.jsx("button",{className:`day-btn${ie===ue?" active":""}`,onClick:()=>a(aO(r,ie)),children:iP[ve]},ie))}),A&&w.jsxs("div",{className:"prayer-banner",children:[w.jsx("div",{className:"prayer-banner-title",children:"PRAYER TIMES"}),w.jsx("div",{className:"prayer-times-row",children:Object.entries(A).map(([ie,ve])=>w.jsxs("div",{className:"prayer-time-item",children:[w.jsx("span",{className:"prayer-name",children:ie}),w.jsx("span",{className:"prayer-time",children:ve})]},ie))})]}),!e&&w.jsxs("div",{className:"daily-empty",children:["No plan covers this date. Create a plan that includes ",ld(r),"."]}),e&&M.length===0&&w.jsxs("div",{className:"daily-hint",children:["Tap the timeline to add your first block for ",q0[ue],"."]}),w.jsx("div",{className:"timeline-scroll",children:w.jsxs("div",{className:"timeline",ref:Ee,style:{height:24*yi},onClick:J,children:[We.map(ie=>w.jsx("div",{className:"segment-band",style:{top:ie.top,height:ie.height,background:ie.color},children:w.jsx("span",{className:"segment-label",children:ie.label})},ie.id)),tP.map(ie=>w.jsxs("div",{className:"hour-row",style:{top:ie*yi,height:yi},children:[w.jsx("span",{className:"hour-label",children:nO(ie*60)}),w.jsx("div",{className:"hour-line"})]},ie)),N&&w.jsx("div",{className:"now-line",style:{top:me},children:w.jsx("div",{className:"now-dot"})}),Qe.map(ie=>w.jsx(U0,{block:ie,top:ie.top,height:ie.height,isPrayer:!0,onEdit:()=>{},onDelete:()=>{},onTimeChange:()=>{},onResize:()=>{}},ie.id)),V.map(ie=>w.jsx(U0,{block:ie,top:ie.top,height:ie.height,col:ie.col,totalCols:ie.totalCols,isNew:ie.id===le,extraTypeColors:c,onEdit:ve=>{_e(null),ae(ve)},onDelete:Me,onTimeChange:ce,onResize:Te,onToggleTask:k},ie.id))]})}),w.jsx(qO,{sections:g,addSection:v,updateSection:T,deleteSection:S,toggleCollapse:R,addItem:x,updateItem:C,deleteItem:z}),Q&&w.jsx(UO,{block:Q,segments:D,customTypes:l,customTypeColors:c,onAddCustomType:d,onRemoveCustomType:p,onSave:Ve,onDelete:Me,onClose:ee},Q.id+Q.time+(Q.duration||0))]})}function rP(r){const e=JSON.parse(r);if(Array.isArray(e))return{plans:e.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:[],pipelines:[]};if(e&&Array.isArray(e.plans))return{plans:e.plans.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:Array.isArray(e.customTypes)?e.customTypes:[],pipelines:Array.isArray(e.pipelines)?e.pipelines:[]};throw new Error("Unrecognized format")}function aP(r,e,t,i=[]){const a=new Set(e.map(d=>d.id)),l=new Set([...yw,...t.map(d=>d.key)]),c=new Set(i.map(d=>d.id));return{newPlans:r.plans.filter(d=>!a.has(d.id)),skippedPlans:r.plans.filter(d=>a.has(d.id)),newTypes:r.customTypes.filter(d=>!l.has(d.key)),skippedTypes:r.customTypes.filter(d=>l.has(d.key)),newPipelines:(r.pipelines||[]).filter(d=>!c.has(d.id)),skippedPipelines:(r.pipelines||[]).filter(d=>c.has(d.id))}}function oP({file:r,existingPlans:e,existingCustomTypes:t,existingPipelines:i=[],onConfirm:a,onClose:l}){const[c,d]=K.useState(null),[p,g]=K.useState(null),[v,T]=K.useState(null),[S,R]=K.useState(new Set),[x,C]=K.useState(new Set),[z,Q]=K.useState(new Set);K.useState(()=>{const A=new FileReader;A.onload=D=>{try{const P=rP(D.target.result);if(P.plans.length===0&&P.customTypes.length===0){d("File contains no data to import.");return}const M=aP(P,e,t,i);g(P),T(M),R(new Set(M.newPlans.map(U=>U.id))),C(new Set(M.newTypes.map(U=>U.key))),Q(new Set(M.newPipelines.map(U=>U.id)))}catch(P){d("Invalid file: "+P.message)}},A.readAsText(r)});const ae=K.useCallback(A=>{R(D=>{const P=new Set(D);return P.has(A)?P.delete(A):P.add(A),P})},[]),le=K.useCallback(A=>{C(D=>{const P=new Set(D);return P.has(A)?P.delete(A):P.add(A),P})},[]),_e=K.useCallback(A=>{Q(D=>{const P=new Set(D);return P.has(A)?P.delete(A):P.add(A),P})},[]),Ee=K.useCallback(()=>{if(!v)return;const A=v.newPlans.filter(M=>S.has(M.id)),D=v.newTypes.filter(M=>x.has(M.key)),P=v.newPipelines.filter(M=>z.has(M.id));a(A,D,P)},[v,S,x,z,a]),ue=S.size+x.size+z.size,N=v&&v.newPlans.length===0&&v.newTypes.length===0&&v.newPipelines.length===0;return w.jsx("div",{className:"modal-overlay",onClick:l,children:w.jsxs("div",{className:"modal",onClick:A=>A.stopPropagation(),style:{maxWidth:440},children:[w.jsx("h3",{className:"modal-title",children:"Import Data"}),c&&w.jsxs(w.Fragment,{children:[w.jsx("p",{style:{color:"#ef4444",fontSize:13,margin:"0 0 16px"},children:c}),w.jsx("div",{className:"modal-actions",children:w.jsx("button",{className:"btn-secondary",onClick:l,children:"Close"})})]}),!c&&!v&&w.jsx("p",{style:{color:"#94a3b8",fontSize:13},children:"Reading file..."}),v&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"import-section",children:[w.jsx("div",{className:"import-section-title",children:"Plans"}),v.newPlans.length>0&&w.jsx("div",{className:"import-items",children:v.newPlans.map(A=>w.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[w.jsx("input",{type:"checkbox",className:"import-check",checked:S.has(A.id),onChange:()=>ae(A.id)}),w.jsx("span",{className:"import-badge import-badge--new",children:"new"}),w.jsx("span",{className:"import-item-label",children:A.label}),A.startDate&&w.jsxs("span",{className:"import-item-date",children:[A.startDate,"  ",A.endDate]})]},A.id))}),v.skippedPlans.length>0&&w.jsx("div",{className:"import-items",children:v.skippedPlans.map(A=>w.jsxs("div",{className:"import-item import-item--disabled",children:[w.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),w.jsx("span",{className:"import-item-label",children:A.label})]},A.id))}),p.plans.length===0&&w.jsx("p",{className:"import-empty",children:"No plans in file"})]}),w.jsxs("div",{className:"import-section",children:[w.jsx("div",{className:"import-section-title",children:"Custom Types"}),v.newTypes.length>0&&w.jsx("div",{className:"import-items",children:v.newTypes.map(A=>w.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[w.jsx("input",{type:"checkbox",className:"import-check",checked:x.has(A.key),onChange:()=>le(A.key)}),w.jsx("span",{className:"import-badge import-badge--new",children:"new"}),w.jsx("span",{className:"import-item-label",children:A.name})]},A.key))}),v.skippedTypes.length>0&&w.jsx("div",{className:"import-items",children:v.skippedTypes.map(A=>w.jsxs("div",{className:"import-item import-item--disabled",children:[w.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),w.jsx("span",{className:"import-item-label",children:A.name||A.key})]},A.key))}),p.customTypes.length===0&&w.jsx("p",{className:"import-empty",children:"No custom types in file"})]}),w.jsxs("div",{className:"import-section",children:[w.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),v.newPipelines.length>0&&w.jsx("div",{className:"import-items",children:v.newPipelines.map(A=>w.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[w.jsx("input",{type:"checkbox",className:"import-check",checked:z.has(A.id),onChange:()=>_e(A.id)}),w.jsx("span",{className:"import-badge import-badge--new",children:"new"}),w.jsx("span",{className:"import-item-label",children:A.title}),w.jsxs("span",{className:"import-item-date",children:[(A.items||[]).length," items"]})]},A.id))}),v.skippedPipelines.length>0&&w.jsx("div",{className:"import-items",children:v.skippedPipelines.map(A=>w.jsxs("div",{className:"import-item import-item--disabled",children:[w.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),w.jsx("span",{className:"import-item-label",children:A.title})]},A.id))}),(p.pipelines||[]).length===0&&w.jsx("p",{className:"import-empty",children:"No pipeline sections in file"})]}),N&&w.jsx("p",{style:{color:"#f59e0b",fontSize:13,marginTop:8},children:"Everything already exists. Nothing to import."}),w.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[w.jsx("button",{className:"btn-secondary",onClick:l,children:"Cancel"}),!N&&w.jsxs("button",{className:"btn-primary",onClick:Ee,disabled:ue===0,children:["Import",ue>0?` ${ue} item${ue!==1?"s":""}`:""]})]})]})]})})}function lP({plans:r,customTypes:e,pipelineSections:t=[],onClose:i}){const[a,l]=K.useState(()=>new Set(r.map(C=>C.id))),[c,d]=K.useState(()=>new Set(e.map(C=>C.key))),[p,g]=K.useState(()=>new Set(t.map(C=>C.id))),v=K.useCallback(C=>{l(z=>{const Q=new Set(z);return Q.has(C)?Q.delete(C):Q.add(C),Q})},[]),T=K.useCallback(C=>{d(z=>{const Q=new Set(z);return Q.has(C)?Q.delete(C):Q.add(C),Q})},[]),S=K.useCallback(C=>{g(z=>{const Q=new Set(z);return Q.has(C)?Q.delete(C):Q.add(C),Q})},[]),R=a.size+c.size+p.size,x=K.useCallback(()=>{const C=r.filter(ue=>a.has(ue.id)),z=e.filter(ue=>c.has(ue.key)).map(ue=>({key:ue.key,name:ue.name})),Q=t.filter(ue=>p.has(ue.id)),ae={version:2,plans:C,customTypes:z,pipelines:Q},le=new Blob([JSON.stringify(ae,null,2)],{type:"application/json"}),_e=URL.createObjectURL(le),Ee=document.createElement("a");Ee.href=_e,Ee.download="entrypoint-v2-plans.json",Ee.click(),URL.revokeObjectURL(_e),i()},[r,e,t,a,c,p,i]);return w.jsx("div",{className:"modal-overlay",onClick:i,children:w.jsxs("div",{className:"modal",onClick:C=>C.stopPropagation(),style:{maxWidth:440},children:[w.jsx("h3",{className:"modal-title",children:"Export Data"}),w.jsxs("div",{className:"import-section",children:[w.jsx("div",{className:"import-section-title",children:"Plans"}),r.length>0?w.jsx("div",{className:"import-items",children:r.map(C=>w.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[w.jsx("input",{type:"checkbox",className:"import-check",checked:a.has(C.id),onChange:()=>v(C.id)}),w.jsx("span",{className:"import-item-label",children:C.label}),C.startDate&&w.jsxs("span",{className:"import-item-date",children:[C.startDate,"  ",C.endDate]})]},C.id))}):w.jsx("p",{className:"import-empty",children:"No plans to export"})]}),w.jsxs("div",{className:"import-section",children:[w.jsx("div",{className:"import-section-title",children:"Custom Types"}),e.length>0?w.jsx("div",{className:"import-items",children:e.map(C=>w.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[w.jsx("input",{type:"checkbox",className:"import-check",checked:c.has(C.key),onChange:()=>T(C.key)}),w.jsx("span",{className:"import-item-label",children:C.name})]},C.key))}):w.jsx("p",{className:"import-empty",children:"No custom types to export"})]}),w.jsxs("div",{className:"import-section",children:[w.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),t.length>0?w.jsx("div",{className:"import-items",children:t.map(C=>w.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[w.jsx("input",{type:"checkbox",className:"import-check",checked:p.has(C.id),onChange:()=>S(C.id)}),w.jsx("span",{className:"import-item-label",children:C.title}),w.jsxs("span",{className:"import-item-date",children:[(C.items||[]).length," items"]})]},C.id))}):w.jsx("p",{className:"import-empty",children:"No pipeline sections to export"})]}),w.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[w.jsx("button",{className:"btn-secondary",onClick:i,children:"Cancel"}),w.jsxs("button",{className:"btn-primary",onClick:x,disabled:R===0,children:["Export",R>0?` ${R} item${R!==1?"s":""}`:""]})]})]})})}function F0(){const r=e_(),e=(r==null?void 0:r.user)||null,t=(r==null?void 0:r.logout)||null,{plans:i,loading:a,activePlan:l,activePlanId:c,setActivePlanId:d,createPlan:p,updatePlan:g,deletePlan:v,updateRoutineBlocks:T,getPlanForDate:S,mergePlans:R}=vO((e==null?void 0:e.uid)||null),{selectedDate:x,setSelectedDate:C,today:z,viewYear:Q,viewMonth:ae,prevMonth:le,nextMonth:_e,setViewYearMonth:Ee}=IO(),{customTypes:ue,customTypeColors:N,addCustomType:A,removeCustomType:D,mergeCustomTypes:P}=xO(),{sections:M,addSection:U,updateSection:V,deleteSection:Qe,reorderSections:We,toggleCollapse:J,addItem:ce,updateItem:Te,deleteItem:Ve,mergeSections:Me}=AO((e==null?void 0:e.uid)||null),k=K.useRef(null),[ee,Y]=K.useState(null),[oe,me]=K.useState(!1),[se,pe]=K.useState("daily"),[ie,ve]=K.useState(null),[Ce,je]=K.useState(null),[Et,Fn]=K.useState(!1),yn=K.useCallback((Ge,Ye,Cn)=>{Ge.length>0&&R(Ge),Ye.length>0&&P(Ye),Cn&&Cn.length>0&&Me(Cn),je(null)},[R,P,Me]),Wi=K.useCallback(Ge=>{if(!Ge.startDate)return;d(Ge.id),C(Ge.startDate);const Ye=new Date(Ge.startDate+"T00:00:00");Ee(Ye.getFullYear(),Ye.getMonth()),ve(Ge.startDate),setTimeout(()=>ve(null),1500)},[Ee,C,d]),Zi=K.useCallback(Ge=>{const Ye=i.find(Cn=>Cn.id===Ge);Ye!=null&&Ye.startDate?Wi(Ye):d(Ge)},[i,Wi,d]),Vs=K.useCallback(Ge=>{C(Ge);const Ye=S(Ge);Ye&&d(Ye.id),pe("daily")},[C,S,d]),zr=K.useCallback(Ge=>{C(Ge);const Ye=S(Ge);Ye&&d(Ye.id)},[C,S,d]),St=K.useCallback(()=>{pe("calendar")},[]),gt=S(x),Rn=l&&(gt==null?void 0:gt.id)===l.id?l:gt,Rl=K.useCallback((Ge,Ye)=>{Rn&&T(Rn.id,Ge,Ye)},[Rn,T]);return a?w.jsx("div",{className:"loading",children:"loading plans..."}):w.jsxs("div",{className:"app",children:[w.jsxs("header",{className:"app-header",children:[w.jsxs("div",{children:[w.jsx("div",{className:"header-subtitle",children:"ENTRYPOINT V2"}),w.jsx("h1",{className:"header-title",children:"Lock-In"}),w.jsx("div",{className:"header-quote",children:'"While enjoying every single day on the way."'})]}),w.jsxs("div",{className:"header-actions",children:[w.jsx("button",{className:"header-btn",onClick:()=>Fn(!0),title:"Export",children:"Export"}),w.jsx("button",{className:"header-btn",onClick:()=>{var Ge;return(Ge=k.current)==null?void 0:Ge.click()},title:"Import",children:"Import"}),w.jsx("input",{ref:k,type:"file",accept:".json",hidden:!0,onChange:Ge=>{Ge.target.files[0]&&je(Ge.target.files[0]),Ge.target.value=""}}),t&&w.jsx("button",{className:"logout-btn",onClick:t,children:"Logout"})]})]}),w.jsx(VO,{plans:i,activePlanId:l==null?void 0:l.id,onSelect:Zi,onCreate:()=>me(!0),onEdit:Y,onDelete:v}),se==="calendar"?w.jsx(kO,{viewYear:Q,viewMonth:ae,selectedDate:x,today:z,plans:i,highlightDate:ie,onPrevMonth:le,onNextMonth:_e,onGoToday:()=>Vs(z),onSelectDate:Vs,onPlanClick:Wi}):w.jsx(sP,{date:x,plan:Rn,onUpdateBlocks:Rl,onSelectDate:zr,onMonth:St,customTypes:ue,customTypeColors:N,onAddCustomType:A,onRemoveCustomType:D,pipelineSections:M,onAddSection:U,onUpdateSection:V,onDeleteSection:Qe,onToggleCollapse:J,onAddItem:ce,onUpdateItem:Te,onDeleteItem:Ve}),oe&&w.jsx(k0,{plan:null,plans:i,onSave:Ge=>{p(Ge),me(!1)},onClose:()=>me(!1)}),ee&&w.jsx(k0,{plan:ee,plans:i,onSave:Ge=>{g(ee.id,Ge),Y(null)},onClose:()=>Y(null)}),Et&&w.jsx(lP,{plans:i,customTypes:ue,pipelineSections:M,onClose:()=>Fn(!1)}),Ce&&w.jsx(oP,{file:Ce,existingPlans:i,existingCustomTypes:ue,existingPipelines:M,onConfirm:yn,onClose:()=>je(null)})]})}cR.createRoot(document.getElementById("root")).render(w.jsx(K.StrictMode,{children:gl?w.jsx(JM,{children:w.jsx(ZM,{children:w.jsx(F0,{})})}):w.jsx(F0,{})}));
