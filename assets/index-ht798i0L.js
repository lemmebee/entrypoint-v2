(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();var Cp={exports:{}},Cu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gE;function H1(){if(gE)return Cu;gE=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Cu.Fragment=t,Cu.jsx=e,Cu.jsxs=e,Cu}var yE;function G1(){return yE||(yE=1,Cp.exports=H1()),Cp.exports}var I=G1(),Dp={exports:{}},Vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function K1(){if(_E)return Vt;_E=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function R(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,z={};function Q(k,et,Y){this.props=k,this.context=et,this.refs=z,this.updater=Y||V}Q.prototype.isReactComponent={},Q.prototype.setState=function(k,et){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,et,"setState")},Q.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function at(){}at.prototype=Q.prototype;function rt(k,et,Y){this.props=k,this.context=et,this.refs=z,this.updater=Y||V}var mt=rt.prototype=new at;mt.constructor=rt,C(mt,Q.prototype),mt.isPureReactComponent=!0;var _t=Array.isArray;function ft(){}var D={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(k,et,Y){var ot=Y.ref;return{$$typeof:r,type:k,key:et,ref:ot!==void 0?ot:null,props:Y}}function M(k,et){return N(k.type,et,k.props)}function O(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function U(k){var et={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(Y){return et[Y]})}var x=/\/+/g;function Yt(k,et){return typeof k=="object"&&k!==null&&k.key!=null?U(""+k.key):et.toString(36)}function Zt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ft,ft):(k.status="pending",k.then(function(et){k.status==="pending"&&(k.status="fulfilled",k.value=et)},function(et){k.status==="pending"&&(k.status="rejected",k.reason=et)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function J(k,et,Y,ot,dt){var bt=typeof k;(bt==="undefined"||bt==="boolean")&&(k=null);var Mt=!1;if(k===null)Mt=!0;else switch(bt){case"bigint":case"string":case"number":Mt=!0;break;case"object":switch(k.$$typeof){case r:case t:Mt=!0;break;case T:return Mt=k._init,J(Mt(k._payload),et,Y,ot,dt)}}if(Mt)return dt=dt(k),Mt=ot===""?"."+Yt(k,0):ot,_t(dt)?(Y="",Mt!=null&&(Y=Mt.replace(x,"$&/")+"/"),J(dt,et,Y,"",function(Z){return Z})):dt!=null&&(O(dt)&&(dt=M(dt,Y+(dt.key==null||k&&k.key===dt.key?"":(""+dt.key).replace(x,"$&/")+"/")+Mt)),et.push(dt)),1;Mt=0;var ee=ot===""?".":ot+":";if(_t(k))for(var jt=0;jt<k.length;jt++)ot=k[jt],bt=ee+Yt(ot,jt),Mt+=J(ot,et,Y,bt,dt);else if(jt=R(k),typeof jt=="function")for(k=jt.call(k),jt=0;!(ot=k.next()).done;)ot=ot.value,bt=ee+Yt(ot,jt++),Mt+=J(ot,et,Y,bt,dt);else if(bt==="object"){if(typeof k.then=="function")return J(Zt(k),et,Y,ot,dt);throw et=String(k),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return Mt}function lt(k,et,Y){if(k==null)return k;var ot=[],dt=0;return J(k,ot,"","",function(bt){return et.call(Y,bt,dt++)}),ot}function Tt(k){if(k._status===-1){var et=k._result;et=et(),et.then(function(Y){(k._status===0||k._status===-1)&&(k._status=1,k._result=Y)},function(Y){(k._status===0||k._status===-1)&&(k._status=2,k._result=Y)}),k._status===-1&&(k._status=0,k._result=et)}if(k._status===1)return k._result.default;throw k._result}var xt=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Ut={map:lt,forEach:function(k,et,Y){lt(k,function(){et.apply(this,arguments)},Y)},count:function(k){var et=0;return lt(k,function(){et++}),et},toArray:function(k){return lt(k,function(et){return et})||[]},only:function(k){if(!O(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Vt.Activity=E,Vt.Children=Ut,Vt.Component=Q,Vt.Fragment=e,Vt.Profiler=a,Vt.PureComponent=rt,Vt.StrictMode=i,Vt.Suspense=p,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Vt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},Vt.cache=function(k){return function(){return k.apply(null,arguments)}},Vt.cacheSignal=function(){return null},Vt.cloneElement=function(k,et,Y){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ot=C({},k.props),dt=k.key;if(et!=null)for(bt in et.key!==void 0&&(dt=""+et.key),et)!A.call(et,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&et.ref===void 0||(ot[bt]=et[bt]);var bt=arguments.length-2;if(bt===1)ot.children=Y;else if(1<bt){for(var Mt=Array(bt),ee=0;ee<bt;ee++)Mt[ee]=arguments[ee+2];ot.children=Mt}return N(k.type,dt,ot)},Vt.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Vt.createElement=function(k,et,Y){var ot,dt={},bt=null;if(et!=null)for(ot in et.key!==void 0&&(bt=""+et.key),et)A.call(et,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(dt[ot]=et[ot]);var Mt=arguments.length-2;if(Mt===1)dt.children=Y;else if(1<Mt){for(var ee=Array(Mt),jt=0;jt<Mt;jt++)ee[jt]=arguments[jt+2];dt.children=ee}if(k&&k.defaultProps)for(ot in Mt=k.defaultProps,Mt)dt[ot]===void 0&&(dt[ot]=Mt[ot]);return N(k,bt,dt)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(k){return{$$typeof:m,render:k}},Vt.isValidElement=O,Vt.lazy=function(k){return{$$typeof:T,_payload:{_status:-1,_result:k},_init:Tt}},Vt.memo=function(k,et){return{$$typeof:g,type:k,compare:et===void 0?null:et}},Vt.startTransition=function(k){var et=D.T,Y={};D.T=Y;try{var ot=k(),dt=D.S;dt!==null&&dt(Y,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(ft,xt)}catch(bt){xt(bt)}finally{et!==null&&Y.types!==null&&(et.types=Y.types),D.T=et}},Vt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Vt.use=function(k){return D.H.use(k)},Vt.useActionState=function(k,et,Y){return D.H.useActionState(k,et,Y)},Vt.useCallback=function(k,et){return D.H.useCallback(k,et)},Vt.useContext=function(k){return D.H.useContext(k)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(k,et){return D.H.useDeferredValue(k,et)},Vt.useEffect=function(k,et){return D.H.useEffect(k,et)},Vt.useEffectEvent=function(k){return D.H.useEffectEvent(k)},Vt.useId=function(){return D.H.useId()},Vt.useImperativeHandle=function(k,et,Y){return D.H.useImperativeHandle(k,et,Y)},Vt.useInsertionEffect=function(k,et){return D.H.useInsertionEffect(k,et)},Vt.useLayoutEffect=function(k,et){return D.H.useLayoutEffect(k,et)},Vt.useMemo=function(k,et){return D.H.useMemo(k,et)},Vt.useOptimistic=function(k,et){return D.H.useOptimistic(k,et)},Vt.useReducer=function(k,et,Y){return D.H.useReducer(k,et,Y)},Vt.useRef=function(k){return D.H.useRef(k)},Vt.useState=function(k){return D.H.useState(k)},Vt.useSyncExternalStore=function(k,et,Y){return D.H.useSyncExternalStore(k,et,Y)},Vt.useTransition=function(){return D.H.useTransition()},Vt.version="19.2.4",Vt}var vE;function zg(){return vE||(vE=1,Dp.exports=K1()),Dp.exports}var G=zg(),Np={exports:{}},Du={},xp={exports:{}},Vp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function Q1(){return TE||(TE=1,(function(r){function t(J,lt){var Tt=J.length;J.push(lt);t:for(;0<Tt;){var xt=Tt-1>>>1,Ut=J[xt];if(0<a(Ut,lt))J[xt]=lt,J[Tt]=Ut,Tt=xt;else break t}}function e(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var lt=J[0],Tt=J.pop();if(Tt!==lt){J[0]=Tt;t:for(var xt=0,Ut=J.length,k=Ut>>>1;xt<k;){var et=2*(xt+1)-1,Y=J[et],ot=et+1,dt=J[ot];if(0>a(Y,Tt))ot<Ut&&0>a(dt,Y)?(J[xt]=dt,J[ot]=Tt,xt=ot):(J[xt]=Y,J[et]=Tt,xt=et);else if(ot<Ut&&0>a(dt,Tt))J[xt]=dt,J[ot]=Tt,xt=ot;else break t}}return lt}function a(J,lt){var Tt=J.sortIndex-lt.sortIndex;return Tt!==0?Tt:J.id-lt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,m=c.now();r.unstable_now=function(){return c.now()-m}}var p=[],g=[],T=1,E=null,S=3,R=!1,V=!1,C=!1,z=!1,Q=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,rt=typeof setImmediate<"u"?setImmediate:null;function mt(J){for(var lt=e(g);lt!==null;){if(lt.callback===null)i(g);else if(lt.startTime<=J)i(g),lt.sortIndex=lt.expirationTime,t(p,lt);else break;lt=e(g)}}function _t(J){if(C=!1,mt(J),!V)if(e(p)!==null)V=!0,ft||(ft=!0,U());else{var lt=e(g);lt!==null&&Zt(_t,lt.startTime-J)}}var ft=!1,D=-1,A=5,N=-1;function M(){return z?!0:!(r.unstable_now()-N<A)}function O(){if(z=!1,ft){var J=r.unstable_now();N=J;var lt=!0;try{t:{V=!1,C&&(C=!1,at(D),D=-1),R=!0;var Tt=S;try{e:{for(mt(J),E=e(p);E!==null&&!(E.expirationTime>J&&M());){var xt=E.callback;if(typeof xt=="function"){E.callback=null,S=E.priorityLevel;var Ut=xt(E.expirationTime<=J);if(J=r.unstable_now(),typeof Ut=="function"){E.callback=Ut,mt(J),lt=!0;break e}E===e(p)&&i(p),mt(J)}else i(p);E=e(p)}if(E!==null)lt=!0;else{var k=e(g);k!==null&&Zt(_t,k.startTime-J),lt=!1}}break t}finally{E=null,S=Tt,R=!1}lt=void 0}}finally{lt?U():ft=!1}}}var U;if(typeof rt=="function")U=function(){rt(O)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Yt=x.port2;x.port1.onmessage=O,U=function(){Yt.postMessage(null)}}else U=function(){Q(O,0)};function Zt(J,lt){D=Q(function(){J(r.unstable_now())},lt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(J){switch(S){case 1:case 2:case 3:var lt=3;break;default:lt=S}var Tt=S;S=lt;try{return J()}finally{S=Tt}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(J,lt){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Tt=S;S=J;try{return lt()}finally{S=Tt}},r.unstable_scheduleCallback=function(J,lt,Tt){var xt=r.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?xt+Tt:xt):Tt=xt,J){case 1:var Ut=-1;break;case 2:Ut=250;break;case 5:Ut=1073741823;break;case 4:Ut=1e4;break;default:Ut=5e3}return Ut=Tt+Ut,J={id:T++,callback:lt,priorityLevel:J,startTime:Tt,expirationTime:Ut,sortIndex:-1},Tt>xt?(J.sortIndex=Tt,t(g,J),e(p)===null&&J===e(g)&&(C?(at(D),D=-1):C=!0,Zt(_t,Tt-xt))):(J.sortIndex=Ut,t(p,J),V||R||(V=!0,ft||(ft=!0,U()))),J},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(J){var lt=S;return function(){var Tt=S;S=lt;try{return J.apply(this,arguments)}finally{S=Tt}}}})(Vp)),Vp}var EE;function Y1(){return EE||(EE=1,xp.exports=Q1()),xp.exports}var Mp={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function $1(){if(SE)return fn;SE=1;var r=zg();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:p,containerInfo:g,implementation:T}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,fn.createPortal=function(p,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(p,g,null,T)},fn.flushSync=function(p){var g=c.T,T=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=T,i.d.f()}},fn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},fn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},fn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var T=g.as,E=m(T,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):T==="script"&&i.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},fn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=m(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},fn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,E=m(T,g.crossOrigin);i.d.L(p,T,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},fn.preloadModule=function(p,g){if(typeof p=="string")if(g){var T=m(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},fn.requestFormReset=function(p){i.d.r(p)},fn.unstable_batchedUpdates=function(p,g){return p(g)},fn.useFormState=function(p,g,T){return c.H.useFormState(p,g,T)},fn.useFormStatus=function(){return c.H.useHostTransitionStatus()},fn.version="19.2.4",fn}var bE;function X1(){if(bE)return Mp.exports;bE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Mp.exports=$1(),Mp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE;function J1(){if(AE)return Du;AE=1;var r=Y1(),t=zg(),e=X1();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var d=f.alternate;if(d===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===o)return p(f),n;if(d===u)return p(f),s;d=d.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=d;else{for(var _=!1,b=f.child;b;){if(b===o){_=!0,o=f,u=d;break}if(b===u){_=!0,u=f,o=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===o){_=!0,o=d,u=f;break}if(b===u){_=!0,u=d,o=f;break}b=b.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function T(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=T(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),at=Symbol.for("react.consumer"),rt=Symbol.for("react.context"),mt=Symbol.for("react.forward_ref"),_t=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function Yt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case Q:return"Profiler";case z:return"StrictMode";case _t:return"Suspense";case ft:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case rt:return n.displayName||"Context";case at:return(n._context.displayName||"Context")+".Consumer";case mt:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return s=n.displayName||null,s!==null?s:Yt(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return Yt(n(s))}catch{}}return null}var Zt=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},xt=[],Ut=-1;function k(n){return{current:n}}function et(n){0>Ut||(n.current=xt[Ut],xt[Ut]=null,Ut--)}function Y(n,s){Ut++,xt[Ut]=n.current,n.current=s}var ot=k(null),dt=k(null),bt=k(null),Mt=k(null);function ee(n,s){switch(Y(bt,s),Y(dt,n),Y(ot,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?zT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=zT(s),n=jT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}et(ot),Y(ot,n)}function jt(){et(ot),et(dt),et(bt)}function Z(n){n.memoizedState!==null&&Y(Mt,n);var s=ot.current,o=jT(s,n.type);s!==o&&(Y(dt,n),Y(ot,o))}function pt(n){dt.current===n&&(et(ot),et(dt)),Mt.current===n&&(et(Mt),Au._currentValue=Tt)}var wt,kt;function Ct(n){if(wt===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);wt=s&&s[1]||"",kt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+n+kt}var Xt=!1;function ke(n,s){if(!n||Xt)return"";Xt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(X){var K=X}Reflect.construct(n,[],it)}else{try{it.call()}catch(X){K=X}n.call(it.prototype)}}else{try{throw Error()}catch(X){K=X}(it=n())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=u.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var P=_.split(`
`),H=b.split(`
`);for(f=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===P.length||f===H.length)for(u=P.length-1,f=H.length-1;1<=u&&0<=f&&P[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(P[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||P[u]!==H[f]){var tt=`
`+P[u].replace(" at new "," at ");return n.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",n.displayName)),tt}while(1<=u&&0<=f);break}}}finally{Xt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ct(o):""}function ss(n,s){switch(n.tag){case 26:case 27:case 5:return Ct(n.type);case 16:return Ct("Lazy");case 13:return n.child!==s&&s!==null?Ct("Suspense Fallback"):Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 15:return ke(n.type,!1);case 11:return ke(n.type.render,!1);case 1:return ke(n.type,!0);case 31:return Ct("Activity");default:return""}}function zr(n){try{var s="",o=null;do s+=ss(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Se=Object.prototype.hasOwnProperty,Ce=r.unstable_scheduleCallback,Hn=r.unstable_cancelCallback,Cl=r.unstable_shouldYield,jr=r.unstable_requestPaint,sn=r.unstable_now,rs=r.unstable_getCurrentPriorityLevel,Si=r.unstable_ImmediatePriority,bi=r.unstable_UserBlockingPriority,Ai=r.unstable_NormalPriority,Ft=r.unstable_LowPriority,be=r.unstable_IdlePriority,Ii=r.log,Mc=r.unstable_setDisableYieldValue,ri=null,rn=null;function Gn(n){if(typeof Ii=="function"&&Mc(n),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(ri,n)}catch{}}var De=Math.clz32?Math.clz32:Pc,Oc=Math.log,Ha=Math.LN2;function Pc(n){return n>>>=0,n===0?32:31-(Oc(n)/Ha|0)|0}var wi=256,Br=262144,Le=4194304;function Ri(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ci(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~d,u!==0?f=Ri(u):(_&=b,_!==0?f=Ri(_):o||(o=b&~n,o!==0&&(f=Ri(o))))):(b=u&~d,b!==0?f=Ri(b):_!==0?f=Ri(_):o||(o=u&~n,o!==0&&(f=Ri(o)))),f===0?0:s!==0&&s!==f&&(s&d)===0&&(d=f&-f,o=s&-s,d>=o||d===32&&(o&4194048)!==0)?s:f}function ai(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Vd(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kc(){var n=Le;return Le<<=1,(Le&62914560)===0&&(Le=4194304),n}function Di(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function qr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Md(n,s,o,u,f,d){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var b=n.entanglements,P=n.expirationTimes,H=n.hiddenUpdates;for(o=_&~o;0<o;){var tt=31-De(o),it=1<<tt;b[tt]=0,P[tt]=-1;var K=H[tt];if(K!==null)for(H[tt]=null,tt=0;tt<K.length;tt++){var X=K[tt];X!==null&&(X.lane&=-536870913)}o&=~it}u!==0&&Fr(n,u,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~s))}function Fr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-De(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Dl(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-De(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Nl(n,s){var o=s&-s;return o=(o&42)!==0?1:Hr(o),(o&(n.suspendedLanes|s))!==0?0:o}function Hr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function as(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Lc(){var n=lt.p;return n!==0?n:(n=window.event,n===void 0?32:uE(n.type))}function oi(n,s){var o=lt.p;try{return lt.p=n,s()}finally{lt.p=o}}var li=Math.random().toString(36).slice(2),Ue="__reactFiber$"+li,Ze="__reactProps$"+li,Ni="__reactContainer$"+li,Ga="__reactEvents$"+li,Od="__reactListeners$"+li,Uc="__reactHandles$"+li,zc="__reactResources$"+li,xi="__reactMarker$"+li;function Ka(n){delete n[Ue],delete n[Ze],delete n[Ga],delete n[Od],delete n[Uc]}function Vi(n){var s=n[Ue];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ni]||o[Ue]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=QT(n);n!==null;){if(o=n[Ue])return o;n=QT(n)}return s}n=o,o=n.parentNode}return null}function Kn(n){if(n=n[Ue]||n[Ni]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function xn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Mi(n){var s=n[zc];return s||(s=n[zc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ze(n){n[xi]=!0}var xl=new Set,Vl={};function Oi(n,s){Pi(n,s),Pi(n+"Capture",s)}function Pi(n,s){for(Vl[n]=s,n=0;n<s.length;n++)xl.add(s[n])}var Ml=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ol={},Pl={};function jc(n){return Se.call(Pl,n)?!0:Se.call(Ol,n)?!1:Ml.test(n)?Pl[n]=!0:(Ol[n]=!0,!1)}function Qa(n,s,o){if(jc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Vn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function je(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function We(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ls(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function kl(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,d=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,d.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function re(n){if(!n._valueTracker){var s=Ls(n)?"checked":"value";n._valueTracker=kl(n,s,""+n[s])}}function Gr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Ls(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function ki(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Kr=/[\n"\\]/g;function Sn(n){return n.replace(Kr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ya(n,s,o,u,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+We(s)):n.value!==""+We(s)&&(n.value=""+We(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?Ll(n,_,We(s)):o!=null?Ll(n,_,We(o)):u!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+We(b):n.removeAttribute("name")}function Bc(n,s,o,u,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),s!=null||o!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){re(n);return}o=o!=null?""+We(o):"",s=s!=null?""+We(s):o,b||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),re(n)}function Ll(n,s,o){s==="number"&&ki(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Us(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+We(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function qc(n,s,o){if(s!=null&&(s=""+We(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+We(o):""}function zs(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Zt(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=We(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),re(n)}function bn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Fc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ul(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||Fc.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function zl(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Ul(n,f,u)}else for(var d in s)s.hasOwnProperty(d)&&Ul(n,d,s[d])}function $a(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(n){return js.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ui(){}var jl=null;function Qn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Bs=null,Li=null;function Qr(n){var s=Kn(n);if(s&&(n=s.stateNode)){var o=n[Ze]||null;t:switch(n=s.stateNode,s.type){case"input":if(Ya(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Sn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Ze]||null;if(!f)throw Error(i(90));Ya(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Gr(u)}break t;case"textarea":qc(n,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Us(n,!!o.multiple,s,!1)}}}var Ja=!1;function qs(n,s,o){if(Ja)return n(s,o);Ja=!0;try{var u=n(s);return u}finally{if(Ja=!1,(Bs!==null||Li!==null)&&(Lh(),Bs&&(s=Bs,n=Li,Li=Bs=null,Qr(s),n)))for(s=0;s<n.length;s++)Qr(n[s])}}function ci(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Ze]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yr=!1;if(Yn)try{var he={};Object.defineProperty(he,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",he,he),window.removeEventListener("test",he,he)}catch{Yr=!1}var Ui=null,Bl=null,$r=null;function ql(){if($r)return $r;var n,s=Bl,o=s.length,u,f="value"in Ui?Ui.value:Ui.textContent,d=f.length;for(n=0;n<o&&s[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&s[o-u]===f[d-u];u++);return $r=f.slice(n,1<u?1-u:void 0)}function Xr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function os(){return!0}function hi(){return!1}function an(n){function s(o,u,f,d,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(o=n[b],this[b]=o?o(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?os:hi,this.isPropagationStopped=hi,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),s}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zi=an(ls),Fs=E({},ls,{view:0,detail:0}),Fl=an(Fs),Hs,Za,ji,Wa=E({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ji&&(ji&&n.type==="mousemove"?(Hs=n.screenX-ji.screenX,Za=n.screenY-ji.screenY):Za=Hs=0,ji=n),Hs)},movementY:function(n){return"movementY"in n?n.movementY:Za}}),Hl=an(Wa),Jr=E({},Wa,{dataTransfer:0}),Gc=an(Jr),Kc=E({},Fs,{relatedTarget:0}),Zr=an(Kc),Gl=E({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Qc=an(Gl),to=E({},ls,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Yc=an(to),$c=E({},ls,{data:0}),Bi=an($c),Xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wc(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Zc[n])?!!s[n]:!1}function Gs(){return Wc}var _n=E({},Fs,{key:function(n){if(n.key){var s=Xc[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Xr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Jc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(n){return n.type==="keypress"?Xr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),th=an(_n),eh=E({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),us=an(eh),h=E({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),y=an(h),v=E({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=an(v),q=E({},Wa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$=an(q),ct=E({},ls,{newState:0,oldState:0}),Ot=an(ct),Ne=[9,13,27,32],ne=Yn&&"CompositionEvent"in window,ve=null;Yn&&"documentMode"in document&&(ve=document.documentMode);var $n=Yn&&"TextEvent"in window&&!ve,qi=Yn&&(!ne||ve&&8<ve&&11>=ve),fi=" ",di=!1;function Wr(n,s){switch(n){case"keyup":return Ne.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var no=!1;function mw(n,s){switch(n){case"compositionend":return eo(s);case"keypress":return s.which!==32?null:(di=!0,fi);case"textInput":return n=s.data,n===fi&&di?null:n;default:return null}}function pw(n,s){if(no)return n==="compositionend"||!ne&&Wr(n,s)?(n=ql(),$r=Bl=Ui=null,no=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return qi&&s.locale!=="ko"?null:s.data;default:return null}}var gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!gw[n.type]:s==="textarea"}function Jy(n,s,o,u){Bs?Li?Li.push(u):Li=[u]:Bs=u,s=Hh(s,"onChange"),0<s.length&&(o=new zi("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Kl=null,Ql=null;function yw(n){MT(n,0)}function nh(n){var s=xn(n);if(Gr(s))return n}function Zy(n,s){if(n==="change")return s}var Wy=!1;if(Yn){var Pd;if(Yn){var kd="oninput"in document;if(!kd){var t_=document.createElement("div");t_.setAttribute("oninput","return;"),kd=typeof t_.oninput=="function"}Pd=kd}else Pd=!1;Wy=Pd&&(!document.documentMode||9<document.documentMode)}function e_(){Kl&&(Kl.detachEvent("onpropertychange",n_),Ql=Kl=null)}function n_(n){if(n.propertyName==="value"&&nh(Ql)){var s=[];Jy(s,Ql,n,Qn(n)),qs(yw,s)}}function _w(n,s,o){n==="focusin"?(e_(),Kl=s,Ql=o,Kl.attachEvent("onpropertychange",n_)):n==="focusout"&&e_()}function vw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return nh(Ql)}function Tw(n,s){if(n==="click")return nh(s)}function Ew(n,s){if(n==="input"||n==="change")return nh(s)}function Sw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Mn=typeof Object.is=="function"?Object.is:Sw;function Yl(n,s){if(Mn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Se.call(s,f)||!Mn(n[f],s[f]))return!1}return!0}function i_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function s_(n,s){var o=i_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=i_(o)}}function r_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?r_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function a_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ki(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=ki(n.document)}return s}function Ld(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var bw=Yn&&"documentMode"in document&&11>=document.documentMode,io=null,Ud=null,$l=null,zd=!1;function o_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;zd||io==null||io!==ki(u)||(u=io,"selectionStart"in u&&Ld(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$l&&Yl($l,u)||($l=u,u=Hh(Ud,"onSelect"),0<u.length&&(s=new zi("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=io)))}function ta(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var so={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},jd={},l_={};Yn&&(l_=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ea(n){if(jd[n])return jd[n];if(!so[n])return n;var s=so[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in l_)return jd[n]=s[o];return n}var u_=ea("animationend"),c_=ea("animationiteration"),h_=ea("animationstart"),Aw=ea("transitionrun"),Iw=ea("transitionstart"),ww=ea("transitioncancel"),f_=ea("transitionend"),d_=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function mi(n,s){d_.set(n,s),Oi(s,[n])}var ih=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Xn=[],ro=0,qd=0;function sh(){for(var n=ro,s=qd=ro=0;s<n;){var o=Xn[s];Xn[s++]=null;var u=Xn[s];Xn[s++]=null;var f=Xn[s];Xn[s++]=null;var d=Xn[s];if(Xn[s++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}d!==0&&m_(o,f,d)}}function rh(n,s,o,u){Xn[ro++]=n,Xn[ro++]=s,Xn[ro++]=o,Xn[ro++]=u,qd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Fd(n,s,o,u){return rh(n,s,o,u),ah(n)}function na(n,s){return rh(n,null,null,s),ah(n)}function m_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,d=n.return;d!==null;)d.childLanes|=o,u=d.alternate,u!==null&&(u.childLanes|=o),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&s!==null&&(f=31-De(o),n=d.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),d):null}function ah(n){if(50<yu)throw yu=0,Zm=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ao={};function Rw(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(n,s,o,u){return new Rw(n,s,o,u)}function Hd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cs(n,s){var o=n.alternate;return o===null?(o=On(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function p_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function oh(n,s,o,u,f,d){var _=0;if(u=n,typeof n=="function")Hd(n)&&(_=1);else if(typeof n=="string")_=V1(n,o,ot.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case N:return n=On(31,o,s,f),n.elementType=N,n.lanes=d,n;case C:return ia(o.children,f,d,s);case z:_=8,f|=24;break;case Q:return n=On(12,o,s,f|2),n.elementType=Q,n.lanes=d,n;case _t:return n=On(13,o,s,f),n.elementType=_t,n.lanes=d,n;case ft:return n=On(19,o,s,f),n.elementType=ft,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case rt:_=10;break t;case at:_=9;break t;case mt:_=11;break t;case D:_=14;break t;case A:_=16,u=null;break t}_=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=On(_,o,s,f),s.elementType=n,s.type=u,s.lanes=d,s}function ia(n,s,o,u){return n=On(7,n,u,s),n.lanes=o,n}function Gd(n,s,o){return n=On(6,n,null,s),n.lanes=o,n}function g_(n){var s=On(18,null,null,0);return s.stateNode=n,s}function Kd(n,s,o){return s=On(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var y_=new WeakMap;function Jn(n,s){if(typeof n=="object"&&n!==null){var o=y_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:zr(s)},y_.set(n,s),s)}return{value:n,source:s,stack:zr(s)}}var oo=[],lo=0,lh=null,Xl=0,Zn=[],Wn=0,Ks=null,Fi=1,Hi="";function hs(n,s){oo[lo++]=Xl,oo[lo++]=lh,lh=n,Xl=s}function __(n,s,o){Zn[Wn++]=Fi,Zn[Wn++]=Hi,Zn[Wn++]=Ks,Ks=n;var u=Fi;n=Hi;var f=32-De(u)-1;u&=~(1<<f),o+=1;var d=32-De(s)+f;if(30<d){var _=f-f%5;d=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Fi=1<<32-De(s)+f|o<<f|u,Hi=d+n}else Fi=1<<d|o<<f|u,Hi=n}function Qd(n){n.return!==null&&(hs(n,1),__(n,1,0))}function Yd(n){for(;n===lh;)lh=oo[--lo],oo[lo]=null,Xl=oo[--lo],oo[lo]=null;for(;n===Ks;)Ks=Zn[--Wn],Zn[Wn]=null,Hi=Zn[--Wn],Zn[Wn]=null,Fi=Zn[--Wn],Zn[Wn]=null}function v_(n,s){Zn[Wn++]=Fi,Zn[Wn++]=Hi,Zn[Wn++]=Ks,Fi=s.id,Hi=s.overflow,Ks=n}var on=null,ye=null,$t=!1,Qs=null,ti=!1,$d=Error(i(519));function Ys(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(Jn(s,n)),$d}function T_(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Ue]=n,s[Ze]=u,o){case"dialog":qt("cancel",s),qt("close",s);break;case"iframe":case"object":case"embed":qt("load",s);break;case"video":case"audio":for(o=0;o<vu.length;o++)qt(vu[o],s);break;case"source":qt("error",s);break;case"img":case"image":case"link":qt("error",s),qt("load",s);break;case"details":qt("toggle",s);break;case"input":qt("invalid",s),Bc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":qt("invalid",s);break;case"textarea":qt("invalid",s),zs(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||LT(s.textContent,o)?(u.popover!=null&&(qt("beforetoggle",s),qt("toggle",s)),u.onScroll!=null&&qt("scroll",s),u.onScrollEnd!=null&&qt("scrollend",s),u.onClick!=null&&(s.onclick=ui),s=!0):s=!1,s||Ys(n,!0)}function E_(n){for(on=n.return;on;)switch(on.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:on=on.return}}function uo(n){if(n!==on)return!1;if(!$t)return E_(n),$t=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||dp(n.type,n.memoizedProps)),o=!o),o&&ye&&Ys(n),E_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ye=KT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ye=KT(n)}else s===27?(s=ye,lr(n.type)?(n=_p,_p=null,ye=n):ye=s):ye=on?ni(n.stateNode.nextSibling):null;return!0}function sa(){ye=on=null,$t=!1}function Xd(){var n=Qs;return n!==null&&(Rn===null?Rn=n:Rn.push.apply(Rn,n),Qs=null),n}function Jl(n){Qs===null?Qs=[n]:Qs.push(n)}var Jd=k(null),ra=null,fs=null;function $s(n,s,o){Y(Jd,s._currentValue),s._currentValue=o}function ds(n){n._currentValue=Jd.current,et(Jd)}function Zd(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Wd(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=f;for(var P=0;P<s.length;P++)if(b.context===s[P]){d.lanes|=o,b=d.alternate,b!==null&&(b.lanes|=o),Zd(d.return,o,n),u||(_=null);break t}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=o,d=_.alternate,d!==null&&(d.lanes|=o),Zd(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function co(n,s,o,u){n=null;for(var f=s,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var b=f.type;Mn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===Mt.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Au):n=[Au])}f=f.return}n!==null&&Wd(s,n,o,u),s.flags|=262144}function uh(n){for(n=n.firstContext;n!==null;){if(!Mn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function aa(n){ra=n,fs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ln(n){return S_(ra,n)}function ch(n,s){return ra===null&&aa(n),S_(n,s)}function S_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},fs===null){if(n===null)throw Error(i(308));fs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else fs=fs.next=s;return o}var Cw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},Dw=r.unstable_scheduleCallback,Nw=r.unstable_NormalPriority,Be={$$typeof:rt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tm(){return{controller:new Cw,data:new Map,refCount:0}}function Zl(n){n.refCount--,n.refCount===0&&Dw(Nw,function(){n.controller.abort()})}var Wl=null,em=0,ho=0,fo=null;function xw(n,s){if(Wl===null){var o=Wl=[];em=0,ho=sp(),fo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return em++,s.then(b_,b_),s}function b_(){if(--em===0&&Wl!==null){fo!==null&&(fo.status="fulfilled");var n=Wl;Wl=null,ho=0,fo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Vw(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var A_=J.S;J.S=function(n,s){oT=sn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&xw(n,s),A_!==null&&A_(n,s)};var oa=k(null);function nm(){var n=oa.current;return n!==null?n:pe.pooledCache}function hh(n,s){s===null?Y(oa,oa.current):Y(oa,s.pool)}function I_(){var n=nm();return n===null?null:{parent:Be._currentValue,pool:n}}var mo=Error(i(460)),im=Error(i(474)),fh=Error(i(542)),dh={then:function(){}};function w_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function R_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(ui,ui),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,D_(n),n;default:if(typeof s.status=="string")s.then(ui,ui);else{if(n=pe,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,D_(n),n}throw ua=s,mo}}function la(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ua=o,mo):o}}var ua=null;function C_(){if(ua===null)throw Error(i(459));var n=ua;return ua=null,n}function D_(n){if(n===mo||n===fh)throw Error(i(483))}var po=null,tu=0;function mh(n){var s=tu;return tu+=1,po===null&&(po=[]),R_(po,n,s)}function eu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function ph(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function N_(n){function s(j,L){if(n){var F=j.deletions;F===null?(j.deletions=[L],j.flags|=16):F.push(L)}}function o(j,L){if(!n)return null;for(;L!==null;)s(j,L),L=L.sibling;return null}function u(j){for(var L=new Map;j!==null;)j.key!==null?L.set(j.key,j):L.set(j.index,j),j=j.sibling;return L}function f(j,L){return j=cs(j,L),j.index=0,j.sibling=null,j}function d(j,L,F){return j.index=F,n?(F=j.alternate,F!==null?(F=F.index,F<L?(j.flags|=67108866,L):F):(j.flags|=67108866,L)):(j.flags|=1048576,L)}function _(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function b(j,L,F,nt){return L===null||L.tag!==6?(L=Gd(F,j.mode,nt),L.return=j,L):(L=f(L,F),L.return=j,L)}function P(j,L,F,nt){var At=F.type;return At===C?tt(j,L,F.props.children,nt,F.key):L!==null&&(L.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===A&&la(At)===L.type)?(L=f(L,F.props),eu(L,F),L.return=j,L):(L=oh(F.type,F.key,F.props,null,j.mode,nt),eu(L,F),L.return=j,L)}function H(j,L,F,nt){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=Kd(F,j.mode,nt),L.return=j,L):(L=f(L,F.children||[]),L.return=j,L)}function tt(j,L,F,nt,At){return L===null||L.tag!==7?(L=ia(F,j.mode,nt,At),L.return=j,L):(L=f(L,F),L.return=j,L)}function it(j,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Gd(""+L,j.mode,F),L.return=j,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case R:return F=oh(L.type,L.key,L.props,null,j.mode,F),eu(F,L),F.return=j,F;case V:return L=Kd(L,j.mode,F),L.return=j,L;case A:return L=la(L),it(j,L,F)}if(Zt(L)||U(L))return L=ia(L,j.mode,F,null),L.return=j,L;if(typeof L.then=="function")return it(j,mh(L),F);if(L.$$typeof===rt)return it(j,ch(j,L),F);ph(j,L)}return null}function K(j,L,F,nt){var At=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return At!==null?null:b(j,L,""+F,nt);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return F.key===At?P(j,L,F,nt):null;case V:return F.key===At?H(j,L,F,nt):null;case A:return F=la(F),K(j,L,F,nt)}if(Zt(F)||U(F))return At!==null?null:tt(j,L,F,nt,null);if(typeof F.then=="function")return K(j,L,mh(F),nt);if(F.$$typeof===rt)return K(j,L,ch(j,F),nt);ph(j,F)}return null}function X(j,L,F,nt,At){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return j=j.get(F)||null,b(L,j,""+nt,At);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case R:return j=j.get(nt.key===null?F:nt.key)||null,P(L,j,nt,At);case V:return j=j.get(nt.key===null?F:nt.key)||null,H(L,j,nt,At);case A:return nt=la(nt),X(j,L,F,nt,At)}if(Zt(nt)||U(nt))return j=j.get(F)||null,tt(L,j,nt,At,null);if(typeof nt.then=="function")return X(j,L,F,mh(nt),At);if(nt.$$typeof===rt)return X(j,L,F,ch(L,nt),At);ph(L,nt)}return null}function yt(j,L,F,nt){for(var At=null,Wt=null,Et=L,Lt=L=0,Gt=null;Et!==null&&Lt<F.length;Lt++){Et.index>Lt?(Gt=Et,Et=null):Gt=Et.sibling;var te=K(j,Et,F[Lt],nt);if(te===null){Et===null&&(Et=Gt);break}n&&Et&&te.alternate===null&&s(j,Et),L=d(te,L,Lt),Wt===null?At=te:Wt.sibling=te,Wt=te,Et=Gt}if(Lt===F.length)return o(j,Et),$t&&hs(j,Lt),At;if(Et===null){for(;Lt<F.length;Lt++)Et=it(j,F[Lt],nt),Et!==null&&(L=d(Et,L,Lt),Wt===null?At=Et:Wt.sibling=Et,Wt=Et);return $t&&hs(j,Lt),At}for(Et=u(Et);Lt<F.length;Lt++)Gt=X(Et,j,Lt,F[Lt],nt),Gt!==null&&(n&&Gt.alternate!==null&&Et.delete(Gt.key===null?Lt:Gt.key),L=d(Gt,L,Lt),Wt===null?At=Gt:Wt.sibling=Gt,Wt=Gt);return n&&Et.forEach(function(dr){return s(j,dr)}),$t&&hs(j,Lt),At}function Rt(j,L,F,nt){if(F==null)throw Error(i(151));for(var At=null,Wt=null,Et=L,Lt=L=0,Gt=null,te=F.next();Et!==null&&!te.done;Lt++,te=F.next()){Et.index>Lt?(Gt=Et,Et=null):Gt=Et.sibling;var dr=K(j,Et,te.value,nt);if(dr===null){Et===null&&(Et=Gt);break}n&&Et&&dr.alternate===null&&s(j,Et),L=d(dr,L,Lt),Wt===null?At=dr:Wt.sibling=dr,Wt=dr,Et=Gt}if(te.done)return o(j,Et),$t&&hs(j,Lt),At;if(Et===null){for(;!te.done;Lt++,te=F.next())te=it(j,te.value,nt),te!==null&&(L=d(te,L,Lt),Wt===null?At=te:Wt.sibling=te,Wt=te);return $t&&hs(j,Lt),At}for(Et=u(Et);!te.done;Lt++,te=F.next())te=X(Et,j,Lt,te.value,nt),te!==null&&(n&&te.alternate!==null&&Et.delete(te.key===null?Lt:te.key),L=d(te,L,Lt),Wt===null?At=te:Wt.sibling=te,Wt=te);return n&&Et.forEach(function(F1){return s(j,F1)}),$t&&hs(j,Lt),At}function me(j,L,F,nt){if(typeof F=="object"&&F!==null&&F.type===C&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case R:t:{for(var At=F.key;L!==null;){if(L.key===At){if(At=F.type,At===C){if(L.tag===7){o(j,L.sibling),nt=f(L,F.props.children),nt.return=j,j=nt;break t}}else if(L.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===A&&la(At)===L.type){o(j,L.sibling),nt=f(L,F.props),eu(nt,F),nt.return=j,j=nt;break t}o(j,L);break}else s(j,L);L=L.sibling}F.type===C?(nt=ia(F.props.children,j.mode,nt,F.key),nt.return=j,j=nt):(nt=oh(F.type,F.key,F.props,null,j.mode,nt),eu(nt,F),nt.return=j,j=nt)}return _(j);case V:t:{for(At=F.key;L!==null;){if(L.key===At)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){o(j,L.sibling),nt=f(L,F.children||[]),nt.return=j,j=nt;break t}else{o(j,L);break}else s(j,L);L=L.sibling}nt=Kd(F,j.mode,nt),nt.return=j,j=nt}return _(j);case A:return F=la(F),me(j,L,F,nt)}if(Zt(F))return yt(j,L,F,nt);if(U(F)){if(At=U(F),typeof At!="function")throw Error(i(150));return F=At.call(F),Rt(j,L,F,nt)}if(typeof F.then=="function")return me(j,L,mh(F),nt);if(F.$$typeof===rt)return me(j,L,ch(j,F),nt);ph(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(o(j,L.sibling),nt=f(L,F),nt.return=j,j=nt):(o(j,L),nt=Gd(F,j.mode,nt),nt.return=j,j=nt),_(j)):o(j,L)}return function(j,L,F,nt){try{tu=0;var At=me(j,L,F,nt);return po=null,At}catch(Et){if(Et===mo||Et===fh)throw Et;var Wt=On(29,Et,null,j.mode);return Wt.lanes=nt,Wt.return=j,Wt}finally{}}}var ca=N_(!0),x_=N_(!1),Xs=!1;function sm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Js(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Zs(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(ie&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=ah(n),m_(n,null,o),s}return rh(n,u,s,o),ah(n)}function nu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Dl(n,o)}}function am(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,o=o.next}while(o!==null);d===null?f=d=s:d=d.next=s}else f=d=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var om=!1;function iu(){if(om){var n=fo;if(n!==null)throw n}}function su(n,s,o,u){om=!1;var f=n.updateQueue;Xs=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var P=b,H=P.next;P.next=null,_===null?d=H:_.next=H,_=P;var tt=n.alternate;tt!==null&&(tt=tt.updateQueue,b=tt.lastBaseUpdate,b!==_&&(b===null?tt.firstBaseUpdate=H:b.next=H,tt.lastBaseUpdate=P))}if(d!==null){var it=f.baseState;_=0,tt=H=P=null,b=d;do{var K=b.lane&-536870913,X=K!==b.lane;if(X?(Ht&K)===K:(u&K)===K){K!==0&&K===ho&&(om=!0),tt!==null&&(tt=tt.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var yt=n,Rt=b;K=s;var me=o;switch(Rt.tag){case 1:if(yt=Rt.payload,typeof yt=="function"){it=yt.call(me,it,K);break t}it=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=Rt.payload,K=typeof yt=="function"?yt.call(me,it,K):yt,K==null)break t;it=E({},it,K);break t;case 2:Xs=!0}}K=b.callback,K!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[K]:X.push(K))}else X={lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},tt===null?(H=tt=X,P=it):tt=tt.next=X,_|=K;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;X=b,b=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);tt===null&&(P=it),f.baseState=P,f.firstBaseUpdate=H,f.lastBaseUpdate=tt,d===null&&(f.shared.lanes=0),ir|=_,n.lanes=_,n.memoizedState=it}}function V_(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function M_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)V_(o[n],s)}var go=k(null),gh=k(0);function O_(n,s){n=Ss,Y(gh,n),Y(go,s),Ss=n|s.baseLanes}function lm(){Y(gh,Ss),Y(go,go.current)}function um(){Ss=gh.current,et(go),et(gh)}var Pn=k(null),ei=null;function Ws(n){var s=n.alternate;Y(xe,xe.current&1),Y(Pn,n),ei===null&&(s===null||go.current!==null||s.memoizedState!==null)&&(ei=n)}function cm(n){Y(xe,xe.current),Y(Pn,n),ei===null&&(ei=n)}function P_(n){n.tag===22?(Y(xe,xe.current),Y(Pn,n),ei===null&&(ei=n)):tr()}function tr(){Y(xe,xe.current),Y(Pn,Pn.current)}function kn(n){et(Pn),ei===n&&(ei=null),et(xe)}var xe=k(0);function yh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||gp(o)||yp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ms=0,Pt=null,fe=null,qe=null,_h=!1,yo=!1,ha=!1,vh=0,ru=0,_o=null,Mw=0;function Ie(){throw Error(i(321))}function hm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Mn(n[o],s[o]))return!1;return!0}function fm(n,s,o,u,f,d){return ms=d,Pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=n===null||n.memoizedState===null?_v:Rm,ha=!1,d=o(u,f),ha=!1,yo&&(d=L_(s,o,u,f)),k_(n),d}function k_(n){J.H=lu;var s=fe!==null&&fe.next!==null;if(ms=0,qe=fe=Pt=null,_h=!1,ru=0,_o=null,s)throw Error(i(300));n===null||Fe||(n=n.dependencies,n!==null&&uh(n)&&(Fe=!0))}function L_(n,s,o,u){Pt=n;var f=0;do{if(yo&&(_o=null),ru=0,yo=!1,25<=f)throw Error(i(301));if(f+=1,qe=fe=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}J.H=vv,d=s(o,u)}while(yo);return d}function Ow(){var n=J.H,s=n.useState()[0];return s=typeof s.then=="function"?au(s):s,n=n.useState()[0],(fe!==null?fe.memoizedState:null)!==n&&(Pt.flags|=1024),s}function dm(){var n=vh!==0;return vh=0,n}function mm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function pm(n){if(_h){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}_h=!1}ms=0,qe=fe=Pt=null,yo=!1,ru=vh=0,_o=null}function vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Pt.memoizedState=qe=n:qe=qe.next=n,qe}function Ve(){if(fe===null){var n=Pt.alternate;n=n!==null?n.memoizedState:null}else n=fe.next;var s=qe===null?Pt.memoizedState:qe.next;if(s!==null)qe=s,fe=n;else{if(n===null)throw Pt.alternate===null?Error(i(467)):Error(i(310));fe=n,n={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},qe===null?Pt.memoizedState=qe=n:qe=qe.next=n}return qe}function Th(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(n){var s=ru;return ru+=1,_o===null&&(_o=[]),n=R_(_o,n,s),s=Pt,(qe===null?s.memoizedState:qe.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?_v:Rm),n}function Eh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return au(n);if(n.$$typeof===rt)return ln(n)}throw Error(i(438,String(n)))}function gm(n){var s=null,o=Pt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Pt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Th(),Pt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=M;return s.index++,o}function ps(n,s){return typeof s=="function"?s(n):s}function Sh(n){var s=Ve();return ym(s,fe,n)}function ym(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,d=u.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}s.baseQueue=f=d,u.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{s=f.next;var b=_=null,P=null,H=s,tt=!1;do{var it=H.lane&-536870913;if(it!==H.lane?(Ht&it)===it:(ms&it)===it){var K=H.revertLane;if(K===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),it===ho&&(tt=!0);else if((ms&K)===K){H=H.next,K===ho&&(tt=!0);continue}else it={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(b=P=it,_=d):P=P.next=it,Pt.lanes|=K,ir|=K;it=H.action,ha&&o(d,it),d=H.hasEagerState?H.eagerState:o(d,it)}else K={lane:it,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(b=P=K,_=d):P=P.next=K,Pt.lanes|=it,ir|=it;H=H.next}while(H!==null&&H!==s);if(P===null?_=d:P.next=b,!Mn(d,n.memoizedState)&&(Fe=!0,tt&&(o=fo,o!==null)))throw o;n.memoizedState=d,n.baseState=_,n.baseQueue=P,u.lastRenderedState=d}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function _m(n){var s=Ve(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,d=s.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Mn(d,s.memoizedState)||(Fe=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),o.lastRenderedState=d}return[d,u]}function U_(n,s,o){var u=Pt,f=Ve(),d=$t;if(d){if(o===void 0)throw Error(i(407));o=o()}else o=s();var _=!Mn((fe||f).memoizedState,o);if(_&&(f.memoizedState=o,Fe=!0),f=f.queue,Em(B_.bind(null,u,f,n),[n]),f.getSnapshot!==s||_||qe!==null&&qe.memoizedState.tag&1){if(u.flags|=2048,vo(9,{destroy:void 0},j_.bind(null,u,f,o,s),null),pe===null)throw Error(i(349));d||(ms&127)!==0||z_(u,s,o)}return o}function z_(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Pt.updateQueue,s===null?(s=Th(),Pt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function j_(n,s,o,u){s.value=o,s.getSnapshot=u,q_(s)&&F_(n)}function B_(n,s,o){return o(function(){q_(s)&&F_(n)})}function q_(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Mn(n,o)}catch{return!0}}function F_(n){var s=na(n,2);s!==null&&Cn(s,n,2)}function vm(n){var s=vn();if(typeof n=="function"){var o=n;if(n=o(),ha){Gn(!0);try{o()}finally{Gn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:n},s}function H_(n,s,o,u){return n.baseState=o,ym(n,fe,typeof u=="function"?u:ps)}function Pw(n,s,o,u,f){if(Ih(n))throw Error(i(485));if(n=s.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};J.T!==null?o(!0):d.isTransition=!1,u(d),o=s.pending,o===null?(d.next=s.pending=d,G_(s,d)):(d.next=o.next,s.pending=o.next=d)}}function G_(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var d=J.T,_={};J.T=_;try{var b=o(f,u),P=J.S;P!==null&&P(_,b),K_(n,s,b)}catch(H){Tm(n,s,H)}finally{d!==null&&_.types!==null&&(d.types=_.types),J.T=d}}else try{d=o(f,u),K_(n,s,d)}catch(H){Tm(n,s,H)}}function K_(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Q_(n,s,u)},function(u){return Tm(n,s,u)}):Q_(n,s,o)}function Q_(n,s,o){s.status="fulfilled",s.value=o,Y_(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,G_(n,o)))}function Tm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Y_(s),s=s.next;while(s!==u)}n.action=null}function Y_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function $_(n,s){return s}function X_(n,s){if($t){var o=pe.formState;if(o!==null){t:{var u=Pt;if($t){if(ye){e:{for(var f=ye,d=ti;f.nodeType!==8;){if(!d){f=null;break e}if(f=ni(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ye=ni(f.nextSibling),u=f.data==="F!";break t}}Ys(u)}u=!1}u&&(s=o[0])}}return o=vn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$_,lastRenderedState:s},o.queue=u,o=pv.bind(null,Pt,u),u.dispatch=o,u=vm(!1),d=wm.bind(null,Pt,!1,u.queue),u=vn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=Pw.bind(null,Pt,f,d,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function J_(n){var s=Ve();return Z_(s,fe,n)}function Z_(n,s,o){if(s=ym(n,s,$_)[0],n=Sh(ps)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=au(s)}catch(_){throw _===mo?fh:_}else u=s;s=Ve();var f=s.queue,d=f.dispatch;return o!==s.memoizedState&&(Pt.flags|=2048,vo(9,{destroy:void 0},kw.bind(null,f,o),null)),[u,d,n]}function kw(n,s){n.action=s}function W_(n){var s=Ve(),o=fe;if(o!==null)return Z_(s,o,n);Ve(),s=s.memoizedState,o=Ve();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function vo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Pt.updateQueue,s===null&&(s=Th(),Pt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function tv(){return Ve().memoizedState}function bh(n,s,o,u){var f=vn();Pt.flags|=n,f.memoizedState=vo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Ah(n,s,o,u){var f=Ve();u=u===void 0?null:u;var d=f.memoizedState.inst;fe!==null&&u!==null&&hm(u,fe.memoizedState.deps)?f.memoizedState=vo(s,d,o,u):(Pt.flags|=n,f.memoizedState=vo(1|s,d,o,u))}function ev(n,s){bh(8390656,8,n,s)}function Em(n,s){Ah(2048,8,n,s)}function Lw(n){Pt.flags|=4;var s=Pt.updateQueue;if(s===null)s=Th(),Pt.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function nv(n){var s=Ve().memoizedState;return Lw({ref:s,nextImpl:n}),function(){if((ie&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function iv(n,s){return Ah(4,2,n,s)}function sv(n,s){return Ah(4,4,n,s)}function rv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function av(n,s,o){o=o!=null?o.concat([n]):null,Ah(4,4,rv.bind(null,s,n),o)}function Sm(){}function ov(n,s){var o=Ve();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&hm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function lv(n,s){var o=Ve();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&hm(s,u[1]))return u[0];if(u=n(),ha){Gn(!0);try{n()}finally{Gn(!1)}}return o.memoizedState=[u,s],u}function bm(n,s,o){return o===void 0||(ms&1073741824)!==0&&(Ht&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=uT(),Pt.lanes|=n,ir|=n,o)}function uv(n,s,o,u){return Mn(o,s)?o:go.current!==null?(n=bm(n,o,u),Mn(n,s)||(Fe=!0),n):(ms&42)===0||(ms&1073741824)!==0&&(Ht&261930)===0?(Fe=!0,n.memoizedState=o):(n=uT(),Pt.lanes|=n,ir|=n,s)}function cv(n,s,o,u,f){var d=lt.p;lt.p=d!==0&&8>d?d:8;var _=J.T,b={};J.T=b,wm(n,!1,s,o);try{var P=f(),H=J.S;if(H!==null&&H(b,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var tt=Vw(P,u);ou(n,s,tt,zn(n))}else ou(n,s,u,zn(n))}catch(it){ou(n,s,{then:function(){},status:"rejected",reason:it},zn())}finally{lt.p=d,_!==null&&b.types!==null&&(_.types=b.types),J.T=_}}function Uw(){}function Am(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=hv(n).queue;cv(n,f,s,Tt,o===null?Uw:function(){return fv(n),o(u)})}function hv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:Tt},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function fv(n){var s=hv(n);s.next===null&&(s=n.alternate.memoizedState),ou(n,s.next.queue,{},zn())}function Im(){return ln(Au)}function dv(){return Ve().memoizedState}function mv(){return Ve().memoizedState}function zw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=zn();n=Js(o);var u=Zs(s,n,o);u!==null&&(Cn(u,s,o),nu(u,s,o)),s={cache:tm()},n.payload=s;return}s=s.return}}function jw(n,s,o){var u=zn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ih(n)?gv(s,o):(o=Fd(n,s,o,u),o!==null&&(Cn(o,n,u),yv(o,s,u)))}function pv(n,s,o){var u=zn();ou(n,s,o,u)}function ou(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ih(n))gv(s,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var _=s.lastRenderedState,b=d(_,o);if(f.hasEagerState=!0,f.eagerState=b,Mn(b,_))return rh(n,s,f,0),pe===null&&sh(),!1}catch{}finally{}if(o=Fd(n,s,f,u),o!==null)return Cn(o,n,u),yv(o,s,u),!0}return!1}function wm(n,s,o,u){if(u={lane:2,revertLane:sp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ih(n)){if(s)throw Error(i(479))}else s=Fd(n,o,u,2),s!==null&&Cn(s,n,2)}function Ih(n){var s=n.alternate;return n===Pt||s!==null&&s===Pt}function gv(n,s){yo=_h=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function yv(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Dl(n,o)}}var lu={readContext:ln,use:Eh,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie};lu.useEffectEvent=Ie;var _v={readContext:ln,use:Eh,useCallback:function(n,s){return vn().memoizedState=[n,s===void 0?null:s],n},useContext:ln,useEffect:ev,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,bh(4194308,4,rv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return bh(4194308,4,n,s)},useInsertionEffect:function(n,s){bh(4,2,n,s)},useMemo:function(n,s){var o=vn();s=s===void 0?null:s;var u=n();if(ha){Gn(!0);try{n()}finally{Gn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=vn();if(o!==void 0){var f=o(s);if(ha){Gn(!0);try{o(s)}finally{Gn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=jw.bind(null,Pt,n),[u.memoizedState,n]},useRef:function(n){var s=vn();return n={current:n},s.memoizedState=n},useState:function(n){n=vm(n);var s=n.queue,o=pv.bind(null,Pt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Sm,useDeferredValue:function(n,s){var o=vn();return bm(o,n,s)},useTransition:function(){var n=vm(!1);return n=cv.bind(null,Pt,n.queue,!0,!1),vn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Pt,f=vn();if($t){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),pe===null)throw Error(i(349));(Ht&127)!==0||z_(u,s,o)}f.memoizedState=o;var d={value:o,getSnapshot:s};return f.queue=d,ev(B_.bind(null,u,d,n),[n]),u.flags|=2048,vo(9,{destroy:void 0},j_.bind(null,u,d,o,s),null),o},useId:function(){var n=vn(),s=pe.identifierPrefix;if($t){var o=Hi,u=Fi;o=(u&~(1<<32-De(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=vh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=Mw++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Im,useFormState:X_,useActionState:X_,useOptimistic:function(n){var s=vn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=wm.bind(null,Pt,!0,o),o.dispatch=s,[n,s]},useMemoCache:gm,useCacheRefresh:function(){return vn().memoizedState=zw.bind(null,Pt)},useEffectEvent:function(n){var s=vn(),o={impl:n};return s.memoizedState=o,function(){if((ie&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Rm={readContext:ln,use:Eh,useCallback:ov,useContext:ln,useEffect:Em,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:lv,useReducer:Sh,useRef:tv,useState:function(){return Sh(ps)},useDebugValue:Sm,useDeferredValue:function(n,s){var o=Ve();return uv(o,fe.memoizedState,n,s)},useTransition:function(){var n=Sh(ps)[0],s=Ve().memoizedState;return[typeof n=="boolean"?n:au(n),s]},useSyncExternalStore:U_,useId:dv,useHostTransitionStatus:Im,useFormState:J_,useActionState:J_,useOptimistic:function(n,s){var o=Ve();return H_(o,fe,n,s)},useMemoCache:gm,useCacheRefresh:mv};Rm.useEffectEvent=nv;var vv={readContext:ln,use:Eh,useCallback:ov,useContext:ln,useEffect:Em,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:lv,useReducer:_m,useRef:tv,useState:function(){return _m(ps)},useDebugValue:Sm,useDeferredValue:function(n,s){var o=Ve();return fe===null?bm(o,n,s):uv(o,fe.memoizedState,n,s)},useTransition:function(){var n=_m(ps)[0],s=Ve().memoizedState;return[typeof n=="boolean"?n:au(n),s]},useSyncExternalStore:U_,useId:dv,useHostTransitionStatus:Im,useFormState:W_,useActionState:W_,useOptimistic:function(n,s){var o=Ve();return fe!==null?H_(o,fe,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:gm,useCacheRefresh:mv};vv.useEffectEvent=nv;function Cm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Dm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=zn(),f=Js(u);f.payload=s,o!=null&&(f.callback=o),s=Zs(n,f,u),s!==null&&(Cn(s,n,u),nu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=zn(),f=Js(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Zs(n,f,u),s!==null&&(Cn(s,n,u),nu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=zn(),u=Js(o);u.tag=2,s!=null&&(u.callback=s),s=Zs(n,u,o),s!==null&&(Cn(s,n,o),nu(s,n,o))}};function Tv(n,s,o,u,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,d,_):s.prototype&&s.prototype.isPureReactComponent?!Yl(o,u)||!Yl(f,d):!0}function Ev(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Dm.enqueueReplaceState(s,s.state,null)}function fa(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Sv(n){ih(n)}function bv(n){console.error(n)}function Av(n){ih(n)}function wh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Iv(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Nm(n,s,o){return o=Js(o),o.tag=3,o.payload={element:null},o.callback=function(){wh(n,s)},o}function wv(n){return n=Js(n),n.tag=3,n}function Rv(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var d=u.value;n.payload=function(){return f(d)},n.callback=function(){Iv(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Iv(s,o,u),typeof f!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function Bw(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&co(s,o,f,!0),o=Pn.current,o!==null){switch(o.tag){case 31:case 13:return ei===null?Uh():o.alternate===null&&we===0&&(we=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===dh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),ep(n,u,f)),!1;case 22:return o.flags|=65536,u===dh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),ep(n,u,f)),!1}throw Error(i(435,o.tag))}return ep(n,u,f),Uh(),!1}if($t)return s=Pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==$d&&(n=Error(i(422),{cause:u}),Jl(Jn(n,o)))):(u!==$d&&(s=Error(i(423),{cause:u}),Jl(Jn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Jn(u,o),f=Nm(n.stateNode,u,f),am(n,f),we!==4&&(we=2)),!1;var d=Error(i(520),{cause:u});if(d=Jn(d,o),gu===null?gu=[d]:gu.push(d),we!==4&&(we=2),s===null)return!0;u=Jn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Nm(o.stateNode,u,n),am(o,n),!1;case 1:if(s=o.type,d=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(sr===null||!sr.has(d))))return o.flags|=65536,f&=-f,o.lanes|=f,f=wv(f),Rv(f,n,o,u),am(o,f),!1}o=o.return}while(o!==null);return!1}var xm=Error(i(461)),Fe=!1;function un(n,s,o,u){s.child=n===null?x_(s,null,o,u):ca(s,n.child,o,u)}function Cv(n,s,o,u,f){o=o.render;var d=s.ref;if("ref"in u){var _={};for(var b in u)b!=="ref"&&(_[b]=u[b])}else _=u;return aa(s),u=fm(n,s,o,_,d,f),b=dm(),n!==null&&!Fe?(mm(n,s,f),gs(n,s,f)):($t&&b&&Qd(s),s.flags|=1,un(n,s,u,f),s.child)}function Dv(n,s,o,u,f){if(n===null){var d=o.type;return typeof d=="function"&&!Hd(d)&&d.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=d,Nv(n,s,d,u,f)):(n=oh(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(d=n.child,!zm(n,f)){var _=d.memoizedProps;if(o=o.compare,o=o!==null?o:Yl,o(_,u)&&n.ref===s.ref)return gs(n,s,f)}return s.flags|=1,n=cs(d,u),n.ref=s.ref,n.return=s,s.child=n}function Nv(n,s,o,u,f){if(n!==null){var d=n.memoizedProps;if(Yl(d,u)&&n.ref===s.ref)if(Fe=!1,s.pendingProps=u=d,zm(n,f))(n.flags&131072)!==0&&(Fe=!0);else return s.lanes=n.lanes,gs(n,s,f)}return Vm(n,s,o,u,f)}function xv(n,s,o,u){var f=u.children,d=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~d}else u=0,s.child=null;return Vv(n,s,d,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&hh(s,d!==null?d.cachePool:null),d!==null?O_(s,d):lm(),P_(s);else return u=s.lanes=536870912,Vv(n,s,d!==null?d.baseLanes|o:o,o,u)}else d!==null?(hh(s,d.cachePool),O_(s,d),tr(),s.memoizedState=null):(n!==null&&hh(s,null),lm(),tr());return un(n,s,f,o),s.child}function uu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Vv(n,s,o,u,f){var d=nm();return d=d===null?null:{parent:Be._currentValue,pool:d},s.memoizedState={baseLanes:o,cachePool:d},n!==null&&hh(s,null),lm(),P_(s),n!==null&&co(n,s,u,!0),s.childLanes=f,null}function Rh(n,s){return s=Dh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Mv(n,s,o){return ca(s,n.child,null,o),n=Rh(s,s.pendingProps),n.flags|=2,kn(s),s.memoizedState=null,n}function qw(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if($t){if(u.mode==="hidden")return n=Rh(s,u),s.lanes=536870912,uu(null,n);if(cm(s),(n=ye)?(n=GT(n,ti),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ks!==null?{id:Fi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},o=g_(n),o.return=s,s.child=o,on=s,ye=null)):n=null,n===null)throw Ys(s);return s.lanes=536870912,null}return Rh(s,u)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(cm(s),f)if(s.flags&256)s.flags&=-257,s=Mv(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Fe||co(n,s,o,!1),f=(o&n.childLanes)!==0,Fe||f){if(u=pe,u!==null&&(_=Nl(u,o),_!==0&&_!==d.retryLane))throw d.retryLane=_,na(n,_),Cn(u,n,_),xm;Uh(),s=Mv(n,s,o)}else n=d.treeContext,ye=ni(_.nextSibling),on=s,$t=!0,Qs=null,ti=!1,n!==null&&v_(s,n),s=Rh(s,u),s.flags|=4096;return s}return n=cs(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Ch(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Vm(n,s,o,u,f){return aa(s),o=fm(n,s,o,u,void 0,f),u=dm(),n!==null&&!Fe?(mm(n,s,f),gs(n,s,f)):($t&&u&&Qd(s),s.flags|=1,un(n,s,o,f),s.child)}function Ov(n,s,o,u,f,d){return aa(s),s.updateQueue=null,o=L_(s,u,o,f),k_(n),u=dm(),n!==null&&!Fe?(mm(n,s,d),gs(n,s,d)):($t&&u&&Qd(s),s.flags|=1,un(n,s,o,d),s.child)}function Pv(n,s,o,u,f){if(aa(s),s.stateNode===null){var d=ao,_=o.contextType;typeof _=="object"&&_!==null&&(d=ln(_)),d=new o(u,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Dm,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=u,d.state=s.memoizedState,d.refs={},sm(s),_=o.contextType,d.context=typeof _=="object"&&_!==null?ln(_):ao,d.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Cm(s,o,_,u),d.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Dm.enqueueReplaceState(d,d.state,null),su(s,u,d,f),iu(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){d=s.stateNode;var b=s.memoizedProps,P=fa(o,b);d.props=P;var H=d.context,tt=o.contextType;_=ao,typeof tt=="object"&&tt!==null&&(_=ln(tt));var it=o.getDerivedStateFromProps;tt=typeof it=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,tt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||H!==_)&&Ev(s,d,u,_),Xs=!1;var K=s.memoizedState;d.state=K,su(s,u,d,f),iu(),H=s.memoizedState,b||K!==H||Xs?(typeof it=="function"&&(Cm(s,o,it,u),H=s.memoizedState),(P=Xs||Tv(s,o,P,u,K,H,_))?(tt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),d.props=u,d.state=H,d.context=_,u=P):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{d=s.stateNode,rm(n,s),_=s.memoizedProps,tt=fa(o,_),d.props=tt,it=s.pendingProps,K=d.context,H=o.contextType,P=ao,typeof H=="object"&&H!==null&&(P=ln(H)),b=o.getDerivedStateFromProps,(H=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==it||K!==P)&&Ev(s,d,u,P),Xs=!1,K=s.memoizedState,d.state=K,su(s,u,d,f),iu();var X=s.memoizedState;_!==it||K!==X||Xs||n!==null&&n.dependencies!==null&&uh(n.dependencies)?(typeof b=="function"&&(Cm(s,o,b,u),X=s.memoizedState),(tt=Xs||Tv(s,o,tt,u,K,X,P)||n!==null&&n.dependencies!==null&&uh(n.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(u,X,P),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(u,X,P)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=X),d.props=u,d.state=X,d.context=P,u=tt):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),u=!1)}return d=u,Ch(n,s),u=(s.flags&128)!==0,d||u?(d=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,n!==null&&u?(s.child=ca(s,n.child,null,f),s.child=ca(s,null,o,f)):un(n,s,o,f),s.memoizedState=d.state,n=s.child):n=gs(n,s,f),n}function kv(n,s,o,u){return sa(),s.flags|=256,un(n,s,o,u),s.child}var Mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Om(n){return{baseLanes:n,cachePool:I_()}}function Pm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Un),n}function Lv(n,s,o){var u=s.pendingProps,f=!1,d=(s.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(xe.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if($t){if(f?Ws(s):tr(),(n=ye)?(n=GT(n,ti),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ks!==null?{id:Fi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},o=g_(n),o.return=s,s.child=o,on=s,ye=null)):n=null,n===null)throw Ys(s);return yp(n)?s.lanes=32:s.lanes=536870912,null}var b=u.children;return u=u.fallback,f?(tr(),f=s.mode,b=Dh({mode:"hidden",children:b},f),u=ia(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,u=s.child,u.memoizedState=Om(o),u.childLanes=Pm(n,_,o),s.memoizedState=Mm,uu(null,u)):(Ws(s),km(s,b))}var P=n.memoizedState;if(P!==null&&(b=P.dehydrated,b!==null)){if(d)s.flags&256?(Ws(s),s.flags&=-257,s=Lm(n,s,o)):s.memoizedState!==null?(tr(),s.child=n.child,s.flags|=128,s=null):(tr(),b=u.fallback,f=s.mode,u=Dh({mode:"visible",children:u.children},f),b=ia(b,f,o,null),b.flags|=2,u.return=s,b.return=s,u.sibling=b,s.child=u,ca(s,n.child,null,o),u=s.child,u.memoizedState=Om(o),u.childLanes=Pm(n,_,o),s.memoizedState=Mm,s=uu(null,u));else if(Ws(s),yp(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var H=_.dgst;_=H,u=Error(i(419)),u.stack="",u.digest=_,Jl({value:u,source:null,stack:null}),s=Lm(n,s,o)}else if(Fe||co(n,s,o,!1),_=(o&n.childLanes)!==0,Fe||_){if(_=pe,_!==null&&(u=Nl(_,o),u!==0&&u!==P.retryLane))throw P.retryLane=u,na(n,u),Cn(_,n,u),xm;gp(b)||Uh(),s=Lm(n,s,o)}else gp(b)?(s.flags|=192,s.child=n.child,s=null):(n=P.treeContext,ye=ni(b.nextSibling),on=s,$t=!0,Qs=null,ti=!1,n!==null&&v_(s,n),s=km(s,u.children),s.flags|=4096);return s}return f?(tr(),b=u.fallback,f=s.mode,P=n.child,H=P.sibling,u=cs(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,H!==null?b=cs(H,b):(b=ia(b,f,o,null),b.flags|=2),b.return=s,u.return=s,u.sibling=b,s.child=u,uu(null,u),u=s.child,b=n.child.memoizedState,b===null?b=Om(o):(f=b.cachePool,f!==null?(P=Be._currentValue,f=f.parent!==P?{parent:P,pool:P}:f):f=I_(),b={baseLanes:b.baseLanes|o,cachePool:f}),u.memoizedState=b,u.childLanes=Pm(n,_,o),s.memoizedState=Mm,uu(n.child,u)):(Ws(s),o=n.child,n=o.sibling,o=cs(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function km(n,s){return s=Dh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Dh(n,s){return n=On(22,n,null,s),n.lanes=0,n}function Lm(n,s,o){return ca(s,n.child,null,o),n=km(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Uv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Zd(n.return,s,o)}function Um(n,s,o,u,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=d)}function zv(n,s,o){var u=s.pendingProps,f=u.revealOrder,d=u.tail;u=u.children;var _=xe.current,b=(_&2)!==0;if(b?(_=_&1|2,s.flags|=128):_&=1,Y(xe,_),un(n,s,u,o),u=$t?Xl:0,!b&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Uv(n,o,s);else if(n.tag===19)Uv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&yh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Um(s,!1,f,o,d,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&yh(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Um(s,!0,o,null,d,u);break;case"together":Um(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function gs(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),ir|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(co(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=cs(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=cs(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function zm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&uh(n)))}function Fw(n,s,o){switch(s.tag){case 3:ee(s,s.stateNode.containerInfo),$s(s,Be,n.memoizedState.cache),sa();break;case 27:case 5:Z(s);break;case 4:ee(s,s.stateNode.containerInfo);break;case 10:$s(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,cm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ws(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Lv(n,s,o):(Ws(s),n=gs(n,s,o),n!==null?n.sibling:null);Ws(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(co(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return zv(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Y(xe,xe.current),u)break;return null;case 22:return s.lanes=0,xv(n,s,o,s.pendingProps);case 24:$s(s,Be,n.memoizedState.cache)}return gs(n,s,o)}function jv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Fe=!0;else{if(!zm(n,o)&&(s.flags&128)===0)return Fe=!1,Fw(n,s,o);Fe=(n.flags&131072)!==0}else Fe=!1,$t&&(s.flags&1048576)!==0&&__(s,Xl,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(n=la(s.elementType),s.type=n,typeof n=="function")Hd(n)?(u=fa(n,u),s.tag=1,s=Pv(null,s,n,u,o)):(s.tag=0,s=Vm(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===mt){s.tag=11,s=Cv(null,s,n,u,o);break t}else if(f===D){s.tag=14,s=Dv(null,s,n,u,o);break t}}throw s=Yt(n)||n,Error(i(306,s,""))}}return s;case 0:return Vm(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=fa(u,s.pendingProps),Pv(n,s,u,f,o);case 3:t:{if(ee(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var d=s.memoizedState;f=d.element,rm(n,s),su(s,u,null,o);var _=s.memoizedState;if(u=_.cache,$s(s,Be,u),u!==d.cache&&Wd(s,[Be],o,!0),iu(),u=_.element,d.isDehydrated)if(d={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=kv(n,s,u,o);break t}else if(u!==f){f=Jn(Error(i(424)),s),Jl(f),s=kv(n,s,u,o);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ye=ni(n.firstChild),on=s,$t=!0,Qs=null,ti=!0,o=x_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(sa(),u===f){s=gs(n,s,o);break t}un(n,s,u,o)}s=s.child}return s;case 26:return Ch(n,s),n===null?(o=JT(s.type,null,s.pendingProps,null))?s.memoizedState=o:$t||(o=s.type,n=s.pendingProps,u=Gh(bt.current).createElement(o),u[Ue]=s,u[Ze]=n,cn(u,o,n),ze(u),s.stateNode=u):s.memoizedState=JT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Z(s),n===null&&$t&&(u=s.stateNode=YT(s.type,s.pendingProps,bt.current),on=s,ti=!0,f=ye,lr(s.type)?(_p=f,ye=ni(u.firstChild)):ye=f),un(n,s,s.pendingProps.children,o),Ch(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&$t&&((f=u=ye)&&(u=v1(u,s.type,s.pendingProps,ti),u!==null?(s.stateNode=u,on=s,ye=ni(u.firstChild),ti=!1,f=!0):f=!1),f||Ys(s)),Z(s),f=s.type,d=s.pendingProps,_=n!==null?n.memoizedProps:null,u=d.children,dp(f,d)?u=null:_!==null&&dp(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=fm(n,s,Ow,null,null,o),Au._currentValue=f),Ch(n,s),un(n,s,u,o),s.child;case 6:return n===null&&$t&&((n=o=ye)&&(o=T1(o,s.pendingProps,ti),o!==null?(s.stateNode=o,on=s,ye=null,n=!0):n=!1),n||Ys(s)),null;case 13:return Lv(n,s,o);case 4:return ee(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=ca(s,null,u,o):un(n,s,u,o),s.child;case 11:return Cv(n,s,s.type,s.pendingProps,o);case 7:return un(n,s,s.pendingProps,o),s.child;case 8:return un(n,s,s.pendingProps.children,o),s.child;case 12:return un(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,$s(s,s.type,u.value),un(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,aa(s),f=ln(f),u=u(f),s.flags|=1,un(n,s,u,o),s.child;case 14:return Dv(n,s,s.type,s.pendingProps,o);case 15:return Nv(n,s,s.type,s.pendingProps,o);case 19:return zv(n,s,o);case 31:return qw(n,s,o);case 22:return xv(n,s,o,s.pendingProps);case 24:return aa(s),u=ln(Be),n===null?(f=nm(),f===null&&(f=pe,d=tm(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=o),f=d),s.memoizedState={parent:u,cache:f},sm(s),$s(s,Be,f)):((n.lanes&o)!==0&&(rm(n,s),su(s,null,null,o),iu()),f=n.memoizedState,d=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),$s(s,Be,u)):(u=d.cache,$s(s,Be,u),u!==f.cache&&Wd(s,[Be],o,!0))),un(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ys(n){n.flags|=4}function jm(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(dT())n.flags|=8192;else throw ua=dh,im}else n.flags&=-16777217}function Bv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!nE(s))if(dT())n.flags|=8192;else throw ua=dh,im}function Nh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?kc():536870912,n.lanes|=s,bo|=s)}function cu(n,s){if(!$t)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function _e(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function Hw(n,s,o){var u=s.pendingProps;switch(Yd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(s),null;case 1:return _e(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ds(Be),jt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(uo(s)?ys(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xd())),_e(s),null;case 26:var f=s.type,d=s.memoizedState;return n===null?(ys(s),d!==null?(_e(s),Bv(s,d)):(_e(s),jm(s,f,null,u,o))):d?d!==n.memoizedState?(ys(s),_e(s),Bv(s,d)):(_e(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&ys(s),_e(s),jm(s,f,n,u,o)),null;case 27:if(pt(s),o=bt.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ys(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return _e(s),null}n=ot.current,uo(s)?T_(s):(n=YT(f,u,o),s.stateNode=n,ys(s))}return _e(s),null;case 5:if(pt(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ys(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return _e(s),null}if(d=ot.current,uo(s))T_(s);else{var _=Gh(bt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?d.multiple=!0:u.size&&(d.size=u.size);break;default:d=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}d[Ue]=s,d[Ze]=u;t:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break t;for(;_.sibling===null;){if(_.return===null||_.return===s)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=d;t:switch(cn(d,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&ys(s)}}return _e(s),jm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ys(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=bt.current,uo(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=on,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Ue]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||LT(n.nodeValue,o)),n||Ys(s,!0)}else n=Gh(n).createTextNode(u),n[Ue]=s,s.stateNode=n}return _e(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=uo(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Ue]=s}else sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_e(s),n=!1}else o=Xd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(kn(s),s):(kn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return _e(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=uo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ue]=s}else sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_e(s),f=!1}else f=Xd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(kn(s),s):(kn(s),null)}return kn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Nh(s,s.updateQueue),_e(s),null);case 4:return jt(),n===null&&lp(s.stateNode.containerInfo),_e(s),null;case 10:return ds(s.type),_e(s),null;case 19:if(et(xe),u=s.memoizedState,u===null)return _e(s),null;if(f=(s.flags&128)!==0,d=u.rendering,d===null)if(f)cu(u,!1);else{if(we!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(d=yh(n),d!==null){for(s.flags|=128,cu(u,!1),n=d.updateQueue,s.updateQueue=n,Nh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)p_(o,n),o=o.sibling;return Y(xe,xe.current&1|2),$t&&hs(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&sn()>Ph&&(s.flags|=128,f=!0,cu(u,!1),s.lanes=4194304)}else{if(!f)if(n=yh(d),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Nh(s,n),cu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!$t)return _e(s),null}else 2*sn()-u.renderingStartTime>Ph&&o!==536870912&&(s.flags|=128,f=!0,cu(u,!1),s.lanes=4194304);u.isBackwards?(d.sibling=s.child,s.child=d):(n=u.last,n!==null?n.sibling=d:s.child=d,u.last=d)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=sn(),n.sibling=null,o=xe.current,Y(xe,f?o&1|2:o&1),$t&&hs(s,u.treeForkCount),n):(_e(s),null);case 22:case 23:return kn(s),um(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(_e(s),s.subtreeFlags&6&&(s.flags|=8192)):_e(s),o=s.updateQueue,o!==null&&Nh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&et(oa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ds(Be),_e(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Gw(n,s){switch(Yd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ds(Be),jt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return pt(s),null;case 31:if(s.memoizedState!==null){if(kn(s),s.alternate===null)throw Error(i(340));sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(kn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return et(xe),null;case 4:return jt(),null;case 10:return ds(s.type),null;case 22:case 23:return kn(s),um(),n!==null&&et(oa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ds(Be),null;case 25:return null;default:return null}}function qv(n,s){switch(Yd(s),s.tag){case 3:ds(Be),jt();break;case 26:case 27:case 5:pt(s);break;case 4:jt();break;case 31:s.memoizedState!==null&&kn(s);break;case 13:kn(s);break;case 19:et(xe);break;case 10:ds(s.type);break;case 22:case 23:kn(s),um(),n!==null&&et(oa);break;case 24:ds(Be)}}function hu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var d=o.create,_=o.inst;u=d(),_.destroy=u}o=o.next}while(o!==f)}}catch(b){oe(s,s.return,b)}}function er(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var d=f.next;u=d;do{if((u.tag&n)===n){var _=u.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=s;var P=o,H=b;try{H()}catch(tt){oe(f,P,tt)}}}u=u.next}while(u!==d)}}catch(tt){oe(s,s.return,tt)}}function Fv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{M_(s,o)}catch(u){oe(n,n.return,u)}}}function Hv(n,s,o){o.props=fa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){oe(n,s,u)}}function fu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){oe(n,s,f)}}function Gi(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){oe(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){oe(n,s,f)}else o.current=null}function Gv(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){oe(n,n.return,f)}}function Bm(n,s,o){try{var u=n.stateNode;d1(u,n.type,o,s),u[Ze]=s}catch(f){oe(n,n.return,f)}}function Kv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&lr(n.type)||n.tag===4}function qm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Kv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&lr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fm(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ui));else if(u!==4&&(u===27&&lr(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Fm(n,s,o),n=n.sibling;n!==null;)Fm(n,s,o),n=n.sibling}function xh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&lr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(xh(n,s,o),n=n.sibling;n!==null;)xh(n,s,o),n=n.sibling}function Qv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);cn(s,u,o),s[Ue]=n,s[Ze]=o}catch(d){oe(n,n.return,d)}}var _s=!1,He=!1,Hm=!1,Yv=typeof WeakSet=="function"?WeakSet:Set,tn=null;function Kw(n,s){if(n=n.containerInfo,hp=Zh,n=a_(n),Ld(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break t}var _=0,b=-1,P=-1,H=0,tt=0,it=n,K=null;e:for(;;){for(var X;it!==o||f!==0&&it.nodeType!==3||(b=_+f),it!==d||u!==0&&it.nodeType!==3||(P=_+u),it.nodeType===3&&(_+=it.nodeValue.length),(X=it.firstChild)!==null;)K=it,it=X;for(;;){if(it===n)break e;if(K===o&&++H===f&&(b=_),K===d&&++tt===u&&(P=_),(X=it.nextSibling)!==null)break;it=K,K=it.parentNode}it=X}o=b===-1||P===-1?null:{start:b,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(fp={focusedElem:n,selectionRange:o},Zh=!1,tn=s;tn!==null;)if(s=tn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,tn=n;else for(;tn!==null;){switch(s=tn,d=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,o=s,f=d.memoizedProps,d=d.memoizedState,u=o.stateNode;try{var yt=fa(o.type,f);n=u.getSnapshotBeforeUpdate(yt,d),u.__reactInternalSnapshotBeforeUpdate=n}catch(Rt){oe(o,o.return,Rt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)pp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":pp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,tn=n;break}tn=s.return}}function $v(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ts(n,o),u&4&&hu(5,o);break;case 1:if(Ts(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){oe(o,o.return,_)}else{var f=fa(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){oe(o,o.return,_)}}u&64&&Fv(o),u&512&&fu(o,o.return);break;case 3:if(Ts(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{M_(n,s)}catch(_){oe(o,o.return,_)}}break;case 27:s===null&&u&4&&Qv(o);case 26:case 5:Ts(n,o),s===null&&u&4&&Gv(o),u&512&&fu(o,o.return);break;case 12:Ts(n,o);break;case 31:Ts(n,o),u&4&&Zv(n,o);break;case 13:Ts(n,o),u&4&&Wv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=e1.bind(null,o),E1(n,o))));break;case 22:if(u=o.memoizedState!==null||_s,!u){s=s!==null&&s.memoizedState!==null||He,f=_s;var d=He;_s=u,(He=s)&&!d?Es(n,o,(o.subtreeFlags&8772)!==0):Ts(n,o),_s=f,He=d}break;case 30:break;default:Ts(n,o)}}function Xv(n){var s=n.alternate;s!==null&&(n.alternate=null,Xv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ka(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Te=null,An=!1;function vs(n,s,o){for(o=o.child;o!==null;)Jv(n,s,o),o=o.sibling}function Jv(n,s,o){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(ri,o)}catch{}switch(o.tag){case 26:He||Gi(o,s),vs(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:He||Gi(o,s);var u=Te,f=An;lr(o.type)&&(Te=o.stateNode,An=!1),vs(n,s,o),Eu(o.stateNode),Te=u,An=f;break;case 5:He||Gi(o,s);case 6:if(u=Te,f=An,Te=null,vs(n,s,o),Te=u,An=f,Te!==null)if(An)try{(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).removeChild(o.stateNode)}catch(d){oe(o,s,d)}else try{Te.removeChild(o.stateNode)}catch(d){oe(o,s,d)}break;case 18:Te!==null&&(An?(n=Te,FT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),xo(n)):FT(Te,o.stateNode));break;case 4:u=Te,f=An,Te=o.stateNode.containerInfo,An=!0,vs(n,s,o),Te=u,An=f;break;case 0:case 11:case 14:case 15:er(2,o,s),He||er(4,o,s),vs(n,s,o);break;case 1:He||(Gi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Hv(o,s,u)),vs(n,s,o);break;case 21:vs(n,s,o);break;case 22:He=(u=He)||o.memoizedState!==null,vs(n,s,o),He=u;break;default:vs(n,s,o)}}function Zv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{xo(n)}catch(o){oe(s,s.return,o)}}}function Wv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{xo(n)}catch(o){oe(s,s.return,o)}}function Qw(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Yv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Yv),s;default:throw Error(i(435,n.tag))}}function Vh(n,s){var o=Qw(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=n1.bind(null,n,u);u.then(f,f)}})}function In(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],d=n,_=s,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(lr(b.type)){Te=b.stateNode,An=!1;break t}break;case 5:Te=b.stateNode,An=!1;break t;case 3:case 4:Te=b.stateNode.containerInfo,An=!0;break t}b=b.return}if(Te===null)throw Error(i(160));Jv(d,_,f),Te=null,An=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)tT(s,n),s=s.sibling}var pi=null;function tT(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:In(s,n),wn(n),u&4&&(er(3,n,n.return),hu(3,n),er(5,n,n.return));break;case 1:In(s,n),wn(n),u&512&&(He||o===null||Gi(o,o.return)),u&64&&_s&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=pi;if(In(s,n),wn(n),u&512&&(He||o===null||Gi(o,o.return)),u&4){var d=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":d=f.getElementsByTagName("title")[0],(!d||d[xi]||d[Ue]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(u),f.head.insertBefore(d,f.querySelector("head > title"))),cn(d,u,o),d[Ue]=n,ze(d),u=d;break t;case"link":var _=tE("link","href",f).get(u+(o.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&d.getAttribute("rel")===(o.rel==null?null:o.rel)&&d.getAttribute("title")===(o.title==null?null:o.title)&&d.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(b,1);break e}}d=f.createElement(u),cn(d,u,o),f.head.appendChild(d);break;case"meta":if(_=tE("meta","content",f).get(u+(o.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(o.content==null?null:""+o.content)&&d.getAttribute("name")===(o.name==null?null:o.name)&&d.getAttribute("property")===(o.property==null?null:o.property)&&d.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&d.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(b,1);break e}}d=f.createElement(u),cn(d,u,o),f.head.appendChild(d);break;default:throw Error(i(468,u))}d[Ue]=n,ze(d),u=d}n.stateNode=u}else eE(f,n.type,n.stateNode);else n.stateNode=WT(f,u,n.memoizedProps);else d!==u?(d===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):d.count--,u===null?eE(f,n.type,n.stateNode):WT(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Bm(n,n.memoizedProps,o.memoizedProps)}break;case 27:In(s,n),wn(n),u&512&&(He||o===null||Gi(o,o.return)),o!==null&&u&4&&Bm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(In(s,n),wn(n),u&512&&(He||o===null||Gi(o,o.return)),n.flags&32){f=n.stateNode;try{bn(f,"")}catch(yt){oe(n,n.return,yt)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Bm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Hm=!0);break;case 6:if(In(s,n),wn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(yt){oe(n,n.return,yt)}}break;case 3:if(Yh=null,f=pi,pi=Kh(s.containerInfo),In(s,n),pi=f,wn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{xo(s.containerInfo)}catch(yt){oe(n,n.return,yt)}Hm&&(Hm=!1,eT(n));break;case 4:u=pi,pi=Kh(n.stateNode.containerInfo),In(s,n),wn(n),pi=u;break;case 12:In(s,n),wn(n);break;case 31:In(s,n),wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Vh(n,u)));break;case 13:In(s,n),wn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Oh=sn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Vh(n,u)));break;case 22:f=n.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,H=_s,tt=He;if(_s=H||f,He=tt||P,In(s,n),He=tt,_s=H,wn(n),u&8192)t:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||P||_s||He||da(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){P=o=s;try{if(d=P.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=P.stateNode;var it=P.memoizedProps.style,K=it!=null&&it.hasOwnProperty("display")?it.display:null;b.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(yt){oe(P,P.return,yt)}}}else if(s.tag===6){if(o===null){P=s;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(yt){oe(P,P.return,yt)}}}else if(s.tag===18){if(o===null){P=s;try{var X=P.stateNode;f?HT(X,!0):HT(P.stateNode,!1)}catch(yt){oe(P,P.return,yt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Vh(n,o))));break;case 19:In(s,n),wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Vh(n,u)));break;case 30:break;case 21:break;default:In(s,n),wn(n)}}function wn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Kv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,d=qm(n);xh(n,d,f);break;case 5:var _=o.stateNode;o.flags&32&&(bn(_,""),o.flags&=-33);var b=qm(n);xh(n,b,_);break;case 3:case 4:var P=o.stateNode.containerInfo,H=qm(n);Fm(n,H,P);break;default:throw Error(i(161))}}catch(tt){oe(n,n.return,tt)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function eT(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;eT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ts(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)$v(n,s.alternate,s),s=s.sibling}function da(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:er(4,s,s.return),da(s);break;case 1:Gi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Hv(s,s.return,o),da(s);break;case 27:Eu(s.stateNode);case 26:case 5:Gi(s,s.return),da(s);break;case 22:s.memoizedState===null&&da(s);break;case 30:da(s);break;default:da(s)}n=n.sibling}}function Es(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,d=s,_=d.flags;switch(d.tag){case 0:case 11:case 15:Es(f,d,o),hu(4,d);break;case 1:if(Es(f,d,o),u=d,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){oe(u,u.return,H)}if(u=d,f=u.updateQueue,f!==null){var b=u.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)V_(P[f],b)}catch(H){oe(u,u.return,H)}}o&&_&64&&Fv(d),fu(d,d.return);break;case 27:Qv(d);case 26:case 5:Es(f,d,o),o&&u===null&&_&4&&Gv(d),fu(d,d.return);break;case 12:Es(f,d,o);break;case 31:Es(f,d,o),o&&_&4&&Zv(f,d);break;case 13:Es(f,d,o),o&&_&4&&Wv(f,d);break;case 22:d.memoizedState===null&&Es(f,d,o),fu(d,d.return);break;case 30:break;default:Es(f,d,o)}s=s.sibling}}function Gm(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Zl(o))}function Km(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Zl(n))}function gi(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nT(n,s,o,u),s=s.sibling}function nT(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:gi(n,s,o,u),f&2048&&hu(9,s);break;case 1:gi(n,s,o,u);break;case 3:gi(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Zl(n)));break;case 12:if(f&2048){gi(n,s,o,u),n=s.stateNode;try{var d=s.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(P){oe(s,s.return,P)}}else gi(n,s,o,u);break;case 31:gi(n,s,o,u);break;case 13:gi(n,s,o,u);break;case 23:break;case 22:d=s.stateNode,_=s.alternate,s.memoizedState!==null?d._visibility&2?gi(n,s,o,u):du(n,s):d._visibility&2?gi(n,s,o,u):(d._visibility|=2,To(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Gm(_,s);break;case 24:gi(n,s,o,u),f&2048&&Km(s.alternate,s);break;default:gi(n,s,o,u)}}function To(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=n,_=s,b=o,P=u,H=_.flags;switch(_.tag){case 0:case 11:case 15:To(d,_,b,P,f),hu(8,_);break;case 23:break;case 22:var tt=_.stateNode;_.memoizedState!==null?tt._visibility&2?To(d,_,b,P,f):du(d,_):(tt._visibility|=2,To(d,_,b,P,f)),f&&H&2048&&Gm(_.alternate,_);break;case 24:To(d,_,b,P,f),f&&H&2048&&Km(_.alternate,_);break;default:To(d,_,b,P,f)}s=s.sibling}}function du(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:du(o,u),f&2048&&Gm(u.alternate,u);break;case 24:du(o,u),f&2048&&Km(u.alternate,u);break;default:du(o,u)}s=s.sibling}}var mu=8192;function Eo(n,s,o){if(n.subtreeFlags&mu)for(n=n.child;n!==null;)iT(n,s,o),n=n.sibling}function iT(n,s,o){switch(n.tag){case 26:Eo(n,s,o),n.flags&mu&&n.memoizedState!==null&&M1(o,pi,n.memoizedState,n.memoizedProps);break;case 5:Eo(n,s,o);break;case 3:case 4:var u=pi;pi=Kh(n.stateNode.containerInfo),Eo(n,s,o),pi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=mu,mu=16777216,Eo(n,s,o),mu=u):Eo(n,s,o));break;default:Eo(n,s,o)}}function sT(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function pu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];tn=u,aT(u,n)}sT(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)rT(n),n=n.sibling}function rT(n){switch(n.tag){case 0:case 11:case 15:pu(n),n.flags&2048&&er(9,n,n.return);break;case 3:pu(n);break;case 12:pu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Mh(n)):pu(n);break;default:pu(n)}}function Mh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];tn=u,aT(u,n)}sT(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:er(8,s,s.return),Mh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Mh(s));break;default:Mh(s)}n=n.sibling}}function aT(n,s){for(;tn!==null;){var o=tn;switch(o.tag){case 0:case 11:case 15:er(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Zl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,tn=u;else t:for(o=n;tn!==null;){u=tn;var f=u.sibling,d=u.return;if(Xv(u),u===o){tn=null;break t}if(f!==null){f.return=d,tn=f;break t}tn=d}}}var Yw={getCacheForType:function(n){var s=ln(Be),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return ln(Be).controller.signal}},$w=typeof WeakMap=="function"?WeakMap:Map,ie=0,pe=null,Bt=null,Ht=0,ae=0,Ln=null,nr=!1,So=!1,Qm=!1,Ss=0,we=0,ir=0,ma=0,Ym=0,Un=0,bo=0,gu=null,Rn=null,$m=!1,Oh=0,oT=0,Ph=1/0,kh=null,sr=null,$e=0,rr=null,Ao=null,bs=0,Xm=0,Jm=null,lT=null,yu=0,Zm=null;function zn(){return(ie&2)!==0&&Ht!==0?Ht&-Ht:J.T!==null?sp():Lc()}function uT(){if(Un===0)if((Ht&536870912)===0||$t){var n=Br;Br<<=1,(Br&3932160)===0&&(Br=262144),Un=n}else Un=536870912;return n=Pn.current,n!==null&&(n.flags|=32),Un}function Cn(n,s,o){(n===pe&&(ae===2||ae===9)||n.cancelPendingCommit!==null)&&(Io(n,0),ar(n,Ht,Un,!1)),qr(n,o),((ie&2)===0||n!==pe)&&(n===pe&&((ie&2)===0&&(ma|=o),we===4&&ar(n,Ht,Un,!1)),Ki(n))}function cT(n,s,o){if((ie&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||ai(n,s),f=u?Zw(n,s):tp(n,s,!0),d=u;do{if(f===0){So&&!u&&ar(n,s,0,!1);break}else{if(o=n.current.alternate,d&&!Xw(o)){f=tp(n,s,!1),d=!1;continue}if(f===2){if(d=s,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;t:{var b=n;f=gu;var P=b.current.memoizedState.isDehydrated;if(P&&(Io(b,_).flags|=256),_=tp(b,_,!1),_!==2){if(Qm&&!P){b.errorRecoveryDisabledLanes|=d,ma|=d,f=4;break t}d=Rn,Rn=f,d!==null&&(Rn===null?Rn=d:Rn.push.apply(Rn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){Io(n,0),ar(n,s,0,!0);break}t:{switch(u=n,d=f,d){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ar(u,s,Un,!nr);break t;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Oh+300-sn(),10<f)){if(ar(u,s,Un,!nr),Ci(u,0,!0)!==0)break t;bs=s,u.timeoutHandle=BT(hT.bind(null,u,o,Rn,kh,$m,s,Un,ma,bo,nr,d,"Throttled",-0,0),f);break t}hT(u,o,Rn,kh,$m,s,Un,ma,bo,nr,d,null,-0,0)}}break}while(!0);Ki(n)}function hT(n,s,o,u,f,d,_,b,P,H,tt,it,K,X){if(n.timeoutHandle=-1,it=s.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},iT(s,d,it);var yt=(d&62914560)===d?Oh-sn():(d&4194048)===d?oT-sn():0;if(yt=O1(it,yt),yt!==null){bs=d,n.cancelPendingCommit=yt(vT.bind(null,n,s,d,o,u,f,_,b,P,tt,it,null,K,X)),ar(n,d,_,!H);return}}vT(n,s,d,o,u,f,_,b,P)}function Xw(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],d=f.getSnapshot;f=f.value;try{if(!Mn(d(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ar(n,s,o,u){s&=~Ym,s&=~ma,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var d=31-De(f),_=1<<d;u[d]=-1,f&=~_}o!==0&&Fr(n,o,s)}function Lh(){return(ie&6)===0?(_u(0),!1):!0}function Wm(){if(Bt!==null){if(ae===0)var n=Bt.return;else n=Bt,fs=ra=null,pm(n),po=null,tu=0,n=Bt;for(;n!==null;)qv(n.alternate,n),n=n.return;Bt=null}}function Io(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,g1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),bs=0,Wm(),pe=n,Bt=o=cs(n.current,null),Ht=s,ae=0,Ln=null,nr=!1,So=ai(n,s),Qm=!1,bo=Un=Ym=ma=ir=we=0,Rn=gu=null,$m=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-De(u),d=1<<f;s|=n[f],u&=~d}return Ss=s,sh(),o}function fT(n,s){Pt=null,J.H=lu,s===mo||s===fh?(s=C_(),ae=3):s===im?(s=C_(),ae=4):ae=s===xm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ln=s,Bt===null&&(we=1,wh(n,Jn(s,n.current)))}function dT(){var n=Pn.current;return n===null?!0:(Ht&4194048)===Ht?ei===null:(Ht&62914560)===Ht||(Ht&536870912)!==0?n===ei:!1}function mT(){var n=J.H;return J.H=lu,n===null?lu:n}function pT(){var n=J.A;return J.A=Yw,n}function Uh(){we=4,nr||(Ht&4194048)!==Ht&&Pn.current!==null||(So=!0),(ir&134217727)===0&&(ma&134217727)===0||pe===null||ar(pe,Ht,Un,!1)}function tp(n,s,o){var u=ie;ie|=2;var f=mT(),d=pT();(pe!==n||Ht!==s)&&(kh=null,Io(n,s)),s=!1;var _=we;t:do try{if(ae!==0&&Bt!==null){var b=Bt,P=Ln;switch(ae){case 8:Wm(),_=6;break t;case 3:case 2:case 9:case 6:Pn.current===null&&(s=!0);var H=ae;if(ae=0,Ln=null,wo(n,b,P,H),o&&So){_=0;break t}break;default:H=ae,ae=0,Ln=null,wo(n,b,P,H)}}Jw(),_=we;break}catch(tt){fT(n,tt)}while(!0);return s&&n.shellSuspendCounter++,fs=ra=null,ie=u,J.H=f,J.A=d,Bt===null&&(pe=null,Ht=0,sh()),_}function Jw(){for(;Bt!==null;)gT(Bt)}function Zw(n,s){var o=ie;ie|=2;var u=mT(),f=pT();pe!==n||Ht!==s?(kh=null,Ph=sn()+500,Io(n,s)):So=ai(n,s);t:do try{if(ae!==0&&Bt!==null){s=Bt;var d=Ln;e:switch(ae){case 1:ae=0,Ln=null,wo(n,s,d,1);break;case 2:case 9:if(w_(d)){ae=0,Ln=null,yT(s);break}s=function(){ae!==2&&ae!==9||pe!==n||(ae=7),Ki(n)},d.then(s,s);break t;case 3:ae=7;break t;case 4:ae=5;break t;case 7:w_(d)?(ae=0,Ln=null,yT(s)):(ae=0,Ln=null,wo(n,s,d,7));break;case 5:var _=null;switch(Bt.tag){case 26:_=Bt.memoizedState;case 5:case 27:var b=Bt;if(_?nE(_):b.stateNode.complete){ae=0,Ln=null;var P=b.sibling;if(P!==null)Bt=P;else{var H=b.return;H!==null?(Bt=H,zh(H)):Bt=null}break e}}ae=0,Ln=null,wo(n,s,d,5);break;case 6:ae=0,Ln=null,wo(n,s,d,6);break;case 8:Wm(),we=6;break t;default:throw Error(i(462))}}Ww();break}catch(tt){fT(n,tt)}while(!0);return fs=ra=null,J.H=u,J.A=f,ie=o,Bt!==null?0:(pe=null,Ht=0,sh(),we)}function Ww(){for(;Bt!==null&&!Cl();)gT(Bt)}function gT(n){var s=jv(n.alternate,n,Ss);n.memoizedProps=n.pendingProps,s===null?zh(n):Bt=s}function yT(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Ov(o,s,s.pendingProps,s.type,void 0,Ht);break;case 11:s=Ov(o,s,s.pendingProps,s.type.render,s.ref,Ht);break;case 5:pm(s);default:qv(o,s),s=Bt=p_(s,Ss),s=jv(o,s,Ss)}n.memoizedProps=n.pendingProps,s===null?zh(n):Bt=s}function wo(n,s,o,u){fs=ra=null,pm(s),po=null,tu=0;var f=s.return;try{if(Bw(n,f,s,o,Ht)){we=1,wh(n,Jn(o,n.current)),Bt=null;return}}catch(d){if(f!==null)throw Bt=f,d;we=1,wh(n,Jn(o,n.current)),Bt=null;return}s.flags&32768?($t||u===1?n=!0:So||(Ht&536870912)!==0?n=!1:(nr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),_T(s,n)):zh(s)}function zh(n){var s=n;do{if((s.flags&32768)!==0){_T(s,nr);return}n=s.return;var o=Hw(s.alternate,s,Ss);if(o!==null){Bt=o;return}if(s=s.sibling,s!==null){Bt=s;return}Bt=s=n}while(s!==null);we===0&&(we=5)}function _T(n,s){do{var o=Gw(n.alternate,n);if(o!==null){o.flags&=32767,Bt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Bt=n;return}Bt=n=o}while(n!==null);we=6,Bt=null}function vT(n,s,o,u,f,d,_,b,P){n.cancelPendingCommit=null;do jh();while($e!==0);if((ie&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(d=s.lanes|s.childLanes,d|=qd,Md(n,o,d,_,b,P),n===pe&&(Bt=pe=null,Ht=0),Ao=s,rr=n,bs=o,Xm=d,Jm=f,lT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,i1(Ai,function(){return AT(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=lt.p,lt.p=2,_=ie,ie|=4;try{Kw(n,s,o)}finally{ie=_,lt.p=f,J.T=u}}$e=1,TT(),ET(),ST()}}function TT(){if($e===1){$e=0;var n=rr,s=Ao,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=lt.p;lt.p=2;var f=ie;ie|=4;try{tT(s,n);var d=fp,_=a_(n.containerInfo),b=d.focusedElem,P=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&r_(b.ownerDocument.documentElement,b)){if(P!==null&&Ld(b)){var H=P.start,tt=P.end;if(tt===void 0&&(tt=H),"selectionStart"in b)b.selectionStart=H,b.selectionEnd=Math.min(tt,b.value.length);else{var it=b.ownerDocument||document,K=it&&it.defaultView||window;if(K.getSelection){var X=K.getSelection(),yt=b.textContent.length,Rt=Math.min(P.start,yt),me=P.end===void 0?Rt:Math.min(P.end,yt);!X.extend&&Rt>me&&(_=me,me=Rt,Rt=_);var j=s_(b,Rt),L=s_(b,me);if(j&&L&&(X.rangeCount!==1||X.anchorNode!==j.node||X.anchorOffset!==j.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var F=it.createRange();F.setStart(j.node,j.offset),X.removeAllRanges(),Rt>me?(X.addRange(F),X.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),X.addRange(F))}}}}for(it=[],X=b;X=X.parentNode;)X.nodeType===1&&it.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<it.length;b++){var nt=it[b];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}Zh=!!hp,fp=hp=null}finally{ie=f,lt.p=u,J.T=o}}n.current=s,$e=2}}function ET(){if($e===2){$e=0;var n=rr,s=Ao,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=lt.p;lt.p=2;var f=ie;ie|=4;try{$v(n,s.alternate,s)}finally{ie=f,lt.p=u,J.T=o}}$e=3}}function ST(){if($e===4||$e===3){$e=0,jr();var n=rr,s=Ao,o=bs,u=lT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?$e=5:($e=0,Ao=rr=null,bT(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(sr=null),as(o),s=s.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(ri,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=J.T,f=lt.p,lt.p=2,J.T=null;try{for(var d=n.onRecoverableError,_=0;_<u.length;_++){var b=u[_];d(b.value,{componentStack:b.stack})}}finally{J.T=s,lt.p=f}}(bs&3)!==0&&jh(),Ki(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Zm?yu++:(yu=0,Zm=n):yu=0,_u(0)}}function bT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Zl(s)))}function jh(){return TT(),ET(),ST(),AT()}function AT(){if($e!==5)return!1;var n=rr,s=Xm;Xm=0;var o=as(bs),u=J.T,f=lt.p;try{lt.p=32>o?32:o,J.T=null,o=Jm,Jm=null;var d=rr,_=bs;if($e=0,Ao=rr=null,bs=0,(ie&6)!==0)throw Error(i(331));var b=ie;if(ie|=4,rT(d.current),nT(d,d.current,_,o),ie=b,_u(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(ri,d)}catch{}return!0}finally{lt.p=f,J.T=u,bT(n,s)}}function IT(n,s,o){s=Jn(o,s),s=Nm(n.stateNode,s,2),n=Zs(n,s,2),n!==null&&(qr(n,2),Ki(n))}function oe(n,s,o){if(n.tag===3)IT(n,n,o);else for(;s!==null;){if(s.tag===3){IT(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(sr===null||!sr.has(u))){n=Jn(o,n),o=wv(2),u=Zs(s,o,2),u!==null&&(Rv(o,u,s,n),qr(u,2),Ki(u));break}}s=s.return}}function ep(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new $w;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Qm=!0,f.add(o),n=t1.bind(null,n,s,o),s.then(n,n))}function t1(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,pe===n&&(Ht&o)===o&&(we===4||we===3&&(Ht&62914560)===Ht&&300>sn()-Oh?(ie&2)===0&&Io(n,0):Ym|=o,bo===Ht&&(bo=0)),Ki(n)}function wT(n,s){s===0&&(s=kc()),n=na(n,s),n!==null&&(qr(n,s),Ki(n))}function e1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),wT(n,o)}function n1(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),wT(n,o)}function i1(n,s){return Ce(n,s)}var Bh=null,Ro=null,np=!1,qh=!1,ip=!1,or=0;function Ki(n){n!==Ro&&n.next===null&&(Ro===null?Bh=Ro=n:Ro=Ro.next=n),qh=!0,np||(np=!0,r1())}function _u(n,s){if(!ip&&qh){ip=!0;do for(var o=!1,u=Bh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var d=0;else{var _=u.suspendedLanes,b=u.pingedLanes;d=(1<<31-De(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(o=!0,NT(u,d))}else d=Ht,d=Ci(u,u===pe?d:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(d&3)===0||ai(u,d)||(o=!0,NT(u,d));u=u.next}while(o);ip=!1}}function s1(){RT()}function RT(){qh=np=!1;var n=0;or!==0&&p1()&&(n=or);for(var s=sn(),o=null,u=Bh;u!==null;){var f=u.next,d=CT(u,s);d===0?(u.next=null,o===null?Bh=f:o.next=f,f===null&&(Ro=o)):(o=u,(n!==0||(d&3)!==0)&&(qh=!0)),u=f}$e!==0&&$e!==5||_u(n),or!==0&&(or=0)}function CT(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-De(d),b=1<<_,P=f[_];P===-1?((b&o)===0||(b&u)!==0)&&(f[_]=Vd(b,s)):P<=s&&(n.expiredLanes|=b),d&=~b}if(s=pe,o=Ht,o=Ci(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(ae===2||ae===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Hn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ai(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Hn(u),as(o)){case 2:case 8:o=bi;break;case 32:o=Ai;break;case 268435456:o=be;break;default:o=Ai}return u=DT.bind(null,n),o=Ce(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Hn(u),n.callbackPriority=2,n.callbackNode=null,2}function DT(n,s){if($e!==0&&$e!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(jh()&&n.callbackNode!==o)return null;var u=Ht;return u=Ci(n,n===pe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(cT(n,u,s),CT(n,sn()),n.callbackNode!=null&&n.callbackNode===o?DT.bind(null,n):null)}function NT(n,s){if(jh())return null;cT(n,s,!0)}function r1(){y1(function(){(ie&6)!==0?Ce(Si,s1):RT()})}function sp(){if(or===0){var n=ho;n===0&&(n=wi,wi<<=1,(wi&261888)===0&&(wi=256)),or=n}return or}function xT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Xa(""+n)}function VT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function a1(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var d=xT((f[Ze]||null).action),_=u.submitter;_&&(s=(s=_[Ze]||null)?xT(s.formAction):_.getAttribute("formAction"),s!==null&&(d=s,_=null));var b=new zi("action","action",null,u,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(or!==0){var P=_?VT(f,_):new FormData(f);Am(o,{pending:!0,data:P,method:f.method,action:d},null,P)}}else typeof d=="function"&&(b.preventDefault(),P=_?VT(f,_):new FormData(f),Am(o,{pending:!0,data:P,method:f.method,action:d},d,P))},currentTarget:f}]})}}for(var rp=0;rp<Bd.length;rp++){var ap=Bd[rp],o1=ap.toLowerCase(),l1=ap[0].toUpperCase()+ap.slice(1);mi(o1,"on"+l1)}mi(u_,"onAnimationEnd"),mi(c_,"onAnimationIteration"),mi(h_,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(Aw,"onTransitionRun"),mi(Iw,"onTransitionStart"),mi(ww,"onTransitionCancel"),mi(f_,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function MT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;t:{var d=void 0;if(s)for(var _=u.length-1;0<=_;_--){var b=u[_],P=b.instance,H=b.currentTarget;if(b=b.listener,P!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=H;try{d(f)}catch(tt){ih(tt)}f.currentTarget=null,d=P}else for(_=0;_<u.length;_++){if(b=u[_],P=b.instance,H=b.currentTarget,b=b.listener,P!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=H;try{d(f)}catch(tt){ih(tt)}f.currentTarget=null,d=P}}}}function qt(n,s){var o=s[Ga];o===void 0&&(o=s[Ga]=new Set);var u=n+"__bubble";o.has(u)||(OT(s,n,2,!1),o.add(u))}function op(n,s,o){var u=0;s&&(u|=4),OT(o,n,u,s)}var Fh="_reactListening"+Math.random().toString(36).slice(2);function lp(n){if(!n[Fh]){n[Fh]=!0,xl.forEach(function(o){o!=="selectionchange"&&(u1.has(o)||op(o,!1,n),op(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Fh]||(s[Fh]=!0,op("selectionchange",!1,s))}}function OT(n,s,o,u){switch(uE(s)){case 2:var f=L1;break;case 8:f=U1;break;default:f=bp}o=f.bind(null,s,o,n),f=void 0,!Yr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function up(n,s,o,u,f){var d=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var b=u.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=u.return;_!==null;){var P=_.tag;if((P===3||P===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Vi(b),_===null)return;if(P=_.tag,P===5||P===6||P===26||P===27){u=d=_;continue t}b=b.parentNode}}u=u.return}qs(function(){var H=d,tt=Qn(o),it=[];t:{var K=d_.get(n);if(K!==void 0){var X=zi,yt=n;switch(n){case"keypress":if(Xr(o)===0)break t;case"keydown":case"keyup":X=th;break;case"focusin":yt="focus",X=Zr;break;case"focusout":yt="blur",X=Zr;break;case"beforeblur":case"afterblur":X=Zr;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case u_:case c_:case h_:X=Qc;break;case f_:X=w;break;case"scroll":case"scrollend":X=Fl;break;case"wheel":X=$;break;case"copy":case"cut":case"paste":X=Yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=us;break;case"toggle":case"beforetoggle":X=Ot}var Rt=(s&4)!==0,me=!Rt&&(n==="scroll"||n==="scrollend"),j=Rt?K!==null?K+"Capture":null:K;Rt=[];for(var L=H,F;L!==null;){var nt=L;if(F=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||F===null||j===null||(nt=ci(L,j),nt!=null&&Rt.push(Tu(L,nt,F))),me)break;L=L.return}0<Rt.length&&(K=new X(K,yt,null,o,tt),it.push({event:K,listeners:Rt}))}}if((s&7)===0){t:{if(K=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",K&&o!==jl&&(yt=o.relatedTarget||o.fromElement)&&(Vi(yt)||yt[Ni]))break t;if((X||K)&&(K=tt.window===tt?tt:(K=tt.ownerDocument)?K.defaultView||K.parentWindow:window,X?(yt=o.relatedTarget||o.toElement,X=H,yt=yt?Vi(yt):null,yt!==null&&(me=l(yt),Rt=yt.tag,yt!==me||Rt!==5&&Rt!==27&&Rt!==6)&&(yt=null)):(X=null,yt=H),X!==yt)){if(Rt=Hl,nt="onMouseLeave",j="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Rt=us,nt="onPointerLeave",j="onPointerEnter",L="pointer"),me=X==null?K:xn(X),F=yt==null?K:xn(yt),K=new Rt(nt,L+"leave",X,o,tt),K.target=me,K.relatedTarget=F,nt=null,Vi(tt)===H&&(Rt=new Rt(j,L+"enter",yt,o,tt),Rt.target=F,Rt.relatedTarget=me,nt=Rt),me=nt,X&&yt)e:{for(Rt=c1,j=X,L=yt,F=0,nt=j;nt;nt=Rt(nt))F++;nt=0;for(var At=L;At;At=Rt(At))nt++;for(;0<F-nt;)j=Rt(j),F--;for(;0<nt-F;)L=Rt(L),nt--;for(;F--;){if(j===L||L!==null&&j===L.alternate){Rt=j;break e}j=Rt(j),L=Rt(L)}Rt=null}else Rt=null;X!==null&&PT(it,K,X,Rt,!1),yt!==null&&me!==null&&PT(it,me,yt,Rt,!0)}}t:{if(K=H?xn(H):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var Wt=Zy;else if(Xy(K))if(Wy)Wt=Ew;else{Wt=vw;var Et=_w}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?H&&$a(H.elementType)&&(Wt=Zy):Wt=Tw;if(Wt&&(Wt=Wt(n,H))){Jy(it,Wt,o,tt);break t}Et&&Et(n,K,H),n==="focusout"&&H&&K.type==="number"&&H.memoizedProps.value!=null&&Ll(K,"number",K.value)}switch(Et=H?xn(H):window,n){case"focusin":(Xy(Et)||Et.contentEditable==="true")&&(io=Et,Ud=H,$l=null);break;case"focusout":$l=Ud=io=null;break;case"mousedown":zd=!0;break;case"contextmenu":case"mouseup":case"dragend":zd=!1,o_(it,o,tt);break;case"selectionchange":if(bw)break;case"keydown":case"keyup":o_(it,o,tt)}var Lt;if(ne)t:{switch(n){case"compositionstart":var Gt="onCompositionStart";break t;case"compositionend":Gt="onCompositionEnd";break t;case"compositionupdate":Gt="onCompositionUpdate";break t}Gt=void 0}else no?Wr(n,o)&&(Gt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Gt="onCompositionStart");Gt&&(qi&&o.locale!=="ko"&&(no||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&no&&(Lt=ql()):(Ui=tt,Bl="value"in Ui?Ui.value:Ui.textContent,no=!0)),Et=Hh(H,Gt),0<Et.length&&(Gt=new Bi(Gt,n,null,o,tt),it.push({event:Gt,listeners:Et}),Lt?Gt.data=Lt:(Lt=eo(o),Lt!==null&&(Gt.data=Lt)))),(Lt=$n?mw(n,o):pw(n,o))&&(Gt=Hh(H,"onBeforeInput"),0<Gt.length&&(Et=new Bi("onBeforeInput","beforeinput",null,o,tt),it.push({event:Et,listeners:Gt}),Et.data=Lt)),a1(it,n,H,o,tt)}MT(it,s)})}function Tu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Hh(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ci(n,o),f!=null&&u.unshift(Tu(n,f,d)),f=ci(n,s),f!=null&&u.push(Tu(n,f,d))),n.tag===3)return u;n=n.return}return[]}function c1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function PT(n,s,o,u,f){for(var d=s._reactName,_=[];o!==null&&o!==u;){var b=o,P=b.alternate,H=b.stateNode;if(b=b.tag,P!==null&&P===u)break;b!==5&&b!==26&&b!==27||H===null||(P=H,f?(H=ci(o,d),H!=null&&_.unshift(Tu(o,H,P))):f||(H=ci(o,d),H!=null&&_.push(Tu(o,H,P)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var h1=/\r\n?/g,f1=/\u0000|\uFFFD/g;function kT(n){return(typeof n=="string"?n:""+n).replace(h1,`
`).replace(f1,"")}function LT(n,s){return s=kT(s),kT(n)===s}function de(n,s,o,u,f,d){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||bn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&bn(n,""+u);break;case"className":Vn(n,"class",u);break;case"tabIndex":Vn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(n,o,u);break;case"style":zl(n,u,d);break;case"data":if(s!=="object"){Vn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Xa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(o==="formAction"?(s!=="input"&&de(n,s,"name",f.name,f,null),de(n,s,"formEncType",f.formEncType,f,null),de(n,s,"formMethod",f.formMethod,f,null),de(n,s,"formTarget",f.formTarget,f,null)):(de(n,s,"encType",f.encType,f,null),de(n,s,"method",f.method,f,null),de(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Xa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ui);break;case"onScroll":u!=null&&qt("scroll",n);break;case"onScrollEnd":u!=null&&qt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Xa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":qt("beforetoggle",n),qt("toggle",n),Qa(n,"popover",u);break;case"xlinkActuate":je(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":je(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":je(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":je(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":je(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":je(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":je(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":je(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":je(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qa(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Hc.get(o)||o,Qa(n,o,u))}}function cp(n,s,o,u,f,d){switch(o){case"style":zl(n,u,d);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?bn(n,u):(typeof u=="number"||typeof u=="bigint")&&bn(n,""+u);break;case"onScroll":u!=null&&qt("scroll",n);break;case"onScrollEnd":u!=null&&qt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vl.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),d=n[Ze]||null,d=d!=null?d[o]:null,typeof d=="function"&&n.removeEventListener(s,d,f),typeof u=="function")){typeof d!="function"&&d!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Qa(n,o,u)}}}function cn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",n),qt("load",n);var u=!1,f=!1,d;for(d in o)if(o.hasOwnProperty(d)){var _=o[d];if(_!=null)switch(d){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:de(n,s,d,_,o,null)}}f&&de(n,s,"srcSet",o.srcSet,o,null),u&&de(n,s,"src",o.src,o,null);return;case"input":qt("invalid",n);var b=d=_=f=null,P=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var tt=o[u];if(tt!=null)switch(u){case"name":f=tt;break;case"type":_=tt;break;case"checked":P=tt;break;case"defaultChecked":H=tt;break;case"value":d=tt;break;case"defaultValue":b=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,s));break;default:de(n,s,u,tt,o,null)}}Bc(n,d,b,P,H,_,f,!1);return;case"select":qt("invalid",n),u=_=d=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":u=b;default:de(n,s,f,b,o,null)}s=d,o=_,n.multiple=!!u,s!=null?Us(n,!!u,s,!1):o!=null&&Us(n,!!u,o,!0);return;case"textarea":qt("invalid",n),d=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(b=o[_],b!=null))switch(_){case"value":u=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:de(n,s,_,b,o,null)}zs(n,u,f,d);return;case"option":for(P in o)if(o.hasOwnProperty(P)&&(u=o[P],u!=null))switch(P){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:de(n,s,P,u,o,null)}return;case"dialog":qt("beforetoggle",n),qt("toggle",n),qt("cancel",n),qt("close",n);break;case"iframe":case"object":qt("load",n);break;case"video":case"audio":for(u=0;u<vu.length;u++)qt(vu[u],n);break;case"image":qt("error",n),qt("load",n);break;case"details":qt("toggle",n);break;case"embed":case"source":case"link":qt("error",n),qt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:de(n,s,H,u,o,null)}return;default:if($a(s)){for(tt in o)o.hasOwnProperty(tt)&&(u=o[tt],u!==void 0&&cp(n,s,tt,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&de(n,s,b,u,o,null))}function d1(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,P=null,H=null,tt=null;for(X in o){var it=o[X];if(o.hasOwnProperty(X)&&it!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":P=it;default:u.hasOwnProperty(X)||de(n,s,X,null,u,it)}}for(var K in u){var X=u[K];if(it=o[K],u.hasOwnProperty(K)&&(X!=null||it!=null))switch(K){case"type":d=X;break;case"name":f=X;break;case"checked":H=X;break;case"defaultChecked":tt=X;break;case"value":_=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==it&&de(n,s,K,X,u,it)}}Ya(n,_,b,P,H,tt,d,f);return;case"select":X=_=b=K=null;for(d in o)if(P=o[d],o.hasOwnProperty(d)&&P!=null)switch(d){case"value":break;case"multiple":X=P;default:u.hasOwnProperty(d)||de(n,s,d,null,u,P)}for(f in u)if(d=u[f],P=o[f],u.hasOwnProperty(f)&&(d!=null||P!=null))switch(f){case"value":K=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==P&&de(n,s,f,d,u,P)}s=b,o=_,u=X,K!=null?Us(n,!!o,K,!1):!!u!=!!o&&(s!=null?Us(n,!!o,s,!0):Us(n,!!o,o?[]:"",!1));return;case"textarea":X=K=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:de(n,s,b,null,u,f)}for(_ in u)if(f=u[_],d=o[_],u.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":K=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==d&&de(n,s,_,f,u,d)}qc(n,K,X);return;case"option":for(var yt in o)if(K=o[yt],o.hasOwnProperty(yt)&&K!=null&&!u.hasOwnProperty(yt))switch(yt){case"selected":n.selected=!1;break;default:de(n,s,yt,null,u,K)}for(P in u)if(K=u[P],X=o[P],u.hasOwnProperty(P)&&K!==X&&(K!=null||X!=null))switch(P){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:de(n,s,P,K,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in o)K=o[Rt],o.hasOwnProperty(Rt)&&K!=null&&!u.hasOwnProperty(Rt)&&de(n,s,Rt,null,u,K);for(H in u)if(K=u[H],X=o[H],u.hasOwnProperty(H)&&K!==X&&(K!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:de(n,s,H,K,u,X)}return;default:if($a(s)){for(var me in o)K=o[me],o.hasOwnProperty(me)&&K!==void 0&&!u.hasOwnProperty(me)&&cp(n,s,me,void 0,u,K);for(tt in u)K=u[tt],X=o[tt],!u.hasOwnProperty(tt)||K===X||K===void 0&&X===void 0||cp(n,s,tt,K,u,X);return}}for(var j in o)K=o[j],o.hasOwnProperty(j)&&K!=null&&!u.hasOwnProperty(j)&&de(n,s,j,null,u,K);for(it in u)K=u[it],X=o[it],!u.hasOwnProperty(it)||K===X||K==null&&X==null||de(n,s,it,K,u,X)}function UT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function m1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&UT(_)){for(_=0,b=f.responseEnd,u+=1;u<o.length;u++){var P=o[u],H=P.startTime;if(H>b)break;var tt=P.transferSize,it=P.initiatorType;tt&&UT(it)&&(P=P.responseEnd,_+=tt*(P<b?1:(b-H)/(P-H)))}if(--u,s+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var hp=null,fp=null;function Gh(n){return n.nodeType===9?n:n.ownerDocument}function zT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function dp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mp=null;function p1(){var n=window.event;return n&&n.type==="popstate"?n===mp?!1:(mp=n,!0):(mp=null,!1)}var BT=typeof setTimeout=="function"?setTimeout:void 0,g1=typeof clearTimeout=="function"?clearTimeout:void 0,qT=typeof Promise=="function"?Promise:void 0,y1=typeof queueMicrotask=="function"?queueMicrotask:typeof qT<"u"?function(n){return qT.resolve(null).then(n).catch(_1)}:BT;function _1(n){setTimeout(function(){throw n})}function lr(n){return n==="head"}function FT(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),xo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Eu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Eu(o);for(var d=o.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[xi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||o.removeChild(d),d=_}}else o==="body"&&Eu(n.ownerDocument.body);o=f}while(o);xo(s)}function HT(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function pp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":pp(o),Ka(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function v1(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[xi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ni(n.nextSibling),n===null)break}return null}function T1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ni(n.nextSibling),n===null))return null;return n}function GT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=ni(n.nextSibling),n===null))return null;return n}function gp(n){return n.data==="$?"||n.data==="$~"}function yp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function E1(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ni(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var _p=null;function KT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return ni(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function QT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function YT(n,s,o){switch(s=Gh(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Eu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ka(n)}var ii=new Map,$T=new Set;function Kh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var As=lt.d;lt.d={f:S1,r:b1,D:A1,C:I1,L:w1,m:R1,X:D1,S:C1,M:N1};function S1(){var n=As.f(),s=Lh();return n||s}function b1(n){var s=Kn(n);s!==null&&s.tag===5&&s.type==="form"?fv(s):As.r(n)}var Co=typeof document>"u"?null:document;function XT(n,s,o){var u=Co;if(u&&typeof s=="string"&&s){var f=Sn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),$T.has(f)||($T.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),cn(s,"link",n),ze(s),u.head.appendChild(s)))}}function A1(n){As.D(n),XT("dns-prefetch",n,null)}function I1(n,s){As.C(n,s),XT("preconnect",n,s)}function w1(n,s,o){As.L(n,s,o);var u=Co;if(u&&n&&s){var f='link[rel="preload"][as="'+Sn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Sn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Sn(o.imageSizes)+'"]')):f+='[href="'+Sn(n)+'"]';var d=f;switch(s){case"style":d=Do(n);break;case"script":d=No(n)}ii.has(d)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),ii.set(d,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Su(d))||s==="script"&&u.querySelector(bu(d))||(s=u.createElement("link"),cn(s,"link",n),ze(s),u.head.appendChild(s)))}}function R1(n,s){As.m(n,s);var o=Co;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Sn(u)+'"][href="'+Sn(n)+'"]',d=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=No(n)}if(!ii.has(d)&&(n=E({rel:"modulepreload",href:n},s),ii.set(d,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(bu(d)))return}u=o.createElement("link"),cn(u,"link",n),ze(u),o.head.appendChild(u)}}}function C1(n,s,o){As.S(n,s,o);var u=Co;if(u&&n){var f=Mi(u).hoistableStyles,d=Do(n);s=s||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=u.querySelector(Su(d)))b.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=ii.get(d))&&vp(n,o);var P=_=u.createElement("link");ze(P),cn(P,"link",n),P._p=new Promise(function(H,tt){P.onload=H,P.onerror=tt}),P.addEventListener("load",function(){b.loading|=1}),P.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Qh(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function D1(n,s){As.X(n,s);var o=Co;if(o&&n){var u=Mi(o).hoistableScripts,f=No(n),d=u.get(f);d||(d=o.querySelector(bu(f)),d||(n=E({src:n,async:!0},s),(s=ii.get(f))&&Tp(n,s),d=o.createElement("script"),ze(d),cn(d,"link",n),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function N1(n,s){As.M(n,s);var o=Co;if(o&&n){var u=Mi(o).hoistableScripts,f=No(n),d=u.get(f);d||(d=o.querySelector(bu(f)),d||(n=E({src:n,async:!0,type:"module"},s),(s=ii.get(f))&&Tp(n,s),d=o.createElement("script"),ze(d),cn(d,"link",n),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function JT(n,s,o,u){var f=(f=bt.current)?Kh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Do(o.href),o=Mi(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Do(o.href);var d=Mi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(Su(n)))&&!d._p&&(_.instance=d,_.state.loading=5),ii.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ii.set(n,o),d||x1(f,n,o,_.state))),s&&u===null)throw Error(i(528,""));return _}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=No(o),o=Mi(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Do(n){return'href="'+Sn(n)+'"'}function Su(n){return'link[rel="stylesheet"]['+n+"]"}function ZT(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function x1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),cn(s,"link",o),ze(s),n.head.appendChild(s))}function No(n){return'[src="'+Sn(n)+'"]'}function bu(n){return"script[async]"+n}function WT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Sn(o.href)+'"]');if(u)return s.instance=u,ze(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ze(u),cn(u,"style",f),Qh(u,o.precedence,n),s.instance=u;case"stylesheet":f=Do(o.href);var d=n.querySelector(Su(f));if(d)return s.state.loading|=4,s.instance=d,ze(d),d;u=ZT(o),(f=ii.get(f))&&vp(u,f),d=(n.ownerDocument||n).createElement("link"),ze(d);var _=d;return _._p=new Promise(function(b,P){_.onload=b,_.onerror=P}),cn(d,"link",u),s.state.loading|=4,Qh(d,o.precedence,n),s.instance=d;case"script":return d=No(o.src),(f=n.querySelector(bu(d)))?(s.instance=f,ze(f),f):(u=o,(f=ii.get(d))&&(u=E({},o),Tp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),ze(f),cn(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Qh(u,o.precedence,n));return s.instance}function Qh(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,d=f,_=0;_<u.length;_++){var b=u[_];if(b.dataset.precedence===s)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function vp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Tp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Yh=null;function tE(n,s,o){if(Yh===null){var u=new Map,f=Yh=new Map;f.set(o,u)}else f=Yh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var d=o[f];if(!(d[xi]||d[Ue]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(s)||"";_=n+_;var b=u.get(_);b?b.push(d):u.set(_,[d])}}return u}function eE(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function V1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function nE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function M1(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Do(u.href),d=s.querySelector(Su(f));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=$h.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=d,ze(d);return}d=s.ownerDocument||s,u=ZT(u),(f=ii.get(f))&&vp(u,f),d=d.createElement("link"),ze(d);var _=d;_._p=new Promise(function(b,P){_.onload=b,_.onerror=P}),cn(d,"link",u),o.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=$h.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Ep=0;function O1(n,s){return n.stylesheets&&n.count===0&&Jh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Jh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+s);0<n.imgBytes&&Ep===0&&(Ep=62500*m1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Jh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Ep?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function $h(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Xh=null;function Jh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Xh=new Map,s.forEach(P1,n),Xh=null,$h.call(n))}function P1(n,s){if(!(s.state.loading&4)){var o=Xh.get(n);if(o)var u=o.get(null);else{o=new Map,Xh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=s.instance,_=f.getAttribute("data-precedence"),d=o.get(_)||u,d===u&&o.set(null,f),o.set(_,f),this.count++,u=$h.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Au={$$typeof:rt,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function k1(n,s,o,u,f,d,_,b,P){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function iE(n,s,o,u,f,d,_,b,P,H,tt,it){return n=new k1(n,s,o,_,P,H,tt,it,b),s=1,d===!0&&(s|=24),d=On(3,null,null,s),n.current=d,d.stateNode=n,s=tm(),s.refCount++,n.pooledCache=s,s.refCount++,d.memoizedState={element:u,isDehydrated:o,cache:s},sm(d),n}function sE(n){return n?(n=ao,n):ao}function rE(n,s,o,u,f,d){f=sE(f),u.context===null?u.context=f:u.pendingContext=f,u=Js(s),u.payload={element:o},d=d===void 0?null:d,d!==null&&(u.callback=d),o=Zs(n,u,s),o!==null&&(Cn(o,n,s),nu(o,n,s))}function aE(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Sp(n,s){aE(n,s),(n=n.alternate)&&aE(n,s)}function oE(n){if(n.tag===13||n.tag===31){var s=na(n,67108864);s!==null&&Cn(s,n,67108864),Sp(n,67108864)}}function lE(n){if(n.tag===13||n.tag===31){var s=zn();s=Hr(s);var o=na(n,s);o!==null&&Cn(o,n,s),Sp(n,s)}}var Zh=!0;function L1(n,s,o,u){var f=J.T;J.T=null;var d=lt.p;try{lt.p=2,bp(n,s,o,u)}finally{lt.p=d,J.T=f}}function U1(n,s,o,u){var f=J.T;J.T=null;var d=lt.p;try{lt.p=8,bp(n,s,o,u)}finally{lt.p=d,J.T=f}}function bp(n,s,o,u){if(Zh){var f=Ap(u);if(f===null)up(n,s,u,Wh,o),cE(n,u);else if(j1(f,n,s,o,u))u.stopPropagation();else if(cE(n,u),s&4&&-1<z1.indexOf(n)){for(;f!==null;){var d=Kn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Ri(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var P=1<<31-De(_);b.entanglements[1]|=P,_&=~P}Ki(d),(ie&6)===0&&(Ph=sn()+500,_u(0))}}break;case 31:case 13:b=na(d,2),b!==null&&Cn(b,d,2),Lh(),Sp(d,2)}if(d=Ap(u),d===null&&up(n,s,u,Wh,o),d===f)break;f=d}f!==null&&u.stopPropagation()}else up(n,s,u,null,o)}}function Ap(n){return n=Qn(n),Ip(n)}var Wh=null;function Ip(n){if(Wh=null,n=Vi(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=m(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Wh=n,null}function uE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rs()){case Si:return 2;case bi:return 8;case Ai:case Ft:return 32;case be:return 268435456;default:return 32}default:return 32}}var wp=!1,ur=null,cr=null,hr=null,Iu=new Map,wu=new Map,fr=[],z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cE(n,s){switch(n){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Iu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(s.pointerId)}}function Ru(n,s,o,u,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:d,targetContainers:[f]},s!==null&&(s=Kn(s),s!==null&&oE(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function j1(n,s,o,u,f){switch(s){case"focusin":return ur=Ru(ur,n,s,o,u,f),!0;case"dragenter":return cr=Ru(cr,n,s,o,u,f),!0;case"mouseover":return hr=Ru(hr,n,s,o,u,f),!0;case"pointerover":var d=f.pointerId;return Iu.set(d,Ru(Iu.get(d)||null,n,s,o,u,f)),!0;case"gotpointercapture":return d=f.pointerId,wu.set(d,Ru(wu.get(d)||null,n,s,o,u,f)),!0}return!1}function hE(n){var s=Vi(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,oi(n.priority,function(){lE(o)});return}}else if(s===31){if(s=m(o),s!==null){n.blockedOn=s,oi(n.priority,function(){lE(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function tf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Ap(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);jl=u,o.target.dispatchEvent(u),jl=null}else return s=Kn(o),s!==null&&oE(s),n.blockedOn=o,!1;s.shift()}return!0}function fE(n,s,o){tf(n)&&o.delete(s)}function B1(){wp=!1,ur!==null&&tf(ur)&&(ur=null),cr!==null&&tf(cr)&&(cr=null),hr!==null&&tf(hr)&&(hr=null),Iu.forEach(fE),wu.forEach(fE)}function ef(n,s){n.blockedOn===s&&(n.blockedOn=null,wp||(wp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,B1)))}var nf=null;function dE(n){nf!==n&&(nf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nf===n&&(nf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Ip(u||o)===null)continue;break}var d=Kn(o);d!==null&&(n.splice(s,3),s-=3,Am(d,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function xo(n){function s(P){return ef(P,n)}ur!==null&&ef(ur,n),cr!==null&&ef(cr,n),hr!==null&&ef(hr,n),Iu.forEach(s),wu.forEach(s);for(var o=0;o<fr.length;o++){var u=fr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<fr.length&&(o=fr[0],o.blockedOn===null);)hE(o),o.blockedOn===null&&fr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],d=o[u+1],_=f[Ze]||null;if(typeof d=="function")_||dE(o);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Ze]||null)b=_.formAction;else if(Ip(f)!==null)continue}else b=_.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),dE(o)}}}function mE(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Rp(n){this._internalRoot=n}sf.prototype.render=Rp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=zn();rE(o,u,n,s,null,null)},sf.prototype.unmount=Rp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;rE(n.current,2,null,n,null,null),Lh(),s[Ni]=null}};function sf(n){this._internalRoot=n}sf.prototype.unstable_scheduleHydration=function(n){if(n){var s=Lc();n={blockedOn:null,target:n,priority:s};for(var o=0;o<fr.length&&s!==0&&s<fr[o].priority;o++);fr.splice(o,0,n),o===0&&hE(n)}};var pE=t.version;if(pE!=="19.2.4")throw Error(i(527,pE,"19.2.4"));lt.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var q1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{ri=rf.inject(q1),rn=rf}catch{}}return Du.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=Sv,d=bv,_=Av;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=iE(n,1,!1,null,null,o,u,null,f,d,_,mE),n[Ni]=s.current,lp(n),new Rp(s)},Du.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",d=Sv,_=bv,b=Av,P=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),s=iE(n,1,!0,s,o??null,u,f,P,d,_,b,mE),s.context=sE(null),o=s.current,u=zn(),u=Hr(u),f=Js(u),f.callback=null,Zs(o,f,u),o=u,s.current.lanes=o,qr(s,o),Ki(s),n[Ni]=s.current,lp(n),new sf(s)},Du.version="19.2.4",Du}var IE;function Z1(){if(IE)return Np.exports;IE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Np.exports=J1(),Np.exports}var W1=Z1();const tR=()=>{};var wE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=function(r){const t=[];let e=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},eR=function(r){const t=[];let e=0,i=0;for(;e<r.length;){const a=r[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[e++];t[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[e++],c=r[e++],m=r[e++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|m&63)-65536;t[i++]=String.fromCharCode(55296+(p>>10)),t[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[e++],c=r[e++];t[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,m=c?r[a+1]:0,p=a+2<r.length,g=p?r[a+2]:0,T=l>>2,E=(l&3)<<4|m>>4;let S=(m&15)<<2|g>>6,R=g&63;p||(R=64,c||(S=64)),i.push(e[T],e[E],e[S],e[R])}return i.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(PS(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):eR(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=e[r.charAt(a++)],m=a<r.length?e[r.charAt(a)]:0;++a;const g=a<r.length?e[r.charAt(a)]:64;++a;const E=a<r.length?e[r.charAt(a)]:64;if(++a,l==null||m==null||g==null||E==null)throw new nR;const S=l<<2|m>>4;if(i.push(S),g!==64){const R=m<<4&240|g>>2;if(i.push(R),E!==64){const V=g<<6&192|E;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class nR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iR=function(r){const t=PS(r);return kS.encodeByteArray(t,!0)},LS=function(r){return iR(r).replace(/\./g,"")},US=function(r){try{return kS.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=()=>zS().__FIREBASE_DEFAULTS__,rR=()=>{if(typeof process>"u"||typeof wE>"u")return;const r=wE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},aR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&US(r[1]);return t&&JSON.parse(t)},rd=()=>{try{return tR()||sR()||rR()||aR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},oR=r=>{var t,e;return(e=(t=rd())==null?void 0:t.emulatorHosts)==null?void 0:e[r]},jS=()=>{var r;return(r=rd())==null?void 0:r.config},BS=r=>{var t;return(t=rd())==null?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qS(r){return(await fetch(r,{credentials:"include"})).ok}const Gu={};function uR(){const r={prod:[],emulator:[]};for(const t of Object.keys(Gu))Gu[t]?r.emulator.push(t):r.prod.push(t);return r}function cR(r){let t=document.getElementById(r),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),e=!0),{created:e,element:t}}let RE=!1;function hR(r,t){if(typeof window>"u"||typeof document>"u"||!vl(window.location.host)||Gu[r]===t||Gu[r]||RE)return;Gu[r]=t;function e(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=uR().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{RE=!0,c()},S}function T(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=cR(i),R=e("text"),V=document.getElementById(R)||document.createElement("span"),C=e("learnmore"),z=document.getElementById(C)||document.createElement("a"),Q=e("preprendIcon"),at=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const rt=S.element;m(rt),T(z,C);const mt=g();p(at,Q),rt.append(at,V,z,mt),document.body.appendChild(rt)}l?(V.innerText="Preview backend disconnected.",at.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(at.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function FS(){var t;const r=(t=rd())==null?void 0:t.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function pR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gR(){const r=Xe();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function HS(){return!FS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GS(){return!FS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function KS(){try{return typeof indexedDB=="object"}catch{return!1}}function yR(){return new Promise((r,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var l;t(((l=a.error)==null?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="FirebaseError";class Os extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=_R,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vc.prototype.create)}}class vc{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?vR(l,i):"Error",m=`${this.serviceName}: ${c} (${a}).`;return new Os(a,m,i)}}function vR(r,t){return r.replace(TR,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const TR=/\{\$([^}]+)}/g;function ER(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function xa(r,t){if(r===t)return!0;const e=Object.keys(r),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const l=r[a],c=t[a];if(CE(l)&&CE(c)){if(!xa(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function CE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(r){const t=[];for(const[e,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function SR(r,t){const e=new bR(r,t);return e.subscribe.bind(e)}class bR{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");AR(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=Op),a.error===void 0&&(a.error=Op),a.complete===void 0&&(a.complete=Op);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AR(r,t){if(typeof r!="object"||r===null)return!1;for(const e of t)if(e in r&&typeof r[e]=="function")return!0;return!1}function Op(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(r){return r&&r._delegate?r._delegate:r}class Va{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new lR;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(RR(t))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(t=ga){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ga){return this.instances.has(t)}getOptions(t=ga){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&c.resolve(a)}return a}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(i)??new Set;a.add(t),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&t(l,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wR(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ga){return this.component?this.component.multipleInstances?t:ga:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wR(r){return r===ga?void 0:r}function RR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new IR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Kt||(Kt={}));const DR={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},NR=Kt.INFO,xR={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},VR=(r,t,...e)=>{if(t<r.logLevel)return;const i=new Date().toISOString(),a=xR[t];if(a)console[a](`[${i}]  ${r.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class jg{constructor(t){this.name=t,this._logLevel=NR,this._logHandler=VR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...t),this._logHandler(this,Kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...t),this._logHandler(this,Kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...t),this._logHandler(this,Kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...t),this._logHandler(this,Kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...t),this._logHandler(this,Kt.ERROR,...t)}}const MR=(r,t)=>t.some(e=>r instanceof e);let DE,NE;function OR(){return DE||(DE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PR(){return NE||(NE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QS=new WeakMap,tg=new WeakMap,YS=new WeakMap,Pp=new WeakMap,Bg=new WeakMap;function kR(r){const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{e(Ar(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&QS.set(e,r)}).catch(()=>{}),Bg.set(t,r),t}function LR(r){if(tg.has(r))return;const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});tg.set(r,t)}let eg={get(r,t,e){if(r instanceof IDBTransaction){if(t==="done")return tg.get(r);if(t==="objectStoreNames")return r.objectStoreNames||YS.get(r);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ar(r[t])},set(r,t,e){return r[t]=e,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function UR(r){eg=r(eg)}function zR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=r.call(kp(this),t,...e);return YS.set(i,t.sort?t.sort():[t]),Ar(i)}:PR().includes(r)?function(...t){return r.apply(kp(this),t),Ar(QS.get(this))}:function(...t){return Ar(r.apply(kp(this),t))}}function jR(r){return typeof r=="function"?zR(r):(r instanceof IDBTransaction&&LR(r),MR(r,OR())?new Proxy(r,eg):r)}function Ar(r){if(r instanceof IDBRequest)return kR(r);if(Pp.has(r))return Pp.get(r);const t=jR(r);return t!==r&&(Pp.set(r,t),Bg.set(t,r)),t}const kp=r=>Bg.get(r);function BR(r,t,{blocked:e,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,t),m=Ar(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Ar(c.result),p.oldVersion,p.newVersion,Ar(c.transaction),p)}),e&&c.addEventListener("blocked",p=>e(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const qR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],Lp=new Map;function xE(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Lp.get(t))return Lp.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=FR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||qR.includes(e)))return;const l=async function(c,...m){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(m.shift())),(await Promise.all([g[e](...m),a&&p.done]))[0]};return Lp.set(t,l),l}UR(r=>({...r,get:(t,e,i)=>xE(t,e)||r.get(t,e,i),has:(t,e)=>!!xE(t,e)||r.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(GR(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function GR(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ng="@firebase/app",VE="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new jg("@firebase/app"),KR="@firebase/app-compat",QR="@firebase/analytics-compat",YR="@firebase/analytics",$R="@firebase/app-check-compat",XR="@firebase/app-check",JR="@firebase/auth",ZR="@firebase/auth-compat",WR="@firebase/database",tC="@firebase/data-connect",eC="@firebase/database-compat",nC="@firebase/functions",iC="@firebase/functions-compat",sC="@firebase/installations",rC="@firebase/installations-compat",aC="@firebase/messaging",oC="@firebase/messaging-compat",lC="@firebase/performance",uC="@firebase/performance-compat",cC="@firebase/remote-config",hC="@firebase/remote-config-compat",fC="@firebase/storage",dC="@firebase/storage-compat",mC="@firebase/firestore",pC="@firebase/ai",gC="@firebase/firestore-compat",yC="firebase",_C="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",vC={[ng]:"fire-core",[KR]:"fire-core-compat",[YR]:"fire-analytics",[QR]:"fire-analytics-compat",[XR]:"fire-app-check",[$R]:"fire-app-check-compat",[JR]:"fire-auth",[ZR]:"fire-auth-compat",[WR]:"fire-rtdb",[tC]:"fire-data-connect",[eC]:"fire-rtdb-compat",[nC]:"fire-fn",[iC]:"fire-fn-compat",[sC]:"fire-iid",[rC]:"fire-iid-compat",[aC]:"fire-fcm",[oC]:"fire-fcm-compat",[lC]:"fire-perf",[uC]:"fire-perf-compat",[cC]:"fire-rc",[hC]:"fire-rc-compat",[fC]:"fire-gcs",[dC]:"fire-gcs-compat",[mC]:"fire-fst",[gC]:"fire-fst-compat",[pC]:"fire-vertex","fire-js":"fire-js",[yC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=new Map,TC=new Map,sg=new Map;function ME(r,t){try{r.container.addComponent(t)}catch(e){Ns.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,e)}}function Xo(r){const t=r.name;if(sg.has(t))return Ns.debug(`There were multiple attempts to register component ${t}.`),!1;sg.set(t,r);for(const e of xf.values())ME(e,r);for(const e of TC.values())ME(e,r);return!0}function qg(r,t){const e=r.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),r.container.getProvider(t)}function _i(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new vc("app","Firebase",EC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=_C;function $S(r,t={}){let e=r;typeof t!="object"&&(t={name:t});const i={name:ig,automaticDataCollectionEnabled:!0,...t},a=i.name;if(typeof a!="string"||!a)throw Ir.create("bad-app-name",{appName:String(a)});if(e||(e=jS()),!e)throw Ir.create("no-options");const l=xf.get(a);if(l){if(xa(e,l.options)&&xa(i,l.config))return l;throw Ir.create("duplicate-app",{appName:a})}const c=new CR(a);for(const p of sg.values())c.addComponent(p);const m=new SC(e,i,c);return xf.set(a,m),m}function bC(r=ig){const t=xf.get(r);if(!t&&r===ig&&jS())return $S();if(!t)throw Ir.create("no-app",{appName:r});return t}function wr(r,t,e){let i=vC[r]??r;e&&(i+=`-${e}`);const a=i.match(/\s|\//),l=t.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${t}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ns.warn(c.join(" "));return}Xo(new Va(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="firebase-heartbeat-database",IC=1,ic="firebase-heartbeat-store";let Up=null;function XS(){return Up||(Up=BR(AC,IC,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(ic)}catch(e){console.warn(e)}}}}).catch(r=>{throw Ir.create("idb-open",{originalErrorMessage:r.message})})),Up}async function wC(r){try{const e=(await XS()).transaction(ic),i=await e.objectStore(ic).get(JS(r));return await e.done,i}catch(t){if(t instanceof Os)Ns.warn(t.message);else{const e=Ir.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ns.warn(e.message)}}}async function OE(r,t){try{const i=(await XS()).transaction(ic,"readwrite");await i.objectStore(ic).put(t,JS(r)),await i.done}catch(e){if(e instanceof Os)Ns.warn(e.message);else{const i=Ir.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ns.warn(i.message)}}}function JS(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=1024,CC=30;class DC{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new xC(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=PE();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>CC){const c=VC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ns.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=PE(),{heartbeatsToSend:i,unsentEntries:a}=NC(this._heartbeatsCache.heartbeats),l=LS(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ns.warn(e),""}}}function PE(){return new Date().toISOString().substring(0,10)}function NC(r,t=RC){const e=[];let i=r.slice();for(const a of r){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),kE(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),kE(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class xC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KS()?yR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await wC(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function kE(r){return LS(JSON.stringify({version:2,heartbeats:r})).length}function VC(r){if(r.length===0)return-1;let t=0,e=r[0].date;for(let i=1;i<r.length;i++)r[i].date<e&&(e=r[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(r){Xo(new Va("platform-logger",t=>new HR(t),"PRIVATE")),Xo(new Va("heartbeat",t=>new DC(t),"PRIVATE")),wr(ng,VE,r),wr(ng,VE,"esm2020"),wr("fire-js","")}MC("");var OC="firebase",PC="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(OC,PC,"app");function ZS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kC=ZS,WS=new vc("auth","Firebase",ZS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new jg("@firebase/auth");function LC(r,...t){Vf.logLevel<=Kt.WARN&&Vf.warn(`Auth (${Tl}): ${r}`,...t)}function pf(r,...t){Vf.logLevel<=Kt.ERROR&&Vf.error(`Auth (${Tl}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(r,...t){throw Hg(r,...t)}function Ti(r,...t){return Hg(r,...t)}function Fg(r,t,e){const i={...kC(),[t]:e};return new vc("auth","Firebase",i).create(t,{appName:r.name})}function Ia(r){return Fg(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UC(r,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&ns(r,"argument-error"),Fg(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hg(r,...t){if(typeof r!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(e,...i)}return WS.create(r,...t)}function Dt(r,t,...e){if(!r)throw Hg(t,...e)}function ws(r){const t="INTERNAL ASSERTION FAILED: "+r;throw pf(t),new Error(t)}function xs(r,t){r||ws(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function zC(){return LE()==="http:"||LE()==="https:"}function LE(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zC()||mR()||"connection"in navigator)?navigator.onLine:!0}function BC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,e){this.shortDelay=t,this.longDelay=e,xs(e>t,"Short delay should be less than long delay!"),this.isMobile=fR()||pR()}get(){return jC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(r,t){xs(r.emulator,"Emulator should always be set here");const{url:e}=r.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HC=new Ec(3e4,6e4);function Kg(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function El(r,t,e,i,a={}){return eb(r,a,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const m=Tc({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:t,headers:p,...l};return dR()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&vl(r.emulatorConfig.host)&&(g.credentials="include"),tb.fetch()(await nb(r,r.config.apiHost,e,m),g)})}async function eb(r,t,e){r._canInitEmulator=!1;const i={...qC,...t};try{const a=new KC(r),l=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw af(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const m=l.ok?c.errorMessage:c.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw af(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw af(r,"user-disabled",c);const T=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Fg(r,T,g);ns(r,T)}}catch(a){if(a instanceof Os)throw a;ns(r,"network-request-failed",{message:String(a)})}}async function GC(r,t,e,i,a={}){const l=await El(r,t,e,i,a);return"mfaPendingCredential"in l&&ns(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function nb(r,t,e,i){const a=`${t}${e}?${i}`,l=r,c=l.config.emulator?Gg(r.config,a):`${r.config.apiScheme}://${a}`;return FC.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class KC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ti(this.auth,"network-request-failed")),HC.get())})}}function af(r,t,e){const i={appName:r.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=Ti(r,t,i);return a.customData._tokenResponse=e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(r,t){return El(r,"POST","/v1/accounts:delete",t)}async function Mf(r,t){return El(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function YC(r,t=!1){const e=Ye(r),i=await e.getIdToken(t),a=Qg(i);Dt(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Ku(zp(a.auth_time)),issuedAtTime:Ku(zp(a.iat)),expirationTime:Ku(zp(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function zp(r){return Number(r)*1e3}function Qg(r){const[t,e,i]=r.split(".");if(t===void 0||e===void 0||i===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const a=US(e);return a?JSON.parse(a):(pf("Failed to decode base64 JWT payload"),null)}catch(a){return pf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function UE(r){const t=Qg(r);return Dt(t,"internal-error"),Dt(typeof t.exp<"u","internal-error"),Dt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(r,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Os&&$C(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function $C({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(r){var E;const t=r.auth,e=await r.getIdToken(),i=await sc(r,Mf(t,{idToken:e}));Dt(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?ib(a.providerUserInfo):[],c=ZC(r.providerData,l),m=r.isAnonymous,p=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),g=m?p:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new ag(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,T)}async function JC(r){const t=Ye(r);await Of(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ZC(r,t){return[...r.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function ib(r){return r.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(r,t){const e=await eb(r,{},async()=>{const i=Tc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await nb(r,a,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:i};return r.emulatorConfig&&vl(r.emulatorConfig.host)&&(p.credentials="include"),tb.fetch()(c,p)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function tD(r,t){return El(r,"POST","/v2/accounts:revokeToken",Kg(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Dt(t.idToken,"internal-error"),Dt(typeof t.idToken<"u","internal-error"),Dt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):UE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Dt(t.length!==0,"internal-error");const e=UE(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:l}=await WC(t,e);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:l}=e,c=new Ho;return i&&(Dt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(Dt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(Dt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(r,t){Dt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class vi{constructor({uid:t,auth:e,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new XC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ag(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await sc(this,this.stsTokenManager.getToken(this.auth,t));return Dt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return YC(this,t)}reload(){return JC(this)}_assign(t){this!==t&&(Dt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new vi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Of(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(Ia(this.auth));const t=await this.getIdToken();return await sc(this,QC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,a=e.email??void 0,l=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,p=e._redirectEventId??void 0,g=e.createdAt??void 0,T=e.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:R,providerData:V,stsTokenManager:C}=e;Dt(E&&C,t,"internal-error");const z=Ho.fromJSON(this.name,C);Dt(typeof E=="string",t,"internal-error"),mr(i,t.name),mr(a,t.name),Dt(typeof S=="boolean",t,"internal-error"),Dt(typeof R=="boolean",t,"internal-error"),mr(l,t.name),mr(c,t.name),mr(m,t.name),mr(p,t.name),mr(g,t.name),mr(T,t.name);const Q=new vi({uid:E,auth:t,email:a,emailVerified:S,displayName:i,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:m,stsTokenManager:z,createdAt:g,lastLoginAt:T});return V&&Array.isArray(V)&&(Q.providerData=V.map(at=>({...at}))),p&&(Q._redirectEventId=p),Q}static async _fromIdTokenResponse(t,e,i=!1){const a=new Ho;a.updateFromServerResponse(e);const l=new vi({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await Of(l),l}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];Dt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?ib(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),m=new Ho;m.updateFromIdToken(i);const p=new vi({uid:a.localId,auth:t,stsTokenManager:m,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new ag(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Map;function Rs(r){xs(r instanceof Function,"Expected a class definition");let t=zE.get(r);return t?(xs(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,zE.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}sb.type="NONE";const jE=sb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(r,t,e){return`firebase:${r}:${t}:${e}`}class Go{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=gf(this.userKey,a.apiKey,l),this.fullPersistenceKey=gf("persistence",a.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Mf(this.auth,{idToken:t}).catch(()=>{});return e?vi._fromGetAccountInfoResponse(this.auth,e,t):null}return vi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Go(Rs(jE),t,i);const a=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Rs(jE);const c=gf(i,t.config.apiKey,t.name);let m=null;for(const g of e)try{const T=await g._get(c);if(T){let E;if(typeof T=="string"){const S=await Mf(t,{idToken:T}).catch(()=>{});if(!S)break;E=await vi._fromGetAccountInfoResponse(t,S,T)}else E=vi._fromJSON(t,T);g!==l&&(m=E),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Go(l,t,i):(l=p[0],m&&await l._set(c,m.toJSON()),await Promise.all(e.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Go(l,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(rb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cb(t))return"Blackberry";if(hb(t))return"Webos";if(ab(t))return"Safari";if((t.includes("chrome/")||ob(t))&&!t.includes("edge/"))return"Chrome";if(ub(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function rb(r=Xe()){return/firefox\//i.test(r)}function ab(r=Xe()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ob(r=Xe()){return/crios\//i.test(r)}function lb(r=Xe()){return/iemobile/i.test(r)}function ub(r=Xe()){return/android/i.test(r)}function cb(r=Xe()){return/blackberry/i.test(r)}function hb(r=Xe()){return/webos/i.test(r)}function Yg(r=Xe()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eD(r=Xe()){var t;return Yg(r)&&!!((t=window.navigator)!=null&&t.standalone)}function nD(){return gR()&&document.documentMode===10}function fb(r=Xe()){return Yg(r)||ub(r)||hb(r)||cb(r)||/windows phone/i.test(r)||lb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(r,t=[]){let e;switch(r){case"Browser":e=BE(Xe());break;case"Worker":e=`${BE(Xe())}-${r}`;break;default:e=r}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Tl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,m)=>{try{const p=t(l);c(p)}catch(p){m(p)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(r,t={}){return El(r,"GET","/v2/passwordPolicy",Kg(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=6;class aD{constructor(t){var i;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??rD,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qE(this),this.idTokenSubscription=new qE(this),this.beforeStateQueue=new iD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Rs(e)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Go.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Mf(this,{idToken:t}),i=await vi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var l;if(_i(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===m)&&(p!=null&&p.user)&&(i=p.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Of(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=BC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(_i(this.app))return Promise.reject(Ia(this));const e=t?Ye(t):null;return e&&Dt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Dt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(Ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return _i(this.app)?Promise.reject(Ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await sD(this),e=new aD(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new vc("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await tD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Rs(t)||this._popupRedirectResolver;Dt(e,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Rs(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(m,this,"internal-error"),m.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const p=t.addObserver(e,i,a);return()=>{c=!0,p()}}else{const p=t.addObserver(e);return()=>{c=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=db(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&LC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ad(r){return Ye(r)}class qE{constructor(t){this.auth=t,this.observer=null,this.addObserver=SR(e=>this.observer=e)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lD(r){$g=r}function uD(r){return $g.loadJS(r)}function cD(){return $g.gapiScript}function hD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(r,t){const e=qg(r,"auth");if(e.isInitialized()){const a=e.getImmediate(),l=e.getOptions();if(xa(l,t??{}))return a;ns(a,"already-initialized")}return e.initialize({options:t})}function dD(r,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Rs);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function mD(r,t,e){const i=ad(r);Dt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!1,l=mb(t),{host:c,port:m}=pD(t),p=m===null?"":`:${m}`,g={url:`${l}//${c}${p}/`},T=Object.freeze({host:c,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Dt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Dt(xa(g,i.config.emulator)&&xa(T,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=T,i.settings.appVerificationDisabledForTesting=!0,vl(c)?(qS(`${l}//${c}${p}`),hR("Auth",!0)):gD()}function mb(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function pD(r){const t=mb(r),e=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:FE(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:FE(c)}}}function FE(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function gD(){function r(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ws("not implemented")}_getIdTokenResponse(t){return ws("not implemented")}_linkToIdToken(t,e){return ws("not implemented")}_getReauthenticationResolver(t){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(r,t){return GC(r,"POST","/v1/accounts:signInWithIdp",Kg(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="http://localhost";class Ma extends pb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ma(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ns("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a,...l}=e;if(!i||!a)return null;const c=new Ma(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Ko(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Ko(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ko(t,e)}buildRequest(){const t={requestUri:yD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Tc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Xg{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Sc{constructor(){super("facebook.com")}static credential(t){return Ma._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vr.credentialFromTaggedObject(t)}static credentialFromError(t){return vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vr.credential(t.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ma._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Is.credential(e,i)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Sc{constructor(){super("github.com")}static credential(t){return Ma._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Tr.credentialFromTaggedObject(t)}static credentialFromError(t){return Tr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Tr.credential(t.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Sc{constructor(){super("twitter.com")}static credential(t,e){return Ma._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Er.credentialFromTaggedObject(t)}static credentialFromError(t){return Er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Er.credential(e,i)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const l=await vi._fromIdTokenResponse(t,i,a),c=HE(i);return new Jo({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=HE(i);return new Jo({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function HE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends Os{constructor(t,e,i,a){super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Pf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new Pf(t,e,i,a)}}function gb(r,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(r):e._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Pf._fromErrorAndOperation(r,l,t,i):l})}async function _D(r,t,e=!1){const i=await sc(r,t._linkToIdToken(r.auth,await r.getIdToken()),e);return Jo._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(r,t,e=!1){const{auth:i}=r;if(_i(i.app))return Promise.reject(Ia(i));const a="reauthenticate";try{const l=await sc(r,gb(i,a,t,r),e);Dt(l.idToken,i,"internal-error");const c=Qg(l.idToken);Dt(c,i,"internal-error");const{sub:m}=c;return Dt(r.uid===m,i,"user-mismatch"),Jo._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ns(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(r,t,e=!1){if(_i(r.app))return Promise.reject(Ia(r));const i="signIn",a=await gb(r,i,t),l=await Jo._fromIdTokenResponse(r,i,a);return e||await r._updateCurrentUser(l.user),l}function ED(r,t,e,i){return Ye(r).onIdTokenChanged(t,e,i)}function SD(r,t,e){return Ye(r).beforeAuthStateChanged(t,e)}function bD(r,t,e,i){return Ye(r).onAuthStateChanged(t,e,i)}function AD(r){return Ye(r).signOut()}const kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=1e3,wD=10;class _b extends yb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,p)=>{this.notifyListeners(c,p)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);nD()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,wD):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},ID)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}_b.type="LOCAL";const RD=_b;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb extends yb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}vb.type="SESSION";const Tb=vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new od(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:l}=e.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const m=Array.from(c).map(async g=>g(e.origin,l)),p=await CD(m);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(r="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return r+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((m,p)=>{const g=Jg("",20);a.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(S.data.response);break;default:clearTimeout(T),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function ND(r){ts().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function xD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VD(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function MD(){return Eb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="firebaseLocalStorageDb",OD=1,Lf="firebaseLocalStorage",bb="fbase_key";class bc{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function ld(r,t){return r.transaction([Lf],t?"readwrite":"readonly").objectStore(Lf)}function PD(){const r=indexedDB.deleteDatabase(Sb);return new bc(r).toPromise()}function og(){const r=indexedDB.open(Sb,OD);return new Promise((t,e)=>{r.addEventListener("error",()=>{e(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Lf,{keyPath:bb})}catch(a){e(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Lf)?t(i):(i.close(),await PD(),t(await og()))})})}async function GE(r,t,e){const i=ld(r,!0).put({[bb]:t,value:e});return new bc(i).toPromise()}async function kD(r,t){const e=ld(r,!1).get(t),i=await new bc(e).toPromise();return i===void 0?null:i.value}function KE(r,t){const e=ld(r,!0).delete(t);return new bc(e).toPromise()}const LD=800,UD=3;class Ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await og(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>UD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Eb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(MD()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await xD(),!this.activeServiceWorker)return;this.sender=new DD(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||VD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await og();return await GE(t,kf,"1"),await KE(t,kf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>GE(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>kD(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>KE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=ld(a,!1).getAll();return new bc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ab.type="LOCAL";const zD=Ab;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(r,t){return t?Rs(t):(Dt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends pb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ko(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ko(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ko(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function jD(r){return TD(r.auth,new Zg(r),r.bypassAuthState)}function BD(r){const{auth:t,user:e}=r;return Dt(e,t,"internal-error"),vD(e,new Zg(r),r.bypassAuthState)}async function qD(r){const{auth:t,user:e}=r;return Dt(e,t,"internal-error"),_D(e,new Zg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t,e,i,a,l=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:l,error:c,type:m}=t;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jD;case"linkViaPopup":case"linkViaRedirect":return qD;case"reauthViaPopup":case"reauthViaRedirect":return BD;default:ns(this.auth,"internal-error")}}resolve(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new Ec(2e3,1e4);async function HD(r,t,e){if(_i(r.app))return Promise.reject(Ti(r,"operation-not-supported-in-this-environment"));const i=ad(r);UC(r,t,Xg);const a=Ib(i,e);return new ba(i,"signInViaPopup",t,a).executeNotNull()}class ba extends wb{constructor(t,e,i,a,l){super(t,e,a,l),this.provider=i,this.authWindow=null,this.pollId=null,ba.currentPopupAction&&ba.currentPopupAction.cancel(),ba.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Dt(t,this.auth,"internal-error"),t}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const t=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ba.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if((i=(e=this.authWindow)==null?void 0:e.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,FD.get())};t()}}ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="pendingRedirect",yf=new Map;class KD extends wb{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=yf.get(this.auth._key());if(!t){try{const i=await QD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}yf.set(this.auth._key(),t)}return this.bypassAuthState||yf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QD(r,t){const e=XD(t),i=$D(r);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function YD(r,t){yf.set(r._key(),t)}function $D(r){return Rs(r._redirectPersistence)}function XD(r){return gf(GD,r.config.apiKey,r.name)}async function JD(r,t,e=!1){if(_i(r.app))return Promise.reject(Ia(r));const i=ad(r),a=Ib(i,t),c=await new KD(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=600*1e3;class WD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!tN(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!Rb(t)){const a=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";e.onError(Ti(this.auth,a))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ZD&&this.cachedEventUids.clear(),this.cachedEventUids.has(QE(t))}saveEventToCache(t){this.cachedEventUids.add(QE(t)),this.lastProcessedEventTime=Date.now()}}function QE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function Rb({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function tN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(r,t={}){return El(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iN=/^https?/;async function sN(r){if(r.config.emulator)return;const{authorizedDomains:t}=await eN(r);for(const e of t)try{if(rN(e))return}catch{}ns(r,"unauthorized-domain")}function rN(r){const t=rg(),{protocol:e,hostname:i}=new URL(t);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?e==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!iN.test(e))return!1;if(nN.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new Ec(3e4,6e4);function YE(){const r=ts().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let e=0;e<r.CP.length;e++)r.CP[e]=null}}function oN(r){return new Promise((t,e)=>{var a,l,c;function i(){YE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{YE(),e(Ti(r,"network-request-failed"))},timeout:aN.get()})}if((l=(a=ts().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)t(gapi.iframes.getContext());else if((c=ts().gapi)!=null&&c.load)i();else{const m=hD("iframefcb");return ts()[m]=()=>{gapi.load?i():e(Ti(r,"network-request-failed"))},uD(`${cD()}?onload=${m}`).catch(p=>e(p))}}).catch(t=>{throw _f=null,t})}let _f=null;function lN(r){return _f=_f||oN(r),_f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new Ec(5e3,15e3),cN="__/auth/iframe",hN="emulator/auth/iframe",fN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mN(r){const t=r.config;Dt(t.authDomain,r,"auth-domain-config-required");const e=t.emulator?Gg(t,hN):`https://${r.config.authDomain}/${cN}`,i={apiKey:t.apiKey,appName:r.name,v:Tl},a=dN.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${Tc(i).slice(1)}`}async function pN(r){const t=await lN(r),e=ts().gapi;return Dt(e,r,"internal-error"),t.open({where:document.body,url:mN(r),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fN,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ti(r,"network-request-failed"),m=ts().setTimeout(()=>{l(c)},uN.get());function p(){ts().clearTimeout(m),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yN=500,_N=600,vN="_blank",TN="http://localhost";class $E{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EN(r,t,e,i=yN,a=_N){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const p={...gN,width:i.toString(),height:a.toString(),top:l,left:c},g=Xe().toLowerCase();e&&(m=ob(g)?vN:e),rb(g)&&(t=t||TN,p.scrollbars="yes");const T=Object.entries(p).reduce((S,[R,V])=>`${S}${R}=${V},`,"");if(eD(g)&&m!=="_self")return SN(t||"",m),new $E(null);const E=window.open(t||"",m,T);Dt(E,r,"popup-blocked");try{E.focus()}catch{}return new $E(E)}function SN(r,t){const e=document.createElement("a");e.href=r,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="__/auth/handler",AN="emulator/auth/handler",IN=encodeURIComponent("fac");async function XE(r,t,e,i,a,l){Dt(r.config.authDomain,r,"auth-domain-config-required"),Dt(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:e,redirectUrl:i,v:Tl,eventId:a};if(t instanceof Xg){t.setDefaultLanguage(r.languageCode),c.providerId=t.providerId||"",ER(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,E]of Object.entries({}))c[T]=E}if(t instanceof Sc){const T=t.getScopes().filter(E=>E!=="");T.length>0&&(c.scopes=T.join(","))}r.tenantId&&(c.tid=r.tenantId);const m=c;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await r._getAppCheckToken(),g=p?`#${IN}=${encodeURIComponent(p)}`:"";return`${wN(r)}?${Tc(m).slice(1)}${g}`}function wN({config:r}){return r.emulator?Gg(r,AN):`https://${r.authDomain}/${bN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="webStorageSupport";class RN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tb,this._completeRedirectFn=JD,this._overrideRedirectResult=YD}async _openPopup(t,e,i,a){var c;xs((c=this.eventManagers[t._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await XE(t,e,i,rg(),a);return EN(t,l,Jg())}async _openRedirect(t,e,i,a){await this._originValidation(t);const l=await XE(t,e,i,rg(),a);return ND(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:l}=this.eventManagers[e];return a?Promise.resolve(a):(xs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await pN(t),i=new WD(t);return e.register("authEvent",a=>(Dt(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(jp,{type:jp},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[jp];l!==void 0&&e(!!l),ns(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=sN(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return fb()||ab()||Yg()}}const CN=RN;var JE="@firebase/auth",ZE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xN(r){Xo(new Va("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=i.options;Dt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:db(r)},g=new oD(i,a,l,p);return dD(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Xo(new Va("auth-internal",t=>{const e=ad(t.getProvider("auth").getImmediate());return(i=>new DN(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(JE,ZE,NN(r)),wr(JE,ZE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=300,MN=BS("authIdTokenMaxAge")||VN;let WE=null;const ON=r=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>MN)return;const a=e==null?void 0:e.token;WE!==a&&(WE=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function PN(r=bC()){const t=qg(r,"auth");if(t.isInitialized())return t.getImmediate();const e=fD(r,{popupRedirectResolver:CN,persistence:[zD,RD,Tb]}),i=BS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=ON(l.toString());SD(e,c,()=>c(e.currentUser)),ED(e,m=>c(m))}}const a=oR("auth");return a&&mD(e,`http://${a}`),e}function kN(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}lD({loadJS(r){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=t,i.onerror=a=>{const l=Ti("internal-error");l.customData=a,e(l)},i.type="text/javascript",i.charset="UTF-8",kN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xN("Browser");var t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,Cb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,A){function N(){}N.prototype=A.prototype,D.F=A.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(M,O,U){for(var x=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)x[Yt-2]=arguments[Yt];return A.prototype[O].apply(M,x)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,A,N){N||(N=0);const M=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)M[O]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(O=0;O<16;++O)M[O]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=D.g[0],N=D.g[1],O=D.g[2];let U=D.g[3],x;x=A+(U^N&(O^U))+M[0]+3614090360&4294967295,A=N+(x<<7&4294967295|x>>>25),x=U+(O^A&(N^O))+M[1]+3905402710&4294967295,U=A+(x<<12&4294967295|x>>>20),x=O+(N^U&(A^N))+M[2]+606105819&4294967295,O=U+(x<<17&4294967295|x>>>15),x=N+(A^O&(U^A))+M[3]+3250441966&4294967295,N=O+(x<<22&4294967295|x>>>10),x=A+(U^N&(O^U))+M[4]+4118548399&4294967295,A=N+(x<<7&4294967295|x>>>25),x=U+(O^A&(N^O))+M[5]+1200080426&4294967295,U=A+(x<<12&4294967295|x>>>20),x=O+(N^U&(A^N))+M[6]+2821735955&4294967295,O=U+(x<<17&4294967295|x>>>15),x=N+(A^O&(U^A))+M[7]+4249261313&4294967295,N=O+(x<<22&4294967295|x>>>10),x=A+(U^N&(O^U))+M[8]+1770035416&4294967295,A=N+(x<<7&4294967295|x>>>25),x=U+(O^A&(N^O))+M[9]+2336552879&4294967295,U=A+(x<<12&4294967295|x>>>20),x=O+(N^U&(A^N))+M[10]+4294925233&4294967295,O=U+(x<<17&4294967295|x>>>15),x=N+(A^O&(U^A))+M[11]+2304563134&4294967295,N=O+(x<<22&4294967295|x>>>10),x=A+(U^N&(O^U))+M[12]+1804603682&4294967295,A=N+(x<<7&4294967295|x>>>25),x=U+(O^A&(N^O))+M[13]+4254626195&4294967295,U=A+(x<<12&4294967295|x>>>20),x=O+(N^U&(A^N))+M[14]+2792965006&4294967295,O=U+(x<<17&4294967295|x>>>15),x=N+(A^O&(U^A))+M[15]+1236535329&4294967295,N=O+(x<<22&4294967295|x>>>10),x=A+(O^U&(N^O))+M[1]+4129170786&4294967295,A=N+(x<<5&4294967295|x>>>27),x=U+(N^O&(A^N))+M[6]+3225465664&4294967295,U=A+(x<<9&4294967295|x>>>23),x=O+(A^N&(U^A))+M[11]+643717713&4294967295,O=U+(x<<14&4294967295|x>>>18),x=N+(U^A&(O^U))+M[0]+3921069994&4294967295,N=O+(x<<20&4294967295|x>>>12),x=A+(O^U&(N^O))+M[5]+3593408605&4294967295,A=N+(x<<5&4294967295|x>>>27),x=U+(N^O&(A^N))+M[10]+38016083&4294967295,U=A+(x<<9&4294967295|x>>>23),x=O+(A^N&(U^A))+M[15]+3634488961&4294967295,O=U+(x<<14&4294967295|x>>>18),x=N+(U^A&(O^U))+M[4]+3889429448&4294967295,N=O+(x<<20&4294967295|x>>>12),x=A+(O^U&(N^O))+M[9]+568446438&4294967295,A=N+(x<<5&4294967295|x>>>27),x=U+(N^O&(A^N))+M[14]+3275163606&4294967295,U=A+(x<<9&4294967295|x>>>23),x=O+(A^N&(U^A))+M[3]+4107603335&4294967295,O=U+(x<<14&4294967295|x>>>18),x=N+(U^A&(O^U))+M[8]+1163531501&4294967295,N=O+(x<<20&4294967295|x>>>12),x=A+(O^U&(N^O))+M[13]+2850285829&4294967295,A=N+(x<<5&4294967295|x>>>27),x=U+(N^O&(A^N))+M[2]+4243563512&4294967295,U=A+(x<<9&4294967295|x>>>23),x=O+(A^N&(U^A))+M[7]+1735328473&4294967295,O=U+(x<<14&4294967295|x>>>18),x=N+(U^A&(O^U))+M[12]+2368359562&4294967295,N=O+(x<<20&4294967295|x>>>12),x=A+(N^O^U)+M[5]+4294588738&4294967295,A=N+(x<<4&4294967295|x>>>28),x=U+(A^N^O)+M[8]+2272392833&4294967295,U=A+(x<<11&4294967295|x>>>21),x=O+(U^A^N)+M[11]+1839030562&4294967295,O=U+(x<<16&4294967295|x>>>16),x=N+(O^U^A)+M[14]+4259657740&4294967295,N=O+(x<<23&4294967295|x>>>9),x=A+(N^O^U)+M[1]+2763975236&4294967295,A=N+(x<<4&4294967295|x>>>28),x=U+(A^N^O)+M[4]+1272893353&4294967295,U=A+(x<<11&4294967295|x>>>21),x=O+(U^A^N)+M[7]+4139469664&4294967295,O=U+(x<<16&4294967295|x>>>16),x=N+(O^U^A)+M[10]+3200236656&4294967295,N=O+(x<<23&4294967295|x>>>9),x=A+(N^O^U)+M[13]+681279174&4294967295,A=N+(x<<4&4294967295|x>>>28),x=U+(A^N^O)+M[0]+3936430074&4294967295,U=A+(x<<11&4294967295|x>>>21),x=O+(U^A^N)+M[3]+3572445317&4294967295,O=U+(x<<16&4294967295|x>>>16),x=N+(O^U^A)+M[6]+76029189&4294967295,N=O+(x<<23&4294967295|x>>>9),x=A+(N^O^U)+M[9]+3654602809&4294967295,A=N+(x<<4&4294967295|x>>>28),x=U+(A^N^O)+M[12]+3873151461&4294967295,U=A+(x<<11&4294967295|x>>>21),x=O+(U^A^N)+M[15]+530742520&4294967295,O=U+(x<<16&4294967295|x>>>16),x=N+(O^U^A)+M[2]+3299628645&4294967295,N=O+(x<<23&4294967295|x>>>9),x=A+(O^(N|~U))+M[0]+4096336452&4294967295,A=N+(x<<6&4294967295|x>>>26),x=U+(N^(A|~O))+M[7]+1126891415&4294967295,U=A+(x<<10&4294967295|x>>>22),x=O+(A^(U|~N))+M[14]+2878612391&4294967295,O=U+(x<<15&4294967295|x>>>17),x=N+(U^(O|~A))+M[5]+4237533241&4294967295,N=O+(x<<21&4294967295|x>>>11),x=A+(O^(N|~U))+M[12]+1700485571&4294967295,A=N+(x<<6&4294967295|x>>>26),x=U+(N^(A|~O))+M[3]+2399980690&4294967295,U=A+(x<<10&4294967295|x>>>22),x=O+(A^(U|~N))+M[10]+4293915773&4294967295,O=U+(x<<15&4294967295|x>>>17),x=N+(U^(O|~A))+M[1]+2240044497&4294967295,N=O+(x<<21&4294967295|x>>>11),x=A+(O^(N|~U))+M[8]+1873313359&4294967295,A=N+(x<<6&4294967295|x>>>26),x=U+(N^(A|~O))+M[15]+4264355552&4294967295,U=A+(x<<10&4294967295|x>>>22),x=O+(A^(U|~N))+M[6]+2734768916&4294967295,O=U+(x<<15&4294967295|x>>>17),x=N+(U^(O|~A))+M[13]+1309151649&4294967295,N=O+(x<<21&4294967295|x>>>11),x=A+(O^(N|~U))+M[4]+4149444226&4294967295,A=N+(x<<6&4294967295|x>>>26),x=U+(N^(A|~O))+M[11]+3174756917&4294967295,U=A+(x<<10&4294967295|x>>>22),x=O+(A^(U|~N))+M[2]+718787259&4294967295,O=U+(x<<15&4294967295|x>>>17),x=N+(U^(O|~A))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(O+(x<<21&4294967295|x>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+U&4294967295}i.prototype.v=function(D,A){A===void 0&&(A=D.length);const N=A-this.blockSize,M=this.C;let O=this.h,U=0;for(;U<A;){if(O==0)for(;U<=N;)a(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<A;)if(M[O++]=D.charCodeAt(U++),O==this.blockSize){a(this,M),O=0;break}}else for(;U<A;)if(M[O++]=D[U++],O==this.blockSize){a(this,M),O=0;break}}this.h=O,this.o+=A},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,N=0;N<4;++N)for(let M=0;M<32;M+=8)D[A++]=this.g[N]>>>M&255;return D};function l(D,A){var N=m;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=A(D)}function c(D,A){this.h=A;const N=[];let M=!0;for(let O=D.length-1;O>=0;O--){const U=D[O]|0;M&&U==A||(N[O]=U,M=!1)}this.g=N}var m={};function p(D){return-128<=D&&D<128?l(D,function(A){return new c([A|0],A<0?-1:0)}):new c([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return z(g(-D));const A=[];let N=1;for(let M=0;D>=N;M++)A[M]=D/N|0,N*=4294967296;return new c(A,0)}function T(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return z(T(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(A,8));let M=E;for(let U=0;U<D.length;U+=8){var O=Math.min(8,D.length-U);const x=parseInt(D.substring(U,U+O),A);O<8?(O=g(Math.pow(A,O)),M=M.j(O).add(g(x))):(M=M.j(N),M=M.add(g(x)))}return M}var E=p(0),S=p(1),R=p(16777216);r=c.prototype,r.m=function(){if(C(this))return-z(this).m();let D=0,A=1;for(let N=0;N<this.g.length;N++){const M=this.i(N);D+=(M>=0?M:4294967296+M)*A,A*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(V(this))return"0";if(C(this))return"-"+z(this).toString(D);const A=g(Math.pow(D,6));var N=this;let M="";for(;;){const O=mt(N,A).g;N=Q(N,O.j(A));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=O,V(N))return U+M;for(;U.length<6;)U="0"+U;M=U+M}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function V(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function C(D){return D.h==-1}r.l=function(D){return D=Q(this,D),C(D)?-1:V(D)?0:1};function z(D){const A=D.g.length,N=[];for(let M=0;M<A;M++)N[M]=~D.g[M];return new c(N,~D.h).add(S)}r.abs=function(){return C(this)?z(this):this},r.add=function(D){const A=Math.max(this.g.length,D.g.length),N=[];let M=0;for(let O=0;O<=A;O++){let U=M+(this.i(O)&65535)+(D.i(O)&65535),x=(U>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);M=x>>>16,U&=65535,x&=65535,N[O]=x<<16|U}return new c(N,N[N.length-1]&-2147483648?-1:0)};function Q(D,A){return D.add(z(A))}r.j=function(D){if(V(this)||V(D))return E;if(C(this))return C(D)?z(this).j(z(D)):z(z(this).j(D));if(C(D))return z(this.j(z(D)));if(this.l(R)<0&&D.l(R)<0)return g(this.m()*D.m());const A=this.g.length+D.g.length,N=[];for(var M=0;M<2*A;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<D.g.length;O++){const U=this.i(M)>>>16,x=this.i(M)&65535,Yt=D.i(O)>>>16,Zt=D.i(O)&65535;N[2*M+2*O]+=x*Zt,at(N,2*M+2*O),N[2*M+2*O+1]+=U*Zt,at(N,2*M+2*O+1),N[2*M+2*O+1]+=x*Yt,at(N,2*M+2*O+1),N[2*M+2*O+2]+=U*Yt,at(N,2*M+2*O+2)}for(D=0;D<A;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=A;D<2*A;D++)N[D]=0;return new c(N,0)};function at(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function rt(D,A){this.g=D,this.h=A}function mt(D,A){if(V(A))throw Error("division by zero");if(V(D))return new rt(E,E);if(C(D))return A=mt(z(D),A),new rt(z(A.g),z(A.h));if(C(A))return A=mt(D,z(A)),new rt(z(A.g),A.h);if(D.g.length>30){if(C(D)||C(A))throw Error("slowDivide_ only works with positive integers.");for(var N=S,M=A;M.l(D)<=0;)N=_t(N),M=_t(M);var O=ft(N,1),U=ft(M,1);for(M=ft(M,2),N=ft(N,2);!V(M);){var x=U.add(M);x.l(D)<=0&&(O=O.add(N),U=x),M=ft(M,1),N=ft(N,1)}return A=Q(D,O.j(A)),new rt(O,A)}for(O=E;D.l(A)>=0;){for(N=Math.max(1,Math.floor(D.m()/A.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),U=g(N),x=U.j(A);C(x)||x.l(D)>0;)N-=M,U=g(N),x=U.j(A);V(U)&&(U=S),O=O.add(U),D=Q(D,x)}return new rt(O,D)}r.B=function(D){return mt(this,D).h},r.and=function(D){const A=Math.max(this.g.length,D.g.length),N=[];for(let M=0;M<A;M++)N[M]=this.i(M)&D.i(M);return new c(N,this.h&D.h)},r.or=function(D){const A=Math.max(this.g.length,D.g.length),N=[];for(let M=0;M<A;M++)N[M]=this.i(M)|D.i(M);return new c(N,this.h|D.h)},r.xor=function(D){const A=Math.max(this.g.length,D.g.length),N=[];for(let M=0;M<A;M++)N[M]=this.i(M)^D.i(M);return new c(N,this.h^D.h)};function _t(D){const A=D.g.length+1,N=[];for(let M=0;M<A;M++)N[M]=D.i(M)<<1|D.i(M-1)>>>31;return new c(N,D.h)}function ft(D,A){const N=A>>5;A%=32;const M=D.g.length-N,O=[];for(let U=0;U<M;U++)O[U]=A>0?D.i(U+N)>>>A|D.i(U+N+1)<<32-A:D.i(U+N);return new c(O,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Cb=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=T,Rr=c}).apply(typeof t0<"u"?t0:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Db,zu,Nb,vf,lg,xb,Vb,Mb;(function(){var r,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=e(this);function a(h,y){if(y)t:{var v=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var q=h[w];if(!(q in v))break t;v=v[q]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&t(v,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var v=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&v.push([w,y[w]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,v){return h.call.apply(h.bind,arguments)}function g(h,y,v){return g=p,g.apply(null,arguments)}function T(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function E(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(w,q,$){for(var ct=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)ct[Ot-2]=arguments[Ot];return y.prototype[q].apply(w,ct)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function V(h,y){for(let w=1;w<arguments.length;w++){const q=arguments[w];var v=typeof q;if(v=v!="object"?v:q?Array.isArray(q)?"array":v:"null",v=="array"||v=="object"&&typeof q.length=="number"){v=h.length||0;const $=q.length||0;h.length=v+$;for(let ct=0;ct<$;ct++)h[v+ct]=q[ct]}else h.push(q)}}class C{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(h){c.setTimeout(()=>{throw h},0)}function Q(){var h=D;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class at{constructor(){this.h=this.g=null}add(y,v){const w=rt.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var rt=new C(()=>new mt,h=>h.reset());class mt{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let _t,ft=!1,D=new at,A=()=>{const h=Promise.resolve(void 0);_t=()=>{h.then(N)}};function N(){for(var h;h=Q();){try{h.h.call(h.g)}catch(v){z(v)}var y=rt;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ft=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function Yt(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Yt,O),Yt.prototype.init=function(h,y){const v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Yt.Z.h.call(this)},Yt.prototype.h=function(){Yt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Zt="closure_listenable_"+(Math.random()*1e6|0),J=0;function lt(h,y,v,w,q){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=q,this.key=++J,this.da=this.fa=!1}function Tt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function xt(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function Ut(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function k(h){const y={};for(const v in h)y[v]=h[v];return y}const et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(h,y){let v,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(v in w)h[v]=w[v];for(let $=0;$<et.length;$++)v=et[$],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function ot(h){this.src=h,this.g={},this.h=0}ot.prototype.add=function(h,y,v,w,q){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const ct=bt(h,y,w,q);return ct>-1?(y=h[ct],v||(y.fa=!1)):(y=new lt(y,this.src,$,!!w,q),y.fa=v,h.push(y)),y};function dt(h,y){const v=y.type;if(v in h.g){var w=h.g[v],q=Array.prototype.indexOf.call(w,y,void 0),$;($=q>=0)&&Array.prototype.splice.call(w,q,1),$&&(Tt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function bt(h,y,v,w){for(let q=0;q<h.length;++q){const $=h[q];if(!$.da&&$.listener==y&&$.capture==!!v&&$.ha==w)return q}return-1}var Mt="closure_lm_"+(Math.random()*1e6|0),ee={};function jt(h,y,v,w,q){if(Array.isArray(y)){for(let $=0;$<y.length;$++)jt(h,y[$],v,w,q);return null}return v=zr(v),h&&h[Zt]?h.J(y,v,m(w)?!!w.capture:!1,q):Z(h,y,v,!1,w,q)}function Z(h,y,v,w,q,$){if(!y)throw Error("Invalid event type");const ct=m(q)?!!q.capture:!!q;let Ot=ke(h);if(Ot||(h[Mt]=Ot=new ot(h)),v=Ot.add(y,v,w,ct,$),v.proxy)return v;if(w=pt(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)U||(q=ct),q===void 0&&(q=!1),h.addEventListener(y.toString(),w,q);else if(h.attachEvent)h.attachEvent(Ct(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function pt(){function h(v){return y.call(h.src,h.listener,v)}const y=Xt;return h}function wt(h,y,v,w,q){if(Array.isArray(y))for(var $=0;$<y.length;$++)wt(h,y[$],v,w,q);else w=m(w)?!!w.capture:!!w,v=zr(v),h&&h[Zt]?(h=h.i,$=String(y).toString(),$ in h.g&&(y=h.g[$],v=bt(y,v,w,q),v>-1&&(Tt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[$],h.h--)))):h&&(h=ke(h))&&(y=h.g[y.toString()],h=-1,y&&(h=bt(y,v,w,q)),(v=h>-1?y[h]:null)&&kt(v))}function kt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Zt])dt(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(Ct(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=ke(y))?(dt(v,h),v.h==0&&(v.src=null,y[Mt]=null)):Tt(h)}}}function Ct(h){return h in ee?ee[h]:ee[h]="on"+h}function Xt(h,y){if(h.da)h=!0;else{y=new Yt(y,this);const v=h.listener,w=h.ha||h.src;h.fa&&kt(h),h=v.call(w,y)}return h}function ke(h){return h=h[Mt],h instanceof ot?h:null}var ss="__closure_events_fn_"+(Math.random()*1e9>>>0);function zr(h){return typeof h=="function"?h:(h[ss]||(h[ss]=function(y){return h.handleEvent(y)}),h[ss])}function Se(){M.call(this),this.i=new ot(this),this.M=this,this.G=null}E(Se,M),Se.prototype[Zt]=!0,Se.prototype.removeEventListener=function(h,y,v,w){wt(this,h,y,v,w)};function Ce(h,y){var v,w=h.G;if(w)for(v=[];w;w=w.G)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var q=y;y=new O(w,h),Y(y,q)}q=!0;let $,ct;if(v)for(ct=v.length-1;ct>=0;ct--)$=y.g=v[ct],q=Hn($,w,!0,y)&&q;if($=y.g=h,q=Hn($,w,!0,y)&&q,q=Hn($,w,!1,y)&&q,v)for(ct=0;ct<v.length;ct++)$=y.g=v[ct],q=Hn($,w,!1,y)&&q}Se.prototype.N=function(){if(Se.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let w=0;w<v.length;w++)Tt(v[w]);delete h.g[y],h.h--}}this.G=null},Se.prototype.J=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},Se.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function Hn(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let $=0;$<y.length;++$){const ct=y[$];if(ct&&!ct.da&&ct.capture==v){const Ot=ct.listener,Ne=ct.ha||ct.src;ct.fa&&dt(h.i,ct),q=Ot.call(Ne,w)!==!1&&q}}return q&&!w.defaultPrevented}function Cl(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function jr(h){h.g=Cl(()=>{h.g=null,h.i&&(h.i=!1,jr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class sn extends M{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(h){M.call(this),this.h=h,this.g={}}E(rs,M);var Si=[];function bi(h){xt(h.g,function(y,v){this.g.hasOwnProperty(v)&&kt(y)},h),h.g={}}rs.prototype.N=function(){rs.Z.N.call(this),bi(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ai=c.JSON.stringify,Ft=c.JSON.parse,be=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ii(){}function Mc(){}var ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rn(){O.call(this,"d")}E(rn,O);function Gn(){O.call(this,"c")}E(Gn,O);var De={},Oc=null;function Ha(){return Oc=Oc||new Se}De.Ia="serverreachability";function Pc(h){O.call(this,De.Ia,h)}E(Pc,O);function wi(h){const y=Ha();Ce(y,new Pc(y))}De.STAT_EVENT="statevent";function Br(h,y){O.call(this,De.STAT_EVENT,h),this.stat=y}E(Br,O);function Le(h){const y=Ha();Ce(y,new Br(y,h))}De.Ja="timingevent";function Ri(h,y){O.call(this,De.Ja,h),this.size=y}E(Ri,O);function Ci(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ai(){this.g=!0}ai.prototype.ua=function(){this.g=!1};function Vd(h,y,v,w,q,$){h.info(function(){if(h.g)if($){var ct="",Ot=$.split("&");for(let ne=0;ne<Ot.length;ne++){var Ne=Ot[ne].split("=");if(Ne.length>1){const ve=Ne[0];Ne=Ne[1];const $n=ve.split("_");ct=$n.length>=2&&$n[1]=="type"?ct+(ve+"="+Ne+"&"):ct+(ve+"=redacted&")}}}else ct=null;else ct=$;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+y+`
`+v+`
`+ct})}function kc(h,y,v,w,q,$,ct){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+y+`
`+v+`
`+$+" "+ct})}function Di(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Md(h,v)+(w?" "+w:"")})}function qr(h,y){h.info(function(){return"TIMEOUT: "+y})}ai.prototype.info=function(){};function Md(h,y){if(!h.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var v=$[h];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var q=w[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ct=1;ct<w.length;ct++)w[ct]=""}}}}return Ai($)}catch{return y}}var Fr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Dl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nl;function Hr(){}E(Hr,Ii),Hr.prototype.g=function(){return new XMLHttpRequest},Nl=new Hr;function as(h){return encodeURIComponent(String(h))}function Lc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function oi(h,y,v,w){this.j=h,this.i=y,this.l=v,this.S=w||1,this.V=new rs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new li}function li(){this.i=null,this.g="",this.h=!1}var Ue={},Ze={};function Ni(h,y,v){h.M=1,h.A=Gr(je(y)),h.u=v,h.R=!0,Ga(h,null)}function Ga(h,y){h.F=Date.now(),xi(h),h.B=je(h.A);var v=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),$a(v.i,"t",w),h.C=0,v=h.j.L,h.h=new li,h.g=Zc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new sn(g(h.Y,h,h.g),h.P)),y=h.V,v=h.g,w=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Si[0]=q.toString()),q=Si);for(let $=0;$<q.length;$++){const ct=jt(v,q[$],w||y.handleEvent,!1,y.h||y);if(!ct)break;y.g[ct.key]=ct}y=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),wi(),Vd(h.i,h.v,h.B,h.l,h.S,h.u)}oi.prototype.ba=function(h){h=h.target;const y=this.O;y&&hi(h)==3?y.j():this.Y(h)},oi.prototype.Y=function(h){try{if(h==this.g)t:{const Ot=hi(this.g),Ne=this.g.ya(),ne=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||an(this.g)))){this.K||Ot!=4||Ne==7||(Ne==8||ne<=0?wi(3):wi(2)),Vi(this);var y=this.g.ca();this.X=y;var v=Od(this);if(this.o=y==200,kc(this.i,this.v,this.B,this.l,this.S,Ot,y),this.o){if(this.U&&!this.L){e:{if(this.g){var w,q=this.g;if((w=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(w)){var $=w;break e}}$=null}if(h=$)Di(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mi(this,h);else{this.o=!1,this.m=3,Le(12),xn(this),Kn(this);break t}}if(this.R){h=!0;let ve;for(;!this.K&&this.C<v.length;)if(ve=zc(this,v),ve==Ze){Ot==4&&(this.m=4,Le(14),h=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(ve==Ue){this.m=4,Le(15),Di(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Di(this.i,this.l,ve,null),Mi(this,ve);if(Uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||v.length!=0||this.h.h||(this.m=1,Le(16),h=!1),this.o=this.o&&h,!h)Di(this.i,this.l,v,"[Invalid Chunked Response]"),xn(this),Kn(this);else if(v.length>0&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.aa&&!ct.P&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Gl(ct),ct.P=!0,Le(11))}}else Di(this.i,this.l,v,null),Mi(this,v);Ot==4&&xn(this),this.o&&!this.K&&(Ot==4?Yc(this.j,this):(this.o=!1,xi(this)))}else ls(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Le(12)):(this.m=0,Le(13)),xn(this),Kn(this)}}}catch{}finally{}};function Od(h){if(!Uc(h))return h.g.la();const y=an(h.g);if(y==="")return"";let v="";const w=y.length,q=hi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return xn(h),Kn(h),"";h.h.i=new c.TextDecoder}for(let $=0;$<w;$++)h.h.h=!0,v+=h.h.i.decode(y[$],{stream:!(q&&$==w-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Uc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function zc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Ze:(v=Number(y.substring(v,w)),isNaN(v)?Ue:(w+=1,w+v>y.length?Ze:(y=y.slice(w,w+v),h.C=w+v,y)))}oi.prototype.cancel=function(){this.K=!0,xn(this)};function xi(h){h.T=Date.now()+h.H,Ka(h,h.H)}function Ka(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ci(g(h.aa,h),y)}function Vi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}oi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(qr(this.i,this.B),this.M!=2&&(wi(),Le(17)),xn(this),this.m=2,Kn(this)):Ka(this,this.T-h)};function Kn(h){h.j.I==0||h.K||Yc(h.j,h)}function xn(h){Vi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,bi(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Mi(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Pi(v.h,h))){if(!h.L&&Pi(v.h,h)&&v.I==3){try{var w=v.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)to(v),Hs(v);else break t;Zr(v),Le(18)}}else v.xa=q[1],0<v.xa-v.K&&q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ci(g(v.Va,v),6e3));Oi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Bi(v,11)}else if((h.L||v.g==h)&&to(v),!x(y))for(q=v.Ba.g.parse(y),y=0;y<q.length;y++){let ne=q[y];const ve=ne[0];if(!(ve<=v.K))if(v.K=ve,ne=ne[1],v.I==2)if(ne[0]=="c"){v.M=ne[1],v.ba=ne[2];const $n=ne[3];$n!=null&&(v.ka=$n,v.j.info("VER="+v.ka));const qi=ne[4];qi!=null&&(v.za=qi,v.j.info("SVER="+v.za));const fi=ne[5];fi!=null&&typeof fi=="number"&&fi>0&&(w=1.5*fi,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const di=h.g;if(di){const Wr=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wr){var $=w.h;$.g||Wr.indexOf("spdy")==-1&&Wr.indexOf("quic")==-1&&Wr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ml($,$.h),$.h=null))}if(w.G){const eo=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;eo&&(w.wa=eo,re(w.J,w.G,eo))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var ct=h;if(w.na=Jc(w,w.L?w.ba:null,w.W),ct.L){Ol(w.h,ct);var Ot=ct,Ne=w.O;Ne&&(Ot.H=Ne),Ot.D&&(Vi(Ot),xi(Ot)),w.g=ct}else Kc(w);v.i.length>0&&ji(v)}else ne[0]!="stop"&&ne[0]!="close"||Bi(v,7);else v.I==3&&(ne[0]=="stop"||ne[0]=="close"?ne[0]=="stop"?Bi(v,7):Fl(v):ne[0]!="noop"&&v.l&&v.l.qa(ne),v.A=0)}}wi(4)}catch{}}var ze=class{constructor(h,y){this.g=h,this.map=y}};function xl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Oi(h){return h.h?1:h.g?h.g.size:0}function Pi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ml(h,y){h.g?h.g.add(y):h.h=y}function Ol(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}xl.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Pl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return R(h.i)}var jc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qa(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const w=h[v].indexOf("=");let q,$=null;w>=0?(q=h[v].substring(0,w),$=h[v].substring(w+1)):q=h[v],y(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Vn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Vn?(this.l=h.l,We(this,h.j),this.o=h.o,this.g=h.g,Ls(this,h.u),this.h=h.h,kl(this,Hc(h.i)),this.m=h.m):h&&(y=String(h).match(jc))?(this.l=!1,We(this,y[1]||"",!0),this.o=ki(y[2]||""),this.g=ki(y[3]||"",!0),Ls(this,y[4]),this.h=ki(y[5]||"",!0),kl(this,y[6]||"",!0),this.m=ki(y[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}Vn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Kr(y,Ya,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Kr(y,Ya,!0),"@"),h.push(as(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Kr(v,v.charAt(0)=="/"?Ll:Bc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Kr(v,qc)),h.join("")},Vn.prototype.resolve=function(h){const y=je(this);let v=!!h.j;v?We(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var w=h.h;if(v)Ls(y,h.u);else if(v=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var q=y.h.lastIndexOf("/");q!=-1&&(w=y.h.slice(0,q+1)+w)}if(q=w,q==".."||q==".")w="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){w=q.lastIndexOf("/",0)==0,q=q.split("/");const $=[];for(let ct=0;ct<q.length;){const Ot=q[ct++];Ot=="."?w&&ct==q.length&&$.push(""):Ot==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),w&&ct==q.length&&$.push("")):($.push(Ot),w=!0)}w=$.join("/")}else w=q}return v?y.h=w:v=h.i.toString()!=="",v?kl(y,Hc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function je(h){return new Vn(h)}function We(h,y,v){h.j=v?ki(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ls(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function kl(h,y,v){y instanceof zs?(h.i=y,Xa(h.i,h.l)):(v||(y=Kr(y,Us)),h.i=new zs(y,h.l))}function re(h,y,v){h.i.set(y,v)}function Gr(h){return re(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ki(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Kr(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Sn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Sn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ya=/[#\/\?@]/g,Bc=/[#\?:]/g,Ll=/[#\?]/g,Us=/[#\?@]/g,qc=/#/g;function zs(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function bn(h){h.g||(h.g=new Map,h.h=0,h.i&&Qa(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=zs.prototype,r.add=function(h,y){bn(this),this.i=null,h=js(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Fc(h,y){bn(h),y=js(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ul(h,y){return bn(h),y=js(h,y),h.g.has(y)}r.forEach=function(h,y){bn(this),this.g.forEach(function(v,w){v.forEach(function(q){h.call(y,q,w,this)},this)},this)};function zl(h,y){bn(h);let v=[];if(typeof y=="string")Ul(h,y)&&(v=v.concat(h.g.get(js(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}r.set=function(h,y){return bn(this),this.i=null,h=js(this,h),Ul(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=zl(this,h),h.length>0?String(h[0]):y):y};function $a(h,y,v){Fc(h,y),v.length>0&&(h.i=null,h.g.set(js(h,y),R(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var v=y[w];const q=as(v);v=zl(this,v);for(let $=0;$<v.length;$++){let ct=q;v[$]!==""&&(ct+="="+as(v[$])),h.push(ct)}}return this.i=h.join("&")};function Hc(h){const y=new zs;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function js(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Xa(h,y){y&&!h.j&&(bn(h),h.i=null,h.g.forEach(function(v,w){const q=w.toLowerCase();w!=q&&(Fc(this,w),$a(this,q,v))},h)),h.j=y}function ui(h,y){const v=new ai;if(c.Image){const w=new Image;w.onload=T(Qn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=T(Qn,v,"TestLoadImage: error",!1,y,w),w.onabort=T(Qn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=T(Qn,v,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function jl(h,y){const v=new ai,w=new AbortController,q=setTimeout(()=>{w.abort(),Qn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then($=>{clearTimeout(q),$.ok?Qn(v,"TestPingServer: ok",!0,y):Qn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Qn(v,"TestPingServer: error",!1,y)})}function Qn(h,y,v,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(v)}catch{}}function Bs(){this.g=new be}function Li(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Li,Ii),Li.prototype.g=function(){return new Qr(this.i,this.h)};function Qr(h,y){Se.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Qr,Se),r=Qr.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ci(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?qs(this):ci(this),this.readyState==3&&Ja(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,qs(this))},r.Na=function(h){this.g&&(this.response=h,qs(this))},r.ga=function(){this.g&&qs(this)};function qs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ci(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ci(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Yn(h){let y="";return xt(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function Yr(h,y,v){t:{for(w in v){var w=!1;break t}w=!0}w||(v=Yn(v),typeof h=="string"?v!=null&&as(v):re(h,y,v))}function he(h){Se.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(he,Se);var Ui=/^https?$/i,Bl=["POST","PUT"];r=he.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nl.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch($){$r(this,$);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)v.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())v.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Bl,y,void 0)>=0)||w||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ct]of v)this.g.setRequestHeader($,ct);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){$r(this,$)}};function $r(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,ql(h),os(h)}function ql(h){h.A||(h.A=!0,Ce(h,"complete"),Ce(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ce(this,"complete"),Ce(this,"abort"),os(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),he.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Xr(this):this.Xa())},r.Xa=function(){Xr(this)};function Xr(h){if(h.h&&typeof l<"u"){if(h.v&&hi(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ce(h,"readystatechange"),hi(h)==4){h.h=!1;try{const $=h.ca();t:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var w;if(w=$===0){let ct=String(h.D).match(jc)[1]||null;!ct&&c.self&&c.self.location&&(ct=c.self.location.protocol.slice(0,-1)),w=!Ui.test(ct?ct.toLowerCase():"")}v=w}if(v)Ce(h,"complete"),Ce(h,"success");else{h.o=6;try{var q=hi(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",ql(h)}}finally{os(h)}}}}function os(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Ce(h,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function hi(h){return h.g?h.g.readyState:0}r.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ft(y)}};function an(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(h){const y={};h=(h.g&&hi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(x(h[w]))continue;var v=Lc(h[w]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=y[q]||[];y[q]=$,$.push(v)}Ut(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zi(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Fs(h){this.za=0,this.i=[],this.j=new ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zi("baseRetryDelayMs",5e3,h),this.Za=zi("retryDelaySeedMs",1e4,h),this.Ta=zi("forwardChannelMaxRetries",2,h),this.va=zi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new xl(h&&h.concurrentRequestLimit),this.Ba=new Bs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Fs.prototype,r.ka=8,r.I=1,r.connect=function(h,y,v,w){Le(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=Jc(this,null,this.W),ji(this)};function Fl(h){if(Za(h),h.I==3){var y=h.V++,v=je(h.J);if(re(v,"SID",h.M),re(v,"RID",y),re(v,"TYPE","terminate"),Jr(h,v),y=new oi(h,h.j,y),y.M=2,y.A=Gr(je(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Zc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),xi(y)}Xc(h)}function Hs(h){h.g&&(Gl(h),h.g.cancel(),h.g=null)}function Za(h){Hs(h),h.v&&(c.clearTimeout(h.v),h.v=null),to(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ji(h){if(!Vl(h.h)&&!h.m){h.m=!0;var y=h.Ea;_t||A(),ft||(_t(),ft=!0),D.add(y,h),h.D=0}}function Wa(h,y){return Oi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ci(g(h.Ea,h,y),$c(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new oi(this,this.j,h);let $=this.o;if(this.U&&($?($=k($),Y($,this.U)):$=this.U),this.u!==null||this.R||(q.J=$,$=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=Gc(this,q,y),v=je(this.J),re(v,"RID",h),re(v,"CVER",22),this.G&&re(v,"X-HTTP-Session-Id",this.G),Jr(this,v),$&&(this.R?y="headers="+as(Yn($))+"&"+y:this.u&&Yr(v,this.u,$)),Ml(this.h,q),this.Ra&&re(v,"TYPE","init"),this.S?(re(v,"$req",y),re(v,"SID","null"),q.U=!0,Ni(q,v,null)):Ni(q,v,y),this.I=2}}else this.I==3&&(h?Hl(this,h):this.i.length==0||Vl(this.h)||Hl(this))};function Hl(h,y){var v;y?v=y.l:v=h.V++;const w=je(h.J);re(w,"SID",h.M),re(w,"RID",v),re(w,"AID",h.K),Jr(h,w),h.u&&h.o&&Yr(w,h.u,h.o),v=new oi(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Gc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ml(h.h,v),Ni(v,w,y)}function Jr(h,y){h.H&&xt(h.H,function(v,w){re(y,w,v)}),h.l&&xt({},function(v,w){re(y,w,v)})}function Gc(h,y,v){v=Math.min(h.i.length,v);const w=h.l?g(h.l.Ka,h.l,h):null;t:{var q=h.i;let Ot=-1;for(;;){const Ne=["count="+v];Ot==-1?v>0?(Ot=q[0].g,Ne.push("ofs="+Ot)):Ot=0:Ne.push("ofs="+Ot);let ne=!0;for(let ve=0;ve<v;ve++){var $=q[ve].g;const $n=q[ve].map;if($-=Ot,$<0)Ot=Math.max(0,q[ve].g-100),ne=!1;else try{$="req"+$+"_"||"";try{var ct=$n instanceof Map?$n:Object.entries($n);for(const[qi,fi]of ct){let di=fi;m(fi)&&(di=Ai(fi)),Ne.push($+qi+"="+encodeURIComponent(di))}}catch(qi){throw Ne.push($+"type="+encodeURIComponent("_badmap")),qi}}catch{w&&w($n)}}if(ne){ct=Ne.join("&");break t}}ct=void 0}return h=h.i.splice(0,v),y.G=h,ct}function Kc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;_t||A(),ft||(_t(),ft=!0),D.add(y,h),h.A=0}}function Zr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ci(g(h.Da,h),$c(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Qc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ci(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Le(10),Hs(this),Qc(this))};function Gl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Qc(h){h.g=new oi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=je(h.na);re(y,"RID","rpc"),re(y,"SID",h.M),re(y,"AID",h.K),re(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&re(y,"TO",h.ia),re(y,"TYPE","xmlhttp"),Jr(h,y),h.u&&h.o&&Yr(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Gr(je(y)),v.u=null,v.R=!0,Ga(v,h)}r.Va=function(){this.C!=null&&(this.C=null,Hs(this),Zr(this),Le(19))};function to(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Yc(h,y){var v=null;if(h.g==y){to(h),Gl(h),h.g=null;var w=2}else if(Pi(h.h,y))v=y.G,Ol(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;w=Ha(),Ce(w,new Ri(w,v)),ji(h)}else Kc(h);else if(q=y.m,q==3||q==0&&y.X>0||!(w==1&&Wa(h,y)||w==2&&Zr(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),q){case 1:Bi(h,5);break;case 4:Bi(h,10);break;case 3:Bi(h,6);break;default:Bi(h,2)}}}function $c(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Bi(h,y){if(h.j.info("Error code "+y),y==2){var v=g(h.bb,h),w=h.Ua;const q=!w;w=new Vn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||We(w,"https"),Gr(w),q?ui(w.toString(),v):jl(w.toString(),v)}else Le(2);h.I=0,h.l&&h.l.pa(y),Xc(h),Za(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Xc(h){if(h.I=0,h.ja=[],h.l){const y=Pl(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function Jc(h,y,v){var w=v instanceof Vn?je(v):new Vn(v);if(w.g!="")y&&(w.g=y+"."+w.g),Ls(w,w.u);else{var q=c.location;w=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const $=new Vn(null);w&&We($,w),y&&($.g=y),q&&Ls($,q),v&&($.h=v),w=$}return v=h.G,y=h.wa,v&&y&&re(w,v,y),re(w,"VER",h.ka),Jr(h,w),w}function Zc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new he(new Li({ab:v})):new he(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}r=Wc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Gs(){}Gs.prototype.g=function(h,y){return new _n(h,y)};function _n(h,y){Se.call(this),this.g=new Fs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!x(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new us(this)}E(_n,Se),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Fl(this.g)},_n.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Ai(h),h=v);y.i.push(new ze(y.Ya++,h)),y.I==3&&ji(y)},_n.prototype.N=function(){this.g.l=null,delete this.j,Fl(this.g),delete this.g,_n.Z.N.call(this)};function th(h){rn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const v in y){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(th,rn);function eh(){Gn.call(this),this.status=1}E(eh,Gn);function us(h){this.g=h}E(us,Wc),us.prototype.ra=function(){Ce(this.g,"a")},us.prototype.qa=function(h){Ce(this.g,new th(h))},us.prototype.pa=function(h){Ce(this.g,new eh)},us.prototype.oa=function(){Ce(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,Mb=function(){return new Gs},Vb=function(){return Ha()},xb=De,lg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,vf=Fr,Dl.COMPLETE="complete",Nb=Dl,Mc.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",Se.prototype.listen=Se.prototype.J,zu=Mc,he.prototype.listenOnce=he.prototype.K,he.prototype.getLastError=he.prototype.Ha,he.prototype.getLastErrorCode=he.prototype.ya,he.prototype.getStatus=he.prototype.ca,he.prototype.getResponseJson=he.prototype.La,he.prototype.getResponseText=he.prototype.la,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Fa,Db=he}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="12.9.0";function LN(r){Sl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new jg("@firebase/firestore");function zo(){return Oa.logLevel}function st(r,...t){if(Oa.logLevel<=Kt.DEBUG){const e=t.map(Wg);Oa.debug(`Firestore (${Sl}): ${r}`,...e)}}function Me(r,...t){if(Oa.logLevel<=Kt.ERROR){const e=t.map(Wg);Oa.error(`Firestore (${Sl}): ${r}`,...e)}}function Zo(r,...t){if(Oa.logLevel<=Kt.WARN){const e=t.map(Wg);Oa.warn(`Firestore (${Sl}): ${r}`,...e)}}function Wg(r){if(typeof r=="string")return r;try{return(function(e){return JSON.stringify(e)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Ob(r,i,e)}function Ob(r,t,e){let i=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Me(i),new Error(i)}function St(r,t,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,r||Ob(t,a,i)}function vt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends Os{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(mn.UNAUTHENTICATED)))}shutdown(){}}class jN{constructor(t){this.t=t,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){St(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,e(p)):Promise.resolve();let l=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cr,t.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;t.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},m=p=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cr)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(St(typeof i.accessToken=="string",31837,{l:i}),new UN(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return St(t===null||typeof t=="string",2055,{h:t}),new mn(t)}}class BN{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class qN{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new BN(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class e0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FN{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){St(this.o===void 0,3512);const i=l=>{l.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,st("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable((()=>i(l)))};const a=l=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new e0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(St(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new e0(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<r;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=HN(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<e&&(i+=t.charAt(a[l]%62))}return i}}function Nt(r,t){return r<t?-1:r>t?1:0}function ug(r,t){const e=Math.min(r.length,t.length);for(let i=0;i<e;i++){const a=r.charAt(i),l=t.charAt(i);if(a!==l)return Bp(a)===Bp(l)?Nt(a,l):Bp(a)?1:-1}return Nt(r.length,t.length)}const GN=55296,KN=57343;function Bp(r){const t=r.charCodeAt(0);return t>=GN&&t<=KN}function Wo(r,t,e){return r.length===t.length&&r.every(((i,a)=>e(i,t[a])))}function Pb(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="__name__";class Xi{constructor(t,e,i){e===void 0?e=0:e>t.length&&gt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&gt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Xi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Xi?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const l=Xi.compareSegments(t.get(a),e.get(a));if(l!==0)return l}return Nt(t.length,e.length)}static compareSegments(t,e){const i=Xi.isNumericId(t),a=Xi.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?Xi.extractNumericId(t).compare(Xi.extractNumericId(e)):ug(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Rr.fromString(t.substring(4,t.length-2))}}class se extends Xi{construct(t,e,i){return new se(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ut(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((a=>a.length>0)))}return new se(e)}static emptyPath(){return new se([])}}const QN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ae extends Xi{construct(t,e,i){return new Ae(t,e,i)}static isValidIdentifier(t){return QN.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ae.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n0}static keyField(){return new Ae([n0])}static fromServerFormat(t){const e=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ut(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;a<t.length;){const m=t[a];if(m==="\\"){if(a+1===t.length)throw new ut(W.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ut(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,a+=2}else m==="`"?(c=!c,a++):m!=="."||c?(i+=m,a++):(l(),a++)}if(l(),c)throw new ut(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ae(e)}static emptyPath(){return new Ae([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(se.fromString(t))}static fromName(t){return new ht(se.fromString(t).popFirst(5))}static empty(){return new ht(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&se.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return se.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new se(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(r,t,e){if(!e)throw new ut(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function YN(r,t,e,i){if(t===!0&&i===!0)throw new ut(W.INVALID_ARGUMENT,`${r} and ${e} cannot be used together.`)}function i0(r){if(!ht.isDocumentKey(r))throw new ut(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function s0(r){if(ht.isDocumentKey(r))throw new ut(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Lb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ud(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":gt(12329,{type:typeof r})}function Ds(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ut(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=ud(r);throw new ut(W.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(r,t){const e={typeString:r};return t&&(e.value=t),e}function Ac(r,t){if(!Lb(r))throw new ut(W.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const a=t[i].typeString,l="value"in t[i]?{value:t[i].value}:void 0;if(!(i in r)){e=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){e=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){e=`Expected '${i}' field to equal '${l.value}'`;break}}if(e)throw new ut(W.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=-62135596800,a0=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*a0);return new le(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ut(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ut(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<r0)throw new ut(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a0}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ac(t,le._jsonSchema))return new le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-r0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:Qe("string",le._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{static fromTimestamp(t){return new It(t)}static min(){return new It(new le(0,0))}static max(){return new It(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=-1;class Uf{constructor(t,e,i,a){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=a}}function cg(r){return r.fields.find((t=>t.kind===2))}function ya(r){return r.fields.filter((t=>t.kind!==2))}Uf.UNKNOWN_ID=-1;class Tf{constructor(t,e){this.fieldPath=t,this.kind=e}}class rc{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new rc(0,Fn.min())}}function Ub(r,t){const e=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=It.fromTimestamp(i===1e9?new le(e+1,0):new le(e,i));return new Fn(a,ht.empty(),t)}function zb(r){return new Fn(r.readTime,r.key,tl)}class Fn{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Fn(It.min(),ht.empty(),tl)}static max(){return new Fn(It.max(),ht.empty(),tl)}}function ey(r,t){let e=r.readTime.compareTo(t.readTime);return e!==0?e:(e=ht.comparator(r.documentKey,t.documentKey),e!==0?e:Nt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pr(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==jb)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new B(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,a)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof B?e:B.resolve(e)}catch(e){return B.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):B.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):B.reject(e)}static resolve(t){return new B(((e,i)=>{e(t)}))}static reject(t){return new B(((e,i)=>{i(t)}))}static waitFor(t){return new B(((e,i)=>{let a=0,l=0,c=!1;t.forEach((m=>{++a,m.next((()=>{++l,c&&l===a&&e()}),(p=>i(p)))})),c=!0,l===a&&e()}))}static or(t){let e=B.resolve(!1);for(const i of t)e=e.next((a=>a?B.resolve(a):i()));return e}static forEach(t,e){const i=[];return t.forEach(((a,l)=>{i.push(e.call(this,a,l))})),this.waitFor(i)}static mapArray(t,e){return new B(((i,a)=>{const l=t.length,c=new Array(l);let m=0;for(let p=0;p<l;p++){const g=p;e(t[g]).next((T=>{c[g]=T,++m,m===l&&i(c)}),(T=>a(T)))}}))}static doWhile(t,e){return new B(((i,a)=>{const l=()=>{t()===!0?e().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="SimpleDb";class cd{static open(t,e,i,a){try{return new cd(e,t.transaction(a,i))}catch(l){throw new Qu(e,l)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Cr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Qu(t,e.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=ny(i.target.error);this.S.reject(new Qu(t,a))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(st(jn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new XN(e)}}class Dr{static delete(t){return st(jn,"Removing database:",t),va(zS().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!KS())return!1;if(Dr.F())return!0;const t=Xe(),e=Dr.M(t),i=0<e&&e<10,a=qb(t),l=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||l)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(t,e,i){this.name=t,this.version=e,this.N=i,this.B=null,Dr.M(Xe())===12.2&&Me("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(st(jn,"Opening database:",this.name),this.db=await new Promise(((e,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;e(c)},a.onblocked=()=>{i(new Qu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new ut(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new ut(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Qu(t,c))},a.onupgradeneeded=l=>{st(jn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{st(jn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=e=>this.K(e)),this.db}q(t){this.K=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,a){const l=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const m=cd.open(this.db,t,l?"readonly":"readwrite",i),p=a(m).next((g=>(m.C(),g))).catch((g=>(m.abort(g),B.reject(g)))).toPromise();return p.catch((()=>{})),await m.D,p}catch(m){const p=m,g=p.name!=="FirebaseError"&&c<3;if(st(jn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qb(r){const t=r.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class $N{constructor(t){this.U=t,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(t){this.U=t}done(){this.$=!0}j(t){this.W=t}delete(){return va(this.U.delete())}}class Qu extends ut{constructor(t,e){super(W.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function kr(r){return r.name==="IndexedDbTransactionError"}class XN{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(st(jn,"PUT",this.store.name,t,e),i=this.store.put(e,t)):(st(jn,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),va(i)}add(t){return st(jn,"ADD",this.store.name,t,t),va(this.store.add(t))}get(t){return va(this.store.get(t)).next((e=>(e===void 0&&(e=null),st(jn,"GET",this.store.name,t,e),e)))}delete(t){return st(jn,"DELETE",this.store.name,t),va(this.store.delete(t))}count(){return st(jn,"COUNT",this.store.name),va(this.store.count())}H(t,e){const i=this.options(t,e),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new B(((c,m)=>{l.onerror=p=>{m(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.J(l,((m,p)=>{c.push(p)})).next((()=>c))}}Z(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new B(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}X(t,e){st(jn,"DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const a=this.cursor(i);return this.J(a,((l,c,m)=>m.delete()))}ee(t,e){let i;e?i=t:(i={},e=t);const a=this.cursor(i);return this.J(a,e)}te(t){const e=this.cursor({});return new B(((i,a)=>{e.onerror=l=>{const c=ny(l.target.error);a(c)},e.onsuccess=l=>{const c=l.target.result;c?t(c.primaryKey,c.value).next((m=>{m?c.continue():i()})):i()}}))}J(t,e){const i=[];return new B(((a,l)=>{t.onerror=c=>{l(c.target.error)},t.onsuccess=c=>{const m=c.target.result;if(!m)return void a();const p=new $N(m),g=e(m.primaryKey,m.value,p);if(g instanceof B){const T=g.catch((E=>(p.done(),B.reject(E))));i.push(T)}p.isDone?a():p.G===null?m.continue():m.continue(p.G)}})).next((()=>B.waitFor(i)))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function va(r){return new B(((t,e)=>{r.onsuccess=i=>{const a=i.target.result;t(a)},r.onerror=i=>{const a=ny(i.target.error);e(a)}}))}let o0=!1;function ny(r){const t=Dr.M(Xe());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(e)>=0){const i=new ut("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return o0||(o0=!0,setTimeout((()=>{throw i}),0)),i}}return r}const Yu="IndexBackfiller";class JN{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){st(Yu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();st(Yu,`Documents written: ${e}`)}catch(e){kr(e)?st(Yu,"Ignoring IndexedDB error during index backfill: ",e):await Pr(e)}await this.re(6e4)}))}}class ZN{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const i=new Set;let a=e,l=!0;return B.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!i.has(c))return st(Yu,`Processing collection: ${c}`),this.oe(t,c,a).next((m=>{a-=m,i.add(c)}));l=!1})))).next((()=>e-a))}oe(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((a=>this.localStore.localDocuments.getNextDocuments(t,e,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(a,l))).next((m=>(st(Yu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m)))).next((()=>c.size))}))))}_e(t,e){let i=t;return e.changes.forEach(((a,l)=>{const c=zb(l);ey(c,i)>0&&(i=c)})),new Fn(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Dn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=-1;function hd(r){return r==null}function ac(r){return r===0&&1/r==-1/0}function Fb(r){return typeof r=="number"&&Number.isInteger(r)&&!ac(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="";function yn(r){let t="";for(let e=0;e<r.length;e++)t.length>0&&(t=l0(t)),t=WN(r.get(e),t);return l0(t)}function WN(r,t){let e=t;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":e+="";break;case zf:e+="";break;default:e+=l}}return e}function l0(r){return r+zf+""}function Zi(r){const t=r.length;if(St(t>=2,64408,{path:r}),t===2)return St(r.charAt(0)===zf&&r.charAt(1)==="",56145,{path:r}),se.emptyPath();const e=t-2,i=[];let a="";for(let l=0;l<t;){const c=r.indexOf(zf,l);switch((c<0||c>e)&&gt(50515,{path:r}),r.charAt(c+1)){case"":const m=r.substring(l,c);let p;a.length===0?p=m:(a+=m,p=a,a=""),i.push(p);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:gt(61167,{path:r})}l=c+2}return new se(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="remoteDocuments",Ic="owner",Vo="owner",oc="mutationQueues",tx="userId",yi="mutations",u0="batchId",Aa="userMutationsIndex",c0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(r,t){return[r,yn(t)]}function Hb(r,t,e){return[r,yn(t),e]}const ex={},el="documentMutations",jf="remoteDocumentsV14",nx=["prefixPath","collectionGroup","readTime","documentId"],Sf="documentKeyIndex",ix=["prefixPath","collectionGroup","documentId"],Gb="collectionGroupIndex",sx=["collectionGroup","readTime","prefixPath","documentId"],lc="remoteDocumentGlobal",hg="remoteDocumentGlobalKey",nl="targets",Kb="queryTargetsIndex",rx=["canonicalId","targetId"],il="targetDocuments",ax=["targetId","path"],iy="documentTargetsIndex",ox=["path","targetId"],Bf="targetGlobalKey",Ra="targetGlobal",uc="collectionParents",lx=["collectionId","parent"],sl="clientMetadata",ux="clientId",fd="bundles",cx="bundleId",dd="namedQueries",hx="name",sy="indexConfiguration",fx="indexId",fg="collectionGroupIndex",dx="collectionGroup",$u="indexState",mx=["indexId","uid"],Qb="sequenceNumberIndex",px=["uid","sequenceNumber"],Xu="indexEntries",gx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yb="documentKeyIndex",yx=["indexId","uid","orderedDocumentKey"],md="documentOverlays",_x=["userId","collectionPath","documentId"],dg="collectionPathOverlayIndex",vx=["userId","collectionPath","largestBatchId"],$b="collectionGroupOverlayIndex",Tx=["userId","collectionGroup","largestBatchId"],ry="globals",Ex="name",Xb=[oc,yi,el,_a,nl,Ic,Ra,il,sl,lc,uc,fd,dd],Sx=[...Xb,md],Jb=[oc,yi,el,jf,nl,Ic,Ra,il,sl,lc,uc,fd,dd,md],Zb=Jb,ay=[...Zb,sy,$u,Xu],bx=ay,Wb=[...ay,ry],Ax=Wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends Bb{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Je(r,t){const e=vt(r);return Dr.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(r){let t=0;for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function Lr(r,t){for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function tA(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t,e){this.comparator=t,this.root=e||hn.EMPTY}insert(t,e){return new ge(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(t){return new ge(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new lf(this.root,t,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new lf(this.root,t,this.comparator,!0)}}class lf{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class hn{constructor(t,e,i,a,l){this.key=t,this.value=e,this.color=i??hn.RED,this.left=a??hn.EMPTY,this.right=l??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,l){return new hn(t??this.key,e??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,i),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return hn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw gt(27949);return t+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(t,e,i,a,l){return this}insert(t,e,i){return new hn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.comparator=t,this.data=new ge(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new f0(this.data.getIterator())}getIteratorFrom(t){return new f0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof ce)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ce(this.comparator);return e.data=t,e}}class f0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t){this.fields=t,t.sort(Ae.comparator)}static empty(){return new Nn([])}unionWith(t){let e=new ce(Ae.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Nn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Wo(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new eA("Invalid base64 string: "+l):l}})(t);return new Pe(e)}static fromUint8Array(t){const e=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(t);return new Pe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pe.EMPTY_BYTE_STRING=new Pe("");const Ix=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(r){if(St(!!r,39018),typeof r=="string"){let t=0;const e=Ix.exec(r);if(St(!!e,46558,{timestamp:r}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ee(r.seconds),nanos:Ee(r.nanos)}}function Ee(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ms(r){return typeof r=="string"?Pe.fromBase64String(r):Pe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="server_timestamp",iA="__type__",sA="__previous_value__",rA="__local_write_time__";function oy(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)==null?void 0:e.fields)||{})[iA])==null?void 0:i.stringValue)===nA}function pd(r){const t=r.mapValue.fields[sA];return oy(t)?pd(t):t}function cc(r){const t=Vs(r.mapValue.fields[rA].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(t,e,i,a,l,c,m,p,g,T,E){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=T,this.apiKey=E}}const qf="(default)";class Pa{constructor(t,e){this.projectId=t,this.database=e||qf}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===qf}isEqual(t){return t instanceof Pa&&t.projectId===this.projectId&&t.database===this.database}}function Rx(r,t){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ut(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(r.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="__type__",aA="__max__",br={mapValue:{fields:{__type__:{stringValue:aA}}}},uy="__vector__",rl="value",bf={nullValue:"NULL_VALUE"};function xr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?oy(r)?4:oA(r)?9007199254740991:gd(r)?10:11:gt(28295,{value:r})}function is(r,t){if(r===t)return!0;const e=xr(r);if(e!==xr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return cc(r).isEqual(cc(t));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Vs(a.timestampValue),m=Vs(l.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(a,l){return Ms(a.bytesValue).isEqual(Ms(l.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(a,l){return Ee(a.geoPointValue.latitude)===Ee(l.geoPointValue.latitude)&&Ee(a.geoPointValue.longitude)===Ee(l.geoPointValue.longitude)})(r,t);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Ee(a.integerValue)===Ee(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ee(a.doubleValue),m=Ee(l.doubleValue);return c===m?ac(c)===ac(m):isNaN(c)&&isNaN(m)}return!1})(r,t);case 9:return Wo(r.arrayValue.values||[],t.arrayValue.values||[],is);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},m=l.mapValue.fields||{};if(h0(c)!==h0(m))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!is(c[p],m[p])))return!1;return!0})(r,t);default:return gt(52216,{left:r})}}function hc(r,t){return(r.values||[]).find((e=>is(e,t)))!==void 0}function Vr(r,t){if(r===t)return 0;const e=xr(r),i=xr(t);if(e!==i)return Nt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Nt(r.booleanValue,t.booleanValue);case 2:return(function(l,c){const m=Ee(l.integerValue||l.doubleValue),p=Ee(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,t);case 3:return d0(r.timestampValue,t.timestampValue);case 4:return d0(cc(r),cc(t));case 5:return ug(r.stringValue,t.stringValue);case 6:return(function(l,c){const m=Ms(l),p=Ms(c);return m.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(l,c){const m=l.split("/"),p=c.split("/");for(let g=0;g<m.length&&g<p.length;g++){const T=Nt(m[g],p[g]);if(T!==0)return T}return Nt(m.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(l,c){const m=Nt(Ee(l.latitude),Ee(c.latitude));return m!==0?m:Nt(Ee(l.longitude),Ee(c.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return m0(r.arrayValue,t.arrayValue);case 10:return(function(l,c){var S,R,V,C;const m=l.fields||{},p=c.fields||{},g=(S=m[rl])==null?void 0:S.arrayValue,T=(R=p[rl])==null?void 0:R.arrayValue,E=Nt(((V=g==null?void 0:g.values)==null?void 0:V.length)||0,((C=T==null?void 0:T.values)==null?void 0:C.length)||0);return E!==0?E:m0(g,T)})(r.mapValue,t.mapValue);case 11:return(function(l,c){if(l===br.mapValue&&c===br.mapValue)return 0;if(l===br.mapValue)return 1;if(c===br.mapValue)return-1;const m=l.fields||{},p=Object.keys(m),g=c.fields||{},T=Object.keys(g);p.sort(),T.sort();for(let E=0;E<p.length&&E<T.length;++E){const S=ug(p[E],T[E]);if(S!==0)return S;const R=Vr(m[p[E]],g[T[E]]);if(R!==0)return R}return Nt(p.length,T.length)})(r.mapValue,t.mapValue);default:throw gt(23264,{he:e})}}function d0(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Nt(r,t);const e=Vs(r),i=Vs(t),a=Nt(e.seconds,i.seconds);return a!==0?a:Nt(e.nanos,i.nanos)}function m0(r,t){const e=r.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const l=Vr(e[a],i[a]);if(l)return l}return Nt(e.length,i.length)}function al(r){return pg(r)}function pg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(e){const i=Vs(e);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(e){return Ms(e).toBase64()})(r.bytesValue):"referenceValue"in r?(function(e){return ht.fromName(e).toString()})(r.referenceValue):"geoPointValue"in r?(function(e){return`geo(${e.latitude},${e.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(e){let i="[",a=!0;for(const l of e.values||[])a?a=!1:i+=",",i+=pg(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(e){const i=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${pg(e.fields[c])}`;return a+"}"})(r.mapValue):gt(61005,{value:r})}function Af(r){switch(xr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=pd(r);return t?16+Af(t):16;case 5:return 2*r.stringValue.length;case 6:return Ms(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Af(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Lr(i.fields,((l,c)=>{a+=l.length+Af(c)})),a})(r.mapValue);default:throw gt(13486,{value:r})}}function fc(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function gg(r){return!!r&&"integerValue"in r}function dc(r){return!!r&&"arrayValue"in r}function p0(r){return!!r&&"nullValue"in r}function g0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function If(r){return!!r&&"mapValue"in r}function gd(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)==null?void 0:e.fields)||{})[ly])==null?void 0:i.stringValue)===uy}function Ju(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Lr(r.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Ju(i))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(r.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ju(r.arrayValue.values[e]);return t}return{...r}}function oA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===aA}const lA={mapValue:{fields:{[ly]:{stringValue:uy},[rl]:{arrayValue:{}}}}};function Cx(r){return"nullValue"in r?bf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?fc(Pa.empty(),ht.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?gd(r)?lA:{mapValue:{}}:gt(35942,{value:r})}function Dx(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?fc(Pa.empty(),ht.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?lA:"mapValue"in r?gd(r)?{mapValue:{}}:br:gt(61959,{value:r})}function y0(r,t){const e=Vr(r.value,t.value);return e!==0?e:r.inclusive&&!t.inclusive?-1:!r.inclusive&&t.inclusive?1:0}function _0(r,t){const e=Vr(r.value,t.value);return e!==0?e:r.inclusive&&!t.inclusive?1:!r.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.value=t}static empty(){return new gn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!If(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ju(e)}setAll(t){let e=Ae.emptyPath(),i={},a=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const p=this.getFieldsMap(e);this.applyChanges(p,i,a),i={},a=[],e=m.popLast()}c?i[m.lastSegment()]=Ju(c):a.push(m.lastSegment())}));const l=this.getFieldsMap(e);this.applyChanges(l,i,a)}delete(t){const e=this.field(t.popLast());If(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return is(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];If(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){Lr(e,((a,l)=>t[a]=l));for(const a of i)delete t[a]}clone(){return new gn(Ju(this.value))}}function uA(r){const t=[];return Lr(r.fields,((e,i)=>{const a=new Ae([e]);if(If(i)){const l=uA(i.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)})),new Nn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t,e,i,a,l,c,m){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(t){return new Re(t,0,It.min(),It.min(),It.min(),gn.empty(),0)}static newFoundDocument(t,e,i,a){return new Re(t,1,e,It.min(),i,a,0)}static newNoDocument(t,e){return new Re(t,2,e,It.min(),It.min(),gn.empty(),0)}static newUnknownDocument(t,e){return new Re(t,3,e,It.min(),It.min(),gn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Re&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t,e){this.position=t,this.inclusive=e}}function v0(r,t,e){let i=0;for(let a=0;a<r.position.length;a++){const l=t[a],c=r.position[a];if(l.field.isKeyField()?i=ht.comparator(ht.fromName(c.referenceValue),e.key):i=Vr(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function T0(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let e=0;e<r.position.length;e++)if(!is(r.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(t,e="asc"){this.field=t,this.dir=e}}function Nx(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{}class Qt extends cA{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new xx(t,e,i):e==="array-contains"?new Ox(t,i):e==="in"?new gA(t,i):e==="not-in"?new Px(t,i):e==="array-contains-any"?new kx(t,i):new Qt(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Vx(t,i):new Mx(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Vr(e,this.value)):e!==null&&xr(this.value)===xr(e)&&this.matchesComparison(Vr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ue extends cA{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ue(t,e)}matches(t){return ll(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ll(r){return r.op==="and"}function yg(r){return r.op==="or"}function cy(r){return hA(r)&&ll(r)}function hA(r){for(const t of r.filters)if(t instanceof ue)return!1;return!0}function _g(r){if(r instanceof Qt)return r.field.canonicalString()+r.op.toString()+al(r.value);if(cy(r))return r.filters.map((t=>_g(t))).join(",");{const t=r.filters.map((e=>_g(e))).join(",");return`${r.op}(${t})`}}function fA(r,t){return r instanceof Qt?(function(i,a){return a instanceof Qt&&i.op===a.op&&i.field.isEqual(a.field)&&is(i.value,a.value)})(r,t):r instanceof ue?(function(i,a){return a instanceof ue&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,m)=>l&&fA(c,a.filters[m])),!0):!1})(r,t):void gt(19439)}function dA(r,t){const e=r.filters.concat(t);return ue.create(e,r.op)}function mA(r){return r instanceof Qt?(function(e){return`${e.field.canonicalString()} ${e.op} ${al(e.value)}`})(r):r instanceof ue?(function(e){return e.op.toString()+" {"+e.getFilters().map(mA).join(" ,")+"}"})(r):"Filter"}class xx extends Qt{constructor(t,e,i){super(t,e,i),this.key=ht.fromName(i.referenceValue)}matches(t){const e=ht.comparator(t.key,this.key);return this.matchesComparison(e)}}class Vx extends Qt{constructor(t,e){super(t,"in",e),this.keys=pA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Mx extends Qt{constructor(t,e){super(t,"not-in",e),this.keys=pA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function pA(r,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((i=>ht.fromName(i.referenceValue)))}class Ox extends Qt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return dc(e)&&hc(e.arrayValue,this.value)}}class gA extends Qt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&hc(this.value.arrayValue,e)}}class Px extends Qt{constructor(t,e){super(t,"not-in",e)}matches(t){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!hc(this.value.arrayValue,e)}}class kx extends Qt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!dc(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>hc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(t,e=null,i=[],a=[],l=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=m,this.Te=null}}function vg(r,t=null,e=[],i=[],a=null,l=null,c=null){return new Lx(r,t,e,i,a,l,c)}function ka(r){const t=vt(r);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>_g(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),hd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>al(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>al(i))).join(",")),t.Te=e}return t.Te}function wc(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<r.orderBy.length;e++)if(!Nx(r.orderBy[e],t.orderBy[e]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let e=0;e<r.filters.length;e++)if(!fA(r.filters[e],t.filters[e]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!T0(r.startAt,t.startAt)&&T0(r.endAt,t.endAt)}function Ff(r){return ht.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Hf(r,t){return r.filters.filter((e=>e instanceof Qt&&e.field.isEqual(t)))}function E0(r,t,e){let i=bf,a=!0;for(const l of Hf(r,t)){let c=bf,m=!0;switch(l.op){case"<":case"<=":c=Cx(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,m=!1;break;case"!=":case"not-in":c=bf}y0({value:i,inclusive:a},{value:c,inclusive:m})<0&&(i=c,a=m)}if(e!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(t)){const c=e.position[l];y0({value:i,inclusive:a},{value:c,inclusive:e.inclusive})<0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}function S0(r,t,e){let i=br,a=!0;for(const l of Hf(r,t)){let c=br,m=!0;switch(l.op){case">=":case">":c=Dx(l.value),m=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,m=!1;break;case"!=":case"not-in":c=br}_0({value:i,inclusive:a},{value:c,inclusive:m})>0&&(i=c,a=m)}if(e!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(t)){const c=e.position[l];_0({value:i,inclusive:a},{value:c,inclusive:e.inclusive})>0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t,e=null,i=[],a=[],l=null,c="F",m=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function yA(r,t,e,i,a,l,c,m){return new bl(r,t,e,i,a,l,c,m)}function yd(r){return new bl(r)}function b0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Ux(r){return ht.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function _A(r){return r.collectionGroup!==null}function Zu(r){const t=vt(r);if(t.Ie===null){t.Ie=[];const e=new Set;for(const l of t.explicitOrderBy)t.Ie.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new ce(Ae.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(t).forEach((l=>{e.has(l.canonicalString())||l.isKeyField()||t.Ie.push(new mc(l,i))})),e.has(Ae.keyField().canonicalString())||t.Ie.push(new mc(Ae.keyField(),i))}return t.Ie}function qn(r){const t=vt(r);return t.Ee||(t.Ee=zx(t,Zu(r))),t.Ee}function zx(r,t){if(r.limitType==="F")return vg(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new mc(a.field,l)}));const e=r.endAt?new ol(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ol(r.startAt.position,r.startAt.inclusive):null;return vg(r.path,r.collectionGroup,t,r.filters,r.limit,e,i)}}function Tg(r,t){const e=r.filters.concat([t]);return new bl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),e,r.limit,r.limitType,r.startAt,r.endAt)}function jx(r,t){const e=r.explicitOrderBy.concat([t]);return new bl(r.path,r.collectionGroup,e,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Eg(r,t,e){return new bl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,e,r.startAt,r.endAt)}function _d(r,t){return wc(qn(r),qn(t))&&r.limitType===t.limitType}function vA(r){return`${ka(qn(r))}|lt:${r.limitType}`}function jo(r){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((a=>mA(a))).join(", ")}]`),hd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>al(a))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>al(a))).join(",")),`Target(${i})`})(qn(r))}; limitType=${r.limitType})`}function Rc(r,t){return t.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ht.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,t)&&(function(i,a){for(const l of Zu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,t)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,t)&&(function(i,a){return!(i.startAt&&!(function(c,m,p){const g=v0(c,m,p);return c.inclusive?g<=0:g<0})(i.startAt,Zu(i),a)||i.endAt&&!(function(c,m,p){const g=v0(c,m,p);return c.inclusive?g>=0:g>0})(i.endAt,Zu(i),a))})(r,t)}function TA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function EA(r){return(t,e)=>{let i=!1;for(const a of Zu(r)){const l=Bx(a,t,e);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function Bx(r,t,e){const i=r.field.isKeyField()?ht.comparator(t.key,e.key):(function(l,c,m){const p=c.data.field(l),g=m.data.field(l);return p!==null&&g!==null?Vr(p,g):gt(42886)})(r.field,t,e);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return gt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Lr(this.inner,((e,i)=>{for(const[a,l]of i)t(a,l)}))}isEmpty(){return tA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new ge(ht.comparator);function Bn(){return qx}const SA=new ge(ht.comparator);function ju(...r){let t=SA;for(const e of r)t=t.insert(e.key,e);return t}function bA(r){let t=SA;return r.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Wi(){return Wu()}function AA(){return Wu()}function Wu(){return new Ps((r=>r.toString()),((r,t)=>r.isEqual(t)))}const Fx=new ge(ht.comparator),Hx=new ce(ht.comparator);function zt(...r){let t=Hx;for(const e of r)t=t.add(e);return t}const Gx=new ce(Nt);function hy(){return Gx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(t)?"-0":t}}function IA(r){return{integerValue:""+r}}function Kx(r,t){return Fb(t)?IA(t):fy(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this._=void 0}}function Qx(r,t,e){return r instanceof pc?(function(a,l){const c={fields:{[iA]:{stringValue:nA},[rA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&oy(l)&&(l=pd(l)),l&&(c.fields[sA]=l),{mapValue:c}})(e,t):r instanceof ul?RA(r,t):r instanceof cl?CA(r,t):(function(a,l){const c=wA(a,l),m=A0(c)+A0(a.Ae);return gg(c)&&gg(a.Ae)?IA(m):fy(a.serializer,m)})(r,t)}function Yx(r,t,e){return r instanceof ul?RA(r,t):r instanceof cl?CA(r,t):e}function wA(r,t){return r instanceof gc?(function(i){return gg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(t)?t:{integerValue:0}:null}class pc extends vd{}class ul extends vd{constructor(t){super(),this.elements=t}}function RA(r,t){const e=DA(t);for(const i of r.elements)e.some((a=>is(a,i)))||e.push(i);return{arrayValue:{values:e}}}class cl extends vd{constructor(t){super(),this.elements=t}}function CA(r,t){let e=DA(t);for(const i of r.elements)e=e.filter((a=>!is(a,i)));return{arrayValue:{values:e}}}class gc extends vd{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function A0(r){return Ee(r.integerValue||r.doubleValue)}function DA(r){return dc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t,e){this.field=t,this.transform=e}}function Xx(r,t){return r.field.isEqual(t.field)&&(function(i,a){return i instanceof ul&&a instanceof ul||i instanceof cl&&a instanceof cl?Wo(i.elements,a.elements,is):i instanceof gc&&a instanceof gc?is(i.Ae,a.Ae):i instanceof pc&&a instanceof pc})(r.transform,t.transform)}class Jx{constructor(t,e){this.version=t,this.transformResults=e}}class nn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new nn}static exists(t){return new nn(void 0,t)}static updateTime(t){return new nn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wf(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Td{}function NA(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Cc(r.key,nn.none()):new Al(r.key,r.data,nn.none());{const e=r.data,i=gn.empty();let a=new ce(Ae.comparator);for(let l of t.fields)if(!a.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new ks(r.key,i,new Nn(a.toArray()),nn.none())}}function Zx(r,t,e){r instanceof Al?(function(a,l,c){const m=a.value.clone(),p=w0(a.fieldTransforms,l,c.transformResults);m.setAll(p),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,t,e):r instanceof ks?(function(a,l,c){if(!wf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const m=w0(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(xA(a)),p.setAll(m),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,t,e):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function tc(r,t,e,i){return r instanceof Al?(function(l,c,m,p){if(!wf(l.precondition,c))return m;const g=l.value.clone(),T=R0(l.fieldTransforms,p,c);return g.setAll(T),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(r,t,e,i):r instanceof ks?(function(l,c,m,p){if(!wf(l.precondition,c))return m;const g=R0(l.fieldTransforms,p,c),T=c.data;return T.setAll(xA(l)),T.setAll(g),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,t,e,i):(function(l,c,m){return wf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(r,t,e)}function Wx(r,t){let e=null;for(const i of r.fieldTransforms){const a=t.data.field(i.field),l=wA(i.transform,a||null);l!=null&&(e===null&&(e=gn.empty()),e.set(i.field,l))}return e||null}function I0(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Wo(i,a,((l,c)=>Xx(l,c)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Al extends Td{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ks extends Td{constructor(t,e,i,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function xA(r){const t=new Map;return r.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=r.data.field(e);t.set(e,i)}})),t}function w0(r,t,e){const i=new Map;St(r.length===e.length,32656,{Ve:e.length,de:r.length});for(let a=0;a<e.length;a++){const l=r[a],c=l.transform,m=t.data.field(l.field);i.set(l.field,Yx(c,m,e[a]))}return i}function R0(r,t,e){const i=new Map;for(const a of r){const l=a.transform,c=e.data.field(a.field);i.set(a.field,Qx(l,c,t))}return i}class Cc extends Td{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VA extends Td{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&Zx(l,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=tc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=tc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=AA();return this.mutations.forEach((a=>{const l=t.get(a.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=e.has(a.key)?null:m;const p=NA(c,m);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(It.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),zt())}isEqual(t){return this.batchId===t.batchId&&Wo(this.mutations,t.mutations,((e,i)=>I0(e,i)))&&Wo(this.baseMutations,t.baseMutations,((e,i)=>I0(e,i)))}}class my{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){St(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let a=(function(){return Fx})();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new my(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,Jt;function e2(r){switch(r){case W.OK:return gt(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return gt(15467,{code:r})}}function MA(r){if(r===void 0)return Me("GRPC error has no .code"),W.UNKNOWN;switch(r){case Ge.OK:return W.OK;case Ge.CANCELLED:return W.CANCELLED;case Ge.UNKNOWN:return W.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return W.INTERNAL;case Ge.UNAVAILABLE:return W.UNAVAILABLE;case Ge.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Ge.NOT_FOUND:return W.NOT_FOUND;case Ge.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Ge.ABORTED:return W.ABORTED;case Ge.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Ge.DATA_LOSS:return W.DATA_LOSS;default:return gt(39323,{code:r})}}(Jt=Ge||(Ge={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=new Rr([4294967295,4294967295],0);function C0(r){const t=n2().encode(r),e=new Cb;return e.update(t),new Uint8Array(e.digest())}function D0(r){const t=new DataView(r.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Rr([e,i],0),new Rr([a,l],0)]}class gy{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Bu(`Invalid padding: ${e}`);if(i<0)throw new Bu(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Rr.fromNumber(this.ge)}ye(t,e,i){let a=t.add(e.multiply(Rr.fromNumber(i)));return a.compare(i2)===1&&(a=new Rr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=C0(t),[i,a]=D0(e);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new gy(l,a,e);return i.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=C0(t),[i,a]=D0(e);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t,e,i,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,Nc.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Dc(It.min(),a,new ge(Nt),Bn(),zt())}}class Nc{constructor(t,e,i,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Nc(i,e,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(t,e,i,a){this.Se=t,this.removedTargetIds=e,this.key=i,this.De=a}}class OA{constructor(t,e){this.targetId=t,this.Ce=e}}class PA{constructor(t,e,i=Pe.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class N0{constructor(){this.ve=0,this.Fe=x0(),this.Me=Pe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=zt(),e=zt(),i=zt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:gt(38017,{changeType:l})}})),new Nc(this.Me,this.xe,t,e,i)}Ke(){this.Oe=!1,this.Fe=x0()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class s2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Bn(),this.He=uf(),this.Je=uf(),this.Ze=new ge(Nt)}Xe(t){for(const e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(t.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.Qe(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:gt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,a)=>{this.rt(a)&&e(a)}))}st(t){const e=t.targetId,i=t.Ce.count,a=this.ot(e);if(a){const l=a.target;if(Ff(l))if(i===0){const c=new ht(l.path);this.et(e,c,Re.newNoDocument(c,It.min()))}else St(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const m=this.ut(t),p=m?this.ct(m,t,c):1;if(p!==0){this.it(e);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=e;let c,m;try{c=Ms(i).toUint8Array()}catch(p){if(p instanceof eA)return Zo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new gy(c,a,l)}catch(p){return Zo(p instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(m)||(this.et(e,l,null),a++)})),a}Tt(t){const e=new Map;this.ze.forEach(((l,c)=>{const m=this.ot(c);if(m){if(l.current&&Ff(m.target)){const p=new ht(m.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Re.newNoDocument(p,t))}l.Be&&(e.set(c,l.ke()),l.Ke())}}));let i=zt();this.Je.forEach(((l,c)=>{let m=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(t)));const a=new Dc(t,e,this.Ze,this.je,i);return this.je=Bn(),this.He=uf(),this.Je=uf(),this.Ze=new ge(Nt),a}Ye(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,i),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.qe(e,1):a.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new N0,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new ce(Nt),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new ce(Nt),this.He=this.He.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||st("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new N0),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function uf(){return new ge(ht.comparator)}function x0(){return new ge(ht.comparator)}const r2={asc:"ASCENDING",desc:"DESCENDING"},a2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o2={and:"AND",or:"OR"};class l2{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Sg(r,t){return r.useProto3Json||hd(t)?t:{value:t}}function hl(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kA(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function u2(r,t){return hl(r,t.toTimestamp())}function En(r){return St(!!r,49232),It.fromTimestamp((function(e){const i=Vs(e);return new le(i.seconds,i.nanos)})(r))}function yy(r,t){return bg(r,t).canonicalString()}function bg(r,t){const e=(function(a){return new se(["projects",a.projectId,"databases",a.database])})(r).child("documents");return t===void 0?e:e.child(t)}function LA(r){const t=se.fromString(r);return St(KA(t),10190,{key:t.toString()}),t}function Gf(r,t){return yy(r.databaseId,t.path)}function Ca(r,t){const e=LA(t);if(e.get(1)!==r.databaseId.projectId)throw new ut(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+r.databaseId.projectId);if(e.get(3)!==r.databaseId.database)throw new ut(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+r.databaseId.database);return new ht(jA(e))}function UA(r,t){return yy(r.databaseId,t)}function zA(r){const t=LA(r);return t.length===4?se.emptyPath():jA(t)}function Ag(r){return new se(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jA(r){return St(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function V0(r,t,e){return{name:Gf(r,t),fields:e.value.mapValue.fields}}function c2(r,t,e){const i=Ca(r,t.name),a=En(t.updateTime),l=t.createTime?En(t.createTime):It.min(),c=new gn({mapValue:{fields:t.fields}}),m=Re.newFoundDocument(i,a,l,c);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function h2(r,t){let e;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:gt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=(function(g,T){return g.useProto3Json?(St(T===void 0||typeof T=="string",58123),Pe.fromBase64String(T||"")):(St(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Pe.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(g){const T=g.code===void 0?W.UNKNOWN:MA(g.code);return new ut(T,g.message||"")})(c);e=new PA(i,a,l,m||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=Ca(r,i.document.name),l=En(i.document.updateTime),c=i.document.createTime?En(i.document.createTime):It.min(),m=new gn({mapValue:{fields:i.document.fields}}),p=Re.newFoundDocument(a,l,c,m),g=i.targetIds||[],T=i.removedTargetIds||[];e=new Rf(g,T,p.key,p)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=Ca(r,i.document),l=i.readTime?En(i.readTime):It.min(),c=Re.newNoDocument(a,l),m=i.removedTargetIds||[];e=new Rf([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=Ca(r,i.document),l=i.removedTargetIds||[];e=new Rf([],l,a,null)}else{if(!("filter"in t))return gt(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new t2(a,l),m=i.targetId;e=new OA(m,c)}}return e}function Kf(r,t){let e;if(t instanceof Al)e={update:V0(r,t.key,t.value)};else if(t instanceof Cc)e={delete:Gf(r,t.key)};else if(t instanceof ks)e={update:V0(r,t.key,t.data),updateMask:y2(t.fieldMask)};else{if(!(t instanceof VA))return gt(16599,{dt:t.type});e={verify:Gf(r,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(l,c){const m=c.transform;if(m instanceof pc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ul)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof cl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof gc)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw gt(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:u2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:gt(27497)})(r,t.precondition)),e}function Ig(r,t){const e=t.currentDocument?(function(l){return l.updateTime!==void 0?nn.updateTime(En(l.updateTime)):l.exists!==void 0?nn.exists(l.exists):nn.none()})(t.currentDocument):nn.none(),i=t.updateTransforms?t.updateTransforms.map((a=>(function(c,m){let p=null;if("setToServerValue"in m)St(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),p=new pc;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];p=new ul(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];p=new cl(T)}else"increment"in m?p=new gc(c,m.increment):gt(16584,{proto:m});const g=Ae.fromServerFormat(m.fieldPath);return new $x(g,p)})(r,a))):[];if(t.update){t.update.name;const a=Ca(r,t.update.name),l=new gn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new Nn(g.map((T=>Ae.fromServerFormat(T))))})(t.updateMask);return new ks(a,l,c,e,i)}return new Al(a,l,e,i)}if(t.delete){const a=Ca(r,t.delete);return new Cc(a,e)}if(t.verify){const a=Ca(r,t.verify);return new VA(a,e)}return gt(1463,{proto:t})}function f2(r,t){return r&&r.length>0?(St(t!==void 0,14353),r.map((e=>(function(a,l){let c=a.updateTime?En(a.updateTime):En(l);return c.isEqual(It.min())&&(c=En(l)),new Jx(c,a.transformResults||[])})(e,t)))):[]}function BA(r,t){return{documents:[UA(r,t.path)]}}function qA(r,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=UA(r,a);const l=(function(g){if(g.length!==0)return GA(ue.create(g,"and"))})(t.filters);l&&(e.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((T=>(function(S){return{field:Bo(S.field),direction:m2(S.dir)}})(T)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=Sg(r,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:a}}function FA(r){let t=zA(r.parent);const e=r.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){St(i===1,65062);const T=e.from[0];T.allDescendants?a=T.collectionId:t=t.child(T.collectionId)}let l=[];e.where&&(l=(function(E){const S=HA(E);return S instanceof ue&&cy(S)?S.getFilters():[S]})(e.where));let c=[];e.orderBy&&(c=(function(E){return E.map((S=>(function(V){return new mc(qo(V.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(e.orderBy));let m=null;e.limit&&(m=(function(E){let S;return S=typeof E=="object"?E.value:E,hd(S)?null:S})(e.limit));let p=null;e.startAt&&(p=(function(E){const S=!!E.before,R=E.values||[];return new ol(R,S)})(e.startAt));let g=null;return e.endAt&&(g=(function(E){const S=!E.before,R=E.values||[];return new ol(R,S)})(e.endAt)),yA(t,a,c,l,m,"F",p,g)}function d2(r,t){const e=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:a})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function HA(r){return r.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=qo(e.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=qo(e.unaryFilter.field);return Qt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(e.unaryFilter.field);return Qt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qo(e.unaryFilter.field);return Qt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}})(r):r.fieldFilter!==void 0?(function(e){return Qt.create(qo(e.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(e){return ue.create(e.compositeFilter.filters.map((i=>HA(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return gt(1026)}})(e.compositeFilter.op))})(r):gt(30097,{filter:r})}function m2(r){return r2[r]}function p2(r){return a2[r]}function g2(r){return o2[r]}function Bo(r){return{fieldPath:r.canonicalString()}}function qo(r){return Ae.fromServerFormat(r.fieldPath)}function GA(r){return r instanceof Qt?(function(e){if(e.op==="=="){if(g0(e.value))return{unaryFilter:{field:Bo(e.field),op:"IS_NAN"}};if(p0(e.value))return{unaryFilter:{field:Bo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(g0(e.value))return{unaryFilter:{field:Bo(e.field),op:"IS_NOT_NAN"}};if(p0(e.value))return{unaryFilter:{field:Bo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(e.field),op:p2(e.op),value:e.value}}})(r):r instanceof ue?(function(e){const i=e.getFilters().map((a=>GA(a)));return i.length===1?i[0]:{compositeFilter:{op:g2(e.op),filters:i}}})(r):gt(54877,{filter:r})}function y2(r){const t=[];return r.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function KA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function QA(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,e,i,a,l=It.min(),c=It.min(),m=Pe.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(t){return new Cs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t){this.yt=t}}function _2(r,t){let e;if(t.document)e=c2(r.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ht.fromSegments(t.noDocument.path),a=Ua(t.noDocument.readTime);e=Re.newNoDocument(i,a),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return gt(56709);{const i=ht.fromSegments(t.unknownDocument.path),a=Ua(t.unknownDocument.version);e=Re.newUnknownDocument(i,a)}}return t.readTime&&e.setReadTime((function(a){const l=new le(a[0],a[1]);return It.fromTimestamp(l)})(t.readTime)),e}function M0(r,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Qf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=(function(l,c){return{name:Gf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:hl(l,c.version.toTimestamp()),createTime:hl(l,c.createTime.toTimestamp())}})(r.yt,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:La(t.version)};else{if(!t.isUnknownDocument())return gt(57904,{document:t});i.unknownDocument={path:e.path.toArray(),version:La(t.version)}}return i}function Qf(r){const t=r.toTimestamp();return[t.seconds,t.nanoseconds]}function La(r){const t=r.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ua(r){const t=new le(r.seconds,r.nanoseconds);return It.fromTimestamp(t)}function Ta(r,t){const e=(t.baseMutations||[]).map((l=>Ig(r.yt,l)));for(let l=0;l<t.mutations.length-1;++l){const c=t.mutations[l];if(l+1<t.mutations.length&&t.mutations[l+1].transform!==void 0){const m=t.mutations[l+1];c.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(l+1,1),++l}}const i=t.mutations.map((l=>Ig(r.yt,l))),a=le.fromMillis(t.localWriteTimeMs);return new dy(t.batchId,a,e,i)}function qu(r){const t=Ua(r.readTime),e=r.lastLimboFreeSnapshotVersion!==void 0?Ua(r.lastLimboFreeSnapshotVersion):It.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return St(c===1,1966,{count:c}),qn(yd(zA(l.documents[0])))})(r.query):(function(l){return qn(FA(l))})(r.query),new Cs(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,t,e,Pe.fromBase64String(r.resumeToken))}function $A(r,t){const e=La(t.snapshotVersion),i=La(t.lastLimboFreeSnapshotVersion);let a;a=Ff(t.target)?BA(r.yt,t.target):qA(r.yt,t.target).ft;const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ka(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function XA(r){const t=FA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Eg(t,t.limit,"L"):t}function qp(r,t){return new py(t.largestBatchId,Ig(r.yt,t.overlayMutation))}function O0(r,t){const e=t.path.lastSegment();return[r,yn(t.path.popLast()),e]}function P0(r,t,e,i){return{indexId:r,uid:t,sequenceNumber:e,readTime:La(i.readTime),documentKey:yn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{getBundleMetadata(t,e){return k0(t).get(e).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Ua(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(t,e){return k0(t).put((function(a){return{bundleId:a.id,createTime:La(En(a.createTime)),version:a.version}})(e))}getNamedQuery(t,e){return L0(t).get(e).next((i=>{if(i)return(function(l){return{name:l.name,query:XA(l.bundledQuery),readTime:Ua(l.readTime)}})(i)}))}saveNamedQuery(t,e){return L0(t).put((function(a){return{name:a.name,readTime:La(En(a.readTime)),bundledQuery:a.bundledQuery}})(e))}}function k0(r){return Je(r,fd)}function L0(r){return Je(r,dd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const i=e.uid||"";return new Ed(t,i)}getOverlay(t,e){return Nu(t).get(O0(this.userId,e)).next((i=>i?qp(this.serializer,i):null))}getOverlays(t,e){const i=Wi();return B.forEach(e,(a=>this.getOverlay(t,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(t,e,i){const a=[];return i.forEach(((l,c)=>{const m=new py(e,c);a.push(this.bt(t,m))})),B.waitFor(a)}removeOverlaysForBatchId(t,e,i){const a=new Set;e.forEach((c=>a.add(yn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Nu(t).X(dg,m))})),B.waitFor(l)}getOverlaysForCollection(t,e,i){const a=Wi(),l=yn(e),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Nu(t).H(dg,c).next((m=>{for(const p of m){const g=qp(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(t,e,i,a){const l=Wi();let c;const m=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Nu(t).ee({index:$b,range:m},((p,g,T)=>{const E=qp(this.serializer,g);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):T.done()})).next((()=>l))}bt(t,e){return Nu(t).put((function(a,l,c){const[m,p,g]=O0(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kf(a.yt,c.mutation)}})(this.serializer,this.userId,e))}}function Nu(r){return Je(r,md)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{St(t){return Je(t,ry)}getSessionToken(t){return this.St(t).get("sessionToken").next((e=>{const i=e==null?void 0:e.value;return i?Pe.fromUint8Array(i):Pe.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.St(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Ee(t.integerValue));else if("doubleValue"in t){const i=Ee(t.doubleValue);isNaN(i)?this.Ft(e,13):(this.Ft(e,15),ac(i)?e.Mt(0):e.Mt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ft(e,20),typeof i=="string"&&(i=Vs(i)),e.xt(`${i.seconds||""}`),e.Mt(i.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Ms(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Ft(e,45),e.Mt(i.latitude||0),e.Mt(i.longitude||0)}else"mapValue"in t?oA(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):gd(t)?this.kt(t.mapValue,e):(this.Kt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.qt(t.arrayValue,e),this.Nt(e)):gt(19022,{Ut:t})}Ot(t,e){this.Ft(e,25),this.$t(t,e)}$t(t,e){e.xt(t)}Kt(t,e){const i=t.fields||{};this.Ft(e,55);for(const a of Object.keys(i))this.Ot(a,e),this.Ct(i[a],e)}kt(t,e){var c,m;const i=t.fields||{};this.Ft(e,53);const a=rl,l=((m=(c=i[a].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(e,15),e.Mt(Ee(l)),this.Ot(a,e),this.Ct(i[a],e)}qt(t,e){const i=t.values||[];this.Ft(e,50);for(const a of i)this.Ct(a,e)}Lt(t,e){this.Ft(e,37),ht.fromName(t).path.forEach((i=>{this.Ft(e,60),this.$t(i,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Ea.Wt=new Ea;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=255;function E2(r){if(r===0)return 8;let t=0;return r>>4||(t+=4,r<<=4),r>>6||(t+=2,r<<=2),r>>7||(t+=1),t}function U0(r){const t=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=E2(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(t/8)}class S2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Gt(i.value),i=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ht(i.value),i=e.next();this.Jt()}Zt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=e.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const a=e.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(t){const e=this.en(t),i=U0(e);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=255&e[a]}nn(t){const e=this.en(t),i=U0(e);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=~(255&e[a])}rn(){this.sn(Oo),this.sn(255)}_n(){this.an(Oo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(t),i=!!(128&e[0]);e[0]^=i?255:128;for(let a=1;a<e.length;++a)e[a]^=i?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Oo?(this.sn(Oo),this.sn(0)):this.sn(e)}Ht(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Oo?(this.an(Oo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class b2{constructor(t){this.cn=t}Bt(t){this.cn.Qt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.Yt(t)}vt(){this.cn.rn()}}class A2{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Xt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class xu{constructor(){this.cn=new S2,this.ascending=new b2(this.cn),this.descending=new A2(this.cn)}seed(t){this.cn.seed(t)}ln(t){return t===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t,e,i,a){this.hn=t,this.Pn=e,this.Tn=i,this.In=a}En(){const t=this.In.length,e=t===0||this.In[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.In,0),e!==t?i.set([0],this.In.length):++i[i.length-1],new Sa(this.hn,this.Pn,this.Tn,i)}Rn(t,e,i){return{indexId:this.hn,uid:t,arrayValue:Cf(this.Tn),directionalValue:Cf(this.In),orderedDocumentKey:Cf(e),documentKey:i.path.toArray()}}An(t,e,i){const a=this.Rn(t,e,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function pr(r,t){let e=r.hn-t.hn;return e!==0?e:(e=z0(r.Tn,t.Tn),e!==0?e:(e=z0(r.In,t.In),e!==0?e:ht.comparator(r.Pn,t.Pn)))}function z0(r,t){for(let e=0;e<r.length&&e<t.length;++e){const i=r[e]-t[e];if(i!==0)return i}return r.length-t.length}function Cf(r){return GS()?(function(e){let i="";for(let a=0;a<e.length;a++)i+=String.fromCharCode(e[a]);return i})(r):r}function j0(r){return typeof r!="string"?r:(function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i})(r)}class B0{constructor(t){this.Vn=new ce(((e,i)=>Ae.comparator(e.field,i.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.dn=t.orderBy,this.mn=[];for(const e of t.filters){const i=e;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(t){if(St(t.collectionGroup===this.collectionId,49279),this.fn)return!1;const e=cg(t);if(e!==void 0&&!this.pn(e))return!1;const i=ya(t);let a=new Set,l=0,c=0;for(;l<i.length&&this.pn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const m=this.Vn.getIterator().getNext();if(!a.has(m.field.canonicalString())){const p=i[l];if(!this.yn(m,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<i.length;++l){const m=i[l];if(c>=this.dn.length||!this.wn(this.dn[c++],m))return!1}return!0}bn(){if(this.fn)return null;let t=new ce(Ae.comparator);const e=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new Tf(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new Tf(i.field,0))}for(const i of this.dn)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new Tf(i.field,i.dir==="asc"?0:1)));return new Uf(Uf.UNKNOWN_ID,this.collectionId,e,rc.empty())}pn(t){for(const e of this.mn)if(this.yn(e,t))return!0;return!1}yn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}wn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(r){var e,i;if(St(r instanceof Qt||r instanceof ue,20012),r instanceof Qt){if(r instanceof gA){const a=((i=(e=r.value.arrayValue)==null?void 0:e.values)==null?void 0:i.map((l=>Qt.create(r.field,"==",l))))||[];return ue.create(a,"or")}return r}const t=r.filters.map((a=>JA(a)));return ue.create(t,r.op)}function I2(r){if(r.getFilters().length===0)return[];const t=Cg(JA(r));return St(ZA(t),7391),wg(t)||Rg(t)?[t]:t.getFilters()}function wg(r){return r instanceof Qt}function Rg(r){return r instanceof ue&&cy(r)}function ZA(r){return wg(r)||Rg(r)||(function(e){if(e instanceof ue&&yg(e)){for(const i of e.getFilters())if(!wg(i)&&!Rg(i))return!1;return!0}return!1})(r)}function Cg(r){if(St(r instanceof Qt||r instanceof ue,34018),r instanceof Qt)return r;if(r.filters.length===1)return Cg(r.filters[0]);const t=r.filters.map((i=>Cg(i)));let e=ue.create(t,r.op);return e=Yf(e),ZA(e)?e:(St(e instanceof ue,64498),St(ll(e),40251),St(e.filters.length>1,57927),e.filters.reduce(((i,a)=>_y(i,a))))}function _y(r,t){let e;return St(r instanceof Qt||r instanceof ue,38388),St(t instanceof Qt||t instanceof ue,25473),e=r instanceof Qt?t instanceof Qt?(function(a,l){return ue.create([a,l],"and")})(r,t):q0(r,t):t instanceof Qt?q0(t,r):(function(a,l){if(St(a.filters.length>0&&l.filters.length>0,48005),ll(a)&&ll(l))return dA(a,l.getFilters());const c=yg(a)?a:l,m=yg(a)?l:a,p=c.filters.map((g=>_y(g,m)));return ue.create(p,"or")})(r,t),Yf(e)}function q0(r,t){if(ll(t))return dA(t,r.getFilters());{const e=t.filters.map((i=>_y(r,i)));return ue.create(e,"or")}}function Yf(r){if(St(r instanceof Qt||r instanceof ue,11850),r instanceof Qt)return r;const t=r.getFilters();if(t.length===1)return Yf(t[0]);if(hA(r))return r;const e=t.map((a=>Yf(a))),i=[];return e.forEach((a=>{a instanceof Qt?i.push(a):a instanceof ue&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:ue.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.Sn=new vy}addToCollectionParentIndex(t,e){return this.Sn.add(e),B.resolve()}getCollectionParents(t,e){return B.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return B.resolve()}deleteFieldIndex(t,e){return B.resolve()}deleteAllFieldIndexes(t){return B.resolve()}createTargetIndexes(t,e){return B.resolve()}getDocumentsMatchingTarget(t,e){return B.resolve(null)}getIndexType(t,e){return B.resolve(0)}getFieldIndexes(t,e){return B.resolve([])}getNextCollectionGroupToUpdate(t){return B.resolve(null)}getMinOffset(t,e){return B.resolve(Fn.min())}getMinOffsetFromCollectionGroup(t,e){return B.resolve(Fn.min())}updateCollectionGroup(t,e,i){return B.resolve()}updateIndexEntries(t,e){return B.resolve()}}class vy{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new ce(se.comparator),l=!a.has(i);return this.index[e]=a.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new ce(se.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="IndexedDbIndexManager",cf=new Uint8Array(0);class R2{constructor(t,e){this.databaseId=e,this.Dn=new vy,this.Cn=new Ps((i=>ka(i)),((i,a)=>wc(i,a))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Dn.has(e)){const i=e.lastSegment(),a=e.popLast();t.addOnCommittedListener((()=>{this.Dn.add(e)}));const l={collectionId:i,parent:yn(a)};return H0(t).put(l)}return B.resolve()}getCollectionParents(t,e){const i=[],a=IDBKeyRange.bound([e,""],[Pb(e),""],!1,!0);return H0(t).H(a).next((l=>{for(const c of l){if(c.collectionId!==e)break;i.push(Zi(c.parent))}return i}))}addFieldIndex(t,e){const i=Vu(t),a=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(e);delete a.indexId;const l=i.add(a);if(e.indexState){const c=ko(t);return l.next((m=>{c.put(P0(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return l.next()}deleteFieldIndex(t,e){const i=Vu(t),a=ko(t),l=Po(t);return i.delete(e.indexId).next((()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=Vu(t),i=Po(t),a=ko(t);return e.X().next((()=>i.X())).next((()=>a.X()))}createTargetIndexes(t,e){return B.forEach(this.vn(e),(i=>this.getIndexType(t,i).next((a=>{if(a===0||a===1){const l=new B0(i).bn();if(l!=null)return this.addFieldIndex(t,l)}}))))}getDocumentsMatchingTarget(t,e){const i=Po(t);let a=!0;const l=new Map;return B.forEach(this.vn(e),(c=>this.Fn(t,c).next((m=>{a&&(a=!!m),l.set(c,m)})))).next((()=>{if(a){let c=zt();const m=[];return B.forEach(l,((p,g)=>{st(F0,`Using index ${(function(rt){return`id=${rt.indexId}|cg=${rt.collectionGroup}|f=${rt.fields.map((mt=>`${mt.fieldPath}:${mt.kind}`)).join(",")}`})(p)} to execute ${ka(e)}`);const T=(function(rt,mt){const _t=cg(mt);if(_t===void 0)return null;for(const ft of Hf(rt,_t.fieldPath))switch(ft.op){case"array-contains-any":return ft.value.arrayValue.values||[];case"array-contains":return[ft.value]}return null})(g,p),E=(function(rt,mt){const _t=new Map;for(const ft of ya(mt))for(const D of Hf(rt,ft.fieldPath))switch(D.op){case"==":case"in":_t.set(ft.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return _t.set(ft.fieldPath.canonicalString(),D.value),Array.from(_t.values())}return null})(g,p),S=(function(rt,mt){const _t=[];let ft=!0;for(const D of ya(mt)){const A=D.kind===0?E0(rt,D.fieldPath,rt.startAt):S0(rt,D.fieldPath,rt.startAt);_t.push(A.value),ft&&(ft=A.inclusive)}return new ol(_t,ft)})(g,p),R=(function(rt,mt){const _t=[];let ft=!0;for(const D of ya(mt)){const A=D.kind===0?S0(rt,D.fieldPath,rt.endAt):E0(rt,D.fieldPath,rt.endAt);_t.push(A.value),ft&&(ft=A.inclusive)}return new ol(_t,ft)})(g,p),V=this.Mn(p,g,S),C=this.Mn(p,g,R),z=this.xn(p,g,E),Q=this.On(p.indexId,T,V,S.inclusive,C,R.inclusive,z);return B.forEach(Q,(at=>i.Z(at,e.limit).next((rt=>{rt.forEach((mt=>{const _t=ht.fromSegments(mt.documentKey);c.has(_t)||(c=c.add(_t),m.push(_t))}))}))))})).next((()=>m))}return B.resolve(null)}))}vn(t){let e=this.Cn.get(t);return e||(t.filters.length===0?e=[t]:e=I2(ue.create(t.filters,"and")).map((i=>vg(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt))),this.Cn.set(t,e),e)}On(t,e,i,a,l,c,m){const p=(e!=null?e.length:1)*Math.max(i.length,l.length),g=p/(e!=null?e.length:1),T=[];for(let E=0;E<p;++E){const S=e?this.Nn(e[E/g]):cf,R=this.Bn(t,S,i[E%g],a),V=this.Ln(t,S,l[E%g],c),C=m.map((z=>this.Bn(t,S,z,!0)));T.push(...this.createRange(R,V,C))}return T}Bn(t,e,i,a){const l=new Sa(t,ht.empty(),e,i);return a?l:l.En()}Ln(t,e,i,a){const l=new Sa(t,ht.empty(),e,i);return a?l.En():l}Fn(t,e){const i=new B0(e),a=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,a).next((l=>{let c=null;for(const m of l)i.gn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(t,e){let i=2;const a=this.vn(e);return B.forEach(a,(l=>this.Fn(t,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new ce(Ae.comparator),T=!1;for(const E of p.filters)for(const S of E.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?T=!0:g=g.add(S.field));for(const E of p.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(T?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(e)&&a.length>1&&i===2?1:i))}kn(t,e){const i=new xu;for(const a of ya(t)){const l=e.data.field(a.fieldPath);if(l==null)return null;const c=i.ln(a.kind);Ea.Wt.Dt(l,c)}return i.un()}Nn(t){const e=new xu;return Ea.Wt.Dt(t,e.ln(0)),e.un()}Kn(t,e){const i=new xu;return Ea.Wt.Dt(fc(this.databaseId,e),i.ln((function(l){const c=ya(l);return c.length===0?0:c[c.length-1].kind})(t))),i.un()}xn(t,e,i){if(i===null)return[];let a=[];a.push(new xu);let l=0;for(const c of ya(t)){const m=i[l++];for(const p of a)if(this.qn(e,c.fieldPath)&&dc(m))a=this.Un(a,c,m);else{const g=p.ln(c.kind);Ea.Wt.Dt(m,g)}}return this.$n(a)}Mn(t,e,i){return this.xn(t,e,i.position)}$n(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].un();return e}Un(t,e,i){const a=[...t],l=[];for(const c of i.arrayValue.values||[])for(const m of a){const p=new xu;p.seed(m.un()),Ea.Wt.Dt(c,p.ln(e.kind)),l.push(p)}return l}qn(t,e){return!!t.filters.find((i=>i instanceof Qt&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(t,e){const i=Vu(t),a=ko(t);return(e?i.H(fg,IDBKeyRange.bound(e,e)):i.H()).next((l=>{const c=[];return B.forEach(l,(m=>a.get([m.indexId,this.uid]).next((p=>{c.push((function(T,E){const S=E?new rc(E.sequenceNumber,new Fn(Ua(E.readTime),new ht(Zi(E.documentKey)),E.largestBatchId)):rc.empty(),R=T.fields.map((([V,C])=>new Tf(Ae.fromServerFormat(V),C)));return new Uf(T.indexId,T.collectionGroup,R,S)})(m,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Nt(i.collectionGroup,a.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,i){const a=Vu(t),l=ko(t);return this.Wn(t).next((c=>a.H(fg,IDBKeyRange.bound(e,e)).next((m=>B.forEach(m,(p=>l.put(P0(p.indexId,this.uid,c,i))))))))}updateIndexEntries(t,e){const i=new Map;return B.forEach(e,((a,l)=>{const c=i.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(t,a.collectionGroup)).next((m=>(i.set(a.collectionGroup,m),B.forEach(m,(p=>this.Qn(t,a,p).next((g=>{const T=this.Gn(l,p);return g.isEqual(T)?B.resolve():this.zn(t,l,p,g,T)})))))))}))}jn(t,e,i,a){return Po(t).put(a.Rn(this.uid,this.Kn(i,e.key),e.key))}Hn(t,e,i,a){return Po(t).delete(a.An(this.uid,this.Kn(i,e.key),e.key))}Qn(t,e,i){const a=Po(t);let l=new ce(pr);return a.ee({index:Yb,range:IDBKeyRange.only([i.indexId,this.uid,Cf(this.Kn(i,e))])},((c,m)=>{l=l.add(new Sa(i.indexId,e,j0(m.arrayValue),j0(m.directionalValue)))})).next((()=>l))}Gn(t,e){let i=new ce(pr);const a=this.kn(e,t);if(a==null)return i;const l=cg(e);if(l!=null){const c=t.data.field(l.fieldPath);if(dc(c))for(const m of c.arrayValue.values||[])i=i.add(new Sa(e.indexId,t.key,this.Nn(m),a))}else i=i.add(new Sa(e.indexId,t.key,cf,a));return i}zn(t,e,i,a,l){st(F0,"Updating index entries for document '%s'",e.key);const c=[];return(function(p,g,T,E,S){const R=p.getIterator(),V=g.getIterator();let C=Mo(R),z=Mo(V);for(;C||z;){let Q=!1,at=!1;if(C&&z){const rt=T(C,z);rt<0?at=!0:rt>0&&(Q=!0)}else C!=null?at=!0:Q=!0;Q?(E(z),z=Mo(V)):at?(S(C),C=Mo(R)):(C=Mo(R),z=Mo(V))}})(a,l,pr,(m=>{c.push(this.jn(t,e,i,m))}),(m=>{c.push(this.Hn(t,e,i,m))})),B.waitFor(c)}Wn(t){let e=1;return ko(t).ee({index:Qb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),e=a.sequenceNumber+1})).next((()=>e))}createRange(t,e,i){i=i.sort(((c,m)=>pr(c,m))).filter(((c,m,p)=>!m||pr(c,p[m-1])!==0));const a=[];a.push(t);for(const c of i){const m=pr(c,t),p=pr(c,e);if(m===0)a[0]=t.En();else if(m>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(e);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const m=a[c].An(this.uid,cf,ht.empty()),p=a[c+1].An(this.uid,cf,ht.empty());l.push(IDBKeyRange.bound(m,p))}return l}Jn(t,e){return pr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(G0)}getMinOffset(t,e){return B.mapArray(this.vn(e),(i=>this.Fn(t,i).next((a=>a||gt(44426))))).next(G0)}}function H0(r){return Je(r,uc)}function Po(r){return Je(r,Xu)}function Vu(r){return Je(r,sy)}function ko(r){return Je(r,$u)}function G0(r){St(r.length!==0,28825);let t=r[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;ey(a,t)<0&&(t=a),e<a.largestBatchId&&(e=a.largestBatchId)}return new Fn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WA=41943040;class pn{static withCacheSize(t){return new pn(t,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(r,t,e){const i=r.store(yi),a=r.store(el),l=[],c=IDBKeyRange.only(e.batchId);let m=0;const p=i.ee({range:c},((T,E,S)=>(m++,S.delete())));l.push(p.next((()=>{St(m===1,47070,{batchId:e.batchId})})));const g=[];for(const T of e.mutations){const E=Hb(t,T.key.path,e.batchId);l.push(a.delete(E)),g.push(T.key)}return B.waitFor(l).next((()=>g))}function $f(r){if(!r)return 0;let t;if(r.document)t=r.document;else if(r.unknownDocument)t=r.unknownDocument;else{if(!r.noDocument)throw gt(14731);t=r.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(WA,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);class Sd{constructor(t,e,i,a){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static wt(t,e,i,a){St(t.uid!=="",64387);const l=t.isAuthenticated()?t.uid:"";return new Sd(l,e,i,a)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gr(t).ee({index:Aa,range:i},((a,l,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,i,a){const l=Fo(t),c=gr(t);return c.add({}).next((m=>{St(typeof m=="number",49019);const p=new dy(m,e,i,a),g=(function(R,V,C){const z=C.baseMutations.map((at=>Kf(R.yt,at))),Q=C.mutations.map((at=>Kf(R.yt,at)));return{userId:V,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:z,mutations:Q}})(this.serializer,this.userId,p),T=[];let E=new ce(((S,R)=>Nt(S.canonicalString(),R.canonicalString())));for(const S of a){const R=Hb(this.userId,S.key.path,m);E=E.add(S.key.path.popLast()),T.push(c.put(g)),T.push(l.put(R,ex))}return E.forEach((S=>{T.push(this.indexManager.addToCollectionParentIndex(t,S))})),t.addOnCommittedListener((()=>{this.Zn[m]=p.keys()})),B.waitFor(T).next((()=>p))}))}lookupMutationBatch(t,e){return gr(t).get(e).next((i=>i?(St(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:e}),Ta(this.serializer,i)):null))}Xn(t,e){return this.Zn[e]?B.resolve(this.Zn[e]):this.lookupMutationBatch(t,e).next((i=>{if(i){const a=i.keys();return this.Zn[e]=a,a}return null}))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return gr(t).ee({index:Aa,range:a},((c,m,p)=>{m.userId===this.userId&&(St(m.batchId>=i,47524,{Yn:i}),l=Ta(this.serializer,m)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=wa;return gr(t).ee({index:Aa,range:e,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,wa],[this.userId,Number.POSITIVE_INFINITY]);return gr(t).H(Aa,e).next((i=>i.map((a=>Ta(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=Ef(this.userId,e.path),a=IDBKeyRange.lowerBound(i),l=[];return Fo(t).ee({range:a},((c,m,p)=>{const[g,T,E]=c,S=Zi(T);if(g===this.userId&&e.path.isEqual(S))return gr(t).get(E).next((R=>{if(!R)throw gt(61480,{er:c,batchId:E});St(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:E}),l.push(Ta(this.serializer,R))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ce(Nt);const a=[];return e.forEach((l=>{const c=Ef(this.userId,l.path),m=IDBKeyRange.lowerBound(c),p=Fo(t).ee({range:m},((g,T,E)=>{const[S,R,V]=g,C=Zi(R);S===this.userId&&l.path.isEqual(C)?i=i.add(V):E.done()}));a.push(p)})),B.waitFor(a).next((()=>this.tr(t,i)))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1,l=Ef(this.userId,i),c=IDBKeyRange.lowerBound(l);let m=new ce(Nt);return Fo(t).ee({range:c},((p,g,T)=>{const[E,S,R]=p,V=Zi(S);E===this.userId&&i.isPrefixOf(V)?V.length===a&&(m=m.add(R)):T.done()})).next((()=>this.tr(t,m)))}tr(t,e){const i=[],a=[];return e.forEach((l=>{a.push(gr(t).get(l).next((c=>{if(c===null)throw gt(35274,{batchId:l});St(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(Ta(this.serializer,c))})))})),B.waitFor(a).next((()=>i))}removeMutationBatch(t,e){return tI(t.le,this.userId,e).next((i=>(t.addOnCommittedListener((()=>{this.nr(e.batchId)})),B.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))))}nr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return B.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Fo(t).ee({range:i},((l,c,m)=>{if(l[0]===this.userId){const p=Zi(l[1]);a.push(p)}else m.done()})).next((()=>{St(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(t,e){return eI(t,this.userId,e)}ir(t){return nI(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:wa,lastStreamToken:""}))}}function eI(r,t,e){const i=Ef(t,e.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Fo(r).ee({range:l,Y:!0},((m,p,g)=>{const[T,E,S]=m;T===t&&E===a&&(c=!0),g.done()})).next((()=>c))}function gr(r){return Je(r,yi)}function Fo(r){return Je(r,el)}function nI(r){return Je(r,oc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new za(0)}static ar(){return new za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.ur(t).next((e=>{const i=new za(e.highestTargetId);return e.highestTargetId=i.next(),this.cr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.ur(t).next((e=>It.fromTimestamp(new le(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.ur(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,i){return this.ur(t).next((a=>(a.highestListenSequenceNumber=e,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),e>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=e),this.cr(t,a))))}addTargetData(t,e){return this.lr(t,e).next((()=>this.ur(t).next((i=>(i.targetCount+=1,this.hr(e,i),this.cr(t,i))))))}updateTargetData(t,e){return this.lr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Lo(t).delete(e.targetId))).next((()=>this.ur(t))).next((i=>(St(i.targetCount>0,8065),i.targetCount-=1,this.cr(t,i))))}removeTargets(t,e,i){let a=0;const l=[];return Lo(t).ee(((c,m)=>{const p=qu(m);p.sequenceNumber<=e&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(t,p)))})).next((()=>B.waitFor(l))).next((()=>a))}forEachTarget(t,e){return Lo(t).ee(((i,a)=>{const l=qu(a);e(l)}))}ur(t){return Q0(t).get(Bf).next((e=>(St(e!==null,2888),e)))}cr(t,e){return Q0(t).put(Bf,e)}lr(t,e){return Lo(t).put($A(this.serializer,e))}hr(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.ur(t).next((e=>e.targetCount))}getTargetData(t,e){const i=ka(e),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Lo(t).ee({range:a,index:Kb},((c,m,p)=>{const g=qu(m);wc(e,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(t,e,i){const a=[],l=Sr(t);return e.forEach((c=>{const m=yn(c.path);a.push(l.put({targetId:i,path:m})),a.push(this.referenceDelegate.addReference(t,i,c))})),B.waitFor(a)}removeMatchingKeys(t,e,i){const a=Sr(t);return B.forEach(e,(l=>{const c=yn(l.path);return B.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(t,i,l)])}))}removeMatchingKeysForTargetId(t,e){const i=Sr(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),a=Sr(t);let l=zt();return a.ee({range:i,Y:!0},((c,m,p)=>{const g=Zi(c[1]),T=new ht(g);l=l.add(T)})).next((()=>l))}containsKey(t,e){const i=yn(e.path),a=IDBKeyRange.bound([i],[Pb(i)],!1,!0);let l=0;return Sr(t).ee({index:iy,Y:!0,range:a},(([c,m],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(t,e){return Lo(t).get(e).next((i=>i?qu(i):null))}}function Lo(r){return Je(r,nl)}function Q0(r){return Je(r,Ra)}function Sr(r){return Je(r,il)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="LruGarbageCollector",iI=1048576;function $0([r,t],[e,i]){const a=Nt(r,e);return a===0?Nt(t,i):a}class D2{constructor(t){this.Pr=t,this.buffer=new ce($0),this.Tr=0}Ir(){return++this.Tr}Er(t){const e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();$0(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class sI{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){st(Y0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){kr(e)?st(Y0,"Ignoring IndexedDB error during garbage collection: ",e):await Pr(e)}await this.Ar(3e5)}))}}class N2{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return B.resolve(Dn.ce);const i=new D2(e);return this.Vr.forEachTarget(t,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(t,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(K0)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K0):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let i,a,l,c,m,p,g;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(t,a)))).next((E=>(i=E,m=Date.now(),this.removeTargets(t,i,e)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(t,i)))).next((E=>(g=Date.now(),zo()<=Kt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${a} in `+(m-c)+`ms
	Removed ${l} targets in `+(p-m)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-T}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function rI(r,t){return new N2(r,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t,e){this.db=t,this.garbageCollector=rI(this,e)}dr(t){const e=this.pr(t);return this.db.getTargetCache().getTargetCount(t).next((i=>e.next((a=>i+a))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}mr(t,e){return this.yr(t,((i,a)=>e(a)))}addReference(t,e,i){return hf(t,i)}removeReference(t,e,i){return hf(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return hf(t,e)}wr(t,e){return(function(a,l){let c=!1;return nI(a).te((m=>eI(a,m,l).next((p=>(p&&(c=!0),B.resolve(!p)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(t,((c,m)=>{if(m<=e){const p=this.wr(t,c).next((g=>{if(!g)return l++,i.getEntry(t,c).next((()=>(i.removeEntry(c,It.min()),Sr(t).delete((function(E){return[0,yn(E.path)]})(c)))))}));a.push(p)}})).next((()=>B.waitFor(a))).next((()=>i.apply(t))).next((()=>l))}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return hf(t,e)}yr(t,e){const i=Sr(t);let a,l=Dn.ce;return i.ee({index:iy},(([c,m],{path:p,sequenceNumber:g})=>{c===0?(l!==Dn.ce&&e(new ht(Zi(a)),l),l=g,a=p):l=Dn.ce})).next((()=>{l!==Dn.ce&&e(new ht(Zi(a)),l)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function hf(r,t){return Sr(r).put((function(i,a){return{targetId:0,path:yn(i.path),sequenceNumber:a}})(t,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.changes=new Ps((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Re.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?B.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return pa(t).put(i)}removeEntry(t,e,i){return pa(t).delete((function(l,c){const m=l.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Qf(c),m[m.length-1]]})(e,i))}updateMetadata(t,e){return this.getMetadata(t).next((i=>(i.byteSize+=e,this.br(t,i))))}getEntry(t,e){let i=Re.newInvalidDocument(e);return pa(t).ee({index:Sf,range:IDBKeyRange.only(Mu(e))},((a,l)=>{i=this.Sr(e,l)})).next((()=>i))}Dr(t,e){let i={size:0,document:Re.newInvalidDocument(e)};return pa(t).ee({index:Sf,range:IDBKeyRange.only(Mu(e))},((a,l)=>{i={document:this.Sr(e,l),size:$f(l)}})).next((()=>i))}getEntries(t,e){let i=Bn();return this.Cr(t,e,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c)})).next((()=>i))}vr(t,e){let i=Bn(),a=new ge(ht.comparator);return this.Cr(t,e,((l,c)=>{const m=this.Sr(l,c);i=i.insert(l,m),a=a.insert(l,$f(c))})).next((()=>({documents:i,Fr:a})))}Cr(t,e,i){if(e.isEmpty())return B.resolve();let a=new ce(Z0);e.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Mu(a.first()),Mu(a.last())),c=a.getIterator();let m=c.getNext();return pa(t).ee({index:Sf,range:l},((p,g,T)=>{const E=ht.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;m&&Z0(m,E)<0;)i(m,null),m=c.getNext();m&&m.isEqual(E)&&(i(m,g),m=c.hasNext()?c.getNext():null),m?T.j(Mu(m)):T.done()})).next((()=>{for(;m;)i(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,i,a,l){const c=e.path,m=[c.popLast().toArray(),c.lastSegment(),Qf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pa(t).H(IDBKeyRange.bound(m,p,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let T=Bn();for(const E of g){const S=this.Sr(ht.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);S.isFoundDocument()&&(Rc(e,S)||a.has(S.key))&&(T=T.insert(S.key,S))}return T}))}getAllFromCollectionGroup(t,e,i,a){let l=Bn();const c=J0(e,i),m=J0(e,Fn.max());return pa(t).ee({index:Gb,range:IDBKeyRange.bound(c,m,!0)},((p,g,T)=>{const E=this.Sr(ht.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===a&&T.done()})).next((()=>l))}newChangeBuffer(t){return new M2(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return X0(t).get(hg).next((e=>(St(!!e,20021),e)))}br(t,e){return X0(t).put(hg,e)}Sr(t,e){if(e){const i=_2(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(It.min())))return i}return Re.newInvalidDocument(t)}}function oI(r){return new V2(r)}class M2 extends aI{constructor(t,e){super(),this.Mr=t,this.trackRemovals=e,this.Or=new Ps((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(t){const e=[];let i=0,a=new ce(((l,c)=>Nt(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const m=this.Or.get(l);if(e.push(this.Mr.removeEntry(t,l,m.readTime)),c.isValidDocument()){const p=M0(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=$f(p);i+=g-m.size,e.push(this.Mr.addEntry(t,l,p))}else if(i-=m.size,this.trackRemovals){const p=M0(this.Mr.serializer,c.convertToNoDocument(It.min()));e.push(this.Mr.addEntry(t,l,p))}})),a.forEach((l=>{e.push(this.Mr.indexManager.addToCollectionParentIndex(t,l))})),e.push(this.Mr.updateMetadata(t,i)),B.waitFor(e)}getFromCache(t,e){return this.Mr.Dr(t,e).next((i=>(this.Or.set(e,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(t,e){return this.Mr.vr(t,e).next((({documents:i,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function X0(r){return Je(r,lc)}function pa(r){return Je(r,jf)}function Mu(r){const t=r.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function J0(r,t){const e=t.documentKey.path.toArray();return[r,Qf(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Z0(r,t){const e=r.path.toArray(),i=t.path.toArray();let a=0;for(let l=0;l<e.length-2&&l<i.length-2;++l)if(a=Nt(e[l],i[l]),a)return a;return a=Nt(e.length,i.length),a||(a=Nt(e[e.length-2],i[i.length-2]),a||Nt(e[e.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((a=>(i=a,this.remoteDocumentCache.getEntry(t,e)))).next((a=>(i!==null&&tc(i.mutation,a,Nn.empty(),le.now()),a)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,zt()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=zt()){const a=Wi();return this.populateOverlays(t,a,e).next((()=>this.computeViews(t,e,a,i).next((l=>{let c=ju();return l.forEach(((m,p)=>{c=c.insert(m,p.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Wi();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,zt())))}populateOverlays(t,e,i){const a=[];return i.forEach((l=>{e.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(t,a).next((l=>{l.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,i,a){let l=Bn();const c=Wu(),m=(function(){return Wu()})();return e.forEach(((p,g)=>{const T=i.get(g.key);a.has(g.key)&&(T===void 0||T.mutation instanceof ks)?l=l.insert(g.key,g):T!==void 0?(c.set(g.key,T.mutation.getFieldMask()),tc(T.mutation,g,T.mutation.getFieldMask(),le.now())):c.set(g.key,Nn.empty())})),this.recalculateAndSaveOverlays(t,l).next((p=>(p.forEach(((g,T)=>c.set(g,T))),e.forEach(((g,T)=>m.set(g,new O2(T,c.get(g)??null)))),m)))}recalculateAndSaveOverlays(t,e){const i=Wu();let a=new ge(((c,m)=>c-m)),l=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((p=>{const g=e.get(p);if(g===null)return;let T=i.get(p)||Nn.empty();T=m.applyToLocalView(g,T),i.set(p,T);const E=(a.get(m.batchId)||zt()).add(p);a=a.insert(m.batchId,E)}))})).next((()=>{const c=[],m=a.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,T=p.value,E=AA();T.forEach((S=>{if(!l.has(S)){const R=NA(e.get(S),i.get(S));R!==null&&E.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,E))}return B.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,a){return Ux(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):_A(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-l.size):B.resolve(Wi());let m=tl,p=l;return c.next((g=>B.forEach(g,((T,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),l.get(T)?B.resolve():this.remoteDocumentCache.getEntry(t,T).next((S=>{p=p.insert(T,S)}))))).next((()=>this.populateOverlays(t,g,l))).next((()=>this.computeViews(t,p,g,zt()))).next((T=>({batchId:m,changes:bA(T)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ht(e)).next((i=>{let a=ju();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const l=e.collectionGroup;let c=ju();return this.indexManager.getCollectionParents(t,l).next((m=>B.forEach(m,(p=>{const g=(function(E,S){return new bl(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(e,p.child(l));return this.getDocumentsMatchingCollectionQuery(t,g,i,a).next((T=>{T.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const T=g.getKey();c.get(T)===null&&(c=c.insert(T,Re.newInvalidDocument(T)))}));let m=ju();return c.forEach(((p,g)=>{const T=l.get(p);T!==void 0&&tc(T.mutation,g,Nn.empty(),le.now()),Rc(e,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return B.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(a){return{id:a.id,version:a.version,createTime:En(a.createTime)}})(e)),B.resolve()}getNamedQuery(t,e){return B.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(a){return{name:a.name,query:XA(a.bundledQuery),readTime:En(a.readTime)}})(e)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.overlays=new ge(ht.comparator),this.Lr=new Map}getOverlay(t,e){return B.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Wi();return B.forEach(e,(a=>this.getOverlay(t,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((a,l)=>{this.bt(t,e,l)})),B.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),B.resolve()}getOverlaysForCollection(t,e,i){const a=Wi(),l=e.length+1,c=new ht(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return B.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let l=new ge(((g,T)=>g-T));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let T=l.get(g.largestBatchId);T===null&&(T=Wi(),l=l.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const m=Wi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,T)=>m.set(g,T))),!(m.size()>=a)););return B.resolve(m)}bt(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new py(e,i));let l=this.Lr.get(e);l===void 0&&(l=zt(),this.Lr.set(e,l)),this.Lr.set(e,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.sessionToken=Pe.EMPTY_BYTE_STRING}getSessionToken(t){return B.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.kr=new ce(en.Kr),this.qr=new ce(en.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){const i=new en(t,e);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Wr(new en(t,e))}Qr(t,e){t.forEach((i=>this.removeReference(i,e)))}Gr(t){const e=new ht(new se([])),i=new en(e,t),a=new en(e,t+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const e=new ht(new se([])),i=new en(e,t),a=new en(e,t+1);let l=zt();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(t){const e=new en(t,0),i=this.kr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class en{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return ht.comparator(t.key,e.key)||Nt(t.Hr,e.Hr)}static Ur(t,e){return Nt(t.Hr,e.Hr)||ht.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new ce(en.Kr)}checkEmpty(t){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new dy(l,e,i,a);this.mutationQueue.push(c);for(const m of a)this.Jr=this.Jr.add(new en(m.key,l)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return B.resolve(c)}lookupMutationBatch(t,e){return B.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.Xr(i),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?wa:this.Yn-1)}getAllMutationBatches(t){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new en(e,0),a=new en(e,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const m=this.Zr(c.Hr);l.push(m)})),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ce(Nt);return e.forEach((a=>{const l=new en(a,0),c=new en(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(m=>{i=i.add(m.Hr)}))})),B.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let l=i;ht.isDocumentKey(l)||(l=l.child(""));const c=new en(new ht(l),0);let m=new ce(Nt);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(m=m.add(p.Hr)),!0)}),c),B.resolve(this.Yr(m))}Yr(t){const e=[];return t.forEach((i=>{const a=this.Zr(i);a!==null&&e.push(a)})),e}removeMutationBatch(t,e){St(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return B.forEach(e.mutations,(a=>{const l=new en(a.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Jr=i}))}nr(t){}containsKey(t,e){const i=new en(e,0),a=this.Jr.firstAfterOrEqual(i);return B.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,B.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t){this.ti=t,this.docs=(function(){return new ge(ht.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return B.resolve(i?i.document.mutableCopy():Re.newInvalidDocument(e))}getEntries(t,e){let i=Bn();return e.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Re.newInvalidDocument(a))})),B.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let l=Bn();const c=e.path,m=new ht(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:T}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||ey(zb(T),i)<=0||(a.has(T.key)||Rc(e,T))&&(l=l.insert(T.key,T.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(t,e,i,a){gt(9500)}ni(t,e){return B.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new j2(this)}getSize(t){return B.resolve(this.size)}}class j2 extends aI{constructor(t){super(),this.Mr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?e.push(this.Mr.addEntry(t,a)):this.Mr.removeEntry(i)})),B.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t){this.persistence=t,this.ri=new Ps((e=>ka(e)),wc),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.ii=0,this.si=new Ty,this.targetCount=0,this.oi=za._r()}forEachTarget(t,e){return this.ri.forEach(((i,a)=>e(a))),B.resolve()}getLastRemoteSnapshotVersion(t){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return B.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.ii&&(this.ii=e),B.resolve()}lr(t){this.ri.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.oi=new za(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,B.resolve()}updateTargetData(t,e){return this.lr(e),B.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,B.resolve()}removeTargets(t,e,i){let a=0;const l=[];return this.ri.forEach(((c,m)=>{m.sequenceNumber<=e&&i.get(m.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(t,m.targetId)),a++)})),B.waitFor(l).next((()=>a))}getTargetCount(t){return B.resolve(this.targetCount)}getTargetData(t,e){const i=this.ri.get(e)||null;return B.resolve(i)}addMatchingKeys(t,e,i){return this.si.$r(e,i),B.resolve()}removeMatchingKeys(t,e,i){this.si.Qr(e,i);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach((c=>{l.push(a.markPotentiallyOrphaned(t,c))})),B.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),B.resolve()}getMatchingKeysForTargetId(t,e){const i=this.si.jr(e);return B.resolve(i)}containsKey(t,e){return B.resolve(this.si.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,e){this._i={},this.overlays={},this.ai=new Dn(0),this.ui=!1,this.ui=!0,this.ci=new L2,this.referenceDelegate=t(this),this.li=new B2(this),this.indexManager=new w2,this.remoteDocumentCache=(function(a){return new z2(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new YA(e),this.Pi=new P2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new k2,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this._i[t.toKey()];return i||(i=new U2(e,this.referenceDelegate),this._i[t.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,i){st("MemoryPersistence","Starting transaction:",t);const a=new q2(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(t,e){return B.or(Object.values(this._i).map((i=>()=>i.containsKey(t,e))))}}class q2 extends Bb{constructor(t){super(),this.currentSequenceNumber=t}}class bd{constructor(t){this.persistence=t,this.Ri=new Ty,this.Ai=null}static Vi(t){return new bd(t)}get di(){if(this.Ai)return this.Ai;throw gt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.di.delete(i.toString()),B.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.di.add(i.toString()),B.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),B.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,(i=>{const a=ht.fromPath(i);return this.mi(t,a).next((l=>{l||e.removeEntry(a,It.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((i=>{i?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return B.or([()=>B.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Xf{constructor(t,e){this.persistence=t,this.fi=new Ps((i=>yn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=rI(this,e)}static Vi(t,e){return new Xf(t,e)}Ti(){}Ii(t){return B.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((a=>i+a))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}mr(t,e){return B.forEach(this.fi,((i,a)=>this.wr(t,i,a).next((l=>l?B.resolve():e(a)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(t,(c=>this.wr(t,c,e).next((m=>{m||(i++,l.removeEntry(c,It.min()))})))).next((()=>l.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),B.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),B.resolve()}removeReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),B.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),B.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Af(t.data.value)),e}wr(t,e,i){return B.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.fi.get(e);return B.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(t){this.serializer=t}k(t,e,i,a){const l=new cd("createOrUpgrade",e);i<1&&a>=1&&((function(p){p.createObjectStore(Ic)})(t),(function(p){p.createObjectStore(oc,{keyPath:tx}),p.createObjectStore(yi,{keyPath:u0,autoIncrement:!0}).createIndex(Aa,c0,{unique:!0}),p.createObjectStore(el)})(t),W0(t),(function(p){p.createObjectStore(_a)})(t));let c=B.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(il),p.deleteObjectStore(nl),p.deleteObjectStore(Ra)})(t),W0(t)),c=c.next((()=>(function(p){const g=p.store(Ra),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return g.put(Bf,T)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(yi).H().next((E=>{p.deleteObjectStore(yi),p.createObjectStore(yi,{keyPath:u0,autoIncrement:!0}).createIndex(Aa,c0,{unique:!0});const S=g.store(yi),R=E.map((V=>S.put(V)));return B.waitFor(R)}))})(t,l)))),c=c.next((()=>{(function(p){p.createObjectStore(sl,{keyPath:ux})})(t)}))),i<5&&a>=5&&(c=c.next((()=>this.gi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(lc)})(t),this.pi(l))))),i<7&&a>=7&&(c=c.next((()=>this.yi(l)))),i<8&&a>=8&&(c=c.next((()=>this.wi(t,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(t)}))),i<10&&a>=10&&(c=c.next((()=>this.bi(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(fd,{keyPath:cx})})(t),(function(p){p.createObjectStore(dd,{keyPath:hx})})(t)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(md,{keyPath:_x});g.createIndex(dg,vx,{unique:!1}),g.createIndex($b,Tx,{unique:!1})})(t)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(jf,{keyPath:nx});g.createIndex(Sf,ix),g.createIndex(Gb,sx)})(t))).next((()=>this.Si(t,l))).next((()=>t.deleteObjectStore(_a)))),i<14&&a>=14&&(c=c.next((()=>this.Di(t,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(sy,{keyPath:fx,autoIncrement:!0}).createIndex(fg,dx,{unique:!1}),p.createObjectStore($u,{keyPath:mx}).createIndex(Qb,px,{unique:!1}),p.createObjectStore(Xu,{keyPath:gx}).createIndex(Yb,yx,{unique:!1})})(t)))),i<16&&a>=16&&(c=c.next((()=>{e.objectStore($u).clear()})).next((()=>{e.objectStore(Xu).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(ry,{keyPath:Ex})})(t)}))),i<18&&a>=18&&GS()&&(c=c.next((()=>{e.objectStore($u).clear()})).next((()=>{e.objectStore(Xu).clear()}))),c}pi(t){let e=0;return t.store(_a).ee(((i,a)=>{e+=$f(a)})).next((()=>{const i={byteSize:e};return t.store(lc).put(hg,i)}))}gi(t){const e=t.store(oc),i=t.store(yi);return e.H().next((a=>B.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,wa],[l.userId,l.lastAcknowledgedBatchId]);return i.H(Aa,c).next((m=>B.forEach(m,(p=>{St(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=Ta(this.serializer,p);return tI(t,l.userId,g).next((()=>{}))}))))}))))}yi(t){const e=t.store(il),i=t.store(_a);return t.store(Ra).get(Bf).next((a=>{const l=[];return i.ee(((c,m)=>{const p=new se(c),g=(function(E){return[0,yn(E)]})(p);l.push(e.get(g).next((T=>T?B.resolve():(E=>e.put({targetId:0,path:yn(E),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>B.waitFor(l)))}))}wi(t,e){t.createObjectStore(uc,{keyPath:lx});const i=e.store(uc),a=new vy,l=c=>{if(a.add(c)){const m=c.lastSegment(),p=c.popLast();return i.put({collectionId:m,parent:yn(p)})}};return e.store(_a).ee({Y:!0},((c,m)=>{const p=new se(c);return l(p.popLast())})).next((()=>e.store(el).ee({Y:!0},(([c,m,p],g)=>{const T=Zi(m);return l(T.popLast())}))))}bi(t){const e=t.store(nl);return e.ee(((i,a)=>{const l=qu(a),c=$A(this.serializer,l);return e.put(c)}))}Si(t,e){const i=e.store(_a),a=[];return i.ee(((l,c)=>{const m=e.store(jf),p=(function(E){return E.document?new ht(se.fromString(E.document.name).popFirst(5)):E.noDocument?ht.fromSegments(E.noDocument.path):E.unknownDocument?ht.fromSegments(E.unknownDocument.path):gt(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(m.put(g))})).next((()=>B.waitFor(a)))}Di(t,e){const i=e.store(yi),a=oI(this.serializer),l=new Ey(bd.Vi,this.serializer.yt);return i.H().next((c=>{const m=new Map;return c.forEach((p=>{let g=m.get(p.userId)??zt();Ta(this.serializer,p).keys().forEach((T=>g=g.add(T))),m.set(p.userId,g)})),B.forEach(m,((p,g)=>{const T=new mn(g),E=Ed.wt(this.serializer,T),S=l.getIndexManager(T),R=Sd.wt(T,this.serializer,S,l.referenceDelegate);return new lI(a,R,E,S).recalculateAndSaveOverlaysForDocumentKeys(new mg(e,Dn.ce),p).next()}))}))}}function W0(r){r.createObjectStore(il,{keyPath:ax}).createIndex(iy,ox,{unique:!0}),r.createObjectStore(nl,{keyPath:"targetId"}).createIndex(Kb,rx,{unique:!0}),r.createObjectStore(Ra)}const yr="IndexedDbPersistence",Fp=18e5,Hp=5e3,Gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",H2="main";class Sy{constructor(t,e,i,a,l,c,m,p,g,T,E=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Ci=l,this.window=c,this.document=m,this.Fi=g,this.Mi=T,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!Sy.v())throw new ut(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new x2(this,a),this.Ki=e+H2,this.serializer=new YA(p),this.qi=new Dr(this.Ki,this.xi,new F2(this.serializer)),this.ci=new T2,this.li=new C2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oI(this.serializer),this.Pi=new v2,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,T===!1&&Me(yr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ut(W.FAILED_PRECONDITION,Gp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.li.getHighestSequenceNumber(t)))})).then((t=>{this.ai=new Dn(t,this.Fi)})).then((()=>{this.ui=!0})).catch((t=>(this.qi&&this.qi.close(),Promise.reject(t))))}zi(t){return this.ki=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.qi.q((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>ff(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(t).next((e=>{e||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(t))).next((e=>this.isPrimary&&!e?this.Ji(t).next((()=>!1)):!!e&&this.Zi(t).next((()=>!0)))))).catch((t=>{if(kr(t))return st(yr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return st(yr,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Ci.enqueueRetryable((()=>this.ki(t))),this.isPrimary=t}))}ji(t){return Ou(t).get(Vo).next((e=>B.resolve(this.Xi(e))))}Yi(t){return ff(t).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Fp)){this.Li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const i=Je(e,sl);return i.H().next((a=>{const l=this.ns(a,Fp),c=a.filter((m=>l.indexOf(m)===-1));return B.forEach(c,(m=>i.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const e of t)this.Ui.removeItem(this.rs(e.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.Mi?B.resolve(!0):Ou(t).get(Vo).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,Hp)&&!this.ss(e.ownerId)){if(this.Xi(e)&&this.networkEnabled)return!0;if(!this.Xi(e)){if(!e.allowTabSynchronization)throw new ut(W.FAILED_PRECONDITION,Gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||ff(t).H().next((i=>this.ns(i,Hp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(l||c&&m)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&st(yr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Ic,sl],(t=>{const e=new mg(t,Dn.ce);return this.Ji(e).next((()=>this.Yi(e)))})),this.qi.close(),this.ls()}ns(t,e){return t.filter((i=>this.ts(i.updateTimeMs,e)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(t=>ff(t).H().next((e=>this.ns(e,Fp).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(t,e){return Sd.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new R2(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return Ed.wt(this.serializer,t)}getBundleCache(){return this.Pi}runTransaction(t,e,i){st(yr,"Starting transaction:",t);const a=e==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?Ax:p===17?Wb:p===16?bx:p===15?ay:p===14?Zb:p===13?Jb:p===12?Sx:p===11?Xb:void gt(60245)})(this.xi);let c;return this.qi.runTransaction(t,a,l,(m=>(c=new mg(m,this.ai?this.ai.next():Dn.ce),e==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Me(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ut(W.FAILED_PRECONDITION,jb);return i(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>i(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Ps(t){return Ou(t).get(Vo).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,Hp)&&!this.ss(e.ownerId)&&!this.Xi(e)&&!(this.Mi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ut(W.FAILED_PRECONDITION,Gp)}))}Zi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ou(t).put(Vo,e)}static v(){return Dr.v()}Ji(t){const e=Ou(t);return e.get(Vo).next((i=>this.Xi(i)?(st(yr,"Releasing primary lease."),e.delete(Vo)):B.resolve()))}ts(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(Me(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;HS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(t){var e;try{const i=((e=this.Ui)==null?void 0:e.getItem(this.rs(t)))!==null;return st(yr,`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Me(yr,"Failed to get zombied client id.",i),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(t){Me("Failed to set zombie client id.",t)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Ou(r){return Je(r,Ic)}function ff(r){return Je(r,sl)}function uI(r,t){let e=r.projectId;return r.isDefaultDatabase||(e+="."+r.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.Ts=i,this.Is=a}static Es(t,e){let i=zt(),a=zt();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new by(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return HS()?8:qb(Xe())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,a){const l={result:null};return this.gs(t,e).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(t,e,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new G2;return this.ys(t,e,c).next((m=>{if(l.result=m,this.As)return this.ws(t,e,c,m.size)}))})).next((()=>l.result))}ws(t,e,i,a){return i.documentReadCount<this.Vs?(zo()<=Kt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",jo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(zo()<=Kt.DEBUG&&st("QueryEngine","Query:",jo(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(zo()<=Kt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",jo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qn(e))):B.resolve())}gs(t,e){if(b0(e))return B.resolve(null);let i=qn(e);return this.indexManager.getIndexType(t,i).next((a=>a===0?null:(e.limit!==null&&a===1&&(e=Eg(e,null,"F"),i=qn(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((l=>{const c=zt(...l);return this.fs.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,i).next((p=>{const g=this.bs(e,m);return this.Ss(e,g,c,p.readTime)?this.gs(t,Eg(e,null,"F")):this.Ds(t,g,e,p)}))))})))))}ps(t,e,i,a){return b0(e)||a.isEqual(It.min())?B.resolve(null):this.fs.getDocuments(t,i).next((l=>{const c=this.bs(e,l);return this.Ss(e,c,i,a)?B.resolve(null):(zo()<=Kt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),jo(e)),this.Ds(t,c,e,Ub(a,tl)).next((m=>m)))}))}bs(t,e){let i=new ce(EA(t));return e.forEach(((a,l)=>{Rc(t,l)&&(i=i.add(l))})),i}Ss(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(t,e,i){return zo()<=Kt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",jo(e)),this.fs.getDocumentsMatchingQuery(t,e,Fn.min(),i)}Ds(t,e,i,a){return this.fs.getDocumentsMatchingQuery(t,i,a).next((l=>(e.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="LocalStore",K2=3e8;class Q2{constructor(t,e,i,a){this.persistence=t,this.Cs=e,this.serializer=a,this.vs=new ge(Nt),this.Fs=new Ps((l=>ka(l)),wc),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(i)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}}function hI(r,t,e,i){return new Q2(r,t,e,i)}async function fI(r,t){const e=vt(r);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,e.Os(t),e.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],m=[];let p=zt();for(const g of a){c.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}for(const g of l){m.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}return e.localDocuments.getDocuments(i,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:m})))}))}))}function Y2(r,t){const e=vt(r);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=t.batch.keys(),l=e.xs.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,T){const E=g.batch,S=E.keys();let R=B.resolve();return S.forEach((V=>{R=R.next((()=>T.getEntry(p,V))).next((C=>{const z=g.docVersions.get(V);St(z!==null,48541),C.version.compareTo(z)<0&&(E.applyToRemoteDocument(C,g),C.isValidDocument()&&(C.setReadTime(g.commitVersion),T.addEntry(C)))}))})),R.next((()=>m.mutationQueue.removeMutationBatch(p,E)))})(e,i,t,l).next((()=>l.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let p=zt();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(t)))).next((()=>e.localDocuments.getDocuments(i,a)))}))}function dI(r){const t=vt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function $2(r,t){const e=vt(r),i=t.snapshotVersion;let a=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=e.xs.newChangeBuffer({trackRemovals:!0});a=e.vs;const m=[];t.targetChanges.forEach(((T,E)=>{const S=a.get(E);if(!S)return;m.push(e.li.removeMatchingKeys(l,T.removedDocuments,E).next((()=>e.li.addMatchingKeys(l,T.addedDocuments,E))));let R=S.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(E)!==null?R=R.withResumeToken(Pe.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):T.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(T.resumeToken,i)),a=a.insert(E,R),(function(C,z,Q){return C.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=K2?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,R,T)&&m.push(e.li.updateTargetData(l,R))}));let p=Bn(),g=zt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(l,T))})),m.push(X2(l,c,t.documentUpdates).next((T=>{p=T.Bs,g=T.Ls}))),!i.isEqual(It.min())){const T=e.li.getLastRemoteSnapshotVersion(l).next((E=>e.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(T)}return B.waitFor(m).next((()=>c.apply(l))).next((()=>e.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(e.vs=a,l)))}function X2(r,t,e){let i=zt(),a=zt();return e.forEach((l=>i=i.add(l))),t.getEntries(r,i).next((l=>{let c=Bn();return e.forEach(((m,p)=>{const g=l.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(m)),p.isNoDocument()&&p.version.isEqual(It.min())?(t.removeEntry(m,p.readTime),c=c.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p),c=c.insert(m,p)):st(Ay,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function J2(r,t){const e=vt(r);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=wa),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function Jf(r,t){const e=vt(r);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return e.li.getTargetData(i,t).next((l=>l?(a=l,B.resolve(a)):e.li.allocateTargetId(i).next((c=>(a=new Cs(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=e.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.vs=e.vs.insert(i.targetId,i),e.Fs.set(t,i.targetId)),i}))}async function fl(r,t,e){const i=vt(r),a=i.vs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!kr(c))throw c;st(Ay,`Failed to update sequence numbers for target ${t}: ${c}`)}i.vs=i.vs.remove(t),i.Fs.delete(a.target)}function Dg(r,t,e){const i=vt(r);let a=It.min(),l=zt();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,T){const E=vt(p),S=E.Fs.get(T);return S!==void 0?B.resolve(E.vs.get(S)):E.li.getTargetData(g,T)})(i,c,qn(t)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,m.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,t,e?a:It.min(),e?l:zt()))).next((m=>(gI(i,TA(t),m),{documents:m,ks:l})))))}function mI(r,t){const e=vt(r),i=vt(e.li),a=e.vs.get(t);return a?Promise.resolve(a.target):e.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,t).next((c=>c?c.target:null))))}function pI(r,t){const e=vt(r),i=e.Ms.get(t)||It.min();return e.persistence.runTransaction("Get new document changes","readonly",(a=>e.xs.getAllFromCollectionGroup(a,t,Ub(i,tl),Number.MAX_SAFE_INTEGER))).then((a=>(gI(e,t,a),a)))}function gI(r,t,e){let i=r.Ms.get(t)||It.min();e.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(t,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firestore_clients";function tS(r,t){return`${yI}_${r}_${t}`}const _I="firestore_mutations";function eS(r,t,e){let i=`${_I}_${r}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}const vI="firestore_targets";function Kp(r,t){return`${vI}_${r}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="SharedClientState";class Zf{constructor(t,e,i,a){this.user=t,this.batchId=e,this.state=i,this.error=a}static $s(t,e,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ut(a.error.code,a.error.message))),c?new Zf(t,e,a.state,l):(Me(Ji,`Failed to parse mutation state for ID '${e}': ${i}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class ec{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static $s(t,e){const i=JSON.parse(e);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new ut(i.error.code,i.error.message))),l?new ec(t,i.state,a):(Me(Ji,`Failed to parse target state for ID '${t}': ${e}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Wf{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const i=JSON.parse(e);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=hy();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=Fb(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new Wf(t,l):(Me(Ji,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Iy{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Iy(e.clientId,e.onlineState):(Me(Ji,`Failed to parse online state: ${t}`),null)}}class Ng{constructor(){this.activeTargetIds=hy()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Qp{constructor(t,e,i,a,l){this.window=t,this.Ci=e,this.persistenceKey=i,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new ge(Nt),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=tS(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Ng),this.eo=new RegExp(`^${yI}_${c}_([^_]*)$`),this.no=new RegExp(`^${_I}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${vI}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.hs();for(const i of t){if(i===this.zs)continue;const a=this.getItem(tS(this.persistenceKey,i));if(a){const l=Wf.$s(i,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const e=this.storage.getItem(this.io);if(e){const i=this._o(e);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ys,JSON.stringify(t))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(t){let e=!1;return this.Js.forEach(((i,a)=>{a.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.co(t,"pending")}updateMutationState(t,e,i){this.co(t,e,i),this.lo(t)}addLocalQueryTarget(t,e=!0){let i="not-current";if(this.isActiveQueryTarget(t)){const a=this.storage.getItem(Kp(this.persistenceKey,t));if(a){const l=ec.$s(t,a);l&&(i=l.state)}}return e&&this.ho.Qs(t),this.oo(),i}removeLocalQueryTarget(t){this.ho.Gs(t),this.oo()}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Kp(this.persistenceKey,t))}updateQueryState(t,e,i){this.Po(t,e,i)}handleUserChange(t,e,i){e.forEach((a=>{this.lo(a)})),this.currentUser=t,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(t){this.To(t)}notifyBundleLoaded(t){this.Io(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return st(Ji,"READ",t,e),e}setItem(t,e){st(Ji,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){st(Ji,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const e=t;if(e.storageArea===this.storage){if(st(Ji,"EVENT",e.key,e.newValue),e.key===this.Xs)return void Me("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.eo.test(e.key)){if(e.newValue==null){const i=this.Eo(e.key);return this.Ro(i,null)}{const i=this.Ao(e.key,e.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(e.key)){if(e.newValue!==null){const i=this.Vo(e.key,e.newValue);if(i)return this.mo(i)}}else if(this.ro.test(e.key)){if(e.newValue!==null){const i=this.fo(e.key,e.newValue);if(i)return this.po(i)}}else if(e.key===this.io){if(e.newValue!==null){const i=this._o(e.newValue);if(i)return this.ao(i)}}else if(e.key===this.Ys){const i=(function(l){let c=Dn.ce;if(l!=null)try{const m=JSON.parse(l);St(typeof m=="number",30636,{yo:l}),c=m}catch(m){Me(Ji,"Failed to read sequence number from WebStorage",m)}return c})(e.newValue);i!==Dn.ce&&this.sequenceNumberHandler(i)}else if(e.key===this.so){const i=this.wo(e.newValue);await Promise.all(i.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(e)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(t,e,i){const a=new Zf(this.currentUser,t,e,i),l=eS(this.persistenceKey,this.currentUser,t);this.setItem(l,a.Ws())}lo(t){const e=eS(this.persistenceKey,this.currentUser,t);this.removeItem(e)}To(t){const e={clientId:this.zs,onlineState:t};this.storage.setItem(this.io,JSON.stringify(e))}Po(t,e,i){const a=Kp(this.persistenceKey,t),l=new ec(t,e,i);this.setItem(a,l.Ws())}Io(t){const e=JSON.stringify(Array.from(t));this.setItem(this.so,e)}Eo(t){const e=this.eo.exec(t);return e?e[1]:null}Ao(t,e){const i=this.Eo(t);return Wf.$s(i,e)}Vo(t,e){const i=this.no.exec(t),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return Zf.$s(new mn(l),a,e)}fo(t,e){const i=this.ro.exec(t),a=Number(i[1]);return ec.$s(a,e)}_o(t){return Iy.$s(t)}wo(t){return JSON.parse(t)}async mo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.So(t.batchId,t.state,t.error);st(Ji,`Ignoring mutation for non-active user ${t.user.uid}`)}po(t){return this.syncEngine.Do(t.targetId,t.state,t.error)}Ro(t,e){const i=e?this.Js.insert(t,e):this.Js.remove(t),a=this.uo(this.Js),l=this.uo(i),c=[],m=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||m.push(p)})),this.syncEngine.Co(c,m).then((()=>{this.Js=i}))}ao(t){this.Js.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}uo(t){let e=hy();return t.forEach(((i,a)=>{e=e.unionWith(a.activeTargetIds)})),e}}class TI{constructor(){this.vo=new Ng,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,i){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new Ng,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="ConnectivityMonitor";class iS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){st(nS,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){st(nS,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function xg(){return df===null?df=(function(){return 268435456+Math.round(2147483648*Math.random())})():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="RestConnection",W2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class tV{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===qf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(t,e,i,a,l){const c=xg(),m=this.Qo(t,e.toUriEncodedString());st(Yp,`Sending RPC '${t}' ${c}:`,m,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(m),T=vl(g);return this.zo(t,m,p,i,T).then((E=>(st(Yp,`Received RPC '${t}' ${c}: `,E),E)),(E=>{throw Zo(Yp,`RPC '${t}' ${c} failed with error: `,E,"url: ",m,"request:",i),E}))}jo(t,e,i,a,l,c){return this.Wo(t,e,i,a,l)}Go(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((a,l)=>t[l]=a)),i&&i.headers.forEach(((a,l)=>t[l]=a))}Qo(t,e){const i=W2[t];let a=`${this.qo}/v1/${e}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection",Pu=(r,t,e)=>{r.listen(t,(i=>{try{e(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Qo extends tV{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Qo.c_){const t=Vb();Pu(t,xb.STAT_EVENT,(e=>{e.stat===lg.PROXY?st(dn,"STAT_EVENT: detected buffering proxy"):e.stat===lg.NOPROXY&&st(dn,"STAT_EVENT: detected no buffering proxy")})),Qo.c_=!0}}zo(t,e,i,a,l){const c=xg();return new Promise(((m,p)=>{const g=new Db;g.setWithCredentials(!0),g.listenOnce(Nb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case vf.NO_ERROR:const E=g.getResponseJson();st(dn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),m(E);break;case vf.TIMEOUT:st(dn,`RPC '${t}' ${c} timed out`),p(new ut(W.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const S=g.getStatus();if(st(dn,`RPC '${t}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const C=(function(Q){const at=Q.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(at)>=0?at:W.UNKNOWN})(V.status);p(new ut(C,V.message))}else p(new ut(W.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ut(W.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{st(dn,`RPC '${t}' ${c} completed.`)}}));const T=JSON.stringify(a);st(dn,`RPC '${t}' ${c} sending request:`,a),g.send(e,"POST",T,i,15)}))}T_(t,e,i){const a=xg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const g=l.join("");st(dn,`Creating RPC '${t}' stream ${a}: ${g}`,m);const T=c.createWebChannel(g,m);this.I_(T);let E=!1,S=!1;const R=new eV({Ho:V=>{S?st(dn,`Not sending because RPC '${t}' stream ${a} is closed:`,V):(E||(st(dn,`Opening RPC '${t}' stream ${a} transport.`),T.open(),E=!0),st(dn,`RPC '${t}' stream ${a} sending:`,V),T.send(V))},Jo:()=>T.close()});return Pu(T,zu.EventType.OPEN,(()=>{S||(st(dn,`RPC '${t}' stream ${a} transport opened.`),R.i_())})),Pu(T,zu.EventType.CLOSE,(()=>{S||(S=!0,st(dn,`RPC '${t}' stream ${a} transport closed`),R.o_(),this.E_(T))})),Pu(T,zu.EventType.ERROR,(V=>{S||(S=!0,Zo(dn,`RPC '${t}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),R.o_(new ut(W.UNAVAILABLE,"The operation could not be completed")))})),Pu(T,zu.EventType.MESSAGE,(V=>{var C;if(!S){const z=V.data[0];St(!!z,16349);const Q=z,at=(Q==null?void 0:Q.error)||((C=Q[0])==null?void 0:C.error);if(at){st(dn,`RPC '${t}' stream ${a} received error:`,at);const rt=at.status;let mt=(function(D){const A=Ge[D];if(A!==void 0)return MA(A)})(rt),_t=at.message;rt==="NOT_FOUND"&&_t.includes("database")&&_t.includes("does not exist")&&_t.includes(this.databaseId.database)&&Zo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),mt===void 0&&(mt=W.INTERNAL,_t="Unknown error status: "+rt+" with message "+at.message),S=!0,R.o_(new ut(mt,_t)),T.close()}else st(dn,`RPC '${t}' stream ${a} received:`,z),R.__(z)}})),Qo.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,i){super.Go(t,e,i),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Mb()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(r){return new Qo(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return typeof window<"u"?window:null}function Df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(r){return new l2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo.c_=!1;class SI{constructor(t,e,i=1e3,a=1.5,l=6e4){this.Ci=t,this.timerId=e,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const e=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-i);a>0&&st("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="PersistentStream";class bI{constructor(t,e,i,a,l,c,m,p){this.Ci=t,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SI(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===W.RESOURCE_EXHAUSTED?(Me(e.toString()),Me("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===e&&this.G_(i,a)}),(i=>{t((()=>{const a=new ut(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(t,e){const i=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(sS,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(st(sS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iV extends bI{constructor(t,e,i,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=h2(this.serializer,t),i=(function(l){if(!("targetChange"in l))return It.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?It.min():c.readTime?En(c.readTime):It.min()})(t);return this.listener.J_(e,i)}Z_(t){const e={};e.database=Ag(this.serializer),e.addTarget=(function(l,c){let m;const p=c.target;if(m=Ff(p)?{documents:BA(l,p)}:{query:qA(l,p).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=kA(l,c.resumeToken);const g=Sg(l,c.expectedCount);g!==null&&(m.expectedCount=g)}else if(c.snapshotVersion.compareTo(It.min())>0){m.readTime=hl(l,c.snapshotVersion.toTimestamp());const g=Sg(l,c.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,t);const i=d2(this.serializer,t);i&&(e.labels=i),this.K_(e)}X_(t){const e={};e.database=Ag(this.serializer),e.removeTarget=t,this.K_(e)}}class sV extends bI{constructor(t,e,i,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}H_(t){return St(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,St(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){St(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=f2(t.writeResults,t.commitTime),i=En(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=Ag(this.serializer),this.K_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>Kf(this.serializer,i)))};this.K_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{}class aV extends rV{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ut(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(t,bg(e,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ut(W.UNKNOWN,l.toString())}))}jo(t,e,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.jo(t,bg(e,i),a,c,m,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ut(W.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function oV(r,t,e,i){return new aV(r,t,e,i)}class lV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Me(e),this.aa=!1):st("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="RemoteStore";class uV{constructor(t,e,i,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{qa(this)&&(st(ja,"Restarting streams for network reachability change."),await(async function(p){const g=vt(p);g.Ea.add(4),await xc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Id(g)})(this))}))})),this.Va=new lV(i,a)}}async function Id(r){if(qa(r))for(const t of r.Ra)await t(!0)}async function xc(r){for(const t of r.Ra)await t(!1)}function wd(r,t){const e=vt(r);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Cy(e)?Ry(e):wl(e).O_()&&wy(e,t))}function dl(r,t){const e=vt(r),i=wl(e);e.Ia.delete(t),i.O_()&&AI(e,t),e.Ia.size===0&&(i.O_()?i.L_():qa(e)&&e.Va.set("Unknown"))}function wy(r,t){if(r.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(It.min())>0){const e=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}wl(r).Z_(t)}function AI(r,t){r.da.$e(t),wl(r).X_(t)}function Ry(r){r.da=new s2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),wl(r).start(),r.Va.ua()}function Cy(r){return qa(r)&&!wl(r).x_()&&r.Ia.size>0}function qa(r){return vt(r).Ea.size===0}function II(r){r.da=void 0}async function cV(r){r.Va.set("Online")}async function hV(r){r.Ia.forEach(((t,e)=>{wy(r,t)}))}async function fV(r,t){II(r),Cy(r)?(r.Va.ha(t),Ry(r)):r.Va.set("Unknown")}async function dV(r,t,e){if(r.Va.set("Online"),t instanceof PA&&t.state===2&&t.cause)try{await(async function(a,l){const c=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,c),a.Ia.delete(m),a.da.removeTarget(m))})(r,t)}catch(i){st(ja,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await td(r,i)}else if(t instanceof Rf?r.da.Xe(t):t instanceof OA?r.da.st(t):r.da.tt(t),!e.isEqual(It.min()))try{const i=await dI(r.localStore);e.compareTo(i)>=0&&await(function(l,c){const m=l.da.Tt(c);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const T=l.Ia.get(g);T&&l.Ia.set(g,T.withResumeToken(p.resumeToken,c))}})),m.targetMismatches.forEach(((p,g)=>{const T=l.Ia.get(p);if(!T)return;l.Ia.set(p,T.withResumeToken(Pe.EMPTY_BYTE_STRING,T.snapshotVersion)),AI(l,p);const E=new Cs(T.target,p,g,T.sequenceNumber);wy(l,E)})),l.remoteSyncer.applyRemoteEvent(m)})(r,e)}catch(i){st(ja,"Failed to raise snapshot:",i),await td(r,i)}}async function td(r,t,e){if(!kr(t))throw t;r.Ea.add(1),await xc(r),r.Va.set("Offline"),e||(e=()=>dI(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{st(ja,"Retrying IndexedDB access"),await e(),r.Ea.delete(1),await Id(r)}))}function wI(r,t){return t().catch((e=>td(r,e,t)))}async function Il(r){const t=vt(r),e=Mr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:wa;for(;mV(t);)try{const a=await J2(t.localStore,i);if(a===null){t.Ta.length===0&&e.L_();break}i=a.batchId,pV(t,a)}catch(a){await td(t,a)}RI(t)&&CI(t)}function mV(r){return qa(r)&&r.Ta.length<10}function pV(r,t){r.Ta.push(t);const e=Mr(r);e.O_()&&e.Y_&&e.ea(t.mutations)}function RI(r){return qa(r)&&!Mr(r).x_()&&r.Ta.length>0}function CI(r){Mr(r).start()}async function gV(r){Mr(r).ra()}async function yV(r){const t=Mr(r);for(const e of r.Ta)t.ea(e.mutations)}async function _V(r,t,e){const i=r.Ta.shift(),a=my.from(i,t,e);await wI(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Il(r)}async function vV(r,t){t&&Mr(r).Y_&&await(async function(i,a){if((function(c){return e2(c)&&c!==W.ABORTED})(a.code)){const l=i.Ta.shift();Mr(i).B_(),await wI(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Il(i)}})(r,t),RI(r)&&CI(r)}async function rS(r,t){const e=vt(r);e.asyncQueue.verifyOperationInProgress(),st(ja,"RemoteStore received new credentials");const i=qa(e);e.Ea.add(3),await xc(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Id(e)}async function Vg(r,t){const e=vt(r);t?(e.Ea.delete(2),await Id(e)):t||(e.Ea.add(2),await xc(e),e.Va.set("Unknown"))}function wl(r){return r.ma||(r.ma=(function(e,i,a){const l=vt(e);return l.sa(),new iV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:cV.bind(null,r),Yo:hV.bind(null,r),t_:fV.bind(null,r),J_:dV.bind(null,r)}),r.Ra.push((async t=>{t?(r.ma.B_(),Cy(r)?Ry(r):r.Va.set("Unknown")):(await r.ma.stop(),II(r))}))),r.ma}function Mr(r){return r.fa||(r.fa=(function(e,i,a){const l=vt(e);return l.sa(),new sV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:gV.bind(null,r),t_:vV.bind(null,r),ta:yV.bind(null,r),na:_V.bind(null,r)}),r.Ra.push((async t=>{t?(r.fa.B_(),await Il(r)):(await r.fa.stop(),r.Ta.length>0&&(st(ja,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t,e,i,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,l){const c=Date.now()+i,m=new Dy(t,e,c,a,l);return m.start(i),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(W.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ny(r,t){if(Me("AsyncQueue",`${t}: ${r}`),kr(r))return new ut(W.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{static emptySet(t){return new Yo(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||ht.comparator(e.key,i.key):(e,i)=>ht.comparator(e.key,i.key),this.keyedMap=ju(),this.sortedSet=new ge(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Yo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Yo;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.ga=new ge(ht.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):gt(63341,{Vt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class ml{constructor(t,e,i,a,l,c,m,p,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,a,l){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new ml(t,e,Yo.emptySet(e),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_d(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class EV{constructor(){this.queries=oS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const a=vt(e),l=a.queries;a.queries=oS(),l.forEach(((c,m)=>{for(const p of m.ba)p.onError(i)}))})(this,new ut(W.ABORTED,"Firestore shutting down"))}}function oS(){return new Ps((r=>vA(r)),_d)}async function SV(r,t){const e=vt(r);let i=3;const a=t.query;let l=e.queries.get(a);l?!l.Sa()&&t.Da()&&(i=2):(l=new TV,i=t.Da()?0:1);try{switch(i){case 0:l.wa=await e.onListen(a,!0);break;case 1:l.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const m=Ny(c,`Initialization of query '${jo(t.query)}' failed`);return void t.onError(m)}e.queries.set(a,l),l.ba.push(t),t.va(e.onlineState),l.wa&&t.Fa(l.wa)&&xy(e)}async function bV(r,t){const e=vt(r),i=t.query;let a=3;const l=e.queries.get(i);if(l){const c=l.ba.indexOf(t);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=t.Da()?0:1:!l.Sa()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function AV(r,t){const e=vt(r);let i=!1;for(const a of t){const l=a.query,c=e.queries.get(l);if(c){for(const m of c.ba)m.Fa(a)&&(i=!0);c.wa=a}}i&&xy(e)}function IV(r,t,e){const i=vt(r),a=i.queries.get(t);if(a)for(const l of a.ba)l.onError(e);i.queries.delete(t)}function xy(r){r.Ca.forEach((t=>{t.next()}))}var Mg,lS;(lS=Mg||(Mg={})).Ma="default",lS.Cache="cache";class wV{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new ml(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.Ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=ml.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t){this.key=t}}class NI{constructor(t){this.key=t}}class RV{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=zt(),this.mutatedKeys=zt(),this.eu=EA(t),this.tu=new Yo(this.eu)}get nu(){return this.Za}ru(t,e){const i=e?e.iu:new aS,a=e?e.tu:this.tu;let l=e?e.mutatedKeys:this.mutatedKeys,c=a,m=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((T,E)=>{const S=a.get(T),R=Rc(this.query,E)?E:null,V=!!S&&this.mutatedKeys.has(S.key),C=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let z=!1;S&&R?S.data.isEqual(R.data)?V!==C&&(i.track({type:3,doc:R}),z=!0):this.su(S,R)||(i.track({type:2,doc:R}),z=!0,(p&&this.eu(R,p)>0||g&&this.eu(R,g)<0)&&(m=!0)):!S&&R?(i.track({type:0,doc:R}),z=!0):S&&!R&&(i.track({type:1,doc:S}),z=!0,(p||g)&&(m=!0)),z&&(R?(c=c.add(R),l=C?l.add(T):l.delete(T)):(c=c.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),l=l.delete(T.key),i.track({type:1,doc:T})}return{tu:c,iu:i,Ss:m,mutatedKeys:l}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const l=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((T,E)=>(function(R,V){const C=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Vt:z})}};return C(R)-C(V)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(i),a=a??!1;const m=e&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new ml(this.query,t.tu,l,c,t.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=zt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const e=[];return t.forEach((i=>{this.Ya.has(i)||e.push(new NI(i))})),this.Ya.forEach((i=>{t.has(i)||e.push(new DI(i))})),e}cu(t){this.Za=t.ks,this.Ya=zt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Rl="SyncEngine";class CV{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class DV{constructor(t){this.key=t,this.hu=!1}}class NV{constructor(t,e,i,a,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ps((m=>vA(m)),_d),this.Iu=new Map,this.Eu=new Set,this.Ru=new ge(ht.comparator),this.Au=new Map,this.Vu=new Ty,this.du={},this.mu=new Map,this.fu=za.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xV(r,t,e=!0){const i=Rd(r);let a;const l=i.Tu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await xI(i,t,e,!0),a}async function VV(r,t){const e=Rd(r);await xI(e,t,!0,!1)}async function xI(r,t,e,i){const a=await Jf(r.localStore,qn(t)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,e);let m;return i&&(m=await Vy(r,t,l,c==="current",a.resumeToken)),r.isPrimaryClient&&e&&wd(r.remoteStore,a),m}async function Vy(r,t,e,i,a){r.pu=(E,S,R)=>(async function(C,z,Q,at){let rt=z.view.ru(Q);rt.Ss&&(rt=await Dg(C.localStore,z.query,!1).then((({documents:D})=>z.view.ru(D,rt))));const mt=at&&at.targetChanges.get(z.targetId),_t=at&&at.targetMismatches.get(z.targetId)!=null,ft=z.view.applyChanges(rt,C.isPrimaryClient,mt,_t);return Og(C,z.targetId,ft.au),ft.snapshot})(r,E,S,R);const l=await Dg(r.localStore,t,!0),c=new RV(t,l.ks),m=c.ru(l.documents),p=Nc.createSynthesizedTargetChangeForCurrentChange(e,i&&r.onlineState!=="Offline",a),g=c.applyChanges(m,r.isPrimaryClient,p);Og(r,e,g.au);const T=new CV(t,e,c);return r.Tu.set(t,T),r.Iu.has(e)?r.Iu.get(e).push(t):r.Iu.set(e,[t]),g.snapshot}async function MV(r,t,e){const i=vt(r),a=i.Tu.get(t),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!_d(c,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await fl(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),e&&dl(i.remoteStore,a.targetId),pl(i,a.targetId)})).catch(Pr)):(pl(i,a.targetId),await fl(i.localStore,a.targetId,!0))}async function OV(r,t){const e=vt(r),i=e.Tu.get(t),a=e.Iu.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),dl(e.remoteStore,i.targetId))}async function PV(r,t,e){const i=ky(r);try{const a=await(function(c,m){const p=vt(c),g=le.now(),T=m.reduce(((R,V)=>R.add(V.key)),zt());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let V=Bn(),C=zt();return p.xs.getEntries(R,T).next((z=>{V=z,V.forEach(((Q,at)=>{at.isValidDocument()||(C=C.add(Q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,V))).next((z=>{E=z;const Q=[];for(const at of m){const rt=Wx(at,E.get(at.key).overlayedDocument);rt!=null&&Q.push(new ks(at.key,rt,uA(rt.value.mapValue),nn.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,Q,m)})).next((z=>{S=z;const Q=z.applyToLocalDocumentSet(E,C);return p.documentOverlayCache.saveOverlays(R,z.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:bA(E)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),(function(c,m,p){let g=c.du[c.currentUser.toKey()];g||(g=new ge(Nt)),g=g.insert(m,p),c.du[c.currentUser.toKey()]=g})(i,a.batchId,e),await Ur(i,a.changes),await Il(i.remoteStore)}catch(a){const l=Ny(a,"Failed to persist write");e.reject(l)}}async function VI(r,t){const e=vt(r);try{const i=await $2(e.localStore,t);t.targetChanges.forEach(((a,l)=>{const c=e.Au.get(l);c&&(St(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?St(c.hu,14607):a.removedDocuments.size>0&&(St(c.hu,42227),c.hu=!1))})),await Ur(e,i,t)}catch(i){await Pr(i)}}function uS(r,t,e){const i=vt(r);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Tu.forEach(((l,c)=>{const m=c.view.va(t);m.snapshot&&a.push(m.snapshot)})),(function(c,m){const p=vt(c);p.onlineState=m;let g=!1;p.queries.forEach(((T,E)=>{for(const S of E.ba)S.va(m)&&(g=!0)})),g&&xy(p)})(i.eventManager,t),a.length&&i.Pu.J_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function kV(r,t,e){const i=vt(r);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Au.get(t),l=a&&a.key;if(l){let c=new ge(ht.comparator);c=c.insert(l,Re.newNoDocument(l,It.min()));const m=zt().add(l),p=new Dc(It.min(),new Map,new ge(Nt),c,m);await VI(i,p),i.Ru=i.Ru.remove(l),i.Au.delete(t),Py(i)}else await fl(i.localStore,t,!1).then((()=>pl(i,t,e))).catch(Pr)}async function LV(r,t){const e=vt(r),i=t.batch.batchId;try{const a=await Y2(e.localStore,t);Oy(e,i,null),My(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Ur(e,a)}catch(a){await Pr(a)}}async function UV(r,t,e){const i=vt(r);try{const a=await(function(c,m){const p=vt(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let T;return p.mutationQueue.lookupMutationBatch(g,m).next((E=>(St(E!==null,37113),T=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,T,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T))).next((()=>p.localDocuments.getDocuments(g,T)))}))})(i.localStore,t);Oy(i,t,e),My(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Ur(i,a)}catch(a){await Pr(a)}}function My(r,t){(r.mu.get(t)||[]).forEach((e=>{e.resolve()})),r.mu.delete(t)}function Oy(r,t,e){const i=vt(r);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),i.du[i.currentUser.toKey()]=a}}function pl(r,t,e=null){r.sharedClientState.removeLocalQueryTarget(t);for(const i of r.Iu.get(t))r.Tu.delete(i),e&&r.Pu.yu(i,e);r.Iu.delete(t),r.isPrimaryClient&&r.Vu.Gr(t).forEach((i=>{r.Vu.containsKey(i)||MI(r,i)}))}function MI(r,t){r.Eu.delete(t.path.canonicalString());const e=r.Ru.get(t);e!==null&&(dl(r.remoteStore,e),r.Ru=r.Ru.remove(t),r.Au.delete(e),Py(r))}function Og(r,t,e){for(const i of e)i instanceof DI?(r.Vu.addReference(i.key,t),zV(r,i)):i instanceof NI?(st(Rl,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,t),r.Vu.containsKey(i.key)||MI(r,i.key)):gt(19791,{wu:i})}function zV(r,t){const e=t.key,i=e.path.canonicalString();r.Ru.get(e)||r.Eu.has(i)||(st(Rl,"New document in limbo: "+e),r.Eu.add(i),Py(r))}function Py(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const e=new ht(se.fromString(t)),i=r.fu.next();r.Au.set(i,new DV(e)),r.Ru=r.Ru.insert(e,i),wd(r.remoteStore,new Cs(qn(yd(e.path)),i,"TargetPurposeLimboResolution",Dn.ce))}}async function Ur(r,t,e){const i=vt(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,p)=>{c.push(i.pu(p,t,e).then((g=>{var T;if((g||e)&&i.isPrimaryClient){const E=g?!g.fromCache:(T=e==null?void 0:e.targetChanges.get(p.targetId))==null?void 0:T.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){a.push(g);const E=by.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(p,g){const T=vt(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>B.forEach(g,(S=>B.forEach(S.Ts,(R=>T.persistence.referenceDelegate.addReference(E,S.targetId,R))).next((()=>B.forEach(S.Is,(R=>T.persistence.referenceDelegate.removeReference(E,S.targetId,R)))))))))}catch(E){if(!kr(E))throw E;st(Ay,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const R=T.vs.get(S),V=R.snapshotVersion,C=R.withLastLimboFreeSnapshotVersion(V);T.vs=T.vs.insert(S,C)}}})(i.localStore,l))}async function jV(r,t){const e=vt(r);if(!e.currentUser.isEqual(t)){st(Rl,"User change. New user:",t.toKey());const i=await fI(e.localStore,t);e.currentUser=t,(function(l,c){l.mu.forEach((m=>{m.forEach((p=>{p.reject(new ut(W.CANCELLED,c))}))})),l.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Ur(e,i.Ns)}}function BV(r,t){const e=vt(r),i=e.Au.get(t);if(i&&i.hu)return zt().add(i.key);{let a=zt();const l=e.Iu.get(t);if(!l)return a;for(const c of l){const m=e.Tu.get(c);a=a.unionWith(m.view.nu)}return a}}async function qV(r,t){const e=vt(r),i=await Dg(e.localStore,t.query,!0),a=t.view.cu(i);return e.isPrimaryClient&&Og(e,t.targetId,a.au),a}async function FV(r,t){const e=vt(r);return pI(e.localStore,t).then((i=>Ur(e,i)))}async function HV(r,t,e,i){const a=vt(r),l=await(function(m,p){const g=vt(m),T=vt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(E=>T.Xn(E,p).next((S=>S?g.localDocuments.getDocuments(E,S):B.resolve(null)))))})(a.localStore,t);l!==null?(e==="pending"?await Il(a.remoteStore):e==="acknowledged"||e==="rejected"?(Oy(a,t,i||null),My(a,t),(function(m,p){vt(vt(m).mutationQueue).nr(p)})(a.localStore,t)):gt(6720,"Unknown batchState",{bu:e}),await Ur(a,l)):st(Rl,"Cannot apply mutation batch with id: "+t)}async function GV(r,t){const e=vt(r);if(Rd(e),ky(e),t===!0&&e.gu!==!0){const i=e.sharedClientState.getAllActiveQueryTargets(),a=await cS(e,i.toArray());e.gu=!0,await Vg(e.remoteStore,!0);for(const l of a)wd(e.remoteStore,l)}else if(t===!1&&e.gu!==!1){const i=[];let a=Promise.resolve();e.Iu.forEach(((l,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(pl(e,c),fl(e.localStore,c,!0)))),dl(e.remoteStore,c)})),await a,await cS(e,i),(function(c){const m=vt(c);m.Au.forEach(((p,g)=>{dl(m.remoteStore,g)})),m.Vu.zr(),m.Au=new Map,m.Ru=new ge(ht.comparator)})(e),e.gu=!1,await Vg(e.remoteStore,!1)}}async function cS(r,t,e){const i=vt(r),a=[],l=[];for(const c of t){let m;const p=i.Iu.get(c);if(p&&p.length!==0){m=await Jf(i.localStore,qn(p[0]));for(const g of p){const T=i.Tu.get(g),E=await qV(i,T);E.snapshot&&l.push(E.snapshot)}}else{const g=await mI(i.localStore,c);m=await Jf(i.localStore,g),await Vy(i,OI(g),c,!1,m.resumeToken)}a.push(m)}return i.Pu.J_(l),a}function OI(r){return yA(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function KV(r){return(function(e){return vt(vt(e).persistence).hs()})(vt(r).localStore)}async function QV(r,t,e,i){const a=vt(r);if(a.gu)return void st(Rl,"Ignoring unexpected query state notification.");const l=a.Iu.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const c=await pI(a.localStore,TA(l[0])),m=Dc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Pe.EMPTY_BYTE_STRING);await Ur(a,c,m);break}case"rejected":await fl(a.localStore,t,!0),pl(a,t,i);break;default:gt(64155,e)}}async function YV(r,t,e){const i=Rd(r);if(i.gu){for(const a of t){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){st(Rl,"Adding an already active target "+a);continue}const l=await mI(i.localStore,a),c=await Jf(i.localStore,l);await Vy(i,OI(l),c.targetId,!1,c.resumeToken),wd(i.remoteStore,c)}for(const a of e)i.Iu.has(a)&&await fl(i.localStore,a,!1).then((()=>{dl(i.remoteStore,a),pl(i,a)})).catch(Pr)}}function Rd(r){const t=vt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=VI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=BV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=kV.bind(null,t),t.Pu.J_=AV.bind(null,t.eventManager),t.Pu.yu=IV.bind(null,t.eventManager),t}function ky(r){const t=vt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=LV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=UV.bind(null,t),t}class yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ad(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return hI(this.persistence,new cI,t.initialUser,this.serializer)}Cu(t){return new Ey(bd.Vi,this.serializer)}Du(t){return new TI}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yc.provider={build:()=>new yc};class $V extends yc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){St(this.persistence.referenceDelegate instanceof Xf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new sI(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new Ey((i=>Xf.Vi(i,e)),this.serializer)}}class PI extends yc{constructor(t,e,i){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await ky(this.xu.syncEngine),await Il(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return hI(this.persistence,new cI,t.initialUser,this.serializer)}Fu(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new sI(i,t.asyncQueue,e)}Mu(t,e){const i=new ZN(e,this.persistence);return new JN(t.asyncQueue,i)}Cu(t){const e=uI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new Sy(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,EI(),Df(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new TI}}class XV extends PI{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof Qp&&(this.sharedClientState.syncEngine={So:HV.bind(null,e),Do:QV.bind(null,e),Co:YV.bind(null,e),hs:KV.bind(null,e),bo:FV.bind(null,e)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await GV(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(t){const e=EI();if(!Qp.v(e))throw new ut(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=uI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Qp(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class _c{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jV.bind(null,this.syncEngine),await Vg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new EV})()}createDatastore(t){const e=Ad(t.databaseInfo.databaseId),i=nV(t.databaseInfo);return oV(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,a,l,c,m){return new uV(i,a,l,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>uS(this.syncEngine,e,0)),(function(){return iS.v()?new iS:new Z2})())}createSyncEngine(t,e){return(function(a,l,c,m,p,g,T){const E=new NV(a,l,c,m,p,g);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(a){const l=vt(a);st(ja,"RemoteStore shutting down."),l.Ea.add(5),await xc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}_c.provider={build:()=>new _c};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Me("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class ZV{constructor(t,e,i,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this._databaseInfo=a,this.user=mn.UNAUTHENTICATED,this.clientId=ty.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{st(Or,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(st(Or,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Ny(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function $p(r,t){r.asyncQueue.verifyOperationInProgress(),st(Or,"Initializing OfflineComponentProvider");const e=r.configuration;await t.initialize(e);let i=e.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await fI(t.localStore,a),i=a)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function hS(r,t){r.asyncQueue.verifyOperationInProgress();const e=await WV(r);st(Or,"Initializing OnlineComponentProvider"),await t.initialize(e,r.configuration),r.setCredentialChangeListener((i=>rS(t.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>rS(t.remoteStore,a))),r._onlineComponents=t}async function WV(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(Or,"Using user provided OfflineComponentProvider");try{await $p(r,r._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(e))throw e;Zo("Error using user provided cache. Falling back to memory cache: "+e),await $p(r,new yc)}}else st(Or,"Using default OfflineComponentProvider"),await $p(r,new $V(void 0));return r._offlineComponents}async function kI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(Or,"Using user provided OnlineComponentProvider"),await hS(r,r._uninitializedComponentsProvider._online)):(st(Or,"Using default OnlineComponentProvider"),await hS(r,new _c))),r._onlineComponents}function tM(r){return kI(r).then((t=>t.syncEngine))}async function fS(r){const t=await kI(r),e=t.eventManager;return e.onListen=xV.bind(null,t.syncEngine),e.onUnlisten=MV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=VV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=OV.bind(null,t.syncEngine),e}function eM(r,t,e,i){const a=new JV(i),l=new wV(t,a,e);return r.asyncQueue.enqueueAndForget((async()=>SV(await fS(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>bV(await fS(r),l)))}}function nM(r,t){const e=new Cr;return r.asyncQueue.enqueueAndForget((async()=>PV(await tM(r),t,e))),e.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="ComponentProvider",dS=new Map;function sM(r,t,e,i,a){return new wx(r,t,e,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,LI(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM="firestore.googleapis.com",mS=!0;class pS{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ut(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rM,this.ssl=mS}else this.host=t.host,this.ssl=t.ssl??mS;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=WA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iI)throw new ut(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}YN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LI(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ut(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ut(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ut(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ly{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pS(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new zN;switch(i.type){case"firstParty":return new qN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ut(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=dS.get(e);i&&(st(iM,"Removing Datastore"),dS.delete(e),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Fa(this.firestore,t,this._query)}}class Oe{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Oe(this.firestore,t,this._key)}toJSON(){return{type:Oe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Ac(e,Oe._jsonSchema))return new Oe(t,i||null,new ht(se.fromString(e.referencePath)))}}Oe._jsonSchemaVersion="firestore/documentReference/1.0",Oe._jsonSchema={type:Qe("string",Oe._jsonSchemaVersion),referencePath:Qe("string")};class Nr extends Fa{constructor(t,e,i){super(t,e,yd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Oe(this.firestore,null,new ht(t))}withConverter(t){return new Nr(this.firestore,t,this._path)}}function UI(r,t,...e){if(r=Ye(r),kb("collection","path",t),r instanceof Ly){const i=se.fromString(t,...e);return s0(i),new Nr(r,null,i)}{if(!(r instanceof Oe||r instanceof Nr))throw new ut(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(se.fromString(t,...e));return s0(i),new Nr(r.firestore,null,i)}}function Tn(r,t,...e){if(r=Ye(r),arguments.length===1&&(t=ty.newId()),kb("doc","path",t),r instanceof Ly){const i=se.fromString(t,...e);return i0(i),new Oe(r,null,new ht(i))}{if(!(r instanceof Oe||r instanceof Nr))throw new ut(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(se.fromString(t,...e));return i0(i),new Oe(r.firestore,r instanceof Nr?r.converter:null,new ht(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="AsyncQueue";class yS{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SI(this,"async_queue_retry"),this._c=()=>{const i=Df();i&&st(gS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=Df();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Df();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Cr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!kr(t))throw t;st(gS,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Me("INTERNAL UNHANDLED ERROR: ",_S(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=Dy.createAndSchedule(this,t,e,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&gt(47125,{Pc:_S(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function _S(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class Ba extends Ly{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new yS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new yS(t),this._firestoreClient=void 0,await t}}}function aM(r,t,e){e||(e=qf);const i=qg(r,"firestore");if(i.isInitialized(e)){const a=i.getImmediate({identifier:e}),l=i.getOptions(e);if(xa(l,t))return a;throw new ut(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new ut(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iI)throw new ut(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&vl(t.host)&&qS(t.host),i.initialize({options:t,instanceIdentifier:e})}function Uy(r){if(r._terminated)throw new ut(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||oM(r),r._firestoreClient}function oM(r){var i,a,l,c;const t=r._freezeSettings(),e=sM(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,t);r._componentsProvider||(l=t.localCache)!=null&&l._offlineComponentProvider&&((c=t.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new ZV(r._authCredentials,r._appCheckCredentials,r._queue,e,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t){this._byteString=t}static fromBase64String(t){try{return new si(Pe.fromBase64String(t))}catch(e){throw new ut(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new si(Pe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ac(t,si._jsonSchema))return si.fromBase64String(t.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:Qe("string",si._jsonSchemaVersion),bytes:Qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ut(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ae(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ut(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ut(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(t){if(Ac(t,es._jsonSchema))return new es(t.latitude,t.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:Qe("string",es._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ac(t,Ei._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Ei(t.vectorValues);throw new ut(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:Qe("string",Ei._jsonSchemaVersion),vectorValues:Qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=/^__.*__$/;class uM{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new ks(t,this.data,this.fieldMask,e,this.fieldTransforms):new Al(t,this.data,e,this.fieldTransforms)}}class zI{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ks(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function jI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{dataSource:r})}}class jy{constructor(t,e,i,a,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new jy({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var a;const e=(a=this.path)==null?void 0:a.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePathSegment(t),i}childContextForFieldPath(t){var a;const e=(a=this.path)==null?void 0:a.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePath(),i}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return ed(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(jI(this.dataSource)&&lM.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class cM{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Ad(t)}createContext(t,e,i,a=!1){return new jy({dataSource:t,methodName:e,targetDoc:i,path:Ae.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dd(r){const t=r._freezeSettings(),e=Ad(r._databaseId);return new cM(r._databaseId,!!t.ignoreUndefinedProperties,e)}function BI(r,t,e,i,a,l={}){const c=r.createContext(l.merge||l.mergeFields?2:0,t,e,a);By("Data must be an object, but it was:",c,i);const m=HI(i,c);let p,g;if(l.merge)p=new Nn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const T=[];for(const E of l.mergeFields){const S=gl(t,E,e);if(!c.contains(S))throw new ut(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);QI(T,S)||T.push(S)}p=new Nn(T),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new uM(new gn(m),p,g)}class Nd extends zy{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Nd}}function qI(r,t,e,i){const a=r.createContext(1,t,e);By("Data must be an object, but it was:",a,i);const l=[],c=gn.empty();Lr(i,((p,g)=>{const T=KI(t,p,e);g=Ye(g);const E=a.childContextForFieldPath(T);if(g instanceof Nd)l.push(T);else{const S=Vc(g,E);S!=null&&(l.push(T),c.set(T,S))}}));const m=new Nn(l);return new zI(c,m,a.fieldTransforms)}function FI(r,t,e,i,a,l){const c=r.createContext(1,t,e),m=[gl(t,i,e)],p=[a];if(l.length%2!=0)throw new ut(W.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)m.push(gl(t,l[S])),p.push(l[S+1]);const g=[],T=gn.empty();for(let S=m.length-1;S>=0;--S)if(!QI(g,m[S])){const R=m[S];let V=p[S];V=Ye(V);const C=c.childContextForFieldPath(R);if(V instanceof Nd)g.push(R);else{const z=Vc(V,C);z!=null&&(g.push(R),T.set(R,z))}}const E=new Nn(g);return new zI(T,E,c.fieldTransforms)}function hM(r,t,e,i=!1){return Vc(e,r.createContext(i?4:3,t))}function Vc(r,t){if(GI(r=Ye(r)))return By("Unsupported field value:",t,r),HI(r,t);if(r instanceof zy)return(function(i,a){if(!jI(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const m of i){let p=Vc(m,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,t)}return(function(i,a){if((i=Ye(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Kx(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=le.fromDate(i);return{timestampValue:hl(a.serializer,l)}}if(i instanceof le){const l=new le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:hl(a.serializer,l)}}if(i instanceof es)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof si)return{bytesValue:kA(a.serializer,i._byteString)};if(i instanceof Oe){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:yy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Ei)return(function(c,m){const p=c instanceof Ei?c.toArray():c;return{mapValue:{fields:{[ly]:{stringValue:uy},[rl]:{arrayValue:{values:p.map((T=>{if(typeof T!="number")throw m.createError("VectorValues must only contain numeric values.");return fy(m.serializer,T)}))}}}}}})(i,a);if(QA(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${ud(i)}`)})(r,t)}function HI(r,t){const e={};return tA(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Lr(r,((i,a)=>{const l=Vc(a,t.childContextForField(i));l!=null&&(e[i]=l)})),{mapValue:{fields:e}}}function GI(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof le||r instanceof es||r instanceof si||r instanceof Oe||r instanceof zy||r instanceof Ei||QA(r))}function By(r,t,e){if(!GI(e)||!Lb(e)){const i=ud(e);throw i==="an object"?t.createError(r+" a custom object"):t.createError(r+" "+i)}}function gl(r,t,e){if((t=Ye(t))instanceof Cd)return t._internalPath;if(typeof t=="string")return KI(r,t);throw ed("Field path arguments must be of type string or ",r,!1,void 0,e)}const fM=new RegExp("[~\\*/\\[\\]]");function KI(r,t,e){if(t.search(fM)>=0)throw ed(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,e);try{return new Cd(...t.split("."))._internalPath}catch{throw ed(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,e)}}function ed(r,t,e,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new ut(W.INVALID_ARGUMENT,m+r+p)}function QI(r,t){return r.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{convertValue(t,e="none"){switch(xr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ee(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ms(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw gt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Lr(t,((a,l)=>{i[a]=this.convertValue(l,e)})),i}convertVectorValue(t){var i,a,l;const e=(l=(a=(i=t.fields)==null?void 0:i[rl].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Ee(c.doubleValue)));return new Ei(e)}convertGeoPoint(t){return new es(Ee(t.latitude),Ee(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=pd(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(cc(t));default:return null}}convertTimestamp(t){const e=Vs(t);return new le(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=se.fromString(t);St(KA(i),9688,{name:t});const a=new Pa(i.get(1),i.get(3)),l=new ht(i.popFirst(5));return a.isEqual(e)||Me(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI extends dM{constructor(t){super(),this.firestore=t}convertBytes(t){return new si(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Oe(this.firestore,null,e)}}const vS="@firebase/firestore",TS="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(r){return(function(e,i){if(typeof e!="object"||e===null)return!1;const a=e;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t,e,i,a,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new mM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const e=this._document.data.field(gl("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class mM extends $I{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ut(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qy{}class XI extends qy{}function JI(r,t,...e){let i=[];t instanceof qy&&i.push(t),i=i.concat(e),(function(l){const c=l.filter((p=>p instanceof Hy)).length,m=l.filter((p=>p instanceof Fy)).length;if(c>1||c>0&&m>0)throw new ut(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class Fy extends XI{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new Fy(t,e,i)}_apply(t){const e=this._parse(t);return WI(t._query,e),new Fa(t.firestore,t.converter,Tg(t._query,e))}_parse(t){const e=Dd(t.firestore);return(function(l,c,m,p,g,T,E){let S;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ut(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){bS(E,T);const V=[];for(const C of E)V.push(SS(p,l,C));S={arrayValue:{values:V}}}else S=SS(p,l,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||bS(E,T),S=hM(m,c,E,T==="in"||T==="not-in");return Qt.create(g,T,S)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class Hy extends qy{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Hy(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:ue.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(a,l){let c=a;const m=l.getFlattenedFilters();for(const p of m)WI(c,p),c=Tg(c,p)})(t._query,e),new Fa(t.firestore,t.converter,Tg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gy extends XI{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Gy(t,e)}_apply(t){const e=(function(a,l,c){if(a.startAt!==null)throw new ut(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ut(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mc(l,c)})(t._query,this._field,this._direction);return new Fa(t.firestore,t.converter,jx(t._query,e))}}function ZI(r,t="asc"){const e=t,i=gl("orderBy",r);return Gy._create(i,e)}function SS(r,t,e){if(typeof(e=Ye(e))=="string"){if(e==="")throw new ut(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_A(t)&&e.indexOf("/")!==-1)throw new ut(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(se.fromString(e));if(!ht.isDocumentKey(i))throw new ut(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return fc(r,new ht(i))}if(e instanceof Oe)return fc(r,e._key);throw new ut(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ud(e)}.`)}function bS(r,t){if(!Array.isArray(r)||r.length===0)throw new ut(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function WI(r,t){const e=(function(a,l){for(const c of a)for(const m of c.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ut(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ut(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function tw(r,t,e){let i;return i=r?e&&(e.merge||e.mergeFields)?r.toFirestore(t,e):r.toFirestore(t):t,i}class gM{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=TM(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function yM(r){return new gM(r)}class _M{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=_c.provider,this._offlineComponentProvider={build:e=>new PI(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class vM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=_c.provider,this._offlineComponentProvider={build:e=>new XV(e,t==null?void 0:t.cacheSizeBytes)}}}function TM(r){return new _M(r==null?void 0:r.forceOwnership)}function EM(){return new vM}class Fu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Da extends $I{constructor(t,e,i,a,l,c){super(t,e,i,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(gl("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Da._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Da._jsonSchemaVersion="firestore/documentSnapshot/1.0",Da._jsonSchema={type:Qe("string",Da._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class Nf extends Da{data(t={}){return super.data(t)}}class $o{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Fu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Nf(this._firestore,this._userDataWriter,i.key,i,new Fu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ut(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((m=>{const p=new Nf(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Fu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const p=new Nf(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Fu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,T=-1;return m.type!==0&&(g=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),T=c.indexOf(m.doc.key)),{type:SM(m.type),doc:p,oldIndex:g,newIndex:T}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$o._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ty.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(e.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function SM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:Qe("string",$o._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Dd(t)}set(t,e,i){this._verifyNotCommitted();const a=Xp(t,this._firestore),l=tw(a.converter,e,i),c=BI(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,nn.none())),this}update(t,e,i,...a){this._verifyNotCommitted();const l=Xp(t,this._firestore);let c;return c=typeof(e=Ye(e))=="string"||e instanceof Cd?FI(this._dataReader,"WriteBatch.update",l._key,e,i,a):qI(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(c.toMutation(l._key,nn.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Xp(t,this._firestore);return this._mutations=this._mutations.concat(new Cc(e._key,nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ut(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xp(r,t){if((r=Ye(r)).firestore!==t)throw new ut(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Pg(r,t,e){r=Ds(r,Oe);const i=Ds(r.firestore,Ba),a=tw(r.converter,t,e),l=Dd(i);return xd(i,[BI(l,"setDoc",r._key,a,r.converter!==null,e).toMutation(r._key,nn.none())])}function _r(r,t,e,...i){r=Ds(r,Oe);const a=Ds(r.firestore,Ba),l=Dd(a);let c;return c=typeof(t=Ye(t))=="string"||t instanceof Cd?FI(l,"updateDoc",r._key,t,e,i):qI(l,"updateDoc",r._key,t),xd(a,[c.toMutation(r._key,nn.exists(!0))])}function ew(r){return xd(Ds(r.firestore,Ba),[new Cc(r._key,nn.none())])}function nw(r,...t){var g,T,E;r=Ye(r);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||ES(t[i])||(e=t[i++]);const a={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(ES(t[i])){const S=t[i];t[i]=(g=S.next)==null?void 0:g.bind(S),t[i+1]=(T=S.error)==null?void 0:T.bind(S),t[i+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,c,m;if(r instanceof Oe)c=Ds(r.firestore,Ba),m=yd(r._key.path),l={next:S=>{t[i]&&t[i](AM(c,r,S))},error:t[i+1],complete:t[i+2]};else{const S=Ds(r,Fa);c=Ds(S.firestore,Ba),m=S._query;const R=new YI(c);l={next:V=>{t[i]&&t[i](new $o(c,R,S,V))},error:t[i+1],complete:t[i+2]},pM(r._query)}const p=Uy(c);return eM(p,m,a,l)}function xd(r,t){const e=Uy(r);return nM(e,t)}function AM(r,t,e){const i=e.docs.get(t._key),a=new YI(r);return new Da(r,a,t._key,i,new Fu(e.hasPendingWrites,e.fromCache),t.converter)}function iw(r){return r=Ds(r,Ba),Uy(r),new bM(r,(t=>xd(r,t)))}(function(t,e=!0){LN(Tl),Xo(new Va("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),m=new Ba(new jN(i.getProvider("auth-internal")),new FN(c,i.getProvider("app-check-internal")),Rx(c,a),c);return l={useFetchStreams:e,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),wr(vS,TS,t),wr(vS,TS,"esm2020")})();const kg={apiKey:"AIzaSyCMQRCfBaVdJWgqMkaWrBHgHlMX51K7tbM",authDomain:"entrypoint-v2.firebaseapp.com",projectId:"entrypoint-v2",storageBucket:"entrypoint-v2.firebasestorage.app",messagingSenderId:"240107297798",appId:"1:240107297798:web:9e4a6c13a2751aead9b787"},yl=!!kg.apiKey&&!!kg.projectId;let Hu=null,Ke=null;if(yl){const r=$S(kg);Hu=PN(r),Ke=aM(r,{localCache:yM({tabManager:EM()})})}const sw=G.createContext(null);function IM({children:r}){const[t,e]=G.useState(null),[i,a]=G.useState(yl);G.useEffect(()=>!yl||!Hu?void 0:bD(Hu,p=>{e(p),a(!1)}),[]);const l=()=>HD(Hu,new Is),c=()=>AD(Hu);return I.jsx(sw.Provider,{value:{user:t,loading:i,signinGoogle:l,logout:c},children:r})}function Ky(){return G.useContext(sw)}function wM(){const{signinGoogle:r}=Ky(),[t,e]=G.useState(""),[i,a]=G.useState(!1),l=async()=>{e(""),a(!0);try{await r()}catch(c){e(c.message.replace("Firebase: ",""))}finally{a(!1)}};return I.jsxs("div",{className:"auth-container",children:[I.jsxs("div",{className:"auth-header",children:[I.jsx("div",{className:"auth-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"auth-title",children:"Lock-In"})]}),I.jsx("button",{className:"auth-google-btn",onClick:l,disabled:i,children:i?"...":"Sign in with Google"}),t&&I.jsx("div",{className:"auth-error",children:t})]})}function RM({children:r}){const{user:t,loading:e}=Ky();return e?I.jsx("div",{className:"loading",children:"loading..."}):t?r:I.jsx(wM,{})}const Na={prayer:{bg:"rgba(34, 139, 34, 0.12)",border:"#22a845",text:"#22a845"},spiritual:{bg:"rgba(234, 179, 8, 0.10)",border:"#ca8a04",text:"#ca8a04"},course:{bg:"rgba(37, 99, 235, 0.10)",border:"#2563eb",text:"#2563eb"},study:{bg:"rgba(8, 145, 178, 0.10)",border:"#0891b2",text:"#0891b2"},work:{bg:"rgba(180, 83, 9, 0.10)",border:"#b45309",text:"#b45309"},project:{bg:"rgba(124, 58, 237, 0.10)",border:"#7c3aed",text:"#7c3aed"},sport:{bg:"rgba(220, 38, 38, 0.10)",border:"#dc2626",text:"#dc2626"},therapy:{bg:"rgba(219, 39, 119, 0.10)",border:"#db2777",text:"#db2777"},rest:{bg:"rgba(100, 116, 139, 0.08)",border:"#64748b",text:"#64748b"},neutral:{bg:"rgba(163, 163, 163, 0.06)",border:"#a3a3a3",text:"#a3a3a3"}},rw=Object.keys(Na),CM=rw,DM=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function NM(r){const t=Math.floor(r/60)%24,e=Math.round(r%60),i=t>=12?"PM":"AM";return`${t%12||12}:${String(e).padStart(2,"0")} ${i}`}const _l=["#2d8a4e","#0055a4","#7c3aed","#b45309","#dc2626","#db2777","#0891b2","#64748b"],aw=()=>{const r={};return DM.forEach(t=>{r[t]={blocks:[]}}),r},Qy=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function Yy(r){const[t,e,i]=r.split("-").map(Number);return new Date(t,e-1,i)}function $y(r){const t=r.getFullYear(),e=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0");return`${t}-${e}-${i}`}function nc(){return $y(new Date)}function xM(r){const t=(r.getDay()+6)%7;return Qy[t]}function ow(r,t,e){return r>=t&&r<=e}function nd(r){return Yy(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function VM(r,t){return`${nd(r)}  ${nd(t)}`}function MM(r){const[t,e,i]=r.split("-");return`${i}-${e}-${t}`}function OM(r,t){const e=Yy(r),i=(e.getDay()+6)%7,l=Qy.indexOf(t)-i,c=new Date(e);return c.setDate(c.getDate()+l),$y(c)}function PM(r,t){const e=[],i=new Date(r,t,1);for(;i.getMonth()===t;)e.push({iso:$y(i),date:new Date(i)}),i.setDate(i.getDate()+1);return e}const kM=new Date().getFullYear(),LM={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};function AS(r){const t=r.trim().match(/^(\w{3})\s+(\d{1,2})$/);if(!t)return null;const e=LM[t[1]],i=parseInt(t[2],10);if(e==null||isNaN(i))return null;const a=new Date(kM,e,i),l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),m=String(a.getDate()).padStart(2,"0");return`${l}-${c}-${m}`}function UM(r){if(!r)return{startDate:"",endDate:""};const t=r.split(/\u2192|->||/).map(a=>a.trim()),e=AS(t[0]),i=t[1]?AS(t[1]):e;return{startDate:e||"",endDate:i||""}}function zM(r){return{id:r.id||crypto.randomUUID(),activity:r.activity||"",type:r.type||"neutral",icon:r.icon||"",duration:r.duration||60,segment:null,offsetMinutes:0,time:r.time||"08:00",tasks:[]}}function jM(r,t){var c;const{startDate:e,endDate:i}=UM(r.dates),a={},l=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const m of l){const p=(c=r.days)==null?void 0:c[m];a[m]={blocks:((p==null?void 0:p.blocks)||[]).map(zM)}}return{id:r.id||crypto.randomUUID(),label:r.label||`Plan ${t+1}`,color:_l[t%_l.length],startDate:e,endDate:i,order:r.order??t,routine:a}}function BM(){const t=localStorage.getItem("entrypoint-v2-tabs");if(!t)return null;try{const e=JSON.parse(t);return!Array.isArray(e)||e.length===0?null:e.map(jM)}catch{return null}}function qM(){const r=!!localStorage.getItem("entrypoint-v2-tabs"),t=!!localStorage.getItem("entrypoint-v2-plans");return r&&!t}const id="entrypoint-v2-plans",FM="entrypoint-v2-tabs";function IS(){if(qM()){const r=BM();if(r)return lw(r),r}try{const r=localStorage.getItem(id);if(r){const t=JSON.parse(r);if(Array.isArray(t)&&t.length>0)return t}}catch{}return[]}function lw(r){localStorage.setItem(id,JSON.stringify(r))}async function HM(r){const t=`entrypoint-v2-migrated-${r}`;if(localStorage.getItem(t))return;let e=null;try{const i=localStorage.getItem(id);if(i){const a=JSON.parse(i);Array.isArray(a)&&a.length>0&&(e=a)}}catch{}if(e&&e.length>0){const i=iw(Ke);for(const a of e)i.set(Tn(Ke,"users",r,"plans",a.id),{...a});await i.commit()}localStorage.setItem(t,"1"),localStorage.removeItem(id),localStorage.removeItem(FM)}function GM(){const[r,t]=G.useState(()=>IS()),[e,i]=G.useState(()=>{var S;return((S=IS()[0])==null?void 0:S.id)||null}),a=r.find(S=>S.id===e)||r[0]||null;a&&e!==a.id&&i(a.id);const l=G.useCallback(S=>{t(R=>{const V=typeof S=="function"?S(R):S;return lw(V),V})},[]),c=G.useCallback(S=>{const R=crypto.randomUUID(),V={id:R,label:S.label||"New Plan",color:S.color||_l[0],startDate:S.startDate||"",endDate:S.endDate||"",order:S.order??r.length,routine:S.routine||aw()};return l(C=>[...C,V]),i(R),R},[l,r.length]),m=G.useCallback((S,R)=>{l(V=>V.map(C=>C.id===S?{...C,...R}:C))},[l]),p=G.useCallback(S=>{l(R=>R.filter(V=>V.id!==S)),e===S&&i(null)},[e,l]),g=G.useCallback((S,R,V)=>{const C=S||(a==null?void 0:a.id);C&&l(z=>z.map(Q=>Q.id===C?{...Q,routine:{...Q.routine,[R]:{...Q.routine[R],blocks:V}}}:Q))},[a,l]),T=G.useCallback(S=>r.find(R=>R.startDate&&R.endDate&&ow(S,R.startDate,R.endDate))||null,[r]),E=G.useCallback(S=>{const R=new Set(r.map(C=>C.id)),V=S.filter(C=>!R.has(C.id));V.length!==0&&l(C=>[...C,...V.map((z,Q)=>({...z,order:C.length+Q}))])},[r,l]);return{plans:r,loading:!1,activePlan:a,activePlanId:e,setActivePlanId:i,createPlan:c,updatePlan:m,deletePlan:p,updateRoutineBlocks:g,getPlanForDate:T,mergePlans:E}}function KM(r){const[t,e]=G.useState([]),[i,a]=G.useState(!0),[l,c]=G.useState(null),m=t.find(V=>V.id===l)||t[0]||null;m&&l!==m.id&&c(m.id),G.useEffect(()=>{if(!r){a(!1);return}HM(r).catch(()=>{});const V=JI(UI(Ke,"users",r,"plans"),ZI("order"));return nw(V,z=>{e(z.docs.map(Q=>({id:Q.id,...Q.data()}))),a(!1)},()=>a(!1))},[r]),G.useEffect(()=>{t.length>0&&!l&&c(t[0].id)},[t,l]);const p=G.useCallback(async V=>{const C=crypto.randomUUID(),z={id:C,label:V.label||"New Plan",color:V.color||_l[0],startDate:V.startDate||"",endDate:V.endDate||"",order:V.order??t.length,routine:V.routine||aw()};return await Pg(Tn(Ke,"users",r,"plans",C),z),c(C),C},[r,t.length]),g=G.useCallback(async(V,C)=>{await _r(Tn(Ke,"users",r,"plans",V),C)},[r]),T=G.useCallback(async V=>{await ew(Tn(Ke,"users",r,"plans",V)),l===V&&c(null)},[r,l]),E=G.useCallback(async(V,C,z)=>{const Q=V||(m==null?void 0:m.id);Q&&await _r(Tn(Ke,"users",r,"plans",Q),{[`routine.${C}.blocks`]:z})},[r,m]),S=G.useCallback(V=>t.find(C=>C.startDate&&C.endDate&&V>=C.startDate&&V<=C.endDate)||null,[t]),R=G.useCallback(async V=>{const C=new Set(t.map(at=>at.id)),z=V.filter(at=>!C.has(at.id));if(z.length===0)return;const Q=iw(Ke);z.forEach((at,rt)=>{const mt={...at,order:t.length+rt};Q.set(Tn(Ke,"users",r,"plans",mt.id),mt)}),await Q.commit()},[r,t]);return{plans:t,loading:i,activePlan:m,activePlanId:l,setActivePlanId:c,createPlan:p,updatePlan:g,deletePlan:T,updateRoutineBlocks:E,getPlanForDate:S,mergePlans:R}}function QM(r){return yl&&r?KM(r):GM()}const uw="entrypoint-v2-pipelines";function YM(){try{const r=localStorage.getItem(uw);if(r){const t=JSON.parse(r);if(Array.isArray(t))return t}}catch{}return[]}function $M(r){localStorage.setItem(uw,JSON.stringify(r))}function XM(){const[r,t]=G.useState(()=>YM()),e=G.useCallback(S=>{t(R=>{const V=typeof S=="function"?S(R):S;return $M(V),V})},[]),i=G.useCallback(S=>{const R=crypto.randomUUID(),V={id:R,title:S||"New Section",order:r.length,collapsed:!1,items:[]};return e(C=>[...C,V]),R},[e,r.length]),a=G.useCallback((S,R)=>{e(V=>V.map(C=>C.id===S?{...C,...R}:C))},[e]),l=G.useCallback(S=>{e(R=>R.filter(V=>V.id!==S))},[e]),c=G.useCallback(S=>{e(S.map((R,V)=>({...R,order:V})))},[e]),m=G.useCallback(S=>{e(R=>R.map(V=>V.id===S?{...V,collapsed:!V.collapsed}:V))},[e]),p=G.useCallback((S,R)=>{const V={id:crypto.randomUUID(),icon:"",title:"",description:"",...R};e(C=>C.map(z=>z.id===S?{...z,items:[...z.items||[],V]}:z))},[e]),g=G.useCallback((S,R,V)=>{e(C=>C.map(z=>z.id===S?{...z,items:(z.items||[]).map(Q=>Q.id===R?{...Q,...V}:Q)}:z))},[e]),T=G.useCallback((S,R)=>{e(V=>V.map(C=>C.id===S?{...C,items:(C.items||[]).filter(z=>z.id!==R)}:C))},[e]),E=G.useCallback(S=>{const R=new Set(r.map(C=>C.id)),V=S.filter(C=>!R.has(C.id));V.length!==0&&e(C=>[...C,...V.map((z,Q)=>({...z,order:C.length+Q}))])},[r,e]);return{sections:r,loading:!1,addSection:i,updateSection:a,deleteSection:l,reorderSections:c,toggleCollapse:m,addItem:p,updateItem:g,deleteItem:T,mergeSections:E}}function JM(r){const[t,e]=G.useState([]),[i,a]=G.useState(!0);G.useEffect(()=>{if(!r){a(!1);return}const V=JI(UI(Ke,"users",r,"pipelines"),ZI("order"));return nw(V,z=>{e(z.docs.map(Q=>({id:Q.id,...Q.data()}))),a(!1)},()=>a(!1))},[r]);const l=G.useCallback(async V=>{const C=crypto.randomUUID(),z={id:C,title:V||"New Section",order:t.length,collapsed:!1,items:[]};return await Pg(Tn(Ke,"users",r,"pipelines",C),z),C},[r,t.length]),c=G.useCallback(async(V,C)=>{await _r(Tn(Ke,"users",r,"pipelines",V),C)},[r]),m=G.useCallback(async V=>{await ew(Tn(Ke,"users",r,"pipelines",V))},[r]),p=G.useCallback(async V=>{for(let C=0;C<V.length;C++)await _r(Tn(Ke,"users",r,"pipelines",V[C].id),{order:C})},[r]),g=G.useCallback(async V=>{const C=t.find(z=>z.id===V);C&&await _r(Tn(Ke,"users",r,"pipelines",V),{collapsed:!C.collapsed})},[r,t]),T=G.useCallback(async(V,C)=>{const z=t.find(at=>at.id===V);if(!z)return;const Q={id:crypto.randomUUID(),icon:"",title:"",description:"",...C};await _r(Tn(Ke,"users",r,"pipelines",V),{items:[...z.items||[],Q]})},[r,t]),E=G.useCallback(async(V,C,z)=>{const Q=t.find(at=>at.id===V);Q&&await _r(Tn(Ke,"users",r,"pipelines",V),{items:(Q.items||[]).map(at=>at.id===C?{...at,...z}:at)})},[r,t]),S=G.useCallback(async(V,C)=>{const z=t.find(Q=>Q.id===V);z&&await _r(Tn(Ke,"users",r,"pipelines",V),{items:(z.items||[]).filter(Q=>Q.id!==C)})},[r,t]),R=G.useCallback(async V=>{const C=new Set(t.map(Q=>Q.id)),z=V.filter(Q=>!C.has(Q.id));if(z.length!==0)for(let Q=0;Q<z.length;Q++){const at={...z[Q],order:t.length+Q};await Pg(Tn(Ke,"users",r,"pipelines",at.id),at)}},[r,t]);return{sections:t,loading:i,addSection:l,updateSection:c,deleteSection:m,reorderSections:p,toggleCollapse:g,addItem:T,updateItem:E,deleteItem:S,mergeSections:R}}function ZM(r){return yl&&r?JM(r):XM()}function WM(){const[r,t]=G.useState(nc()),e=nc(),[i,a]=G.useState(()=>new Date().getFullYear()),[l,c]=G.useState(()=>new Date().getMonth()),m=G.useCallback(()=>{c(E=>E===0?(a(S=>S-1),11):E-1)},[]),p=G.useCallback(()=>{c(E=>E===11?(a(S=>S+1),0):E+1)},[]),g=G.useCallback(()=>{const E=new Date;a(E.getFullYear()),c(E.getMonth()),t(nc())},[]),T=G.useCallback((E,S)=>{a(E),c(S)},[]);return{selectedDate:r,setSelectedDate:t,today:e,viewYear:i,setViewYear:a,viewMonth:l,setViewMonth:c,prevMonth:m,nextMonth:p,goToday:g,setViewYearMonth:T}}const cw="entrypoint-v2-custom-types",tO=["#0d9488","#84cc16","#e11d48","#6366f1","#f97316","#06b6d4","#a21caf","#65a30d","#be185d","#1d4ed8","#c026d3","#ea580c","#0f766e","#4f46e5","#15803d","#9333ea"],eO=new Set(Object.values(Na).map(r=>r.border.toLowerCase())),Jp=tO.filter(r=>!eO.has(r.toLowerCase()));function nO(r){if(r.startsWith("hsl"))return{bg:r.replace(")",", 0.10)").replace("hsl(","hsla("),border:r,text:r};const t=parseInt(r.slice(1,3),16),e=parseInt(r.slice(3,5),16),i=parseInt(r.slice(5,7),16);return{bg:`rgba(${t}, ${e}, ${i}, 0.10)`,border:r,text:r}}function iO(r){if(r<Jp.length)return Jp[r];const t=((r-Jp.length)*137.5+30)%360;return`hsl(${Math.round(t)}, 65%, 50%)`}function sO(){try{const r=localStorage.getItem(cw);return r?JSON.parse(r).map(e=>({key:e.key,name:e.name})):[]}catch{return[]}}function Zp(r){localStorage.setItem(cw,JSON.stringify(r.map(t=>({key:t.key,name:t.name}))))}function rO(){const[r,t]=G.useState(sO),e=G.useMemo(()=>r.map((m,p)=>{const g=iO(p);return{...m,color:g,colors:nO(g)}}),[r]),i=G.useCallback(m=>{const p=m.toLowerCase().replace(/\s+/g,"-");return t(g=>{if(g.find(E=>E.key===p))return g;const T=[...g,{key:p,name:m}];return Zp(T),T}),p},[]),a=G.useCallback(m=>{t(p=>{const g=p.filter(T=>T.key!==m);return Zp(g),g})},[]),l=G.useCallback(m=>{t(p=>{const g=new Set(p.map(S=>S.key)),T=m.filter(S=>!g.has(S.key));if(T.length===0)return p;const E=[...p,...T.map(S=>({key:S.key,name:S.name}))];return Zp(E),E})},[]),c=G.useMemo(()=>e.reduce((m,p)=>(m[p.key]=p.colors,m),{}),[e]);return{customTypes:e,customTypeColors:c,addCustomType:i,removeCustomType:a,mergeCustomTypes:l}}const hw="entrypoint-v2-location";function aO(){try{const r=localStorage.getItem(hw);return r?JSON.parse(r):null}catch{return null}}function wS(r){localStorage.setItem(hw,JSON.stringify(r))}async function oO(r,t){const a=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${r}&lon=${t}&format=json&accept-language=en`)).json()).address||{},l=a.city||a.town||a.village||a.county||"Unknown",c=a.country||"Unknown";return{city:l,country:c}}function lO(){const[r,t]=G.useState(aO),[e,i]=G.useState(!1),[a,l]=G.useState(!1),c=G.useCallback(m=>{wS(m),t(m),l(!1)},[]);return G.useEffect(()=>{if(!r){if(!navigator.geolocation){l(!0);return}i(!0),navigator.geolocation.getCurrentPosition(async m=>{try{const{latitude:p,longitude:g}=m.coords,{city:T,country:E}=await oO(p,g),S={city:T,country:E,lat:p,lng:g};wS(S),t(S)}catch{l(!0)}finally{i(!1)}},()=>{l(!0),i(!1)},{timeout:1e4})}},[r]),{location:r,setLocation:c,hasLocation:!!r,detecting:e,geoFailed:a}}function fw({title:r,message:t,confirmLabel:e="Delete",onConfirm:i,onClose:a}){return G.useEffect(()=>{const l=c=>{c.key==="Escape"&&a()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[a]),I.jsx("div",{className:"modal-overlay",onClick:a,children:I.jsxs("div",{className:"modal",onClick:l=>l.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:r}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 20px",lineHeight:1.5},children:t}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{className:"btn-secondary",onClick:a,children:"Cancel"}),I.jsx("button",{className:"btn-danger",onClick:i,children:e})]})]})})}function uO({plans:r,activePlanId:t,onSelect:e,onCreate:i,onEdit:a,onDelete:l}){const[c,m]=G.useState(null),[p,g]=G.useState(null),T=G.useRef(null);G.useEffect(()=>{if(!c)return;const R=V=>{V.key==="Escape"&&m(null)};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[c]);const E=(R,V)=>{R.preventDefault(),m({x:R.clientX,y:R.clientY,plan:V})},S=R=>{const V=T.current;V&&V.scrollWidth>V.clientWidth&&(R.preventDefault(),V.scrollLeft+=R.deltaY)};return I.jsxs("div",{className:"plan-sidebar",children:[I.jsxs("div",{className:"plan-list",ref:T,onWheel:S,children:[r.map(R=>I.jsxs("button",{className:`plan-item ${R.id===t?"active":""}`,onClick:()=>e(R.id),onContextMenu:V=>E(V,R),children:[I.jsx("span",{className:"plan-dot",style:{background:R.color}}),I.jsxs("div",{className:"plan-info",children:[I.jsx("span",{className:"plan-label",children:R.label}),R.startDate&&R.endDate&&I.jsx("span",{className:"plan-dates",children:VM(R.startDate,R.endDate)})]})]},R.id)),I.jsx("button",{className:"plan-item plan-add",onClick:i,children:"+ New Plan"})]}),c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:()=>m(null)}),I.jsxs("div",{className:"context-menu",style:{top:c.y,left:c.x},children:[I.jsx("button",{onClick:()=>{a(c.plan),m(null)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{g(c.plan),m(null)},children:"Delete"})]})]}),p&&I.jsx(fw,{title:"Delete Plan",message:`Delete "${p.label}"? This cannot be undone.`,onConfirm:()=>{l(p.id),g(null)},onClose:()=>g(null)})]})}function cO(r,t,e,i){if(!r||!t)return null;for(const a of e)if(a.id!==i&&!(!a.startDate||!a.endDate)&&r<=a.endDate&&t>=a.startDate)return a;return null}function RS({plan:r,plans:t=[],onSave:e,onClose:i}){const a=!!r,[l,c]=G.useState((r==null?void 0:r.label)||""),[m,p]=G.useState((r==null?void 0:r.color)||_l[0]),[g,T]=G.useState((r==null?void 0:r.startDate)||""),[E,S]=G.useState((r==null?void 0:r.endDate)||""),[R,V]=G.useState(""),C=z=>{if(z.preventDefault(),V(""),E<g){V("End date must be after start date.");return}const Q=cO(g,E,t,r==null?void 0:r.id);if(Q){V(`Overlaps with "${Q.label}" (${Q.startDate}  ${Q.endDate}).`);return}e({label:l.trim(),color:m,startDate:g,endDate:E})};return I.jsx("div",{className:"modal-overlay",onClick:i,onKeyDown:z=>{z.key==="Escape"&&i()},children:I.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),children:[I.jsx("h3",{className:"modal-title",children:a?"Edit Plan":"New Plan"}),I.jsxs("form",{onSubmit:C,className:"modal-form",children:[I.jsxs("label",{className:"modal-label",children:["Label",I.jsx("input",{className:"modal-input",value:l,onChange:z=>c(z.target.value),placeholder:"e.g. Ramadan",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start Date",I.jsx("input",{className:"modal-input",type:"date",value:g,onChange:z=>T(z.target.value),required:!0})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End Date",I.jsx("input",{className:"modal-input",type:"date",value:E,onChange:z=>S(z.target.value),required:!0})]})]}),R&&I.jsx("div",{className:"plan-error",children:R}),I.jsxs("div",{className:"modal-label",children:["Color",I.jsx("div",{className:"color-grid",children:_l.map(z=>I.jsx("button",{type:"button",className:`color-btn ${m===z?"active":""}`,style:{background:z},onClick:()=>p(z)},z))})]}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const hO=["January","February","March","April","May","June","July","August","September","October","November","December"],fO=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function dO({viewYear:r,viewMonth:t,selectedDate:e,today:i,plans:a,highlightDate:l,onPrevMonth:c,onNextMonth:m,onGoToday:p,onSelectDate:g,onPlanClick:T}){const E=G.useMemo(()=>{const R=PM(r,t),V=(R[0].date.getDay()+6)%7;return[...Array.from({length:V},()=>null),...R]},[r,t]),S=G.useMemo(()=>{const R={};for(const V of E){if(!V)continue;const C=a.find(z=>z.startDate&&z.endDate&&ow(V.iso,z.startDate,z.endDate));C&&(R[V.iso]=C)}return R},[E,a]);return I.jsxs("div",{className:"calendar-view",children:[I.jsxs("div",{className:"cal-header",children:[I.jsx("button",{className:"cal-nav",onClick:c,children:""}),I.jsxs("div",{className:"cal-title",children:[I.jsx("span",{className:"cal-month",children:hO[t]}),I.jsx("span",{className:"cal-year",children:r})]}),I.jsx("button",{className:"cal-nav",onClick:m,children:""}),I.jsx("button",{className:"cal-today-btn",onClick:p,children:"Today"})]}),I.jsxs("div",{className:"cal-grid",children:[fO.map(R=>I.jsx("div",{className:"cal-dow",children:R},R)),E.map((R,V)=>{if(!R)return I.jsx("div",{className:"cal-cell cal-blank"},`blank-${V}`);const C=S[R.iso],z=R.iso===i,Q=R.iso===e,at=R.iso===l;return I.jsxs("button",{className:`cal-cell ${z?"cal-today":""} ${Q?"cal-selected":""} ${C?"cal-has-plan":""} ${at?"cal-highlight":""}`,style:C?{"--plan-color":C.color}:void 0,onClick:()=>g(R.iso),children:[I.jsx("span",{className:"cal-day-num",children:R.date.getDate()}),C&&I.jsx("span",{className:"cal-plan-dot",style:{background:C.color}})]},R.iso)})]}),a.length>0&&I.jsx("div",{className:"cal-plan-legend",children:a.filter(R=>R.startDate&&R.endDate).map(R=>I.jsxs("button",{className:"cal-plan-chip",onClick:()=>T==null?void 0:T(R),children:[I.jsx("span",{className:"cal-plan-chip-dot",style:{background:R.color}}),I.jsx("span",{children:R.label})]},R.id))})]})}const Qi=60,sd=5,ku=15,mf=52,CS=8;function Uo(r){return Math.max(0,Math.min(1435,Math.round(r/sd)*sd))}function Yi(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function DS({block:r,top:t,height:e,col:i=0,totalCols:a=1,isNew:l,isPrayer:c,extraTypeColors:m={},onEdit:p,onDelete:g,onTimeChange:T,onResize:E,onToggleTask:S}){var jt;const R=G.useRef(null),V=G.useRef(null),C=G.useRef(null),z=G.useRef(null),Q=G.useRef(null),[at,rt]=G.useState(null),mt=Na[r.type]||m[r.type]||Na.neutral,_t=c?"#2d8a4e":mt.text==="#94a3b8"?"#b0b0ba":mt.text,ft=r.type==="prayer"||c?600:400,D=t/Qi*60,A=e/Qi*60,N=Yi(Math.min(D+A,1440)),M=r.time,O=`calc(100% - ${mf}px - ${CS}px)`,U=`calc((${O}) / ${a})`,x=`calc(${mf}px + (${O}) * ${i} / ${a})`,Yt=G.useCallback((Z,pt)=>{const wt=R.current,kt=V.current;if(wt){if(pt==="move"){const Ct=t+Z;wt.style.top=`${Ct}px`,wt.style.left=`${mf}px`,wt.style.width=`calc(100% - ${mf}px - ${CS}px)`,wt.style.zIndex="10000",wt.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",wt.style.opacity="0.85",wt.style.cursor="grabbing";const Xt=Uo((t+Z)/Qi*60);kt&&(kt.textContent=`${Yi(Xt)}  ${Yi(Math.min(Xt+A,1440))}`)}else if(pt==="top"){const Ct=t+Z,Xt=Math.max(e-Z,ku/60*Qi);wt.style.top=`${Ct}px`,wt.style.height=`${Math.max(Xt,24)}px`,wt.style.zIndex="10000",wt.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",wt.style.opacity="0.85";const ke=Uo(D+Z/Qi*60);kt&&(kt.textContent=`${Yi(ke)}  ${Yi(Math.min(D+A,1440))}`)}else if(pt==="bottom"){const Ct=Math.max(e+Z,ku/60*Qi);wt.style.height=`${Math.max(Ct,24)}px`,wt.style.zIndex="10000",wt.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",wt.style.opacity="0.85";const Xt=D+Math.max(ku,Uo(A+Z/Qi*60));kt&&(kt.textContent=`${Yi(D)}  ${Yi(Math.min(Xt,1440))}`)}}},[t,e,D,A]),Zt=G.useCallback(()=>{const Z=R.current;if(!Z)return;Z.style.top=`${t}px`,Z.style.height=`${Math.max(e,24)}px`,Z.style.left=x,Z.style.width=U,Z.style.zIndex=c?"10":String(Math.ceil(t)+1),Z.style.boxShadow="none",Z.style.opacity="1",Z.style.cursor=c?"default":"pointer";const pt=e<36;V.current&&(V.current.textContent=pt?M:`${M}  ${N}`)},[t,e,x,U,M,N,c]);G.useEffect(()=>{const Z=e<36;V.current&&(V.current.textContent=Z?M:`${M}  ${N}`)},[M,N,e]);const J=300,lt=10,Tt=Z=>{if(c||Z.button!==0)return;if(Z.pointerType==="touch"){const wt=Z.pointerId,kt=Z.clientY;Q.current={startY:kt,tid:setTimeout(()=>{var Ct,Xt;Q.current=null,C.current={y:kt,mode:"move",moved:!1,touch:!0},(Ct=R.current)==null||Ct.setPointerCapture(wt),(Xt=navigator.vibrate)==null||Xt.call(navigator,20)},J)}}else C.current={y:Z.clientY,mode:"move",moved:!1,touch:!1},R.current.setPointerCapture(Z.pointerId)},xt=Z=>{if(Q.current){Math.abs(Z.clientY-Q.current.startY)>lt&&(clearTimeout(Q.current.tid),Q.current=null);return}if(!C.current)return;const pt=Z.clientY-C.current.y;!C.current.moved&&Math.abs(pt)>4&&(C.current.moved=!0),C.current.moved&&(z.current&&cancelAnimationFrame(z.current),z.current=requestAnimationFrame(()=>Yt(pt,C.current.mode)))},Ut=Z=>{if(Q.current){clearTimeout(Q.current.tid),Q.current=null,Z.pointerType==="touch"&&!c&&p(r);return}if(!C.current)return;const pt=Z.clientY-C.current.y,{mode:wt,moved:kt}=C.current;if(C.current=null,z.current&&cancelAnimationFrame(z.current),Zt(),!kt){c||p(r);return}if(wt==="move"){const Ct=Uo((t+pt)/Qi*60);T(r.id,Yi(Ct))}else if(wt==="top"){const Ct=Uo(D+pt/Qi*60),Xt=Math.max(ku,Math.round((D+A-Ct)/sd)*sd);E(r.id,Yi(Ct),Xt)}else if(wt==="bottom"){const Ct=Math.max(ku,Uo(A+pt/Qi*60));E(r.id,Yi(D),Ct)}},k=()=>{Q.current&&(clearTimeout(Q.current.tid),Q.current=null),C.current&&(C.current=null,Zt())},et=Z=>pt=>{if(c||(pt.stopPropagation(),pt.button!==0))return;if(pt.pointerType==="touch"){const kt=pt.pointerId,Ct=pt.clientY;Q.current={startY:Ct,tid:setTimeout(()=>{var Xt,ke;Q.current=null,C.current={y:Ct,mode:Z,moved:!0,touch:!0},(Xt=pt.target)==null||Xt.setPointerCapture(kt),(ke=navigator.vibrate)==null||ke.call(navigator,20)},J)}}else C.current={y:pt.clientY,mode:Z,moved:!0,touch:!1},pt.target.setPointerCapture(pt.pointerId)},Y=Z=>{c||(Z.preventDefault(),Z.stopPropagation(),rt({x:Z.clientX,y:Z.clientY}))},ot=()=>rt(null);G.useEffect(()=>{if(!at)return;const Z=pt=>{pt.key==="Escape"&&ot()};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[at]);const dt=!c&&((jt=r.tasks)==null?void 0:jt.length)>0,bt=dt?r.tasks.filter(Z=>Z.done).length:0,Mt=e<36,ee=dt&&e>=60;return I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:R,className:`timeline-block ${l?"new-block":""} ${c?"prayer-block":""}`,style:{top:t,height:Math.max(e,24),left:x,width:U,right:"auto",background:c?"rgba(34, 139, 34, 0.10)":mt.bg,borderLeft:`3px solid ${c?"#2d8a4e":mt.border}`,zIndex:c?10:Math.ceil(t)+1,cursor:c?"default":"pointer",transition:"box-shadow 0.15s"},onPointerDown:Tt,onPointerMove:xt,onPointerUp:Ut,onPointerCancel:k,onContextMenu:Y,children:[!c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"resize-handle resize-handle-top",onPointerDown:et("top"),onPointerMove:xt,onPointerUp:Ut}),I.jsx("div",{className:"resize-handle resize-handle-bottom",onPointerDown:et("bottom"),onPointerMove:xt,onPointerUp:Ut})]}),Mt?I.jsxs("div",{className:"block-compact",children:[I.jsx("span",{ref:V,className:"block-time-sm",children:M}),I.jsx("span",{className:"block-icon-sm",children:r.icon}),I.jsx("span",{className:"block-act-sm",style:{color:_t,fontWeight:ft},children:r.activity}),dt&&I.jsxs("span",{className:"block-task-badge",children:[bt,"/",r.tasks.length]})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:V,className:"block-time-sm",children:[M,"  ",N]}),I.jsxs("div",{className:"block-row",children:[I.jsx("span",{className:"block-icon-sm",children:r.icon}),I.jsx("span",{className:"block-act",style:{color:_t,fontWeight:ft},children:r.activity}),dt&&!ee&&I.jsxs("span",{className:"block-task-badge",children:[bt,"/",r.tasks.length]})]}),ee&&I.jsx("div",{className:"block-tasks",onWheel:Z=>{const pt=Z.currentTarget;pt.scrollHeight>pt.clientHeight&&Z.stopPropagation()},children:r.tasks.map(Z=>I.jsxs("label",{className:`block-task-item ${Z.done?"done":""}`,onPointerDown:pt=>pt.stopPropagation(),onClick:pt=>pt.stopPropagation(),children:[I.jsx("input",{type:"checkbox",checked:Z.done,onChange:()=>S==null?void 0:S(r.id,Z.id)}),I.jsx("span",{children:Z.text})]},Z.id))})]})]}),at&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:Z=>{Z.stopPropagation(),ot()}}),I.jsxs("div",{className:"context-menu",style:{top:at.y,left:at.x},onClick:Z=>Z.stopPropagation(),children:[I.jsx("button",{onClick:()=>{ot(),p(r)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{ot(),g(r.id)},children:"Delete"})]})]})]})}const mO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function NS(r){return`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function pO({block:r,defaultTime:t,segments:e,onSave:i,onDelete:a,onClose:l,customTypes:c=[],customTypeColors:m={},onAddCustomType:p,onRemoveCustomType:g}){G.useEffect(()=>{if(!r)return;const Y=ot=>{ot.key==="Delete"&&(ot.preventDefault(),a(r.id))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[r,a]);const T=!!r,E=(r==null?void 0:r.time)||t||"08:00",S=(r==null?void 0:r.duration)||60,[R,V]=G.useState(E),[C,z]=G.useState(()=>{const[Y,ot]=E.split(":").map(Number),dt=Y*60+ot+S;return NS(dt)}),[Q,at]=G.useState((r==null?void 0:r.activity)||""),[rt,mt]=G.useState((r==null?void 0:r.type)||"neutral"),[_t,ft]=G.useState((r==null?void 0:r.icon)||""),[D,A]=G.useState((r==null?void 0:r.tasks)||[]),[N,M]=G.useState(""),[O,U]=G.useState(!1),[x,Yt]=G.useState(!1),[Zt,J]=G.useState(""),lt=new Set(c.map(Y=>Y.key)),Tt=[...CM,...c.map(Y=>Y.key)],xt={...Na,...m},Ut=xt[rt]||Na.neutral,k=()=>{const[Y,ot]=R.split(":").map(Number),[dt,bt]=C.split(":").map(Number);return Math.max(15,dt*60+bt-(Y*60+ot))},et=Y=>{Y.preventDefault(),i({id:(r==null?void 0:r.id)||crypto.randomUUID(),time:R,activity:Q.trim(),type:rt,icon:_t,duration:k(),segment:null,offsetMinutes:0,tasks:D})};return I.jsx("div",{className:"modal-overlay",onClick:l,onKeyDown:Y=>{Y.key==="Escape"&&l()},children:I.jsxs("div",{className:"modal",onClick:Y=>{Y.stopPropagation(),O&&U(!1)},children:[I.jsx("h3",{className:"modal-title",children:T?"Edit Block":"Add Block"}),I.jsxs("form",{onSubmit:et,className:"modal-form",children:[I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start",I.jsx("input",{className:"modal-input",value:R,onChange:Y=>{const ot=Y.target.value;V(ot);const[dt,bt]=R.split(":").map(Number),[Mt,ee]=C.split(":").map(Number),jt=Mt*60+ee-(dt*60+bt);if(jt>0&&/^\d{2}:\d{2}$/.test(ot)){const[Z,pt]=ot.split(":").map(Number);z(NS(Z*60+pt+jt))}},placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End",I.jsx("input",{className:"modal-input",value:C,onChange:Y=>z(Y.target.value),placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]})]}),I.jsxs("label",{className:"modal-label",children:["Activity",I.jsx("input",{className:"modal-input",value:Q,onChange:Y=>at(Y.target.value),placeholder:"e.g. Quran revision",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-label",children:["Type",I.jsxs("div",{className:"modal-row",style:{gap:6,alignItems:"center"},children:[I.jsxs("div",{className:"type-picker",style:{flex:1},onClick:Y=>Y.stopPropagation(),children:[I.jsxs("button",{type:"button",className:"type-picker-btn",onClick:()=>U(Y=>!Y),children:[I.jsx("span",{className:"type-color-dot",style:{background:Ut.border}}),I.jsx("span",{children:rt.charAt(0).toUpperCase()+rt.slice(1).replace(/-/g," ")}),I.jsx("span",{className:"type-picker-arrow",children:O?"":""})]}),O&&I.jsx("div",{className:"type-dropdown",children:Tt.map(Y=>{const ot=xt[Y]||Na.neutral,dt=lt.has(Y);return I.jsxs("div",{className:`type-dropdown-item${Y===rt?" active":""}`,children:[I.jsxs("button",{type:"button",className:"type-dropdown-select",onClick:()=>{mt(Y),U(!1)},children:[I.jsx("span",{className:"type-color-dot",style:{background:ot.border}}),I.jsx("span",{children:Y.charAt(0).toUpperCase()+Y.slice(1).replace(/-/g," ")})]}),dt&&g&&I.jsx("button",{type:"button",className:"type-delete-btn",onClick:()=>{g(Y),rt===Y&&mt("neutral")},children:""})]},Y)})})]}),I.jsx("button",{type:"button",className:"btn-add-type",onClick:()=>Yt(Y=>!Y),title:"Add custom type",children:"+"})]})]}),x&&I.jsxs("div",{className:"new-type-form",children:[I.jsx("input",{className:"modal-input",placeholder:"Type name",value:Zt,onChange:Y=>J(Y.target.value),onKeyDown:Y=>{if(Y.key==="Enter"&&Zt.trim()&&p){Y.preventDefault();const ot=p(Zt.trim());mt(ot),J(""),Yt(!1)}}}),I.jsx("button",{type:"button",className:"btn-primary btn-sm",disabled:!Zt.trim(),onClick:()=>{if(!Zt.trim()||!p)return;const Y=p(Zt.trim());mt(Y),J(""),Yt(!1)},children:"Add"})]}),I.jsxs("div",{className:"modal-label",children:["Icon",I.jsx("div",{className:"icon-grid",children:mO.map(Y=>I.jsx("button",{type:"button",className:`icon-btn ${_t===Y?"active":""}`,onClick:()=>ft(Y),children:Y},Y))})]}),I.jsxs("div",{className:"modal-label",children:["Tasks",I.jsxs("div",{className:"task-list-editor",children:[D.map((Y,ot)=>I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{type:"checkbox",checked:Y.done,onChange:()=>{const dt=[...D];dt[ot]={...Y,done:!Y.done},A(dt)}}),I.jsx("input",{className:`modal-input task-edit-input${Y.done?" task-done":""}`,value:Y.text,onChange:dt=>{const bt=[...D];bt[ot]={...Y,text:dt.target.value},A(bt)}}),I.jsx("button",{type:"button",className:"task-remove-btn",onClick:()=>A(D.filter((dt,bt)=>bt!==ot)),children:""})]},Y.id)),I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{className:"modal-input task-edit-input",placeholder:"Add task...",value:N,onChange:Y=>M(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&N.trim()&&(Y.preventDefault(),A([...D,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),M(""))}}),I.jsx("button",{type:"button",className:"task-add-btn",disabled:!N.trim(),onClick:()=>{N.trim()&&(A([...D,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),M(""))},children:"+"})]})]})]}),I.jsxs("div",{className:"modal-actions",children:[T&&I.jsx("button",{type:"button",className:"btn-danger",onClick:()=>a(r.id),children:"Delete"}),I.jsx("div",{style:{flex:1}}),I.jsx("button",{type:"button",className:"btn-secondary",onClick:l,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const gO=["","","","","","","","","","","","","","","",""];function yO({value:r,onChange:t}){const[e,i]=G.useState(!1),a=G.useRef(null);return G.useEffect(()=>{if(!e)return;const l=c=>{a.current&&!a.current.contains(c.target)&&i(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[e]),I.jsxs("div",{className:"pipeline-emoji-picker",ref:a,children:[I.jsx("button",{className:"pipeline-emoji-btn",onClick:()=>i(!e),children:r||""}),e&&I.jsx("div",{className:"pipeline-emoji-grid",children:gO.map(l=>I.jsx("button",{className:"pipeline-emoji-option",onClick:()=>{t(l),i(!1)},children:l},l))})]})}function Lg({value:r,onChange:t,className:e,placeholder:i,singleClick:a}){const[l,c]=G.useState(!1),[m,p]=G.useState(r),g=G.useRef(null);G.useEffect(()=>{l&&g.current&&g.current.focus()},[l]);const T=()=>{c(!1),m.trim()!==r&&t(m.trim())},E=R=>{R.stopPropagation(),p(r),c(!0)};if(l)return I.jsx("input",{ref:g,className:`pipeline-inline-input ${e||""}`,value:m,placeholder:i,onClick:R=>R.stopPropagation(),onChange:R=>p(R.target.value),onBlur:T,onKeyDown:R=>{R.key==="Enter"&&T(),R.key==="Escape"&&(p(r),c(!1))}});const S=a?{onClick:E}:{onDoubleClick:E};return I.jsx("span",{className:`pipeline-inline-text ${e||""} ${r?"":"pipeline-placeholder"}`,...S,children:r||i})}function _O({item:r,sectionId:t,onUpdate:e,onDelete:i}){return I.jsxs("div",{className:"pipeline-item",children:[I.jsx(yO,{value:r.icon,onChange:a=>e(t,r.id,{icon:a})}),I.jsxs("div",{className:"pipeline-item-content",children:[I.jsx(Lg,{value:r.title,onChange:a=>e(t,r.id,{title:a}),className:"pipeline-item-title",placeholder:"Item title"}),I.jsx(Lg,{value:r.description,onChange:a=>e(t,r.id,{description:a}),className:"pipeline-item-desc",placeholder:"Description"})]}),I.jsx("button",{className:"pipeline-item-delete",onClick:()=>i(t,r.id),children:""})]})}function vO({sections:r,addSection:t,updateSection:e,deleteSection:i,toggleCollapse:a,addItem:l,updateItem:c,deleteItem:m}){const[p,g]=G.useState(null);return I.jsxs("div",{className:"pipeline-sections",children:[r.map(T=>I.jsxs("div",{className:"pipeline-section",children:[I.jsxs("div",{className:"pipeline-section-header",onClick:()=>a(T.id),children:[I.jsx("span",{className:"pipeline-collapse-btn",children:T.collapsed?"":""}),I.jsx(Lg,{value:T.title,onChange:E=>e(T.id,{title:E}),className:"pipeline-section-title",placeholder:"Section title",singleClick:!0}),I.jsx("button",{className:"pipeline-section-delete",onClick:E=>{E.stopPropagation(),g(T.id)},children:""})]}),!T.collapsed&&I.jsxs("div",{className:"pipeline-section-body",children:[(T.items||[]).map(E=>I.jsx(_O,{item:E,sectionId:T.id,onUpdate:c,onDelete:m},E.id)),I.jsx("button",{className:"pipeline-add-item",onClick:()=>l(T.id,{}),children:"+ Add"})]})]},T.id)),I.jsx("button",{className:"pipeline-add-section",onClick:()=>t("New Section"),children:"+ New Section"}),p&&I.jsx(fw,{title:"Delete Section",message:"This will delete the section and all its items.",onConfirm:()=>{i(p),g(null)},onClose:()=>g(null)})]})}const Ug="prayerTimesCache";function dw(r,t,e){return`${r}|${t}|${e}`}function Wp(r,t,e){try{const i=localStorage.getItem(Ug);return i&&JSON.parse(i)[dw(r,t,e)]||null}catch{return null}}function TO(r,t,e,i){try{const a=localStorage.getItem(Ug),l=a?JSON.parse(a):{};l[dw(r,t,e)]=i;const c=Object.keys(l);c.length>30&&(c.sort(),delete l[c[0]]),localStorage.setItem(Ug,JSON.stringify(l))}catch{}}function EO({date:r,city:t="Lyon",country:e="France",lat:i,lng:a}={}){const l=r||nc(),[c,m]=G.useState(()=>Wp(l,t,e)),[p,g]=G.useState(!Wp(l,t,e)),[T,E]=G.useState(null);return G.useEffect(()=>{const S=Wp(l,t,e);if(S){m(S),g(!1);return}let R=!1;g(!0);async function V(){try{const C=MM(l);let z;if(i!=null&&a!=null)z=`https://api.aladhan.com/v1/timings/${C}?latitude=${i}&longitude=${a}`;else{const rt=`${t},${e}`;z=`https://api.aladhan.com/v1/timingsByAddress/${C}?address=${encodeURIComponent(rt)}`}const at=await(await fetch(z)).json();if(!R&&at.data){const rt=at.data.timings,mt={Fajr:rt.Fajr,Dhuhr:rt.Dhuhr,Asr:rt.Asr,Maghrib:rt.Maghrib,Isha:rt.Isha};m(mt),TO(l,t,e,mt)}}catch(C){R||E(C.message)}finally{R||g(!1)}}return V(),()=>{R=!0}},[l,t,e,i,a]),{times:c,loading:p,error:T}}const SO=["pre-fajr","fajr-dhuhr","dhuhr-asr","asr-maghrib","maghrib-isha","post-isha"],bO={"pre-fajr":"Pre-Fajr","fajr-dhuhr":"Fajr  Dhuhr","dhuhr-asr":"Dhuhr  Asr","asr-maghrib":"Asr  Maghrib","maghrib-isha":"Maghrib  Isha","post-isha":"Post-Isha"};function Lu(r){const[t,e]=r.split(":").map(Number);return t*60+e}function AO(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function IO(r){if(!r)return null;const t=Lu(r.Fajr),e=Lu(r.Dhuhr),i=Lu(r.Asr),a=Lu(r.Maghrib),l=Lu(r.Isha);return{"pre-fajr":{start:"00:00",end:r.Fajr,startMin:0,endMin:t},"fajr-dhuhr":{start:r.Fajr,end:r.Dhuhr,startMin:t,endMin:e},"dhuhr-asr":{start:r.Dhuhr,end:r.Asr,startMin:e,endMin:i},"asr-maghrib":{start:r.Asr,end:r.Maghrib,startMin:i,endMin:a},"maghrib-isha":{start:r.Maghrib,end:r.Isha,startMin:a,endMin:l},"post-isha":{start:r.Isha,end:"23:59",startMin:l,endMin:1439}}}function wO(r,t){if(!r.segment||!t||!t[r.segment])return r.time||"08:00";const i=t[r.segment].startMin+(r.offsetMinutes||0);return AO(Math.max(0,Math.min(1435,i)))}const Uu=25;function RO(r){return r?[{id:"prayer-fajr",time:r.Fajr,activity:"Fajr",type:"prayer",icon:"",duration:Uu,isPrayer:!0},{id:"prayer-dhuhr",time:r.Dhuhr,activity:"Dhuhr",type:"prayer",icon:"",duration:Uu,isPrayer:!0},{id:"prayer-asr",time:r.Asr,activity:"Asr",type:"prayer",icon:"",duration:Uu,isPrayer:!0},{id:"prayer-maghrib",time:r.Maghrib,activity:"Maghrib",type:"prayer",icon:"",duration:Uu,isPrayer:!0},{id:"prayer-isha",time:r.Isha,activity:"Isha",type:"prayer",icon:"",duration:Uu,isPrayer:!0}]:[]}const CO=60;function DO(r){const[t,e]=r.split(":").map(Number);return t*60+e}function NO(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function xO(r,t=5){return Math.max(0,Math.min(1435,Math.round(r/t)*t))}function VO(r,{hourHeight:t=0,minBlockH:e=0}={}){if(!r.length)return[];const i=t>0&&e>0?e/t*60:0,a=r.map(E=>{const S=DO(E.time),R=E.duration||CO,V=i?S+Math.max(R,i):S+R;return{...E,startMin:S,endMin:S+R,visualEnd:V}});a.sort((E,S)=>E.startMin-S.startMin||S.endMin-S.startMin-(E.endMin-E.startMin));const l=[],c=[];for(const E of a){let S=-1;for(let R=0;R<l.length;R++)if(l[R]<=E.startMin){S=R;break}S===-1&&(S=l.length,l.push(0)),l[S]=E.visualEnd,c.push({...E,col:S})}const m=[];let p=[],g=0;for(const E of c)p.length===0||E.startMin<g?(p.push(E),g=Math.max(g,E.visualEnd)):(m.push(p),p=[E],g=E.visualEnd);p.length&&m.push(p);const T=[];for(const E of m){const S=Math.max(...E.map(R=>R.col))+1;for(const R of E)T.push({...R,totalCols:S})}return T}const $i=60,xS=24,VS=60,MO=Array.from({length:24},(r,t)=>t),OO=["rgba(34, 139, 34, 0.03)","rgba(34, 139, 34, 0.06)"],MS={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},PO=["M","T","W","T","F","S","S"];function kO({date:r,plan:t,location:e,onOpenLocation:i,onUpdateBlocks:a,onMonth:l,onSelectDate:c,customTypes:m=[],customTypeColors:p={},onAddCustomType:g,onRemoveCustomType:T,pipelineSections:E=[],onAddSection:S,onUpdateSection:R,onDeleteSection:V,onToggleCollapse:C,onAddItem:z,onUpdateItem:Q,onDeleteItem:at}){var ee,jt;const[rt,mt]=G.useState(null),[_t,ft]=G.useState(null),D=G.useRef(null),A=xM(Yy(r)),N=r===nc(),{times:M}=EO({date:r,city:e==null?void 0:e.city,country:e==null?void 0:e.country,lat:e==null?void 0:e.lat,lng:e==null?void 0:e.lng}),O=G.useMemo(()=>IO(M),[M]),U=G.useMemo(()=>RO(M),[M]),x=((jt=(ee=t==null?void 0:t.routine)==null?void 0:ee[A])==null?void 0:jt.blocks)||[],Yt=G.useMemo(()=>x.map(Z=>Z.segment&&O?{...Z,time:wO(Z,O)}:Z),[x,O]),{userBlocks:Zt,positionedPrayers:J}=G.useMemo(()=>{const Z=Yt.map(Xt=>({...Xt,duration:Xt.duration||VS})),pt=[...U,...Z],wt=VO(pt,{hourHeight:$i,minBlockH:xS}),kt=[],Ct=[];for(const Xt of wt){const ke={...Xt,top:Xt.startMin/60*$i,height:Math.max(Xt.duration/60*$i,xS)};Xt.isPrayer?Ct.push(ke):kt.push(ke)}return{userBlocks:kt,positionedPrayers:Ct}},[Yt,U]),lt=G.useMemo(()=>O?SO.map((Z,pt)=>{const wt=O[Z],kt=wt.startMin/60*$i,Ct=(wt.endMin-wt.startMin)/60*$i;return{id:Z,top:kt,height:Ct,color:OO[pt%2],label:bO[Z]}}):[],[O]),Tt=Z=>{if(!t||Z.target.closest(".timeline-block")||Z.target.closest(".segment-label"))return;const pt=D.current.getBoundingClientRect(),wt=Z.clientY-pt.top,kt=xO(wt/$i*60),Ct=NO(kt),Xt=crypto.randomUUID(),ke={id:Xt,time:Ct,activity:"(New)",type:"neutral",icon:"",duration:VS,segment:null,offsetMinutes:0,tasks:[]};a(A,[...x,ke]),ft(Xt)},xt=(Z,pt)=>{const wt=x.map(kt=>kt.id===Z?{...kt,time:pt,segment:null,offsetMinutes:0}:kt);a(A,wt)},Ut=(Z,pt,wt)=>{const kt=x.map(Ct=>Ct.id===Z?{...Ct,time:pt,duration:wt,segment:null,offsetMinutes:0}:Ct);a(A,kt)},k=Z=>{let pt=x.map(wt=>wt.id===Z.id?Z:wt);x.find(wt=>wt.id===Z.id)||pt.push(Z),a(A,pt),mt(null),ft(null)},et=Z=>{a(A,x.filter(pt=>pt.id!==Z)),mt(null),ft(null)},Y=(Z,pt)=>{const wt=x.map(kt=>kt.id!==Z?kt:{...kt,tasks:(kt.tasks||[]).map(Ct=>Ct.id===pt?{...Ct,done:!Ct.done}:Ct)});a(A,wt)},ot=()=>{_t&&(a(A,x.filter(Z=>Z.id!==_t)),ft(null)),mt(null)},dt=new Date,Mt=(dt.getHours()*60+dt.getMinutes())/60*$i;return I.jsxs("div",{className:"daily-view",children:[I.jsxs("div",{className:"daily-header",children:[I.jsx("button",{className:"daily-back",onClick:l,children:" Month"}),I.jsxs("div",{className:"daily-date-info",children:[I.jsx("span",{className:"daily-day-name",children:MS[A]}),I.jsxs("span",{className:"daily-date-str",children:[nd(r),N?" (today)":""]})]}),t&&I.jsx("span",{className:"daily-plan-badge",style:{borderColor:t.color,color:t.color},children:t.label})]}),I.jsx("div",{className:"day-selector",children:Qy.map((Z,pt)=>I.jsx("button",{className:`day-btn${Z===A?" active":""}`,onClick:()=>c(OM(r,Z)),children:PO[pt]},Z))}),M&&I.jsxs("div",{className:"prayer-banner",children:[I.jsxs("div",{className:"prayer-banner-title",onClick:i,style:{cursor:"pointer"},children:["PRAYER TIMES",e!=null&&e.city?`  ${e.city.toUpperCase()}`:""]}),I.jsx("div",{className:"prayer-times-row",children:Object.entries(M).map(([Z,pt])=>I.jsxs("div",{className:"prayer-time-item",children:[I.jsx("span",{className:"prayer-name",children:Z}),I.jsx("span",{className:"prayer-time",children:pt})]},Z))})]}),!t&&I.jsxs("div",{className:"daily-empty",children:["No plan covers this date. Create a plan that includes ",nd(r),"."]}),t&&x.length===0&&I.jsxs("div",{className:"daily-hint",children:["Tap the timeline to add your first block for ",MS[A],"."]}),I.jsx("div",{className:"timeline-scroll",children:I.jsxs("div",{className:"timeline",ref:D,style:{height:24*$i},onClick:Tt,children:[lt.map(Z=>I.jsx("div",{className:"segment-band",style:{top:Z.top,height:Z.height,background:Z.color},children:I.jsx("span",{className:"segment-label",children:Z.label})},Z.id)),MO.map(Z=>I.jsxs("div",{className:"hour-row",style:{top:Z*$i,height:$i},children:[I.jsx("span",{className:"hour-label",children:NM(Z*60)}),I.jsx("div",{className:"hour-line"})]},Z)),N&&I.jsx("div",{className:"now-line",style:{top:Mt},children:I.jsx("div",{className:"now-dot"})}),J.map(Z=>I.jsx(DS,{block:Z,top:Z.top,height:Z.height,col:Z.col,totalCols:Z.totalCols,isPrayer:!0,onEdit:()=>{},onDelete:()=>{},onTimeChange:()=>{},onResize:()=>{}},Z.id)),Zt.map(Z=>I.jsx(DS,{block:Z,top:Z.top,height:Z.height,col:Z.col,totalCols:Z.totalCols,isNew:Z.id===_t,extraTypeColors:p,onEdit:pt=>{ft(null),mt(pt)},onDelete:et,onTimeChange:xt,onResize:Ut,onToggleTask:Y},Z.id))]})}),I.jsx(vO,{sections:E,addSection:S,updateSection:R,deleteSection:V,toggleCollapse:C,addItem:z,updateItem:Q,deleteItem:at}),rt&&I.jsx(pO,{block:rt,segments:O,customTypes:m,customTypeColors:p,onAddCustomType:g,onRemoveCustomType:T,onSave:k,onDelete:et,onClose:ot},rt.id+rt.time+(rt.duration||0))]})}function LO(r){const t=JSON.parse(r);if(Array.isArray(t))return{plans:t.map(e=>({...e,id:e.id||crypto.randomUUID()})),customTypes:[],pipelines:[]};if(t&&Array.isArray(t.plans))return{plans:t.plans.map(e=>({...e,id:e.id||crypto.randomUUID()})),customTypes:Array.isArray(t.customTypes)?t.customTypes:[],pipelines:Array.isArray(t.pipelines)?t.pipelines:[]};throw new Error("Unrecognized format")}function UO(r,t,e,i=[]){const a=new Set(t.map(m=>m.id)),l=new Set([...rw,...e.map(m=>m.key)]),c=new Set(i.map(m=>m.id));return{newPlans:r.plans.filter(m=>!a.has(m.id)),skippedPlans:r.plans.filter(m=>a.has(m.id)),newTypes:r.customTypes.filter(m=>!l.has(m.key)),skippedTypes:r.customTypes.filter(m=>l.has(m.key)),newPipelines:(r.pipelines||[]).filter(m=>!c.has(m.id)),skippedPipelines:(r.pipelines||[]).filter(m=>c.has(m.id))}}function zO({file:r,existingPlans:t,existingCustomTypes:e,existingPipelines:i=[],onConfirm:a,onClose:l}){const[c,m]=G.useState(null),[p,g]=G.useState(null),[T,E]=G.useState(null),[S,R]=G.useState(new Set),[V,C]=G.useState(new Set),[z,Q]=G.useState(new Set);G.useState(()=>{const A=new FileReader;A.onload=N=>{try{const M=LO(N.target.result);if(M.plans.length===0&&M.customTypes.length===0){m("File contains no data to import.");return}const O=UO(M,t,e,i);g(M),E(O),R(new Set(O.newPlans.map(U=>U.id))),C(new Set(O.newTypes.map(U=>U.key))),Q(new Set(O.newPipelines.map(U=>U.id)))}catch(M){m("Invalid file: "+M.message)}},A.readAsText(r)});const at=G.useCallback(A=>{R(N=>{const M=new Set(N);return M.has(A)?M.delete(A):M.add(A),M})},[]),rt=G.useCallback(A=>{C(N=>{const M=new Set(N);return M.has(A)?M.delete(A):M.add(A),M})},[]),mt=G.useCallback(A=>{Q(N=>{const M=new Set(N);return M.has(A)?M.delete(A):M.add(A),M})},[]),_t=G.useCallback(()=>{if(!T)return;const A=T.newPlans.filter(O=>S.has(O.id)),N=T.newTypes.filter(O=>V.has(O.key)),M=T.newPipelines.filter(O=>z.has(O.id));a(A,N,M)},[T,S,V,z,a]),ft=S.size+V.size+z.size,D=T&&T.newPlans.length===0&&T.newTypes.length===0&&T.newPipelines.length===0;return I.jsx("div",{className:"modal-overlay",onClick:l,children:I.jsxs("div",{className:"modal",onClick:A=>A.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Import Data"}),c&&I.jsxs(I.Fragment,{children:[I.jsx("p",{style:{color:"#ef4444",fontSize:13,margin:"0 0 16px"},children:c}),I.jsx("div",{className:"modal-actions",children:I.jsx("button",{className:"btn-secondary",onClick:l,children:"Close"})})]}),!c&&!T&&I.jsx("p",{style:{color:"#94a3b8",fontSize:13},children:"Reading file..."}),T&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),T.newPlans.length>0&&I.jsx("div",{className:"import-items",children:T.newPlans.map(A=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:S.has(A.id),onChange:()=>at(A.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:A.label}),A.startDate&&I.jsxs("span",{className:"import-item-date",children:[A.startDate,"  ",A.endDate]})]},A.id))}),T.skippedPlans.length>0&&I.jsx("div",{className:"import-items",children:T.skippedPlans.map(A=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:A.label})]},A.id))}),p.plans.length===0&&I.jsx("p",{className:"import-empty",children:"No plans in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),T.newTypes.length>0&&I.jsx("div",{className:"import-items",children:T.newTypes.map(A=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:V.has(A.key),onChange:()=>rt(A.key)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:A.name})]},A.key))}),T.skippedTypes.length>0&&I.jsx("div",{className:"import-items",children:T.skippedTypes.map(A=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:A.name||A.key})]},A.key))}),p.customTypes.length===0&&I.jsx("p",{className:"import-empty",children:"No custom types in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),T.newPipelines.length>0&&I.jsx("div",{className:"import-items",children:T.newPipelines.map(A=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:z.has(A.id),onChange:()=>mt(A.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:A.title}),I.jsxs("span",{className:"import-item-date",children:[(A.items||[]).length," items"]})]},A.id))}),T.skippedPipelines.length>0&&I.jsx("div",{className:"import-items",children:T.skippedPipelines.map(A=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:A.title})]},A.id))}),(p.pipelines||[]).length===0&&I.jsx("p",{className:"import-empty",children:"No pipeline sections in file"})]}),D&&I.jsx("p",{style:{color:"#f59e0b",fontSize:13,marginTop:8},children:"Everything already exists. Nothing to import."}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:l,children:"Cancel"}),!D&&I.jsxs("button",{className:"btn-primary",onClick:_t,disabled:ft===0,children:["Import",ft>0?` ${ft} item${ft!==1?"s":""}`:""]})]})]})]})})}function jO({plans:r,customTypes:t,pipelineSections:e=[],onClose:i}){const[a,l]=G.useState(()=>new Set(r.map(C=>C.id))),[c,m]=G.useState(()=>new Set(t.map(C=>C.key))),[p,g]=G.useState(()=>new Set(e.map(C=>C.id))),T=G.useCallback(C=>{l(z=>{const Q=new Set(z);return Q.has(C)?Q.delete(C):Q.add(C),Q})},[]),E=G.useCallback(C=>{m(z=>{const Q=new Set(z);return Q.has(C)?Q.delete(C):Q.add(C),Q})},[]),S=G.useCallback(C=>{g(z=>{const Q=new Set(z);return Q.has(C)?Q.delete(C):Q.add(C),Q})},[]),R=a.size+c.size+p.size,V=G.useCallback(()=>{const C=r.filter(ft=>a.has(ft.id)),z=t.filter(ft=>c.has(ft.key)).map(ft=>({key:ft.key,name:ft.name})),Q=e.filter(ft=>p.has(ft.id)),at={version:2,plans:C,customTypes:z,pipelines:Q},rt=new Blob([JSON.stringify(at,null,2)],{type:"application/json"}),mt=URL.createObjectURL(rt),_t=document.createElement("a");_t.href=mt,_t.download="entrypoint-v2-plans.json",_t.click(),URL.revokeObjectURL(mt),i()},[r,t,e,a,c,p,i]);return I.jsx("div",{className:"modal-overlay",onClick:i,children:I.jsxs("div",{className:"modal",onClick:C=>C.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Export Data"}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),r.length>0?I.jsx("div",{className:"import-items",children:r.map(C=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:a.has(C.id),onChange:()=>T(C.id)}),I.jsx("span",{className:"import-item-label",children:C.label}),C.startDate&&I.jsxs("span",{className:"import-item-date",children:[C.startDate,"  ",C.endDate]})]},C.id))}):I.jsx("p",{className:"import-empty",children:"No plans to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),t.length>0?I.jsx("div",{className:"import-items",children:t.map(C=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:c.has(C.key),onChange:()=>E(C.key)}),I.jsx("span",{className:"import-item-label",children:C.name})]},C.key))}):I.jsx("p",{className:"import-empty",children:"No custom types to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),e.length>0?I.jsx("div",{className:"import-items",children:e.map(C=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:p.has(C.id),onChange:()=>S(C.id)}),I.jsx("span",{className:"import-item-label",children:C.title}),I.jsxs("span",{className:"import-item-date",children:[(C.items||[]).length," items"]})]},C.id))}):I.jsx("p",{className:"import-empty",children:"No pipeline sections to export"})]}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:i,children:"Cancel"}),I.jsxs("button",{className:"btn-primary",onClick:V,disabled:R===0,children:["Export",R>0?` ${R} item${R!==1?"s":""}`:""]})]})]})})}function BO({onSave:r,onClose:t}){const[e,i]=G.useState(""),[a,l]=G.useState("");G.useEffect(()=>{const p=g=>{g.key==="Escape"&&t&&t()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[t]);const c=()=>{const p=e.trim(),g=a.trim();!p||!g||r({city:p,country:g})},m=p=>{p.key==="Enter"&&c()};return I.jsx("div",{className:"modal-overlay",onClick:t||void 0,children:I.jsxs("div",{className:"modal",onClick:p=>p.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:"Set Your Location"}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 16px",lineHeight:1.5},children:"Used to calculate prayer times."}),I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[I.jsx("input",{className:"modal-input",placeholder:"City (e.g. Lyon)",value:e,onChange:p=>i(p.target.value),onKeyDown:m,autoFocus:!0}),I.jsx("input",{className:"modal-input",placeholder:"Country (e.g. France)",value:a,onChange:p=>l(p.target.value),onKeyDown:m})]}),I.jsxs("div",{className:"modal-actions",children:[t&&I.jsx("button",{className:"btn-secondary",onClick:t,children:"Cancel"}),I.jsx("button",{className:"btn-primary",onClick:c,disabled:!e.trim()||!a.trim(),children:"Save"})]})]})})}function OS(){const r=Ky(),t=(r==null?void 0:r.user)||null,e=(r==null?void 0:r.logout)||null,{plans:i,loading:a,activePlan:l,activePlanId:c,setActivePlanId:m,createPlan:p,updatePlan:g,deletePlan:T,updateRoutineBlocks:E,getPlanForDate:S,mergePlans:R}=QM((t==null?void 0:t.uid)||null),{selectedDate:V,setSelectedDate:C,today:z,viewYear:Q,viewMonth:at,prevMonth:rt,nextMonth:mt,setViewYearMonth:_t}=WM(),{customTypes:ft,customTypeColors:D,addCustomType:A,removeCustomType:N,mergeCustomTypes:M}=rO(),{location:O,setLocation:U,hasLocation:x,geoFailed:Yt}=lO(),[Zt,J]=G.useState(!1),{sections:lt,addSection:Tt,updateSection:xt,deleteSection:Ut,reorderSections:k,toggleCollapse:et,addItem:Y,updateItem:ot,deleteItem:dt,mergeSections:bt}=ZM((t==null?void 0:t.uid)||null),Mt=G.useRef(null),[ee,jt]=G.useState(null),[Z,pt]=G.useState(!1),[wt,kt]=G.useState("daily"),[Ct,Xt]=G.useState(null),[ke,ss]=G.useState(null),[zr,Se]=G.useState(!1),Ce=G.useCallback((Ft,be,Ii)=>{Ft.length>0&&R(Ft),be.length>0&&M(be),Ii&&Ii.length>0&&bt(Ii),ss(null)},[R,M,bt]),Hn=G.useCallback(Ft=>{if(!Ft.startDate)return;m(Ft.id),C(Ft.startDate);const be=new Date(Ft.startDate+"T00:00:00");_t(be.getFullYear(),be.getMonth()),Xt(Ft.startDate),setTimeout(()=>Xt(null),1500)},[_t,C,m]),Cl=G.useCallback(Ft=>{const be=i.find(Ii=>Ii.id===Ft);be!=null&&be.startDate?Hn(be):m(Ft)},[i,Hn,m]),jr=G.useCallback(Ft=>{C(Ft);const be=S(Ft);be&&m(be.id),kt("daily")},[C,S,m]),sn=G.useCallback(Ft=>{C(Ft);const be=S(Ft);be&&m(be.id)},[C,S,m]),rs=G.useCallback(()=>{kt("calendar")},[]),Si=S(V),bi=l&&(Si==null?void 0:Si.id)===l.id?l:Si,Ai=G.useCallback((Ft,be)=>{bi&&E(bi.id,Ft,be)},[bi,E]);return a?I.jsx("div",{className:"loading",children:"loading plans..."}):I.jsxs("div",{className:"app",children:[I.jsxs("header",{className:"app-header",children:[I.jsxs("div",{children:[I.jsx("div",{className:"header-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"header-title",children:"Lock-In"}),I.jsx("div",{className:"header-quote",children:'"While enjoying every single day on the way."'})]}),I.jsxs("div",{className:"header-actions",children:[I.jsx("button",{className:"header-btn",onClick:()=>Se(!0),title:"Export",children:"Export"}),I.jsx("button",{className:"header-btn",onClick:()=>{var Ft;return(Ft=Mt.current)==null?void 0:Ft.click()},title:"Import",children:"Import"}),I.jsx("input",{ref:Mt,type:"file",accept:".json",hidden:!0,onChange:Ft=>{Ft.target.files[0]&&ss(Ft.target.files[0]),Ft.target.value=""}}),e&&I.jsx("button",{className:"logout-btn",onClick:e,children:"Logout"})]})]}),I.jsx(uO,{plans:i,activePlanId:l==null?void 0:l.id,onSelect:Cl,onCreate:()=>pt(!0),onEdit:jt,onDelete:T}),wt==="calendar"?I.jsx(dO,{viewYear:Q,viewMonth:at,selectedDate:V,today:z,plans:i,highlightDate:Ct,onPrevMonth:rt,onNextMonth:mt,onGoToday:()=>jr(z),onSelectDate:jr,onPlanClick:Hn}):I.jsx(kO,{date:V,plan:bi,location:O,onOpenLocation:()=>J(!0),onUpdateBlocks:Ai,onSelectDate:sn,onMonth:rs,customTypes:ft,customTypeColors:D,onAddCustomType:A,onRemoveCustomType:N,pipelineSections:lt,onAddSection:Tt,onUpdateSection:xt,onDeleteSection:Ut,onToggleCollapse:et,onAddItem:Y,onUpdateItem:ot,onDeleteItem:dt}),Z&&I.jsx(RS,{plan:null,plans:i,onSave:Ft=>{p(Ft),pt(!1)},onClose:()=>pt(!1)}),ee&&I.jsx(RS,{plan:ee,plans:i,onSave:Ft=>{g(ee.id,Ft),jt(null)},onClose:()=>jt(null)}),zr&&I.jsx(jO,{plans:i,customTypes:ft,pipelineSections:lt,onClose:()=>Se(!1)}),ke&&I.jsx(zO,{file:ke,existingPlans:i,existingCustomTypes:ft,existingPipelines:lt,onConfirm:Ce,onClose:()=>ss(null)}),(!x&&Yt||Zt)&&I.jsx(BO,{onSave:Ft=>{U(Ft),J(!1)},onClose:x?()=>J(!1):void 0})]})}W1.createRoot(document.getElementById("root")).render(I.jsx(G.StrictMode,{children:yl?I.jsx(IM,{children:I.jsx(RM,{children:I.jsx(OS,{})})}):I.jsx(OS,{})}));
