(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();var Cp={exports:{}},Cu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gE;function G1(){if(gE)return Cu;gE=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Cu.Fragment=t,Cu.jsx=e,Cu.jsxs=e,Cu}var yE;function K1(){return yE||(yE=1,Cp.exports=G1()),Cp.exports}var I=K1(),Dp={exports:{}},xt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function Q1(){if(_E)return xt;_E=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function R(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,z={};function $(k,tt,Q){this.props=k,this.context=tt,this.refs=z,this.updater=Q||V}$.prototype.isReactComponent={},$.prototype.setState=function(k,tt){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,tt,"setState")},$.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function at(){}at.prototype=$.prototype;function rt(k,tt,Q){this.props=k,this.context=tt,this.refs=z,this.updater=Q||V}var gt=rt.prototype=new at;gt.constructor=rt,C(gt,$.prototype),gt.isPureReactComponent=!0;var vt=Array.isArray;function ht(){}var D={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(k,tt,Q){var ot=Q.ref;return{$$typeof:r,type:k,key:tt,ref:ot!==void 0?ot:null,props:Q}}function P(k,tt){return N(k.type,tt,k.props)}function M(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function U(k){var tt={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(Q){return tt[Q]})}var x=/\/+/g;function Kt(k,tt){return typeof k=="object"&&k!==null&&k.key!=null?U(""+k.key):tt.toString(36)}function Xt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ht,ht):(k.status="pending",k.then(function(tt){k.status==="pending"&&(k.status="fulfilled",k.value=tt)},function(tt){k.status==="pending"&&(k.status="rejected",k.reason=tt)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function J(k,tt,Q,ot,mt){var it=typeof k;(it==="undefined"||it==="boolean")&&(k=null);var pt=!1;if(k===null)pt=!0;else switch(it){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(k.$$typeof){case r:case t:pt=!0;break;case T:return pt=k._init,J(pt(k._payload),tt,Q,ot,mt)}}if(pt)return mt=mt(k),pt=ot===""?"."+Kt(k,0):ot,vt(mt)?(Q="",pt!=null&&(Q=pt.replace(x,"$&/")+"/"),J(mt,tt,Q,"",function(ut){return ut})):mt!=null&&(M(mt)&&(mt=P(mt,Q+(mt.key==null||k&&k.key===mt.key?"":(""+mt.key).replace(x,"$&/")+"/")+pt)),tt.push(mt)),1;pt=0;var Rt=ot===""?".":ot+":";if(vt(k))for(var Vt=0;Vt<k.length;Vt++)ot=k[Vt],it=Rt+Kt(ot,Vt),pt+=J(ot,tt,Q,it,mt);else if(Vt=R(k),typeof Vt=="function")for(k=Vt.call(k),Vt=0;!(ot=k.next()).done;)ot=ot.value,it=Rt+Kt(ot,Vt++),pt+=J(ot,tt,Q,it,mt);else if(it==="object"){if(typeof k.then=="function")return J(Xt(k),tt,Q,ot,mt);throw tt=String(k),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return pt}function lt(k,tt,Q){if(k==null)return k;var ot=[],mt=0;return J(k,ot,"","",function(it){return tt.call(Q,it,mt++)}),ot}function Tt(k){if(k._status===-1){var tt=k._result;tt=tt(),tt.then(function(Q){(k._status===0||k._status===-1)&&(k._status=1,k._result=Q)},function(Q){(k._status===0||k._status===-1)&&(k._status=2,k._result=Q)}),k._status===-1&&(k._status=0,k._result=tt)}if(k._status===1)return k._result.default;throw k._result}var Mt=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Lt={map:lt,forEach:function(k,tt,Q){lt(k,function(){tt.apply(this,arguments)},Q)},count:function(k){var tt=0;return lt(k,function(){tt++}),tt},toArray:function(k){return lt(k,function(tt){return tt})||[]},only:function(k){if(!M(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return xt.Activity=E,xt.Children=Lt,xt.Component=$,xt.Fragment=e,xt.Profiler=a,xt.PureComponent=rt,xt.StrictMode=i,xt.Suspense=p,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,xt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},xt.cache=function(k){return function(){return k.apply(null,arguments)}},xt.cacheSignal=function(){return null},xt.cloneElement=function(k,tt,Q){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ot=C({},k.props),mt=k.key;if(tt!=null)for(it in tt.key!==void 0&&(mt=""+tt.key),tt)!A.call(tt,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&tt.ref===void 0||(ot[it]=tt[it]);var it=arguments.length-2;if(it===1)ot.children=Q;else if(1<it){for(var pt=Array(it),Rt=0;Rt<it;Rt++)pt[Rt]=arguments[Rt+2];ot.children=pt}return N(k.type,mt,ot)},xt.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},xt.createElement=function(k,tt,Q){var ot,mt={},it=null;if(tt!=null)for(ot in tt.key!==void 0&&(it=""+tt.key),tt)A.call(tt,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(mt[ot]=tt[ot]);var pt=arguments.length-2;if(pt===1)mt.children=Q;else if(1<pt){for(var Rt=Array(pt),Vt=0;Vt<pt;Vt++)Rt[Vt]=arguments[Vt+2];mt.children=Rt}if(k&&k.defaultProps)for(ot in pt=k.defaultProps,pt)mt[ot]===void 0&&(mt[ot]=pt[ot]);return N(k,it,mt)},xt.createRef=function(){return{current:null}},xt.forwardRef=function(k){return{$$typeof:m,render:k}},xt.isValidElement=M,xt.lazy=function(k){return{$$typeof:T,_payload:{_status:-1,_result:k},_init:Tt}},xt.memo=function(k,tt){return{$$typeof:g,type:k,compare:tt===void 0?null:tt}},xt.startTransition=function(k){var tt=D.T,Q={};D.T=Q;try{var ot=k(),mt=D.S;mt!==null&&mt(Q,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(ht,Mt)}catch(it){Mt(it)}finally{tt!==null&&Q.types!==null&&(tt.types=Q.types),D.T=tt}},xt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},xt.use=function(k){return D.H.use(k)},xt.useActionState=function(k,tt,Q){return D.H.useActionState(k,tt,Q)},xt.useCallback=function(k,tt){return D.H.useCallback(k,tt)},xt.useContext=function(k){return D.H.useContext(k)},xt.useDebugValue=function(){},xt.useDeferredValue=function(k,tt){return D.H.useDeferredValue(k,tt)},xt.useEffect=function(k,tt){return D.H.useEffect(k,tt)},xt.useEffectEvent=function(k){return D.H.useEffectEvent(k)},xt.useId=function(){return D.H.useId()},xt.useImperativeHandle=function(k,tt,Q){return D.H.useImperativeHandle(k,tt,Q)},xt.useInsertionEffect=function(k,tt){return D.H.useInsertionEffect(k,tt)},xt.useLayoutEffect=function(k,tt){return D.H.useLayoutEffect(k,tt)},xt.useMemo=function(k,tt){return D.H.useMemo(k,tt)},xt.useOptimistic=function(k,tt){return D.H.useOptimistic(k,tt)},xt.useReducer=function(k,tt,Q){return D.H.useReducer(k,tt,Q)},xt.useRef=function(k){return D.H.useRef(k)},xt.useState=function(k){return D.H.useState(k)},xt.useSyncExternalStore=function(k,tt,Q){return D.H.useSyncExternalStore(k,tt,Q)},xt.useTransition=function(){return D.H.useTransition()},xt.version="19.2.4",xt}var vE;function zg(){return vE||(vE=1,Dp.exports=Q1()),Dp.exports}var G=zg(),Np={exports:{}},Du={},xp={exports:{}},Vp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function Y1(){return TE||(TE=1,(function(r){function t(J,lt){var Tt=J.length;J.push(lt);t:for(;0<Tt;){var Mt=Tt-1>>>1,Lt=J[Mt];if(0<a(Lt,lt))J[Mt]=lt,J[Tt]=Lt,Tt=Mt;else break t}}function e(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var lt=J[0],Tt=J.pop();if(Tt!==lt){J[0]=Tt;t:for(var Mt=0,Lt=J.length,k=Lt>>>1;Mt<k;){var tt=2*(Mt+1)-1,Q=J[tt],ot=tt+1,mt=J[ot];if(0>a(Q,Tt))ot<Lt&&0>a(mt,Q)?(J[Mt]=mt,J[ot]=Tt,Mt=ot):(J[Mt]=Q,J[tt]=Tt,Mt=tt);else if(ot<Lt&&0>a(mt,Tt))J[Mt]=mt,J[ot]=Tt,Mt=ot;else break t}}return lt}function a(J,lt){var Tt=J.sortIndex-lt.sortIndex;return Tt!==0?Tt:J.id-lt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,m=c.now();r.unstable_now=function(){return c.now()-m}}var p=[],g=[],T=1,E=null,S=3,R=!1,V=!1,C=!1,z=!1,$=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,rt=typeof setImmediate<"u"?setImmediate:null;function gt(J){for(var lt=e(g);lt!==null;){if(lt.callback===null)i(g);else if(lt.startTime<=J)i(g),lt.sortIndex=lt.expirationTime,t(p,lt);else break;lt=e(g)}}function vt(J){if(C=!1,gt(J),!V)if(e(p)!==null)V=!0,ht||(ht=!0,U());else{var lt=e(g);lt!==null&&Xt(vt,lt.startTime-J)}}var ht=!1,D=-1,A=5,N=-1;function P(){return z?!0:!(r.unstable_now()-N<A)}function M(){if(z=!1,ht){var J=r.unstable_now();N=J;var lt=!0;try{t:{V=!1,C&&(C=!1,at(D),D=-1),R=!0;var Tt=S;try{e:{for(gt(J),E=e(p);E!==null&&!(E.expirationTime>J&&P());){var Mt=E.callback;if(typeof Mt=="function"){E.callback=null,S=E.priorityLevel;var Lt=Mt(E.expirationTime<=J);if(J=r.unstable_now(),typeof Lt=="function"){E.callback=Lt,gt(J),lt=!0;break e}E===e(p)&&i(p),gt(J)}else i(p);E=e(p)}if(E!==null)lt=!0;else{var k=e(g);k!==null&&Xt(vt,k.startTime-J),lt=!1}}break t}finally{E=null,S=Tt,R=!1}lt=void 0}}finally{lt?U():ht=!1}}}var U;if(typeof rt=="function")U=function(){rt(M)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Kt=x.port2;x.port1.onmessage=M,U=function(){Kt.postMessage(null)}}else U=function(){$(M,0)};function Xt(J,lt){D=$(function(){J(r.unstable_now())},lt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(J){switch(S){case 1:case 2:case 3:var lt=3;break;default:lt=S}var Tt=S;S=lt;try{return J()}finally{S=Tt}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(J,lt){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Tt=S;S=J;try{return lt()}finally{S=Tt}},r.unstable_scheduleCallback=function(J,lt,Tt){var Mt=r.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?Mt+Tt:Mt):Tt=Mt,J){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=Tt+Lt,J={id:T++,callback:lt,priorityLevel:J,startTime:Tt,expirationTime:Lt,sortIndex:-1},Tt>Mt?(J.sortIndex=Tt,t(g,J),e(p)===null&&J===e(g)&&(C?(at(D),D=-1):C=!0,Xt(vt,Tt-Mt))):(J.sortIndex=Lt,t(p,J),V||R||(V=!0,ht||(ht=!0,U()))),J},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(J){var lt=S;return function(){var Tt=S;S=lt;try{return J.apply(this,arguments)}finally{S=Tt}}}})(Vp)),Vp}var EE;function $1(){return EE||(EE=1,xp.exports=Y1()),xp.exports}var Mp={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function X1(){if(SE)return cn;SE=1;var r=zg();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:p,containerInfo:g,implementation:T}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(p,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(p,g,null,T)},cn.flushSync=function(p){var g=c.T,T=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=T,i.d.f()}},cn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},cn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},cn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var T=g.as,E=m(T,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):T==="script"&&i.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},cn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=m(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},cn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,E=m(T,g.crossOrigin);i.d.L(p,T,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},cn.preloadModule=function(p,g){if(typeof p=="string")if(g){var T=m(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},cn.requestFormReset=function(p){i.d.r(p)},cn.unstable_batchedUpdates=function(p,g){return p(g)},cn.useFormState=function(p,g,T){return c.H.useFormState(p,g,T)},cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},cn.version="19.2.4",cn}var bE;function J1(){if(bE)return Mp.exports;bE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Mp.exports=X1(),Mp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE;function Z1(){if(AE)return Du;AE=1;var r=$1(),t=zg(),e=J1();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var d=f.alternate;if(d===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===o)return p(f),n;if(d===u)return p(f),s;d=d.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=d;else{for(var _=!1,b=f.child;b;){if(b===o){_=!0,o=f,u=d;break}if(b===u){_=!0,u=f,o=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===o){_=!0,o=d,u=f;break}if(b===u){_=!0,u=d,o=f;break}b=b.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function T(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=T(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),at=Symbol.for("react.consumer"),rt=Symbol.for("react.context"),gt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function Kt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case $:return"Profiler";case z:return"StrictMode";case vt:return"Suspense";case ht:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case rt:return n.displayName||"Context";case at:return(n._context.displayName||"Context")+".Consumer";case gt:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return s=n.displayName||null,s!==null?s:Kt(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return Kt(n(s))}catch{}}return null}var Xt=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},Mt=[],Lt=-1;function k(n){return{current:n}}function tt(n){0>Lt||(n.current=Mt[Lt],Mt[Lt]=null,Lt--)}function Q(n,s){Lt++,Mt[Lt]=n.current,n.current=s}var ot=k(null),mt=k(null),it=k(null),pt=k(null);function Rt(n,s){switch(Q(it,s),Q(mt,n),Q(ot,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?zT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=zT(s),n=jT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}tt(ot),Q(ot,n)}function Vt(){tt(ot),tt(mt),tt(it)}function ut(n){n.memoizedState!==null&&Q(pt,n);var s=ot.current,o=jT(s,n.type);s!==o&&(Q(mt,n),Q(ot,o))}function Dt(n){mt.current===n&&(tt(ot),tt(mt)),pt.current===n&&(tt(pt),Au._currentValue=Tt)}var Yt,ye;function me(n){if(Yt===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Yt=s&&s[1]||"",ye=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yt+n+ye}var si=!1;function qn(n,s){if(!n||si)return"";si=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(X){var K=X}Reflect.construct(n,[],nt)}else{try{nt.call()}catch(X){K=X}n.call(nt.prototype)}}else{try{throw Error()}catch(X){K=X}(nt=n())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=u.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var O=_.split(`
`),H=b.split(`
`);for(f=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===O.length||f===H.length)for(u=O.length-1,f=H.length-1;1<=u&&0<=f&&O[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(O[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||O[u]!==H[f]){var W=`
`+O[u].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=u&&0<=f);break}}}finally{si=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?me(o):""}function ss(n,s){switch(n.tag){case 26:case 27:case 5:return me(n.type);case 16:return me("Lazy");case 13:return n.child!==s&&s!==null?me("Suspense Fallback"):me("Suspense");case 19:return me("SuspenseList");case 0:case 15:return qn(n.type,!1);case 11:return qn(n.type.render,!1);case 1:return qn(n.type,!0);case 31:return me("Activity");default:return""}}function zr(n){try{var s="",o=null;do s+=ss(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ee=Object.prototype.hasOwnProperty,Re=r.unstable_scheduleCallback,Fn=r.unstable_cancelCallback,Cl=r.unstable_shouldYield,jr=r.unstable_requestPaint,en=r.unstable_now,rs=r.unstable_getCurrentPriorityLevel,bi=r.unstable_ImmediatePriority,Ai=r.unstable_UserBlockingPriority,Ii=r.unstable_NormalPriority,Bt=r.unstable_LowPriority,Se=r.unstable_IdlePriority,wi=r.log,Oc=r.unstable_setDisableYieldValue,ri=null,nn=null;function Hn(n){if(typeof wi=="function"&&Oc(n),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(ri,n)}catch{}}var Ce=Math.clz32?Math.clz32:kc,Pc=Math.log,Ha=Math.LN2;function kc(n){return n>>>=0,n===0?32:31-(Pc(n)/Ha|0)|0}var Ri=256,Br=262144,Pe=4194304;function Ci(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Di(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~d,u!==0?f=Ci(u):(_&=b,_!==0?f=Ci(_):o||(o=b&~n,o!==0&&(f=Ci(o))))):(b=u&~d,b!==0?f=Ci(b):_!==0?f=Ci(_):o||(o=u&~n,o!==0&&(f=Ci(o)))),f===0?0:s!==0&&s!==f&&(s&d)===0&&(d=f&-f,o=s&-s,d>=o||d===32&&(o&4194048)!==0)?s:f}function ai(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Vd(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lc(){var n=Pe;return Pe<<=1,(Pe&62914560)===0&&(Pe=4194304),n}function Ni(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function qr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Md(n,s,o,u,f,d){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var b=n.entanglements,O=n.expirationTimes,H=n.hiddenUpdates;for(o=_&~o;0<o;){var W=31-Ce(o),nt=1<<W;b[W]=0,O[W]=-1;var K=H[W];if(K!==null)for(H[W]=null,W=0;W<K.length;W++){var X=K[W];X!==null&&(X.lane&=-536870913)}o&=~nt}u!==0&&Fr(n,u,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~s))}function Fr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Ce(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Dl(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-Ce(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Nl(n,s){var o=s&-s;return o=(o&42)!==0?1:Hr(o),(o&(n.suspendedLanes|s))!==0?0:o}function Hr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function as(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Uc(){var n=lt.p;return n!==0?n:(n=window.event,n===void 0?32:uE(n.type))}function oi(n,s){var o=lt.p;try{return lt.p=n,s()}finally{lt.p=o}}var li=Math.random().toString(36).slice(2),ke="__reactFiber$"+li,Xe="__reactProps$"+li,xi="__reactContainer$"+li,Ga="__reactEvents$"+li,Od="__reactListeners$"+li,zc="__reactHandles$"+li,jc="__reactResources$"+li,Vi="__reactMarker$"+li;function Ka(n){delete n[ke],delete n[Xe],delete n[Ga],delete n[Od],delete n[zc]}function Mi(n){var s=n[ke];if(s)return s;for(var o=n.parentNode;o;){if(s=o[xi]||o[ke]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=QT(n);n!==null;){if(o=n[ke])return o;n=QT(n)}return s}n=o,o=n.parentNode}return null}function Gn(n){if(n=n[ke]||n[xi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Dn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Oi(n){var s=n[jc];return s||(s=n[jc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Le(n){n[Vi]=!0}var xl=new Set,Vl={};function Pi(n,s){ki(n,s),ki(n+"Capture",s)}function ki(n,s){for(Vl[n]=s,n=0;n<s.length;n++)xl.add(s[n])}var Ml=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ol={},Pl={};function Bc(n){return Ee.call(Pl,n)?!0:Ee.call(Ol,n)?!1:Ml.test(n)?Pl[n]=!0:(Ol[n]=!0,!1)}function Qa(n,s,o){if(Bc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Nn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Ue(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Je(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ls(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function kl(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,d=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,d.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ne(n){if(!n._valueTracker){var s=Ls(n)?"checked":"value";n._valueTracker=kl(n,s,""+n[s])}}function Gr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Ls(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Li(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Kr=/[\n"\\]/g;function Tn(n){return n.replace(Kr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ya(n,s,o,u,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Je(s)):n.value!==""+Je(s)&&(n.value=""+Je(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?Ll(n,_,Je(s)):o!=null?Ll(n,_,Je(o)):u!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Je(b):n.removeAttribute("name")}function qc(n,s,o,u,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),s!=null||o!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){ne(n);return}o=o!=null?""+Je(o):"",s=s!=null?""+Je(s):o,b||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),ne(n)}function Ll(n,s,o){s==="number"&&Li(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Us(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Je(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Fc(n,s,o){if(s!=null&&(s=""+Je(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Je(o):""}function zs(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Xt(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Je(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),ne(n)}function En(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ul(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||Hc.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function zl(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Ul(n,f,u)}else for(var d in s)s.hasOwnProperty(d)&&Ul(n,d,s[d])}function $a(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(n){return js.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ui(){}var jl=null;function Kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Bs=null,Ui=null;function Qr(n){var s=Gn(n);if(s&&(n=s.stateNode)){var o=n[Xe]||null;t:switch(n=s.stateNode,s.type){case"input":if(Ya(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Tn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Xe]||null;if(!f)throw Error(i(90));Ya(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Gr(u)}break t;case"textarea":Fc(n,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Us(n,!!o.multiple,s,!1)}}}var Ja=!1;function qs(n,s,o){if(Ja)return n(s,o);Ja=!0;try{var u=n(s);return u}finally{if(Ja=!1,(Bs!==null||Ui!==null)&&(Uh(),Bs&&(s=Bs,n=Ui,Ui=Bs=null,Qr(s),n)))for(s=0;s<n.length;s++)Qr(n[s])}}function ci(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Xe]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yr=!1;if(Qn)try{var le={};Object.defineProperty(le,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",le,le),window.removeEventListener("test",le,le)}catch{Yr=!1}var zi=null,Bl=null,$r=null;function ql(){if($r)return $r;var n,s=Bl,o=s.length,u,f="value"in zi?zi.value:zi.textContent,d=f.length;for(n=0;n<o&&s[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&s[o-u]===f[d-u];u++);return $r=f.slice(n,1<u?1-u:void 0)}function Xr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function os(){return!0}function hi(){return!1}function sn(n){function s(o,u,f,d,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(o=n[b],this[b]=o?o(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?os:hi,this.isPropagationStopped=hi,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),s}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ji=sn(ls),Fs=E({},ls,{view:0,detail:0}),Fl=sn(Fs),Hs,Za,Bi,Wa=E({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bi&&(Bi&&n.type==="mousemove"?(Hs=n.screenX-Bi.screenX,Za=n.screenY-Bi.screenY):Za=Hs=0,Bi=n),Hs)},movementY:function(n){return"movementY"in n?n.movementY:Za}}),Hl=sn(Wa),Jr=E({},Wa,{dataTransfer:0}),Kc=sn(Jr),Qc=E({},Fs,{relatedTarget:0}),Zr=sn(Qc),Gl=E({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Yc=sn(Gl),to=E({},ls,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$c=sn(to),Xc=E({},ls,{data:0}),qi=sn(Xc),Jc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function th(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Wc[n])?!!s[n]:!1}function Gs(){return th}var gn=E({},Fs,{key:function(n){if(n.key){var s=Jc[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Xr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Zc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(n){return n.type==="keypress"?Xr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),eh=sn(gn),nh=E({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),us=sn(nh),h=E({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),y=sn(h),v=E({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=sn(v),q=E({},Wa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=sn(q),ft=E({},ls,{newState:0,oldState:0}),Ot=sn(ft),De=[9,13,27,32],Wt=Qn&&"CompositionEvent"in window,_e=null;Qn&&"documentMode"in document&&(_e=document.documentMode);var Yn=Qn&&"TextEvent"in window&&!_e,Fi=Qn&&(!Wt||_e&&8<_e&&11>=_e),fi=" ",di=!1;function Wr(n,s){switch(n){case"keyup":return De.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var no=!1;function pw(n,s){switch(n){case"compositionend":return eo(s);case"keypress":return s.which!==32?null:(di=!0,fi);case"textInput":return n=s.data,n===fi&&di?null:n;default:return null}}function gw(n,s){if(no)return n==="compositionend"||!Wt&&Wr(n,s)?(n=ql(),$r=Bl=zi=null,no=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Fi&&s.locale!=="ko"?null:s.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!yw[n.type]:s==="textarea"}function Jy(n,s,o,u){Bs?Ui?Ui.push(u):Ui=[u]:Bs=u,s=Gh(s,"onChange"),0<s.length&&(o=new ji("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Kl=null,Ql=null;function _w(n){MT(n,0)}function ih(n){var s=Dn(n);if(Gr(s))return n}function Zy(n,s){if(n==="change")return s}var Wy=!1;if(Qn){var Pd;if(Qn){var kd="oninput"in document;if(!kd){var t_=document.createElement("div");t_.setAttribute("oninput","return;"),kd=typeof t_.oninput=="function"}Pd=kd}else Pd=!1;Wy=Pd&&(!document.documentMode||9<document.documentMode)}function e_(){Kl&&(Kl.detachEvent("onpropertychange",n_),Ql=Kl=null)}function n_(n){if(n.propertyName==="value"&&ih(Ql)){var s=[];Jy(s,Ql,n,Kn(n)),qs(_w,s)}}function vw(n,s,o){n==="focusin"?(e_(),Kl=s,Ql=o,Kl.attachEvent("onpropertychange",n_)):n==="focusout"&&e_()}function Tw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ih(Ql)}function Ew(n,s){if(n==="click")return ih(s)}function Sw(n,s){if(n==="input"||n==="change")return ih(s)}function bw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var xn=typeof Object.is=="function"?Object.is:bw;function Yl(n,s){if(xn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Ee.call(s,f)||!xn(n[f],s[f]))return!1}return!0}function i_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function s_(n,s){var o=i_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=i_(o)}}function r_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?r_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function a_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Li(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Li(n.document)}return s}function Ld(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Aw=Qn&&"documentMode"in document&&11>=document.documentMode,io=null,Ud=null,$l=null,zd=!1;function o_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;zd||io==null||io!==Li(u)||(u=io,"selectionStart"in u&&Ld(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$l&&Yl($l,u)||($l=u,u=Gh(Ud,"onSelect"),0<u.length&&(s=new ji("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=io)))}function ta(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var so={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},jd={},l_={};Qn&&(l_=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ea(n){if(jd[n])return jd[n];if(!so[n])return n;var s=so[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in l_)return jd[n]=s[o];return n}var u_=ea("animationend"),c_=ea("animationiteration"),h_=ea("animationstart"),Iw=ea("transitionrun"),ww=ea("transitionstart"),Rw=ea("transitioncancel"),f_=ea("transitionend"),d_=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function mi(n,s){d_.set(n,s),Pi(s,[n])}var sh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},$n=[],ro=0,qd=0;function rh(){for(var n=ro,s=qd=ro=0;s<n;){var o=$n[s];$n[s++]=null;var u=$n[s];$n[s++]=null;var f=$n[s];$n[s++]=null;var d=$n[s];if($n[s++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}d!==0&&m_(o,f,d)}}function ah(n,s,o,u){$n[ro++]=n,$n[ro++]=s,$n[ro++]=o,$n[ro++]=u,qd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Fd(n,s,o,u){return ah(n,s,o,u),oh(n)}function na(n,s){return ah(n,null,null,s),oh(n)}function m_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,d=n.return;d!==null;)d.childLanes|=o,u=d.alternate,u!==null&&(u.childLanes|=o),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&s!==null&&(f=31-Ce(o),n=d.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),d):null}function oh(n){if(50<yu)throw yu=0,Zm=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ao={};function Cw(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,s,o,u){return new Cw(n,s,o,u)}function Hd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cs(n,s){var o=n.alternate;return o===null?(o=Vn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function p_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function lh(n,s,o,u,f,d){var _=0;if(u=n,typeof n=="function")Hd(n)&&(_=1);else if(typeof n=="string")_=M1(n,o,ot.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case N:return n=Vn(31,o,s,f),n.elementType=N,n.lanes=d,n;case C:return ia(o.children,f,d,s);case z:_=8,f|=24;break;case $:return n=Vn(12,o,s,f|2),n.elementType=$,n.lanes=d,n;case vt:return n=Vn(13,o,s,f),n.elementType=vt,n.lanes=d,n;case ht:return n=Vn(19,o,s,f),n.elementType=ht,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case rt:_=10;break t;case at:_=9;break t;case gt:_=11;break t;case D:_=14;break t;case A:_=16,u=null;break t}_=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Vn(_,o,s,f),s.elementType=n,s.type=u,s.lanes=d,s}function ia(n,s,o,u){return n=Vn(7,n,u,s),n.lanes=o,n}function Gd(n,s,o){return n=Vn(6,n,null,s),n.lanes=o,n}function g_(n){var s=Vn(18,null,null,0);return s.stateNode=n,s}function Kd(n,s,o){return s=Vn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var y_=new WeakMap;function Xn(n,s){if(typeof n=="object"&&n!==null){var o=y_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:zr(s)},y_.set(n,s),s)}return{value:n,source:s,stack:zr(s)}}var oo=[],lo=0,uh=null,Xl=0,Jn=[],Zn=0,Ks=null,Hi=1,Gi="";function hs(n,s){oo[lo++]=Xl,oo[lo++]=uh,uh=n,Xl=s}function __(n,s,o){Jn[Zn++]=Hi,Jn[Zn++]=Gi,Jn[Zn++]=Ks,Ks=n;var u=Hi;n=Gi;var f=32-Ce(u)-1;u&=~(1<<f),o+=1;var d=32-Ce(s)+f;if(30<d){var _=f-f%5;d=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Hi=1<<32-Ce(s)+f|o<<f|u,Gi=d+n}else Hi=1<<d|o<<f|u,Gi=n}function Qd(n){n.return!==null&&(hs(n,1),__(n,1,0))}function Yd(n){for(;n===uh;)uh=oo[--lo],oo[lo]=null,Xl=oo[--lo],oo[lo]=null;for(;n===Ks;)Ks=Jn[--Zn],Jn[Zn]=null,Gi=Jn[--Zn],Jn[Zn]=null,Hi=Jn[--Zn],Jn[Zn]=null}function v_(n,s){Jn[Zn++]=Hi,Jn[Zn++]=Gi,Jn[Zn++]=Ks,Hi=s.id,Gi=s.overflow,Ks=n}var rn=null,pe=null,Qt=!1,Qs=null,Wn=!1,$d=Error(i(519));function Ys(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(Xn(s,n)),$d}function T_(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[ke]=n,s[Xe]=u,o){case"dialog":jt("cancel",s),jt("close",s);break;case"iframe":case"object":case"embed":jt("load",s);break;case"video":case"audio":for(o=0;o<vu.length;o++)jt(vu[o],s);break;case"source":jt("error",s);break;case"img":case"image":case"link":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"input":jt("invalid",s),qc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":jt("invalid",s);break;case"textarea":jt("invalid",s),zs(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||LT(s.textContent,o)?(u.popover!=null&&(jt("beforetoggle",s),jt("toggle",s)),u.onScroll!=null&&jt("scroll",s),u.onScrollEnd!=null&&jt("scrollend",s),u.onClick!=null&&(s.onclick=ui),s=!0):s=!1,s||Ys(n,!0)}function E_(n){for(rn=n.return;rn;)switch(rn.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:rn=rn.return}}function uo(n){if(n!==rn)return!1;if(!Qt)return E_(n),Qt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||dp(n.type,n.memoizedProps)),o=!o),o&&pe&&Ys(n),E_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));pe=KT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));pe=KT(n)}else s===27?(s=pe,lr(n.type)?(n=_p,_p=null,pe=n):pe=s):pe=rn?ei(n.stateNode.nextSibling):null;return!0}function sa(){pe=rn=null,Qt=!1}function Xd(){var n=Qs;return n!==null&&(In===null?In=n:In.push.apply(In,n),Qs=null),n}function Jl(n){Qs===null?Qs=[n]:Qs.push(n)}var Jd=k(null),ra=null,fs=null;function $s(n,s,o){Q(Jd,s._currentValue),s._currentValue=o}function ds(n){n._currentValue=Jd.current,tt(Jd)}function Zd(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Wd(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=f;for(var O=0;O<s.length;O++)if(b.context===s[O]){d.lanes|=o,b=d.alternate,b!==null&&(b.lanes|=o),Zd(d.return,o,n),u||(_=null);break t}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=o,d=_.alternate,d!==null&&(d.lanes|=o),Zd(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function co(n,s,o,u){n=null;for(var f=s,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var b=f.type;xn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===pt.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Au):n=[Au])}f=f.return}n!==null&&Wd(s,n,o,u),s.flags|=262144}function ch(n){for(n=n.firstContext;n!==null;){if(!xn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function aa(n){ra=n,fs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function an(n){return S_(ra,n)}function hh(n,s){return ra===null&&aa(n),S_(n,s)}function S_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},fs===null){if(n===null)throw Error(i(308));fs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else fs=fs.next=s;return o}var Dw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},Nw=r.unstable_scheduleCallback,xw=r.unstable_NormalPriority,ze={$$typeof:rt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tm(){return{controller:new Dw,data:new Map,refCount:0}}function Zl(n){n.refCount--,n.refCount===0&&Nw(xw,function(){n.controller.abort()})}var Wl=null,em=0,ho=0,fo=null;function Vw(n,s){if(Wl===null){var o=Wl=[];em=0,ho=sp(),fo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return em++,s.then(b_,b_),s}function b_(){if(--em===0&&Wl!==null){fo!==null&&(fo.status="fulfilled");var n=Wl;Wl=null,ho=0,fo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Mw(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var A_=J.S;J.S=function(n,s){oT=en(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Vw(n,s),A_!==null&&A_(n,s)};var oa=k(null);function nm(){var n=oa.current;return n!==null?n:fe.pooledCache}function fh(n,s){s===null?Q(oa,oa.current):Q(oa,s.pool)}function I_(){var n=nm();return n===null?null:{parent:ze._currentValue,pool:n}}var mo=Error(i(460)),im=Error(i(474)),dh=Error(i(542)),mh={then:function(){}};function w_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function R_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(ui,ui),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,D_(n),n;default:if(typeof s.status=="string")s.then(ui,ui);else{if(n=fe,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,D_(n),n}throw ua=s,mo}}function la(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ua=o,mo):o}}var ua=null;function C_(){if(ua===null)throw Error(i(459));var n=ua;return ua=null,n}function D_(n){if(n===mo||n===dh)throw Error(i(483))}var po=null,tu=0;function ph(n){var s=tu;return tu+=1,po===null&&(po=[]),R_(po,n,s)}function eu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function gh(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function N_(n){function s(j,L){if(n){var F=j.deletions;F===null?(j.deletions=[L],j.flags|=16):F.push(L)}}function o(j,L){if(!n)return null;for(;L!==null;)s(j,L),L=L.sibling;return null}function u(j){for(var L=new Map;j!==null;)j.key!==null?L.set(j.key,j):L.set(j.index,j),j=j.sibling;return L}function f(j,L){return j=cs(j,L),j.index=0,j.sibling=null,j}function d(j,L,F){return j.index=F,n?(F=j.alternate,F!==null?(F=F.index,F<L?(j.flags|=67108866,L):F):(j.flags|=67108866,L)):(j.flags|=1048576,L)}function _(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function b(j,L,F,et){return L===null||L.tag!==6?(L=Gd(F,j.mode,et),L.return=j,L):(L=f(L,F),L.return=j,L)}function O(j,L,F,et){var At=F.type;return At===C?W(j,L,F.props.children,et,F.key):L!==null&&(L.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===A&&la(At)===L.type)?(L=f(L,F.props),eu(L,F),L.return=j,L):(L=lh(F.type,F.key,F.props,null,j.mode,et),eu(L,F),L.return=j,L)}function H(j,L,F,et){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=Kd(F,j.mode,et),L.return=j,L):(L=f(L,F.children||[]),L.return=j,L)}function W(j,L,F,et,At){return L===null||L.tag!==7?(L=ia(F,j.mode,et,At),L.return=j,L):(L=f(L,F),L.return=j,L)}function nt(j,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Gd(""+L,j.mode,F),L.return=j,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case R:return F=lh(L.type,L.key,L.props,null,j.mode,F),eu(F,L),F.return=j,F;case V:return L=Kd(L,j.mode,F),L.return=j,L;case A:return L=la(L),nt(j,L,F)}if(Xt(L)||U(L))return L=ia(L,j.mode,F,null),L.return=j,L;if(typeof L.then=="function")return nt(j,ph(L),F);if(L.$$typeof===rt)return nt(j,hh(j,L),F);gh(j,L)}return null}function K(j,L,F,et){var At=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return At!==null?null:b(j,L,""+F,et);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return F.key===At?O(j,L,F,et):null;case V:return F.key===At?H(j,L,F,et):null;case A:return F=la(F),K(j,L,F,et)}if(Xt(F)||U(F))return At!==null?null:W(j,L,F,et,null);if(typeof F.then=="function")return K(j,L,ph(F),et);if(F.$$typeof===rt)return K(j,L,hh(j,F),et);gh(j,F)}return null}function X(j,L,F,et,At){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return j=j.get(F)||null,b(L,j,""+et,At);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case R:return j=j.get(et.key===null?F:et.key)||null,O(L,j,et,At);case V:return j=j.get(et.key===null?F:et.key)||null,H(L,j,et,At);case A:return et=la(et),X(j,L,F,et,At)}if(Xt(et)||U(et))return j=j.get(F)||null,W(L,j,et,At,null);if(typeof et.then=="function")return X(j,L,F,ph(et),At);if(et.$$typeof===rt)return X(j,L,F,hh(L,et),At);gh(L,et)}return null}function _t(j,L,F,et){for(var At=null,Jt=null,St=L,kt=L=0,Ft=null;St!==null&&kt<F.length;kt++){St.index>kt?(Ft=St,St=null):Ft=St.sibling;var Zt=K(j,St,F[kt],et);if(Zt===null){St===null&&(St=Ft);break}n&&St&&Zt.alternate===null&&s(j,St),L=d(Zt,L,kt),Jt===null?At=Zt:Jt.sibling=Zt,Jt=Zt,St=Ft}if(kt===F.length)return o(j,St),Qt&&hs(j,kt),At;if(St===null){for(;kt<F.length;kt++)St=nt(j,F[kt],et),St!==null&&(L=d(St,L,kt),Jt===null?At=St:Jt.sibling=St,Jt=St);return Qt&&hs(j,kt),At}for(St=u(St);kt<F.length;kt++)Ft=X(St,j,kt,F[kt],et),Ft!==null&&(n&&Ft.alternate!==null&&St.delete(Ft.key===null?kt:Ft.key),L=d(Ft,L,kt),Jt===null?At=Ft:Jt.sibling=Ft,Jt=Ft);return n&&St.forEach(function(dr){return s(j,dr)}),Qt&&hs(j,kt),At}function wt(j,L,F,et){if(F==null)throw Error(i(151));for(var At=null,Jt=null,St=L,kt=L=0,Ft=null,Zt=F.next();St!==null&&!Zt.done;kt++,Zt=F.next()){St.index>kt?(Ft=St,St=null):Ft=St.sibling;var dr=K(j,St,Zt.value,et);if(dr===null){St===null&&(St=Ft);break}n&&St&&dr.alternate===null&&s(j,St),L=d(dr,L,kt),Jt===null?At=dr:Jt.sibling=dr,Jt=dr,St=Ft}if(Zt.done)return o(j,St),Qt&&hs(j,kt),At;if(St===null){for(;!Zt.done;kt++,Zt=F.next())Zt=nt(j,Zt.value,et),Zt!==null&&(L=d(Zt,L,kt),Jt===null?At=Zt:Jt.sibling=Zt,Jt=Zt);return Qt&&hs(j,kt),At}for(St=u(St);!Zt.done;kt++,Zt=F.next())Zt=X(St,j,kt,Zt.value,et),Zt!==null&&(n&&Zt.alternate!==null&&St.delete(Zt.key===null?kt:Zt.key),L=d(Zt,L,kt),Jt===null?At=Zt:Jt.sibling=Zt,Jt=Zt);return n&&St.forEach(function(H1){return s(j,H1)}),Qt&&hs(j,kt),At}function he(j,L,F,et){if(typeof F=="object"&&F!==null&&F.type===C&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case R:t:{for(var At=F.key;L!==null;){if(L.key===At){if(At=F.type,At===C){if(L.tag===7){o(j,L.sibling),et=f(L,F.props.children),et.return=j,j=et;break t}}else if(L.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===A&&la(At)===L.type){o(j,L.sibling),et=f(L,F.props),eu(et,F),et.return=j,j=et;break t}o(j,L);break}else s(j,L);L=L.sibling}F.type===C?(et=ia(F.props.children,j.mode,et,F.key),et.return=j,j=et):(et=lh(F.type,F.key,F.props,null,j.mode,et),eu(et,F),et.return=j,j=et)}return _(j);case V:t:{for(At=F.key;L!==null;){if(L.key===At)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){o(j,L.sibling),et=f(L,F.children||[]),et.return=j,j=et;break t}else{o(j,L);break}else s(j,L);L=L.sibling}et=Kd(F,j.mode,et),et.return=j,j=et}return _(j);case A:return F=la(F),he(j,L,F,et)}if(Xt(F))return _t(j,L,F,et);if(U(F)){if(At=U(F),typeof At!="function")throw Error(i(150));return F=At.call(F),wt(j,L,F,et)}if(typeof F.then=="function")return he(j,L,ph(F),et);if(F.$$typeof===rt)return he(j,L,hh(j,F),et);gh(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(o(j,L.sibling),et=f(L,F),et.return=j,j=et):(o(j,L),et=Gd(F,j.mode,et),et.return=j,j=et),_(j)):o(j,L)}return function(j,L,F,et){try{tu=0;var At=he(j,L,F,et);return po=null,At}catch(St){if(St===mo||St===dh)throw St;var Jt=Vn(29,St,null,j.mode);return Jt.lanes=et,Jt.return=j,Jt}finally{}}}var ca=N_(!0),x_=N_(!1),Xs=!1;function sm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Js(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Zs(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(te&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=oh(n),m_(n,null,o),s}return ah(n,u,s,o),oh(n)}function nu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Dl(n,o)}}function am(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,o=o.next}while(o!==null);d===null?f=d=s:d=d.next=s}else f=d=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var om=!1;function iu(){if(om){var n=fo;if(n!==null)throw n}}function su(n,s,o,u){om=!1;var f=n.updateQueue;Xs=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var O=b,H=O.next;O.next=null,_===null?d=H:_.next=H,_=O;var W=n.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==_&&(b===null?W.firstBaseUpdate=H:b.next=H,W.lastBaseUpdate=O))}if(d!==null){var nt=f.baseState;_=0,W=H=O=null,b=d;do{var K=b.lane&-536870913,X=K!==b.lane;if(X?(qt&K)===K:(u&K)===K){K!==0&&K===ho&&(om=!0),W!==null&&(W=W.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var _t=n,wt=b;K=s;var he=o;switch(wt.tag){case 1:if(_t=wt.payload,typeof _t=="function"){nt=_t.call(he,nt,K);break t}nt=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=wt.payload,K=typeof _t=="function"?_t.call(he,nt,K):_t,K==null)break t;nt=E({},nt,K);break t;case 2:Xs=!0}}K=b.callback,K!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[K]:X.push(K))}else X={lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(H=W=X,O=nt):W=W.next=X,_|=K;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;X=b,b=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);W===null&&(O=nt),f.baseState=O,f.firstBaseUpdate=H,f.lastBaseUpdate=W,d===null&&(f.shared.lanes=0),ir|=_,n.lanes=_,n.memoizedState=nt}}function V_(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function M_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)V_(o[n],s)}var go=k(null),yh=k(0);function O_(n,s){n=Ss,Q(yh,n),Q(go,s),Ss=n|s.baseLanes}function lm(){Q(yh,Ss),Q(go,go.current)}function um(){Ss=yh.current,tt(go),tt(yh)}var Mn=k(null),ti=null;function Ws(n){var s=n.alternate;Q(Ne,Ne.current&1),Q(Mn,n),ti===null&&(s===null||go.current!==null||s.memoizedState!==null)&&(ti=n)}function cm(n){Q(Ne,Ne.current),Q(Mn,n),ti===null&&(ti=n)}function P_(n){n.tag===22?(Q(Ne,Ne.current),Q(Mn,n),ti===null&&(ti=n)):tr()}function tr(){Q(Ne,Ne.current),Q(Mn,Mn.current)}function On(n){tt(Mn),ti===n&&(ti=null),tt(Ne)}var Ne=k(0);function _h(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||gp(o)||yp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ms=0,Pt=null,ue=null,je=null,vh=!1,yo=!1,ha=!1,Th=0,ru=0,_o=null,Ow=0;function Ae(){throw Error(i(321))}function hm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!xn(n[o],s[o]))return!1;return!0}function fm(n,s,o,u,f,d){return ms=d,Pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=n===null||n.memoizedState===null?_v:Rm,ha=!1,d=o(u,f),ha=!1,yo&&(d=L_(s,o,u,f)),k_(n),d}function k_(n){J.H=lu;var s=ue!==null&&ue.next!==null;if(ms=0,je=ue=Pt=null,vh=!1,ru=0,_o=null,s)throw Error(i(300));n===null||Be||(n=n.dependencies,n!==null&&ch(n)&&(Be=!0))}function L_(n,s,o,u){Pt=n;var f=0;do{if(yo&&(_o=null),ru=0,yo=!1,25<=f)throw Error(i(301));if(f+=1,je=ue=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}J.H=vv,d=s(o,u)}while(yo);return d}function Pw(){var n=J.H,s=n.useState()[0];return s=typeof s.then=="function"?au(s):s,n=n.useState()[0],(ue!==null?ue.memoizedState:null)!==n&&(Pt.flags|=1024),s}function dm(){var n=Th!==0;return Th=0,n}function mm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function pm(n){if(vh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}vh=!1}ms=0,je=ue=Pt=null,yo=!1,ru=Th=0,_o=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?Pt.memoizedState=je=n:je=je.next=n,je}function xe(){if(ue===null){var n=Pt.alternate;n=n!==null?n.memoizedState:null}else n=ue.next;var s=je===null?Pt.memoizedState:je.next;if(s!==null)je=s,ue=n;else{if(n===null)throw Pt.alternate===null?Error(i(467)):Error(i(310));ue=n,n={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},je===null?Pt.memoizedState=je=n:je=je.next=n}return je}function Eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(n){var s=ru;return ru+=1,_o===null&&(_o=[]),n=R_(_o,n,s),s=Pt,(je===null?s.memoizedState:je.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?_v:Rm),n}function Sh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return au(n);if(n.$$typeof===rt)return an(n)}throw Error(i(438,String(n)))}function gm(n){var s=null,o=Pt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Pt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Eh(),Pt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=P;return s.index++,o}function ps(n,s){return typeof s=="function"?s(n):s}function bh(n){var s=xe();return ym(s,ue,n)}function ym(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,d=u.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}s.baseQueue=f=d,u.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{s=f.next;var b=_=null,O=null,H=s,W=!1;do{var nt=H.lane&-536870913;if(nt!==H.lane?(qt&nt)===nt:(ms&nt)===nt){var K=H.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),nt===ho&&(W=!0);else if((ms&K)===K){H=H.next,K===ho&&(W=!0);continue}else nt={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(b=O=nt,_=d):O=O.next=nt,Pt.lanes|=K,ir|=K;nt=H.action,ha&&o(d,nt),d=H.hasEagerState?H.eagerState:o(d,nt)}else K={lane:nt,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(b=O=K,_=d):O=O.next=K,Pt.lanes|=nt,ir|=nt;H=H.next}while(H!==null&&H!==s);if(O===null?_=d:O.next=b,!xn(d,n.memoizedState)&&(Be=!0,W&&(o=fo,o!==null)))throw o;n.memoizedState=d,n.baseState=_,n.baseQueue=O,u.lastRenderedState=d}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function _m(n){var s=xe(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,d=s.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);xn(d,s.memoizedState)||(Be=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),o.lastRenderedState=d}return[d,u]}function U_(n,s,o){var u=Pt,f=xe(),d=Qt;if(d){if(o===void 0)throw Error(i(407));o=o()}else o=s();var _=!xn((ue||f).memoizedState,o);if(_&&(f.memoizedState=o,Be=!0),f=f.queue,Em(B_.bind(null,u,f,n),[n]),f.getSnapshot!==s||_||je!==null&&je.memoizedState.tag&1){if(u.flags|=2048,vo(9,{destroy:void 0},j_.bind(null,u,f,o,s),null),fe===null)throw Error(i(349));d||(ms&127)!==0||z_(u,s,o)}return o}function z_(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Pt.updateQueue,s===null?(s=Eh(),Pt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function j_(n,s,o,u){s.value=o,s.getSnapshot=u,q_(s)&&F_(n)}function B_(n,s,o){return o(function(){q_(s)&&F_(n)})}function q_(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!xn(n,o)}catch{return!0}}function F_(n){var s=na(n,2);s!==null&&wn(s,n,2)}function vm(n){var s=yn();if(typeof n=="function"){var o=n;if(n=o(),ha){Hn(!0);try{o()}finally{Hn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:n},s}function H_(n,s,o,u){return n.baseState=o,ym(n,ue,typeof u=="function"?u:ps)}function kw(n,s,o,u,f){if(wh(n))throw Error(i(485));if(n=s.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};J.T!==null?o(!0):d.isTransition=!1,u(d),o=s.pending,o===null?(d.next=s.pending=d,G_(s,d)):(d.next=o.next,s.pending=o.next=d)}}function G_(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var d=J.T,_={};J.T=_;try{var b=o(f,u),O=J.S;O!==null&&O(_,b),K_(n,s,b)}catch(H){Tm(n,s,H)}finally{d!==null&&_.types!==null&&(d.types=_.types),J.T=d}}else try{d=o(f,u),K_(n,s,d)}catch(H){Tm(n,s,H)}}function K_(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Q_(n,s,u)},function(u){return Tm(n,s,u)}):Q_(n,s,o)}function Q_(n,s,o){s.status="fulfilled",s.value=o,Y_(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,G_(n,o)))}function Tm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Y_(s),s=s.next;while(s!==u)}n.action=null}function Y_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function $_(n,s){return s}function X_(n,s){if(Qt){var o=fe.formState;if(o!==null){t:{var u=Pt;if(Qt){if(pe){e:{for(var f=pe,d=Wn;f.nodeType!==8;){if(!d){f=null;break e}if(f=ei(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){pe=ei(f.nextSibling),u=f.data==="F!";break t}}Ys(u)}u=!1}u&&(s=o[0])}}return o=yn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$_,lastRenderedState:s},o.queue=u,o=pv.bind(null,Pt,u),u.dispatch=o,u=vm(!1),d=wm.bind(null,Pt,!1,u.queue),u=yn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=kw.bind(null,Pt,f,d,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function J_(n){var s=xe();return Z_(s,ue,n)}function Z_(n,s,o){if(s=ym(n,s,$_)[0],n=bh(ps)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=au(s)}catch(_){throw _===mo?dh:_}else u=s;s=xe();var f=s.queue,d=f.dispatch;return o!==s.memoizedState&&(Pt.flags|=2048,vo(9,{destroy:void 0},Lw.bind(null,f,o),null)),[u,d,n]}function Lw(n,s){n.action=s}function W_(n){var s=xe(),o=ue;if(o!==null)return Z_(s,o,n);xe(),s=s.memoizedState,o=xe();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function vo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Pt.updateQueue,s===null&&(s=Eh(),Pt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function tv(){return xe().memoizedState}function Ah(n,s,o,u){var f=yn();Pt.flags|=n,f.memoizedState=vo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Ih(n,s,o,u){var f=xe();u=u===void 0?null:u;var d=f.memoizedState.inst;ue!==null&&u!==null&&hm(u,ue.memoizedState.deps)?f.memoizedState=vo(s,d,o,u):(Pt.flags|=n,f.memoizedState=vo(1|s,d,o,u))}function ev(n,s){Ah(8390656,8,n,s)}function Em(n,s){Ih(2048,8,n,s)}function Uw(n){Pt.flags|=4;var s=Pt.updateQueue;if(s===null)s=Eh(),Pt.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function nv(n){var s=xe().memoizedState;return Uw({ref:s,nextImpl:n}),function(){if((te&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function iv(n,s){return Ih(4,2,n,s)}function sv(n,s){return Ih(4,4,n,s)}function rv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function av(n,s,o){o=o!=null?o.concat([n]):null,Ih(4,4,rv.bind(null,s,n),o)}function Sm(){}function ov(n,s){var o=xe();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&hm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function lv(n,s){var o=xe();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&hm(s,u[1]))return u[0];if(u=n(),ha){Hn(!0);try{n()}finally{Hn(!1)}}return o.memoizedState=[u,s],u}function bm(n,s,o){return o===void 0||(ms&1073741824)!==0&&(qt&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=uT(),Pt.lanes|=n,ir|=n,o)}function uv(n,s,o,u){return xn(o,s)?o:go.current!==null?(n=bm(n,o,u),xn(n,s)||(Be=!0),n):(ms&42)===0||(ms&1073741824)!==0&&(qt&261930)===0?(Be=!0,n.memoizedState=o):(n=uT(),Pt.lanes|=n,ir|=n,s)}function cv(n,s,o,u,f){var d=lt.p;lt.p=d!==0&&8>d?d:8;var _=J.T,b={};J.T=b,wm(n,!1,s,o);try{var O=f(),H=J.S;if(H!==null&&H(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=Mw(O,u);ou(n,s,W,Ln(n))}else ou(n,s,u,Ln(n))}catch(nt){ou(n,s,{then:function(){},status:"rejected",reason:nt},Ln())}finally{lt.p=d,_!==null&&b.types!==null&&(_.types=b.types),J.T=_}}function zw(){}function Am(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=hv(n).queue;cv(n,f,s,Tt,o===null?zw:function(){return fv(n),o(u)})}function hv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:Tt},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function fv(n){var s=hv(n);s.next===null&&(s=n.alternate.memoizedState),ou(n,s.next.queue,{},Ln())}function Im(){return an(Au)}function dv(){return xe().memoizedState}function mv(){return xe().memoizedState}function jw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Ln();n=Js(o);var u=Zs(s,n,o);u!==null&&(wn(u,s,o),nu(u,s,o)),s={cache:tm()},n.payload=s;return}s=s.return}}function Bw(n,s,o){var u=Ln();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},wh(n)?gv(s,o):(o=Fd(n,s,o,u),o!==null&&(wn(o,n,u),yv(o,s,u)))}function pv(n,s,o){var u=Ln();ou(n,s,o,u)}function ou(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(wh(n))gv(s,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var _=s.lastRenderedState,b=d(_,o);if(f.hasEagerState=!0,f.eagerState=b,xn(b,_))return ah(n,s,f,0),fe===null&&rh(),!1}catch{}finally{}if(o=Fd(n,s,f,u),o!==null)return wn(o,n,u),yv(o,s,u),!0}return!1}function wm(n,s,o,u){if(u={lane:2,revertLane:sp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},wh(n)){if(s)throw Error(i(479))}else s=Fd(n,o,u,2),s!==null&&wn(s,n,2)}function wh(n){var s=n.alternate;return n===Pt||s!==null&&s===Pt}function gv(n,s){yo=vh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function yv(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Dl(n,o)}}var lu={readContext:an,use:Sh,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useLayoutEffect:Ae,useInsertionEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useSyncExternalStore:Ae,useId:Ae,useHostTransitionStatus:Ae,useFormState:Ae,useActionState:Ae,useOptimistic:Ae,useMemoCache:Ae,useCacheRefresh:Ae};lu.useEffectEvent=Ae;var _v={readContext:an,use:Sh,useCallback:function(n,s){return yn().memoizedState=[n,s===void 0?null:s],n},useContext:an,useEffect:ev,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Ah(4194308,4,rv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Ah(4194308,4,n,s)},useInsertionEffect:function(n,s){Ah(4,2,n,s)},useMemo:function(n,s){var o=yn();s=s===void 0?null:s;var u=n();if(ha){Hn(!0);try{n()}finally{Hn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=yn();if(o!==void 0){var f=o(s);if(ha){Hn(!0);try{o(s)}finally{Hn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=Bw.bind(null,Pt,n),[u.memoizedState,n]},useRef:function(n){var s=yn();return n={current:n},s.memoizedState=n},useState:function(n){n=vm(n);var s=n.queue,o=pv.bind(null,Pt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Sm,useDeferredValue:function(n,s){var o=yn();return bm(o,n,s)},useTransition:function(){var n=vm(!1);return n=cv.bind(null,Pt,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Pt,f=yn();if(Qt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),fe===null)throw Error(i(349));(qt&127)!==0||z_(u,s,o)}f.memoizedState=o;var d={value:o,getSnapshot:s};return f.queue=d,ev(B_.bind(null,u,d,n),[n]),u.flags|=2048,vo(9,{destroy:void 0},j_.bind(null,u,d,o,s),null),o},useId:function(){var n=yn(),s=fe.identifierPrefix;if(Qt){var o=Gi,u=Hi;o=(u&~(1<<32-Ce(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Th++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=Ow++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Im,useFormState:X_,useActionState:X_,useOptimistic:function(n){var s=yn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=wm.bind(null,Pt,!0,o),o.dispatch=s,[n,s]},useMemoCache:gm,useCacheRefresh:function(){return yn().memoizedState=jw.bind(null,Pt)},useEffectEvent:function(n){var s=yn(),o={impl:n};return s.memoizedState=o,function(){if((te&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Rm={readContext:an,use:Sh,useCallback:ov,useContext:an,useEffect:Em,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:lv,useReducer:bh,useRef:tv,useState:function(){return bh(ps)},useDebugValue:Sm,useDeferredValue:function(n,s){var o=xe();return uv(o,ue.memoizedState,n,s)},useTransition:function(){var n=bh(ps)[0],s=xe().memoizedState;return[typeof n=="boolean"?n:au(n),s]},useSyncExternalStore:U_,useId:dv,useHostTransitionStatus:Im,useFormState:J_,useActionState:J_,useOptimistic:function(n,s){var o=xe();return H_(o,ue,n,s)},useMemoCache:gm,useCacheRefresh:mv};Rm.useEffectEvent=nv;var vv={readContext:an,use:Sh,useCallback:ov,useContext:an,useEffect:Em,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:lv,useReducer:_m,useRef:tv,useState:function(){return _m(ps)},useDebugValue:Sm,useDeferredValue:function(n,s){var o=xe();return ue===null?bm(o,n,s):uv(o,ue.memoizedState,n,s)},useTransition:function(){var n=_m(ps)[0],s=xe().memoizedState;return[typeof n=="boolean"?n:au(n),s]},useSyncExternalStore:U_,useId:dv,useHostTransitionStatus:Im,useFormState:W_,useActionState:W_,useOptimistic:function(n,s){var o=xe();return ue!==null?H_(o,ue,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:gm,useCacheRefresh:mv};vv.useEffectEvent=nv;function Cm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Dm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Ln(),f=Js(u);f.payload=s,o!=null&&(f.callback=o),s=Zs(n,f,u),s!==null&&(wn(s,n,u),nu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Ln(),f=Js(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Zs(n,f,u),s!==null&&(wn(s,n,u),nu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Ln(),u=Js(o);u.tag=2,s!=null&&(u.callback=s),s=Zs(n,u,o),s!==null&&(wn(s,n,o),nu(s,n,o))}};function Tv(n,s,o,u,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,d,_):s.prototype&&s.prototype.isPureReactComponent?!Yl(o,u)||!Yl(f,d):!0}function Ev(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Dm.enqueueReplaceState(s,s.state,null)}function fa(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Sv(n){sh(n)}function bv(n){console.error(n)}function Av(n){sh(n)}function Rh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Iv(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Nm(n,s,o){return o=Js(o),o.tag=3,o.payload={element:null},o.callback=function(){Rh(n,s)},o}function wv(n){return n=Js(n),n.tag=3,n}function Rv(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var d=u.value;n.payload=function(){return f(d)},n.callback=function(){Iv(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Iv(s,o,u),typeof f!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function qw(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&co(s,o,f,!0),o=Mn.current,o!==null){switch(o.tag){case 31:case 13:return ti===null?zh():o.alternate===null&&Ie===0&&(Ie=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===mh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),ep(n,u,f)),!1;case 22:return o.flags|=65536,u===mh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),ep(n,u,f)),!1}throw Error(i(435,o.tag))}return ep(n,u,f),zh(),!1}if(Qt)return s=Mn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==$d&&(n=Error(i(422),{cause:u}),Jl(Xn(n,o)))):(u!==$d&&(s=Error(i(423),{cause:u}),Jl(Xn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Xn(u,o),f=Nm(n.stateNode,u,f),am(n,f),Ie!==4&&(Ie=2)),!1;var d=Error(i(520),{cause:u});if(d=Xn(d,o),gu===null?gu=[d]:gu.push(d),Ie!==4&&(Ie=2),s===null)return!0;u=Xn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Nm(o.stateNode,u,n),am(o,n),!1;case 1:if(s=o.type,d=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(sr===null||!sr.has(d))))return o.flags|=65536,f&=-f,o.lanes|=f,f=wv(f),Rv(f,n,o,u),am(o,f),!1}o=o.return}while(o!==null);return!1}var xm=Error(i(461)),Be=!1;function on(n,s,o,u){s.child=n===null?x_(s,null,o,u):ca(s,n.child,o,u)}function Cv(n,s,o,u,f){o=o.render;var d=s.ref;if("ref"in u){var _={};for(var b in u)b!=="ref"&&(_[b]=u[b])}else _=u;return aa(s),u=fm(n,s,o,_,d,f),b=dm(),n!==null&&!Be?(mm(n,s,f),gs(n,s,f)):(Qt&&b&&Qd(s),s.flags|=1,on(n,s,u,f),s.child)}function Dv(n,s,o,u,f){if(n===null){var d=o.type;return typeof d=="function"&&!Hd(d)&&d.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=d,Nv(n,s,d,u,f)):(n=lh(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(d=n.child,!zm(n,f)){var _=d.memoizedProps;if(o=o.compare,o=o!==null?o:Yl,o(_,u)&&n.ref===s.ref)return gs(n,s,f)}return s.flags|=1,n=cs(d,u),n.ref=s.ref,n.return=s,s.child=n}function Nv(n,s,o,u,f){if(n!==null){var d=n.memoizedProps;if(Yl(d,u)&&n.ref===s.ref)if(Be=!1,s.pendingProps=u=d,zm(n,f))(n.flags&131072)!==0&&(Be=!0);else return s.lanes=n.lanes,gs(n,s,f)}return Vm(n,s,o,u,f)}function xv(n,s,o,u){var f=u.children,d=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~d}else u=0,s.child=null;return Vv(n,s,d,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&fh(s,d!==null?d.cachePool:null),d!==null?O_(s,d):lm(),P_(s);else return u=s.lanes=536870912,Vv(n,s,d!==null?d.baseLanes|o:o,o,u)}else d!==null?(fh(s,d.cachePool),O_(s,d),tr(),s.memoizedState=null):(n!==null&&fh(s,null),lm(),tr());return on(n,s,f,o),s.child}function uu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Vv(n,s,o,u,f){var d=nm();return d=d===null?null:{parent:ze._currentValue,pool:d},s.memoizedState={baseLanes:o,cachePool:d},n!==null&&fh(s,null),lm(),P_(s),n!==null&&co(n,s,u,!0),s.childLanes=f,null}function Ch(n,s){return s=Nh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Mv(n,s,o){return ca(s,n.child,null,o),n=Ch(s,s.pendingProps),n.flags|=2,On(s),s.memoizedState=null,n}function Fw(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Qt){if(u.mode==="hidden")return n=Ch(s,u),s.lanes=536870912,uu(null,n);if(cm(s),(n=pe)?(n=GT(n,Wn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ks!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},o=g_(n),o.return=s,s.child=o,rn=s,pe=null)):n=null,n===null)throw Ys(s);return s.lanes=536870912,null}return Ch(s,u)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(cm(s),f)if(s.flags&256)s.flags&=-257,s=Mv(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Be||co(n,s,o,!1),f=(o&n.childLanes)!==0,Be||f){if(u=fe,u!==null&&(_=Nl(u,o),_!==0&&_!==d.retryLane))throw d.retryLane=_,na(n,_),wn(u,n,_),xm;zh(),s=Mv(n,s,o)}else n=d.treeContext,pe=ei(_.nextSibling),rn=s,Qt=!0,Qs=null,Wn=!1,n!==null&&v_(s,n),s=Ch(s,u),s.flags|=4096;return s}return n=cs(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Dh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Vm(n,s,o,u,f){return aa(s),o=fm(n,s,o,u,void 0,f),u=dm(),n!==null&&!Be?(mm(n,s,f),gs(n,s,f)):(Qt&&u&&Qd(s),s.flags|=1,on(n,s,o,f),s.child)}function Ov(n,s,o,u,f,d){return aa(s),s.updateQueue=null,o=L_(s,u,o,f),k_(n),u=dm(),n!==null&&!Be?(mm(n,s,d),gs(n,s,d)):(Qt&&u&&Qd(s),s.flags|=1,on(n,s,o,d),s.child)}function Pv(n,s,o,u,f){if(aa(s),s.stateNode===null){var d=ao,_=o.contextType;typeof _=="object"&&_!==null&&(d=an(_)),d=new o(u,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Dm,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=u,d.state=s.memoizedState,d.refs={},sm(s),_=o.contextType,d.context=typeof _=="object"&&_!==null?an(_):ao,d.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Cm(s,o,_,u),d.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Dm.enqueueReplaceState(d,d.state,null),su(s,u,d,f),iu(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){d=s.stateNode;var b=s.memoizedProps,O=fa(o,b);d.props=O;var H=d.context,W=o.contextType;_=ao,typeof W=="object"&&W!==null&&(_=an(W));var nt=o.getDerivedStateFromProps;W=typeof nt=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||H!==_)&&Ev(s,d,u,_),Xs=!1;var K=s.memoizedState;d.state=K,su(s,u,d,f),iu(),H=s.memoizedState,b||K!==H||Xs?(typeof nt=="function"&&(Cm(s,o,nt,u),H=s.memoizedState),(O=Xs||Tv(s,o,O,u,K,H,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),d.props=u,d.state=H,d.context=_,u=O):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{d=s.stateNode,rm(n,s),_=s.memoizedProps,W=fa(o,_),d.props=W,nt=s.pendingProps,K=d.context,H=o.contextType,O=ao,typeof H=="object"&&H!==null&&(O=an(H)),b=o.getDerivedStateFromProps,(H=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==nt||K!==O)&&Ev(s,d,u,O),Xs=!1,K=s.memoizedState,d.state=K,su(s,u,d,f),iu();var X=s.memoizedState;_!==nt||K!==X||Xs||n!==null&&n.dependencies!==null&&ch(n.dependencies)?(typeof b=="function"&&(Cm(s,o,b,u),X=s.memoizedState),(W=Xs||Tv(s,o,W,u,K,X,O)||n!==null&&n.dependencies!==null&&ch(n.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(u,X,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(u,X,O)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=X),d.props=u,d.state=X,d.context=O,u=W):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),u=!1)}return d=u,Dh(n,s),u=(s.flags&128)!==0,d||u?(d=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,n!==null&&u?(s.child=ca(s,n.child,null,f),s.child=ca(s,null,o,f)):on(n,s,o,f),s.memoizedState=d.state,n=s.child):n=gs(n,s,f),n}function kv(n,s,o,u){return sa(),s.flags|=256,on(n,s,o,u),s.child}var Mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Om(n){return{baseLanes:n,cachePool:I_()}}function Pm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=kn),n}function Lv(n,s,o){var u=s.pendingProps,f=!1,d=(s.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Ne.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Qt){if(f?Ws(s):tr(),(n=pe)?(n=GT(n,Wn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ks!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},o=g_(n),o.return=s,s.child=o,rn=s,pe=null)):n=null,n===null)throw Ys(s);return yp(n)?s.lanes=32:s.lanes=536870912,null}var b=u.children;return u=u.fallback,f?(tr(),f=s.mode,b=Nh({mode:"hidden",children:b},f),u=ia(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,u=s.child,u.memoizedState=Om(o),u.childLanes=Pm(n,_,o),s.memoizedState=Mm,uu(null,u)):(Ws(s),km(s,b))}var O=n.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(d)s.flags&256?(Ws(s),s.flags&=-257,s=Lm(n,s,o)):s.memoizedState!==null?(tr(),s.child=n.child,s.flags|=128,s=null):(tr(),b=u.fallback,f=s.mode,u=Nh({mode:"visible",children:u.children},f),b=ia(b,f,o,null),b.flags|=2,u.return=s,b.return=s,u.sibling=b,s.child=u,ca(s,n.child,null,o),u=s.child,u.memoizedState=Om(o),u.childLanes=Pm(n,_,o),s.memoizedState=Mm,s=uu(null,u));else if(Ws(s),yp(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var H=_.dgst;_=H,u=Error(i(419)),u.stack="",u.digest=_,Jl({value:u,source:null,stack:null}),s=Lm(n,s,o)}else if(Be||co(n,s,o,!1),_=(o&n.childLanes)!==0,Be||_){if(_=fe,_!==null&&(u=Nl(_,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,na(n,u),wn(_,n,u),xm;gp(b)||zh(),s=Lm(n,s,o)}else gp(b)?(s.flags|=192,s.child=n.child,s=null):(n=O.treeContext,pe=ei(b.nextSibling),rn=s,Qt=!0,Qs=null,Wn=!1,n!==null&&v_(s,n),s=km(s,u.children),s.flags|=4096);return s}return f?(tr(),b=u.fallback,f=s.mode,O=n.child,H=O.sibling,u=cs(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,H!==null?b=cs(H,b):(b=ia(b,f,o,null),b.flags|=2),b.return=s,u.return=s,u.sibling=b,s.child=u,uu(null,u),u=s.child,b=n.child.memoizedState,b===null?b=Om(o):(f=b.cachePool,f!==null?(O=ze._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=I_(),b={baseLanes:b.baseLanes|o,cachePool:f}),u.memoizedState=b,u.childLanes=Pm(n,_,o),s.memoizedState=Mm,uu(n.child,u)):(Ws(s),o=n.child,n=o.sibling,o=cs(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function km(n,s){return s=Nh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Nh(n,s){return n=Vn(22,n,null,s),n.lanes=0,n}function Lm(n,s,o){return ca(s,n.child,null,o),n=km(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Uv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Zd(n.return,s,o)}function Um(n,s,o,u,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=d)}function zv(n,s,o){var u=s.pendingProps,f=u.revealOrder,d=u.tail;u=u.children;var _=Ne.current,b=(_&2)!==0;if(b?(_=_&1|2,s.flags|=128):_&=1,Q(Ne,_),on(n,s,u,o),u=Qt?Xl:0,!b&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Uv(n,o,s);else if(n.tag===19)Uv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&_h(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Um(s,!1,f,o,d,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&_h(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Um(s,!0,o,null,d,u);break;case"together":Um(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function gs(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),ir|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(co(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=cs(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=cs(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function zm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ch(n)))}function Hw(n,s,o){switch(s.tag){case 3:Rt(s,s.stateNode.containerInfo),$s(s,ze,n.memoizedState.cache),sa();break;case 27:case 5:ut(s);break;case 4:Rt(s,s.stateNode.containerInfo);break;case 10:$s(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,cm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ws(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Lv(n,s,o):(Ws(s),n=gs(n,s,o),n!==null?n.sibling:null);Ws(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(co(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return zv(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Q(Ne,Ne.current),u)break;return null;case 22:return s.lanes=0,xv(n,s,o,s.pendingProps);case 24:$s(s,ze,n.memoizedState.cache)}return gs(n,s,o)}function jv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Be=!0;else{if(!zm(n,o)&&(s.flags&128)===0)return Be=!1,Hw(n,s,o);Be=(n.flags&131072)!==0}else Be=!1,Qt&&(s.flags&1048576)!==0&&__(s,Xl,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(n=la(s.elementType),s.type=n,typeof n=="function")Hd(n)?(u=fa(n,u),s.tag=1,s=Pv(null,s,n,u,o)):(s.tag=0,s=Vm(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===gt){s.tag=11,s=Cv(null,s,n,u,o);break t}else if(f===D){s.tag=14,s=Dv(null,s,n,u,o);break t}}throw s=Kt(n)||n,Error(i(306,s,""))}}return s;case 0:return Vm(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=fa(u,s.pendingProps),Pv(n,s,u,f,o);case 3:t:{if(Rt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var d=s.memoizedState;f=d.element,rm(n,s),su(s,u,null,o);var _=s.memoizedState;if(u=_.cache,$s(s,ze,u),u!==d.cache&&Wd(s,[ze],o,!0),iu(),u=_.element,d.isDehydrated)if(d={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=kv(n,s,u,o);break t}else if(u!==f){f=Xn(Error(i(424)),s),Jl(f),s=kv(n,s,u,o);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(pe=ei(n.firstChild),rn=s,Qt=!0,Qs=null,Wn=!0,o=x_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(sa(),u===f){s=gs(n,s,o);break t}on(n,s,u,o)}s=s.child}return s;case 26:return Dh(n,s),n===null?(o=JT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Qt||(o=s.type,n=s.pendingProps,u=Kh(it.current).createElement(o),u[ke]=s,u[Xe]=n,ln(u,o,n),Le(u),s.stateNode=u):s.memoizedState=JT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ut(s),n===null&&Qt&&(u=s.stateNode=YT(s.type,s.pendingProps,it.current),rn=s,Wn=!0,f=pe,lr(s.type)?(_p=f,pe=ei(u.firstChild)):pe=f),on(n,s,s.pendingProps.children,o),Dh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Qt&&((f=u=pe)&&(u=T1(u,s.type,s.pendingProps,Wn),u!==null?(s.stateNode=u,rn=s,pe=ei(u.firstChild),Wn=!1,f=!0):f=!1),f||Ys(s)),ut(s),f=s.type,d=s.pendingProps,_=n!==null?n.memoizedProps:null,u=d.children,dp(f,d)?u=null:_!==null&&dp(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=fm(n,s,Pw,null,null,o),Au._currentValue=f),Dh(n,s),on(n,s,u,o),s.child;case 6:return n===null&&Qt&&((n=o=pe)&&(o=E1(o,s.pendingProps,Wn),o!==null?(s.stateNode=o,rn=s,pe=null,n=!0):n=!1),n||Ys(s)),null;case 13:return Lv(n,s,o);case 4:return Rt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=ca(s,null,u,o):on(n,s,u,o),s.child;case 11:return Cv(n,s,s.type,s.pendingProps,o);case 7:return on(n,s,s.pendingProps,o),s.child;case 8:return on(n,s,s.pendingProps.children,o),s.child;case 12:return on(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,$s(s,s.type,u.value),on(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,aa(s),f=an(f),u=u(f),s.flags|=1,on(n,s,u,o),s.child;case 14:return Dv(n,s,s.type,s.pendingProps,o);case 15:return Nv(n,s,s.type,s.pendingProps,o);case 19:return zv(n,s,o);case 31:return Fw(n,s,o);case 22:return xv(n,s,o,s.pendingProps);case 24:return aa(s),u=an(ze),n===null?(f=nm(),f===null&&(f=fe,d=tm(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=o),f=d),s.memoizedState={parent:u,cache:f},sm(s),$s(s,ze,f)):((n.lanes&o)!==0&&(rm(n,s),su(s,null,null,o),iu()),f=n.memoizedState,d=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),$s(s,ze,u)):(u=d.cache,$s(s,ze,u),u!==f.cache&&Wd(s,[ze],o,!0))),on(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ys(n){n.flags|=4}function jm(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(dT())n.flags|=8192;else throw ua=mh,im}else n.flags&=-16777217}function Bv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!nE(s))if(dT())n.flags|=8192;else throw ua=mh,im}function xh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Lc():536870912,n.lanes|=s,bo|=s)}function cu(n,s){if(!Qt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ge(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function Gw(n,s,o){var u=s.pendingProps;switch(Yd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(s),null;case 1:return ge(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ds(ze),Vt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(uo(s)?ys(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xd())),ge(s),null;case 26:var f=s.type,d=s.memoizedState;return n===null?(ys(s),d!==null?(ge(s),Bv(s,d)):(ge(s),jm(s,f,null,u,o))):d?d!==n.memoizedState?(ys(s),ge(s),Bv(s,d)):(ge(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&ys(s),ge(s),jm(s,f,n,u,o)),null;case 27:if(Dt(s),o=it.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ys(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ge(s),null}n=ot.current,uo(s)?T_(s):(n=YT(f,u,o),s.stateNode=n,ys(s))}return ge(s),null;case 5:if(Dt(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ys(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ge(s),null}if(d=ot.current,uo(s))T_(s);else{var _=Kh(it.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?d.multiple=!0:u.size&&(d.size=u.size);break;default:d=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}d[ke]=s,d[Xe]=u;t:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break t;for(;_.sibling===null;){if(_.return===null||_.return===s)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=d;t:switch(ln(d,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&ys(s)}}return ge(s),jm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ys(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=it.current,uo(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=rn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[ke]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||LT(n.nodeValue,o)),n||Ys(s,!0)}else n=Kh(n).createTextNode(u),n[ke]=s,s.stateNode=n}return ge(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=uo(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[ke]=s}else sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ge(s),n=!1}else o=Xd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(On(s),s):(On(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ge(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=uo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[ke]=s}else sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ge(s),f=!1}else f=Xd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(On(s),s):(On(s),null)}return On(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),xh(s,s.updateQueue),ge(s),null);case 4:return Vt(),n===null&&lp(s.stateNode.containerInfo),ge(s),null;case 10:return ds(s.type),ge(s),null;case 19:if(tt(Ne),u=s.memoizedState,u===null)return ge(s),null;if(f=(s.flags&128)!==0,d=u.rendering,d===null)if(f)cu(u,!1);else{if(Ie!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(d=_h(n),d!==null){for(s.flags|=128,cu(u,!1),n=d.updateQueue,s.updateQueue=n,xh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)p_(o,n),o=o.sibling;return Q(Ne,Ne.current&1|2),Qt&&hs(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&en()>kh&&(s.flags|=128,f=!0,cu(u,!1),s.lanes=4194304)}else{if(!f)if(n=_h(d),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,xh(s,n),cu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!Qt)return ge(s),null}else 2*en()-u.renderingStartTime>kh&&o!==536870912&&(s.flags|=128,f=!0,cu(u,!1),s.lanes=4194304);u.isBackwards?(d.sibling=s.child,s.child=d):(n=u.last,n!==null?n.sibling=d:s.child=d,u.last=d)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=en(),n.sibling=null,o=Ne.current,Q(Ne,f?o&1|2:o&1),Qt&&hs(s,u.treeForkCount),n):(ge(s),null);case 22:case 23:return On(s),um(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ge(s),s.subtreeFlags&6&&(s.flags|=8192)):ge(s),o=s.updateQueue,o!==null&&xh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&tt(oa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ds(ze),ge(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Kw(n,s){switch(Yd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ds(ze),Vt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Dt(s),null;case 31:if(s.memoizedState!==null){if(On(s),s.alternate===null)throw Error(i(340));sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(On(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(Ne),null;case 4:return Vt(),null;case 10:return ds(s.type),null;case 22:case 23:return On(s),um(),n!==null&&tt(oa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ds(ze),null;case 25:return null;default:return null}}function qv(n,s){switch(Yd(s),s.tag){case 3:ds(ze),Vt();break;case 26:case 27:case 5:Dt(s);break;case 4:Vt();break;case 31:s.memoizedState!==null&&On(s);break;case 13:On(s);break;case 19:tt(Ne);break;case 10:ds(s.type);break;case 22:case 23:On(s),um(),n!==null&&tt(oa);break;case 24:ds(ze)}}function hu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var d=o.create,_=o.inst;u=d(),_.destroy=u}o=o.next}while(o!==f)}}catch(b){se(s,s.return,b)}}function er(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var d=f.next;u=d;do{if((u.tag&n)===n){var _=u.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=s;var O=o,H=b;try{H()}catch(W){se(f,O,W)}}}u=u.next}while(u!==d)}}catch(W){se(s,s.return,W)}}function Fv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{M_(s,o)}catch(u){se(n,n.return,u)}}}function Hv(n,s,o){o.props=fa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){se(n,s,u)}}function fu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){se(n,s,f)}}function Ki(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){se(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){se(n,s,f)}else o.current=null}function Gv(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){se(n,n.return,f)}}function Bm(n,s,o){try{var u=n.stateNode;m1(u,n.type,o,s),u[Xe]=s}catch(f){se(n,n.return,f)}}function Kv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&lr(n.type)||n.tag===4}function qm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Kv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&lr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fm(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ui));else if(u!==4&&(u===27&&lr(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Fm(n,s,o),n=n.sibling;n!==null;)Fm(n,s,o),n=n.sibling}function Vh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&lr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Vh(n,s,o),n=n.sibling;n!==null;)Vh(n,s,o),n=n.sibling}function Qv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);ln(s,u,o),s[ke]=n,s[Xe]=o}catch(d){se(n,n.return,d)}}var _s=!1,qe=!1,Hm=!1,Yv=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Qw(n,s){if(n=n.containerInfo,hp=Wh,n=a_(n),Ld(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break t}var _=0,b=-1,O=-1,H=0,W=0,nt=n,K=null;e:for(;;){for(var X;nt!==o||f!==0&&nt.nodeType!==3||(b=_+f),nt!==d||u!==0&&nt.nodeType!==3||(O=_+u),nt.nodeType===3&&(_+=nt.nodeValue.length),(X=nt.firstChild)!==null;)K=nt,nt=X;for(;;){if(nt===n)break e;if(K===o&&++H===f&&(b=_),K===d&&++W===u&&(O=_),(X=nt.nextSibling)!==null)break;nt=K,K=nt.parentNode}nt=X}o=b===-1||O===-1?null:{start:b,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(fp={focusedElem:n,selectionRange:o},Wh=!1,Ze=s;Ze!==null;)if(s=Ze,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ze=n;else for(;Ze!==null;){switch(s=Ze,d=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,o=s,f=d.memoizedProps,d=d.memoizedState,u=o.stateNode;try{var _t=fa(o.type,f);n=u.getSnapshotBeforeUpdate(_t,d),u.__reactInternalSnapshotBeforeUpdate=n}catch(wt){se(o,o.return,wt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)pp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":pp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Ze=n;break}Ze=s.return}}function $v(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ts(n,o),u&4&&hu(5,o);break;case 1:if(Ts(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){se(o,o.return,_)}else{var f=fa(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){se(o,o.return,_)}}u&64&&Fv(o),u&512&&fu(o,o.return);break;case 3:if(Ts(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{M_(n,s)}catch(_){se(o,o.return,_)}}break;case 27:s===null&&u&4&&Qv(o);case 26:case 5:Ts(n,o),s===null&&u&4&&Gv(o),u&512&&fu(o,o.return);break;case 12:Ts(n,o);break;case 31:Ts(n,o),u&4&&Zv(n,o);break;case 13:Ts(n,o),u&4&&Wv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=n1.bind(null,o),S1(n,o))));break;case 22:if(u=o.memoizedState!==null||_s,!u){s=s!==null&&s.memoizedState!==null||qe,f=_s;var d=qe;_s=u,(qe=s)&&!d?Es(n,o,(o.subtreeFlags&8772)!==0):Ts(n,o),_s=f,qe=d}break;case 30:break;default:Ts(n,o)}}function Xv(n){var s=n.alternate;s!==null&&(n.alternate=null,Xv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ka(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ve=null,Sn=!1;function vs(n,s,o){for(o=o.child;o!==null;)Jv(n,s,o),o=o.sibling}function Jv(n,s,o){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(ri,o)}catch{}switch(o.tag){case 26:qe||Ki(o,s),vs(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:qe||Ki(o,s);var u=ve,f=Sn;lr(o.type)&&(ve=o.stateNode,Sn=!1),vs(n,s,o),Eu(o.stateNode),ve=u,Sn=f;break;case 5:qe||Ki(o,s);case 6:if(u=ve,f=Sn,ve=null,vs(n,s,o),ve=u,Sn=f,ve!==null)if(Sn)try{(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).removeChild(o.stateNode)}catch(d){se(o,s,d)}else try{ve.removeChild(o.stateNode)}catch(d){se(o,s,d)}break;case 18:ve!==null&&(Sn?(n=ve,FT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),xo(n)):FT(ve,o.stateNode));break;case 4:u=ve,f=Sn,ve=o.stateNode.containerInfo,Sn=!0,vs(n,s,o),ve=u,Sn=f;break;case 0:case 11:case 14:case 15:er(2,o,s),qe||er(4,o,s),vs(n,s,o);break;case 1:qe||(Ki(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Hv(o,s,u)),vs(n,s,o);break;case 21:vs(n,s,o);break;case 22:qe=(u=qe)||o.memoizedState!==null,vs(n,s,o),qe=u;break;default:vs(n,s,o)}}function Zv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{xo(n)}catch(o){se(s,s.return,o)}}}function Wv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{xo(n)}catch(o){se(s,s.return,o)}}function Yw(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Yv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Yv),s;default:throw Error(i(435,n.tag))}}function Mh(n,s){var o=Yw(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=i1.bind(null,n,u);u.then(f,f)}})}function bn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],d=n,_=s,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(lr(b.type)){ve=b.stateNode,Sn=!1;break t}break;case 5:ve=b.stateNode,Sn=!1;break t;case 3:case 4:ve=b.stateNode.containerInfo,Sn=!0;break t}b=b.return}if(ve===null)throw Error(i(160));Jv(d,_,f),ve=null,Sn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)tT(s,n),s=s.sibling}var pi=null;function tT(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:bn(s,n),An(n),u&4&&(er(3,n,n.return),hu(3,n),er(5,n,n.return));break;case 1:bn(s,n),An(n),u&512&&(qe||o===null||Ki(o,o.return)),u&64&&_s&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=pi;if(bn(s,n),An(n),u&512&&(qe||o===null||Ki(o,o.return)),u&4){var d=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Vi]||d[ke]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(u),f.head.insertBefore(d,f.querySelector("head > title"))),ln(d,u,o),d[ke]=n,Le(d),u=d;break t;case"link":var _=tE("link","href",f).get(u+(o.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&d.getAttribute("rel")===(o.rel==null?null:o.rel)&&d.getAttribute("title")===(o.title==null?null:o.title)&&d.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(b,1);break e}}d=f.createElement(u),ln(d,u,o),f.head.appendChild(d);break;case"meta":if(_=tE("meta","content",f).get(u+(o.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(o.content==null?null:""+o.content)&&d.getAttribute("name")===(o.name==null?null:o.name)&&d.getAttribute("property")===(o.property==null?null:o.property)&&d.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&d.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(b,1);break e}}d=f.createElement(u),ln(d,u,o),f.head.appendChild(d);break;default:throw Error(i(468,u))}d[ke]=n,Le(d),u=d}n.stateNode=u}else eE(f,n.type,n.stateNode);else n.stateNode=WT(f,u,n.memoizedProps);else d!==u?(d===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):d.count--,u===null?eE(f,n.type,n.stateNode):WT(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Bm(n,n.memoizedProps,o.memoizedProps)}break;case 27:bn(s,n),An(n),u&512&&(qe||o===null||Ki(o,o.return)),o!==null&&u&4&&Bm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(bn(s,n),An(n),u&512&&(qe||o===null||Ki(o,o.return)),n.flags&32){f=n.stateNode;try{En(f,"")}catch(_t){se(n,n.return,_t)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Bm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Hm=!0);break;case 6:if(bn(s,n),An(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(_t){se(n,n.return,_t)}}break;case 3:if($h=null,f=pi,pi=Qh(s.containerInfo),bn(s,n),pi=f,An(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{xo(s.containerInfo)}catch(_t){se(n,n.return,_t)}Hm&&(Hm=!1,eT(n));break;case 4:u=pi,pi=Qh(n.stateNode.containerInfo),bn(s,n),An(n),pi=u;break;case 12:bn(s,n),An(n);break;case 31:bn(s,n),An(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mh(n,u)));break;case 13:bn(s,n),An(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ph=en()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mh(n,u)));break;case 22:f=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,H=_s,W=qe;if(_s=H||f,qe=W||O,bn(s,n),qe=W,_s=H,An(n),u&8192)t:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||O||_s||qe||da(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){O=o=s;try{if(d=O.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=O.stateNode;var nt=O.memoizedProps.style,K=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;b.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(_t){se(O,O.return,_t)}}}else if(s.tag===6){if(o===null){O=s;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(_t){se(O,O.return,_t)}}}else if(s.tag===18){if(o===null){O=s;try{var X=O.stateNode;f?HT(X,!0):HT(O.stateNode,!1)}catch(_t){se(O,O.return,_t)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Mh(n,o))));break;case 19:bn(s,n),An(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mh(n,u)));break;case 30:break;case 21:break;default:bn(s,n),An(n)}}function An(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Kv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,d=qm(n);Vh(n,d,f);break;case 5:var _=o.stateNode;o.flags&32&&(En(_,""),o.flags&=-33);var b=qm(n);Vh(n,b,_);break;case 3:case 4:var O=o.stateNode.containerInfo,H=qm(n);Fm(n,H,O);break;default:throw Error(i(161))}}catch(W){se(n,n.return,W)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function eT(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;eT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ts(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)$v(n,s.alternate,s),s=s.sibling}function da(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:er(4,s,s.return),da(s);break;case 1:Ki(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Hv(s,s.return,o),da(s);break;case 27:Eu(s.stateNode);case 26:case 5:Ki(s,s.return),da(s);break;case 22:s.memoizedState===null&&da(s);break;case 30:da(s);break;default:da(s)}n=n.sibling}}function Es(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,d=s,_=d.flags;switch(d.tag){case 0:case 11:case 15:Es(f,d,o),hu(4,d);break;case 1:if(Es(f,d,o),u=d,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){se(u,u.return,H)}if(u=d,f=u.updateQueue,f!==null){var b=u.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)V_(O[f],b)}catch(H){se(u,u.return,H)}}o&&_&64&&Fv(d),fu(d,d.return);break;case 27:Qv(d);case 26:case 5:Es(f,d,o),o&&u===null&&_&4&&Gv(d),fu(d,d.return);break;case 12:Es(f,d,o);break;case 31:Es(f,d,o),o&&_&4&&Zv(f,d);break;case 13:Es(f,d,o),o&&_&4&&Wv(f,d);break;case 22:d.memoizedState===null&&Es(f,d,o),fu(d,d.return);break;case 30:break;default:Es(f,d,o)}s=s.sibling}}function Gm(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Zl(o))}function Km(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Zl(n))}function gi(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nT(n,s,o,u),s=s.sibling}function nT(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:gi(n,s,o,u),f&2048&&hu(9,s);break;case 1:gi(n,s,o,u);break;case 3:gi(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Zl(n)));break;case 12:if(f&2048){gi(n,s,o,u),n=s.stateNode;try{var d=s.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){se(s,s.return,O)}}else gi(n,s,o,u);break;case 31:gi(n,s,o,u);break;case 13:gi(n,s,o,u);break;case 23:break;case 22:d=s.stateNode,_=s.alternate,s.memoizedState!==null?d._visibility&2?gi(n,s,o,u):du(n,s):d._visibility&2?gi(n,s,o,u):(d._visibility|=2,To(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Gm(_,s);break;case 24:gi(n,s,o,u),f&2048&&Km(s.alternate,s);break;default:gi(n,s,o,u)}}function To(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=n,_=s,b=o,O=u,H=_.flags;switch(_.tag){case 0:case 11:case 15:To(d,_,b,O,f),hu(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?To(d,_,b,O,f):du(d,_):(W._visibility|=2,To(d,_,b,O,f)),f&&H&2048&&Gm(_.alternate,_);break;case 24:To(d,_,b,O,f),f&&H&2048&&Km(_.alternate,_);break;default:To(d,_,b,O,f)}s=s.sibling}}function du(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:du(o,u),f&2048&&Gm(u.alternate,u);break;case 24:du(o,u),f&2048&&Km(u.alternate,u);break;default:du(o,u)}s=s.sibling}}var mu=8192;function Eo(n,s,o){if(n.subtreeFlags&mu)for(n=n.child;n!==null;)iT(n,s,o),n=n.sibling}function iT(n,s,o){switch(n.tag){case 26:Eo(n,s,o),n.flags&mu&&n.memoizedState!==null&&O1(o,pi,n.memoizedState,n.memoizedProps);break;case 5:Eo(n,s,o);break;case 3:case 4:var u=pi;pi=Qh(n.stateNode.containerInfo),Eo(n,s,o),pi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=mu,mu=16777216,Eo(n,s,o),mu=u):Eo(n,s,o));break;default:Eo(n,s,o)}}function sT(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function pu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ze=u,aT(u,n)}sT(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)rT(n),n=n.sibling}function rT(n){switch(n.tag){case 0:case 11:case 15:pu(n),n.flags&2048&&er(9,n,n.return);break;case 3:pu(n);break;case 12:pu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Oh(n)):pu(n);break;default:pu(n)}}function Oh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ze=u,aT(u,n)}sT(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:er(8,s,s.return),Oh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Oh(s));break;default:Oh(s)}n=n.sibling}}function aT(n,s){for(;Ze!==null;){var o=Ze;switch(o.tag){case 0:case 11:case 15:er(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Zl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ze=u;else t:for(o=n;Ze!==null;){u=Ze;var f=u.sibling,d=u.return;if(Xv(u),u===o){Ze=null;break t}if(f!==null){f.return=d,Ze=f;break t}Ze=d}}}var $w={getCacheForType:function(n){var s=an(ze),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return an(ze).controller.signal}},Xw=typeof WeakMap=="function"?WeakMap:Map,te=0,fe=null,zt=null,qt=0,ie=0,Pn=null,nr=!1,So=!1,Qm=!1,Ss=0,Ie=0,ir=0,ma=0,Ym=0,kn=0,bo=0,gu=null,In=null,$m=!1,Ph=0,oT=0,kh=1/0,Lh=null,sr=null,Qe=0,rr=null,Ao=null,bs=0,Xm=0,Jm=null,lT=null,yu=0,Zm=null;function Ln(){return(te&2)!==0&&qt!==0?qt&-qt:J.T!==null?sp():Uc()}function uT(){if(kn===0)if((qt&536870912)===0||Qt){var n=Br;Br<<=1,(Br&3932160)===0&&(Br=262144),kn=n}else kn=536870912;return n=Mn.current,n!==null&&(n.flags|=32),kn}function wn(n,s,o){(n===fe&&(ie===2||ie===9)||n.cancelPendingCommit!==null)&&(Io(n,0),ar(n,qt,kn,!1)),qr(n,o),((te&2)===0||n!==fe)&&(n===fe&&((te&2)===0&&(ma|=o),Ie===4&&ar(n,qt,kn,!1)),Qi(n))}function cT(n,s,o){if((te&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||ai(n,s),f=u?Ww(n,s):tp(n,s,!0),d=u;do{if(f===0){So&&!u&&ar(n,s,0,!1);break}else{if(o=n.current.alternate,d&&!Jw(o)){f=tp(n,s,!1),d=!1;continue}if(f===2){if(d=s,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;t:{var b=n;f=gu;var O=b.current.memoizedState.isDehydrated;if(O&&(Io(b,_).flags|=256),_=tp(b,_,!1),_!==2){if(Qm&&!O){b.errorRecoveryDisabledLanes|=d,ma|=d,f=4;break t}d=In,In=f,d!==null&&(In===null?In=d:In.push.apply(In,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){Io(n,0),ar(n,s,0,!0);break}t:{switch(u=n,d=f,d){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ar(u,s,kn,!nr);break t;case 2:In=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Ph+300-en(),10<f)){if(ar(u,s,kn,!nr),Di(u,0,!0)!==0)break t;bs=s,u.timeoutHandle=BT(hT.bind(null,u,o,In,Lh,$m,s,kn,ma,bo,nr,d,"Throttled",-0,0),f);break t}hT(u,o,In,Lh,$m,s,kn,ma,bo,nr,d,null,-0,0)}}break}while(!0);Qi(n)}function hT(n,s,o,u,f,d,_,b,O,H,W,nt,K,X){if(n.timeoutHandle=-1,nt=s.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},iT(s,d,nt);var _t=(d&62914560)===d?Ph-en():(d&4194048)===d?oT-en():0;if(_t=P1(nt,_t),_t!==null){bs=d,n.cancelPendingCommit=_t(vT.bind(null,n,s,d,o,u,f,_,b,O,W,nt,null,K,X)),ar(n,d,_,!H);return}}vT(n,s,d,o,u,f,_,b,O)}function Jw(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],d=f.getSnapshot;f=f.value;try{if(!xn(d(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ar(n,s,o,u){s&=~Ym,s&=~ma,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var d=31-Ce(f),_=1<<d;u[d]=-1,f&=~_}o!==0&&Fr(n,o,s)}function Uh(){return(te&6)===0?(_u(0),!1):!0}function Wm(){if(zt!==null){if(ie===0)var n=zt.return;else n=zt,fs=ra=null,pm(n),po=null,tu=0,n=zt;for(;n!==null;)qv(n.alternate,n),n=n.return;zt=null}}function Io(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,y1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),bs=0,Wm(),fe=n,zt=o=cs(n.current,null),qt=s,ie=0,Pn=null,nr=!1,So=ai(n,s),Qm=!1,bo=kn=Ym=ma=ir=Ie=0,In=gu=null,$m=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-Ce(u),d=1<<f;s|=n[f],u&=~d}return Ss=s,rh(),o}function fT(n,s){Pt=null,J.H=lu,s===mo||s===dh?(s=C_(),ie=3):s===im?(s=C_(),ie=4):ie=s===xm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Pn=s,zt===null&&(Ie=1,Rh(n,Xn(s,n.current)))}function dT(){var n=Mn.current;return n===null?!0:(qt&4194048)===qt?ti===null:(qt&62914560)===qt||(qt&536870912)!==0?n===ti:!1}function mT(){var n=J.H;return J.H=lu,n===null?lu:n}function pT(){var n=J.A;return J.A=$w,n}function zh(){Ie=4,nr||(qt&4194048)!==qt&&Mn.current!==null||(So=!0),(ir&134217727)===0&&(ma&134217727)===0||fe===null||ar(fe,qt,kn,!1)}function tp(n,s,o){var u=te;te|=2;var f=mT(),d=pT();(fe!==n||qt!==s)&&(Lh=null,Io(n,s)),s=!1;var _=Ie;t:do try{if(ie!==0&&zt!==null){var b=zt,O=Pn;switch(ie){case 8:Wm(),_=6;break t;case 3:case 2:case 9:case 6:Mn.current===null&&(s=!0);var H=ie;if(ie=0,Pn=null,wo(n,b,O,H),o&&So){_=0;break t}break;default:H=ie,ie=0,Pn=null,wo(n,b,O,H)}}Zw(),_=Ie;break}catch(W){fT(n,W)}while(!0);return s&&n.shellSuspendCounter++,fs=ra=null,te=u,J.H=f,J.A=d,zt===null&&(fe=null,qt=0,rh()),_}function Zw(){for(;zt!==null;)gT(zt)}function Ww(n,s){var o=te;te|=2;var u=mT(),f=pT();fe!==n||qt!==s?(Lh=null,kh=en()+500,Io(n,s)):So=ai(n,s);t:do try{if(ie!==0&&zt!==null){s=zt;var d=Pn;e:switch(ie){case 1:ie=0,Pn=null,wo(n,s,d,1);break;case 2:case 9:if(w_(d)){ie=0,Pn=null,yT(s);break}s=function(){ie!==2&&ie!==9||fe!==n||(ie=7),Qi(n)},d.then(s,s);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:w_(d)?(ie=0,Pn=null,yT(s)):(ie=0,Pn=null,wo(n,s,d,7));break;case 5:var _=null;switch(zt.tag){case 26:_=zt.memoizedState;case 5:case 27:var b=zt;if(_?nE(_):b.stateNode.complete){ie=0,Pn=null;var O=b.sibling;if(O!==null)zt=O;else{var H=b.return;H!==null?(zt=H,jh(H)):zt=null}break e}}ie=0,Pn=null,wo(n,s,d,5);break;case 6:ie=0,Pn=null,wo(n,s,d,6);break;case 8:Wm(),Ie=6;break t;default:throw Error(i(462))}}t1();break}catch(W){fT(n,W)}while(!0);return fs=ra=null,J.H=u,J.A=f,te=o,zt!==null?0:(fe=null,qt=0,rh(),Ie)}function t1(){for(;zt!==null&&!Cl();)gT(zt)}function gT(n){var s=jv(n.alternate,n,Ss);n.memoizedProps=n.pendingProps,s===null?jh(n):zt=s}function yT(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Ov(o,s,s.pendingProps,s.type,void 0,qt);break;case 11:s=Ov(o,s,s.pendingProps,s.type.render,s.ref,qt);break;case 5:pm(s);default:qv(o,s),s=zt=p_(s,Ss),s=jv(o,s,Ss)}n.memoizedProps=n.pendingProps,s===null?jh(n):zt=s}function wo(n,s,o,u){fs=ra=null,pm(s),po=null,tu=0;var f=s.return;try{if(qw(n,f,s,o,qt)){Ie=1,Rh(n,Xn(o,n.current)),zt=null;return}}catch(d){if(f!==null)throw zt=f,d;Ie=1,Rh(n,Xn(o,n.current)),zt=null;return}s.flags&32768?(Qt||u===1?n=!0:So||(qt&536870912)!==0?n=!1:(nr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Mn.current,u!==null&&u.tag===13&&(u.flags|=16384))),_T(s,n)):jh(s)}function jh(n){var s=n;do{if((s.flags&32768)!==0){_T(s,nr);return}n=s.return;var o=Gw(s.alternate,s,Ss);if(o!==null){zt=o;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=n}while(s!==null);Ie===0&&(Ie=5)}function _T(n,s){do{var o=Kw(n.alternate,n);if(o!==null){o.flags&=32767,zt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){zt=n;return}zt=n=o}while(n!==null);Ie=6,zt=null}function vT(n,s,o,u,f,d,_,b,O){n.cancelPendingCommit=null;do Bh();while(Qe!==0);if((te&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(d=s.lanes|s.childLanes,d|=qd,Md(n,o,d,_,b,O),n===fe&&(zt=fe=null,qt=0),Ao=s,rr=n,bs=o,Xm=d,Jm=f,lT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,s1(Ii,function(){return AT(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=lt.p,lt.p=2,_=te,te|=4;try{Qw(n,s,o)}finally{te=_,lt.p=f,J.T=u}}Qe=1,TT(),ET(),ST()}}function TT(){if(Qe===1){Qe=0;var n=rr,s=Ao,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=lt.p;lt.p=2;var f=te;te|=4;try{tT(s,n);var d=fp,_=a_(n.containerInfo),b=d.focusedElem,O=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&r_(b.ownerDocument.documentElement,b)){if(O!==null&&Ld(b)){var H=O.start,W=O.end;if(W===void 0&&(W=H),"selectionStart"in b)b.selectionStart=H,b.selectionEnd=Math.min(W,b.value.length);else{var nt=b.ownerDocument||document,K=nt&&nt.defaultView||window;if(K.getSelection){var X=K.getSelection(),_t=b.textContent.length,wt=Math.min(O.start,_t),he=O.end===void 0?wt:Math.min(O.end,_t);!X.extend&&wt>he&&(_=he,he=wt,wt=_);var j=s_(b,wt),L=s_(b,he);if(j&&L&&(X.rangeCount!==1||X.anchorNode!==j.node||X.anchorOffset!==j.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var F=nt.createRange();F.setStart(j.node,j.offset),X.removeAllRanges(),wt>he?(X.addRange(F),X.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),X.addRange(F))}}}}for(nt=[],X=b;X=X.parentNode;)X.nodeType===1&&nt.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<nt.length;b++){var et=nt[b];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Wh=!!hp,fp=hp=null}finally{te=f,lt.p=u,J.T=o}}n.current=s,Qe=2}}function ET(){if(Qe===2){Qe=0;var n=rr,s=Ao,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=lt.p;lt.p=2;var f=te;te|=4;try{$v(n,s.alternate,s)}finally{te=f,lt.p=u,J.T=o}}Qe=3}}function ST(){if(Qe===4||Qe===3){Qe=0,jr();var n=rr,s=Ao,o=bs,u=lT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Qe=5:(Qe=0,Ao=rr=null,bT(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(sr=null),as(o),s=s.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(ri,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=J.T,f=lt.p,lt.p=2,J.T=null;try{for(var d=n.onRecoverableError,_=0;_<u.length;_++){var b=u[_];d(b.value,{componentStack:b.stack})}}finally{J.T=s,lt.p=f}}(bs&3)!==0&&Bh(),Qi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Zm?yu++:(yu=0,Zm=n):yu=0,_u(0)}}function bT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Zl(s)))}function Bh(){return TT(),ET(),ST(),AT()}function AT(){if(Qe!==5)return!1;var n=rr,s=Xm;Xm=0;var o=as(bs),u=J.T,f=lt.p;try{lt.p=32>o?32:o,J.T=null,o=Jm,Jm=null;var d=rr,_=bs;if(Qe=0,Ao=rr=null,bs=0,(te&6)!==0)throw Error(i(331));var b=te;if(te|=4,rT(d.current),nT(d,d.current,_,o),te=b,_u(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(ri,d)}catch{}return!0}finally{lt.p=f,J.T=u,bT(n,s)}}function IT(n,s,o){s=Xn(o,s),s=Nm(n.stateNode,s,2),n=Zs(n,s,2),n!==null&&(qr(n,2),Qi(n))}function se(n,s,o){if(n.tag===3)IT(n,n,o);else for(;s!==null;){if(s.tag===3){IT(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(sr===null||!sr.has(u))){n=Xn(o,n),o=wv(2),u=Zs(s,o,2),u!==null&&(Rv(o,u,s,n),qr(u,2),Qi(u));break}}s=s.return}}function ep(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new Xw;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Qm=!0,f.add(o),n=e1.bind(null,n,s,o),s.then(n,n))}function e1(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,fe===n&&(qt&o)===o&&(Ie===4||Ie===3&&(qt&62914560)===qt&&300>en()-Ph?(te&2)===0&&Io(n,0):Ym|=o,bo===qt&&(bo=0)),Qi(n)}function wT(n,s){s===0&&(s=Lc()),n=na(n,s),n!==null&&(qr(n,s),Qi(n))}function n1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),wT(n,o)}function i1(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),wT(n,o)}function s1(n,s){return Re(n,s)}var qh=null,Ro=null,np=!1,Fh=!1,ip=!1,or=0;function Qi(n){n!==Ro&&n.next===null&&(Ro===null?qh=Ro=n:Ro=Ro.next=n),Fh=!0,np||(np=!0,a1())}function _u(n,s){if(!ip&&Fh){ip=!0;do for(var o=!1,u=qh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var d=0;else{var _=u.suspendedLanes,b=u.pingedLanes;d=(1<<31-Ce(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(o=!0,NT(u,d))}else d=qt,d=Di(u,u===fe?d:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(d&3)===0||ai(u,d)||(o=!0,NT(u,d));u=u.next}while(o);ip=!1}}function r1(){RT()}function RT(){Fh=np=!1;var n=0;or!==0&&g1()&&(n=or);for(var s=en(),o=null,u=qh;u!==null;){var f=u.next,d=CT(u,s);d===0?(u.next=null,o===null?qh=f:o.next=f,f===null&&(Ro=o)):(o=u,(n!==0||(d&3)!==0)&&(Fh=!0)),u=f}Qe!==0&&Qe!==5||_u(n),or!==0&&(or=0)}function CT(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-Ce(d),b=1<<_,O=f[_];O===-1?((b&o)===0||(b&u)!==0)&&(f[_]=Vd(b,s)):O<=s&&(n.expiredLanes|=b),d&=~b}if(s=fe,o=qt,o=Di(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(ie===2||ie===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Fn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ai(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Fn(u),as(o)){case 2:case 8:o=Ai;break;case 32:o=Ii;break;case 268435456:o=Se;break;default:o=Ii}return u=DT.bind(null,n),o=Re(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Fn(u),n.callbackPriority=2,n.callbackNode=null,2}function DT(n,s){if(Qe!==0&&Qe!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Bh()&&n.callbackNode!==o)return null;var u=qt;return u=Di(n,n===fe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(cT(n,u,s),CT(n,en()),n.callbackNode!=null&&n.callbackNode===o?DT.bind(null,n):null)}function NT(n,s){if(Bh())return null;cT(n,s,!0)}function a1(){_1(function(){(te&6)!==0?Re(bi,r1):RT()})}function sp(){if(or===0){var n=ho;n===0&&(n=Ri,Ri<<=1,(Ri&261888)===0&&(Ri=256)),or=n}return or}function xT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Xa(""+n)}function VT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function o1(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var d=xT((f[Xe]||null).action),_=u.submitter;_&&(s=(s=_[Xe]||null)?xT(s.formAction):_.getAttribute("formAction"),s!==null&&(d=s,_=null));var b=new ji("action","action",null,u,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(or!==0){var O=_?VT(f,_):new FormData(f);Am(o,{pending:!0,data:O,method:f.method,action:d},null,O)}}else typeof d=="function"&&(b.preventDefault(),O=_?VT(f,_):new FormData(f),Am(o,{pending:!0,data:O,method:f.method,action:d},d,O))},currentTarget:f}]})}}for(var rp=0;rp<Bd.length;rp++){var ap=Bd[rp],l1=ap.toLowerCase(),u1=ap[0].toUpperCase()+ap.slice(1);mi(l1,"on"+u1)}mi(u_,"onAnimationEnd"),mi(c_,"onAnimationIteration"),mi(h_,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(Iw,"onTransitionRun"),mi(ww,"onTransitionStart"),mi(Rw,"onTransitionCancel"),mi(f_,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function MT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;t:{var d=void 0;if(s)for(var _=u.length-1;0<=_;_--){var b=u[_],O=b.instance,H=b.currentTarget;if(b=b.listener,O!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=H;try{d(f)}catch(W){sh(W)}f.currentTarget=null,d=O}else for(_=0;_<u.length;_++){if(b=u[_],O=b.instance,H=b.currentTarget,b=b.listener,O!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=H;try{d(f)}catch(W){sh(W)}f.currentTarget=null,d=O}}}}function jt(n,s){var o=s[Ga];o===void 0&&(o=s[Ga]=new Set);var u=n+"__bubble";o.has(u)||(OT(s,n,2,!1),o.add(u))}function op(n,s,o){var u=0;s&&(u|=4),OT(o,n,u,s)}var Hh="_reactListening"+Math.random().toString(36).slice(2);function lp(n){if(!n[Hh]){n[Hh]=!0,xl.forEach(function(o){o!=="selectionchange"&&(c1.has(o)||op(o,!1,n),op(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Hh]||(s[Hh]=!0,op("selectionchange",!1,s))}}function OT(n,s,o,u){switch(uE(s)){case 2:var f=U1;break;case 8:f=z1;break;default:f=bp}o=f.bind(null,s,o,n),f=void 0,!Yr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function up(n,s,o,u,f){var d=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var b=u.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=u.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Mi(b),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){u=d=_;continue t}b=b.parentNode}}u=u.return}qs(function(){var H=d,W=Kn(o),nt=[];t:{var K=d_.get(n);if(K!==void 0){var X=ji,_t=n;switch(n){case"keypress":if(Xr(o)===0)break t;case"keydown":case"keyup":X=eh;break;case"focusin":_t="focus",X=Zr;break;case"focusout":_t="blur",X=Zr;break;case"beforeblur":case"afterblur":X=Zr;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Kc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case u_:case c_:case h_:X=Yc;break;case f_:X=w;break;case"scroll":case"scrollend":X=Fl;break;case"wheel":X=Y;break;case"copy":case"cut":case"paste":X=$c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=us;break;case"toggle":case"beforetoggle":X=Ot}var wt=(s&4)!==0,he=!wt&&(n==="scroll"||n==="scrollend"),j=wt?K!==null?K+"Capture":null:K;wt=[];for(var L=H,F;L!==null;){var et=L;if(F=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||F===null||j===null||(et=ci(L,j),et!=null&&wt.push(Tu(L,et,F))),he)break;L=L.return}0<wt.length&&(K=new X(K,_t,null,o,W),nt.push({event:K,listeners:wt}))}}if((s&7)===0){t:{if(K=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",K&&o!==jl&&(_t=o.relatedTarget||o.fromElement)&&(Mi(_t)||_t[xi]))break t;if((X||K)&&(K=W.window===W?W:(K=W.ownerDocument)?K.defaultView||K.parentWindow:window,X?(_t=o.relatedTarget||o.toElement,X=H,_t=_t?Mi(_t):null,_t!==null&&(he=l(_t),wt=_t.tag,_t!==he||wt!==5&&wt!==27&&wt!==6)&&(_t=null)):(X=null,_t=H),X!==_t)){if(wt=Hl,et="onMouseLeave",j="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(wt=us,et="onPointerLeave",j="onPointerEnter",L="pointer"),he=X==null?K:Dn(X),F=_t==null?K:Dn(_t),K=new wt(et,L+"leave",X,o,W),K.target=he,K.relatedTarget=F,et=null,Mi(W)===H&&(wt=new wt(j,L+"enter",_t,o,W),wt.target=F,wt.relatedTarget=he,et=wt),he=et,X&&_t)e:{for(wt=h1,j=X,L=_t,F=0,et=j;et;et=wt(et))F++;et=0;for(var At=L;At;At=wt(At))et++;for(;0<F-et;)j=wt(j),F--;for(;0<et-F;)L=wt(L),et--;for(;F--;){if(j===L||L!==null&&j===L.alternate){wt=j;break e}j=wt(j),L=wt(L)}wt=null}else wt=null;X!==null&&PT(nt,K,X,wt,!1),_t!==null&&he!==null&&PT(nt,he,_t,wt,!0)}}t:{if(K=H?Dn(H):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var Jt=Zy;else if(Xy(K))if(Wy)Jt=Sw;else{Jt=Tw;var St=vw}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?H&&$a(H.elementType)&&(Jt=Zy):Jt=Ew;if(Jt&&(Jt=Jt(n,H))){Jy(nt,Jt,o,W);break t}St&&St(n,K,H),n==="focusout"&&H&&K.type==="number"&&H.memoizedProps.value!=null&&Ll(K,"number",K.value)}switch(St=H?Dn(H):window,n){case"focusin":(Xy(St)||St.contentEditable==="true")&&(io=St,Ud=H,$l=null);break;case"focusout":$l=Ud=io=null;break;case"mousedown":zd=!0;break;case"contextmenu":case"mouseup":case"dragend":zd=!1,o_(nt,o,W);break;case"selectionchange":if(Aw)break;case"keydown":case"keyup":o_(nt,o,W)}var kt;if(Wt)t:{switch(n){case"compositionstart":var Ft="onCompositionStart";break t;case"compositionend":Ft="onCompositionEnd";break t;case"compositionupdate":Ft="onCompositionUpdate";break t}Ft=void 0}else no?Wr(n,o)&&(Ft="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ft="onCompositionStart");Ft&&(Fi&&o.locale!=="ko"&&(no||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&no&&(kt=ql()):(zi=W,Bl="value"in zi?zi.value:zi.textContent,no=!0)),St=Gh(H,Ft),0<St.length&&(Ft=new qi(Ft,n,null,o,W),nt.push({event:Ft,listeners:St}),kt?Ft.data=kt:(kt=eo(o),kt!==null&&(Ft.data=kt)))),(kt=Yn?pw(n,o):gw(n,o))&&(Ft=Gh(H,"onBeforeInput"),0<Ft.length&&(St=new qi("onBeforeInput","beforeinput",null,o,W),nt.push({event:St,listeners:Ft}),St.data=kt)),o1(nt,n,H,o,W)}MT(nt,s)})}function Tu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Gh(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ci(n,o),f!=null&&u.unshift(Tu(n,f,d)),f=ci(n,s),f!=null&&u.push(Tu(n,f,d))),n.tag===3)return u;n=n.return}return[]}function h1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function PT(n,s,o,u,f){for(var d=s._reactName,_=[];o!==null&&o!==u;){var b=o,O=b.alternate,H=b.stateNode;if(b=b.tag,O!==null&&O===u)break;b!==5&&b!==26&&b!==27||H===null||(O=H,f?(H=ci(o,d),H!=null&&_.unshift(Tu(o,H,O))):f||(H=ci(o,d),H!=null&&_.push(Tu(o,H,O)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var f1=/\r\n?/g,d1=/\u0000|\uFFFD/g;function kT(n){return(typeof n=="string"?n:""+n).replace(f1,`
`).replace(d1,"")}function LT(n,s){return s=kT(s),kT(n)===s}function ce(n,s,o,u,f,d){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||En(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&En(n,""+u);break;case"className":Nn(n,"class",u);break;case"tabIndex":Nn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(n,o,u);break;case"style":zl(n,u,d);break;case"data":if(s!=="object"){Nn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Xa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(o==="formAction"?(s!=="input"&&ce(n,s,"name",f.name,f,null),ce(n,s,"formEncType",f.formEncType,f,null),ce(n,s,"formMethod",f.formMethod,f,null),ce(n,s,"formTarget",f.formTarget,f,null)):(ce(n,s,"encType",f.encType,f,null),ce(n,s,"method",f.method,f,null),ce(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Xa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ui);break;case"onScroll":u!=null&&jt("scroll",n);break;case"onScrollEnd":u!=null&&jt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Xa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":jt("beforetoggle",n),jt("toggle",n),Qa(n,"popover",u);break;case"xlinkActuate":Ue(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ue(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ue(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ue(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ue(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ue(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ue(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ue(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ue(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qa(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Gc.get(o)||o,Qa(n,o,u))}}function cp(n,s,o,u,f,d){switch(o){case"style":zl(n,u,d);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?En(n,u):(typeof u=="number"||typeof u=="bigint")&&En(n,""+u);break;case"onScroll":u!=null&&jt("scroll",n);break;case"onScrollEnd":u!=null&&jt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vl.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),d=n[Xe]||null,d=d!=null?d[o]:null,typeof d=="function"&&n.removeEventListener(s,d,f),typeof u=="function")){typeof d!="function"&&d!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Qa(n,o,u)}}}function ln(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",n),jt("load",n);var u=!1,f=!1,d;for(d in o)if(o.hasOwnProperty(d)){var _=o[d];if(_!=null)switch(d){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ce(n,s,d,_,o,null)}}f&&ce(n,s,"srcSet",o.srcSet,o,null),u&&ce(n,s,"src",o.src,o,null);return;case"input":jt("invalid",n);var b=d=_=f=null,O=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":_=W;break;case"checked":O=W;break;case"defaultChecked":H=W;break;case"value":d=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:ce(n,s,u,W,o,null)}}qc(n,d,b,O,H,_,f,!1);return;case"select":jt("invalid",n),u=_=d=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":u=b;default:ce(n,s,f,b,o,null)}s=d,o=_,n.multiple=!!u,s!=null?Us(n,!!u,s,!1):o!=null&&Us(n,!!u,o,!0);return;case"textarea":jt("invalid",n),d=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(b=o[_],b!=null))switch(_){case"value":u=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ce(n,s,_,b,o,null)}zs(n,u,f,d);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ce(n,s,O,u,o,null)}return;case"dialog":jt("beforetoggle",n),jt("toggle",n),jt("cancel",n),jt("close",n);break;case"iframe":case"object":jt("load",n);break;case"video":case"audio":for(u=0;u<vu.length;u++)jt(vu[u],n);break;case"image":jt("error",n),jt("load",n);break;case"details":jt("toggle",n);break;case"embed":case"source":case"link":jt("error",n),jt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ce(n,s,H,u,o,null)}return;default:if($a(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&cp(n,s,W,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&ce(n,s,b,u,o,null))}function m1(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,O=null,H=null,W=null;for(X in o){var nt=o[X];if(o.hasOwnProperty(X)&&nt!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=nt;default:u.hasOwnProperty(X)||ce(n,s,X,null,u,nt)}}for(var K in u){var X=u[K];if(nt=o[K],u.hasOwnProperty(K)&&(X!=null||nt!=null))switch(K){case"type":d=X;break;case"name":f=X;break;case"checked":H=X;break;case"defaultChecked":W=X;break;case"value":_=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==nt&&ce(n,s,K,X,u,nt)}}Ya(n,_,b,O,H,W,d,f);return;case"select":X=_=b=K=null;for(d in o)if(O=o[d],o.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":X=O;default:u.hasOwnProperty(d)||ce(n,s,d,null,u,O)}for(f in u)if(d=u[f],O=o[f],u.hasOwnProperty(f)&&(d!=null||O!=null))switch(f){case"value":K=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==O&&ce(n,s,f,d,u,O)}s=b,o=_,u=X,K!=null?Us(n,!!o,K,!1):!!u!=!!o&&(s!=null?Us(n,!!o,s,!0):Us(n,!!o,o?[]:"",!1));return;case"textarea":X=K=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ce(n,s,b,null,u,f)}for(_ in u)if(f=u[_],d=o[_],u.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":K=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==d&&ce(n,s,_,f,u,d)}Fc(n,K,X);return;case"option":for(var _t in o)if(K=o[_t],o.hasOwnProperty(_t)&&K!=null&&!u.hasOwnProperty(_t))switch(_t){case"selected":n.selected=!1;break;default:ce(n,s,_t,null,u,K)}for(O in u)if(K=u[O],X=o[O],u.hasOwnProperty(O)&&K!==X&&(K!=null||X!=null))switch(O){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ce(n,s,O,K,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in o)K=o[wt],o.hasOwnProperty(wt)&&K!=null&&!u.hasOwnProperty(wt)&&ce(n,s,wt,null,u,K);for(H in u)if(K=u[H],X=o[H],u.hasOwnProperty(H)&&K!==X&&(K!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:ce(n,s,H,K,u,X)}return;default:if($a(s)){for(var he in o)K=o[he],o.hasOwnProperty(he)&&K!==void 0&&!u.hasOwnProperty(he)&&cp(n,s,he,void 0,u,K);for(W in u)K=u[W],X=o[W],!u.hasOwnProperty(W)||K===X||K===void 0&&X===void 0||cp(n,s,W,K,u,X);return}}for(var j in o)K=o[j],o.hasOwnProperty(j)&&K!=null&&!u.hasOwnProperty(j)&&ce(n,s,j,null,u,K);for(nt in u)K=u[nt],X=o[nt],!u.hasOwnProperty(nt)||K===X||K==null&&X==null||ce(n,s,nt,K,u,X)}function UT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&UT(_)){for(_=0,b=f.responseEnd,u+=1;u<o.length;u++){var O=o[u],H=O.startTime;if(H>b)break;var W=O.transferSize,nt=O.initiatorType;W&&UT(nt)&&(O=O.responseEnd,_+=W*(O<b?1:(b-H)/(O-H)))}if(--u,s+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var hp=null,fp=null;function Kh(n){return n.nodeType===9?n:n.ownerDocument}function zT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function dp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mp=null;function g1(){var n=window.event;return n&&n.type==="popstate"?n===mp?!1:(mp=n,!0):(mp=null,!1)}var BT=typeof setTimeout=="function"?setTimeout:void 0,y1=typeof clearTimeout=="function"?clearTimeout:void 0,qT=typeof Promise=="function"?Promise:void 0,_1=typeof queueMicrotask=="function"?queueMicrotask:typeof qT<"u"?function(n){return qT.resolve(null).then(n).catch(v1)}:BT;function v1(n){setTimeout(function(){throw n})}function lr(n){return n==="head"}function FT(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),xo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Eu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Eu(o);for(var d=o.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[Vi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||o.removeChild(d),d=_}}else o==="body"&&Eu(n.ownerDocument.body);o=f}while(o);xo(s)}function HT(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function pp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":pp(o),Ka(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function T1(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Vi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ei(n.nextSibling),n===null)break}return null}function E1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ei(n.nextSibling),n===null))return null;return n}function GT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=ei(n.nextSibling),n===null))return null;return n}function gp(n){return n.data==="$?"||n.data==="$~"}function yp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function S1(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ei(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var _p=null;function KT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return ei(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function QT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function YT(n,s,o){switch(s=Kh(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Eu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ka(n)}var ni=new Map,$T=new Set;function Qh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var As=lt.d;lt.d={f:b1,r:A1,D:I1,C:w1,L:R1,m:C1,X:N1,S:D1,M:x1};function b1(){var n=As.f(),s=Uh();return n||s}function A1(n){var s=Gn(n);s!==null&&s.tag===5&&s.type==="form"?fv(s):As.r(n)}var Co=typeof document>"u"?null:document;function XT(n,s,o){var u=Co;if(u&&typeof s=="string"&&s){var f=Tn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),$T.has(f)||($T.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),ln(s,"link",n),Le(s),u.head.appendChild(s)))}}function I1(n){As.D(n),XT("dns-prefetch",n,null)}function w1(n,s){As.C(n,s),XT("preconnect",n,s)}function R1(n,s,o){As.L(n,s,o);var u=Co;if(u&&n&&s){var f='link[rel="preload"][as="'+Tn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Tn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Tn(o.imageSizes)+'"]')):f+='[href="'+Tn(n)+'"]';var d=f;switch(s){case"style":d=Do(n);break;case"script":d=No(n)}ni.has(d)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),ni.set(d,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Su(d))||s==="script"&&u.querySelector(bu(d))||(s=u.createElement("link"),ln(s,"link",n),Le(s),u.head.appendChild(s)))}}function C1(n,s){As.m(n,s);var o=Co;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Tn(u)+'"][href="'+Tn(n)+'"]',d=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=No(n)}if(!ni.has(d)&&(n=E({rel:"modulepreload",href:n},s),ni.set(d,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(bu(d)))return}u=o.createElement("link"),ln(u,"link",n),Le(u),o.head.appendChild(u)}}}function D1(n,s,o){As.S(n,s,o);var u=Co;if(u&&n){var f=Oi(u).hoistableStyles,d=Do(n);s=s||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=u.querySelector(Su(d)))b.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=ni.get(d))&&vp(n,o);var O=_=u.createElement("link");Le(O),ln(O,"link",n),O._p=new Promise(function(H,W){O.onload=H,O.onerror=W}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Yh(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function N1(n,s){As.X(n,s);var o=Co;if(o&&n){var u=Oi(o).hoistableScripts,f=No(n),d=u.get(f);d||(d=o.querySelector(bu(f)),d||(n=E({src:n,async:!0},s),(s=ni.get(f))&&Tp(n,s),d=o.createElement("script"),Le(d),ln(d,"link",n),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function x1(n,s){As.M(n,s);var o=Co;if(o&&n){var u=Oi(o).hoistableScripts,f=No(n),d=u.get(f);d||(d=o.querySelector(bu(f)),d||(n=E({src:n,async:!0,type:"module"},s),(s=ni.get(f))&&Tp(n,s),d=o.createElement("script"),Le(d),ln(d,"link",n),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function JT(n,s,o,u){var f=(f=it.current)?Qh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Do(o.href),o=Oi(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Do(o.href);var d=Oi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(Su(n)))&&!d._p&&(_.instance=d,_.state.loading=5),ni.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ni.set(n,o),d||V1(f,n,o,_.state))),s&&u===null)throw Error(i(528,""));return _}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=No(o),o=Oi(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Do(n){return'href="'+Tn(n)+'"'}function Su(n){return'link[rel="stylesheet"]['+n+"]"}function ZT(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function V1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),ln(s,"link",o),Le(s),n.head.appendChild(s))}function No(n){return'[src="'+Tn(n)+'"]'}function bu(n){return"script[async]"+n}function WT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Tn(o.href)+'"]');if(u)return s.instance=u,Le(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Le(u),ln(u,"style",f),Yh(u,o.precedence,n),s.instance=u;case"stylesheet":f=Do(o.href);var d=n.querySelector(Su(f));if(d)return s.state.loading|=4,s.instance=d,Le(d),d;u=ZT(o),(f=ni.get(f))&&vp(u,f),d=(n.ownerDocument||n).createElement("link"),Le(d);var _=d;return _._p=new Promise(function(b,O){_.onload=b,_.onerror=O}),ln(d,"link",u),s.state.loading|=4,Yh(d,o.precedence,n),s.instance=d;case"script":return d=No(o.src),(f=n.querySelector(bu(d)))?(s.instance=f,Le(f),f):(u=o,(f=ni.get(d))&&(u=E({},o),Tp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Le(f),ln(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Yh(u,o.precedence,n));return s.instance}function Yh(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,d=f,_=0;_<u.length;_++){var b=u[_];if(b.dataset.precedence===s)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function vp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Tp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var $h=null;function tE(n,s,o){if($h===null){var u=new Map,f=$h=new Map;f.set(o,u)}else f=$h,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var d=o[f];if(!(d[Vi]||d[ke]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(s)||"";_=n+_;var b=u.get(_);b?b.push(d):u.set(_,[d])}}return u}function eE(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function M1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function nE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function O1(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Do(u.href),d=s.querySelector(Su(f));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Xh.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=d,Le(d);return}d=s.ownerDocument||s,u=ZT(u),(f=ni.get(f))&&vp(u,f),d=d.createElement("link"),Le(d);var _=d;_._p=new Promise(function(b,O){_.onload=b,_.onerror=O}),ln(d,"link",u),o.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Xh.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Ep=0;function P1(n,s){return n.stylesheets&&n.count===0&&Zh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Zh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+s);0<n.imgBytes&&Ep===0&&(Ep=62500*p1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Zh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Ep?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Xh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jh=null;function Zh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jh=new Map,s.forEach(k1,n),Jh=null,Xh.call(n))}function k1(n,s){if(!(s.state.loading&4)){var o=Jh.get(n);if(o)var u=o.get(null);else{o=new Map,Jh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=s.instance,_=f.getAttribute("data-precedence"),d=o.get(_)||u,d===u&&o.set(null,f),o.set(_,f),this.count++,u=Xh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Au={$$typeof:rt,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function L1(n,s,o,u,f,d,_,b,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function iE(n,s,o,u,f,d,_,b,O,H,W,nt){return n=new L1(n,s,o,_,O,H,W,nt,b),s=1,d===!0&&(s|=24),d=Vn(3,null,null,s),n.current=d,d.stateNode=n,s=tm(),s.refCount++,n.pooledCache=s,s.refCount++,d.memoizedState={element:u,isDehydrated:o,cache:s},sm(d),n}function sE(n){return n?(n=ao,n):ao}function rE(n,s,o,u,f,d){f=sE(f),u.context===null?u.context=f:u.pendingContext=f,u=Js(s),u.payload={element:o},d=d===void 0?null:d,d!==null&&(u.callback=d),o=Zs(n,u,s),o!==null&&(wn(o,n,s),nu(o,n,s))}function aE(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Sp(n,s){aE(n,s),(n=n.alternate)&&aE(n,s)}function oE(n){if(n.tag===13||n.tag===31){var s=na(n,67108864);s!==null&&wn(s,n,67108864),Sp(n,67108864)}}function lE(n){if(n.tag===13||n.tag===31){var s=Ln();s=Hr(s);var o=na(n,s);o!==null&&wn(o,n,s),Sp(n,s)}}var Wh=!0;function U1(n,s,o,u){var f=J.T;J.T=null;var d=lt.p;try{lt.p=2,bp(n,s,o,u)}finally{lt.p=d,J.T=f}}function z1(n,s,o,u){var f=J.T;J.T=null;var d=lt.p;try{lt.p=8,bp(n,s,o,u)}finally{lt.p=d,J.T=f}}function bp(n,s,o,u){if(Wh){var f=Ap(u);if(f===null)up(n,s,u,tf,o),cE(n,u);else if(B1(f,n,s,o,u))u.stopPropagation();else if(cE(n,u),s&4&&-1<j1.indexOf(n)){for(;f!==null;){var d=Gn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Ci(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var O=1<<31-Ce(_);b.entanglements[1]|=O,_&=~O}Qi(d),(te&6)===0&&(kh=en()+500,_u(0))}}break;case 31:case 13:b=na(d,2),b!==null&&wn(b,d,2),Uh(),Sp(d,2)}if(d=Ap(u),d===null&&up(n,s,u,tf,o),d===f)break;f=d}f!==null&&u.stopPropagation()}else up(n,s,u,null,o)}}function Ap(n){return n=Kn(n),Ip(n)}var tf=null;function Ip(n){if(tf=null,n=Mi(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=m(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return tf=n,null}function uE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rs()){case bi:return 2;case Ai:return 8;case Ii:case Bt:return 32;case Se:return 268435456;default:return 32}default:return 32}}var wp=!1,ur=null,cr=null,hr=null,Iu=new Map,wu=new Map,fr=[],j1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cE(n,s){switch(n){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Iu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(s.pointerId)}}function Ru(n,s,o,u,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:d,targetContainers:[f]},s!==null&&(s=Gn(s),s!==null&&oE(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function B1(n,s,o,u,f){switch(s){case"focusin":return ur=Ru(ur,n,s,o,u,f),!0;case"dragenter":return cr=Ru(cr,n,s,o,u,f),!0;case"mouseover":return hr=Ru(hr,n,s,o,u,f),!0;case"pointerover":var d=f.pointerId;return Iu.set(d,Ru(Iu.get(d)||null,n,s,o,u,f)),!0;case"gotpointercapture":return d=f.pointerId,wu.set(d,Ru(wu.get(d)||null,n,s,o,u,f)),!0}return!1}function hE(n){var s=Mi(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,oi(n.priority,function(){lE(o)});return}}else if(s===31){if(s=m(o),s!==null){n.blockedOn=s,oi(n.priority,function(){lE(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ef(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Ap(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);jl=u,o.target.dispatchEvent(u),jl=null}else return s=Gn(o),s!==null&&oE(s),n.blockedOn=o,!1;s.shift()}return!0}function fE(n,s,o){ef(n)&&o.delete(s)}function q1(){wp=!1,ur!==null&&ef(ur)&&(ur=null),cr!==null&&ef(cr)&&(cr=null),hr!==null&&ef(hr)&&(hr=null),Iu.forEach(fE),wu.forEach(fE)}function nf(n,s){n.blockedOn===s&&(n.blockedOn=null,wp||(wp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,q1)))}var sf=null;function dE(n){sf!==n&&(sf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sf===n&&(sf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Ip(u||o)===null)continue;break}var d=Gn(o);d!==null&&(n.splice(s,3),s-=3,Am(d,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function xo(n){function s(O){return nf(O,n)}ur!==null&&nf(ur,n),cr!==null&&nf(cr,n),hr!==null&&nf(hr,n),Iu.forEach(s),wu.forEach(s);for(var o=0;o<fr.length;o++){var u=fr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<fr.length&&(o=fr[0],o.blockedOn===null);)hE(o),o.blockedOn===null&&fr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],d=o[u+1],_=f[Xe]||null;if(typeof d=="function")_||dE(o);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Xe]||null)b=_.formAction;else if(Ip(f)!==null)continue}else b=_.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),dE(o)}}}function mE(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Rp(n){this._internalRoot=n}rf.prototype.render=Rp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Ln();rE(o,u,n,s,null,null)},rf.prototype.unmount=Rp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;rE(n.current,2,null,n,null,null),Uh(),s[xi]=null}};function rf(n){this._internalRoot=n}rf.prototype.unstable_scheduleHydration=function(n){if(n){var s=Uc();n={blockedOn:null,target:n,priority:s};for(var o=0;o<fr.length&&s!==0&&s<fr[o].priority;o++);fr.splice(o,0,n),o===0&&hE(n)}};var pE=t.version;if(pE!=="19.2.4")throw Error(i(527,pE,"19.2.4"));lt.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var F1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{ri=af.inject(F1),nn=af}catch{}}return Du.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=Sv,d=bv,_=Av;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=iE(n,1,!1,null,null,o,u,null,f,d,_,mE),n[xi]=s.current,lp(n),new Rp(s)},Du.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",d=Sv,_=bv,b=Av,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),s=iE(n,1,!0,s,o??null,u,f,O,d,_,b,mE),s.context=sE(null),o=s.current,u=Ln(),u=Hr(u),f=Js(u),f.callback=null,Zs(o,f,u),o=u,s.current.lanes=o,qr(s,o),Qi(s),n[xi]=s.current,lp(n),new rf(s)},Du.version="19.2.4",Du}var IE;function W1(){if(IE)return Np.exports;IE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Np.exports=Z1(),Np.exports}var tR=W1();const eR=()=>{};var wE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=function(r){const t=[];let e=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},nR=function(r){const t=[];let e=0,i=0;for(;e<r.length;){const a=r[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[e++];t[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[e++],c=r[e++],m=r[e++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|m&63)-65536;t[i++]=String.fromCharCode(55296+(p>>10)),t[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[e++],c=r[e++];t[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,m=c?r[a+1]:0,p=a+2<r.length,g=p?r[a+2]:0,T=l>>2,E=(l&3)<<4|m>>4;let S=(m&15)<<2|g>>6,R=g&63;p||(R=64,c||(S=64)),i.push(e[T],e[E],e[S],e[R])}return i.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(PS(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):nR(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=e[r.charAt(a++)],m=a<r.length?e[r.charAt(a)]:0;++a;const g=a<r.length?e[r.charAt(a)]:64;++a;const E=a<r.length?e[r.charAt(a)]:64;if(++a,l==null||m==null||g==null||E==null)throw new iR;const S=l<<2|m>>4;if(i.push(S),g!==64){const R=m<<4&240|g>>2;if(i.push(R),E!==64){const V=g<<6&192|E;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class iR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sR=function(r){const t=PS(r);return kS.encodeByteArray(t,!0)},LS=function(r){return sR(r).replace(/\./g,"")},US=function(r){try{return kS.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=()=>zS().__FIREBASE_DEFAULTS__,aR=()=>{if(typeof process>"u"||typeof wE>"u")return;const r=wE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},oR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&US(r[1]);return t&&JSON.parse(t)},rd=()=>{try{return eR()||rR()||aR()||oR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},lR=r=>{var t,e;return(e=(t=rd())==null?void 0:t.emulatorHosts)==null?void 0:e[r]},jS=()=>{var r;return(r=rd())==null?void 0:r.config},BS=r=>{var t;return(t=rd())==null?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qS(r){return(await fetch(r,{credentials:"include"})).ok}const Ku={};function cR(){const r={prod:[],emulator:[]};for(const t of Object.keys(Ku))Ku[t]?r.emulator.push(t):r.prod.push(t);return r}function hR(r){let t=document.getElementById(r),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),e=!0),{created:e,element:t}}let RE=!1;function fR(r,t){if(typeof window>"u"||typeof document>"u"||!vl(window.location.host)||Ku[r]===t||Ku[r]||RE)return;Ku[r]=t;function e(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=cR().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{RE=!0,c()},S}function T(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=hR(i),R=e("text"),V=document.getElementById(R)||document.createElement("span"),C=e("learnmore"),z=document.getElementById(C)||document.createElement("a"),$=e("preprendIcon"),at=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const rt=S.element;m(rt),T(z,C);const gt=g();p(at,$),rt.append(at,V,z,gt),document.body.appendChild(rt)}l?(V.innerText="Preview backend disconnected.",at.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(at.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function FS(){var t;const r=(t=rd())==null?void 0:t.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function gR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yR(){const r=Ye();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function HS(){return!FS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GS(){return!FS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function KS(){try{return typeof indexedDB=="object"}catch{return!1}}function _R(){return new Promise((r,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var l;t(((l=a.error)==null?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="FirebaseError";class Os extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=vR,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tc.prototype.create)}}class Tc{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?TR(l,i):"Error",m=`${this.serviceName}: ${c} (${a}).`;return new Os(a,m,i)}}function TR(r,t){return r.replace(ER,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const ER=/\{\$([^}]+)}/g;function SR(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function xa(r,t){if(r===t)return!0;const e=Object.keys(r),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const l=r[a],c=t[a];if(CE(l)&&CE(c)){if(!xa(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function CE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(r){const t=[];for(const[e,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function bR(r,t){const e=new AR(r,t);return e.subscribe.bind(e)}class AR{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");IR(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=Op),a.error===void 0&&(a.error=Op),a.complete===void 0&&(a.complete=Op);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IR(r,t){if(typeof r!="object"||r===null)return!1;for(const e of t)if(e in r&&typeof r[e]=="function")return!0;return!1}function Op(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(r){return r&&r._delegate?r._delegate:r}class Va{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new uR;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(CR(t))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(t=ga){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ga){return this.instances.has(t)}getOptions(t=ga){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&c.resolve(a)}return a}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(i)??new Set;a.add(t),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&t(l,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:RR(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ga){return this.component?this.component.multipleInstances?t:ga:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RR(r){return r===ga?void 0:r}function CR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new wR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ht||(Ht={}));const NR={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},xR=Ht.INFO,VR={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},MR=(r,t,...e)=>{if(t<r.logLevel)return;const i=new Date().toISOString(),a=VR[t];if(a)console[a](`[${i}]  ${r.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class jg{constructor(t){this.name=t,this._logLevel=xR,this._logHandler=MR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?NR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...t),this._logHandler(this,Ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...t),this._logHandler(this,Ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...t),this._logHandler(this,Ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...t),this._logHandler(this,Ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...t),this._logHandler(this,Ht.ERROR,...t)}}const OR=(r,t)=>t.some(e=>r instanceof e);let DE,NE;function PR(){return DE||(DE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kR(){return NE||(NE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QS=new WeakMap,tg=new WeakMap,YS=new WeakMap,Pp=new WeakMap,Bg=new WeakMap;function LR(r){const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{e(Ar(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&QS.set(e,r)}).catch(()=>{}),Bg.set(t,r),t}function UR(r){if(tg.has(r))return;const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});tg.set(r,t)}let eg={get(r,t,e){if(r instanceof IDBTransaction){if(t==="done")return tg.get(r);if(t==="objectStoreNames")return r.objectStoreNames||YS.get(r);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ar(r[t])},set(r,t,e){return r[t]=e,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function zR(r){eg=r(eg)}function jR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=r.call(kp(this),t,...e);return YS.set(i,t.sort?t.sort():[t]),Ar(i)}:kR().includes(r)?function(...t){return r.apply(kp(this),t),Ar(QS.get(this))}:function(...t){return Ar(r.apply(kp(this),t))}}function BR(r){return typeof r=="function"?jR(r):(r instanceof IDBTransaction&&UR(r),OR(r,PR())?new Proxy(r,eg):r)}function Ar(r){if(r instanceof IDBRequest)return LR(r);if(Pp.has(r))return Pp.get(r);const t=BR(r);return t!==r&&(Pp.set(r,t),Bg.set(t,r)),t}const kp=r=>Bg.get(r);function qR(r,t,{blocked:e,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,t),m=Ar(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Ar(c.result),p.oldVersion,p.newVersion,Ar(c.transaction),p)}),e&&c.addEventListener("blocked",p=>e(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const FR=["get","getKey","getAll","getAllKeys","count"],HR=["put","add","delete","clear"],Lp=new Map;function xE(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Lp.get(t))return Lp.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=HR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||FR.includes(e)))return;const l=async function(c,...m){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(m.shift())),(await Promise.all([g[e](...m),a&&p.done]))[0]};return Lp.set(t,l),l}zR(r=>({...r,get:(t,e,i)=>xE(t,e)||r.get(t,e,i),has:(t,e)=>!!xE(t,e)||r.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(KR(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function KR(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ng="@firebase/app",VE="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new jg("@firebase/app"),QR="@firebase/app-compat",YR="@firebase/analytics-compat",$R="@firebase/analytics",XR="@firebase/app-check-compat",JR="@firebase/app-check",ZR="@firebase/auth",WR="@firebase/auth-compat",tC="@firebase/database",eC="@firebase/data-connect",nC="@firebase/database-compat",iC="@firebase/functions",sC="@firebase/functions-compat",rC="@firebase/installations",aC="@firebase/installations-compat",oC="@firebase/messaging",lC="@firebase/messaging-compat",uC="@firebase/performance",cC="@firebase/performance-compat",hC="@firebase/remote-config",fC="@firebase/remote-config-compat",dC="@firebase/storage",mC="@firebase/storage-compat",pC="@firebase/firestore",gC="@firebase/ai",yC="@firebase/firestore-compat",_C="firebase",vC="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",TC={[ng]:"fire-core",[QR]:"fire-core-compat",[$R]:"fire-analytics",[YR]:"fire-analytics-compat",[JR]:"fire-app-check",[XR]:"fire-app-check-compat",[ZR]:"fire-auth",[WR]:"fire-auth-compat",[tC]:"fire-rtdb",[eC]:"fire-data-connect",[nC]:"fire-rtdb-compat",[iC]:"fire-fn",[sC]:"fire-fn-compat",[rC]:"fire-iid",[aC]:"fire-iid-compat",[oC]:"fire-fcm",[lC]:"fire-fcm-compat",[uC]:"fire-perf",[cC]:"fire-perf-compat",[hC]:"fire-rc",[fC]:"fire-rc-compat",[dC]:"fire-gcs",[mC]:"fire-gcs-compat",[pC]:"fire-fst",[yC]:"fire-fst-compat",[gC]:"fire-vertex","fire-js":"fire-js",[_C]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=new Map,EC=new Map,sg=new Map;function ME(r,t){try{r.container.addComponent(t)}catch(e){Ns.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,e)}}function Xo(r){const t=r.name;if(sg.has(t))return Ns.debug(`There were multiple attempts to register component ${t}.`),!1;sg.set(t,r);for(const e of xf.values())ME(e,r);for(const e of EC.values())ME(e,r);return!0}function qg(r,t){const e=r.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),r.container.getProvider(t)}function vi(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new Tc("app","Firebase",SC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=vC;function $S(r,t={}){let e=r;typeof t!="object"&&(t={name:t});const i={name:ig,automaticDataCollectionEnabled:!0,...t},a=i.name;if(typeof a!="string"||!a)throw Ir.create("bad-app-name",{appName:String(a)});if(e||(e=jS()),!e)throw Ir.create("no-options");const l=xf.get(a);if(l){if(xa(e,l.options)&&xa(i,l.config))return l;throw Ir.create("duplicate-app",{appName:a})}const c=new DR(a);for(const p of sg.values())c.addComponent(p);const m=new bC(e,i,c);return xf.set(a,m),m}function AC(r=ig){const t=xf.get(r);if(!t&&r===ig&&jS())return $S();if(!t)throw Ir.create("no-app",{appName:r});return t}function wr(r,t,e){let i=TC[r]??r;e&&(i+=`-${e}`);const a=i.match(/\s|\//),l=t.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${t}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ns.warn(c.join(" "));return}Xo(new Va(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firebase-heartbeat-database",wC=1,sc="firebase-heartbeat-store";let Up=null;function XS(){return Up||(Up=qR(IC,wC,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(sc)}catch(e){console.warn(e)}}}}).catch(r=>{throw Ir.create("idb-open",{originalErrorMessage:r.message})})),Up}async function RC(r){try{const e=(await XS()).transaction(sc),i=await e.objectStore(sc).get(JS(r));return await e.done,i}catch(t){if(t instanceof Os)Ns.warn(t.message);else{const e=Ir.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ns.warn(e.message)}}}async function OE(r,t){try{const i=(await XS()).transaction(sc,"readwrite");await i.objectStore(sc).put(t,JS(r)),await i.done}catch(e){if(e instanceof Os)Ns.warn(e.message);else{const i=Ir.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ns.warn(i.message)}}}function JS(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=1024,DC=30;class NC{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new VC(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=PE();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>DC){const c=MC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ns.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=PE(),{heartbeatsToSend:i,unsentEntries:a}=xC(this._heartbeatsCache.heartbeats),l=LS(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ns.warn(e),""}}}function PE(){return new Date().toISOString().substring(0,10)}function xC(r,t=CC){const e=[];let i=r.slice();for(const a of r){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),kE(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),kE(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class VC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KS()?_R().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await RC(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function kE(r){return LS(JSON.stringify({version:2,heartbeats:r})).length}function MC(r){if(r.length===0)return-1;let t=0,e=r[0].date;for(let i=1;i<r.length;i++)r[i].date<e&&(e=r[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(r){Xo(new Va("platform-logger",t=>new GR(t),"PRIVATE")),Xo(new Va("heartbeat",t=>new NC(t),"PRIVATE")),wr(ng,VE,r),wr(ng,VE,"esm2020"),wr("fire-js","")}OC("");var PC="firebase",kC="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(PC,kC,"app");function ZS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LC=ZS,WS=new Tc("auth","Firebase",ZS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new jg("@firebase/auth");function UC(r,...t){Vf.logLevel<=Ht.WARN&&Vf.warn(`Auth (${Tl}): ${r}`,...t)}function pf(r,...t){Vf.logLevel<=Ht.ERROR&&Vf.error(`Auth (${Tl}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(r,...t){throw Hg(r,...t)}function Ei(r,...t){return Hg(r,...t)}function Fg(r,t,e){const i={...LC(),[t]:e};return new Tc("auth","Firebase",i).create(t,{appName:r.name})}function Ia(r){return Fg(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zC(r,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&ns(r,"argument-error"),Fg(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hg(r,...t){if(typeof r!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(e,...i)}return WS.create(r,...t)}function Ct(r,t,...e){if(!r)throw Hg(t,...e)}function ws(r){const t="INTERNAL ASSERTION FAILED: "+r;throw pf(t),new Error(t)}function xs(r,t){r||ws(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function jC(){return LE()==="http:"||LE()==="https:"}function LE(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jC()||pR()||"connection"in navigator)?navigator.onLine:!0}function qC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(t,e){this.shortDelay=t,this.longDelay=e,xs(e>t,"Short delay should be less than long delay!"),this.isMobile=dR()||gR()}get(){return BC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(r,t){xs(r.emulator,"Emulator should always be set here");const{url:e}=r.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GC=new Sc(3e4,6e4);function Kg(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function El(r,t,e,i,a={}){return eb(r,a,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const m=Ec({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:t,headers:p,...l};return mR()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&vl(r.emulatorConfig.host)&&(g.credentials="include"),tb.fetch()(await nb(r,r.config.apiHost,e,m),g)})}async function eb(r,t,e){r._canInitEmulator=!1;const i={...FC,...t};try{const a=new QC(r),l=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw of(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const m=l.ok?c.errorMessage:c.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw of(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw of(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw of(r,"user-disabled",c);const T=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Fg(r,T,g);ns(r,T)}}catch(a){if(a instanceof Os)throw a;ns(r,"network-request-failed",{message:String(a)})}}async function KC(r,t,e,i,a={}){const l=await El(r,t,e,i,a);return"mfaPendingCredential"in l&&ns(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function nb(r,t,e,i){const a=`${t}${e}?${i}`,l=r,c=l.config.emulator?Gg(r.config,a):`${r.config.apiScheme}://${a}`;return HC.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class QC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),GC.get())})}}function of(r,t,e){const i={appName:r.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=Ei(r,t,i);return a.customData._tokenResponse=e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(r,t){return El(r,"POST","/v1/accounts:delete",t)}async function Mf(r,t){return El(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function $C(r,t=!1){const e=Ke(r),i=await e.getIdToken(t),a=Qg(i);Ct(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Qu(zp(a.auth_time)),issuedAtTime:Qu(zp(a.iat)),expirationTime:Qu(zp(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function zp(r){return Number(r)*1e3}function Qg(r){const[t,e,i]=r.split(".");if(t===void 0||e===void 0||i===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const a=US(e);return a?JSON.parse(a):(pf("Failed to decode base64 JWT payload"),null)}catch(a){return pf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function UE(r){const t=Qg(r);return Ct(t,"internal-error"),Ct(typeof t.exp<"u","internal-error"),Ct(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(r,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Os&&XC(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function XC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qu(this.lastLoginAt),this.creationTime=Qu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(r){var E;const t=r.auth,e=await r.getIdToken(),i=await rc(r,Mf(t,{idToken:e}));Ct(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?ib(a.providerUserInfo):[],c=WC(r.providerData,l),m=r.isAnonymous,p=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),g=m?p:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new ag(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,T)}async function ZC(r){const t=Ke(r);await Of(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function WC(r,t){return[...r.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function ib(r){return r.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(r,t){const e=await eb(r,{},async()=>{const i=Ec({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await nb(r,a,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:i};return r.emulatorConfig&&vl(r.emulatorConfig.host)&&(p.credentials="include"),tb.fetch()(c,p)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function eD(r,t){return El(r,"POST","/v2/accounts:revokeToken",Kg(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ct(t.idToken,"internal-error"),Ct(typeof t.idToken<"u","internal-error"),Ct(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):UE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Ct(t.length!==0,"internal-error");const e=UE(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Ct(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:l}=await tD(t,e);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:l}=e,c=new Ho;return i&&(Ct(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(Ct(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(Ct(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(r,t){Ct(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Ti{constructor({uid:t,auth:e,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new JC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ag(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await rc(this,this.stsTokenManager.getToken(this.auth,t));return Ct(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return $C(this,t)}reload(){return ZC(this)}_assign(t){this!==t&&(Ct(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Ti({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Of(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(Ia(this.auth));const t=await this.getIdToken();return await rc(this,YC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,a=e.email??void 0,l=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,p=e._redirectEventId??void 0,g=e.createdAt??void 0,T=e.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:R,providerData:V,stsTokenManager:C}=e;Ct(E&&C,t,"internal-error");const z=Ho.fromJSON(this.name,C);Ct(typeof E=="string",t,"internal-error"),mr(i,t.name),mr(a,t.name),Ct(typeof S=="boolean",t,"internal-error"),Ct(typeof R=="boolean",t,"internal-error"),mr(l,t.name),mr(c,t.name),mr(m,t.name),mr(p,t.name),mr(g,t.name),mr(T,t.name);const $=new Ti({uid:E,auth:t,email:a,emailVerified:S,displayName:i,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:m,stsTokenManager:z,createdAt:g,lastLoginAt:T});return V&&Array.isArray(V)&&($.providerData=V.map(at=>({...at}))),p&&($._redirectEventId=p),$}static async _fromIdTokenResponse(t,e,i=!1){const a=new Ho;a.updateFromServerResponse(e);const l=new Ti({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await Of(l),l}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];Ct(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?ib(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),m=new Ho;m.updateFromIdToken(i);const p=new Ti({uid:a.localId,auth:t,stsTokenManager:m,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new ag(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Map;function Rs(r){xs(r instanceof Function,"Expected a class definition");let t=zE.get(r);return t?(xs(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,zE.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}sb.type="NONE";const jE=sb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(r,t,e){return`firebase:${r}:${t}:${e}`}class Go{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=gf(this.userKey,a.apiKey,l),this.fullPersistenceKey=gf("persistence",a.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Mf(this.auth,{idToken:t}).catch(()=>{});return e?Ti._fromGetAccountInfoResponse(this.auth,e,t):null}return Ti._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Go(Rs(jE),t,i);const a=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Rs(jE);const c=gf(i,t.config.apiKey,t.name);let m=null;for(const g of e)try{const T=await g._get(c);if(T){let E;if(typeof T=="string"){const S=await Mf(t,{idToken:T}).catch(()=>{});if(!S)break;E=await Ti._fromGetAccountInfoResponse(t,S,T)}else E=Ti._fromJSON(t,T);g!==l&&(m=E),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Go(l,t,i):(l=p[0],m&&await l._set(c,m.toJSON()),await Promise.all(e.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Go(l,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(rb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cb(t))return"Blackberry";if(hb(t))return"Webos";if(ab(t))return"Safari";if((t.includes("chrome/")||ob(t))&&!t.includes("edge/"))return"Chrome";if(ub(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function rb(r=Ye()){return/firefox\//i.test(r)}function ab(r=Ye()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ob(r=Ye()){return/crios\//i.test(r)}function lb(r=Ye()){return/iemobile/i.test(r)}function ub(r=Ye()){return/android/i.test(r)}function cb(r=Ye()){return/blackberry/i.test(r)}function hb(r=Ye()){return/webos/i.test(r)}function Yg(r=Ye()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function nD(r=Ye()){var t;return Yg(r)&&!!((t=window.navigator)!=null&&t.standalone)}function iD(){return yR()&&document.documentMode===10}function fb(r=Ye()){return Yg(r)||ub(r)||hb(r)||cb(r)||/windows phone/i.test(r)||lb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(r,t=[]){let e;switch(r){case"Browser":e=BE(Ye());break;case"Worker":e=`${BE(Ye())}-${r}`;break;default:e=r}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Tl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,m)=>{try{const p=t(l);c(p)}catch(p){m(p)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(r,t={}){return El(r,"GET","/v2/passwordPolicy",Kg(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=6;class oD{constructor(t){var i;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??aD,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qE(this),this.idTokenSubscription=new qE(this),this.beforeStateQueue=new sD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Rs(e)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Go.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Mf(this,{idToken:t}),i=await Ti._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var l;if(vi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===m)&&(p!=null&&p.user)&&(i=p.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Of(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=qC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vi(this.app))return Promise.reject(Ia(this));const e=t?Ke(t):null;return e&&Ct(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Ct(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(Ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vi(this.app)?Promise.reject(Ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await rD(this),e=new oD(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Tc("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await eD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Rs(t)||this._popupRedirectResolver;Ct(e,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Rs(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(m,this,"internal-error"),m.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const p=t.addObserver(e,i,a);return()=>{c=!0,p()}}else{const p=t.addObserver(e);return()=>{c=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=db(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&UC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ad(r){return Ke(r)}class qE{constructor(t){this.auth=t,this.observer=null,this.addObserver=bR(e=>this.observer=e)}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uD(r){$g=r}function cD(r){return $g.loadJS(r)}function hD(){return $g.gapiScript}function fD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(r,t){const e=qg(r,"auth");if(e.isInitialized()){const a=e.getImmediate(),l=e.getOptions();if(xa(l,t??{}))return a;ns(a,"already-initialized")}return e.initialize({options:t})}function mD(r,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Rs);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function pD(r,t,e){const i=ad(r);Ct(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!1,l=mb(t),{host:c,port:m}=gD(t),p=m===null?"":`:${m}`,g={url:`${l}//${c}${p}/`},T=Object.freeze({host:c,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ct(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ct(xa(g,i.config.emulator)&&xa(T,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=T,i.settings.appVerificationDisabledForTesting=!0,vl(c)?(qS(`${l}//${c}${p}`),fR("Auth",!0)):yD()}function mb(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function gD(r){const t=mb(r),e=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:FE(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:FE(c)}}}function FE(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function yD(){function r(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ws("not implemented")}_getIdTokenResponse(t){return ws("not implemented")}_linkToIdToken(t,e){return ws("not implemented")}_getReauthenticationResolver(t){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(r,t){return KC(r,"POST","/v1/accounts:signInWithIdp",Kg(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="http://localhost";class Ma extends pb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ma(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ns("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a,...l}=e;if(!i||!a)return null;const c=new Ma(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Ko(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Ko(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ko(t,e)}buildRequest(){const t={requestUri:_D,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Ec(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends Xg{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends bc{constructor(){super("facebook.com")}static credential(t){return Ma._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vr.credentialFromTaggedObject(t)}static credentialFromError(t){return vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vr.credential(t.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends bc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ma._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Is.credential(e,i)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends bc{constructor(){super("github.com")}static credential(t){return Ma._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Tr.credentialFromTaggedObject(t)}static credentialFromError(t){return Tr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Tr.credential(t.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends bc{constructor(){super("twitter.com")}static credential(t,e){return Ma._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Er.credentialFromTaggedObject(t)}static credentialFromError(t){return Er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Er.credential(e,i)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const l=await Ti._fromIdTokenResponse(t,i,a),c=HE(i);return new Jo({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=HE(i);return new Jo({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function HE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends Os{constructor(t,e,i,a){super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Pf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new Pf(t,e,i,a)}}function gb(r,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(r):e._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Pf._fromErrorAndOperation(r,l,t,i):l})}async function vD(r,t,e=!1){const i=await rc(r,t._linkToIdToken(r.auth,await r.getIdToken()),e);return Jo._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(r,t,e=!1){const{auth:i}=r;if(vi(i.app))return Promise.reject(Ia(i));const a="reauthenticate";try{const l=await rc(r,gb(i,a,t,r),e);Ct(l.idToken,i,"internal-error");const c=Qg(l.idToken);Ct(c,i,"internal-error");const{sub:m}=c;return Ct(r.uid===m,i,"user-mismatch"),Jo._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ns(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(r,t,e=!1){if(vi(r.app))return Promise.reject(Ia(r));const i="signIn",a=await gb(r,i,t),l=await Jo._fromIdTokenResponse(r,i,a);return e||await r._updateCurrentUser(l.user),l}function SD(r,t,e,i){return Ke(r).onIdTokenChanged(t,e,i)}function bD(r,t,e){return Ke(r).beforeAuthStateChanged(t,e)}function AD(r,t,e,i){return Ke(r).onAuthStateChanged(t,e,i)}function ID(r){return Ke(r).signOut()}const kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=1e3,RD=10;class _b extends yb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,p)=>{this.notifyListeners(c,p)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);iD()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,RD):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},wD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}_b.type="LOCAL";const CD=_b;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb extends yb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}vb.type="SESSION";const Tb=vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new od(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:l}=e.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const m=Array.from(c).map(async g=>g(e.origin,l)),p=await DD(m);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(r="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return r+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((m,p)=>{const g=Jg("",20);a.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(S.data.response);break;default:clearTimeout(T),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function xD(r){ts().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function VD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MD(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function OD(){return Eb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="firebaseLocalStorageDb",PD=1,Lf="firebaseLocalStorage",bb="fbase_key";class Ac{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function ld(r,t){return r.transaction([Lf],t?"readwrite":"readonly").objectStore(Lf)}function kD(){const r=indexedDB.deleteDatabase(Sb);return new Ac(r).toPromise()}function og(){const r=indexedDB.open(Sb,PD);return new Promise((t,e)=>{r.addEventListener("error",()=>{e(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Lf,{keyPath:bb})}catch(a){e(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Lf)?t(i):(i.close(),await kD(),t(await og()))})})}async function GE(r,t,e){const i=ld(r,!0).put({[bb]:t,value:e});return new Ac(i).toPromise()}async function LD(r,t){const e=ld(r,!1).get(t),i=await new Ac(e).toPromise();return i===void 0?null:i.value}function KE(r,t){const e=ld(r,!0).delete(t);return new Ac(e).toPromise()}const UD=800,zD=3;class Ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await og(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>zD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Eb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(OD()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await VD(),!this.activeServiceWorker)return;this.sender=new ND(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||MD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await og();return await GE(t,kf,"1"),await KE(t,kf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>GE(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>LD(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>KE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=ld(a,!1).getAll();return new Ac(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ab.type="LOCAL";const jD=Ab;new Sc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(r,t){return t?Rs(t):(Ct(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends pb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ko(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ko(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ko(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function BD(r){return ED(r.auth,new Zg(r),r.bypassAuthState)}function qD(r){const{auth:t,user:e}=r;return Ct(e,t,"internal-error"),TD(e,new Zg(r),r.bypassAuthState)}async function FD(r){const{auth:t,user:e}=r;return Ct(e,t,"internal-error"),vD(e,new Zg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t,e,i,a,l=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:l,error:c,type:m}=t;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return BD;case"linkViaPopup":case"linkViaRedirect":return FD;case"reauthViaPopup":case"reauthViaRedirect":return qD;default:ns(this.auth,"internal-error")}}resolve(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new Sc(2e3,1e4);async function GD(r,t,e){if(vi(r.app))return Promise.reject(Ei(r,"operation-not-supported-in-this-environment"));const i=ad(r);zC(r,t,Xg);const a=Ib(i,e);return new ba(i,"signInViaPopup",t,a).executeNotNull()}class ba extends wb{constructor(t,e,i,a,l){super(t,e,a,l),this.provider=i,this.authWindow=null,this.pollId=null,ba.currentPopupAction&&ba.currentPopupAction.cancel(),ba.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ct(t,this.auth,"internal-error"),t}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const t=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ba.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if((i=(e=this.authWindow)==null?void 0:e.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,HD.get())};t()}}ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="pendingRedirect",yf=new Map;class QD extends wb{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=yf.get(this.auth._key());if(!t){try{const i=await YD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}yf.set(this.auth._key(),t)}return this.bypassAuthState||yf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YD(r,t){const e=JD(t),i=XD(r);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function $D(r,t){yf.set(r._key(),t)}function XD(r){return Rs(r._redirectPersistence)}function JD(r){return gf(KD,r.config.apiKey,r.name)}async function ZD(r,t,e=!1){if(vi(r.app))return Promise.reject(Ia(r));const i=ad(r),a=Ib(i,t),c=await new QD(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=600*1e3;class tN{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!eN(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!Rb(t)){const a=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";e.onError(Ei(this.auth,a))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=WD&&this.cachedEventUids.clear(),this.cachedEventUids.has(QE(t))}saveEventToCache(t){this.cachedEventUids.add(QE(t)),this.lastProcessedEventTime=Date.now()}}function QE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function Rb({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function eN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(r,t={}){return El(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sN=/^https?/;async function rN(r){if(r.config.emulator)return;const{authorizedDomains:t}=await nN(r);for(const e of t)try{if(aN(e))return}catch{}ns(r,"unauthorized-domain")}function aN(r){const t=rg(),{protocol:e,hostname:i}=new URL(t);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?e==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!sN.test(e))return!1;if(iN.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new Sc(3e4,6e4);function YE(){const r=ts().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let e=0;e<r.CP.length;e++)r.CP[e]=null}}function lN(r){return new Promise((t,e)=>{var a,l,c;function i(){YE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{YE(),e(Ei(r,"network-request-failed"))},timeout:oN.get()})}if((l=(a=ts().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)t(gapi.iframes.getContext());else if((c=ts().gapi)!=null&&c.load)i();else{const m=fD("iframefcb");return ts()[m]=()=>{gapi.load?i():e(Ei(r,"network-request-failed"))},cD(`${hD()}?onload=${m}`).catch(p=>e(p))}}).catch(t=>{throw _f=null,t})}let _f=null;function uN(r){return _f=_f||lN(r),_f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new Sc(5e3,15e3),hN="__/auth/iframe",fN="emulator/auth/iframe",dN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pN(r){const t=r.config;Ct(t.authDomain,r,"auth-domain-config-required");const e=t.emulator?Gg(t,fN):`https://${r.config.authDomain}/${hN}`,i={apiKey:t.apiKey,appName:r.name,v:Tl},a=mN.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${Ec(i).slice(1)}`}async function gN(r){const t=await uN(r),e=ts().gapi;return Ct(e,r,"internal-error"),t.open({where:document.body,url:pN(r),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dN,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ei(r,"network-request-failed"),m=ts().setTimeout(()=>{l(c)},cN.get());function p(){ts().clearTimeout(m),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_N=500,vN=600,TN="_blank",EN="http://localhost";class $E{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SN(r,t,e,i=_N,a=vN){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const p={...yN,width:i.toString(),height:a.toString(),top:l,left:c},g=Ye().toLowerCase();e&&(m=ob(g)?TN:e),rb(g)&&(t=t||EN,p.scrollbars="yes");const T=Object.entries(p).reduce((S,[R,V])=>`${S}${R}=${V},`,"");if(nD(g)&&m!=="_self")return bN(t||"",m),new $E(null);const E=window.open(t||"",m,T);Ct(E,r,"popup-blocked");try{E.focus()}catch{}return new $E(E)}function bN(r,t){const e=document.createElement("a");e.href=r,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="__/auth/handler",IN="emulator/auth/handler",wN=encodeURIComponent("fac");async function XE(r,t,e,i,a,l){Ct(r.config.authDomain,r,"auth-domain-config-required"),Ct(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:e,redirectUrl:i,v:Tl,eventId:a};if(t instanceof Xg){t.setDefaultLanguage(r.languageCode),c.providerId=t.providerId||"",SR(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,E]of Object.entries({}))c[T]=E}if(t instanceof bc){const T=t.getScopes().filter(E=>E!=="");T.length>0&&(c.scopes=T.join(","))}r.tenantId&&(c.tid=r.tenantId);const m=c;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await r._getAppCheckToken(),g=p?`#${wN}=${encodeURIComponent(p)}`:"";return`${RN(r)}?${Ec(m).slice(1)}${g}`}function RN({config:r}){return r.emulator?Gg(r,IN):`https://${r.authDomain}/${AN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="webStorageSupport";class CN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tb,this._completeRedirectFn=ZD,this._overrideRedirectResult=$D}async _openPopup(t,e,i,a){var c;xs((c=this.eventManagers[t._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await XE(t,e,i,rg(),a);return SN(t,l,Jg())}async _openRedirect(t,e,i,a){await this._originValidation(t);const l=await XE(t,e,i,rg(),a);return xD(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:l}=this.eventManagers[e];return a?Promise.resolve(a):(xs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await gN(t),i=new tN(t);return e.register("authEvent",a=>(Ct(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(jp,{type:jp},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[jp];l!==void 0&&e(!!l),ns(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=rN(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return fb()||ab()||Yg()}}const DN=CN;var JE="@firebase/auth",ZE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VN(r){Xo(new Va("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=i.options;Ct(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:db(r)},g=new lD(i,a,l,p);return mD(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Xo(new Va("auth-internal",t=>{const e=ad(t.getProvider("auth").getImmediate());return(i=>new NN(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(JE,ZE,xN(r)),wr(JE,ZE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=300,ON=BS("authIdTokenMaxAge")||MN;let WE=null;const PN=r=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>ON)return;const a=e==null?void 0:e.token;WE!==a&&(WE=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function kN(r=AC()){const t=qg(r,"auth");if(t.isInitialized())return t.getImmediate();const e=dD(r,{popupRedirectResolver:DN,persistence:[jD,CD,Tb]}),i=BS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=PN(l.toString());bD(e,c,()=>c(e.currentUser)),SD(e,m=>c(m))}}const a=lR("auth");return a&&pD(e,`http://${a}`),e}function LN(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}uD({loadJS(r){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=t,i.onerror=a=>{const l=Ei("internal-error");l.customData=a,e(l)},i.type="text/javascript",i.charset="UTF-8",LN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VN("Browser");var t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,Cb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,A){function N(){}N.prototype=A.prototype,D.F=A.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(P,M,U){for(var x=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)x[Kt-2]=arguments[Kt];return A.prototype[M].apply(P,x)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,A,N){N||(N=0);const P=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)P[M]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(M=0;M<16;++M)P[M]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=D.g[0],N=D.g[1],M=D.g[2];let U=D.g[3],x;x=A+(U^N&(M^U))+P[0]+3614090360&4294967295,A=N+(x<<7&4294967295|x>>>25),x=U+(M^A&(N^M))+P[1]+3905402710&4294967295,U=A+(x<<12&4294967295|x>>>20),x=M+(N^U&(A^N))+P[2]+606105819&4294967295,M=U+(x<<17&4294967295|x>>>15),x=N+(A^M&(U^A))+P[3]+3250441966&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(U^N&(M^U))+P[4]+4118548399&4294967295,A=N+(x<<7&4294967295|x>>>25),x=U+(M^A&(N^M))+P[5]+1200080426&4294967295,U=A+(x<<12&4294967295|x>>>20),x=M+(N^U&(A^N))+P[6]+2821735955&4294967295,M=U+(x<<17&4294967295|x>>>15),x=N+(A^M&(U^A))+P[7]+4249261313&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(U^N&(M^U))+P[8]+1770035416&4294967295,A=N+(x<<7&4294967295|x>>>25),x=U+(M^A&(N^M))+P[9]+2336552879&4294967295,U=A+(x<<12&4294967295|x>>>20),x=M+(N^U&(A^N))+P[10]+4294925233&4294967295,M=U+(x<<17&4294967295|x>>>15),x=N+(A^M&(U^A))+P[11]+2304563134&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(U^N&(M^U))+P[12]+1804603682&4294967295,A=N+(x<<7&4294967295|x>>>25),x=U+(M^A&(N^M))+P[13]+4254626195&4294967295,U=A+(x<<12&4294967295|x>>>20),x=M+(N^U&(A^N))+P[14]+2792965006&4294967295,M=U+(x<<17&4294967295|x>>>15),x=N+(A^M&(U^A))+P[15]+1236535329&4294967295,N=M+(x<<22&4294967295|x>>>10),x=A+(M^U&(N^M))+P[1]+4129170786&4294967295,A=N+(x<<5&4294967295|x>>>27),x=U+(N^M&(A^N))+P[6]+3225465664&4294967295,U=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(U^A))+P[11]+643717713&4294967295,M=U+(x<<14&4294967295|x>>>18),x=N+(U^A&(M^U))+P[0]+3921069994&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(M^U&(N^M))+P[5]+3593408605&4294967295,A=N+(x<<5&4294967295|x>>>27),x=U+(N^M&(A^N))+P[10]+38016083&4294967295,U=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(U^A))+P[15]+3634488961&4294967295,M=U+(x<<14&4294967295|x>>>18),x=N+(U^A&(M^U))+P[4]+3889429448&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(M^U&(N^M))+P[9]+568446438&4294967295,A=N+(x<<5&4294967295|x>>>27),x=U+(N^M&(A^N))+P[14]+3275163606&4294967295,U=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(U^A))+P[3]+4107603335&4294967295,M=U+(x<<14&4294967295|x>>>18),x=N+(U^A&(M^U))+P[8]+1163531501&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(M^U&(N^M))+P[13]+2850285829&4294967295,A=N+(x<<5&4294967295|x>>>27),x=U+(N^M&(A^N))+P[2]+4243563512&4294967295,U=A+(x<<9&4294967295|x>>>23),x=M+(A^N&(U^A))+P[7]+1735328473&4294967295,M=U+(x<<14&4294967295|x>>>18),x=N+(U^A&(M^U))+P[12]+2368359562&4294967295,N=M+(x<<20&4294967295|x>>>12),x=A+(N^M^U)+P[5]+4294588738&4294967295,A=N+(x<<4&4294967295|x>>>28),x=U+(A^N^M)+P[8]+2272392833&4294967295,U=A+(x<<11&4294967295|x>>>21),x=M+(U^A^N)+P[11]+1839030562&4294967295,M=U+(x<<16&4294967295|x>>>16),x=N+(M^U^A)+P[14]+4259657740&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(N^M^U)+P[1]+2763975236&4294967295,A=N+(x<<4&4294967295|x>>>28),x=U+(A^N^M)+P[4]+1272893353&4294967295,U=A+(x<<11&4294967295|x>>>21),x=M+(U^A^N)+P[7]+4139469664&4294967295,M=U+(x<<16&4294967295|x>>>16),x=N+(M^U^A)+P[10]+3200236656&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(N^M^U)+P[13]+681279174&4294967295,A=N+(x<<4&4294967295|x>>>28),x=U+(A^N^M)+P[0]+3936430074&4294967295,U=A+(x<<11&4294967295|x>>>21),x=M+(U^A^N)+P[3]+3572445317&4294967295,M=U+(x<<16&4294967295|x>>>16),x=N+(M^U^A)+P[6]+76029189&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(N^M^U)+P[9]+3654602809&4294967295,A=N+(x<<4&4294967295|x>>>28),x=U+(A^N^M)+P[12]+3873151461&4294967295,U=A+(x<<11&4294967295|x>>>21),x=M+(U^A^N)+P[15]+530742520&4294967295,M=U+(x<<16&4294967295|x>>>16),x=N+(M^U^A)+P[2]+3299628645&4294967295,N=M+(x<<23&4294967295|x>>>9),x=A+(M^(N|~U))+P[0]+4096336452&4294967295,A=N+(x<<6&4294967295|x>>>26),x=U+(N^(A|~M))+P[7]+1126891415&4294967295,U=A+(x<<10&4294967295|x>>>22),x=M+(A^(U|~N))+P[14]+2878612391&4294967295,M=U+(x<<15&4294967295|x>>>17),x=N+(U^(M|~A))+P[5]+4237533241&4294967295,N=M+(x<<21&4294967295|x>>>11),x=A+(M^(N|~U))+P[12]+1700485571&4294967295,A=N+(x<<6&4294967295|x>>>26),x=U+(N^(A|~M))+P[3]+2399980690&4294967295,U=A+(x<<10&4294967295|x>>>22),x=M+(A^(U|~N))+P[10]+4293915773&4294967295,M=U+(x<<15&4294967295|x>>>17),x=N+(U^(M|~A))+P[1]+2240044497&4294967295,N=M+(x<<21&4294967295|x>>>11),x=A+(M^(N|~U))+P[8]+1873313359&4294967295,A=N+(x<<6&4294967295|x>>>26),x=U+(N^(A|~M))+P[15]+4264355552&4294967295,U=A+(x<<10&4294967295|x>>>22),x=M+(A^(U|~N))+P[6]+2734768916&4294967295,M=U+(x<<15&4294967295|x>>>17),x=N+(U^(M|~A))+P[13]+1309151649&4294967295,N=M+(x<<21&4294967295|x>>>11),x=A+(M^(N|~U))+P[4]+4149444226&4294967295,A=N+(x<<6&4294967295|x>>>26),x=U+(N^(A|~M))+P[11]+3174756917&4294967295,U=A+(x<<10&4294967295|x>>>22),x=M+(A^(U|~N))+P[2]+718787259&4294967295,M=U+(x<<15&4294967295|x>>>17),x=N+(U^(M|~A))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+U&4294967295}i.prototype.v=function(D,A){A===void 0&&(A=D.length);const N=A-this.blockSize,P=this.C;let M=this.h,U=0;for(;U<A;){if(M==0)for(;U<=N;)a(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<A;)if(P[M++]=D.charCodeAt(U++),M==this.blockSize){a(this,P),M=0;break}}else for(;U<A;)if(P[M++]=D[U++],M==this.blockSize){a(this,P),M=0;break}}this.h=M,this.o+=A},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)D[A++]=this.g[N]>>>P&255;return D};function l(D,A){var N=m;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=A(D)}function c(D,A){this.h=A;const N=[];let P=!0;for(let M=D.length-1;M>=0;M--){const U=D[M]|0;P&&U==A||(N[M]=U,P=!1)}this.g=N}var m={};function p(D){return-128<=D&&D<128?l(D,function(A){return new c([A|0],A<0?-1:0)}):new c([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return z(g(-D));const A=[];let N=1;for(let P=0;D>=N;P++)A[P]=D/N|0,N*=4294967296;return new c(A,0)}function T(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return z(T(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(A,8));let P=E;for(let U=0;U<D.length;U+=8){var M=Math.min(8,D.length-U);const x=parseInt(D.substring(U,U+M),A);M<8?(M=g(Math.pow(A,M)),P=P.j(M).add(g(x))):(P=P.j(N),P=P.add(g(x)))}return P}var E=p(0),S=p(1),R=p(16777216);r=c.prototype,r.m=function(){if(C(this))return-z(this).m();let D=0,A=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);D+=(P>=0?P:4294967296+P)*A,A*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(V(this))return"0";if(C(this))return"-"+z(this).toString(D);const A=g(Math.pow(D,6));var N=this;let P="";for(;;){const M=gt(N,A).g;N=$(N,M.j(A));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=M,V(N))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function V(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function C(D){return D.h==-1}r.l=function(D){return D=$(this,D),C(D)?-1:V(D)?0:1};function z(D){const A=D.g.length,N=[];for(let P=0;P<A;P++)N[P]=~D.g[P];return new c(N,~D.h).add(S)}r.abs=function(){return C(this)?z(this):this},r.add=function(D){const A=Math.max(this.g.length,D.g.length),N=[];let P=0;for(let M=0;M<=A;M++){let U=P+(this.i(M)&65535)+(D.i(M)&65535),x=(U>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);P=x>>>16,U&=65535,x&=65535,N[M]=x<<16|U}return new c(N,N[N.length-1]&-2147483648?-1:0)};function $(D,A){return D.add(z(A))}r.j=function(D){if(V(this)||V(D))return E;if(C(this))return C(D)?z(this).j(z(D)):z(z(this).j(D));if(C(D))return z(this.j(z(D)));if(this.l(R)<0&&D.l(R)<0)return g(this.m()*D.m());const A=this.g.length+D.g.length,N=[];for(var P=0;P<2*A;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let M=0;M<D.g.length;M++){const U=this.i(P)>>>16,x=this.i(P)&65535,Kt=D.i(M)>>>16,Xt=D.i(M)&65535;N[2*P+2*M]+=x*Xt,at(N,2*P+2*M),N[2*P+2*M+1]+=U*Xt,at(N,2*P+2*M+1),N[2*P+2*M+1]+=x*Kt,at(N,2*P+2*M+1),N[2*P+2*M+2]+=U*Kt,at(N,2*P+2*M+2)}for(D=0;D<A;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=A;D<2*A;D++)N[D]=0;return new c(N,0)};function at(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function rt(D,A){this.g=D,this.h=A}function gt(D,A){if(V(A))throw Error("division by zero");if(V(D))return new rt(E,E);if(C(D))return A=gt(z(D),A),new rt(z(A.g),z(A.h));if(C(A))return A=gt(D,z(A)),new rt(z(A.g),A.h);if(D.g.length>30){if(C(D)||C(A))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=A;P.l(D)<=0;)N=vt(N),P=vt(P);var M=ht(N,1),U=ht(P,1);for(P=ht(P,2),N=ht(N,2);!V(P);){var x=U.add(P);x.l(D)<=0&&(M=M.add(N),U=x),P=ht(P,1),N=ht(N,1)}return A=$(D,M.j(A)),new rt(M,A)}for(M=E;D.l(A)>=0;){for(N=Math.max(1,Math.floor(D.m()/A.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=g(N),x=U.j(A);C(x)||x.l(D)>0;)N-=P,U=g(N),x=U.j(A);V(U)&&(U=S),M=M.add(U),D=$(D,x)}return new rt(M,D)}r.B=function(D){return gt(this,D).h},r.and=function(D){const A=Math.max(this.g.length,D.g.length),N=[];for(let P=0;P<A;P++)N[P]=this.i(P)&D.i(P);return new c(N,this.h&D.h)},r.or=function(D){const A=Math.max(this.g.length,D.g.length),N=[];for(let P=0;P<A;P++)N[P]=this.i(P)|D.i(P);return new c(N,this.h|D.h)},r.xor=function(D){const A=Math.max(this.g.length,D.g.length),N=[];for(let P=0;P<A;P++)N[P]=this.i(P)^D.i(P);return new c(N,this.h^D.h)};function vt(D){const A=D.g.length+1,N=[];for(let P=0;P<A;P++)N[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(N,D.h)}function ht(D,A){const N=A>>5;A%=32;const P=D.g.length-N,M=[];for(let U=0;U<P;U++)M[U]=A>0?D.i(U+N)>>>A|D.i(U+N+1)<<32-A:D.i(U+N);return new c(M,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Cb=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=T,Rr=c}).apply(typeof t0<"u"?t0:typeof self<"u"?self:typeof window<"u"?window:{});var lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Db,ju,Nb,vf,lg,xb,Vb,Mb;(function(){var r,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof lf=="object"&&lf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=e(this);function a(h,y){if(y)t:{var v=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var q=h[w];if(!(q in v))break t;v=v[q]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&t(v,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var v=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&v.push([w,y[w]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,v){return h.call.apply(h.bind,arguments)}function g(h,y,v){return g=p,g.apply(null,arguments)}function T(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function E(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(w,q,Y){for(var ft=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)ft[Ot-2]=arguments[Ot];return y.prototype[q].apply(w,ft)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function V(h,y){for(let w=1;w<arguments.length;w++){const q=arguments[w];var v=typeof q;if(v=v!="object"?v:q?Array.isArray(q)?"array":v:"null",v=="array"||v=="object"&&typeof q.length=="number"){v=h.length||0;const Y=q.length||0;h.length=v+Y;for(let ft=0;ft<Y;ft++)h[v+ft]=q[ft]}else h.push(q)}}class C{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(h){c.setTimeout(()=>{throw h},0)}function $(){var h=D;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class at{constructor(){this.h=this.g=null}add(y,v){const w=rt.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var rt=new C(()=>new gt,h=>h.reset());class gt{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,ht=!1,D=new at,A=()=>{const h=Promise.resolve(void 0);vt=()=>{h.then(N)}};function N(){for(var h;h=$();){try{h.h.call(h.g)}catch(v){z(v)}var y=rt;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ht=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function Kt(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Kt,M),Kt.prototype.init=function(h,y){const v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Kt.Z.h.call(this)},Kt.prototype.h=function(){Kt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Xt="closure_listenable_"+(Math.random()*1e6|0),J=0;function lt(h,y,v,w,q){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=q,this.key=++J,this.da=this.fa=!1}function Tt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Mt(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function Lt(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function k(h){const y={};for(const v in h)y[v]=h[v];return y}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(h,y){let v,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(v in w)h[v]=w[v];for(let Y=0;Y<tt.length;Y++)v=tt[Y],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function ot(h){this.src=h,this.g={},this.h=0}ot.prototype.add=function(h,y,v,w,q){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const ft=it(h,y,w,q);return ft>-1?(y=h[ft],v||(y.fa=!1)):(y=new lt(y,this.src,Y,!!w,q),y.fa=v,h.push(y)),y};function mt(h,y){const v=y.type;if(v in h.g){var w=h.g[v],q=Array.prototype.indexOf.call(w,y,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(w,q,1),Y&&(Tt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function it(h,y,v,w){for(let q=0;q<h.length;++q){const Y=h[q];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==w)return q}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),Rt={};function Vt(h,y,v,w,q){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)Vt(h,y[Y],v,w,q);return null}return v=zr(v),h&&h[Xt]?h.J(y,v,m(w)?!!w.capture:!1,q):ut(h,y,v,!1,w,q)}function ut(h,y,v,w,q,Y){if(!y)throw Error("Invalid event type");const ft=m(q)?!!q.capture:!!q;let Ot=qn(h);if(Ot||(h[pt]=Ot=new ot(h)),v=Ot.add(y,v,w,ft,Y),v.proxy)return v;if(w=Dt(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)U||(q=ft),q===void 0&&(q=!1),h.addEventListener(y.toString(),w,q);else if(h.attachEvent)h.attachEvent(me(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Dt(){function h(v){return y.call(h.src,h.listener,v)}const y=si;return h}function Yt(h,y,v,w,q){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Yt(h,y[Y],v,w,q);else w=m(w)?!!w.capture:!!w,v=zr(v),h&&h[Xt]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],v=it(y,v,w,q),v>-1&&(Tt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=qn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=it(y,v,w,q)),(v=h>-1?y[h]:null)&&ye(v))}function ye(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Xt])mt(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(me(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=qn(y))?(mt(v,h),v.h==0&&(v.src=null,y[pt]=null)):Tt(h)}}}function me(h){return h in Rt?Rt[h]:Rt[h]="on"+h}function si(h,y){if(h.da)h=!0;else{y=new Kt(y,this);const v=h.listener,w=h.ha||h.src;h.fa&&ye(h),h=v.call(w,y)}return h}function qn(h){return h=h[pt],h instanceof ot?h:null}var ss="__closure_events_fn_"+(Math.random()*1e9>>>0);function zr(h){return typeof h=="function"?h:(h[ss]||(h[ss]=function(y){return h.handleEvent(y)}),h[ss])}function Ee(){P.call(this),this.i=new ot(this),this.M=this,this.G=null}E(Ee,P),Ee.prototype[Xt]=!0,Ee.prototype.removeEventListener=function(h,y,v,w){Yt(this,h,y,v,w)};function Re(h,y){var v,w=h.G;if(w)for(v=[];w;w=w.G)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var q=y;y=new M(w,h),Q(y,q)}q=!0;let Y,ft;if(v)for(ft=v.length-1;ft>=0;ft--)Y=y.g=v[ft],q=Fn(Y,w,!0,y)&&q;if(Y=y.g=h,q=Fn(Y,w,!0,y)&&q,q=Fn(Y,w,!1,y)&&q,v)for(ft=0;ft<v.length;ft++)Y=y.g=v[ft],q=Fn(Y,w,!1,y)&&q}Ee.prototype.N=function(){if(Ee.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let w=0;w<v.length;w++)Tt(v[w]);delete h.g[y],h.h--}}this.G=null},Ee.prototype.J=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},Ee.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function Fn(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Y=0;Y<y.length;++Y){const ft=y[Y];if(ft&&!ft.da&&ft.capture==v){const Ot=ft.listener,De=ft.ha||ft.src;ft.fa&&mt(h.i,ft),q=Ot.call(De,w)!==!1&&q}}return q&&!w.defaultPrevented}function Cl(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function jr(h){h.g=Cl(()=>{h.g=null,h.i&&(h.i=!1,jr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class en extends P{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(h){P.call(this),this.h=h,this.g={}}E(rs,P);var bi=[];function Ai(h){Mt(h.g,function(y,v){this.g.hasOwnProperty(v)&&ye(y)},h),h.g={}}rs.prototype.N=function(){rs.Z.N.call(this),Ai(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ii=c.JSON.stringify,Bt=c.JSON.parse,Se=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function wi(){}function Oc(){}var ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nn(){M.call(this,"d")}E(nn,M);function Hn(){M.call(this,"c")}E(Hn,M);var Ce={},Pc=null;function Ha(){return Pc=Pc||new Ee}Ce.Ia="serverreachability";function kc(h){M.call(this,Ce.Ia,h)}E(kc,M);function Ri(h){const y=Ha();Re(y,new kc(y))}Ce.STAT_EVENT="statevent";function Br(h,y){M.call(this,Ce.STAT_EVENT,h),this.stat=y}E(Br,M);function Pe(h){const y=Ha();Re(y,new Br(y,h))}Ce.Ja="timingevent";function Ci(h,y){M.call(this,Ce.Ja,h),this.size=y}E(Ci,M);function Di(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ai(){this.g=!0}ai.prototype.ua=function(){this.g=!1};function Vd(h,y,v,w,q,Y){h.info(function(){if(h.g)if(Y){var ft="",Ot=Y.split("&");for(let Wt=0;Wt<Ot.length;Wt++){var De=Ot[Wt].split("=");if(De.length>1){const _e=De[0];De=De[1];const Yn=_e.split("_");ft=Yn.length>=2&&Yn[1]=="type"?ft+(_e+"="+De+"&"):ft+(_e+"=redacted&")}}}else ft=null;else ft=Y;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+y+`
`+v+`
`+ft})}function Lc(h,y,v,w,q,Y,ft){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+y+`
`+v+`
`+Y+" "+ft})}function Ni(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Md(h,v)+(w?" "+w:"")})}function qr(h,y){h.info(function(){return"TIMEOUT: "+y})}ai.prototype.info=function(){};function Md(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var v=Y[h];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var q=w[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ft=1;ft<w.length;ft++)w[ft]=""}}}}return Ii(Y)}catch{return y}}var Fr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Dl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nl;function Hr(){}E(Hr,wi),Hr.prototype.g=function(){return new XMLHttpRequest},Nl=new Hr;function as(h){return encodeURIComponent(String(h))}function Uc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function oi(h,y,v,w){this.j=h,this.i=y,this.l=v,this.S=w||1,this.V=new rs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new li}function li(){this.i=null,this.g="",this.h=!1}var ke={},Xe={};function xi(h,y,v){h.M=1,h.A=Gr(Ue(y)),h.u=v,h.R=!0,Ga(h,null)}function Ga(h,y){h.F=Date.now(),Vi(h),h.B=Ue(h.A);var v=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),$a(v.i,"t",w),h.C=0,v=h.j.L,h.h=new li,h.g=Wc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new en(g(h.Y,h,h.g),h.P)),y=h.V,v=h.g,w=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(bi[0]=q.toString()),q=bi);for(let Y=0;Y<q.length;Y++){const ft=Vt(v,q[Y],w||y.handleEvent,!1,y.h||y);if(!ft)break;y.g[ft.key]=ft}y=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ri(),Vd(h.i,h.v,h.B,h.l,h.S,h.u)}oi.prototype.ba=function(h){h=h.target;const y=this.O;y&&hi(h)==3?y.j():this.Y(h)},oi.prototype.Y=function(h){try{if(h==this.g)t:{const Ot=hi(this.g),De=this.g.ya(),Wt=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||Ot!=4||De==7||(De==8||Wt<=0?Ri(3):Ri(2)),Mi(this);var y=this.g.ca();this.X=y;var v=Od(this);if(this.o=y==200,Lc(this.i,this.v,this.B,this.l,this.S,Ot,y),this.o){if(this.U&&!this.L){e:{if(this.g){var w,q=this.g;if((w=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(w)){var Y=w;break e}}Y=null}if(h=Y)Ni(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oi(this,h);else{this.o=!1,this.m=3,Pe(12),Dn(this),Gn(this);break t}}if(this.R){h=!0;let _e;for(;!this.K&&this.C<v.length;)if(_e=jc(this,v),_e==Xe){Ot==4&&(this.m=4,Pe(14),h=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(_e==ke){this.m=4,Pe(15),Ni(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Ni(this.i,this.l,_e,null),Oi(this,_e);if(zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||v.length!=0||this.h.h||(this.m=1,Pe(16),h=!1),this.o=this.o&&h,!h)Ni(this.i,this.l,v,"[Invalid Chunked Response]"),Dn(this),Gn(this);else if(v.length>0&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.aa&&!ft.P&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Gl(ft),ft.P=!0,Pe(11))}}else Ni(this.i,this.l,v,null),Oi(this,v);Ot==4&&Dn(this),this.o&&!this.K&&(Ot==4?$c(this.j,this):(this.o=!1,Vi(this)))}else ls(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Pe(12)):(this.m=0,Pe(13)),Dn(this),Gn(this)}}}catch{}finally{}};function Od(h){if(!zc(h))return h.g.la();const y=sn(h.g);if(y==="")return"";let v="";const w=y.length,q=hi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Dn(h),Gn(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<w;Y++)h.h.h=!0,v+=h.h.i.decode(y[Y],{stream:!(q&&Y==w-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function zc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function jc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Xe:(v=Number(y.substring(v,w)),isNaN(v)?ke:(w+=1,w+v>y.length?Xe:(y=y.slice(w,w+v),h.C=w+v,y)))}oi.prototype.cancel=function(){this.K=!0,Dn(this)};function Vi(h){h.T=Date.now()+h.H,Ka(h,h.H)}function Ka(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Di(g(h.aa,h),y)}function Mi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}oi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(qr(this.i,this.B),this.M!=2&&(Ri(),Pe(17)),Dn(this),this.m=2,Gn(this)):Ka(this,this.T-h)};function Gn(h){h.j.I==0||h.K||$c(h.j,h)}function Dn(h){Mi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Ai(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Oi(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||ki(v.h,h))){if(!h.L&&ki(v.h,h)&&v.I==3){try{var w=v.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)to(v),Hs(v);else break t;Zr(v),Pe(18)}}else v.xa=q[1],0<v.xa-v.K&&q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Di(g(v.Va,v),6e3));Pi(v.h)<=1&&v.ta&&(v.ta=void 0)}else qi(v,11)}else if((h.L||v.g==h)&&to(v),!x(y))for(q=v.Ba.g.parse(y),y=0;y<q.length;y++){let Wt=q[y];const _e=Wt[0];if(!(_e<=v.K))if(v.K=_e,Wt=Wt[1],v.I==2)if(Wt[0]=="c"){v.M=Wt[1],v.ba=Wt[2];const Yn=Wt[3];Yn!=null&&(v.ka=Yn,v.j.info("VER="+v.ka));const Fi=Wt[4];Fi!=null&&(v.za=Fi,v.j.info("SVER="+v.za));const fi=Wt[5];fi!=null&&typeof fi=="number"&&fi>0&&(w=1.5*fi,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const di=h.g;if(di){const Wr=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wr){var Y=w.h;Y.g||Wr.indexOf("spdy")==-1&&Wr.indexOf("quic")==-1&&Wr.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ml(Y,Y.h),Y.h=null))}if(w.G){const eo=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;eo&&(w.wa=eo,ne(w.J,w.G,eo))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var ft=h;if(w.na=Zc(w,w.L?w.ba:null,w.W),ft.L){Ol(w.h,ft);var Ot=ft,De=w.O;De&&(Ot.H=De),Ot.D&&(Mi(Ot),Vi(Ot)),w.g=ft}else Qc(w);v.i.length>0&&Bi(v)}else Wt[0]!="stop"&&Wt[0]!="close"||qi(v,7);else v.I==3&&(Wt[0]=="stop"||Wt[0]=="close"?Wt[0]=="stop"?qi(v,7):Fl(v):Wt[0]!="noop"&&v.l&&v.l.qa(Wt),v.A=0)}}Ri(4)}catch{}}var Le=class{constructor(h,y){this.g=h,this.map=y}};function xl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Pi(h){return h.h?1:h.g?h.g.size:0}function ki(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ml(h,y){h.g?h.g.add(y):h.h=y}function Ol(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}xl.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Pl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return R(h.i)}var Bc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qa(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const w=h[v].indexOf("=");let q,Y=null;w>=0?(q=h[v].substring(0,w),Y=h[v].substring(w+1)):q=h[v],y(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Nn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Nn?(this.l=h.l,Je(this,h.j),this.o=h.o,this.g=h.g,Ls(this,h.u),this.h=h.h,kl(this,Gc(h.i)),this.m=h.m):h&&(y=String(h).match(Bc))?(this.l=!1,Je(this,y[1]||"",!0),this.o=Li(y[2]||""),this.g=Li(y[3]||"",!0),Ls(this,y[4]),this.h=Li(y[5]||"",!0),kl(this,y[6]||"",!0),this.m=Li(y[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}Nn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Kr(y,Ya,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Kr(y,Ya,!0),"@"),h.push(as(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Kr(v,v.charAt(0)=="/"?Ll:qc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Kr(v,Fc)),h.join("")},Nn.prototype.resolve=function(h){const y=Ue(this);let v=!!h.j;v?Je(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var w=h.h;if(v)Ls(y,h.u);else if(v=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var q=y.h.lastIndexOf("/");q!=-1&&(w=y.h.slice(0,q+1)+w)}if(q=w,q==".."||q==".")w="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){w=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let ft=0;ft<q.length;){const Ot=q[ft++];Ot=="."?w&&ft==q.length&&Y.push(""):Ot==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),w&&ft==q.length&&Y.push("")):(Y.push(Ot),w=!0)}w=Y.join("/")}else w=q}return v?y.h=w:v=h.i.toString()!=="",v?kl(y,Gc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Ue(h){return new Nn(h)}function Je(h,y,v){h.j=v?Li(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ls(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function kl(h,y,v){y instanceof zs?(h.i=y,Xa(h.i,h.l)):(v||(y=Kr(y,Us)),h.i=new zs(y,h.l))}function ne(h,y,v){h.i.set(y,v)}function Gr(h){return ne(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Li(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Kr(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Tn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ya=/[#\/\?@]/g,qc=/[#\?:]/g,Ll=/[#\?]/g,Us=/[#\?@]/g,Fc=/#/g;function zs(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function En(h){h.g||(h.g=new Map,h.h=0,h.i&&Qa(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=zs.prototype,r.add=function(h,y){En(this),this.i=null,h=js(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Hc(h,y){En(h),y=js(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ul(h,y){return En(h),y=js(h,y),h.g.has(y)}r.forEach=function(h,y){En(this),this.g.forEach(function(v,w){v.forEach(function(q){h.call(y,q,w,this)},this)},this)};function zl(h,y){En(h);let v=[];if(typeof y=="string")Ul(h,y)&&(v=v.concat(h.g.get(js(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}r.set=function(h,y){return En(this),this.i=null,h=js(this,h),Ul(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=zl(this,h),h.length>0?String(h[0]):y):y};function $a(h,y,v){Hc(h,y),v.length>0&&(h.i=null,h.g.set(js(h,y),R(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var v=y[w];const q=as(v);v=zl(this,v);for(let Y=0;Y<v.length;Y++){let ft=q;v[Y]!==""&&(ft+="="+as(v[Y])),h.push(ft)}}return this.i=h.join("&")};function Gc(h){const y=new zs;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function js(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Xa(h,y){y&&!h.j&&(En(h),h.i=null,h.g.forEach(function(v,w){const q=w.toLowerCase();w!=q&&(Hc(this,w),$a(this,q,v))},h)),h.j=y}function ui(h,y){const v=new ai;if(c.Image){const w=new Image;w.onload=T(Kn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=T(Kn,v,"TestLoadImage: error",!1,y,w),w.onabort=T(Kn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=T(Kn,v,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function jl(h,y){const v=new ai,w=new AbortController,q=setTimeout(()=>{w.abort(),Kn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Y=>{clearTimeout(q),Y.ok?Kn(v,"TestPingServer: ok",!0,y):Kn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Kn(v,"TestPingServer: error",!1,y)})}function Kn(h,y,v,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(v)}catch{}}function Bs(){this.g=new Se}function Ui(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ui,wi),Ui.prototype.g=function(){return new Qr(this.i,this.h)};function Qr(h,y){Ee.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Qr,Ee),r=Qr.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ci(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?qs(this):ci(this),this.readyState==3&&Ja(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,qs(this))},r.Na=function(h){this.g&&(this.response=h,qs(this))},r.ga=function(){this.g&&qs(this)};function qs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ci(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ci(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Qn(h){let y="";return Mt(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function Yr(h,y,v){t:{for(w in v){var w=!1;break t}w=!0}w||(v=Qn(v),typeof h=="string"?v!=null&&as(v):ne(h,y,v))}function le(h){Ee.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(le,Ee);var zi=/^https?$/i,Bl=["POST","PUT"];r=le.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nl.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){$r(this,Y);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)v.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())v.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Bl,y,void 0)>=0)||w||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ft]of v)this.g.setRequestHeader(Y,ft);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){$r(this,Y)}};function $r(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,ql(h),os(h)}function ql(h){h.A||(h.A=!0,Re(h,"complete"),Re(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Re(this,"complete"),Re(this,"abort"),os(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),le.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Xr(this):this.Xa())},r.Xa=function(){Xr(this)};function Xr(h){if(h.h&&typeof l<"u"){if(h.v&&hi(h)==4)setTimeout(h.Ca.bind(h),0);else if(Re(h,"readystatechange"),hi(h)==4){h.h=!1;try{const Y=h.ca();t:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var w;if(w=Y===0){let ft=String(h.D).match(Bc)[1]||null;!ft&&c.self&&c.self.location&&(ft=c.self.location.protocol.slice(0,-1)),w=!zi.test(ft?ft.toLowerCase():"")}v=w}if(v)Re(h,"complete"),Re(h,"success");else{h.o=6;try{var q=hi(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",ql(h)}}finally{os(h)}}}}function os(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Re(h,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function hi(h){return h.g?h.g.readyState:0}r.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Bt(y)}};function sn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(h){const y={};h=(h.g&&hi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(x(h[w]))continue;var v=Uc(h[w]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[q]||[];y[q]=Y,Y.push(v)}Lt(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Fs(h){this.za=0,this.i=[],this.j=new ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ji("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ji("baseRetryDelayMs",5e3,h),this.Za=ji("retryDelaySeedMs",1e4,h),this.Ta=ji("forwardChannelMaxRetries",2,h),this.va=ji("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new xl(h&&h.concurrentRequestLimit),this.Ba=new Bs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Fs.prototype,r.ka=8,r.I=1,r.connect=function(h,y,v,w){Pe(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=Zc(this,null,this.W),Bi(this)};function Fl(h){if(Za(h),h.I==3){var y=h.V++,v=Ue(h.J);if(ne(v,"SID",h.M),ne(v,"RID",y),ne(v,"TYPE","terminate"),Jr(h,v),y=new oi(h,h.j,y),y.M=2,y.A=Gr(Ue(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Wc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Vi(y)}Jc(h)}function Hs(h){h.g&&(Gl(h),h.g.cancel(),h.g=null)}function Za(h){Hs(h),h.v&&(c.clearTimeout(h.v),h.v=null),to(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Bi(h){if(!Vl(h.h)&&!h.m){h.m=!0;var y=h.Ea;vt||A(),ht||(vt(),ht=!0),D.add(y,h),h.D=0}}function Wa(h,y){return Pi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Di(g(h.Ea,h,y),Xc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new oi(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=k(Y),Q(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=Kc(this,q,y),v=Ue(this.J),ne(v,"RID",h),ne(v,"CVER",22),this.G&&ne(v,"X-HTTP-Session-Id",this.G),Jr(this,v),Y&&(this.R?y="headers="+as(Qn(Y))+"&"+y:this.u&&Yr(v,this.u,Y)),Ml(this.h,q),this.Ra&&ne(v,"TYPE","init"),this.S?(ne(v,"$req",y),ne(v,"SID","null"),q.U=!0,xi(q,v,null)):xi(q,v,y),this.I=2}}else this.I==3&&(h?Hl(this,h):this.i.length==0||Vl(this.h)||Hl(this))};function Hl(h,y){var v;y?v=y.l:v=h.V++;const w=Ue(h.J);ne(w,"SID",h.M),ne(w,"RID",v),ne(w,"AID",h.K),Jr(h,w),h.u&&h.o&&Yr(w,h.u,h.o),v=new oi(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Kc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ml(h.h,v),xi(v,w,y)}function Jr(h,y){h.H&&Mt(h.H,function(v,w){ne(y,w,v)}),h.l&&Mt({},function(v,w){ne(y,w,v)})}function Kc(h,y,v){v=Math.min(h.i.length,v);const w=h.l?g(h.l.Ka,h.l,h):null;t:{var q=h.i;let Ot=-1;for(;;){const De=["count="+v];Ot==-1?v>0?(Ot=q[0].g,De.push("ofs="+Ot)):Ot=0:De.push("ofs="+Ot);let Wt=!0;for(let _e=0;_e<v;_e++){var Y=q[_e].g;const Yn=q[_e].map;if(Y-=Ot,Y<0)Ot=Math.max(0,q[_e].g-100),Wt=!1;else try{Y="req"+Y+"_"||"";try{var ft=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Fi,fi]of ft){let di=fi;m(fi)&&(di=Ii(fi)),De.push(Y+Fi+"="+encodeURIComponent(di))}}catch(Fi){throw De.push(Y+"type="+encodeURIComponent("_badmap")),Fi}}catch{w&&w(Yn)}}if(Wt){ft=De.join("&");break t}}ft=void 0}return h=h.i.splice(0,v),y.G=h,ft}function Qc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;vt||A(),ht||(vt(),ht=!0),D.add(y,h),h.A=0}}function Zr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Di(g(h.Da,h),Xc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Di(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pe(10),Hs(this),Yc(this))};function Gl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Yc(h){h.g=new oi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ue(h.na);ne(y,"RID","rpc"),ne(y,"SID",h.M),ne(y,"AID",h.K),ne(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&ne(y,"TO",h.ia),ne(y,"TYPE","xmlhttp"),Jr(h,y),h.u&&h.o&&Yr(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Gr(Ue(y)),v.u=null,v.R=!0,Ga(v,h)}r.Va=function(){this.C!=null&&(this.C=null,Hs(this),Zr(this),Pe(19))};function to(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function $c(h,y){var v=null;if(h.g==y){to(h),Gl(h),h.g=null;var w=2}else if(ki(h.h,y))v=y.G,Ol(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;w=Ha(),Re(w,new Ci(w,v)),Bi(h)}else Qc(h);else if(q=y.m,q==3||q==0&&y.X>0||!(w==1&&Wa(h,y)||w==2&&Zr(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),q){case 1:qi(h,5);break;case 4:qi(h,10);break;case 3:qi(h,6);break;default:qi(h,2)}}}function Xc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function qi(h,y){if(h.j.info("Error code "+y),y==2){var v=g(h.bb,h),w=h.Ua;const q=!w;w=new Nn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Je(w,"https"),Gr(w),q?ui(w.toString(),v):jl(w.toString(),v)}else Pe(2);h.I=0,h.l&&h.l.pa(y),Jc(h),Za(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function Jc(h){if(h.I=0,h.ja=[],h.l){const y=Pl(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function Zc(h,y,v){var w=v instanceof Nn?Ue(v):new Nn(v);if(w.g!="")y&&(w.g=y+"."+w.g),Ls(w,w.u);else{var q=c.location;w=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Y=new Nn(null);w&&Je(Y,w),y&&(Y.g=y),q&&Ls(Y,q),v&&(Y.h=v),w=Y}return v=h.G,y=h.wa,v&&y&&ne(w,v,y),ne(w,"VER",h.ka),Jr(h,w),w}function Wc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new le(new Ui({ab:v})):new le(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function th(){}r=th.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Gs(){}Gs.prototype.g=function(h,y){return new gn(h,y)};function gn(h,y){Ee.call(this),this.g=new Fs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!x(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new us(this)}E(gn,Ee),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Fl(this.g)},gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Ii(h),h=v);y.i.push(new Le(y.Ya++,h)),y.I==3&&Bi(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,Fl(this.g),delete this.g,gn.Z.N.call(this)};function eh(h){nn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const v in y){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(eh,nn);function nh(){Hn.call(this),this.status=1}E(nh,Hn);function us(h){this.g=h}E(us,th),us.prototype.ra=function(){Re(this.g,"a")},us.prototype.qa=function(h){Re(this.g,new eh(h))},us.prototype.pa=function(h){Re(this.g,new nh)},us.prototype.oa=function(){Re(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Mb=function(){return new Gs},Vb=function(){return Ha()},xb=Ce,lg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,vf=Fr,Dl.COMPLETE="complete",Nb=Dl,Oc.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",Ee.prototype.listen=Ee.prototype.J,ju=Oc,le.prototype.listenOnce=le.prototype.K,le.prototype.getLastError=le.prototype.Ha,le.prototype.getLastErrorCode=le.prototype.ya,le.prototype.getStatus=le.prototype.ca,le.prototype.getResponseJson=le.prototype.La,le.prototype.getResponseText=le.prototype.la,le.prototype.send=le.prototype.ea,le.prototype.setWithCredentials=le.prototype.Fa,Db=le}).apply(typeof lf<"u"?lf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="12.9.0";function UN(r){Sl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new jg("@firebase/firestore");function zo(){return Oa.logLevel}function st(r,...t){if(Oa.logLevel<=Ht.DEBUG){const e=t.map(Wg);Oa.debug(`Firestore (${Sl}): ${r}`,...e)}}function Ve(r,...t){if(Oa.logLevel<=Ht.ERROR){const e=t.map(Wg);Oa.error(`Firestore (${Sl}): ${r}`,...e)}}function Zo(r,...t){if(Oa.logLevel<=Ht.WARN){const e=t.map(Wg);Oa.warn(`Firestore (${Sl}): ${r}`,...e)}}function Wg(r){if(typeof r=="string")return r;try{return(function(e){return JSON.stringify(e)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Ob(r,i,e)}function Ob(r,t,e){let i=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ve(i),new Error(i)}function bt(r,t,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,r||Ob(t,a,i)}function Et(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends Os{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(fn.UNAUTHENTICATED)))}shutdown(){}}class BN{constructor(t){this.t=t,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){bt(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,e(p)):Promise.resolve();let l=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cr,t.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;t.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},m=p=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cr)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string",31837,{l:i}),new zN(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return bt(t===null||typeof t=="string",2055,{h:t}),new fn(t)}}class qN{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class FN{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new qN(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class e0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HN{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){bt(this.o===void 0,3512);const i=l=>{l.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,st("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable((()=>i(l)))};const a=l=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new e0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(bt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new e0(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<r;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=GN(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<e&&(i+=t.charAt(a[l]%62))}return i}}function Nt(r,t){return r<t?-1:r>t?1:0}function ug(r,t){const e=Math.min(r.length,t.length);for(let i=0;i<e;i++){const a=r.charAt(i),l=t.charAt(i);if(a!==l)return Bp(a)===Bp(l)?Nt(a,l):Bp(a)?1:-1}return Nt(r.length,t.length)}const KN=55296,QN=57343;function Bp(r){const t=r.charCodeAt(0);return t>=KN&&t<=QN}function Wo(r,t,e){return r.length===t.length&&r.every(((i,a)=>e(i,t[a])))}function Pb(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="__name__";class Xi{constructor(t,e,i){e===void 0?e=0:e>t.length&&yt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&yt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Xi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Xi?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const l=Xi.compareSegments(t.get(a),e.get(a));if(l!==0)return l}return Nt(t.length,e.length)}static compareSegments(t,e){const i=Xi.isNumericId(t),a=Xi.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?Xi.extractNumericId(t).compare(Xi.extractNumericId(e)):ug(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Rr.fromString(t.substring(4,t.length-2))}}class ee extends Xi{construct(t,e,i){return new ee(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ct(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((a=>a.length>0)))}return new ee(e)}static emptyPath(){return new ee([])}}const YN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class be extends Xi{construct(t,e,i){return new be(t,e,i)}static isValidIdentifier(t){return YN.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),be.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n0}static keyField(){return new be([n0])}static fromServerFormat(t){const e=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ct(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;a<t.length;){const m=t[a];if(m==="\\"){if(a+1===t.length)throw new ct(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ct(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,a+=2}else m==="`"?(c=!c,a++):m!=="."||c?(i+=m,a++):(l(),a++)}if(l(),c)throw new ct(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new be(e)}static emptyPath(){return new be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(ee.fromString(t))}static fromName(t){return new dt(ee.fromString(t).popFirst(5))}static empty(){return new dt(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ee.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new ee(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(r,t,e){if(!e)throw new ct(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function $N(r,t,e,i){if(t===!0&&i===!0)throw new ct(Z.INVALID_ARGUMENT,`${r} and ${e} cannot be used together.`)}function i0(r){if(!dt.isDocumentKey(r))throw new ct(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function s0(r){if(dt.isDocumentKey(r))throw new ct(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Lb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ud(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":yt(12329,{type:typeof r})}function Ds(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ct(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=ud(r);throw new ct(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(r,t){const e={typeString:r};return t&&(e.value=t),e}function Ic(r,t){if(!Lb(r))throw new ct(Z.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const a=t[i].typeString,l="value"in t[i]?{value:t[i].value}:void 0;if(!(i in r)){e=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){e=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){e=`Expected '${i}' field to equal '${l.value}'`;break}}if(e)throw new ct(Z.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=-62135596800,a0=1e6;class re{static now(){return re.fromMillis(Date.now())}static fromDate(t){return re.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*a0);return new re(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ct(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ct(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<r0)throw new ct(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a0}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ic(t,re._jsonSchema))return new re(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-r0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}re._jsonSchemaVersion="firestore/timestamp/1.0",re._jsonSchema={type:Ge("string",re._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{static fromTimestamp(t){return new It(t)}static min(){return new It(new re(0,0))}static max(){return new It(new re(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=-1;class Uf{constructor(t,e,i,a){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=a}}function cg(r){return r.fields.find((t=>t.kind===2))}function ya(r){return r.fields.filter((t=>t.kind!==2))}Uf.UNKNOWN_ID=-1;class Tf{constructor(t,e){this.fieldPath=t,this.kind=e}}class ac{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new ac(0,Bn.min())}}function Ub(r,t){const e=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=It.fromTimestamp(i===1e9?new re(e+1,0):new re(e,i));return new Bn(a,dt.empty(),t)}function zb(r){return new Bn(r.readTime,r.key,tl)}class Bn{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Bn(It.min(),dt.empty(),tl)}static max(){return new Bn(It.max(),dt.empty(),tl)}}function ey(r,t){let e=r.readTime.compareTo(t.readTime);return e!==0?e:(e=dt.comparator(r.documentKey,t.documentKey),e!==0?e:Nt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pr(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==jb)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new B(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,a)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof B?e:B.resolve(e)}catch(e){return B.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):B.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):B.reject(e)}static resolve(t){return new B(((e,i)=>{e(t)}))}static reject(t){return new B(((e,i)=>{i(t)}))}static waitFor(t){return new B(((e,i)=>{let a=0,l=0,c=!1;t.forEach((m=>{++a,m.next((()=>{++l,c&&l===a&&e()}),(p=>i(p)))})),c=!0,l===a&&e()}))}static or(t){let e=B.resolve(!1);for(const i of t)e=e.next((a=>a?B.resolve(a):i()));return e}static forEach(t,e){const i=[];return t.forEach(((a,l)=>{i.push(e.call(this,a,l))})),this.waitFor(i)}static mapArray(t,e){return new B(((i,a)=>{const l=t.length,c=new Array(l);let m=0;for(let p=0;p<l;p++){const g=p;e(t[g]).next((T=>{c[g]=T,++m,m===l&&i(c)}),(T=>a(T)))}}))}static doWhile(t,e){return new B(((i,a)=>{const l=()=>{t()===!0?e().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="SimpleDb";class cd{static open(t,e,i,a){try{return new cd(e,t.transaction(a,i))}catch(l){throw new Yu(e,l)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Cr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Yu(t,e.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=ny(i.target.error);this.S.reject(new Yu(t,a))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(st(Un,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new JN(e)}}class Dr{static delete(t){return st(Un,"Removing database:",t),va(zS().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!KS())return!1;if(Dr.F())return!0;const t=Ye(),e=Dr.M(t),i=0<e&&e<10,a=qb(t),l=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||l)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(t,e,i){this.name=t,this.version=e,this.N=i,this.B=null,Dr.M(Ye())===12.2&&Ve("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(st(Un,"Opening database:",this.name),this.db=await new Promise(((e,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;e(c)},a.onblocked=()=>{i(new Yu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new ct(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new ct(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Yu(t,c))},a.onupgradeneeded=l=>{st(Un,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{st(Un,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=e=>this.K(e)),this.db}q(t){this.K=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,a){const l=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const m=cd.open(this.db,t,l?"readonly":"readwrite",i),p=a(m).next((g=>(m.C(),g))).catch((g=>(m.abort(g),B.reject(g)))).toPromise();return p.catch((()=>{})),await m.D,p}catch(m){const p=m,g=p.name!=="FirebaseError"&&c<3;if(st(Un,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qb(r){const t=r.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class XN{constructor(t){this.U=t,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(t){this.U=t}done(){this.$=!0}j(t){this.W=t}delete(){return va(this.U.delete())}}class Yu extends ct{constructor(t,e){super(Z.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function kr(r){return r.name==="IndexedDbTransactionError"}class JN{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(st(Un,"PUT",this.store.name,t,e),i=this.store.put(e,t)):(st(Un,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),va(i)}add(t){return st(Un,"ADD",this.store.name,t,t),va(this.store.add(t))}get(t){return va(this.store.get(t)).next((e=>(e===void 0&&(e=null),st(Un,"GET",this.store.name,t,e),e)))}delete(t){return st(Un,"DELETE",this.store.name,t),va(this.store.delete(t))}count(){return st(Un,"COUNT",this.store.name),va(this.store.count())}H(t,e){const i=this.options(t,e),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new B(((c,m)=>{l.onerror=p=>{m(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.J(l,((m,p)=>{c.push(p)})).next((()=>c))}}Z(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new B(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}X(t,e){st(Un,"DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const a=this.cursor(i);return this.J(a,((l,c,m)=>m.delete()))}ee(t,e){let i;e?i=t:(i={},e=t);const a=this.cursor(i);return this.J(a,e)}te(t){const e=this.cursor({});return new B(((i,a)=>{e.onerror=l=>{const c=ny(l.target.error);a(c)},e.onsuccess=l=>{const c=l.target.result;c?t(c.primaryKey,c.value).next((m=>{m?c.continue():i()})):i()}}))}J(t,e){const i=[];return new B(((a,l)=>{t.onerror=c=>{l(c.target.error)},t.onsuccess=c=>{const m=c.target.result;if(!m)return void a();const p=new XN(m),g=e(m.primaryKey,m.value,p);if(g instanceof B){const T=g.catch((E=>(p.done(),B.reject(E))));i.push(T)}p.isDone?a():p.G===null?m.continue():m.continue(p.G)}})).next((()=>B.waitFor(i)))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function va(r){return new B(((t,e)=>{r.onsuccess=i=>{const a=i.target.result;t(a)},r.onerror=i=>{const a=ny(i.target.error);e(a)}}))}let o0=!1;function ny(r){const t=Dr.M(Ye());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(e)>=0){const i=new ct("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return o0||(o0=!0,setTimeout((()=>{throw i}),0)),i}}return r}const $u="IndexBackfiller";class ZN{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){st($u,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();st($u,`Documents written: ${e}`)}catch(e){kr(e)?st($u,"Ignoring IndexedDB error during index backfill: ",e):await Pr(e)}await this.re(6e4)}))}}class WN{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const i=new Set;let a=e,l=!0;return B.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!i.has(c))return st($u,`Processing collection: ${c}`),this.oe(t,c,a).next((m=>{a-=m,i.add(c)}));l=!1})))).next((()=>e-a))}oe(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((a=>this.localStore.localDocuments.getNextDocuments(t,e,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(a,l))).next((m=>(st($u,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m)))).next((()=>c.size))}))))}_e(t,e){let i=t;return e.changes.forEach(((a,l)=>{const c=zb(l);ey(c,i)>0&&(i=c)})),new Bn(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Rn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=-1;function hd(r){return r==null}function oc(r){return r===0&&1/r==-1/0}function Fb(r){return typeof r=="number"&&Number.isInteger(r)&&!oc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="";function pn(r){let t="";for(let e=0;e<r.length;e++)t.length>0&&(t=l0(t)),t=tx(r.get(e),t);return l0(t)}function tx(r,t){let e=t;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":e+="";break;case zf:e+="";break;default:e+=l}}return e}function l0(r){return r+zf+""}function Zi(r){const t=r.length;if(bt(t>=2,64408,{path:r}),t===2)return bt(r.charAt(0)===zf&&r.charAt(1)==="",56145,{path:r}),ee.emptyPath();const e=t-2,i=[];let a="";for(let l=0;l<t;){const c=r.indexOf(zf,l);switch((c<0||c>e)&&yt(50515,{path:r}),r.charAt(c+1)){case"":const m=r.substring(l,c);let p;a.length===0?p=m:(a+=m,p=a,a=""),i.push(p);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:yt(61167,{path:r})}l=c+2}return new ee(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="remoteDocuments",wc="owner",Vo="owner",lc="mutationQueues",ex="userId",_i="mutations",u0="batchId",Aa="userMutationsIndex",c0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(r,t){return[r,pn(t)]}function Hb(r,t,e){return[r,pn(t),e]}const nx={},el="documentMutations",jf="remoteDocumentsV14",ix=["prefixPath","collectionGroup","readTime","documentId"],Sf="documentKeyIndex",sx=["prefixPath","collectionGroup","documentId"],Gb="collectionGroupIndex",rx=["collectionGroup","readTime","prefixPath","documentId"],uc="remoteDocumentGlobal",hg="remoteDocumentGlobalKey",nl="targets",Kb="queryTargetsIndex",ax=["canonicalId","targetId"],il="targetDocuments",ox=["targetId","path"],iy="documentTargetsIndex",lx=["path","targetId"],Bf="targetGlobalKey",Ra="targetGlobal",cc="collectionParents",ux=["collectionId","parent"],sl="clientMetadata",cx="clientId",fd="bundles",hx="bundleId",dd="namedQueries",fx="name",sy="indexConfiguration",dx="indexId",fg="collectionGroupIndex",mx="collectionGroup",Xu="indexState",px=["indexId","uid"],Qb="sequenceNumberIndex",gx=["uid","sequenceNumber"],Ju="indexEntries",yx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yb="documentKeyIndex",_x=["indexId","uid","orderedDocumentKey"],md="documentOverlays",vx=["userId","collectionPath","documentId"],dg="collectionPathOverlayIndex",Tx=["userId","collectionPath","largestBatchId"],$b="collectionGroupOverlayIndex",Ex=["userId","collectionGroup","largestBatchId"],ry="globals",Sx="name",Xb=[lc,_i,el,_a,nl,wc,Ra,il,sl,uc,cc,fd,dd],bx=[...Xb,md],Jb=[lc,_i,el,jf,nl,wc,Ra,il,sl,uc,cc,fd,dd,md],Zb=Jb,ay=[...Zb,sy,Xu,Ju],Ax=ay,Wb=[...ay,ry],Ix=Wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends Bb{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function $e(r,t){const e=Et(r);return Dr.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(r){let t=0;for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function Lr(r,t){for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function tA(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t,e){this.comparator=t,this.root=e||un.EMPTY}insert(t,e){return new de(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,un.BLACK,null,null))}remove(t){return new de(this.comparator,this.root.remove(t,this.comparator).copy(null,null,un.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new uf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new uf(this.root,t,this.comparator,!1)}getReverseIterator(){return new uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new uf(this.root,t,this.comparator,!0)}}class uf{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class un{constructor(t,e,i,a,l){this.key=t,this.value=e,this.color=i??un.RED,this.left=a??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,l){return new un(t??this.key,e??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,i),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return un.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw yt(27949);return t+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(t,e,i,a,l){return this}insert(t,e,i){return new un(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t){this.comparator=t,this.data=new de(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new f0(this.data.getIterator())}getIteratorFrom(t){return new f0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof oe)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new oe(this.comparator);return e.data=t,e}}class f0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.fields=t,t.sort(be.comparator)}static empty(){return new Cn([])}unionWith(t){let e=new oe(be.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Cn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Wo(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new eA("Invalid base64 string: "+l):l}})(t);return new Oe(e)}static fromUint8Array(t){const e=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(t);return new Oe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Oe.EMPTY_BYTE_STRING=new Oe("");const wx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(r){if(bt(!!r,39018),typeof r=="string"){let t=0;const e=wx.exec(r);if(bt(!!e,46558,{timestamp:r}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Te(r.seconds),nanos:Te(r.nanos)}}function Te(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ms(r){return typeof r=="string"?Oe.fromBase64String(r):Oe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="server_timestamp",iA="__type__",sA="__previous_value__",rA="__local_write_time__";function oy(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)==null?void 0:e.fields)||{})[iA])==null?void 0:i.stringValue)===nA}function pd(r){const t=r.mapValue.fields[sA];return oy(t)?pd(t):t}function hc(r){const t=Vs(r.mapValue.fields[rA].timestampValue);return new re(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(t,e,i,a,l,c,m,p,g,T,E){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=T,this.apiKey=E}}const qf="(default)";class Pa{constructor(t,e){this.projectId=t,this.database=e||qf}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===qf}isEqual(t){return t instanceof Pa&&t.projectId===this.projectId&&t.database===this.database}}function Cx(r,t){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ct(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(r.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="__type__",aA="__max__",br={mapValue:{fields:{__type__:{stringValue:aA}}}},uy="__vector__",rl="value",bf={nullValue:"NULL_VALUE"};function xr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?oy(r)?4:oA(r)?9007199254740991:gd(r)?10:11:yt(28295,{value:r})}function is(r,t){if(r===t)return!0;const e=xr(r);if(e!==xr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return hc(r).isEqual(hc(t));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Vs(a.timestampValue),m=Vs(l.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(a,l){return Ms(a.bytesValue).isEqual(Ms(l.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(a,l){return Te(a.geoPointValue.latitude)===Te(l.geoPointValue.latitude)&&Te(a.geoPointValue.longitude)===Te(l.geoPointValue.longitude)})(r,t);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Te(a.integerValue)===Te(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Te(a.doubleValue),m=Te(l.doubleValue);return c===m?oc(c)===oc(m):isNaN(c)&&isNaN(m)}return!1})(r,t);case 9:return Wo(r.arrayValue.values||[],t.arrayValue.values||[],is);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},m=l.mapValue.fields||{};if(h0(c)!==h0(m))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!is(c[p],m[p])))return!1;return!0})(r,t);default:return yt(52216,{left:r})}}function fc(r,t){return(r.values||[]).find((e=>is(e,t)))!==void 0}function Vr(r,t){if(r===t)return 0;const e=xr(r),i=xr(t);if(e!==i)return Nt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Nt(r.booleanValue,t.booleanValue);case 2:return(function(l,c){const m=Te(l.integerValue||l.doubleValue),p=Te(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,t);case 3:return d0(r.timestampValue,t.timestampValue);case 4:return d0(hc(r),hc(t));case 5:return ug(r.stringValue,t.stringValue);case 6:return(function(l,c){const m=Ms(l),p=Ms(c);return m.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(l,c){const m=l.split("/"),p=c.split("/");for(let g=0;g<m.length&&g<p.length;g++){const T=Nt(m[g],p[g]);if(T!==0)return T}return Nt(m.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(l,c){const m=Nt(Te(l.latitude),Te(c.latitude));return m!==0?m:Nt(Te(l.longitude),Te(c.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return m0(r.arrayValue,t.arrayValue);case 10:return(function(l,c){var S,R,V,C;const m=l.fields||{},p=c.fields||{},g=(S=m[rl])==null?void 0:S.arrayValue,T=(R=p[rl])==null?void 0:R.arrayValue,E=Nt(((V=g==null?void 0:g.values)==null?void 0:V.length)||0,((C=T==null?void 0:T.values)==null?void 0:C.length)||0);return E!==0?E:m0(g,T)})(r.mapValue,t.mapValue);case 11:return(function(l,c){if(l===br.mapValue&&c===br.mapValue)return 0;if(l===br.mapValue)return 1;if(c===br.mapValue)return-1;const m=l.fields||{},p=Object.keys(m),g=c.fields||{},T=Object.keys(g);p.sort(),T.sort();for(let E=0;E<p.length&&E<T.length;++E){const S=ug(p[E],T[E]);if(S!==0)return S;const R=Vr(m[p[E]],g[T[E]]);if(R!==0)return R}return Nt(p.length,T.length)})(r.mapValue,t.mapValue);default:throw yt(23264,{he:e})}}function d0(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Nt(r,t);const e=Vs(r),i=Vs(t),a=Nt(e.seconds,i.seconds);return a!==0?a:Nt(e.nanos,i.nanos)}function m0(r,t){const e=r.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const l=Vr(e[a],i[a]);if(l)return l}return Nt(e.length,i.length)}function al(r){return pg(r)}function pg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(e){const i=Vs(e);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(e){return Ms(e).toBase64()})(r.bytesValue):"referenceValue"in r?(function(e){return dt.fromName(e).toString()})(r.referenceValue):"geoPointValue"in r?(function(e){return`geo(${e.latitude},${e.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(e){let i="[",a=!0;for(const l of e.values||[])a?a=!1:i+=",",i+=pg(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(e){const i=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${pg(e.fields[c])}`;return a+"}"})(r.mapValue):yt(61005,{value:r})}function Af(r){switch(xr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=pd(r);return t?16+Af(t):16;case 5:return 2*r.stringValue.length;case 6:return Ms(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Af(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Lr(i.fields,((l,c)=>{a+=l.length+Af(c)})),a})(r.mapValue);default:throw yt(13486,{value:r})}}function dc(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function gg(r){return!!r&&"integerValue"in r}function mc(r){return!!r&&"arrayValue"in r}function p0(r){return!!r&&"nullValue"in r}function g0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function If(r){return!!r&&"mapValue"in r}function gd(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)==null?void 0:e.fields)||{})[ly])==null?void 0:i.stringValue)===uy}function Zu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Lr(r.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Zu(i))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(r.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Zu(r.arrayValue.values[e]);return t}return{...r}}function oA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===aA}const lA={mapValue:{fields:{[ly]:{stringValue:uy},[rl]:{arrayValue:{}}}}};function Dx(r){return"nullValue"in r?bf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?dc(Pa.empty(),dt.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?gd(r)?lA:{mapValue:{}}:yt(35942,{value:r})}function Nx(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?dc(Pa.empty(),dt.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?lA:"mapValue"in r?gd(r)?{mapValue:{}}:br:yt(61959,{value:r})}function y0(r,t){const e=Vr(r.value,t.value);return e!==0?e:r.inclusive&&!t.inclusive?-1:!r.inclusive&&t.inclusive?1:0}function _0(r,t){const e=Vr(r.value,t.value);return e!==0?e:r.inclusive&&!t.inclusive?1:!r.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.value=t}static empty(){return new mn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!If(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zu(e)}setAll(t){let e=be.emptyPath(),i={},a=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const p=this.getFieldsMap(e);this.applyChanges(p,i,a),i={},a=[],e=m.popLast()}c?i[m.lastSegment()]=Zu(c):a.push(m.lastSegment())}));const l=this.getFieldsMap(e);this.applyChanges(l,i,a)}delete(t){const e=this.field(t.popLast());If(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return is(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];If(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){Lr(e,((a,l)=>t[a]=l));for(const a of i)delete t[a]}clone(){return new mn(Zu(this.value))}}function uA(r){const t=[];return Lr(r.fields,((e,i)=>{const a=new be([e]);if(If(i)){const l=uA(i.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)})),new Cn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t,e,i,a,l,c,m){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(t){return new we(t,0,It.min(),It.min(),It.min(),mn.empty(),0)}static newFoundDocument(t,e,i,a){return new we(t,1,e,It.min(),i,a,0)}static newNoDocument(t,e){return new we(t,2,e,It.min(),It.min(),mn.empty(),0)}static newUnknownDocument(t,e){return new we(t,3,e,It.min(),It.min(),mn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof we&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new we(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t,e){this.position=t,this.inclusive=e}}function v0(r,t,e){let i=0;for(let a=0;a<r.position.length;a++){const l=t[a],c=r.position[a];if(l.field.isKeyField()?i=dt.comparator(dt.fromName(c.referenceValue),e.key):i=Vr(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function T0(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let e=0;e<r.position.length;e++)if(!is(r.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,e="asc"){this.field=t,this.dir=e}}function xx(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{}class Gt extends cA{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Vx(t,e,i):e==="array-contains"?new Px(t,i):e==="in"?new gA(t,i):e==="not-in"?new kx(t,i):e==="array-contains-any"?new Lx(t,i):new Gt(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Mx(t,i):new Ox(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Vr(e,this.value)):e!==null&&xr(this.value)===xr(e)&&this.matchesComparison(Vr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ae extends cA{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ae(t,e)}matches(t){return ll(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ll(r){return r.op==="and"}function yg(r){return r.op==="or"}function cy(r){return hA(r)&&ll(r)}function hA(r){for(const t of r.filters)if(t instanceof ae)return!1;return!0}function _g(r){if(r instanceof Gt)return r.field.canonicalString()+r.op.toString()+al(r.value);if(cy(r))return r.filters.map((t=>_g(t))).join(",");{const t=r.filters.map((e=>_g(e))).join(",");return`${r.op}(${t})`}}function fA(r,t){return r instanceof Gt?(function(i,a){return a instanceof Gt&&i.op===a.op&&i.field.isEqual(a.field)&&is(i.value,a.value)})(r,t):r instanceof ae?(function(i,a){return a instanceof ae&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,m)=>l&&fA(c,a.filters[m])),!0):!1})(r,t):void yt(19439)}function dA(r,t){const e=r.filters.concat(t);return ae.create(e,r.op)}function mA(r){return r instanceof Gt?(function(e){return`${e.field.canonicalString()} ${e.op} ${al(e.value)}`})(r):r instanceof ae?(function(e){return e.op.toString()+" {"+e.getFilters().map(mA).join(" ,")+"}"})(r):"Filter"}class Vx extends Gt{constructor(t,e,i){super(t,e,i),this.key=dt.fromName(i.referenceValue)}matches(t){const e=dt.comparator(t.key,this.key);return this.matchesComparison(e)}}class Mx extends Gt{constructor(t,e){super(t,"in",e),this.keys=pA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Ox extends Gt{constructor(t,e){super(t,"not-in",e),this.keys=pA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function pA(r,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((i=>dt.fromName(i.referenceValue)))}class Px extends Gt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return mc(e)&&fc(e.arrayValue,this.value)}}class gA extends Gt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&fc(this.value.arrayValue,e)}}class kx extends Gt{constructor(t,e){super(t,"not-in",e)}matches(t){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!fc(this.value.arrayValue,e)}}class Lx extends Gt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!mc(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>fc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,e=null,i=[],a=[],l=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=m,this.Te=null}}function vg(r,t=null,e=[],i=[],a=null,l=null,c=null){return new Ux(r,t,e,i,a,l,c)}function ka(r){const t=Et(r);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>_g(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),hd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>al(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>al(i))).join(",")),t.Te=e}return t.Te}function Rc(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<r.orderBy.length;e++)if(!xx(r.orderBy[e],t.orderBy[e]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let e=0;e<r.filters.length;e++)if(!fA(r.filters[e],t.filters[e]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!T0(r.startAt,t.startAt)&&T0(r.endAt,t.endAt)}function Ff(r){return dt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Hf(r,t){return r.filters.filter((e=>e instanceof Gt&&e.field.isEqual(t)))}function E0(r,t,e){let i=bf,a=!0;for(const l of Hf(r,t)){let c=bf,m=!0;switch(l.op){case"<":case"<=":c=Dx(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,m=!1;break;case"!=":case"not-in":c=bf}y0({value:i,inclusive:a},{value:c,inclusive:m})<0&&(i=c,a=m)}if(e!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(t)){const c=e.position[l];y0({value:i,inclusive:a},{value:c,inclusive:e.inclusive})<0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}function S0(r,t,e){let i=br,a=!0;for(const l of Hf(r,t)){let c=br,m=!0;switch(l.op){case">=":case">":c=Nx(l.value),m=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,m=!1;break;case"!=":case"not-in":c=br}_0({value:i,inclusive:a},{value:c,inclusive:m})>0&&(i=c,a=m)}if(e!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(t)){const c=e.position[l];_0({value:i,inclusive:a},{value:c,inclusive:e.inclusive})>0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t,e=null,i=[],a=[],l=null,c="F",m=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function yA(r,t,e,i,a,l,c,m){return new bl(r,t,e,i,a,l,c,m)}function yd(r){return new bl(r)}function b0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function zx(r){return dt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function _A(r){return r.collectionGroup!==null}function Wu(r){const t=Et(r);if(t.Ie===null){t.Ie=[];const e=new Set;for(const l of t.explicitOrderBy)t.Ie.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new oe(be.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(t).forEach((l=>{e.has(l.canonicalString())||l.isKeyField()||t.Ie.push(new pc(l,i))})),e.has(be.keyField().canonicalString())||t.Ie.push(new pc(be.keyField(),i))}return t.Ie}function jn(r){const t=Et(r);return t.Ee||(t.Ee=jx(t,Wu(r))),t.Ee}function jx(r,t){if(r.limitType==="F")return vg(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new pc(a.field,l)}));const e=r.endAt?new ol(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ol(r.startAt.position,r.startAt.inclusive):null;return vg(r.path,r.collectionGroup,t,r.filters,r.limit,e,i)}}function Tg(r,t){const e=r.filters.concat([t]);return new bl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),e,r.limit,r.limitType,r.startAt,r.endAt)}function Bx(r,t){const e=r.explicitOrderBy.concat([t]);return new bl(r.path,r.collectionGroup,e,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Eg(r,t,e){return new bl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,e,r.startAt,r.endAt)}function _d(r,t){return Rc(jn(r),jn(t))&&r.limitType===t.limitType}function vA(r){return`${ka(jn(r))}|lt:${r.limitType}`}function jo(r){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((a=>mA(a))).join(", ")}]`),hd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>al(a))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>al(a))).join(",")),`Target(${i})`})(jn(r))}; limitType=${r.limitType})`}function Cc(r,t){return t.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):dt.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,t)&&(function(i,a){for(const l of Wu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,t)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,t)&&(function(i,a){return!(i.startAt&&!(function(c,m,p){const g=v0(c,m,p);return c.inclusive?g<=0:g<0})(i.startAt,Wu(i),a)||i.endAt&&!(function(c,m,p){const g=v0(c,m,p);return c.inclusive?g>=0:g>0})(i.endAt,Wu(i),a))})(r,t)}function TA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function EA(r){return(t,e)=>{let i=!1;for(const a of Wu(r)){const l=qx(a,t,e);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function qx(r,t,e){const i=r.field.isKeyField()?dt.comparator(t.key,e.key):(function(l,c,m){const p=c.data.field(l),g=m.data.field(l);return p!==null&&g!==null?Vr(p,g):yt(42886)})(r.field,t,e);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return yt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Lr(this.inner,((e,i)=>{for(const[a,l]of i)t(a,l)}))}isEmpty(){return tA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new de(dt.comparator);function zn(){return Fx}const SA=new de(dt.comparator);function Bu(...r){let t=SA;for(const e of r)t=t.insert(e.key,e);return t}function bA(r){let t=SA;return r.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Wi(){return tc()}function AA(){return tc()}function tc(){return new Ps((r=>r.toString()),((r,t)=>r.isEqual(t)))}const Hx=new de(dt.comparator),Gx=new oe(dt.comparator);function Ut(...r){let t=Gx;for(const e of r)t=t.add(e);return t}const Kx=new oe(Nt);function hy(){return Kx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oc(t)?"-0":t}}function IA(r){return{integerValue:""+r}}function Qx(r,t){return Fb(t)?IA(t):fy(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this._=void 0}}function Yx(r,t,e){return r instanceof gc?(function(a,l){const c={fields:{[iA]:{stringValue:nA},[rA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&oy(l)&&(l=pd(l)),l&&(c.fields[sA]=l),{mapValue:c}})(e,t):r instanceof ul?RA(r,t):r instanceof cl?CA(r,t):(function(a,l){const c=wA(a,l),m=A0(c)+A0(a.Ae);return gg(c)&&gg(a.Ae)?IA(m):fy(a.serializer,m)})(r,t)}function $x(r,t,e){return r instanceof ul?RA(r,t):r instanceof cl?CA(r,t):e}function wA(r,t){return r instanceof yc?(function(i){return gg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(t)?t:{integerValue:0}:null}class gc extends vd{}class ul extends vd{constructor(t){super(),this.elements=t}}function RA(r,t){const e=DA(t);for(const i of r.elements)e.some((a=>is(a,i)))||e.push(i);return{arrayValue:{values:e}}}class cl extends vd{constructor(t){super(),this.elements=t}}function CA(r,t){let e=DA(t);for(const i of r.elements)e=e.filter((a=>!is(a,i)));return{arrayValue:{values:e}}}class yc extends vd{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function A0(r){return Te(r.integerValue||r.doubleValue)}function DA(r){return mc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(t,e){this.field=t,this.transform=e}}function Jx(r,t){return r.field.isEqual(t.field)&&(function(i,a){return i instanceof ul&&a instanceof ul||i instanceof cl&&a instanceof cl?Wo(i.elements,a.elements,is):i instanceof yc&&a instanceof yc?is(i.Ae,a.Ae):i instanceof gc&&a instanceof gc})(r.transform,t.transform)}class Zx{constructor(t,e){this.version=t,this.transformResults=e}}class tn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new tn}static exists(t){return new tn(void 0,t)}static updateTime(t){return new tn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wf(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Td{}function NA(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Dc(r.key,tn.none()):new Al(r.key,r.data,tn.none());{const e=r.data,i=mn.empty();let a=new oe(be.comparator);for(let l of t.fields)if(!a.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new ks(r.key,i,new Cn(a.toArray()),tn.none())}}function Wx(r,t,e){r instanceof Al?(function(a,l,c){const m=a.value.clone(),p=w0(a.fieldTransforms,l,c.transformResults);m.setAll(p),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,t,e):r instanceof ks?(function(a,l,c){if(!wf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const m=w0(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(xA(a)),p.setAll(m),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,t,e):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function ec(r,t,e,i){return r instanceof Al?(function(l,c,m,p){if(!wf(l.precondition,c))return m;const g=l.value.clone(),T=R0(l.fieldTransforms,p,c);return g.setAll(T),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(r,t,e,i):r instanceof ks?(function(l,c,m,p){if(!wf(l.precondition,c))return m;const g=R0(l.fieldTransforms,p,c),T=c.data;return T.setAll(xA(l)),T.setAll(g),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,t,e,i):(function(l,c,m){return wf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(r,t,e)}function t2(r,t){let e=null;for(const i of r.fieldTransforms){const a=t.data.field(i.field),l=wA(i.transform,a||null);l!=null&&(e===null&&(e=mn.empty()),e.set(i.field,l))}return e||null}function I0(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Wo(i,a,((l,c)=>Jx(l,c)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Al extends Td{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ks extends Td{constructor(t,e,i,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function xA(r){const t=new Map;return r.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=r.data.field(e);t.set(e,i)}})),t}function w0(r,t,e){const i=new Map;bt(r.length===e.length,32656,{Ve:e.length,de:r.length});for(let a=0;a<e.length;a++){const l=r[a],c=l.transform,m=t.data.field(l.field);i.set(l.field,$x(c,m,e[a]))}return i}function R0(r,t,e){const i=new Map;for(const a of r){const l=a.transform,c=e.data.field(a.field);i.set(a.field,Yx(l,c,t))}return i}class Dc extends Td{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VA extends Td{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&Wx(l,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=ec(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=ec(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=AA();return this.mutations.forEach((a=>{const l=t.get(a.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=e.has(a.key)?null:m;const p=NA(c,m);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(It.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ut())}isEqual(t){return this.batchId===t.batchId&&Wo(this.mutations,t.mutations,((e,i)=>I0(e,i)))&&Wo(this.baseMutations,t.baseMutations,((e,i)=>I0(e,i)))}}class my{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){bt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let a=(function(){return Hx})();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new my(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,$t;function n2(r){switch(r){case Z.OK:return yt(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return yt(15467,{code:r})}}function MA(r){if(r===void 0)return Ve("GRPC error has no .code"),Z.UNKNOWN;switch(r){case Fe.OK:return Z.OK;case Fe.CANCELLED:return Z.CANCELLED;case Fe.UNKNOWN:return Z.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return Z.INTERNAL;case Fe.UNAVAILABLE:return Z.UNAVAILABLE;case Fe.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Fe.NOT_FOUND:return Z.NOT_FOUND;case Fe.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Fe.ABORTED:return Z.ABORTED;case Fe.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Fe.DATA_LOSS:return Z.DATA_LOSS;default:return yt(39323,{code:r})}}($t=Fe||(Fe={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=new Rr([4294967295,4294967295],0);function C0(r){const t=i2().encode(r),e=new Cb;return e.update(t),new Uint8Array(e.digest())}function D0(r){const t=new DataView(r.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Rr([e,i],0),new Rr([a,l],0)]}class gy{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new qu(`Invalid padding: ${e}`);if(i<0)throw new qu(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new qu(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new qu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Rr.fromNumber(this.ge)}ye(t,e,i){let a=t.add(e.multiply(Rr.fromNumber(i)));return a.compare(s2)===1&&(a=new Rr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=C0(t),[i,a]=D0(e);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new gy(l,a,e);return i.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=C0(t),[i,a]=D0(e);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,e,i,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,xc.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Nc(It.min(),a,new de(Nt),zn(),Ut())}}class xc{constructor(t,e,i,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new xc(i,e,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(t,e,i,a){this.Se=t,this.removedTargetIds=e,this.key=i,this.De=a}}class OA{constructor(t,e){this.targetId=t,this.Ce=e}}class PA{constructor(t,e,i=Oe.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class N0{constructor(){this.ve=0,this.Fe=x0(),this.Me=Oe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ut(),e=Ut(),i=Ut();return this.Fe.forEach(((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:yt(38017,{changeType:l})}})),new xc(this.Me,this.xe,t,e,i)}Ke(){this.Oe=!1,this.Fe=x0()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class r2{constructor(t){this.Ge=t,this.ze=new Map,this.je=zn(),this.He=cf(),this.Je=cf(),this.Ze=new de(Nt)}Xe(t){for(const e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(t.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.Qe(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:yt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,a)=>{this.rt(a)&&e(a)}))}st(t){const e=t.targetId,i=t.Ce.count,a=this.ot(e);if(a){const l=a.target;if(Ff(l))if(i===0){const c=new dt(l.path);this.et(e,c,we.newNoDocument(c,It.min()))}else bt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const m=this.ut(t),p=m?this.ct(m,t,c):1;if(p!==0){this.it(e);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=e;let c,m;try{c=Ms(i).toUint8Array()}catch(p){if(p instanceof eA)return Zo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new gy(c,a,l)}catch(p){return Zo(p instanceof qu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(m)||(this.et(e,l,null),a++)})),a}Tt(t){const e=new Map;this.ze.forEach(((l,c)=>{const m=this.ot(c);if(m){if(l.current&&Ff(m.target)){const p=new dt(m.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,we.newNoDocument(p,t))}l.Be&&(e.set(c,l.ke()),l.Ke())}}));let i=Ut();this.Je.forEach(((l,c)=>{let m=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(t)));const a=new Nc(t,e,this.Ze,this.je,i);return this.je=zn(),this.He=cf(),this.Je=cf(),this.Ze=new de(Nt),a}Ye(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,i),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.qe(e,1):a.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new N0,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new oe(Nt),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new oe(Nt),this.He=this.He.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||st("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new N0),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function cf(){return new de(dt.comparator)}function x0(){return new de(dt.comparator)}const a2={asc:"ASCENDING",desc:"DESCENDING"},o2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l2={and:"AND",or:"OR"};class u2{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Sg(r,t){return r.useProto3Json||hd(t)?t:{value:t}}function hl(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kA(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function c2(r,t){return hl(r,t.toTimestamp())}function vn(r){return bt(!!r,49232),It.fromTimestamp((function(e){const i=Vs(e);return new re(i.seconds,i.nanos)})(r))}function yy(r,t){return bg(r,t).canonicalString()}function bg(r,t){const e=(function(a){return new ee(["projects",a.projectId,"databases",a.database])})(r).child("documents");return t===void 0?e:e.child(t)}function LA(r){const t=ee.fromString(r);return bt(KA(t),10190,{key:t.toString()}),t}function Gf(r,t){return yy(r.databaseId,t.path)}function Ca(r,t){const e=LA(t);if(e.get(1)!==r.databaseId.projectId)throw new ct(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+r.databaseId.projectId);if(e.get(3)!==r.databaseId.database)throw new ct(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+r.databaseId.database);return new dt(jA(e))}function UA(r,t){return yy(r.databaseId,t)}function zA(r){const t=LA(r);return t.length===4?ee.emptyPath():jA(t)}function Ag(r){return new ee(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jA(r){return bt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function V0(r,t,e){return{name:Gf(r,t),fields:e.value.mapValue.fields}}function h2(r,t,e){const i=Ca(r,t.name),a=vn(t.updateTime),l=t.createTime?vn(t.createTime):It.min(),c=new mn({mapValue:{fields:t.fields}}),m=we.newFoundDocument(i,a,l,c);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function f2(r,t){let e;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:yt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=(function(g,T){return g.useProto3Json?(bt(T===void 0||typeof T=="string",58123),Oe.fromBase64String(T||"")):(bt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Oe.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(g){const T=g.code===void 0?Z.UNKNOWN:MA(g.code);return new ct(T,g.message||"")})(c);e=new PA(i,a,l,m||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=Ca(r,i.document.name),l=vn(i.document.updateTime),c=i.document.createTime?vn(i.document.createTime):It.min(),m=new mn({mapValue:{fields:i.document.fields}}),p=we.newFoundDocument(a,l,c,m),g=i.targetIds||[],T=i.removedTargetIds||[];e=new Rf(g,T,p.key,p)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=Ca(r,i.document),l=i.readTime?vn(i.readTime):It.min(),c=we.newNoDocument(a,l),m=i.removedTargetIds||[];e=new Rf([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=Ca(r,i.document),l=i.removedTargetIds||[];e=new Rf([],l,a,null)}else{if(!("filter"in t))return yt(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new e2(a,l),m=i.targetId;e=new OA(m,c)}}return e}function Kf(r,t){let e;if(t instanceof Al)e={update:V0(r,t.key,t.value)};else if(t instanceof Dc)e={delete:Gf(r,t.key)};else if(t instanceof ks)e={update:V0(r,t.key,t.data),updateMask:_2(t.fieldMask)};else{if(!(t instanceof VA))return yt(16599,{dt:t.type});e={verify:Gf(r,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(l,c){const m=c.transform;if(m instanceof gc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ul)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof cl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof yc)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw yt(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:c2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:yt(27497)})(r,t.precondition)),e}function Ig(r,t){const e=t.currentDocument?(function(l){return l.updateTime!==void 0?tn.updateTime(vn(l.updateTime)):l.exists!==void 0?tn.exists(l.exists):tn.none()})(t.currentDocument):tn.none(),i=t.updateTransforms?t.updateTransforms.map((a=>(function(c,m){let p=null;if("setToServerValue"in m)bt(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),p=new gc;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];p=new ul(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];p=new cl(T)}else"increment"in m?p=new yc(c,m.increment):yt(16584,{proto:m});const g=be.fromServerFormat(m.fieldPath);return new Xx(g,p)})(r,a))):[];if(t.update){t.update.name;const a=Ca(r,t.update.name),l=new mn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new Cn(g.map((T=>be.fromServerFormat(T))))})(t.updateMask);return new ks(a,l,c,e,i)}return new Al(a,l,e,i)}if(t.delete){const a=Ca(r,t.delete);return new Dc(a,e)}if(t.verify){const a=Ca(r,t.verify);return new VA(a,e)}return yt(1463,{proto:t})}function d2(r,t){return r&&r.length>0?(bt(t!==void 0,14353),r.map((e=>(function(a,l){let c=a.updateTime?vn(a.updateTime):vn(l);return c.isEqual(It.min())&&(c=vn(l)),new Zx(c,a.transformResults||[])})(e,t)))):[]}function BA(r,t){return{documents:[UA(r,t.path)]}}function qA(r,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=UA(r,a);const l=(function(g){if(g.length!==0)return GA(ae.create(g,"and"))})(t.filters);l&&(e.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((T=>(function(S){return{field:Bo(S.field),direction:p2(S.dir)}})(T)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=Sg(r,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:a}}function FA(r){let t=zA(r.parent);const e=r.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){bt(i===1,65062);const T=e.from[0];T.allDescendants?a=T.collectionId:t=t.child(T.collectionId)}let l=[];e.where&&(l=(function(E){const S=HA(E);return S instanceof ae&&cy(S)?S.getFilters():[S]})(e.where));let c=[];e.orderBy&&(c=(function(E){return E.map((S=>(function(V){return new pc(qo(V.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(e.orderBy));let m=null;e.limit&&(m=(function(E){let S;return S=typeof E=="object"?E.value:E,hd(S)?null:S})(e.limit));let p=null;e.startAt&&(p=(function(E){const S=!!E.before,R=E.values||[];return new ol(R,S)})(e.startAt));let g=null;return e.endAt&&(g=(function(E){const S=!E.before,R=E.values||[];return new ol(R,S)})(e.endAt)),yA(t,a,c,l,m,"F",p,g)}function m2(r,t){const e=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:a})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function HA(r){return r.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=qo(e.unaryFilter.field);return Gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=qo(e.unaryFilter.field);return Gt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(e.unaryFilter.field);return Gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qo(e.unaryFilter.field);return Gt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}})(r):r.fieldFilter!==void 0?(function(e){return Gt.create(qo(e.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(e){return ae.create(e.compositeFilter.filters.map((i=>HA(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return yt(1026)}})(e.compositeFilter.op))})(r):yt(30097,{filter:r})}function p2(r){return a2[r]}function g2(r){return o2[r]}function y2(r){return l2[r]}function Bo(r){return{fieldPath:r.canonicalString()}}function qo(r){return be.fromServerFormat(r.fieldPath)}function GA(r){return r instanceof Gt?(function(e){if(e.op==="=="){if(g0(e.value))return{unaryFilter:{field:Bo(e.field),op:"IS_NAN"}};if(p0(e.value))return{unaryFilter:{field:Bo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(g0(e.value))return{unaryFilter:{field:Bo(e.field),op:"IS_NOT_NAN"}};if(p0(e.value))return{unaryFilter:{field:Bo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(e.field),op:g2(e.op),value:e.value}}})(r):r instanceof ae?(function(e){const i=e.getFilters().map((a=>GA(a)));return i.length===1?i[0]:{compositeFilter:{op:y2(e.op),filters:i}}})(r):yt(54877,{filter:r})}function _2(r){const t=[];return r.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function KA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function QA(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,e,i,a,l=It.min(),c=It.min(),m=Oe.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(t){return new Cs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t){this.yt=t}}function v2(r,t){let e;if(t.document)e=h2(r.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=dt.fromSegments(t.noDocument.path),a=Ua(t.noDocument.readTime);e=we.newNoDocument(i,a),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return yt(56709);{const i=dt.fromSegments(t.unknownDocument.path),a=Ua(t.unknownDocument.version);e=we.newUnknownDocument(i,a)}}return t.readTime&&e.setReadTime((function(a){const l=new re(a[0],a[1]);return It.fromTimestamp(l)})(t.readTime)),e}function M0(r,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Qf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=(function(l,c){return{name:Gf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:hl(l,c.version.toTimestamp()),createTime:hl(l,c.createTime.toTimestamp())}})(r.yt,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:La(t.version)};else{if(!t.isUnknownDocument())return yt(57904,{document:t});i.unknownDocument={path:e.path.toArray(),version:La(t.version)}}return i}function Qf(r){const t=r.toTimestamp();return[t.seconds,t.nanoseconds]}function La(r){const t=r.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ua(r){const t=new re(r.seconds,r.nanoseconds);return It.fromTimestamp(t)}function Ta(r,t){const e=(t.baseMutations||[]).map((l=>Ig(r.yt,l)));for(let l=0;l<t.mutations.length-1;++l){const c=t.mutations[l];if(l+1<t.mutations.length&&t.mutations[l+1].transform!==void 0){const m=t.mutations[l+1];c.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(l+1,1),++l}}const i=t.mutations.map((l=>Ig(r.yt,l))),a=re.fromMillis(t.localWriteTimeMs);return new dy(t.batchId,a,e,i)}function Fu(r){const t=Ua(r.readTime),e=r.lastLimboFreeSnapshotVersion!==void 0?Ua(r.lastLimboFreeSnapshotVersion):It.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return bt(c===1,1966,{count:c}),jn(yd(zA(l.documents[0])))})(r.query):(function(l){return jn(FA(l))})(r.query),new Cs(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,t,e,Oe.fromBase64String(r.resumeToken))}function $A(r,t){const e=La(t.snapshotVersion),i=La(t.lastLimboFreeSnapshotVersion);let a;a=Ff(t.target)?BA(r.yt,t.target):qA(r.yt,t.target).ft;const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ka(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function XA(r){const t=FA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Eg(t,t.limit,"L"):t}function qp(r,t){return new py(t.largestBatchId,Ig(r.yt,t.overlayMutation))}function O0(r,t){const e=t.path.lastSegment();return[r,pn(t.path.popLast()),e]}function P0(r,t,e,i){return{indexId:r,uid:t,sequenceNumber:e,readTime:La(i.readTime),documentKey:pn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{getBundleMetadata(t,e){return k0(t).get(e).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Ua(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(t,e){return k0(t).put((function(a){return{bundleId:a.id,createTime:La(vn(a.createTime)),version:a.version}})(e))}getNamedQuery(t,e){return L0(t).get(e).next((i=>{if(i)return(function(l){return{name:l.name,query:XA(l.bundledQuery),readTime:Ua(l.readTime)}})(i)}))}saveNamedQuery(t,e){return L0(t).put((function(a){return{name:a.name,readTime:La(vn(a.readTime)),bundledQuery:a.bundledQuery}})(e))}}function k0(r){return $e(r,fd)}function L0(r){return $e(r,dd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const i=e.uid||"";return new Ed(t,i)}getOverlay(t,e){return Nu(t).get(O0(this.userId,e)).next((i=>i?qp(this.serializer,i):null))}getOverlays(t,e){const i=Wi();return B.forEach(e,(a=>this.getOverlay(t,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(t,e,i){const a=[];return i.forEach(((l,c)=>{const m=new py(e,c);a.push(this.bt(t,m))})),B.waitFor(a)}removeOverlaysForBatchId(t,e,i){const a=new Set;e.forEach((c=>a.add(pn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Nu(t).X(dg,m))})),B.waitFor(l)}getOverlaysForCollection(t,e,i){const a=Wi(),l=pn(e),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Nu(t).H(dg,c).next((m=>{for(const p of m){const g=qp(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(t,e,i,a){const l=Wi();let c;const m=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Nu(t).ee({index:$b,range:m},((p,g,T)=>{const E=qp(this.serializer,g);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):T.done()})).next((()=>l))}bt(t,e){return Nu(t).put((function(a,l,c){const[m,p,g]=O0(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kf(a.yt,c.mutation)}})(this.serializer,this.userId,e))}}function Nu(r){return $e(r,md)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{St(t){return $e(t,ry)}getSessionToken(t){return this.St(t).get("sessionToken").next((e=>{const i=e==null?void 0:e.value;return i?Oe.fromUint8Array(i):Oe.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.St(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Te(t.integerValue));else if("doubleValue"in t){const i=Te(t.doubleValue);isNaN(i)?this.Ft(e,13):(this.Ft(e,15),oc(i)?e.Mt(0):e.Mt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ft(e,20),typeof i=="string"&&(i=Vs(i)),e.xt(`${i.seconds||""}`),e.Mt(i.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Ms(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Ft(e,45),e.Mt(i.latitude||0),e.Mt(i.longitude||0)}else"mapValue"in t?oA(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):gd(t)?this.kt(t.mapValue,e):(this.Kt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.qt(t.arrayValue,e),this.Nt(e)):yt(19022,{Ut:t})}Ot(t,e){this.Ft(e,25),this.$t(t,e)}$t(t,e){e.xt(t)}Kt(t,e){const i=t.fields||{};this.Ft(e,55);for(const a of Object.keys(i))this.Ot(a,e),this.Ct(i[a],e)}kt(t,e){var c,m;const i=t.fields||{};this.Ft(e,53);const a=rl,l=((m=(c=i[a].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(e,15),e.Mt(Te(l)),this.Ot(a,e),this.Ct(i[a],e)}qt(t,e){const i=t.values||[];this.Ft(e,50);for(const a of i)this.Ct(a,e)}Lt(t,e){this.Ft(e,37),dt.fromName(t).path.forEach((i=>{this.Ft(e,60),this.$t(i,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Ea.Wt=new Ea;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=255;function S2(r){if(r===0)return 8;let t=0;return r>>4||(t+=4,r<<=4),r>>6||(t+=2,r<<=2),r>>7||(t+=1),t}function U0(r){const t=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=S2(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(t/8)}class b2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Gt(i.value),i=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ht(i.value),i=e.next();this.Jt()}Zt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=e.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const a=e.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(t){const e=this.en(t),i=U0(e);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=255&e[a]}nn(t){const e=this.en(t),i=U0(e);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=~(255&e[a])}rn(){this.sn(Oo),this.sn(255)}_n(){this.an(Oo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(t),i=!!(128&e[0]);e[0]^=i?255:128;for(let a=1;a<e.length;++a)e[a]^=i?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Oo?(this.sn(Oo),this.sn(0)):this.sn(e)}Ht(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Oo?(this.an(Oo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class A2{constructor(t){this.cn=t}Bt(t){this.cn.Qt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.Yt(t)}vt(){this.cn.rn()}}class I2{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Xt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class xu{constructor(){this.cn=new b2,this.ascending=new A2(this.cn),this.descending=new I2(this.cn)}seed(t){this.cn.seed(t)}ln(t){return t===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t,e,i,a){this.hn=t,this.Pn=e,this.Tn=i,this.In=a}En(){const t=this.In.length,e=t===0||this.In[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.In,0),e!==t?i.set([0],this.In.length):++i[i.length-1],new Sa(this.hn,this.Pn,this.Tn,i)}Rn(t,e,i){return{indexId:this.hn,uid:t,arrayValue:Cf(this.Tn),directionalValue:Cf(this.In),orderedDocumentKey:Cf(e),documentKey:i.path.toArray()}}An(t,e,i){const a=this.Rn(t,e,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function pr(r,t){let e=r.hn-t.hn;return e!==0?e:(e=z0(r.Tn,t.Tn),e!==0?e:(e=z0(r.In,t.In),e!==0?e:dt.comparator(r.Pn,t.Pn)))}function z0(r,t){for(let e=0;e<r.length&&e<t.length;++e){const i=r[e]-t[e];if(i!==0)return i}return r.length-t.length}function Cf(r){return GS()?(function(e){let i="";for(let a=0;a<e.length;a++)i+=String.fromCharCode(e[a]);return i})(r):r}function j0(r){return typeof r!="string"?r:(function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i})(r)}class B0{constructor(t){this.Vn=new oe(((e,i)=>be.comparator(e.field,i.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.dn=t.orderBy,this.mn=[];for(const e of t.filters){const i=e;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(t){if(bt(t.collectionGroup===this.collectionId,49279),this.fn)return!1;const e=cg(t);if(e!==void 0&&!this.pn(e))return!1;const i=ya(t);let a=new Set,l=0,c=0;for(;l<i.length&&this.pn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const m=this.Vn.getIterator().getNext();if(!a.has(m.field.canonicalString())){const p=i[l];if(!this.yn(m,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<i.length;++l){const m=i[l];if(c>=this.dn.length||!this.wn(this.dn[c++],m))return!1}return!0}bn(){if(this.fn)return null;let t=new oe(be.comparator);const e=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new Tf(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new Tf(i.field,0))}for(const i of this.dn)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new Tf(i.field,i.dir==="asc"?0:1)));return new Uf(Uf.UNKNOWN_ID,this.collectionId,e,ac.empty())}pn(t){for(const e of this.mn)if(this.yn(e,t))return!0;return!1}yn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}wn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(r){var e,i;if(bt(r instanceof Gt||r instanceof ae,20012),r instanceof Gt){if(r instanceof gA){const a=((i=(e=r.value.arrayValue)==null?void 0:e.values)==null?void 0:i.map((l=>Gt.create(r.field,"==",l))))||[];return ae.create(a,"or")}return r}const t=r.filters.map((a=>JA(a)));return ae.create(t,r.op)}function w2(r){if(r.getFilters().length===0)return[];const t=Cg(JA(r));return bt(ZA(t),7391),wg(t)||Rg(t)?[t]:t.getFilters()}function wg(r){return r instanceof Gt}function Rg(r){return r instanceof ae&&cy(r)}function ZA(r){return wg(r)||Rg(r)||(function(e){if(e instanceof ae&&yg(e)){for(const i of e.getFilters())if(!wg(i)&&!Rg(i))return!1;return!0}return!1})(r)}function Cg(r){if(bt(r instanceof Gt||r instanceof ae,34018),r instanceof Gt)return r;if(r.filters.length===1)return Cg(r.filters[0]);const t=r.filters.map((i=>Cg(i)));let e=ae.create(t,r.op);return e=Yf(e),ZA(e)?e:(bt(e instanceof ae,64498),bt(ll(e),40251),bt(e.filters.length>1,57927),e.filters.reduce(((i,a)=>_y(i,a))))}function _y(r,t){let e;return bt(r instanceof Gt||r instanceof ae,38388),bt(t instanceof Gt||t instanceof ae,25473),e=r instanceof Gt?t instanceof Gt?(function(a,l){return ae.create([a,l],"and")})(r,t):q0(r,t):t instanceof Gt?q0(t,r):(function(a,l){if(bt(a.filters.length>0&&l.filters.length>0,48005),ll(a)&&ll(l))return dA(a,l.getFilters());const c=yg(a)?a:l,m=yg(a)?l:a,p=c.filters.map((g=>_y(g,m)));return ae.create(p,"or")})(r,t),Yf(e)}function q0(r,t){if(ll(t))return dA(t,r.getFilters());{const e=t.filters.map((i=>_y(r,i)));return ae.create(e,"or")}}function Yf(r){if(bt(r instanceof Gt||r instanceof ae,11850),r instanceof Gt)return r;const t=r.getFilters();if(t.length===1)return Yf(t[0]);if(hA(r))return r;const e=t.map((a=>Yf(a))),i=[];return e.forEach((a=>{a instanceof Gt?i.push(a):a instanceof ae&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:ae.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.Sn=new vy}addToCollectionParentIndex(t,e){return this.Sn.add(e),B.resolve()}getCollectionParents(t,e){return B.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return B.resolve()}deleteFieldIndex(t,e){return B.resolve()}deleteAllFieldIndexes(t){return B.resolve()}createTargetIndexes(t,e){return B.resolve()}getDocumentsMatchingTarget(t,e){return B.resolve(null)}getIndexType(t,e){return B.resolve(0)}getFieldIndexes(t,e){return B.resolve([])}getNextCollectionGroupToUpdate(t){return B.resolve(null)}getMinOffset(t,e){return B.resolve(Bn.min())}getMinOffsetFromCollectionGroup(t,e){return B.resolve(Bn.min())}updateCollectionGroup(t,e,i){return B.resolve()}updateIndexEntries(t,e){return B.resolve()}}class vy{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new oe(ee.comparator),l=!a.has(i);return this.index[e]=a.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new oe(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="IndexedDbIndexManager",hf=new Uint8Array(0);class C2{constructor(t,e){this.databaseId=e,this.Dn=new vy,this.Cn=new Ps((i=>ka(i)),((i,a)=>Rc(i,a))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Dn.has(e)){const i=e.lastSegment(),a=e.popLast();t.addOnCommittedListener((()=>{this.Dn.add(e)}));const l={collectionId:i,parent:pn(a)};return H0(t).put(l)}return B.resolve()}getCollectionParents(t,e){const i=[],a=IDBKeyRange.bound([e,""],[Pb(e),""],!1,!0);return H0(t).H(a).next((l=>{for(const c of l){if(c.collectionId!==e)break;i.push(Zi(c.parent))}return i}))}addFieldIndex(t,e){const i=Vu(t),a=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(e);delete a.indexId;const l=i.add(a);if(e.indexState){const c=ko(t);return l.next((m=>{c.put(P0(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return l.next()}deleteFieldIndex(t,e){const i=Vu(t),a=ko(t),l=Po(t);return i.delete(e.indexId).next((()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=Vu(t),i=Po(t),a=ko(t);return e.X().next((()=>i.X())).next((()=>a.X()))}createTargetIndexes(t,e){return B.forEach(this.vn(e),(i=>this.getIndexType(t,i).next((a=>{if(a===0||a===1){const l=new B0(i).bn();if(l!=null)return this.addFieldIndex(t,l)}}))))}getDocumentsMatchingTarget(t,e){const i=Po(t);let a=!0;const l=new Map;return B.forEach(this.vn(e),(c=>this.Fn(t,c).next((m=>{a&&(a=!!m),l.set(c,m)})))).next((()=>{if(a){let c=Ut();const m=[];return B.forEach(l,((p,g)=>{st(F0,`Using index ${(function(rt){return`id=${rt.indexId}|cg=${rt.collectionGroup}|f=${rt.fields.map((gt=>`${gt.fieldPath}:${gt.kind}`)).join(",")}`})(p)} to execute ${ka(e)}`);const T=(function(rt,gt){const vt=cg(gt);if(vt===void 0)return null;for(const ht of Hf(rt,vt.fieldPath))switch(ht.op){case"array-contains-any":return ht.value.arrayValue.values||[];case"array-contains":return[ht.value]}return null})(g,p),E=(function(rt,gt){const vt=new Map;for(const ht of ya(gt))for(const D of Hf(rt,ht.fieldPath))switch(D.op){case"==":case"in":vt.set(ht.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return vt.set(ht.fieldPath.canonicalString(),D.value),Array.from(vt.values())}return null})(g,p),S=(function(rt,gt){const vt=[];let ht=!0;for(const D of ya(gt)){const A=D.kind===0?E0(rt,D.fieldPath,rt.startAt):S0(rt,D.fieldPath,rt.startAt);vt.push(A.value),ht&&(ht=A.inclusive)}return new ol(vt,ht)})(g,p),R=(function(rt,gt){const vt=[];let ht=!0;for(const D of ya(gt)){const A=D.kind===0?S0(rt,D.fieldPath,rt.endAt):E0(rt,D.fieldPath,rt.endAt);vt.push(A.value),ht&&(ht=A.inclusive)}return new ol(vt,ht)})(g,p),V=this.Mn(p,g,S),C=this.Mn(p,g,R),z=this.xn(p,g,E),$=this.On(p.indexId,T,V,S.inclusive,C,R.inclusive,z);return B.forEach($,(at=>i.Z(at,e.limit).next((rt=>{rt.forEach((gt=>{const vt=dt.fromSegments(gt.documentKey);c.has(vt)||(c=c.add(vt),m.push(vt))}))}))))})).next((()=>m))}return B.resolve(null)}))}vn(t){let e=this.Cn.get(t);return e||(t.filters.length===0?e=[t]:e=w2(ae.create(t.filters,"and")).map((i=>vg(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt))),this.Cn.set(t,e),e)}On(t,e,i,a,l,c,m){const p=(e!=null?e.length:1)*Math.max(i.length,l.length),g=p/(e!=null?e.length:1),T=[];for(let E=0;E<p;++E){const S=e?this.Nn(e[E/g]):hf,R=this.Bn(t,S,i[E%g],a),V=this.Ln(t,S,l[E%g],c),C=m.map((z=>this.Bn(t,S,z,!0)));T.push(...this.createRange(R,V,C))}return T}Bn(t,e,i,a){const l=new Sa(t,dt.empty(),e,i);return a?l:l.En()}Ln(t,e,i,a){const l=new Sa(t,dt.empty(),e,i);return a?l.En():l}Fn(t,e){const i=new B0(e),a=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,a).next((l=>{let c=null;for(const m of l)i.gn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(t,e){let i=2;const a=this.vn(e);return B.forEach(a,(l=>this.Fn(t,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new oe(be.comparator),T=!1;for(const E of p.filters)for(const S of E.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?T=!0:g=g.add(S.field));for(const E of p.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(T?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(e)&&a.length>1&&i===2?1:i))}kn(t,e){const i=new xu;for(const a of ya(t)){const l=e.data.field(a.fieldPath);if(l==null)return null;const c=i.ln(a.kind);Ea.Wt.Dt(l,c)}return i.un()}Nn(t){const e=new xu;return Ea.Wt.Dt(t,e.ln(0)),e.un()}Kn(t,e){const i=new xu;return Ea.Wt.Dt(dc(this.databaseId,e),i.ln((function(l){const c=ya(l);return c.length===0?0:c[c.length-1].kind})(t))),i.un()}xn(t,e,i){if(i===null)return[];let a=[];a.push(new xu);let l=0;for(const c of ya(t)){const m=i[l++];for(const p of a)if(this.qn(e,c.fieldPath)&&mc(m))a=this.Un(a,c,m);else{const g=p.ln(c.kind);Ea.Wt.Dt(m,g)}}return this.$n(a)}Mn(t,e,i){return this.xn(t,e,i.position)}$n(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].un();return e}Un(t,e,i){const a=[...t],l=[];for(const c of i.arrayValue.values||[])for(const m of a){const p=new xu;p.seed(m.un()),Ea.Wt.Dt(c,p.ln(e.kind)),l.push(p)}return l}qn(t,e){return!!t.filters.find((i=>i instanceof Gt&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(t,e){const i=Vu(t),a=ko(t);return(e?i.H(fg,IDBKeyRange.bound(e,e)):i.H()).next((l=>{const c=[];return B.forEach(l,(m=>a.get([m.indexId,this.uid]).next((p=>{c.push((function(T,E){const S=E?new ac(E.sequenceNumber,new Bn(Ua(E.readTime),new dt(Zi(E.documentKey)),E.largestBatchId)):ac.empty(),R=T.fields.map((([V,C])=>new Tf(be.fromServerFormat(V),C)));return new Uf(T.indexId,T.collectionGroup,R,S)})(m,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Nt(i.collectionGroup,a.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,i){const a=Vu(t),l=ko(t);return this.Wn(t).next((c=>a.H(fg,IDBKeyRange.bound(e,e)).next((m=>B.forEach(m,(p=>l.put(P0(p.indexId,this.uid,c,i))))))))}updateIndexEntries(t,e){const i=new Map;return B.forEach(e,((a,l)=>{const c=i.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(t,a.collectionGroup)).next((m=>(i.set(a.collectionGroup,m),B.forEach(m,(p=>this.Qn(t,a,p).next((g=>{const T=this.Gn(l,p);return g.isEqual(T)?B.resolve():this.zn(t,l,p,g,T)})))))))}))}jn(t,e,i,a){return Po(t).put(a.Rn(this.uid,this.Kn(i,e.key),e.key))}Hn(t,e,i,a){return Po(t).delete(a.An(this.uid,this.Kn(i,e.key),e.key))}Qn(t,e,i){const a=Po(t);let l=new oe(pr);return a.ee({index:Yb,range:IDBKeyRange.only([i.indexId,this.uid,Cf(this.Kn(i,e))])},((c,m)=>{l=l.add(new Sa(i.indexId,e,j0(m.arrayValue),j0(m.directionalValue)))})).next((()=>l))}Gn(t,e){let i=new oe(pr);const a=this.kn(e,t);if(a==null)return i;const l=cg(e);if(l!=null){const c=t.data.field(l.fieldPath);if(mc(c))for(const m of c.arrayValue.values||[])i=i.add(new Sa(e.indexId,t.key,this.Nn(m),a))}else i=i.add(new Sa(e.indexId,t.key,hf,a));return i}zn(t,e,i,a,l){st(F0,"Updating index entries for document '%s'",e.key);const c=[];return(function(p,g,T,E,S){const R=p.getIterator(),V=g.getIterator();let C=Mo(R),z=Mo(V);for(;C||z;){let $=!1,at=!1;if(C&&z){const rt=T(C,z);rt<0?at=!0:rt>0&&($=!0)}else C!=null?at=!0:$=!0;$?(E(z),z=Mo(V)):at?(S(C),C=Mo(R)):(C=Mo(R),z=Mo(V))}})(a,l,pr,(m=>{c.push(this.jn(t,e,i,m))}),(m=>{c.push(this.Hn(t,e,i,m))})),B.waitFor(c)}Wn(t){let e=1;return ko(t).ee({index:Qb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),e=a.sequenceNumber+1})).next((()=>e))}createRange(t,e,i){i=i.sort(((c,m)=>pr(c,m))).filter(((c,m,p)=>!m||pr(c,p[m-1])!==0));const a=[];a.push(t);for(const c of i){const m=pr(c,t),p=pr(c,e);if(m===0)a[0]=t.En();else if(m>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(e);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const m=a[c].An(this.uid,hf,dt.empty()),p=a[c+1].An(this.uid,hf,dt.empty());l.push(IDBKeyRange.bound(m,p))}return l}Jn(t,e){return pr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(G0)}getMinOffset(t,e){return B.mapArray(this.vn(e),(i=>this.Fn(t,i).next((a=>a||yt(44426))))).next(G0)}}function H0(r){return $e(r,cc)}function Po(r){return $e(r,Ju)}function Vu(r){return $e(r,sy)}function ko(r){return $e(r,Xu)}function G0(r){bt(r.length!==0,28825);let t=r[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;ey(a,t)<0&&(t=a),e<a.largestBatchId&&(e=a.largestBatchId)}return new Bn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WA=41943040;class dn{static withCacheSize(t){return new dn(t,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(r,t,e){const i=r.store(_i),a=r.store(el),l=[],c=IDBKeyRange.only(e.batchId);let m=0;const p=i.ee({range:c},((T,E,S)=>(m++,S.delete())));l.push(p.next((()=>{bt(m===1,47070,{batchId:e.batchId})})));const g=[];for(const T of e.mutations){const E=Hb(t,T.key.path,e.batchId);l.push(a.delete(E)),g.push(T.key)}return B.waitFor(l).next((()=>g))}function $f(r){if(!r)return 0;let t;if(r.document)t=r.document;else if(r.unknownDocument)t=r.unknownDocument;else{if(!r.noDocument)throw yt(14731);t=r.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(WA,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);class Sd{constructor(t,e,i,a){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static wt(t,e,i,a){bt(t.uid!=="",64387);const l=t.isAuthenticated()?t.uid:"";return new Sd(l,e,i,a)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gr(t).ee({index:Aa,range:i},((a,l,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,i,a){const l=Fo(t),c=gr(t);return c.add({}).next((m=>{bt(typeof m=="number",49019);const p=new dy(m,e,i,a),g=(function(R,V,C){const z=C.baseMutations.map((at=>Kf(R.yt,at))),$=C.mutations.map((at=>Kf(R.yt,at)));return{userId:V,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:z,mutations:$}})(this.serializer,this.userId,p),T=[];let E=new oe(((S,R)=>Nt(S.canonicalString(),R.canonicalString())));for(const S of a){const R=Hb(this.userId,S.key.path,m);E=E.add(S.key.path.popLast()),T.push(c.put(g)),T.push(l.put(R,nx))}return E.forEach((S=>{T.push(this.indexManager.addToCollectionParentIndex(t,S))})),t.addOnCommittedListener((()=>{this.Zn[m]=p.keys()})),B.waitFor(T).next((()=>p))}))}lookupMutationBatch(t,e){return gr(t).get(e).next((i=>i?(bt(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:e}),Ta(this.serializer,i)):null))}Xn(t,e){return this.Zn[e]?B.resolve(this.Zn[e]):this.lookupMutationBatch(t,e).next((i=>{if(i){const a=i.keys();return this.Zn[e]=a,a}return null}))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return gr(t).ee({index:Aa,range:a},((c,m,p)=>{m.userId===this.userId&&(bt(m.batchId>=i,47524,{Yn:i}),l=Ta(this.serializer,m)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=wa;return gr(t).ee({index:Aa,range:e,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,wa],[this.userId,Number.POSITIVE_INFINITY]);return gr(t).H(Aa,e).next((i=>i.map((a=>Ta(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=Ef(this.userId,e.path),a=IDBKeyRange.lowerBound(i),l=[];return Fo(t).ee({range:a},((c,m,p)=>{const[g,T,E]=c,S=Zi(T);if(g===this.userId&&e.path.isEqual(S))return gr(t).get(E).next((R=>{if(!R)throw yt(61480,{er:c,batchId:E});bt(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:E}),l.push(Ta(this.serializer,R))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new oe(Nt);const a=[];return e.forEach((l=>{const c=Ef(this.userId,l.path),m=IDBKeyRange.lowerBound(c),p=Fo(t).ee({range:m},((g,T,E)=>{const[S,R,V]=g,C=Zi(R);S===this.userId&&l.path.isEqual(C)?i=i.add(V):E.done()}));a.push(p)})),B.waitFor(a).next((()=>this.tr(t,i)))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1,l=Ef(this.userId,i),c=IDBKeyRange.lowerBound(l);let m=new oe(Nt);return Fo(t).ee({range:c},((p,g,T)=>{const[E,S,R]=p,V=Zi(S);E===this.userId&&i.isPrefixOf(V)?V.length===a&&(m=m.add(R)):T.done()})).next((()=>this.tr(t,m)))}tr(t,e){const i=[],a=[];return e.forEach((l=>{a.push(gr(t).get(l).next((c=>{if(c===null)throw yt(35274,{batchId:l});bt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(Ta(this.serializer,c))})))})),B.waitFor(a).next((()=>i))}removeMutationBatch(t,e){return tI(t.le,this.userId,e).next((i=>(t.addOnCommittedListener((()=>{this.nr(e.batchId)})),B.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))))}nr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return B.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Fo(t).ee({range:i},((l,c,m)=>{if(l[0]===this.userId){const p=Zi(l[1]);a.push(p)}else m.done()})).next((()=>{bt(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(t,e){return eI(t,this.userId,e)}ir(t){return nI(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:wa,lastStreamToken:""}))}}function eI(r,t,e){const i=Ef(t,e.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Fo(r).ee({range:l,Y:!0},((m,p,g)=>{const[T,E,S]=m;T===t&&E===a&&(c=!0),g.done()})).next((()=>c))}function gr(r){return $e(r,_i)}function Fo(r){return $e(r,el)}function nI(r){return $e(r,lc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new za(0)}static ar(){return new za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.ur(t).next((e=>{const i=new za(e.highestTargetId);return e.highestTargetId=i.next(),this.cr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.ur(t).next((e=>It.fromTimestamp(new re(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.ur(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,i){return this.ur(t).next((a=>(a.highestListenSequenceNumber=e,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),e>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=e),this.cr(t,a))))}addTargetData(t,e){return this.lr(t,e).next((()=>this.ur(t).next((i=>(i.targetCount+=1,this.hr(e,i),this.cr(t,i))))))}updateTargetData(t,e){return this.lr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Lo(t).delete(e.targetId))).next((()=>this.ur(t))).next((i=>(bt(i.targetCount>0,8065),i.targetCount-=1,this.cr(t,i))))}removeTargets(t,e,i){let a=0;const l=[];return Lo(t).ee(((c,m)=>{const p=Fu(m);p.sequenceNumber<=e&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(t,p)))})).next((()=>B.waitFor(l))).next((()=>a))}forEachTarget(t,e){return Lo(t).ee(((i,a)=>{const l=Fu(a);e(l)}))}ur(t){return Q0(t).get(Bf).next((e=>(bt(e!==null,2888),e)))}cr(t,e){return Q0(t).put(Bf,e)}lr(t,e){return Lo(t).put($A(this.serializer,e))}hr(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.ur(t).next((e=>e.targetCount))}getTargetData(t,e){const i=ka(e),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Lo(t).ee({range:a,index:Kb},((c,m,p)=>{const g=Fu(m);Rc(e,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(t,e,i){const a=[],l=Sr(t);return e.forEach((c=>{const m=pn(c.path);a.push(l.put({targetId:i,path:m})),a.push(this.referenceDelegate.addReference(t,i,c))})),B.waitFor(a)}removeMatchingKeys(t,e,i){const a=Sr(t);return B.forEach(e,(l=>{const c=pn(l.path);return B.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(t,i,l)])}))}removeMatchingKeysForTargetId(t,e){const i=Sr(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),a=Sr(t);let l=Ut();return a.ee({range:i,Y:!0},((c,m,p)=>{const g=Zi(c[1]),T=new dt(g);l=l.add(T)})).next((()=>l))}containsKey(t,e){const i=pn(e.path),a=IDBKeyRange.bound([i],[Pb(i)],!1,!0);let l=0;return Sr(t).ee({index:iy,Y:!0,range:a},(([c,m],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(t,e){return Lo(t).get(e).next((i=>i?Fu(i):null))}}function Lo(r){return $e(r,nl)}function Q0(r){return $e(r,Ra)}function Sr(r){return $e(r,il)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="LruGarbageCollector",iI=1048576;function $0([r,t],[e,i]){const a=Nt(r,e);return a===0?Nt(t,i):a}class N2{constructor(t){this.Pr=t,this.buffer=new oe($0),this.Tr=0}Ir(){return++this.Tr}Er(t){const e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();$0(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class sI{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){st(Y0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){kr(e)?st(Y0,"Ignoring IndexedDB error during garbage collection: ",e):await Pr(e)}await this.Ar(3e5)}))}}class x2{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return B.resolve(Rn.ce);const i=new N2(e);return this.Vr.forEachTarget(t,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(t,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(K0)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K0):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let i,a,l,c,m,p,g;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(t,a)))).next((E=>(i=E,m=Date.now(),this.removeTargets(t,i,e)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(t,i)))).next((E=>(g=Date.now(),zo()<=Ht.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${a} in `+(m-c)+`ms
	Removed ${l} targets in `+(p-m)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-T}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function rI(r,t){return new x2(r,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t,e){this.db=t,this.garbageCollector=rI(this,e)}dr(t){const e=this.pr(t);return this.db.getTargetCache().getTargetCount(t).next((i=>e.next((a=>i+a))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}mr(t,e){return this.yr(t,((i,a)=>e(a)))}addReference(t,e,i){return ff(t,i)}removeReference(t,e,i){return ff(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return ff(t,e)}wr(t,e){return(function(a,l){let c=!1;return nI(a).te((m=>eI(a,m,l).next((p=>(p&&(c=!0),B.resolve(!p)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(t,((c,m)=>{if(m<=e){const p=this.wr(t,c).next((g=>{if(!g)return l++,i.getEntry(t,c).next((()=>(i.removeEntry(c,It.min()),Sr(t).delete((function(E){return[0,pn(E.path)]})(c)))))}));a.push(p)}})).next((()=>B.waitFor(a))).next((()=>i.apply(t))).next((()=>l))}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return ff(t,e)}yr(t,e){const i=Sr(t);let a,l=Rn.ce;return i.ee({index:iy},(([c,m],{path:p,sequenceNumber:g})=>{c===0?(l!==Rn.ce&&e(new dt(Zi(a)),l),l=g,a=p):l=Rn.ce})).next((()=>{l!==Rn.ce&&e(new dt(Zi(a)),l)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function ff(r,t){return Sr(r).put((function(i,a){return{targetId:0,path:pn(i.path),sequenceNumber:a}})(t,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.changes=new Ps((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,we.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?B.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return pa(t).put(i)}removeEntry(t,e,i){return pa(t).delete((function(l,c){const m=l.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Qf(c),m[m.length-1]]})(e,i))}updateMetadata(t,e){return this.getMetadata(t).next((i=>(i.byteSize+=e,this.br(t,i))))}getEntry(t,e){let i=we.newInvalidDocument(e);return pa(t).ee({index:Sf,range:IDBKeyRange.only(Mu(e))},((a,l)=>{i=this.Sr(e,l)})).next((()=>i))}Dr(t,e){let i={size:0,document:we.newInvalidDocument(e)};return pa(t).ee({index:Sf,range:IDBKeyRange.only(Mu(e))},((a,l)=>{i={document:this.Sr(e,l),size:$f(l)}})).next((()=>i))}getEntries(t,e){let i=zn();return this.Cr(t,e,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c)})).next((()=>i))}vr(t,e){let i=zn(),a=new de(dt.comparator);return this.Cr(t,e,((l,c)=>{const m=this.Sr(l,c);i=i.insert(l,m),a=a.insert(l,$f(c))})).next((()=>({documents:i,Fr:a})))}Cr(t,e,i){if(e.isEmpty())return B.resolve();let a=new oe(Z0);e.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Mu(a.first()),Mu(a.last())),c=a.getIterator();let m=c.getNext();return pa(t).ee({index:Sf,range:l},((p,g,T)=>{const E=dt.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;m&&Z0(m,E)<0;)i(m,null),m=c.getNext();m&&m.isEqual(E)&&(i(m,g),m=c.hasNext()?c.getNext():null),m?T.j(Mu(m)):T.done()})).next((()=>{for(;m;)i(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,i,a,l){const c=e.path,m=[c.popLast().toArray(),c.lastSegment(),Qf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pa(t).H(IDBKeyRange.bound(m,p,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let T=zn();for(const E of g){const S=this.Sr(dt.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);S.isFoundDocument()&&(Cc(e,S)||a.has(S.key))&&(T=T.insert(S.key,S))}return T}))}getAllFromCollectionGroup(t,e,i,a){let l=zn();const c=J0(e,i),m=J0(e,Bn.max());return pa(t).ee({index:Gb,range:IDBKeyRange.bound(c,m,!0)},((p,g,T)=>{const E=this.Sr(dt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===a&&T.done()})).next((()=>l))}newChangeBuffer(t){return new O2(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return X0(t).get(hg).next((e=>(bt(!!e,20021),e)))}br(t,e){return X0(t).put(hg,e)}Sr(t,e){if(e){const i=v2(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(It.min())))return i}return we.newInvalidDocument(t)}}function oI(r){return new M2(r)}class O2 extends aI{constructor(t,e){super(),this.Mr=t,this.trackRemovals=e,this.Or=new Ps((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(t){const e=[];let i=0,a=new oe(((l,c)=>Nt(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const m=this.Or.get(l);if(e.push(this.Mr.removeEntry(t,l,m.readTime)),c.isValidDocument()){const p=M0(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=$f(p);i+=g-m.size,e.push(this.Mr.addEntry(t,l,p))}else if(i-=m.size,this.trackRemovals){const p=M0(this.Mr.serializer,c.convertToNoDocument(It.min()));e.push(this.Mr.addEntry(t,l,p))}})),a.forEach((l=>{e.push(this.Mr.indexManager.addToCollectionParentIndex(t,l))})),e.push(this.Mr.updateMetadata(t,i)),B.waitFor(e)}getFromCache(t,e){return this.Mr.Dr(t,e).next((i=>(this.Or.set(e,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(t,e){return this.Mr.vr(t,e).next((({documents:i,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function X0(r){return $e(r,uc)}function pa(r){return $e(r,jf)}function Mu(r){const t=r.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function J0(r,t){const e=t.documentKey.path.toArray();return[r,Qf(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Z0(r,t){const e=r.path.toArray(),i=t.path.toArray();let a=0;for(let l=0;l<e.length-2&&l<i.length-2;++l)if(a=Nt(e[l],i[l]),a)return a;return a=Nt(e.length,i.length),a||(a=Nt(e[e.length-2],i[i.length-2]),a||Nt(e[e.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((a=>(i=a,this.remoteDocumentCache.getEntry(t,e)))).next((a=>(i!==null&&ec(i.mutation,a,Cn.empty(),re.now()),a)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Ut()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Ut()){const a=Wi();return this.populateOverlays(t,a,e).next((()=>this.computeViews(t,e,a,i).next((l=>{let c=Bu();return l.forEach(((m,p)=>{c=c.insert(m,p.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Wi();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Ut())))}populateOverlays(t,e,i){const a=[];return i.forEach((l=>{e.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(t,a).next((l=>{l.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,i,a){let l=zn();const c=tc(),m=(function(){return tc()})();return e.forEach(((p,g)=>{const T=i.get(g.key);a.has(g.key)&&(T===void 0||T.mutation instanceof ks)?l=l.insert(g.key,g):T!==void 0?(c.set(g.key,T.mutation.getFieldMask()),ec(T.mutation,g,T.mutation.getFieldMask(),re.now())):c.set(g.key,Cn.empty())})),this.recalculateAndSaveOverlays(t,l).next((p=>(p.forEach(((g,T)=>c.set(g,T))),e.forEach(((g,T)=>m.set(g,new P2(T,c.get(g)??null)))),m)))}recalculateAndSaveOverlays(t,e){const i=tc();let a=new de(((c,m)=>c-m)),l=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((p=>{const g=e.get(p);if(g===null)return;let T=i.get(p)||Cn.empty();T=m.applyToLocalView(g,T),i.set(p,T);const E=(a.get(m.batchId)||Ut()).add(p);a=a.insert(m.batchId,E)}))})).next((()=>{const c=[],m=a.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,T=p.value,E=AA();T.forEach((S=>{if(!l.has(S)){const R=NA(e.get(S),i.get(S));R!==null&&E.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,E))}return B.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,a){return zx(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):_A(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-l.size):B.resolve(Wi());let m=tl,p=l;return c.next((g=>B.forEach(g,((T,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),l.get(T)?B.resolve():this.remoteDocumentCache.getEntry(t,T).next((S=>{p=p.insert(T,S)}))))).next((()=>this.populateOverlays(t,g,l))).next((()=>this.computeViews(t,p,g,Ut()))).next((T=>({batchId:m,changes:bA(T)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new dt(e)).next((i=>{let a=Bu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const l=e.collectionGroup;let c=Bu();return this.indexManager.getCollectionParents(t,l).next((m=>B.forEach(m,(p=>{const g=(function(E,S){return new bl(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(e,p.child(l));return this.getDocumentsMatchingCollectionQuery(t,g,i,a).next((T=>{T.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const T=g.getKey();c.get(T)===null&&(c=c.insert(T,we.newInvalidDocument(T)))}));let m=Bu();return c.forEach(((p,g)=>{const T=l.get(p);T!==void 0&&ec(T.mutation,g,Cn.empty(),re.now()),Cc(e,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return B.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(a){return{id:a.id,version:a.version,createTime:vn(a.createTime)}})(e)),B.resolve()}getNamedQuery(t,e){return B.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(a){return{name:a.name,query:XA(a.bundledQuery),readTime:vn(a.readTime)}})(e)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.overlays=new de(dt.comparator),this.Lr=new Map}getOverlay(t,e){return B.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Wi();return B.forEach(e,(a=>this.getOverlay(t,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((a,l)=>{this.bt(t,e,l)})),B.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),B.resolve()}getOverlaysForCollection(t,e,i){const a=Wi(),l=e.length+1,c=new dt(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return B.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let l=new de(((g,T)=>g-T));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let T=l.get(g.largestBatchId);T===null&&(T=Wi(),l=l.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const m=Wi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,T)=>m.set(g,T))),!(m.size()>=a)););return B.resolve(m)}bt(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new py(e,i));let l=this.Lr.get(e);l===void 0&&(l=Ut(),this.Lr.set(e,l)),this.Lr.set(e,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.sessionToken=Oe.EMPTY_BYTE_STRING}getSessionToken(t){return B.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.kr=new oe(We.Kr),this.qr=new oe(We.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){const i=new We(t,e);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Wr(new We(t,e))}Qr(t,e){t.forEach((i=>this.removeReference(i,e)))}Gr(t){const e=new dt(new ee([])),i=new We(e,t),a=new We(e,t+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const e=new dt(new ee([])),i=new We(e,t),a=new We(e,t+1);let l=Ut();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(t){const e=new We(t,0),i=this.kr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class We{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return dt.comparator(t.key,e.key)||Nt(t.Hr,e.Hr)}static Ur(t,e){return Nt(t.Hr,e.Hr)||dt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new oe(We.Kr)}checkEmpty(t){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new dy(l,e,i,a);this.mutationQueue.push(c);for(const m of a)this.Jr=this.Jr.add(new We(m.key,l)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return B.resolve(c)}lookupMutationBatch(t,e){return B.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.Xr(i),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?wa:this.Yn-1)}getAllMutationBatches(t){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new We(e,0),a=new We(e,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const m=this.Zr(c.Hr);l.push(m)})),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new oe(Nt);return e.forEach((a=>{const l=new We(a,0),c=new We(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(m=>{i=i.add(m.Hr)}))})),B.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let l=i;dt.isDocumentKey(l)||(l=l.child(""));const c=new We(new dt(l),0);let m=new oe(Nt);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(m=m.add(p.Hr)),!0)}),c),B.resolve(this.Yr(m))}Yr(t){const e=[];return t.forEach((i=>{const a=this.Zr(i);a!==null&&e.push(a)})),e}removeMutationBatch(t,e){bt(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return B.forEach(e.mutations,(a=>{const l=new We(a.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Jr=i}))}nr(t){}containsKey(t,e){const i=new We(e,0),a=this.Jr.firstAfterOrEqual(i);return B.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,B.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(t){this.ti=t,this.docs=(function(){return new de(dt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return B.resolve(i?i.document.mutableCopy():we.newInvalidDocument(e))}getEntries(t,e){let i=zn();return e.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():we.newInvalidDocument(a))})),B.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let l=zn();const c=e.path,m=new dt(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:T}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||ey(zb(T),i)<=0||(a.has(T.key)||Cc(e,T))&&(l=l.insert(T.key,T.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(t,e,i,a){yt(9500)}ni(t,e){return B.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new B2(this)}getSize(t){return B.resolve(this.size)}}class B2 extends aI{constructor(t){super(),this.Mr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?e.push(this.Mr.addEntry(t,a)):this.Mr.removeEntry(i)})),B.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(t){this.persistence=t,this.ri=new Ps((e=>ka(e)),Rc),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.ii=0,this.si=new Ty,this.targetCount=0,this.oi=za._r()}forEachTarget(t,e){return this.ri.forEach(((i,a)=>e(a))),B.resolve()}getLastRemoteSnapshotVersion(t){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return B.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.ii&&(this.ii=e),B.resolve()}lr(t){this.ri.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.oi=new za(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,B.resolve()}updateTargetData(t,e){return this.lr(e),B.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,B.resolve()}removeTargets(t,e,i){let a=0;const l=[];return this.ri.forEach(((c,m)=>{m.sequenceNumber<=e&&i.get(m.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(t,m.targetId)),a++)})),B.waitFor(l).next((()=>a))}getTargetCount(t){return B.resolve(this.targetCount)}getTargetData(t,e){const i=this.ri.get(e)||null;return B.resolve(i)}addMatchingKeys(t,e,i){return this.si.$r(e,i),B.resolve()}removeMatchingKeys(t,e,i){this.si.Qr(e,i);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach((c=>{l.push(a.markPotentiallyOrphaned(t,c))})),B.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),B.resolve()}getMatchingKeysForTargetId(t,e){const i=this.si.jr(e);return B.resolve(i)}containsKey(t,e){return B.resolve(this.si.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,e){this._i={},this.overlays={},this.ai=new Rn(0),this.ui=!1,this.ui=!0,this.ci=new U2,this.referenceDelegate=t(this),this.li=new q2(this),this.indexManager=new R2,this.remoteDocumentCache=(function(a){return new j2(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new YA(e),this.Pi=new k2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new L2,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this._i[t.toKey()];return i||(i=new z2(e,this.referenceDelegate),this._i[t.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,i){st("MemoryPersistence","Starting transaction:",t);const a=new F2(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(t,e){return B.or(Object.values(this._i).map((i=>()=>i.containsKey(t,e))))}}class F2 extends Bb{constructor(t){super(),this.currentSequenceNumber=t}}class bd{constructor(t){this.persistence=t,this.Ri=new Ty,this.Ai=null}static Vi(t){return new bd(t)}get di(){if(this.Ai)return this.Ai;throw yt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.di.delete(i.toString()),B.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.di.add(i.toString()),B.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),B.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,(i=>{const a=dt.fromPath(i);return this.mi(t,a).next((l=>{l||e.removeEntry(a,It.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((i=>{i?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return B.or([()=>B.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Xf{constructor(t,e){this.persistence=t,this.fi=new Ps((i=>pn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=rI(this,e)}static Vi(t,e){return new Xf(t,e)}Ti(){}Ii(t){return B.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((a=>i+a))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}mr(t,e){return B.forEach(this.fi,((i,a)=>this.wr(t,i,a).next((l=>l?B.resolve():e(a)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(t,(c=>this.wr(t,c,e).next((m=>{m||(i++,l.removeEntry(c,It.min()))})))).next((()=>l.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),B.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),B.resolve()}removeReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),B.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),B.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Af(t.data.value)),e}wr(t,e,i){return B.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.fi.get(e);return B.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t){this.serializer=t}k(t,e,i,a){const l=new cd("createOrUpgrade",e);i<1&&a>=1&&((function(p){p.createObjectStore(wc)})(t),(function(p){p.createObjectStore(lc,{keyPath:ex}),p.createObjectStore(_i,{keyPath:u0,autoIncrement:!0}).createIndex(Aa,c0,{unique:!0}),p.createObjectStore(el)})(t),W0(t),(function(p){p.createObjectStore(_a)})(t));let c=B.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(il),p.deleteObjectStore(nl),p.deleteObjectStore(Ra)})(t),W0(t)),c=c.next((()=>(function(p){const g=p.store(Ra),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return g.put(Bf,T)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(_i).H().next((E=>{p.deleteObjectStore(_i),p.createObjectStore(_i,{keyPath:u0,autoIncrement:!0}).createIndex(Aa,c0,{unique:!0});const S=g.store(_i),R=E.map((V=>S.put(V)));return B.waitFor(R)}))})(t,l)))),c=c.next((()=>{(function(p){p.createObjectStore(sl,{keyPath:cx})})(t)}))),i<5&&a>=5&&(c=c.next((()=>this.gi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(uc)})(t),this.pi(l))))),i<7&&a>=7&&(c=c.next((()=>this.yi(l)))),i<8&&a>=8&&(c=c.next((()=>this.wi(t,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(t)}))),i<10&&a>=10&&(c=c.next((()=>this.bi(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(fd,{keyPath:hx})})(t),(function(p){p.createObjectStore(dd,{keyPath:fx})})(t)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(md,{keyPath:vx});g.createIndex(dg,Tx,{unique:!1}),g.createIndex($b,Ex,{unique:!1})})(t)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(jf,{keyPath:ix});g.createIndex(Sf,sx),g.createIndex(Gb,rx)})(t))).next((()=>this.Si(t,l))).next((()=>t.deleteObjectStore(_a)))),i<14&&a>=14&&(c=c.next((()=>this.Di(t,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(sy,{keyPath:dx,autoIncrement:!0}).createIndex(fg,mx,{unique:!1}),p.createObjectStore(Xu,{keyPath:px}).createIndex(Qb,gx,{unique:!1}),p.createObjectStore(Ju,{keyPath:yx}).createIndex(Yb,_x,{unique:!1})})(t)))),i<16&&a>=16&&(c=c.next((()=>{e.objectStore(Xu).clear()})).next((()=>{e.objectStore(Ju).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(ry,{keyPath:Sx})})(t)}))),i<18&&a>=18&&GS()&&(c=c.next((()=>{e.objectStore(Xu).clear()})).next((()=>{e.objectStore(Ju).clear()}))),c}pi(t){let e=0;return t.store(_a).ee(((i,a)=>{e+=$f(a)})).next((()=>{const i={byteSize:e};return t.store(uc).put(hg,i)}))}gi(t){const e=t.store(lc),i=t.store(_i);return e.H().next((a=>B.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,wa],[l.userId,l.lastAcknowledgedBatchId]);return i.H(Aa,c).next((m=>B.forEach(m,(p=>{bt(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=Ta(this.serializer,p);return tI(t,l.userId,g).next((()=>{}))}))))}))))}yi(t){const e=t.store(il),i=t.store(_a);return t.store(Ra).get(Bf).next((a=>{const l=[];return i.ee(((c,m)=>{const p=new ee(c),g=(function(E){return[0,pn(E)]})(p);l.push(e.get(g).next((T=>T?B.resolve():(E=>e.put({targetId:0,path:pn(E),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>B.waitFor(l)))}))}wi(t,e){t.createObjectStore(cc,{keyPath:ux});const i=e.store(cc),a=new vy,l=c=>{if(a.add(c)){const m=c.lastSegment(),p=c.popLast();return i.put({collectionId:m,parent:pn(p)})}};return e.store(_a).ee({Y:!0},((c,m)=>{const p=new ee(c);return l(p.popLast())})).next((()=>e.store(el).ee({Y:!0},(([c,m,p],g)=>{const T=Zi(m);return l(T.popLast())}))))}bi(t){const e=t.store(nl);return e.ee(((i,a)=>{const l=Fu(a),c=$A(this.serializer,l);return e.put(c)}))}Si(t,e){const i=e.store(_a),a=[];return i.ee(((l,c)=>{const m=e.store(jf),p=(function(E){return E.document?new dt(ee.fromString(E.document.name).popFirst(5)):E.noDocument?dt.fromSegments(E.noDocument.path):E.unknownDocument?dt.fromSegments(E.unknownDocument.path):yt(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(m.put(g))})).next((()=>B.waitFor(a)))}Di(t,e){const i=e.store(_i),a=oI(this.serializer),l=new Ey(bd.Vi,this.serializer.yt);return i.H().next((c=>{const m=new Map;return c.forEach((p=>{let g=m.get(p.userId)??Ut();Ta(this.serializer,p).keys().forEach((T=>g=g.add(T))),m.set(p.userId,g)})),B.forEach(m,((p,g)=>{const T=new fn(g),E=Ed.wt(this.serializer,T),S=l.getIndexManager(T),R=Sd.wt(T,this.serializer,S,l.referenceDelegate);return new lI(a,R,E,S).recalculateAndSaveOverlaysForDocumentKeys(new mg(e,Rn.ce),p).next()}))}))}}function W0(r){r.createObjectStore(il,{keyPath:ox}).createIndex(iy,lx,{unique:!0}),r.createObjectStore(nl,{keyPath:"targetId"}).createIndex(Kb,ax,{unique:!0}),r.createObjectStore(Ra)}const yr="IndexedDbPersistence",Fp=18e5,Hp=5e3,Gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",G2="main";class Sy{constructor(t,e,i,a,l,c,m,p,g,T,E=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Ci=l,this.window=c,this.document=m,this.Fi=g,this.Mi=T,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!Sy.v())throw new ct(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new V2(this,a),this.Ki=e+G2,this.serializer=new YA(p),this.qi=new Dr(this.Ki,this.xi,new H2(this.serializer)),this.ci=new E2,this.li=new D2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oI(this.serializer),this.Pi=new T2,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,T===!1&&Ve(yr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ct(Z.FAILED_PRECONDITION,Gp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.li.getHighestSequenceNumber(t)))})).then((t=>{this.ai=new Rn(t,this.Fi)})).then((()=>{this.ui=!0})).catch((t=>(this.qi&&this.qi.close(),Promise.reject(t))))}zi(t){return this.ki=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.qi.q((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>df(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(t).next((e=>{e||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(t))).next((e=>this.isPrimary&&!e?this.Ji(t).next((()=>!1)):!!e&&this.Zi(t).next((()=>!0)))))).catch((t=>{if(kr(t))return st(yr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return st(yr,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Ci.enqueueRetryable((()=>this.ki(t))),this.isPrimary=t}))}ji(t){return Ou(t).get(Vo).next((e=>B.resolve(this.Xi(e))))}Yi(t){return df(t).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Fp)){this.Li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const i=$e(e,sl);return i.H().next((a=>{const l=this.ns(a,Fp),c=a.filter((m=>l.indexOf(m)===-1));return B.forEach(c,(m=>i.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const e of t)this.Ui.removeItem(this.rs(e.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.Mi?B.resolve(!0):Ou(t).get(Vo).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,Hp)&&!this.ss(e.ownerId)){if(this.Xi(e)&&this.networkEnabled)return!0;if(!this.Xi(e)){if(!e.allowTabSynchronization)throw new ct(Z.FAILED_PRECONDITION,Gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||df(t).H().next((i=>this.ns(i,Hp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(l||c&&m)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&st(yr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[wc,sl],(t=>{const e=new mg(t,Rn.ce);return this.Ji(e).next((()=>this.Yi(e)))})),this.qi.close(),this.ls()}ns(t,e){return t.filter((i=>this.ts(i.updateTimeMs,e)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(t=>df(t).H().next((e=>this.ns(e,Fp).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(t,e){return Sd.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new C2(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return Ed.wt(this.serializer,t)}getBundleCache(){return this.Pi}runTransaction(t,e,i){st(yr,"Starting transaction:",t);const a=e==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?Ix:p===17?Wb:p===16?Ax:p===15?ay:p===14?Zb:p===13?Jb:p===12?bx:p===11?Xb:void yt(60245)})(this.xi);let c;return this.qi.runTransaction(t,a,l,(m=>(c=new mg(m,this.ai?this.ai.next():Rn.ce),e==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Ve(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ct(Z.FAILED_PRECONDITION,jb);return i(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>i(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Ps(t){return Ou(t).get(Vo).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,Hp)&&!this.ss(e.ownerId)&&!this.Xi(e)&&!(this.Mi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ct(Z.FAILED_PRECONDITION,Gp)}))}Zi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ou(t).put(Vo,e)}static v(){return Dr.v()}Ji(t){const e=Ou(t);return e.get(Vo).next((i=>this.Xi(i)?(st(yr,"Releasing primary lease."),e.delete(Vo)):B.resolve()))}ts(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(Ve(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;HS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(t){var e;try{const i=((e=this.Ui)==null?void 0:e.getItem(this.rs(t)))!==null;return st(yr,`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ve(yr,"Failed to get zombied client id.",i),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(t){Ve("Failed to set zombie client id.",t)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Ou(r){return $e(r,wc)}function df(r){return $e(r,sl)}function uI(r,t){let e=r.projectId;return r.isDefaultDatabase||(e+="."+r.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.Ts=i,this.Is=a}static Es(t,e){let i=Ut(),a=Ut();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new by(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return HS()?8:qb(Ye())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,a){const l={result:null};return this.gs(t,e).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(t,e,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new K2;return this.ys(t,e,c).next((m=>{if(l.result=m,this.As)return this.ws(t,e,c,m.size)}))})).next((()=>l.result))}ws(t,e,i,a){return i.documentReadCount<this.Vs?(zo()<=Ht.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",jo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(zo()<=Ht.DEBUG&&st("QueryEngine","Query:",jo(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(zo()<=Ht.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",jo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,jn(e))):B.resolve())}gs(t,e){if(b0(e))return B.resolve(null);let i=jn(e);return this.indexManager.getIndexType(t,i).next((a=>a===0?null:(e.limit!==null&&a===1&&(e=Eg(e,null,"F"),i=jn(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((l=>{const c=Ut(...l);return this.fs.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,i).next((p=>{const g=this.bs(e,m);return this.Ss(e,g,c,p.readTime)?this.gs(t,Eg(e,null,"F")):this.Ds(t,g,e,p)}))))})))))}ps(t,e,i,a){return b0(e)||a.isEqual(It.min())?B.resolve(null):this.fs.getDocuments(t,i).next((l=>{const c=this.bs(e,l);return this.Ss(e,c,i,a)?B.resolve(null):(zo()<=Ht.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),jo(e)),this.Ds(t,c,e,Ub(a,tl)).next((m=>m)))}))}bs(t,e){let i=new oe(EA(t));return e.forEach(((a,l)=>{Cc(t,l)&&(i=i.add(l))})),i}Ss(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(t,e,i){return zo()<=Ht.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",jo(e)),this.fs.getDocumentsMatchingQuery(t,e,Bn.min(),i)}Ds(t,e,i,a){return this.fs.getDocumentsMatchingQuery(t,i,a).next((l=>(e.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="LocalStore",Q2=3e8;class Y2{constructor(t,e,i,a){this.persistence=t,this.Cs=e,this.serializer=a,this.vs=new de(Nt),this.Fs=new Ps((l=>ka(l)),Rc),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(i)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}}function hI(r,t,e,i){return new Y2(r,t,e,i)}async function fI(r,t){const e=Et(r);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,e.Os(t),e.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],m=[];let p=Ut();for(const g of a){c.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}for(const g of l){m.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}return e.localDocuments.getDocuments(i,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:m})))}))}))}function $2(r,t){const e=Et(r);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=t.batch.keys(),l=e.xs.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,T){const E=g.batch,S=E.keys();let R=B.resolve();return S.forEach((V=>{R=R.next((()=>T.getEntry(p,V))).next((C=>{const z=g.docVersions.get(V);bt(z!==null,48541),C.version.compareTo(z)<0&&(E.applyToRemoteDocument(C,g),C.isValidDocument()&&(C.setReadTime(g.commitVersion),T.addEntry(C)))}))})),R.next((()=>m.mutationQueue.removeMutationBatch(p,E)))})(e,i,t,l).next((()=>l.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let p=Ut();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(t)))).next((()=>e.localDocuments.getDocuments(i,a)))}))}function dI(r){const t=Et(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function X2(r,t){const e=Et(r),i=t.snapshotVersion;let a=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=e.xs.newChangeBuffer({trackRemovals:!0});a=e.vs;const m=[];t.targetChanges.forEach(((T,E)=>{const S=a.get(E);if(!S)return;m.push(e.li.removeMatchingKeys(l,T.removedDocuments,E).next((()=>e.li.addMatchingKeys(l,T.addedDocuments,E))));let R=S.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(E)!==null?R=R.withResumeToken(Oe.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):T.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(T.resumeToken,i)),a=a.insert(E,R),(function(C,z,$){return C.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=Q2?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,R,T)&&m.push(e.li.updateTargetData(l,R))}));let p=zn(),g=Ut();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(l,T))})),m.push(J2(l,c,t.documentUpdates).next((T=>{p=T.Bs,g=T.Ls}))),!i.isEqual(It.min())){const T=e.li.getLastRemoteSnapshotVersion(l).next((E=>e.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(T)}return B.waitFor(m).next((()=>c.apply(l))).next((()=>e.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(e.vs=a,l)))}function J2(r,t,e){let i=Ut(),a=Ut();return e.forEach((l=>i=i.add(l))),t.getEntries(r,i).next((l=>{let c=zn();return e.forEach(((m,p)=>{const g=l.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(m)),p.isNoDocument()&&p.version.isEqual(It.min())?(t.removeEntry(m,p.readTime),c=c.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p),c=c.insert(m,p)):st(Ay,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function Z2(r,t){const e=Et(r);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=wa),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function Jf(r,t){const e=Et(r);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return e.li.getTargetData(i,t).next((l=>l?(a=l,B.resolve(a)):e.li.allocateTargetId(i).next((c=>(a=new Cs(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=e.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.vs=e.vs.insert(i.targetId,i),e.Fs.set(t,i.targetId)),i}))}async function fl(r,t,e){const i=Et(r),a=i.vs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!kr(c))throw c;st(Ay,`Failed to update sequence numbers for target ${t}: ${c}`)}i.vs=i.vs.remove(t),i.Fs.delete(a.target)}function Dg(r,t,e){const i=Et(r);let a=It.min(),l=Ut();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,T){const E=Et(p),S=E.Fs.get(T);return S!==void 0?B.resolve(E.vs.get(S)):E.li.getTargetData(g,T)})(i,c,jn(t)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,m.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,t,e?a:It.min(),e?l:Ut()))).next((m=>(gI(i,TA(t),m),{documents:m,ks:l})))))}function mI(r,t){const e=Et(r),i=Et(e.li),a=e.vs.get(t);return a?Promise.resolve(a.target):e.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,t).next((c=>c?c.target:null))))}function pI(r,t){const e=Et(r),i=e.Ms.get(t)||It.min();return e.persistence.runTransaction("Get new document changes","readonly",(a=>e.xs.getAllFromCollectionGroup(a,t,Ub(i,tl),Number.MAX_SAFE_INTEGER))).then((a=>(gI(e,t,a),a)))}function gI(r,t,e){let i=r.Ms.get(t)||It.min();e.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(t,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firestore_clients";function tS(r,t){return`${yI}_${r}_${t}`}const _I="firestore_mutations";function eS(r,t,e){let i=`${_I}_${r}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}const vI="firestore_targets";function Kp(r,t){return`${vI}_${r}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="SharedClientState";class Zf{constructor(t,e,i,a){this.user=t,this.batchId=e,this.state=i,this.error=a}static $s(t,e,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ct(a.error.code,a.error.message))),c?new Zf(t,e,a.state,l):(Ve(Ji,`Failed to parse mutation state for ID '${e}': ${i}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class nc{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static $s(t,e){const i=JSON.parse(e);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new ct(i.error.code,i.error.message))),l?new nc(t,i.state,a):(Ve(Ji,`Failed to parse target state for ID '${t}': ${e}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Wf{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const i=JSON.parse(e);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=hy();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=Fb(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new Wf(t,l):(Ve(Ji,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Iy{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Iy(e.clientId,e.onlineState):(Ve(Ji,`Failed to parse online state: ${t}`),null)}}class Ng{constructor(){this.activeTargetIds=hy()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Qp{constructor(t,e,i,a,l){this.window=t,this.Ci=e,this.persistenceKey=i,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new de(Nt),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=tS(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Ng),this.eo=new RegExp(`^${yI}_${c}_([^_]*)$`),this.no=new RegExp(`^${_I}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${vI}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.hs();for(const i of t){if(i===this.zs)continue;const a=this.getItem(tS(this.persistenceKey,i));if(a){const l=Wf.$s(i,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const e=this.storage.getItem(this.io);if(e){const i=this._o(e);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ys,JSON.stringify(t))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(t){let e=!1;return this.Js.forEach(((i,a)=>{a.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.co(t,"pending")}updateMutationState(t,e,i){this.co(t,e,i),this.lo(t)}addLocalQueryTarget(t,e=!0){let i="not-current";if(this.isActiveQueryTarget(t)){const a=this.storage.getItem(Kp(this.persistenceKey,t));if(a){const l=nc.$s(t,a);l&&(i=l.state)}}return e&&this.ho.Qs(t),this.oo(),i}removeLocalQueryTarget(t){this.ho.Gs(t),this.oo()}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Kp(this.persistenceKey,t))}updateQueryState(t,e,i){this.Po(t,e,i)}handleUserChange(t,e,i){e.forEach((a=>{this.lo(a)})),this.currentUser=t,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(t){this.To(t)}notifyBundleLoaded(t){this.Io(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return st(Ji,"READ",t,e),e}setItem(t,e){st(Ji,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){st(Ji,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const e=t;if(e.storageArea===this.storage){if(st(Ji,"EVENT",e.key,e.newValue),e.key===this.Xs)return void Ve("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.eo.test(e.key)){if(e.newValue==null){const i=this.Eo(e.key);return this.Ro(i,null)}{const i=this.Ao(e.key,e.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(e.key)){if(e.newValue!==null){const i=this.Vo(e.key,e.newValue);if(i)return this.mo(i)}}else if(this.ro.test(e.key)){if(e.newValue!==null){const i=this.fo(e.key,e.newValue);if(i)return this.po(i)}}else if(e.key===this.io){if(e.newValue!==null){const i=this._o(e.newValue);if(i)return this.ao(i)}}else if(e.key===this.Ys){const i=(function(l){let c=Rn.ce;if(l!=null)try{const m=JSON.parse(l);bt(typeof m=="number",30636,{yo:l}),c=m}catch(m){Ve(Ji,"Failed to read sequence number from WebStorage",m)}return c})(e.newValue);i!==Rn.ce&&this.sequenceNumberHandler(i)}else if(e.key===this.so){const i=this.wo(e.newValue);await Promise.all(i.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(e)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(t,e,i){const a=new Zf(this.currentUser,t,e,i),l=eS(this.persistenceKey,this.currentUser,t);this.setItem(l,a.Ws())}lo(t){const e=eS(this.persistenceKey,this.currentUser,t);this.removeItem(e)}To(t){const e={clientId:this.zs,onlineState:t};this.storage.setItem(this.io,JSON.stringify(e))}Po(t,e,i){const a=Kp(this.persistenceKey,t),l=new nc(t,e,i);this.setItem(a,l.Ws())}Io(t){const e=JSON.stringify(Array.from(t));this.setItem(this.so,e)}Eo(t){const e=this.eo.exec(t);return e?e[1]:null}Ao(t,e){const i=this.Eo(t);return Wf.$s(i,e)}Vo(t,e){const i=this.no.exec(t),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return Zf.$s(new fn(l),a,e)}fo(t,e){const i=this.ro.exec(t),a=Number(i[1]);return nc.$s(a,e)}_o(t){return Iy.$s(t)}wo(t){return JSON.parse(t)}async mo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.So(t.batchId,t.state,t.error);st(Ji,`Ignoring mutation for non-active user ${t.user.uid}`)}po(t){return this.syncEngine.Do(t.targetId,t.state,t.error)}Ro(t,e){const i=e?this.Js.insert(t,e):this.Js.remove(t),a=this.uo(this.Js),l=this.uo(i),c=[],m=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||m.push(p)})),this.syncEngine.Co(c,m).then((()=>{this.Js=i}))}ao(t){this.Js.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}uo(t){let e=hy();return t.forEach(((i,a)=>{e=e.unionWith(a.activeTargetIds)})),e}}class TI{constructor(){this.vo=new Ng,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,i){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new Ng,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="ConnectivityMonitor";class iS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){st(nS,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){st(nS,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf=null;function xg(){return mf===null?mf=(function(){return 268435456+Math.round(2147483648*Math.random())})():mf++,"0x"+mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="RestConnection",tV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class eV{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===qf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(t,e,i,a,l){const c=xg(),m=this.Qo(t,e.toUriEncodedString());st(Yp,`Sending RPC '${t}' ${c}:`,m,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(m),T=vl(g);return this.zo(t,m,p,i,T).then((E=>(st(Yp,`Received RPC '${t}' ${c}: `,E),E)),(E=>{throw Zo(Yp,`RPC '${t}' ${c} failed with error: `,E,"url: ",m,"request:",i),E}))}jo(t,e,i,a,l,c){return this.Wo(t,e,i,a,l)}Go(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((a,l)=>t[l]=a)),i&&i.headers.forEach(((a,l)=>t[l]=a))}Qo(t,e){const i=tV[t];let a=`${this.qo}/v1/${e}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection",Pu=(r,t,e)=>{r.listen(t,(i=>{try{e(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Qo extends eV{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Qo.c_){const t=Vb();Pu(t,xb.STAT_EVENT,(e=>{e.stat===lg.PROXY?st(hn,"STAT_EVENT: detected buffering proxy"):e.stat===lg.NOPROXY&&st(hn,"STAT_EVENT: detected no buffering proxy")})),Qo.c_=!0}}zo(t,e,i,a,l){const c=xg();return new Promise(((m,p)=>{const g=new Db;g.setWithCredentials(!0),g.listenOnce(Nb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case vf.NO_ERROR:const E=g.getResponseJson();st(hn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),m(E);break;case vf.TIMEOUT:st(hn,`RPC '${t}' ${c} timed out`),p(new ct(Z.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const S=g.getStatus();if(st(hn,`RPC '${t}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const C=(function($){const at=$.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(at)>=0?at:Z.UNKNOWN})(V.status);p(new ct(C,V.message))}else p(new ct(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ct(Z.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{st(hn,`RPC '${t}' ${c} completed.`)}}));const T=JSON.stringify(a);st(hn,`RPC '${t}' ${c} sending request:`,a),g.send(e,"POST",T,i,15)}))}T_(t,e,i){const a=xg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const g=l.join("");st(hn,`Creating RPC '${t}' stream ${a}: ${g}`,m);const T=c.createWebChannel(g,m);this.I_(T);let E=!1,S=!1;const R=new nV({Ho:V=>{S?st(hn,`Not sending because RPC '${t}' stream ${a} is closed:`,V):(E||(st(hn,`Opening RPC '${t}' stream ${a} transport.`),T.open(),E=!0),st(hn,`RPC '${t}' stream ${a} sending:`,V),T.send(V))},Jo:()=>T.close()});return Pu(T,ju.EventType.OPEN,(()=>{S||(st(hn,`RPC '${t}' stream ${a} transport opened.`),R.i_())})),Pu(T,ju.EventType.CLOSE,(()=>{S||(S=!0,st(hn,`RPC '${t}' stream ${a} transport closed`),R.o_(),this.E_(T))})),Pu(T,ju.EventType.ERROR,(V=>{S||(S=!0,Zo(hn,`RPC '${t}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),R.o_(new ct(Z.UNAVAILABLE,"The operation could not be completed")))})),Pu(T,ju.EventType.MESSAGE,(V=>{var C;if(!S){const z=V.data[0];bt(!!z,16349);const $=z,at=($==null?void 0:$.error)||((C=$[0])==null?void 0:C.error);if(at){st(hn,`RPC '${t}' stream ${a} received error:`,at);const rt=at.status;let gt=(function(D){const A=Fe[D];if(A!==void 0)return MA(A)})(rt),vt=at.message;rt==="NOT_FOUND"&&vt.includes("database")&&vt.includes("does not exist")&&vt.includes(this.databaseId.database)&&Zo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),gt===void 0&&(gt=Z.INTERNAL,vt="Unknown error status: "+rt+" with message "+at.message),S=!0,R.o_(new ct(gt,vt)),T.close()}else st(hn,`RPC '${t}' stream ${a} received:`,z),R.__(z)}})),Qo.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,i){super.Go(t,e,i),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Mb()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(r){return new Qo(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return typeof window<"u"?window:null}function Df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(r){return new u2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo.c_=!1;class SI{constructor(t,e,i=1e3,a=1.5,l=6e4){this.Ci=t,this.timerId=e,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const e=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-i);a>0&&st("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="PersistentStream";class bI{constructor(t,e,i,a,l,c,m,p){this.Ci=t,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SI(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===Z.RESOURCE_EXHAUSTED?(Ve(e.toString()),Ve("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===e&&this.G_(i,a)}),(i=>{t((()=>{const a=new ct(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(t,e){const i=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(sS,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(st(sS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sV extends bI{constructor(t,e,i,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=f2(this.serializer,t),i=(function(l){if(!("targetChange"in l))return It.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?It.min():c.readTime?vn(c.readTime):It.min()})(t);return this.listener.J_(e,i)}Z_(t){const e={};e.database=Ag(this.serializer),e.addTarget=(function(l,c){let m;const p=c.target;if(m=Ff(p)?{documents:BA(l,p)}:{query:qA(l,p).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=kA(l,c.resumeToken);const g=Sg(l,c.expectedCount);g!==null&&(m.expectedCount=g)}else if(c.snapshotVersion.compareTo(It.min())>0){m.readTime=hl(l,c.snapshotVersion.toTimestamp());const g=Sg(l,c.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,t);const i=m2(this.serializer,t);i&&(e.labels=i),this.K_(e)}X_(t){const e={};e.database=Ag(this.serializer),e.removeTarget=t,this.K_(e)}}class rV extends bI{constructor(t,e,i,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}H_(t){return bt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,bt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){bt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=d2(t.writeResults,t.commitTime),i=vn(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=Ag(this.serializer),this.K_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>Kf(this.serializer,i)))};this.K_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{}class oV extends aV{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ct(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(t,bg(e,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ct(Z.UNKNOWN,l.toString())}))}jo(t,e,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.jo(t,bg(e,i),a,c,m,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ct(Z.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function lV(r,t,e,i){return new oV(r,t,e,i)}class uV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ve(e),this.aa=!1):st("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="RemoteStore";class cV{constructor(t,e,i,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{qa(this)&&(st(ja,"Restarting streams for network reachability change."),await(async function(p){const g=Et(p);g.Ea.add(4),await Vc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Id(g)})(this))}))})),this.Va=new uV(i,a)}}async function Id(r){if(qa(r))for(const t of r.Ra)await t(!0)}async function Vc(r){for(const t of r.Ra)await t(!1)}function wd(r,t){const e=Et(r);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Cy(e)?Ry(e):wl(e).O_()&&wy(e,t))}function dl(r,t){const e=Et(r),i=wl(e);e.Ia.delete(t),i.O_()&&AI(e,t),e.Ia.size===0&&(i.O_()?i.L_():qa(e)&&e.Va.set("Unknown"))}function wy(r,t){if(r.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(It.min())>0){const e=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}wl(r).Z_(t)}function AI(r,t){r.da.$e(t),wl(r).X_(t)}function Ry(r){r.da=new r2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),wl(r).start(),r.Va.ua()}function Cy(r){return qa(r)&&!wl(r).x_()&&r.Ia.size>0}function qa(r){return Et(r).Ea.size===0}function II(r){r.da=void 0}async function hV(r){r.Va.set("Online")}async function fV(r){r.Ia.forEach(((t,e)=>{wy(r,t)}))}async function dV(r,t){II(r),Cy(r)?(r.Va.ha(t),Ry(r)):r.Va.set("Unknown")}async function mV(r,t,e){if(r.Va.set("Online"),t instanceof PA&&t.state===2&&t.cause)try{await(async function(a,l){const c=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,c),a.Ia.delete(m),a.da.removeTarget(m))})(r,t)}catch(i){st(ja,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await td(r,i)}else if(t instanceof Rf?r.da.Xe(t):t instanceof OA?r.da.st(t):r.da.tt(t),!e.isEqual(It.min()))try{const i=await dI(r.localStore);e.compareTo(i)>=0&&await(function(l,c){const m=l.da.Tt(c);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const T=l.Ia.get(g);T&&l.Ia.set(g,T.withResumeToken(p.resumeToken,c))}})),m.targetMismatches.forEach(((p,g)=>{const T=l.Ia.get(p);if(!T)return;l.Ia.set(p,T.withResumeToken(Oe.EMPTY_BYTE_STRING,T.snapshotVersion)),AI(l,p);const E=new Cs(T.target,p,g,T.sequenceNumber);wy(l,E)})),l.remoteSyncer.applyRemoteEvent(m)})(r,e)}catch(i){st(ja,"Failed to raise snapshot:",i),await td(r,i)}}async function td(r,t,e){if(!kr(t))throw t;r.Ea.add(1),await Vc(r),r.Va.set("Offline"),e||(e=()=>dI(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{st(ja,"Retrying IndexedDB access"),await e(),r.Ea.delete(1),await Id(r)}))}function wI(r,t){return t().catch((e=>td(r,e,t)))}async function Il(r){const t=Et(r),e=Mr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:wa;for(;pV(t);)try{const a=await Z2(t.localStore,i);if(a===null){t.Ta.length===0&&e.L_();break}i=a.batchId,gV(t,a)}catch(a){await td(t,a)}RI(t)&&CI(t)}function pV(r){return qa(r)&&r.Ta.length<10}function gV(r,t){r.Ta.push(t);const e=Mr(r);e.O_()&&e.Y_&&e.ea(t.mutations)}function RI(r){return qa(r)&&!Mr(r).x_()&&r.Ta.length>0}function CI(r){Mr(r).start()}async function yV(r){Mr(r).ra()}async function _V(r){const t=Mr(r);for(const e of r.Ta)t.ea(e.mutations)}async function vV(r,t,e){const i=r.Ta.shift(),a=my.from(i,t,e);await wI(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Il(r)}async function TV(r,t){t&&Mr(r).Y_&&await(async function(i,a){if((function(c){return n2(c)&&c!==Z.ABORTED})(a.code)){const l=i.Ta.shift();Mr(i).B_(),await wI(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Il(i)}})(r,t),RI(r)&&CI(r)}async function rS(r,t){const e=Et(r);e.asyncQueue.verifyOperationInProgress(),st(ja,"RemoteStore received new credentials");const i=qa(e);e.Ea.add(3),await Vc(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Id(e)}async function Vg(r,t){const e=Et(r);t?(e.Ea.delete(2),await Id(e)):t||(e.Ea.add(2),await Vc(e),e.Va.set("Unknown"))}function wl(r){return r.ma||(r.ma=(function(e,i,a){const l=Et(e);return l.sa(),new sV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:hV.bind(null,r),Yo:fV.bind(null,r),t_:dV.bind(null,r),J_:mV.bind(null,r)}),r.Ra.push((async t=>{t?(r.ma.B_(),Cy(r)?Ry(r):r.Va.set("Unknown")):(await r.ma.stop(),II(r))}))),r.ma}function Mr(r){return r.fa||(r.fa=(function(e,i,a){const l=Et(e);return l.sa(),new rV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:yV.bind(null,r),t_:TV.bind(null,r),ta:_V.bind(null,r),na:vV.bind(null,r)}),r.Ra.push((async t=>{t?(r.fa.B_(),await Il(r)):(await r.fa.stop(),r.Ta.length>0&&(st(ja,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t,e,i,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,l){const c=Date.now()+i,m=new Dy(t,e,c,a,l);return m.start(i),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ny(r,t){if(Ve("AsyncQueue",`${t}: ${r}`),kr(r))return new ct(Z.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{static emptySet(t){return new Yo(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||dt.comparator(e.key,i.key):(e,i)=>dt.comparator(e.key,i.key),this.keyedMap=Bu(),this.sortedSet=new de(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Yo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Yo;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.ga=new de(dt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):yt(63341,{Vt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class ml{constructor(t,e,i,a,l,c,m,p,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,a,l){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new ml(t,e,Yo.emptySet(e),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_d(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class SV{constructor(){this.queries=oS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const a=Et(e),l=a.queries;a.queries=oS(),l.forEach(((c,m)=>{for(const p of m.ba)p.onError(i)}))})(this,new ct(Z.ABORTED,"Firestore shutting down"))}}function oS(){return new Ps((r=>vA(r)),_d)}async function bV(r,t){const e=Et(r);let i=3;const a=t.query;let l=e.queries.get(a);l?!l.Sa()&&t.Da()&&(i=2):(l=new EV,i=t.Da()?0:1);try{switch(i){case 0:l.wa=await e.onListen(a,!0);break;case 1:l.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const m=Ny(c,`Initialization of query '${jo(t.query)}' failed`);return void t.onError(m)}e.queries.set(a,l),l.ba.push(t),t.va(e.onlineState),l.wa&&t.Fa(l.wa)&&xy(e)}async function AV(r,t){const e=Et(r),i=t.query;let a=3;const l=e.queries.get(i);if(l){const c=l.ba.indexOf(t);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=t.Da()?0:1:!l.Sa()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function IV(r,t){const e=Et(r);let i=!1;for(const a of t){const l=a.query,c=e.queries.get(l);if(c){for(const m of c.ba)m.Fa(a)&&(i=!0);c.wa=a}}i&&xy(e)}function wV(r,t,e){const i=Et(r),a=i.queries.get(t);if(a)for(const l of a.ba)l.onError(e);i.queries.delete(t)}function xy(r){r.Ca.forEach((t=>{t.next()}))}var Mg,lS;(lS=Mg||(Mg={})).Ma="default",lS.Cache="cache";class RV{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new ml(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.Ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=ml.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t){this.key=t}}class NI{constructor(t){this.key=t}}class CV{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ut(),this.mutatedKeys=Ut(),this.eu=EA(t),this.tu=new Yo(this.eu)}get nu(){return this.Za}ru(t,e){const i=e?e.iu:new aS,a=e?e.tu:this.tu;let l=e?e.mutatedKeys:this.mutatedKeys,c=a,m=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((T,E)=>{const S=a.get(T),R=Cc(this.query,E)?E:null,V=!!S&&this.mutatedKeys.has(S.key),C=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let z=!1;S&&R?S.data.isEqual(R.data)?V!==C&&(i.track({type:3,doc:R}),z=!0):this.su(S,R)||(i.track({type:2,doc:R}),z=!0,(p&&this.eu(R,p)>0||g&&this.eu(R,g)<0)&&(m=!0)):!S&&R?(i.track({type:0,doc:R}),z=!0):S&&!R&&(i.track({type:1,doc:S}),z=!0,(p||g)&&(m=!0)),z&&(R?(c=c.add(R),l=C?l.add(T):l.delete(T)):(c=c.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),l=l.delete(T.key),i.track({type:1,doc:T})}return{tu:c,iu:i,Ss:m,mutatedKeys:l}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const l=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((T,E)=>(function(R,V){const C=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Vt:z})}};return C(R)-C(V)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(i),a=a??!1;const m=e&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new ml(this.query,t.tu,l,c,t.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Ut(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const e=[];return t.forEach((i=>{this.Ya.has(i)||e.push(new NI(i))})),this.Ya.forEach((i=>{t.has(i)||e.push(new DI(i))})),e}cu(t){this.Za=t.ks,this.Ya=Ut();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Rl="SyncEngine";class DV{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class NV{constructor(t){this.key=t,this.hu=!1}}class xV{constructor(t,e,i,a,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ps((m=>vA(m)),_d),this.Iu=new Map,this.Eu=new Set,this.Ru=new de(dt.comparator),this.Au=new Map,this.Vu=new Ty,this.du={},this.mu=new Map,this.fu=za.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VV(r,t,e=!0){const i=Rd(r);let a;const l=i.Tu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await xI(i,t,e,!0),a}async function MV(r,t){const e=Rd(r);await xI(e,t,!0,!1)}async function xI(r,t,e,i){const a=await Jf(r.localStore,jn(t)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,e);let m;return i&&(m=await Vy(r,t,l,c==="current",a.resumeToken)),r.isPrimaryClient&&e&&wd(r.remoteStore,a),m}async function Vy(r,t,e,i,a){r.pu=(E,S,R)=>(async function(C,z,$,at){let rt=z.view.ru($);rt.Ss&&(rt=await Dg(C.localStore,z.query,!1).then((({documents:D})=>z.view.ru(D,rt))));const gt=at&&at.targetChanges.get(z.targetId),vt=at&&at.targetMismatches.get(z.targetId)!=null,ht=z.view.applyChanges(rt,C.isPrimaryClient,gt,vt);return Og(C,z.targetId,ht.au),ht.snapshot})(r,E,S,R);const l=await Dg(r.localStore,t,!0),c=new CV(t,l.ks),m=c.ru(l.documents),p=xc.createSynthesizedTargetChangeForCurrentChange(e,i&&r.onlineState!=="Offline",a),g=c.applyChanges(m,r.isPrimaryClient,p);Og(r,e,g.au);const T=new DV(t,e,c);return r.Tu.set(t,T),r.Iu.has(e)?r.Iu.get(e).push(t):r.Iu.set(e,[t]),g.snapshot}async function OV(r,t,e){const i=Et(r),a=i.Tu.get(t),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!_d(c,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await fl(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),e&&dl(i.remoteStore,a.targetId),pl(i,a.targetId)})).catch(Pr)):(pl(i,a.targetId),await fl(i.localStore,a.targetId,!0))}async function PV(r,t){const e=Et(r),i=e.Tu.get(t),a=e.Iu.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),dl(e.remoteStore,i.targetId))}async function kV(r,t,e){const i=ky(r);try{const a=await(function(c,m){const p=Et(c),g=re.now(),T=m.reduce(((R,V)=>R.add(V.key)),Ut());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let V=zn(),C=Ut();return p.xs.getEntries(R,T).next((z=>{V=z,V.forEach((($,at)=>{at.isValidDocument()||(C=C.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,V))).next((z=>{E=z;const $=[];for(const at of m){const rt=t2(at,E.get(at.key).overlayedDocument);rt!=null&&$.push(new ks(at.key,rt,uA(rt.value.mapValue),tn.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,$,m)})).next((z=>{S=z;const $=z.applyToLocalDocumentSet(E,C);return p.documentOverlayCache.saveOverlays(R,z.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:bA(E)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),(function(c,m,p){let g=c.du[c.currentUser.toKey()];g||(g=new de(Nt)),g=g.insert(m,p),c.du[c.currentUser.toKey()]=g})(i,a.batchId,e),await Ur(i,a.changes),await Il(i.remoteStore)}catch(a){const l=Ny(a,"Failed to persist write");e.reject(l)}}async function VI(r,t){const e=Et(r);try{const i=await X2(e.localStore,t);t.targetChanges.forEach(((a,l)=>{const c=e.Au.get(l);c&&(bt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?bt(c.hu,14607):a.removedDocuments.size>0&&(bt(c.hu,42227),c.hu=!1))})),await Ur(e,i,t)}catch(i){await Pr(i)}}function uS(r,t,e){const i=Et(r);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Tu.forEach(((l,c)=>{const m=c.view.va(t);m.snapshot&&a.push(m.snapshot)})),(function(c,m){const p=Et(c);p.onlineState=m;let g=!1;p.queries.forEach(((T,E)=>{for(const S of E.ba)S.va(m)&&(g=!0)})),g&&xy(p)})(i.eventManager,t),a.length&&i.Pu.J_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function LV(r,t,e){const i=Et(r);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Au.get(t),l=a&&a.key;if(l){let c=new de(dt.comparator);c=c.insert(l,we.newNoDocument(l,It.min()));const m=Ut().add(l),p=new Nc(It.min(),new Map,new de(Nt),c,m);await VI(i,p),i.Ru=i.Ru.remove(l),i.Au.delete(t),Py(i)}else await fl(i.localStore,t,!1).then((()=>pl(i,t,e))).catch(Pr)}async function UV(r,t){const e=Et(r),i=t.batch.batchId;try{const a=await $2(e.localStore,t);Oy(e,i,null),My(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Ur(e,a)}catch(a){await Pr(a)}}async function zV(r,t,e){const i=Et(r);try{const a=await(function(c,m){const p=Et(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let T;return p.mutationQueue.lookupMutationBatch(g,m).next((E=>(bt(E!==null,37113),T=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,T,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T))).next((()=>p.localDocuments.getDocuments(g,T)))}))})(i.localStore,t);Oy(i,t,e),My(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Ur(i,a)}catch(a){await Pr(a)}}function My(r,t){(r.mu.get(t)||[]).forEach((e=>{e.resolve()})),r.mu.delete(t)}function Oy(r,t,e){const i=Et(r);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),i.du[i.currentUser.toKey()]=a}}function pl(r,t,e=null){r.sharedClientState.removeLocalQueryTarget(t);for(const i of r.Iu.get(t))r.Tu.delete(i),e&&r.Pu.yu(i,e);r.Iu.delete(t),r.isPrimaryClient&&r.Vu.Gr(t).forEach((i=>{r.Vu.containsKey(i)||MI(r,i)}))}function MI(r,t){r.Eu.delete(t.path.canonicalString());const e=r.Ru.get(t);e!==null&&(dl(r.remoteStore,e),r.Ru=r.Ru.remove(t),r.Au.delete(e),Py(r))}function Og(r,t,e){for(const i of e)i instanceof DI?(r.Vu.addReference(i.key,t),jV(r,i)):i instanceof NI?(st(Rl,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,t),r.Vu.containsKey(i.key)||MI(r,i.key)):yt(19791,{wu:i})}function jV(r,t){const e=t.key,i=e.path.canonicalString();r.Ru.get(e)||r.Eu.has(i)||(st(Rl,"New document in limbo: "+e),r.Eu.add(i),Py(r))}function Py(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const e=new dt(ee.fromString(t)),i=r.fu.next();r.Au.set(i,new NV(e)),r.Ru=r.Ru.insert(e,i),wd(r.remoteStore,new Cs(jn(yd(e.path)),i,"TargetPurposeLimboResolution",Rn.ce))}}async function Ur(r,t,e){const i=Et(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,p)=>{c.push(i.pu(p,t,e).then((g=>{var T;if((g||e)&&i.isPrimaryClient){const E=g?!g.fromCache:(T=e==null?void 0:e.targetChanges.get(p.targetId))==null?void 0:T.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){a.push(g);const E=by.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(p,g){const T=Et(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>B.forEach(g,(S=>B.forEach(S.Ts,(R=>T.persistence.referenceDelegate.addReference(E,S.targetId,R))).next((()=>B.forEach(S.Is,(R=>T.persistence.referenceDelegate.removeReference(E,S.targetId,R)))))))))}catch(E){if(!kr(E))throw E;st(Ay,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const R=T.vs.get(S),V=R.snapshotVersion,C=R.withLastLimboFreeSnapshotVersion(V);T.vs=T.vs.insert(S,C)}}})(i.localStore,l))}async function BV(r,t){const e=Et(r);if(!e.currentUser.isEqual(t)){st(Rl,"User change. New user:",t.toKey());const i=await fI(e.localStore,t);e.currentUser=t,(function(l,c){l.mu.forEach((m=>{m.forEach((p=>{p.reject(new ct(Z.CANCELLED,c))}))})),l.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Ur(e,i.Ns)}}function qV(r,t){const e=Et(r),i=e.Au.get(t);if(i&&i.hu)return Ut().add(i.key);{let a=Ut();const l=e.Iu.get(t);if(!l)return a;for(const c of l){const m=e.Tu.get(c);a=a.unionWith(m.view.nu)}return a}}async function FV(r,t){const e=Et(r),i=await Dg(e.localStore,t.query,!0),a=t.view.cu(i);return e.isPrimaryClient&&Og(e,t.targetId,a.au),a}async function HV(r,t){const e=Et(r);return pI(e.localStore,t).then((i=>Ur(e,i)))}async function GV(r,t,e,i){const a=Et(r),l=await(function(m,p){const g=Et(m),T=Et(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(E=>T.Xn(E,p).next((S=>S?g.localDocuments.getDocuments(E,S):B.resolve(null)))))})(a.localStore,t);l!==null?(e==="pending"?await Il(a.remoteStore):e==="acknowledged"||e==="rejected"?(Oy(a,t,i||null),My(a,t),(function(m,p){Et(Et(m).mutationQueue).nr(p)})(a.localStore,t)):yt(6720,"Unknown batchState",{bu:e}),await Ur(a,l)):st(Rl,"Cannot apply mutation batch with id: "+t)}async function KV(r,t){const e=Et(r);if(Rd(e),ky(e),t===!0&&e.gu!==!0){const i=e.sharedClientState.getAllActiveQueryTargets(),a=await cS(e,i.toArray());e.gu=!0,await Vg(e.remoteStore,!0);for(const l of a)wd(e.remoteStore,l)}else if(t===!1&&e.gu!==!1){const i=[];let a=Promise.resolve();e.Iu.forEach(((l,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(pl(e,c),fl(e.localStore,c,!0)))),dl(e.remoteStore,c)})),await a,await cS(e,i),(function(c){const m=Et(c);m.Au.forEach(((p,g)=>{dl(m.remoteStore,g)})),m.Vu.zr(),m.Au=new Map,m.Ru=new de(dt.comparator)})(e),e.gu=!1,await Vg(e.remoteStore,!1)}}async function cS(r,t,e){const i=Et(r),a=[],l=[];for(const c of t){let m;const p=i.Iu.get(c);if(p&&p.length!==0){m=await Jf(i.localStore,jn(p[0]));for(const g of p){const T=i.Tu.get(g),E=await FV(i,T);E.snapshot&&l.push(E.snapshot)}}else{const g=await mI(i.localStore,c);m=await Jf(i.localStore,g),await Vy(i,OI(g),c,!1,m.resumeToken)}a.push(m)}return i.Pu.J_(l),a}function OI(r){return yA(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function QV(r){return(function(e){return Et(Et(e).persistence).hs()})(Et(r).localStore)}async function YV(r,t,e,i){const a=Et(r);if(a.gu)return void st(Rl,"Ignoring unexpected query state notification.");const l=a.Iu.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const c=await pI(a.localStore,TA(l[0])),m=Nc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Oe.EMPTY_BYTE_STRING);await Ur(a,c,m);break}case"rejected":await fl(a.localStore,t,!0),pl(a,t,i);break;default:yt(64155,e)}}async function $V(r,t,e){const i=Rd(r);if(i.gu){for(const a of t){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){st(Rl,"Adding an already active target "+a);continue}const l=await mI(i.localStore,a),c=await Jf(i.localStore,l);await Vy(i,OI(l),c.targetId,!1,c.resumeToken),wd(i.remoteStore,c)}for(const a of e)i.Iu.has(a)&&await fl(i.localStore,a,!1).then((()=>{dl(i.remoteStore,a),pl(i,a)})).catch(Pr)}}function Rd(r){const t=Et(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=VI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=LV.bind(null,t),t.Pu.J_=IV.bind(null,t.eventManager),t.Pu.yu=wV.bind(null,t.eventManager),t}function ky(r){const t=Et(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zV.bind(null,t),t}class _c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ad(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return hI(this.persistence,new cI,t.initialUser,this.serializer)}Cu(t){return new Ey(bd.Vi,this.serializer)}Du(t){return new TI}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_c.provider={build:()=>new _c};class XV extends _c{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){bt(this.persistence.referenceDelegate instanceof Xf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new sI(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Ey((i=>Xf.Vi(i,e)),this.serializer)}}class PI extends _c{constructor(t,e,i){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await ky(this.xu.syncEngine),await Il(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return hI(this.persistence,new cI,t.initialUser,this.serializer)}Fu(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new sI(i,t.asyncQueue,e)}Mu(t,e){const i=new WN(e,this.persistence);return new ZN(t.asyncQueue,i)}Cu(t){const e=uI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Sy(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,EI(),Df(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new TI}}class JV extends PI{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof Qp&&(this.sharedClientState.syncEngine={So:GV.bind(null,e),Do:YV.bind(null,e),Co:$V.bind(null,e),hs:QV.bind(null,e),bo:HV.bind(null,e)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await KV(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(t){const e=EI();if(!Qp.v(e))throw new ct(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=uI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Qp(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class vc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BV.bind(null,this.syncEngine),await Vg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new SV})()}createDatastore(t){const e=Ad(t.databaseInfo.databaseId),i=iV(t.databaseInfo);return lV(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,a,l,c,m){return new cV(i,a,l,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>uS(this.syncEngine,e,0)),(function(){return iS.v()?new iS:new W2})())}createSyncEngine(t,e){return(function(a,l,c,m,p,g,T){const E=new xV(a,l,c,m,p,g);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(a){const l=Et(a);st(ja,"RemoteStore shutting down."),l.Ea.add(5),await Vc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}vc.provider={build:()=>new vc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ve("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class WV{constructor(t,e,i,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this._databaseInfo=a,this.user=fn.UNAUTHENTICATED,this.clientId=ty.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{st(Or,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(st(Or,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Ny(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function $p(r,t){r.asyncQueue.verifyOperationInProgress(),st(Or,"Initializing OfflineComponentProvider");const e=r.configuration;await t.initialize(e);let i=e.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await fI(t.localStore,a),i=a)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function hS(r,t){r.asyncQueue.verifyOperationInProgress();const e=await tM(r);st(Or,"Initializing OnlineComponentProvider"),await t.initialize(e,r.configuration),r.setCredentialChangeListener((i=>rS(t.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>rS(t.remoteStore,a))),r._onlineComponents=t}async function tM(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(Or,"Using user provided OfflineComponentProvider");try{await $p(r,r._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(e))throw e;Zo("Error using user provided cache. Falling back to memory cache: "+e),await $p(r,new _c)}}else st(Or,"Using default OfflineComponentProvider"),await $p(r,new XV(void 0));return r._offlineComponents}async function kI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(Or,"Using user provided OnlineComponentProvider"),await hS(r,r._uninitializedComponentsProvider._online)):(st(Or,"Using default OnlineComponentProvider"),await hS(r,new vc))),r._onlineComponents}function eM(r){return kI(r).then((t=>t.syncEngine))}async function fS(r){const t=await kI(r),e=t.eventManager;return e.onListen=VV.bind(null,t.syncEngine),e.onUnlisten=OV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=MV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=PV.bind(null,t.syncEngine),e}function nM(r,t,e,i){const a=new ZV(i),l=new RV(t,a,e);return r.asyncQueue.enqueueAndForget((async()=>bV(await fS(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>AV(await fS(r),l)))}}function iM(r,t){const e=new Cr;return r.asyncQueue.enqueueAndForget((async()=>kV(await eM(r),t,e))),e.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM="ComponentProvider",dS=new Map;function rM(r,t,e,i,a){return new Rx(r,t,e,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,LI(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="firestore.googleapis.com",mS=!0;class pS{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ct(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aM,this.ssl=mS}else this.host=t.host,this.ssl=t.ssl??mS;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=WA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iI)throw new ct(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$N("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LI(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ct(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ct(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ct(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ly{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ct(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pS(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new jN;switch(i.type){case"firstParty":return new FN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ct(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=dS.get(e);i&&(st(sM,"Removing Datastore"),dS.delete(e),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Fa(this.firestore,t,this._query)}}class Me{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Me(this.firestore,t,this._key)}toJSON(){return{type:Me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Ic(e,Me._jsonSchema))return new Me(t,i||null,new dt(ee.fromString(e.referencePath)))}}Me._jsonSchemaVersion="firestore/documentReference/1.0",Me._jsonSchema={type:Ge("string",Me._jsonSchemaVersion),referencePath:Ge("string")};class Nr extends Fa{constructor(t,e,i){super(t,e,yd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Me(this.firestore,null,new dt(t))}withConverter(t){return new Nr(this.firestore,t,this._path)}}function UI(r,t,...e){if(r=Ke(r),kb("collection","path",t),r instanceof Ly){const i=ee.fromString(t,...e);return s0(i),new Nr(r,null,i)}{if(!(r instanceof Me||r instanceof Nr))throw new ct(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ee.fromString(t,...e));return s0(i),new Nr(r.firestore,null,i)}}function _n(r,t,...e){if(r=Ke(r),arguments.length===1&&(t=ty.newId()),kb("doc","path",t),r instanceof Ly){const i=ee.fromString(t,...e);return i0(i),new Me(r,null,new dt(i))}{if(!(r instanceof Me||r instanceof Nr))throw new ct(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ee.fromString(t,...e));return i0(i),new Me(r.firestore,r instanceof Nr?r.converter:null,new dt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="AsyncQueue";class yS{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SI(this,"async_queue_retry"),this._c=()=>{const i=Df();i&&st(gS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=Df();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Df();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Cr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!kr(t))throw t;st(gS,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Ve("INTERNAL UNHANDLED ERROR: ",_S(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=Dy.createAndSchedule(this,t,e,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&yt(47125,{Pc:_S(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function _S(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class Ba extends Ly{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new yS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new yS(t),this._firestoreClient=void 0,await t}}}function oM(r,t,e){e||(e=qf);const i=qg(r,"firestore");if(i.isInitialized(e)){const a=i.getImmediate({identifier:e}),l=i.getOptions(e);if(xa(l,t))return a;throw new ct(Z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new ct(Z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iI)throw new ct(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&vl(t.host)&&qS(t.host),i.initialize({options:t,instanceIdentifier:e})}function Uy(r){if(r._terminated)throw new ct(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||lM(r),r._firestoreClient}function lM(r){var i,a,l,c;const t=r._freezeSettings(),e=rM(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,t);r._componentsProvider||(l=t.localCache)!=null&&l._offlineComponentProvider&&((c=t.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new WV(r._authCredentials,r._appCheckCredentials,r._queue,e,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ii(Oe.fromBase64String(t))}catch(e){throw new ct(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ii(Oe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ii._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ic(t,ii._jsonSchema))return ii.fromBase64String(t.bytes)}}ii._jsonSchemaVersion="firestore/bytes/1.0",ii._jsonSchema={type:Ge("string",ii._jsonSchemaVersion),bytes:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ct(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ct(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ct(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(t){if(Ic(t,es._jsonSchema))return new es(t.latitude,t.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:Ge("string",es._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ic(t,Si._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Si(t.vectorValues);throw new ct(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:Ge("string",Si._jsonSchemaVersion),vectorValues:Ge("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=/^__.*__$/;class cM{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new ks(t,this.data,this.fieldMask,e,this.fieldTransforms):new Al(t,this.data,e,this.fieldTransforms)}}class zI{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ks(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function jI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{dataSource:r})}}class jy{constructor(t,e,i,a,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new jy({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var a;const e=(a=this.path)==null?void 0:a.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePathSegment(t),i}childContextForFieldPath(t){var a;const e=(a=this.path)==null?void 0:a.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePath(),i}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return ed(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(jI(this.dataSource)&&uM.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class hM{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Ad(t)}createContext(t,e,i,a=!1){return new jy({dataSource:t,methodName:e,targetDoc:i,path:be.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dd(r){const t=r._freezeSettings(),e=Ad(r._databaseId);return new hM(r._databaseId,!!t.ignoreUndefinedProperties,e)}function BI(r,t,e,i,a,l={}){const c=r.createContext(l.merge||l.mergeFields?2:0,t,e,a);By("Data must be an object, but it was:",c,i);const m=HI(i,c);let p,g;if(l.merge)p=new Cn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const T=[];for(const E of l.mergeFields){const S=gl(t,E,e);if(!c.contains(S))throw new ct(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);QI(T,S)||T.push(S)}p=new Cn(T),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new cM(new mn(m),p,g)}class Nd extends zy{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Nd}}function qI(r,t,e,i){const a=r.createContext(1,t,e);By("Data must be an object, but it was:",a,i);const l=[],c=mn.empty();Lr(i,((p,g)=>{const T=KI(t,p,e);g=Ke(g);const E=a.childContextForFieldPath(T);if(g instanceof Nd)l.push(T);else{const S=Mc(g,E);S!=null&&(l.push(T),c.set(T,S))}}));const m=new Cn(l);return new zI(c,m,a.fieldTransforms)}function FI(r,t,e,i,a,l){const c=r.createContext(1,t,e),m=[gl(t,i,e)],p=[a];if(l.length%2!=0)throw new ct(Z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)m.push(gl(t,l[S])),p.push(l[S+1]);const g=[],T=mn.empty();for(let S=m.length-1;S>=0;--S)if(!QI(g,m[S])){const R=m[S];let V=p[S];V=Ke(V);const C=c.childContextForFieldPath(R);if(V instanceof Nd)g.push(R);else{const z=Mc(V,C);z!=null&&(g.push(R),T.set(R,z))}}const E=new Cn(g);return new zI(T,E,c.fieldTransforms)}function fM(r,t,e,i=!1){return Mc(e,r.createContext(i?4:3,t))}function Mc(r,t){if(GI(r=Ke(r)))return By("Unsupported field value:",t,r),HI(r,t);if(r instanceof zy)return(function(i,a){if(!jI(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const m of i){let p=Mc(m,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,t)}return(function(i,a){if((i=Ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Qx(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=re.fromDate(i);return{timestampValue:hl(a.serializer,l)}}if(i instanceof re){const l=new re(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:hl(a.serializer,l)}}if(i instanceof es)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ii)return{bytesValue:kA(a.serializer,i._byteString)};if(i instanceof Me){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:yy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Si)return(function(c,m){const p=c instanceof Si?c.toArray():c;return{mapValue:{fields:{[ly]:{stringValue:uy},[rl]:{arrayValue:{values:p.map((T=>{if(typeof T!="number")throw m.createError("VectorValues must only contain numeric values.");return fy(m.serializer,T)}))}}}}}})(i,a);if(QA(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${ud(i)}`)})(r,t)}function HI(r,t){const e={};return tA(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Lr(r,((i,a)=>{const l=Mc(a,t.childContextForField(i));l!=null&&(e[i]=l)})),{mapValue:{fields:e}}}function GI(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof re||r instanceof es||r instanceof ii||r instanceof Me||r instanceof zy||r instanceof Si||QA(r))}function By(r,t,e){if(!GI(e)||!Lb(e)){const i=ud(e);throw i==="an object"?t.createError(r+" a custom object"):t.createError(r+" "+i)}}function gl(r,t,e){if((t=Ke(t))instanceof Cd)return t._internalPath;if(typeof t=="string")return KI(r,t);throw ed("Field path arguments must be of type string or ",r,!1,void 0,e)}const dM=new RegExp("[~\\*/\\[\\]]");function KI(r,t,e){if(t.search(dM)>=0)throw ed(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,e);try{return new Cd(...t.split("."))._internalPath}catch{throw ed(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,e)}}function ed(r,t,e,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new ct(Z.INVALID_ARGUMENT,m+r+p)}function QI(r,t){return r.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{convertValue(t,e="none"){switch(xr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Te(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ms(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw yt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Lr(t,((a,l)=>{i[a]=this.convertValue(l,e)})),i}convertVectorValue(t){var i,a,l;const e=(l=(a=(i=t.fields)==null?void 0:i[rl].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Te(c.doubleValue)));return new Si(e)}convertGeoPoint(t){return new es(Te(t.latitude),Te(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=pd(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(hc(t));default:return null}}convertTimestamp(t){const e=Vs(t);return new re(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ee.fromString(t);bt(KA(i),9688,{name:t});const a=new Pa(i.get(1),i.get(3)),l=new dt(i.popFirst(5));return a.isEqual(e)||Ve(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI extends mM{constructor(t){super(),this.firestore=t}convertBytes(t){return new ii(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Me(this.firestore,null,e)}}const vS="@firebase/firestore",TS="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(r){return(function(e,i){if(typeof e!="object"||e===null)return!1;const a=e;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t,e,i,a,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new pM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const e=this._document.data.field(gl("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class pM extends $I{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ct(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qy{}class XI extends qy{}function JI(r,t,...e){let i=[];t instanceof qy&&i.push(t),i=i.concat(e),(function(l){const c=l.filter((p=>p instanceof Hy)).length,m=l.filter((p=>p instanceof Fy)).length;if(c>1||c>0&&m>0)throw new ct(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class Fy extends XI{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new Fy(t,e,i)}_apply(t){const e=this._parse(t);return WI(t._query,e),new Fa(t.firestore,t.converter,Tg(t._query,e))}_parse(t){const e=Dd(t.firestore);return(function(l,c,m,p,g,T,E){let S;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ct(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){bS(E,T);const V=[];for(const C of E)V.push(SS(p,l,C));S={arrayValue:{values:V}}}else S=SS(p,l,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||bS(E,T),S=fM(m,c,E,T==="in"||T==="not-in");return Gt.create(g,T,S)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class Hy extends qy{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Hy(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:ae.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(a,l){let c=a;const m=l.getFlattenedFilters();for(const p of m)WI(c,p),c=Tg(c,p)})(t._query,e),new Fa(t.firestore,t.converter,Tg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gy extends XI{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Gy(t,e)}_apply(t){const e=(function(a,l,c){if(a.startAt!==null)throw new ct(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ct(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(l,c)})(t._query,this._field,this._direction);return new Fa(t.firestore,t.converter,Bx(t._query,e))}}function ZI(r,t="asc"){const e=t,i=gl("orderBy",r);return Gy._create(i,e)}function SS(r,t,e){if(typeof(e=Ke(e))=="string"){if(e==="")throw new ct(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_A(t)&&e.indexOf("/")!==-1)throw new ct(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(ee.fromString(e));if(!dt.isDocumentKey(i))throw new ct(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dc(r,new dt(i))}if(e instanceof Me)return dc(r,e._key);throw new ct(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ud(e)}.`)}function bS(r,t){if(!Array.isArray(r)||r.length===0)throw new ct(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function WI(r,t){const e=(function(a,l){for(const c of a)for(const m of c.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ct(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ct(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function tw(r,t,e){let i;return i=r?e&&(e.merge||e.mergeFields)?r.toFirestore(t,e):r.toFirestore(t):t,i}class yM{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=EM(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function _M(r){return new yM(r)}class vM{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=vc.provider,this._offlineComponentProvider={build:e=>new PI(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class TM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=vc.provider,this._offlineComponentProvider={build:e=>new JV(e,t==null?void 0:t.cacheSizeBytes)}}}function EM(r){return new vM(r==null?void 0:r.forceOwnership)}function SM(){return new TM}class Hu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Da extends $I{constructor(t,e,i,a,l,c){super(t,e,i,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(gl("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Da._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Da._jsonSchemaVersion="firestore/documentSnapshot/1.0",Da._jsonSchema={type:Ge("string",Da._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class Nf extends Da{data(t={}){return super.data(t)}}class $o{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Hu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Nf(this._firestore,this._userDataWriter,i.key,i,new Hu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ct(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((m=>{const p=new Nf(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Hu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const p=new Nf(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Hu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,T=-1;return m.type!==0&&(g=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),T=c.indexOf(m.doc.key)),{type:bM(m.type),doc:p,oldIndex:g,newIndex:T}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$o._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ty.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(e.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function bM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:Ge("string",$o._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Dd(t)}set(t,e,i){this._verifyNotCommitted();const a=Xp(t,this._firestore),l=tw(a.converter,e,i),c=BI(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,tn.none())),this}update(t,e,i,...a){this._verifyNotCommitted();const l=Xp(t,this._firestore);let c;return c=typeof(e=Ke(e))=="string"||e instanceof Cd?FI(this._dataReader,"WriteBatch.update",l._key,e,i,a):qI(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(c.toMutation(l._key,tn.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Xp(t,this._firestore);return this._mutations=this._mutations.concat(new Dc(e._key,tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ct(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xp(r,t){if((r=Ke(r)).firestore!==t)throw new ct(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Pg(r,t,e){r=Ds(r,Me);const i=Ds(r.firestore,Ba),a=tw(r.converter,t,e),l=Dd(i);return xd(i,[BI(l,"setDoc",r._key,a,r.converter!==null,e).toMutation(r._key,tn.none())])}function _r(r,t,e,...i){r=Ds(r,Me);const a=Ds(r.firestore,Ba),l=Dd(a);let c;return c=typeof(t=Ke(t))=="string"||t instanceof Cd?FI(l,"updateDoc",r._key,t,e,i):qI(l,"updateDoc",r._key,t),xd(a,[c.toMutation(r._key,tn.exists(!0))])}function ew(r){return xd(Ds(r.firestore,Ba),[new Dc(r._key,tn.none())])}function nw(r,...t){var g,T,E;r=Ke(r);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||ES(t[i])||(e=t[i++]);const a={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(ES(t[i])){const S=t[i];t[i]=(g=S.next)==null?void 0:g.bind(S),t[i+1]=(T=S.error)==null?void 0:T.bind(S),t[i+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,c,m;if(r instanceof Me)c=Ds(r.firestore,Ba),m=yd(r._key.path),l={next:S=>{t[i]&&t[i](IM(c,r,S))},error:t[i+1],complete:t[i+2]};else{const S=Ds(r,Fa);c=Ds(S.firestore,Ba),m=S._query;const R=new YI(c);l={next:V=>{t[i]&&t[i](new $o(c,R,S,V))},error:t[i+1],complete:t[i+2]},gM(r._query)}const p=Uy(c);return nM(p,m,a,l)}function xd(r,t){const e=Uy(r);return iM(e,t)}function IM(r,t,e){const i=e.docs.get(t._key),a=new YI(r);return new Da(r,a,t._key,i,new Hu(e.hasPendingWrites,e.fromCache),t.converter)}function iw(r){return r=Ds(r,Ba),Uy(r),new AM(r,(t=>xd(r,t)))}(function(t,e=!0){UN(Tl),Xo(new Va("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),m=new Ba(new BN(i.getProvider("auth-internal")),new HN(c,i.getProvider("app-check-internal")),Cx(c,a),c);return l={useFetchStreams:e,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),wr(vS,TS,t),wr(vS,TS,"esm2020")})();const kg={apiKey:"AIzaSyCMQRCfBaVdJWgqMkaWrBHgHlMX51K7tbM",authDomain:"entrypoint-v2.firebaseapp.com",projectId:"entrypoint-v2",storageBucket:"entrypoint-v2.firebasestorage.app",messagingSenderId:"240107297798",appId:"1:240107297798:web:9e4a6c13a2751aead9b787"},yl=!!kg.apiKey&&!!kg.projectId;let Gu=null,He=null;if(yl){const r=$S(kg);Gu=kN(r),He=oM(r,{localCache:_M({tabManager:SM()})})}const sw=G.createContext(null);function wM({children:r}){const[t,e]=G.useState(null),[i,a]=G.useState(yl);G.useEffect(()=>!yl||!Gu?void 0:AD(Gu,p=>{e(p),a(!1)}),[]);const l=()=>GD(Gu,new Is),c=()=>ID(Gu);return I.jsx(sw.Provider,{value:{user:t,loading:i,signinGoogle:l,logout:c},children:r})}function Ky(){return G.useContext(sw)}function RM(){const{signinGoogle:r}=Ky(),[t,e]=G.useState(""),[i,a]=G.useState(!1),l=async()=>{e(""),a(!0);try{await r()}catch(c){e(c.message.replace("Firebase: ",""))}finally{a(!1)}};return I.jsxs("div",{className:"auth-container",children:[I.jsxs("div",{className:"auth-header",children:[I.jsx("div",{className:"auth-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"auth-title",children:"Lock-In"})]}),I.jsx("button",{className:"auth-google-btn",onClick:l,disabled:i,children:i?"...":"Sign in with Google"}),t&&I.jsx("div",{className:"auth-error",children:t})]})}function CM({children:r}){const{user:t,loading:e}=Ky();return e?I.jsx("div",{className:"loading",children:"loading..."}):t?r:I.jsx(RM,{})}const Na={prayer:{bg:"rgba(34, 139, 34, 0.12)",border:"#22a845",text:"#22a845"},spiritual:{bg:"rgba(234, 179, 8, 0.10)",border:"#ca8a04",text:"#ca8a04"},course:{bg:"rgba(37, 99, 235, 0.10)",border:"#2563eb",text:"#2563eb"},study:{bg:"rgba(8, 145, 178, 0.10)",border:"#0891b2",text:"#0891b2"},work:{bg:"rgba(180, 83, 9, 0.10)",border:"#b45309",text:"#b45309"},project:{bg:"rgba(124, 58, 237, 0.10)",border:"#7c3aed",text:"#7c3aed"},sport:{bg:"rgba(220, 38, 38, 0.10)",border:"#dc2626",text:"#dc2626"},therapy:{bg:"rgba(219, 39, 119, 0.10)",border:"#db2777",text:"#db2777"},rest:{bg:"rgba(100, 116, 139, 0.08)",border:"#64748b",text:"#64748b"},neutral:{bg:"rgba(163, 163, 163, 0.06)",border:"#a3a3a3",text:"#a3a3a3"}},rw=Object.keys(Na),DM=rw,NM=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function xM(r){const t=Math.floor(r/60)%24,e=Math.round(r%60),i=t>=12?"PM":"AM";return`${t%12||12}:${String(e).padStart(2,"0")} ${i}`}const _l=["#2d8a4e","#0055a4","#7c3aed","#b45309","#dc2626","#db2777","#0891b2","#64748b"],aw=()=>{const r={};return NM.forEach(t=>{r[t]={blocks:[]}}),r},Qy=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function Yy(r){const[t,e,i]=r.split("-").map(Number);return new Date(t,e-1,i)}function $y(r){const t=r.getFullYear(),e=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0");return`${t}-${e}-${i}`}function ic(){return $y(new Date)}function VM(r){const t=(r.getDay()+6)%7;return Qy[t]}function ow(r,t,e){return r>=t&&r<=e}function nd(r){return Yy(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function MM(r,t){return`${nd(r)}  ${nd(t)}`}function OM(r){const[t,e,i]=r.split("-");return`${i}-${e}-${t}`}function PM(r,t){const e=Yy(r),i=(e.getDay()+6)%7,l=Qy.indexOf(t)-i,c=new Date(e);return c.setDate(c.getDate()+l),$y(c)}function kM(r,t){const e=[],i=new Date(r,t,1);for(;i.getMonth()===t;)e.push({iso:$y(i),date:new Date(i)}),i.setDate(i.getDate()+1);return e}const LM=new Date().getFullYear(),UM={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};function AS(r){const t=r.trim().match(/^(\w{3})\s+(\d{1,2})$/);if(!t)return null;const e=UM[t[1]],i=parseInt(t[2],10);if(e==null||isNaN(i))return null;const a=new Date(LM,e,i),l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),m=String(a.getDate()).padStart(2,"0");return`${l}-${c}-${m}`}function zM(r){if(!r)return{startDate:"",endDate:""};const t=r.split(/\u2192|->||/).map(a=>a.trim()),e=AS(t[0]),i=t[1]?AS(t[1]):e;return{startDate:e||"",endDate:i||""}}function jM(r){return{id:r.id||crypto.randomUUID(),activity:r.activity||"",type:r.type||"neutral",icon:r.icon||"",duration:r.duration||60,segment:null,offsetMinutes:0,time:r.time||"08:00",tasks:[]}}function BM(r,t){var c;const{startDate:e,endDate:i}=zM(r.dates),a={},l=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const m of l){const p=(c=r.days)==null?void 0:c[m];a[m]={blocks:((p==null?void 0:p.blocks)||[]).map(jM)}}return{id:r.id||crypto.randomUUID(),label:r.label||`Plan ${t+1}`,color:_l[t%_l.length],startDate:e,endDate:i,order:r.order??t,routine:a}}function qM(){const t=localStorage.getItem("entrypoint-v2-tabs");if(!t)return null;try{const e=JSON.parse(t);return!Array.isArray(e)||e.length===0?null:e.map(BM)}catch{return null}}function FM(){const r=!!localStorage.getItem("entrypoint-v2-tabs"),t=!!localStorage.getItem("entrypoint-v2-plans");return r&&!t}const id="entrypoint-v2-plans",HM="entrypoint-v2-tabs";function IS(){if(FM()){const r=qM();if(r)return lw(r),r}try{const r=localStorage.getItem(id);if(r){const t=JSON.parse(r);if(Array.isArray(t)&&t.length>0)return t}}catch{}return[]}function lw(r){localStorage.setItem(id,JSON.stringify(r))}async function GM(r){const t=`entrypoint-v2-migrated-${r}`;if(localStorage.getItem(t))return;let e=null;try{const i=localStorage.getItem(id);if(i){const a=JSON.parse(i);Array.isArray(a)&&a.length>0&&(e=a)}}catch{}if(e&&e.length>0){const i=iw(He);for(const a of e)i.set(_n(He,"users",r,"plans",a.id),{...a});await i.commit()}localStorage.setItem(t,"1"),localStorage.removeItem(id),localStorage.removeItem(HM)}function KM(){const[r,t]=G.useState(()=>IS()),[e,i]=G.useState(()=>{var S;return((S=IS()[0])==null?void 0:S.id)||null}),a=r.find(S=>S.id===e)||r[0]||null;a&&e!==a.id&&i(a.id);const l=G.useCallback(S=>{t(R=>{const V=typeof S=="function"?S(R):S;return lw(V),V})},[]),c=G.useCallback(S=>{const R=crypto.randomUUID(),V={id:R,label:S.label||"New Plan",color:S.color||_l[0],startDate:S.startDate||"",endDate:S.endDate||"",order:S.order??r.length,routine:S.routine||aw()};return l(C=>[...C,V]),i(R),R},[l,r.length]),m=G.useCallback((S,R)=>{l(V=>V.map(C=>C.id===S?{...C,...R}:C))},[l]),p=G.useCallback(S=>{l(R=>R.filter(V=>V.id!==S)),e===S&&i(null)},[e,l]),g=G.useCallback((S,R,V)=>{const C=S||(a==null?void 0:a.id);C&&l(z=>z.map($=>$.id===C?{...$,routine:{...$.routine,[R]:{...$.routine[R],blocks:V}}}:$))},[a,l]),T=G.useCallback(S=>r.find(R=>R.startDate&&R.endDate&&ow(S,R.startDate,R.endDate))||null,[r]),E=G.useCallback(S=>{const R=new Set(r.map(C=>C.id)),V=S.filter(C=>!R.has(C.id));V.length!==0&&l(C=>[...C,...V.map((z,$)=>({...z,order:C.length+$}))])},[r,l]);return{plans:r,loading:!1,activePlan:a,activePlanId:e,setActivePlanId:i,createPlan:c,updatePlan:m,deletePlan:p,updateRoutineBlocks:g,getPlanForDate:T,mergePlans:E}}function QM(r){const[t,e]=G.useState([]),[i,a]=G.useState(!0),[l,c]=G.useState(null),m=t.find(V=>V.id===l)||t[0]||null;m&&l!==m.id&&c(m.id),G.useEffect(()=>{if(!r){a(!1);return}GM(r).catch(()=>{});const V=JI(UI(He,"users",r,"plans"),ZI("order"));return nw(V,z=>{e(z.docs.map($=>({id:$.id,...$.data()}))),a(!1)},()=>a(!1))},[r]),G.useEffect(()=>{t.length>0&&!l&&c(t[0].id)},[t,l]);const p=G.useCallback(async V=>{const C=crypto.randomUUID(),z={id:C,label:V.label||"New Plan",color:V.color||_l[0],startDate:V.startDate||"",endDate:V.endDate||"",order:V.order??t.length,routine:V.routine||aw()};return await Pg(_n(He,"users",r,"plans",C),z),c(C),C},[r,t.length]),g=G.useCallback(async(V,C)=>{await _r(_n(He,"users",r,"plans",V),C)},[r]),T=G.useCallback(async V=>{await ew(_n(He,"users",r,"plans",V)),l===V&&c(null)},[r,l]),E=G.useCallback(async(V,C,z)=>{const $=V||(m==null?void 0:m.id);$&&await _r(_n(He,"users",r,"plans",$),{[`routine.${C}.blocks`]:z})},[r,m]),S=G.useCallback(V=>t.find(C=>C.startDate&&C.endDate&&V>=C.startDate&&V<=C.endDate)||null,[t]),R=G.useCallback(async V=>{const C=new Set(t.map(at=>at.id)),z=V.filter(at=>!C.has(at.id));if(z.length===0)return;const $=iw(He);z.forEach((at,rt)=>{const gt={...at,order:t.length+rt};$.set(_n(He,"users",r,"plans",gt.id),gt)}),await $.commit()},[r,t]);return{plans:t,loading:i,activePlan:m,activePlanId:l,setActivePlanId:c,createPlan:p,updatePlan:g,deletePlan:T,updateRoutineBlocks:E,getPlanForDate:S,mergePlans:R}}function YM(r){return yl&&r?QM(r):KM()}const uw="entrypoint-v2-pipelines";function $M(){try{const r=localStorage.getItem(uw);if(r){const t=JSON.parse(r);if(Array.isArray(t))return t}}catch{}return[]}function XM(r){localStorage.setItem(uw,JSON.stringify(r))}function JM(){const[r,t]=G.useState(()=>$M()),e=G.useCallback(S=>{t(R=>{const V=typeof S=="function"?S(R):S;return XM(V),V})},[]),i=G.useCallback(S=>{const R=crypto.randomUUID(),V={id:R,title:S||"New Section",order:r.length,collapsed:!1,items:[]};return e(C=>[...C,V]),R},[e,r.length]),a=G.useCallback((S,R)=>{e(V=>V.map(C=>C.id===S?{...C,...R}:C))},[e]),l=G.useCallback(S=>{e(R=>R.filter(V=>V.id!==S))},[e]),c=G.useCallback(S=>{e(S.map((R,V)=>({...R,order:V})))},[e]),m=G.useCallback(S=>{e(R=>R.map(V=>V.id===S?{...V,collapsed:!V.collapsed}:V))},[e]),p=G.useCallback((S,R)=>{const V={id:crypto.randomUUID(),icon:"",title:"",description:"",...R};e(C=>C.map(z=>z.id===S?{...z,items:[...z.items||[],V]}:z))},[e]),g=G.useCallback((S,R,V)=>{e(C=>C.map(z=>z.id===S?{...z,items:(z.items||[]).map($=>$.id===R?{...$,...V}:$)}:z))},[e]),T=G.useCallback((S,R)=>{e(V=>V.map(C=>C.id===S?{...C,items:(C.items||[]).filter(z=>z.id!==R)}:C))},[e]),E=G.useCallback(S=>{const R=new Set(r.map(C=>C.id)),V=S.filter(C=>!R.has(C.id));V.length!==0&&e(C=>[...C,...V.map((z,$)=>({...z,order:C.length+$}))])},[r,e]);return{sections:r,loading:!1,addSection:i,updateSection:a,deleteSection:l,reorderSections:c,toggleCollapse:m,addItem:p,updateItem:g,deleteItem:T,mergeSections:E}}function ZM(r){const[t,e]=G.useState([]),[i,a]=G.useState(!0);G.useEffect(()=>{if(!r){a(!1);return}const V=JI(UI(He,"users",r,"pipelines"),ZI("order"));return nw(V,z=>{e(z.docs.map($=>({id:$.id,...$.data()}))),a(!1)},()=>a(!1))},[r]);const l=G.useCallback(async V=>{const C=crypto.randomUUID(),z={id:C,title:V||"New Section",order:t.length,collapsed:!1,items:[]};return await Pg(_n(He,"users",r,"pipelines",C),z),C},[r,t.length]),c=G.useCallback(async(V,C)=>{await _r(_n(He,"users",r,"pipelines",V),C)},[r]),m=G.useCallback(async V=>{await ew(_n(He,"users",r,"pipelines",V))},[r]),p=G.useCallback(async V=>{for(let C=0;C<V.length;C++)await _r(_n(He,"users",r,"pipelines",V[C].id),{order:C})},[r]),g=G.useCallback(async V=>{const C=t.find(z=>z.id===V);C&&await _r(_n(He,"users",r,"pipelines",V),{collapsed:!C.collapsed})},[r,t]),T=G.useCallback(async(V,C)=>{const z=t.find(at=>at.id===V);if(!z)return;const $={id:crypto.randomUUID(),icon:"",title:"",description:"",...C};await _r(_n(He,"users",r,"pipelines",V),{items:[...z.items||[],$]})},[r,t]),E=G.useCallback(async(V,C,z)=>{const $=t.find(at=>at.id===V);$&&await _r(_n(He,"users",r,"pipelines",V),{items:($.items||[]).map(at=>at.id===C?{...at,...z}:at)})},[r,t]),S=G.useCallback(async(V,C)=>{const z=t.find($=>$.id===V);z&&await _r(_n(He,"users",r,"pipelines",V),{items:(z.items||[]).filter($=>$.id!==C)})},[r,t]),R=G.useCallback(async V=>{const C=new Set(t.map($=>$.id)),z=V.filter($=>!C.has($.id));if(z.length!==0)for(let $=0;$<z.length;$++){const at={...z[$],order:t.length+$};await Pg(_n(He,"users",r,"pipelines",at.id),at)}},[r,t]);return{sections:t,loading:i,addSection:l,updateSection:c,deleteSection:m,reorderSections:p,toggleCollapse:g,addItem:T,updateItem:E,deleteItem:S,mergeSections:R}}function WM(r){return yl&&r?ZM(r):JM()}function tO(){const[r,t]=G.useState(ic()),e=ic(),[i,a]=G.useState(()=>new Date().getFullYear()),[l,c]=G.useState(()=>new Date().getMonth()),m=G.useCallback(()=>{c(E=>E===0?(a(S=>S-1),11):E-1)},[]),p=G.useCallback(()=>{c(E=>E===11?(a(S=>S+1),0):E+1)},[]),g=G.useCallback(()=>{const E=new Date;a(E.getFullYear()),c(E.getMonth()),t(ic())},[]),T=G.useCallback((E,S)=>{a(E),c(S)},[]);return{selectedDate:r,setSelectedDate:t,today:e,viewYear:i,setViewYear:a,viewMonth:l,setViewMonth:c,prevMonth:m,nextMonth:p,goToday:g,setViewYearMonth:T}}const cw="entrypoint-v2-custom-types",eO=["#0d9488","#84cc16","#e11d48","#6366f1","#f97316","#06b6d4","#a21caf","#65a30d","#be185d","#1d4ed8","#c026d3","#ea580c","#0f766e","#4f46e5","#15803d","#9333ea"],nO=new Set(Object.values(Na).map(r=>r.border.toLowerCase())),Jp=eO.filter(r=>!nO.has(r.toLowerCase()));function iO(r){if(r.startsWith("hsl"))return{bg:r.replace(")",", 0.10)").replace("hsl(","hsla("),border:r,text:r};const t=parseInt(r.slice(1,3),16),e=parseInt(r.slice(3,5),16),i=parseInt(r.slice(5,7),16);return{bg:`rgba(${t}, ${e}, ${i}, 0.10)`,border:r,text:r}}function sO(r){if(r<Jp.length)return Jp[r];const t=((r-Jp.length)*137.5+30)%360;return`hsl(${Math.round(t)}, 65%, 50%)`}function rO(){try{const r=localStorage.getItem(cw);return r?JSON.parse(r).map(e=>({key:e.key,name:e.name})):[]}catch{return[]}}function Zp(r){localStorage.setItem(cw,JSON.stringify(r.map(t=>({key:t.key,name:t.name}))))}function aO(){const[r,t]=G.useState(rO),e=G.useMemo(()=>r.map((m,p)=>{const g=sO(p);return{...m,color:g,colors:iO(g)}}),[r]),i=G.useCallback(m=>{const p=m.toLowerCase().replace(/\s+/g,"-");return t(g=>{if(g.find(E=>E.key===p))return g;const T=[...g,{key:p,name:m}];return Zp(T),T}),p},[]),a=G.useCallback(m=>{t(p=>{const g=p.filter(T=>T.key!==m);return Zp(g),g})},[]),l=G.useCallback(m=>{t(p=>{const g=new Set(p.map(S=>S.key)),T=m.filter(S=>!g.has(S.key));if(T.length===0)return p;const E=[...p,...T.map(S=>({key:S.key,name:S.name}))];return Zp(E),E})},[]),c=G.useMemo(()=>e.reduce((m,p)=>(m[p.key]=p.colors,m),{}),[e]);return{customTypes:e,customTypeColors:c,addCustomType:i,removeCustomType:a,mergeCustomTypes:l}}const hw="entrypoint-v2-location";function oO(){try{const r=localStorage.getItem(hw);return r?JSON.parse(r):null}catch{return null}}function wS(r){localStorage.setItem(hw,JSON.stringify(r))}async function lO(r,t){const a=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${r}&lon=${t}&format=json&accept-language=en`)).json()).address||{},l=a.city||a.town||a.village||a.county||"Unknown",c=a.country||"Unknown";return{city:l,country:c}}function uO(){const[r,t]=G.useState(oO),[e,i]=G.useState(!1),[a,l]=G.useState(!1),c=G.useCallback(m=>{wS(m),t(m),l(!1)},[]);return G.useEffect(()=>{if(!r){if(!navigator.geolocation){l(!0);return}i(!0),navigator.geolocation.getCurrentPosition(async m=>{try{const{latitude:p,longitude:g}=m.coords,{city:T,country:E}=await lO(p,g),S={city:T,country:E,lat:p,lng:g};wS(S),t(S)}catch{l(!0)}finally{i(!1)}},()=>{l(!0),i(!1)},{timeout:1e4})}},[r]),{location:r,setLocation:c,hasLocation:!!r,detecting:e,geoFailed:a}}function fw({title:r,message:t,confirmLabel:e="Delete",onConfirm:i,onClose:a}){return G.useEffect(()=>{const l=c=>{c.key==="Escape"&&a()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[a]),I.jsx("div",{className:"modal-overlay",onClick:a,children:I.jsxs("div",{className:"modal",onClick:l=>l.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:r}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 20px",lineHeight:1.5},children:t}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{className:"btn-secondary",onClick:a,children:"Cancel"}),I.jsx("button",{className:"btn-danger",onClick:i,children:e})]})]})})}function cO({plans:r,activePlanId:t,onSelect:e,onCreate:i,onEdit:a,onDelete:l}){const[c,m]=G.useState(null),[p,g]=G.useState(null),T=G.useRef(null);G.useEffect(()=>{if(!c)return;const R=V=>{V.key==="Escape"&&m(null)};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[c]);const E=(R,V)=>{R.preventDefault(),m({x:R.clientX,y:R.clientY,plan:V})},S=R=>{const V=T.current;V&&V.scrollWidth>V.clientWidth&&(R.preventDefault(),V.scrollLeft+=R.deltaY)};return I.jsxs("div",{className:"plan-sidebar",children:[I.jsxs("div",{className:"plan-list",ref:T,onWheel:S,children:[r.map(R=>I.jsxs("button",{className:`plan-item ${R.id===t?"active":""}`,onClick:()=>e(R.id),onContextMenu:V=>E(V,R),children:[I.jsx("span",{className:"plan-dot",style:{background:R.color}}),I.jsxs("div",{className:"plan-info",children:[I.jsx("span",{className:"plan-label",children:R.label}),R.startDate&&R.endDate&&I.jsx("span",{className:"plan-dates",children:MM(R.startDate,R.endDate)})]})]},R.id)),I.jsx("button",{className:"plan-item plan-add",onClick:i,children:"+ New Plan"})]}),c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:()=>m(null)}),I.jsxs("div",{className:"context-menu",style:{top:c.y,left:c.x},children:[I.jsx("button",{onClick:()=>{a(c.plan),m(null)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{g(c.plan),m(null)},children:"Delete"})]})]}),p&&I.jsx(fw,{title:"Delete Plan",message:`Delete "${p.label}"? This cannot be undone.`,onConfirm:()=>{l(p.id),g(null)},onClose:()=>g(null)})]})}function hO(r,t,e,i){if(!r||!t)return null;for(const a of e)if(a.id!==i&&!(!a.startDate||!a.endDate)&&r<=a.endDate&&t>=a.startDate)return a;return null}function RS({plan:r,plans:t=[],onSave:e,onClose:i}){const a=!!r,[l,c]=G.useState((r==null?void 0:r.label)||""),[m,p]=G.useState((r==null?void 0:r.color)||_l[0]),[g,T]=G.useState((r==null?void 0:r.startDate)||""),[E,S]=G.useState((r==null?void 0:r.endDate)||""),[R,V]=G.useState(""),C=z=>{if(z.preventDefault(),V(""),E<g){V("End date must be after start date.");return}const $=hO(g,E,t,r==null?void 0:r.id);if($){V(`Overlaps with "${$.label}" (${$.startDate}  ${$.endDate}).`);return}e({label:l.trim(),color:m,startDate:g,endDate:E})};return I.jsx("div",{className:"modal-overlay",onClick:i,onKeyDown:z=>{z.key==="Escape"&&i()},children:I.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),children:[I.jsx("h3",{className:"modal-title",children:a?"Edit Plan":"New Plan"}),I.jsxs("form",{onSubmit:C,className:"modal-form",children:[I.jsxs("label",{className:"modal-label",children:["Label",I.jsx("input",{className:"modal-input",value:l,onChange:z=>c(z.target.value),placeholder:"e.g. Ramadan",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start Date",I.jsx("input",{className:"modal-input",type:"date",value:g,onChange:z=>T(z.target.value),required:!0})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End Date",I.jsx("input",{className:"modal-input",type:"date",value:E,onChange:z=>S(z.target.value),required:!0})]})]}),R&&I.jsx("div",{className:"plan-error",children:R}),I.jsxs("div",{className:"modal-label",children:["Color",I.jsx("div",{className:"color-grid",children:_l.map(z=>I.jsx("button",{type:"button",className:`color-btn ${m===z?"active":""}`,style:{background:z},onClick:()=>p(z)},z))})]}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const fO=["January","February","March","April","May","June","July","August","September","October","November","December"],dO=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function mO({viewYear:r,viewMonth:t,selectedDate:e,today:i,plans:a,highlightDate:l,onPrevMonth:c,onNextMonth:m,onGoToday:p,onSelectDate:g,onPlanClick:T}){const E=G.useMemo(()=>{const R=kM(r,t),V=(R[0].date.getDay()+6)%7;return[...Array.from({length:V},()=>null),...R]},[r,t]),S=G.useMemo(()=>{const R={};for(const V of E){if(!V)continue;const C=a.find(z=>z.startDate&&z.endDate&&ow(V.iso,z.startDate,z.endDate));C&&(R[V.iso]=C)}return R},[E,a]);return I.jsxs("div",{className:"calendar-view",children:[I.jsxs("div",{className:"cal-header",children:[I.jsx("button",{className:"cal-nav",onClick:c,children:""}),I.jsxs("div",{className:"cal-title",children:[I.jsx("span",{className:"cal-month",children:fO[t]}),I.jsx("span",{className:"cal-year",children:r})]}),I.jsx("button",{className:"cal-nav",onClick:m,children:""}),I.jsx("button",{className:"cal-today-btn",onClick:p,children:"Today"})]}),I.jsxs("div",{className:"cal-grid",children:[dO.map(R=>I.jsx("div",{className:"cal-dow",children:R},R)),E.map((R,V)=>{if(!R)return I.jsx("div",{className:"cal-cell cal-blank"},`blank-${V}`);const C=S[R.iso],z=R.iso===i,$=R.iso===e,at=R.iso===l;return I.jsxs("button",{className:`cal-cell ${z?"cal-today":""} ${$?"cal-selected":""} ${C?"cal-has-plan":""} ${at?"cal-highlight":""}`,style:C?{"--plan-color":C.color}:void 0,onClick:()=>g(R.iso),children:[I.jsx("span",{className:"cal-day-num",children:R.date.getDate()}),C&&I.jsx("span",{className:"cal-plan-dot",style:{background:C.color}})]},R.iso)})]}),a.length>0&&I.jsx("div",{className:"cal-plan-legend",children:a.filter(R=>R.startDate&&R.endDate).map(R=>I.jsxs("button",{className:"cal-plan-chip",onClick:()=>T==null?void 0:T(R),children:[I.jsx("span",{className:"cal-plan-chip-dot",style:{background:R.color}}),I.jsx("span",{children:R.label})]},R.id))})]})}const Yi=60,sd=5,ku=15,Lu=52,CS=8;function Uo(r){return Math.max(0,Math.min(1435,Math.round(r/sd)*sd))}function $i(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function DS({block:r,top:t,height:e,col:i=0,totalCols:a=1,isNew:l,isPrayer:c,extraTypeColors:m={},onEdit:p,onDelete:g,onTimeChange:T,onResize:E,onToggleTask:S}){var mt;const R=G.useRef(null),V=G.useRef(null),C=G.useRef(null),z=G.useRef(null),[$,at]=G.useState(null),rt=Na[r.type]||m[r.type]||Na.neutral,gt=c?"#2d8a4e":rt.text==="#94a3b8"?"#b0b0ba":rt.text,vt=r.type==="prayer"||c?600:400,ht=t/Yi*60,D=e/Yi*60,A=$i(Math.min(ht+D,1440)),N=r.time,P=`calc(100% - ${Lu}px - ${CS}px)`,M=c?P:`calc((${P}) / ${a})`,U=c?`${Lu}px`:`calc(${Lu}px + (${P}) * ${i} / ${a})`,x=G.useCallback((it,pt)=>{const Rt=R.current,Vt=V.current;if(Rt){if(pt==="move"){const ut=t+it;Rt.style.top=`${ut}px`,Rt.style.left=`${Lu}px`,Rt.style.width=`calc(100% - ${Lu}px - ${CS}px)`,Rt.style.zIndex="100",Rt.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Rt.style.opacity="0.85",Rt.style.cursor="grabbing";const Dt=Uo((t+it)/Yi*60);Vt&&(Vt.textContent=`${$i(Dt)}  ${$i(Math.min(Dt+D,1440))}`)}else if(pt==="top"){const ut=t+it,Dt=Math.max(e-it,ku/60*Yi);Rt.style.top=`${ut}px`,Rt.style.height=`${Math.max(Dt,24)}px`,Rt.style.zIndex="100",Rt.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Rt.style.opacity="0.85";const Yt=Uo(ht+it/Yi*60);Vt&&(Vt.textContent=`${$i(Yt)}  ${$i(Math.min(ht+D,1440))}`)}else if(pt==="bottom"){const ut=Math.max(e+it,ku/60*Yi);Rt.style.height=`${Math.max(ut,24)}px`,Rt.style.zIndex="100",Rt.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Rt.style.opacity="0.85";const Dt=ht+Math.max(ku,Uo(D+it/Yi*60));Vt&&(Vt.textContent=`${$i(ht)}  ${$i(Math.min(Dt,1440))}`)}}},[t,e,ht,D]),Kt=G.useCallback(()=>{const it=R.current;it&&(it.style.top=`${t}px`,it.style.height=`${Math.max(e,24)}px`,it.style.left=U,it.style.width=M,it.style.zIndex=c?"10":"1",it.style.boxShadow="none",it.style.opacity="1",it.style.cursor=c?"default":"pointer",V.current&&(V.current.textContent=`${N}  ${A}`))},[t,e,U,M,N,A,c]);G.useEffect(()=>{V.current&&(V.current.textContent=`${N}  ${A}`)},[N,A]);const Xt=it=>{c||it.button!==0||(C.current={y:it.clientY,mode:"move",moved:!1},R.current.setPointerCapture(it.pointerId))},J=it=>{if(!C.current)return;const pt=it.clientY-C.current.y;!C.current.moved&&Math.abs(pt)>4&&(C.current.moved=!0),C.current.moved&&(z.current&&cancelAnimationFrame(z.current),z.current=requestAnimationFrame(()=>x(pt,C.current.mode)))},lt=it=>{if(!C.current)return;const pt=it.clientY-C.current.y,{mode:Rt,moved:Vt}=C.current;if(C.current=null,z.current&&cancelAnimationFrame(z.current),Kt(),!Vt){c||p(r);return}if(Rt==="move"){const ut=Uo((t+pt)/Yi*60);T(r.id,$i(ut))}else if(Rt==="top"){const ut=Uo(ht+pt/Yi*60),Dt=Math.max(ku,Math.round((ht+D-ut)/sd)*sd);E(r.id,$i(ut),Dt)}else if(Rt==="bottom"){const ut=Math.max(ku,Uo(D+pt/Yi*60));E(r.id,$i(ht),ut)}},Tt=it=>pt=>{c||(pt.stopPropagation(),pt.button===0&&(C.current={y:pt.clientY,mode:it,moved:!0},pt.target.setPointerCapture(pt.pointerId)))},Mt=it=>{c||(it.preventDefault(),it.stopPropagation(),at({x:it.clientX,y:it.clientY}))},Lt=()=>at(null);G.useEffect(()=>{if(!$)return;const it=pt=>{pt.key==="Escape"&&Lt()};return window.addEventListener("keydown",it),()=>window.removeEventListener("keydown",it)},[$]);const k=!c&&((mt=r.tasks)==null?void 0:mt.length)>0,tt=k?r.tasks.filter(it=>it.done).length:0,Q=e<36,ot=k&&e>=60;return I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:R,className:`timeline-block ${l?"new-block":""} ${c?"prayer-block":""}`,style:{top:t,height:Math.max(e,24),left:U,width:M,right:"auto",background:c?"rgba(34, 139, 34, 0.10)":rt.bg,borderLeft:`3px solid ${c?"#2d8a4e":rt.border}`,zIndex:c?10:1,cursor:c?"default":"pointer",transition:"box-shadow 0.15s"},onPointerDown:Xt,onPointerMove:J,onPointerUp:lt,onContextMenu:Mt,children:[!c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"resize-handle resize-handle-top",onPointerDown:Tt("top"),onPointerMove:J,onPointerUp:lt}),I.jsx("div",{className:"resize-handle resize-handle-bottom",onPointerDown:Tt("bottom"),onPointerMove:J,onPointerUp:lt})]}),Q?I.jsxs("div",{className:"block-compact",children:[I.jsxs("span",{ref:V,className:"block-time-sm",children:[N,"  ",A]}),I.jsx("span",{className:"block-icon-sm",children:r.icon}),I.jsx("span",{className:"block-act-sm",style:{color:gt,fontWeight:vt},children:r.activity}),k&&I.jsxs("span",{className:"block-task-badge",children:[tt,"/",r.tasks.length]})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:V,className:"block-time-sm",children:[N,"  ",A]}),I.jsxs("div",{className:"block-row",children:[I.jsx("span",{className:"block-icon-sm",children:r.icon}),I.jsx("span",{className:"block-act",style:{color:gt,fontWeight:vt},children:r.activity}),k&&!ot&&I.jsxs("span",{className:"block-task-badge",children:[tt,"/",r.tasks.length]})]}),ot&&I.jsx("div",{className:"block-tasks",onWheel:it=>{const pt=it.currentTarget;pt.scrollHeight>pt.clientHeight&&it.stopPropagation()},children:r.tasks.map(it=>I.jsxs("label",{className:`block-task-item ${it.done?"done":""}`,onPointerDown:pt=>pt.stopPropagation(),onClick:pt=>pt.stopPropagation(),children:[I.jsx("input",{type:"checkbox",checked:it.done,onChange:()=>S==null?void 0:S(r.id,it.id)}),I.jsx("span",{children:it.text})]},it.id))})]})]}),$&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:it=>{it.stopPropagation(),Lt()}}),I.jsxs("div",{className:"context-menu",style:{top:$.y,left:$.x},onClick:it=>it.stopPropagation(),children:[I.jsx("button",{onClick:()=>{Lt(),p(r)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{Lt(),g(r.id)},children:"Delete"})]})]})]})}const pO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function NS(r){return`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function gO({block:r,defaultTime:t,segments:e,onSave:i,onDelete:a,onClose:l,customTypes:c=[],customTypeColors:m={},onAddCustomType:p,onRemoveCustomType:g}){G.useEffect(()=>{if(!r)return;const Q=ot=>{ot.key==="Delete"&&(ot.preventDefault(),a(r.id))};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[r,a]);const T=!!r,E=(r==null?void 0:r.time)||t||"08:00",S=(r==null?void 0:r.duration)||60,[R,V]=G.useState(E),[C,z]=G.useState(()=>{const[Q,ot]=E.split(":").map(Number),mt=Q*60+ot+S;return NS(mt)}),[$,at]=G.useState((r==null?void 0:r.activity)||""),[rt,gt]=G.useState((r==null?void 0:r.type)||"neutral"),[vt,ht]=G.useState((r==null?void 0:r.icon)||""),[D,A]=G.useState((r==null?void 0:r.tasks)||[]),[N,P]=G.useState(""),[M,U]=G.useState(!1),[x,Kt]=G.useState(!1),[Xt,J]=G.useState(""),lt=new Set(c.map(Q=>Q.key)),Tt=[...DM,...c.map(Q=>Q.key)],Mt={...Na,...m},Lt=Mt[rt]||Na.neutral,k=()=>{const[Q,ot]=R.split(":").map(Number),[mt,it]=C.split(":").map(Number);return Math.max(15,mt*60+it-(Q*60+ot))},tt=Q=>{Q.preventDefault(),i({id:(r==null?void 0:r.id)||crypto.randomUUID(),time:R,activity:$.trim(),type:rt,icon:vt,duration:k(),segment:null,offsetMinutes:0,tasks:D})};return I.jsx("div",{className:"modal-overlay",onClick:l,onKeyDown:Q=>{Q.key==="Escape"&&l()},children:I.jsxs("div",{className:"modal",onClick:Q=>{Q.stopPropagation(),M&&U(!1)},children:[I.jsx("h3",{className:"modal-title",children:T?"Edit Block":"Add Block"}),I.jsxs("form",{onSubmit:tt,className:"modal-form",children:[I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start",I.jsx("input",{className:"modal-input",value:R,onChange:Q=>{const ot=Q.target.value;V(ot);const[mt,it]=R.split(":").map(Number),[pt,Rt]=C.split(":").map(Number),Vt=pt*60+Rt-(mt*60+it);if(Vt>0&&/^\d{2}:\d{2}$/.test(ot)){const[ut,Dt]=ot.split(":").map(Number);z(NS(ut*60+Dt+Vt))}},placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End",I.jsx("input",{className:"modal-input",value:C,onChange:Q=>z(Q.target.value),placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]})]}),I.jsxs("label",{className:"modal-label",children:["Activity",I.jsx("input",{className:"modal-input",value:$,onChange:Q=>at(Q.target.value),placeholder:"e.g. Quran revision",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-label",children:["Type",I.jsxs("div",{className:"modal-row",style:{gap:6,alignItems:"center"},children:[I.jsxs("div",{className:"type-picker",style:{flex:1},onClick:Q=>Q.stopPropagation(),children:[I.jsxs("button",{type:"button",className:"type-picker-btn",onClick:()=>U(Q=>!Q),children:[I.jsx("span",{className:"type-color-dot",style:{background:Lt.border}}),I.jsx("span",{children:rt.charAt(0).toUpperCase()+rt.slice(1).replace(/-/g," ")}),I.jsx("span",{className:"type-picker-arrow",children:M?"":""})]}),M&&I.jsx("div",{className:"type-dropdown",children:Tt.map(Q=>{const ot=Mt[Q]||Na.neutral,mt=lt.has(Q);return I.jsxs("div",{className:`type-dropdown-item${Q===rt?" active":""}`,children:[I.jsxs("button",{type:"button",className:"type-dropdown-select",onClick:()=>{gt(Q),U(!1)},children:[I.jsx("span",{className:"type-color-dot",style:{background:ot.border}}),I.jsx("span",{children:Q.charAt(0).toUpperCase()+Q.slice(1).replace(/-/g," ")})]}),mt&&g&&I.jsx("button",{type:"button",className:"type-delete-btn",onClick:()=>{g(Q),rt===Q&&gt("neutral")},children:""})]},Q)})})]}),I.jsx("button",{type:"button",className:"btn-add-type",onClick:()=>Kt(Q=>!Q),title:"Add custom type",children:"+"})]})]}),x&&I.jsxs("div",{className:"new-type-form",children:[I.jsx("input",{className:"modal-input",placeholder:"Type name",value:Xt,onChange:Q=>J(Q.target.value),onKeyDown:Q=>{if(Q.key==="Enter"&&Xt.trim()&&p){Q.preventDefault();const ot=p(Xt.trim());gt(ot),J(""),Kt(!1)}}}),I.jsx("button",{type:"button",className:"btn-primary btn-sm",disabled:!Xt.trim(),onClick:()=>{if(!Xt.trim()||!p)return;const Q=p(Xt.trim());gt(Q),J(""),Kt(!1)},children:"Add"})]}),I.jsxs("div",{className:"modal-label",children:["Icon",I.jsx("div",{className:"icon-grid",children:pO.map(Q=>I.jsx("button",{type:"button",className:`icon-btn ${vt===Q?"active":""}`,onClick:()=>ht(Q),children:Q},Q))})]}),I.jsxs("div",{className:"modal-label",children:["Tasks",I.jsxs("div",{className:"task-list-editor",children:[D.map((Q,ot)=>I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{type:"checkbox",checked:Q.done,onChange:()=>{const mt=[...D];mt[ot]={...Q,done:!Q.done},A(mt)}}),I.jsx("input",{className:`modal-input task-edit-input${Q.done?" task-done":""}`,value:Q.text,onChange:mt=>{const it=[...D];it[ot]={...Q,text:mt.target.value},A(it)}}),I.jsx("button",{type:"button",className:"task-remove-btn",onClick:()=>A(D.filter((mt,it)=>it!==ot)),children:""})]},Q.id)),I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{className:"modal-input task-edit-input",placeholder:"Add task...",value:N,onChange:Q=>P(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&N.trim()&&(Q.preventDefault(),A([...D,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),P(""))}}),I.jsx("button",{type:"button",className:"task-add-btn",disabled:!N.trim(),onClick:()=>{N.trim()&&(A([...D,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),P(""))},children:"+"})]})]})]}),I.jsxs("div",{className:"modal-actions",children:[T&&I.jsx("button",{type:"button",className:"btn-danger",onClick:()=>a(r.id),children:"Delete"}),I.jsx("div",{style:{flex:1}}),I.jsx("button",{type:"button",className:"btn-secondary",onClick:l,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const yO=["","","","","","","","","","","","","","","",""];function _O({value:r,onChange:t}){const[e,i]=G.useState(!1),a=G.useRef(null);return G.useEffect(()=>{if(!e)return;const l=c=>{a.current&&!a.current.contains(c.target)&&i(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[e]),I.jsxs("div",{className:"pipeline-emoji-picker",ref:a,children:[I.jsx("button",{className:"pipeline-emoji-btn",onClick:()=>i(!e),children:r||""}),e&&I.jsx("div",{className:"pipeline-emoji-grid",children:yO.map(l=>I.jsx("button",{className:"pipeline-emoji-option",onClick:()=>{t(l),i(!1)},children:l},l))})]})}function Lg({value:r,onChange:t,className:e,placeholder:i,singleClick:a}){const[l,c]=G.useState(!1),[m,p]=G.useState(r),g=G.useRef(null);G.useEffect(()=>{l&&g.current&&g.current.focus()},[l]);const T=()=>{c(!1),m.trim()!==r&&t(m.trim())},E=R=>{R.stopPropagation(),p(r),c(!0)};if(l)return I.jsx("input",{ref:g,className:`pipeline-inline-input ${e||""}`,value:m,placeholder:i,onClick:R=>R.stopPropagation(),onChange:R=>p(R.target.value),onBlur:T,onKeyDown:R=>{R.key==="Enter"&&T(),R.key==="Escape"&&(p(r),c(!1))}});const S=a?{onClick:E}:{onDoubleClick:E};return I.jsx("span",{className:`pipeline-inline-text ${e||""} ${r?"":"pipeline-placeholder"}`,...S,children:r||i})}function vO({item:r,sectionId:t,onUpdate:e,onDelete:i}){return I.jsxs("div",{className:"pipeline-item",children:[I.jsx(_O,{value:r.icon,onChange:a=>e(t,r.id,{icon:a})}),I.jsxs("div",{className:"pipeline-item-content",children:[I.jsx(Lg,{value:r.title,onChange:a=>e(t,r.id,{title:a}),className:"pipeline-item-title",placeholder:"Item title"}),I.jsx(Lg,{value:r.description,onChange:a=>e(t,r.id,{description:a}),className:"pipeline-item-desc",placeholder:"Description"})]}),I.jsx("button",{className:"pipeline-item-delete",onClick:()=>i(t,r.id),children:""})]})}function TO({sections:r,addSection:t,updateSection:e,deleteSection:i,toggleCollapse:a,addItem:l,updateItem:c,deleteItem:m}){const[p,g]=G.useState(null);return I.jsxs("div",{className:"pipeline-sections",children:[r.map(T=>I.jsxs("div",{className:"pipeline-section",children:[I.jsxs("div",{className:"pipeline-section-header",onClick:()=>a(T.id),children:[I.jsx("span",{className:"pipeline-collapse-btn",children:T.collapsed?"":""}),I.jsx(Lg,{value:T.title,onChange:E=>e(T.id,{title:E}),className:"pipeline-section-title",placeholder:"Section title",singleClick:!0}),I.jsx("button",{className:"pipeline-section-delete",onClick:E=>{E.stopPropagation(),g(T.id)},children:""})]}),!T.collapsed&&I.jsxs("div",{className:"pipeline-section-body",children:[(T.items||[]).map(E=>I.jsx(vO,{item:E,sectionId:T.id,onUpdate:c,onDelete:m},E.id)),I.jsx("button",{className:"pipeline-add-item",onClick:()=>l(T.id,{}),children:"+ Add"})]})]},T.id)),I.jsx("button",{className:"pipeline-add-section",onClick:()=>t("New Section"),children:"+ New Section"}),p&&I.jsx(fw,{title:"Delete Section",message:"This will delete the section and all its items.",onConfirm:()=>{i(p),g(null)},onClose:()=>g(null)})]})}const Ug="prayerTimesCache";function dw(r,t,e){return`${r}|${t}|${e}`}function Wp(r,t,e){try{const i=localStorage.getItem(Ug);return i&&JSON.parse(i)[dw(r,t,e)]||null}catch{return null}}function EO(r,t,e,i){try{const a=localStorage.getItem(Ug),l=a?JSON.parse(a):{};l[dw(r,t,e)]=i;const c=Object.keys(l);c.length>30&&(c.sort(),delete l[c[0]]),localStorage.setItem(Ug,JSON.stringify(l))}catch{}}function SO({date:r,city:t="Lyon",country:e="France",lat:i,lng:a}={}){const l=r||ic(),[c,m]=G.useState(()=>Wp(l,t,e)),[p,g]=G.useState(!Wp(l,t,e)),[T,E]=G.useState(null);return G.useEffect(()=>{const S=Wp(l,t,e);if(S){m(S),g(!1);return}let R=!1;g(!0);async function V(){try{const C=OM(l);let z;if(i!=null&&a!=null)z=`https://api.aladhan.com/v1/timings/${C}?latitude=${i}&longitude=${a}`;else{const rt=`${t},${e}`;z=`https://api.aladhan.com/v1/timingsByAddress/${C}?address=${encodeURIComponent(rt)}`}const at=await(await fetch(z)).json();if(!R&&at.data){const rt=at.data.timings,gt={Fajr:rt.Fajr,Dhuhr:rt.Dhuhr,Asr:rt.Asr,Maghrib:rt.Maghrib,Isha:rt.Isha};m(gt),EO(l,t,e,gt)}}catch(C){R||E(C.message)}finally{R||g(!1)}}return V(),()=>{R=!0}},[l,t,e,i,a]),{times:c,loading:p,error:T}}const bO=["pre-fajr","fajr-dhuhr","dhuhr-asr","asr-maghrib","maghrib-isha","post-isha"],AO={"pre-fajr":"Pre-Fajr","fajr-dhuhr":"Fajr  Dhuhr","dhuhr-asr":"Dhuhr  Asr","asr-maghrib":"Asr  Maghrib","maghrib-isha":"Maghrib  Isha","post-isha":"Post-Isha"};function Uu(r){const[t,e]=r.split(":").map(Number);return t*60+e}function IO(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function wO(r){if(!r)return null;const t=Uu(r.Fajr),e=Uu(r.Dhuhr),i=Uu(r.Asr),a=Uu(r.Maghrib),l=Uu(r.Isha);return{"pre-fajr":{start:"00:00",end:r.Fajr,startMin:0,endMin:t},"fajr-dhuhr":{start:r.Fajr,end:r.Dhuhr,startMin:t,endMin:e},"dhuhr-asr":{start:r.Dhuhr,end:r.Asr,startMin:e,endMin:i},"asr-maghrib":{start:r.Asr,end:r.Maghrib,startMin:i,endMin:a},"maghrib-isha":{start:r.Maghrib,end:r.Isha,startMin:a,endMin:l},"post-isha":{start:r.Isha,end:"23:59",startMin:l,endMin:1439}}}function RO(r,t){if(!r.segment||!t||!t[r.segment])return r.time||"08:00";const i=t[r.segment].startMin+(r.offsetMinutes||0);return IO(Math.max(0,Math.min(1435,i)))}const zu=25;function CO(r){return r?[{id:"prayer-fajr",time:r.Fajr,activity:"Fajr",type:"prayer",icon:"",duration:zu,isPrayer:!0},{id:"prayer-dhuhr",time:r.Dhuhr,activity:"Dhuhr",type:"prayer",icon:"",duration:zu,isPrayer:!0},{id:"prayer-asr",time:r.Asr,activity:"Asr",type:"prayer",icon:"",duration:zu,isPrayer:!0},{id:"prayer-maghrib",time:r.Maghrib,activity:"Maghrib",type:"prayer",icon:"",duration:zu,isPrayer:!0},{id:"prayer-isha",time:r.Isha,activity:"Isha",type:"prayer",icon:"",duration:zu,isPrayer:!0}]:[]}const DO=60;function mw(r){const[t,e]=r.split(":").map(Number);return t*60+e}function NO(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function xO(r,t=5){return Math.max(0,Math.min(1435,Math.round(r/t)*t))}function VO(r){if(!r.length)return[];const t=r.map(p=>{const g=mw(p.time),T=p.duration||DO;return{...p,startMin:g,endMin:g+T}});t.sort((p,g)=>p.startMin-g.startMin||g.endMin-g.startMin-(p.endMin-p.startMin));const e=[],i=[];for(const p of t){let g=-1;for(let T=0;T<e.length;T++)if(e[T]<=p.startMin){g=T;break}g===-1&&(g=e.length,e.push(0)),e[g]=p.endMin,i.push({...p,col:g})}const a=[];let l=[],c=0;for(const p of i)l.length===0||p.startMin<c?(l.push(p),c=Math.max(c,p.endMin)):(a.push(l),l=[p],c=p.endMin);l.length&&a.push(l);const m=[];for(const p of a){const g=Math.max(...p.map(T=>T.col))+1;for(const T of p)m.push({...T,totalCols:g})}return m}const yi=60,xS=24,VS=60,MO=Array.from({length:24},(r,t)=>t),OO=["rgba(34, 139, 34, 0.03)","rgba(34, 139, 34, 0.06)"],MS={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},PO=["M","T","W","T","F","S","S"];function kO({date:r,plan:t,location:e,onOpenLocation:i,onUpdateBlocks:a,onMonth:l,onSelectDate:c,customTypes:m=[],customTypeColors:p={},onAddCustomType:g,onRemoveCustomType:T,pipelineSections:E=[],onAddSection:S,onUpdateSection:R,onDeleteSection:V,onToggleCollapse:C,onAddItem:z,onUpdateItem:$,onDeleteItem:at}){var Rt,Vt;const[rt,gt]=G.useState(null),[vt,ht]=G.useState(null),D=G.useRef(null),A=VM(Yy(r)),N=r===ic(),{times:P}=SO({date:r,city:e==null?void 0:e.city,country:e==null?void 0:e.country,lat:e==null?void 0:e.lat,lng:e==null?void 0:e.lng}),M=G.useMemo(()=>wO(P),[P]),U=G.useMemo(()=>CO(P),[P]),x=((Vt=(Rt=t==null?void 0:t.routine)==null?void 0:Rt[A])==null?void 0:Vt.blocks)||[],Kt=G.useMemo(()=>x.map(ut=>ut.segment&&M?{...ut,time:RO(ut,M)}:ut),[x,M]),Xt=G.useMemo(()=>{const ut=Kt.map(Yt=>({...Yt,duration:Yt.duration||VS}));return VO(ut).map(Yt=>({...Yt,top:Yt.startMin/60*yi,height:Math.max(Yt.duration/60*yi,xS)}))},[Kt]),J=G.useMemo(()=>U.map(ut=>{const Dt=mw(ut.time);return{...ut,startMin:Dt,top:Dt/60*yi,height:Math.max(ut.duration/60*yi,xS)}}),[U]),lt=G.useMemo(()=>M?bO.map((ut,Dt)=>{const Yt=M[ut],ye=Yt.startMin/60*yi,me=(Yt.endMin-Yt.startMin)/60*yi;return{id:ut,top:ye,height:me,color:OO[Dt%2],label:AO[ut]}}):[],[M]),Tt=ut=>{if(!t||ut.target.closest(".timeline-block")||ut.target.closest(".segment-label"))return;const Dt=D.current.getBoundingClientRect(),Yt=ut.clientY-Dt.top,ye=xO(Yt/yi*60),me=NO(ye),si=crypto.randomUUID(),qn={id:si,time:me,activity:"(New)",type:"neutral",icon:"",duration:VS,segment:null,offsetMinutes:0,tasks:[]};a(A,[...x,qn]),ht(si)},Mt=(ut,Dt)=>{const Yt=x.map(ye=>ye.id===ut?{...ye,time:Dt,segment:null,offsetMinutes:0}:ye);a(A,Yt)},Lt=(ut,Dt,Yt)=>{const ye=x.map(me=>me.id===ut?{...me,time:Dt,duration:Yt,segment:null,offsetMinutes:0}:me);a(A,ye)},k=ut=>{let Dt=x.map(Yt=>Yt.id===ut.id?ut:Yt);x.find(Yt=>Yt.id===ut.id)||Dt.push(ut),a(A,Dt),gt(null),ht(null)},tt=ut=>{a(A,x.filter(Dt=>Dt.id!==ut)),gt(null),ht(null)},Q=(ut,Dt)=>{const Yt=x.map(ye=>ye.id!==ut?ye:{...ye,tasks:(ye.tasks||[]).map(me=>me.id===Dt?{...me,done:!me.done}:me)});a(A,Yt)},ot=()=>{vt&&(a(A,x.filter(ut=>ut.id!==vt)),ht(null)),gt(null)},mt=new Date,pt=(mt.getHours()*60+mt.getMinutes())/60*yi;return I.jsxs("div",{className:"daily-view",children:[I.jsxs("div",{className:"daily-header",children:[I.jsx("button",{className:"daily-back",onClick:l,children:" Month"}),I.jsxs("div",{className:"daily-date-info",children:[I.jsx("span",{className:"daily-day-name",children:MS[A]}),I.jsxs("span",{className:"daily-date-str",children:[nd(r),N?" (today)":""]})]}),t&&I.jsx("span",{className:"daily-plan-badge",style:{borderColor:t.color,color:t.color},children:t.label})]}),I.jsx("div",{className:"day-selector",children:Qy.map((ut,Dt)=>I.jsx("button",{className:`day-btn${ut===A?" active":""}`,onClick:()=>c(PM(r,ut)),children:PO[Dt]},ut))}),P&&I.jsxs("div",{className:"prayer-banner",children:[I.jsxs("div",{className:"prayer-banner-title",onClick:i,style:{cursor:"pointer"},children:["PRAYER TIMES",e!=null&&e.city?`  ${e.city.toUpperCase()}`:""]}),I.jsx("div",{className:"prayer-times-row",children:Object.entries(P).map(([ut,Dt])=>I.jsxs("div",{className:"prayer-time-item",children:[I.jsx("span",{className:"prayer-name",children:ut}),I.jsx("span",{className:"prayer-time",children:Dt})]},ut))})]}),!t&&I.jsxs("div",{className:"daily-empty",children:["No plan covers this date. Create a plan that includes ",nd(r),"."]}),t&&x.length===0&&I.jsxs("div",{className:"daily-hint",children:["Tap the timeline to add your first block for ",MS[A],"."]}),I.jsx("div",{className:"timeline-scroll",children:I.jsxs("div",{className:"timeline",ref:D,style:{height:24*yi},onClick:Tt,children:[lt.map(ut=>I.jsx("div",{className:"segment-band",style:{top:ut.top,height:ut.height,background:ut.color},children:I.jsx("span",{className:"segment-label",children:ut.label})},ut.id)),MO.map(ut=>I.jsxs("div",{className:"hour-row",style:{top:ut*yi,height:yi},children:[I.jsx("span",{className:"hour-label",children:xM(ut*60)}),I.jsx("div",{className:"hour-line"})]},ut)),N&&I.jsx("div",{className:"now-line",style:{top:pt},children:I.jsx("div",{className:"now-dot"})}),J.map(ut=>I.jsx(DS,{block:ut,top:ut.top,height:ut.height,isPrayer:!0,onEdit:()=>{},onDelete:()=>{},onTimeChange:()=>{},onResize:()=>{}},ut.id)),Xt.map(ut=>I.jsx(DS,{block:ut,top:ut.top,height:ut.height,col:ut.col,totalCols:ut.totalCols,isNew:ut.id===vt,extraTypeColors:p,onEdit:Dt=>{ht(null),gt(Dt)},onDelete:tt,onTimeChange:Mt,onResize:Lt,onToggleTask:Q},ut.id))]})}),I.jsx(TO,{sections:E,addSection:S,updateSection:R,deleteSection:V,toggleCollapse:C,addItem:z,updateItem:$,deleteItem:at}),rt&&I.jsx(gO,{block:rt,segments:M,customTypes:m,customTypeColors:p,onAddCustomType:g,onRemoveCustomType:T,onSave:k,onDelete:tt,onClose:ot},rt.id+rt.time+(rt.duration||0))]})}function LO(r){const t=JSON.parse(r);if(Array.isArray(t))return{plans:t.map(e=>({...e,id:e.id||crypto.randomUUID()})),customTypes:[],pipelines:[]};if(t&&Array.isArray(t.plans))return{plans:t.plans.map(e=>({...e,id:e.id||crypto.randomUUID()})),customTypes:Array.isArray(t.customTypes)?t.customTypes:[],pipelines:Array.isArray(t.pipelines)?t.pipelines:[]};throw new Error("Unrecognized format")}function UO(r,t,e,i=[]){const a=new Set(t.map(m=>m.id)),l=new Set([...rw,...e.map(m=>m.key)]),c=new Set(i.map(m=>m.id));return{newPlans:r.plans.filter(m=>!a.has(m.id)),skippedPlans:r.plans.filter(m=>a.has(m.id)),newTypes:r.customTypes.filter(m=>!l.has(m.key)),skippedTypes:r.customTypes.filter(m=>l.has(m.key)),newPipelines:(r.pipelines||[]).filter(m=>!c.has(m.id)),skippedPipelines:(r.pipelines||[]).filter(m=>c.has(m.id))}}function zO({file:r,existingPlans:t,existingCustomTypes:e,existingPipelines:i=[],onConfirm:a,onClose:l}){const[c,m]=G.useState(null),[p,g]=G.useState(null),[T,E]=G.useState(null),[S,R]=G.useState(new Set),[V,C]=G.useState(new Set),[z,$]=G.useState(new Set);G.useState(()=>{const A=new FileReader;A.onload=N=>{try{const P=LO(N.target.result);if(P.plans.length===0&&P.customTypes.length===0){m("File contains no data to import.");return}const M=UO(P,t,e,i);g(P),E(M),R(new Set(M.newPlans.map(U=>U.id))),C(new Set(M.newTypes.map(U=>U.key))),$(new Set(M.newPipelines.map(U=>U.id)))}catch(P){m("Invalid file: "+P.message)}},A.readAsText(r)});const at=G.useCallback(A=>{R(N=>{const P=new Set(N);return P.has(A)?P.delete(A):P.add(A),P})},[]),rt=G.useCallback(A=>{C(N=>{const P=new Set(N);return P.has(A)?P.delete(A):P.add(A),P})},[]),gt=G.useCallback(A=>{$(N=>{const P=new Set(N);return P.has(A)?P.delete(A):P.add(A),P})},[]),vt=G.useCallback(()=>{if(!T)return;const A=T.newPlans.filter(M=>S.has(M.id)),N=T.newTypes.filter(M=>V.has(M.key)),P=T.newPipelines.filter(M=>z.has(M.id));a(A,N,P)},[T,S,V,z,a]),ht=S.size+V.size+z.size,D=T&&T.newPlans.length===0&&T.newTypes.length===0&&T.newPipelines.length===0;return I.jsx("div",{className:"modal-overlay",onClick:l,children:I.jsxs("div",{className:"modal",onClick:A=>A.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Import Data"}),c&&I.jsxs(I.Fragment,{children:[I.jsx("p",{style:{color:"#ef4444",fontSize:13,margin:"0 0 16px"},children:c}),I.jsx("div",{className:"modal-actions",children:I.jsx("button",{className:"btn-secondary",onClick:l,children:"Close"})})]}),!c&&!T&&I.jsx("p",{style:{color:"#94a3b8",fontSize:13},children:"Reading file..."}),T&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),T.newPlans.length>0&&I.jsx("div",{className:"import-items",children:T.newPlans.map(A=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:S.has(A.id),onChange:()=>at(A.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:A.label}),A.startDate&&I.jsxs("span",{className:"import-item-date",children:[A.startDate,"  ",A.endDate]})]},A.id))}),T.skippedPlans.length>0&&I.jsx("div",{className:"import-items",children:T.skippedPlans.map(A=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:A.label})]},A.id))}),p.plans.length===0&&I.jsx("p",{className:"import-empty",children:"No plans in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),T.newTypes.length>0&&I.jsx("div",{className:"import-items",children:T.newTypes.map(A=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:V.has(A.key),onChange:()=>rt(A.key)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:A.name})]},A.key))}),T.skippedTypes.length>0&&I.jsx("div",{className:"import-items",children:T.skippedTypes.map(A=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:A.name||A.key})]},A.key))}),p.customTypes.length===0&&I.jsx("p",{className:"import-empty",children:"No custom types in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),T.newPipelines.length>0&&I.jsx("div",{className:"import-items",children:T.newPipelines.map(A=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:z.has(A.id),onChange:()=>gt(A.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:A.title}),I.jsxs("span",{className:"import-item-date",children:[(A.items||[]).length," items"]})]},A.id))}),T.skippedPipelines.length>0&&I.jsx("div",{className:"import-items",children:T.skippedPipelines.map(A=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:A.title})]},A.id))}),(p.pipelines||[]).length===0&&I.jsx("p",{className:"import-empty",children:"No pipeline sections in file"})]}),D&&I.jsx("p",{style:{color:"#f59e0b",fontSize:13,marginTop:8},children:"Everything already exists. Nothing to import."}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:l,children:"Cancel"}),!D&&I.jsxs("button",{className:"btn-primary",onClick:vt,disabled:ht===0,children:["Import",ht>0?` ${ht} item${ht!==1?"s":""}`:""]})]})]})]})})}function jO({plans:r,customTypes:t,pipelineSections:e=[],onClose:i}){const[a,l]=G.useState(()=>new Set(r.map(C=>C.id))),[c,m]=G.useState(()=>new Set(t.map(C=>C.key))),[p,g]=G.useState(()=>new Set(e.map(C=>C.id))),T=G.useCallback(C=>{l(z=>{const $=new Set(z);return $.has(C)?$.delete(C):$.add(C),$})},[]),E=G.useCallback(C=>{m(z=>{const $=new Set(z);return $.has(C)?$.delete(C):$.add(C),$})},[]),S=G.useCallback(C=>{g(z=>{const $=new Set(z);return $.has(C)?$.delete(C):$.add(C),$})},[]),R=a.size+c.size+p.size,V=G.useCallback(()=>{const C=r.filter(ht=>a.has(ht.id)),z=t.filter(ht=>c.has(ht.key)).map(ht=>({key:ht.key,name:ht.name})),$=e.filter(ht=>p.has(ht.id)),at={version:2,plans:C,customTypes:z,pipelines:$},rt=new Blob([JSON.stringify(at,null,2)],{type:"application/json"}),gt=URL.createObjectURL(rt),vt=document.createElement("a");vt.href=gt,vt.download="entrypoint-v2-plans.json",vt.click(),URL.revokeObjectURL(gt),i()},[r,t,e,a,c,p,i]);return I.jsx("div",{className:"modal-overlay",onClick:i,children:I.jsxs("div",{className:"modal",onClick:C=>C.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Export Data"}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),r.length>0?I.jsx("div",{className:"import-items",children:r.map(C=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:a.has(C.id),onChange:()=>T(C.id)}),I.jsx("span",{className:"import-item-label",children:C.label}),C.startDate&&I.jsxs("span",{className:"import-item-date",children:[C.startDate,"  ",C.endDate]})]},C.id))}):I.jsx("p",{className:"import-empty",children:"No plans to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),t.length>0?I.jsx("div",{className:"import-items",children:t.map(C=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:c.has(C.key),onChange:()=>E(C.key)}),I.jsx("span",{className:"import-item-label",children:C.name})]},C.key))}):I.jsx("p",{className:"import-empty",children:"No custom types to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),e.length>0?I.jsx("div",{className:"import-items",children:e.map(C=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:p.has(C.id),onChange:()=>S(C.id)}),I.jsx("span",{className:"import-item-label",children:C.title}),I.jsxs("span",{className:"import-item-date",children:[(C.items||[]).length," items"]})]},C.id))}):I.jsx("p",{className:"import-empty",children:"No pipeline sections to export"})]}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:i,children:"Cancel"}),I.jsxs("button",{className:"btn-primary",onClick:V,disabled:R===0,children:["Export",R>0?` ${R} item${R!==1?"s":""}`:""]})]})]})})}function BO({onSave:r,onClose:t}){const[e,i]=G.useState(""),[a,l]=G.useState("");G.useEffect(()=>{const p=g=>{g.key==="Escape"&&t&&t()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[t]);const c=()=>{const p=e.trim(),g=a.trim();!p||!g||r({city:p,country:g})},m=p=>{p.key==="Enter"&&c()};return I.jsx("div",{className:"modal-overlay",onClick:t||void 0,children:I.jsxs("div",{className:"modal",onClick:p=>p.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:"Set Your Location"}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 16px",lineHeight:1.5},children:"Used to calculate prayer times."}),I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[I.jsx("input",{className:"modal-input",placeholder:"City (e.g. Lyon)",value:e,onChange:p=>i(p.target.value),onKeyDown:m,autoFocus:!0}),I.jsx("input",{className:"modal-input",placeholder:"Country (e.g. France)",value:a,onChange:p=>l(p.target.value),onKeyDown:m})]}),I.jsxs("div",{className:"modal-actions",children:[t&&I.jsx("button",{className:"btn-secondary",onClick:t,children:"Cancel"}),I.jsx("button",{className:"btn-primary",onClick:c,disabled:!e.trim()||!a.trim(),children:"Save"})]})]})})}function OS(){const r=Ky(),t=(r==null?void 0:r.user)||null,e=(r==null?void 0:r.logout)||null,{plans:i,loading:a,activePlan:l,activePlanId:c,setActivePlanId:m,createPlan:p,updatePlan:g,deletePlan:T,updateRoutineBlocks:E,getPlanForDate:S,mergePlans:R}=YM((t==null?void 0:t.uid)||null),{selectedDate:V,setSelectedDate:C,today:z,viewYear:$,viewMonth:at,prevMonth:rt,nextMonth:gt,setViewYearMonth:vt}=tO(),{customTypes:ht,customTypeColors:D,addCustomType:A,removeCustomType:N,mergeCustomTypes:P}=aO(),{location:M,setLocation:U,hasLocation:x,geoFailed:Kt}=uO(),[Xt,J]=G.useState(!1),{sections:lt,addSection:Tt,updateSection:Mt,deleteSection:Lt,reorderSections:k,toggleCollapse:tt,addItem:Q,updateItem:ot,deleteItem:mt,mergeSections:it}=WM((t==null?void 0:t.uid)||null),pt=G.useRef(null),[Rt,Vt]=G.useState(null),[ut,Dt]=G.useState(!1),[Yt,ye]=G.useState("daily"),[me,si]=G.useState(null),[qn,ss]=G.useState(null),[zr,Ee]=G.useState(!1),Re=G.useCallback((Bt,Se,wi)=>{Bt.length>0&&R(Bt),Se.length>0&&P(Se),wi&&wi.length>0&&it(wi),ss(null)},[R,P,it]),Fn=G.useCallback(Bt=>{if(!Bt.startDate)return;m(Bt.id),C(Bt.startDate);const Se=new Date(Bt.startDate+"T00:00:00");vt(Se.getFullYear(),Se.getMonth()),si(Bt.startDate),setTimeout(()=>si(null),1500)},[vt,C,m]),Cl=G.useCallback(Bt=>{const Se=i.find(wi=>wi.id===Bt);Se!=null&&Se.startDate?Fn(Se):m(Bt)},[i,Fn,m]),jr=G.useCallback(Bt=>{C(Bt);const Se=S(Bt);Se&&m(Se.id),ye("daily")},[C,S,m]),en=G.useCallback(Bt=>{C(Bt);const Se=S(Bt);Se&&m(Se.id)},[C,S,m]),rs=G.useCallback(()=>{ye("calendar")},[]),bi=S(V),Ai=l&&(bi==null?void 0:bi.id)===l.id?l:bi,Ii=G.useCallback((Bt,Se)=>{Ai&&E(Ai.id,Bt,Se)},[Ai,E]);return a?I.jsx("div",{className:"loading",children:"loading plans..."}):I.jsxs("div",{className:"app",children:[I.jsxs("header",{className:"app-header",children:[I.jsxs("div",{children:[I.jsx("div",{className:"header-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"header-title",children:"Lock-In"}),I.jsx("div",{className:"header-quote",children:'"While enjoying every single day on the way."'})]}),I.jsxs("div",{className:"header-actions",children:[I.jsx("button",{className:"header-btn",onClick:()=>Ee(!0),title:"Export",children:"Export"}),I.jsx("button",{className:"header-btn",onClick:()=>{var Bt;return(Bt=pt.current)==null?void 0:Bt.click()},title:"Import",children:"Import"}),I.jsx("input",{ref:pt,type:"file",accept:".json",hidden:!0,onChange:Bt=>{Bt.target.files[0]&&ss(Bt.target.files[0]),Bt.target.value=""}}),e&&I.jsx("button",{className:"logout-btn",onClick:e,children:"Logout"})]})]}),I.jsx(cO,{plans:i,activePlanId:l==null?void 0:l.id,onSelect:Cl,onCreate:()=>Dt(!0),onEdit:Vt,onDelete:T}),Yt==="calendar"?I.jsx(mO,{viewYear:$,viewMonth:at,selectedDate:V,today:z,plans:i,highlightDate:me,onPrevMonth:rt,onNextMonth:gt,onGoToday:()=>jr(z),onSelectDate:jr,onPlanClick:Fn}):I.jsx(kO,{date:V,plan:Ai,location:M,onOpenLocation:()=>J(!0),onUpdateBlocks:Ii,onSelectDate:en,onMonth:rs,customTypes:ht,customTypeColors:D,onAddCustomType:A,onRemoveCustomType:N,pipelineSections:lt,onAddSection:Tt,onUpdateSection:Mt,onDeleteSection:Lt,onToggleCollapse:tt,onAddItem:Q,onUpdateItem:ot,onDeleteItem:mt}),ut&&I.jsx(RS,{plan:null,plans:i,onSave:Bt=>{p(Bt),Dt(!1)},onClose:()=>Dt(!1)}),Rt&&I.jsx(RS,{plan:Rt,plans:i,onSave:Bt=>{g(Rt.id,Bt),Vt(null)},onClose:()=>Vt(null)}),zr&&I.jsx(jO,{plans:i,customTypes:ht,pipelineSections:lt,onClose:()=>Ee(!1)}),qn&&I.jsx(zO,{file:qn,existingPlans:i,existingCustomTypes:ht,existingPipelines:lt,onConfirm:Re,onClose:()=>ss(null)}),(!x&&Kt||Xt)&&I.jsx(BO,{onSave:Bt=>{U(Bt),J(!1)},onClose:x?()=>J(!1):void 0})]})}tR.createRoot(document.getElementById("root")).render(I.jsx(G.StrictMode,{children:yl?I.jsx(wM,{children:I.jsx(CM,{children:I.jsx(OS,{})})}):I.jsx(OS,{})}));
