(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function VC(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var dg={exports:{}},Ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function PC(){if(yb)return Ju;yb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Ju.Fragment=e,Ju.jsx=t,Ju.jsxs=t,Ju}var _b;function kC(){return _b||(_b=1,dg.exports=PC()),dg.exports}var I=kC(),mg={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function LC(){if(vb)return ze;vb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function w(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,M={};function U(z,ne,Q){this.props=z,this.context=ne,this.refs=M,this.updater=Q||k}U.prototype.isReactComponent={},U.prototype.setState=function(z,ne){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ne,"setState")},U.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function G(){}G.prototype=U.prototype;function q(z,ne,Q){this.props=z,this.context=ne,this.refs=M,this.updater=Q||k}var se=q.prototype=new G;se.constructor=q,x(se,U.prototype),se.isPureReactComponent=!0;var ae=Array.isArray;function Z(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(z,ne,Q){var he=Q.ref;return{$$typeof:i,type:z,key:ne,ref:he!==void 0?he:null,props:Q}}function V(z,ne){return N(z.type,ne,z.props)}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function j(z){var ne={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Q){return ne[Q]})}var P=/\/+/g;function Ae(z,ne){return typeof z=="object"&&z!==null&&z.key!=null?j(""+z.key):ne.toString(36)}function Me(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Z,Z):(z.status="pending",z.then(function(ne){z.status==="pending"&&(z.status="fulfilled",z.value=ne)},function(ne){z.status==="pending"&&(z.status="rejected",z.reason=ne)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function X(z,ne,Q,he,ge){var ye=typeof z;(ye==="undefined"||ye==="boolean")&&(z=null);var xe=!1;if(z===null)xe=!0;else switch(ye){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(z.$$typeof){case i:case e:xe=!0;break;case _:return xe=z._init,X(xe(z._payload),ne,Q,he,ge)}}if(xe)return ge=ge(z),xe=he===""?"."+Ae(z,0):he,ae(ge)?(Q="",xe!=null&&(Q=xe.replace(P,"$&/")+"/"),X(ge,ne,Q,"",function(je){return je})):ge!=null&&(O(ge)&&(ge=V(ge,Q+(ge.key==null||z&&z.key===ge.key?"":(""+ge.key).replace(P,"$&/")+"/")+xe)),ne.push(ge)),1;xe=0;var Ge=he===""?".":he+":";if(ae(z))for(var Pe=0;Pe<z.length;Pe++)he=z[Pe],ye=Ge+Ae(he,Pe),xe+=X(he,ne,Q,ye,ge);else if(Pe=w(z),typeof Pe=="function")for(z=Pe.call(z),Pe=0;!(he=z.next()).done;)he=he.value,ye=Ge+Ae(he,Pe++),xe+=X(he,ne,Q,ye,ge);else if(ye==="object"){if(typeof z.then=="function")return X(Me(z),ne,Q,he,ge);throw ne=String(z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return xe}function ue(z,ne,Q){if(z==null)return z;var he=[],ge=0;return X(z,he,"","",function(ye){return ne.call(Q,ye,ge++)}),he}function _e(z){if(z._status===-1){var ne=z._result;ne=ne(),ne.then(function(Q){(z._status===0||z._status===-1)&&(z._status=1,z._result=Q)},function(Q){(z._status===0||z._status===-1)&&(z._status=2,z._result=Q)}),z._status===-1&&(z._status=0,z._result=ne)}if(z._status===1)return z._result.default;throw z._result}var De=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Be={map:ue,forEach:function(z,ne,Q){ue(z,function(){ne.apply(this,arguments)},Q)},count:function(z){var ne=0;return ue(z,function(){ne++}),ne},toArray:function(z){return ue(z,function(ne){return ne})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return ze.Activity=E,ze.Children=Be,ze.Component=U,ze.Fragment=t,ze.Profiler=a,ze.PureComponent=q,ze.StrictMode=r,ze.Suspense=m,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,ze.__COMPILER_RUNTIME={__proto__:null,c:function(z){return C.H.useMemoCache(z)}},ze.cache=function(z){return function(){return z.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(z,ne,Q){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var he=x({},z.props),ge=z.key;if(ne!=null)for(ye in ne.key!==void 0&&(ge=""+ne.key),ne)!S.call(ne,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ne.ref===void 0||(he[ye]=ne[ye]);var ye=arguments.length-2;if(ye===1)he.children=Q;else if(1<ye){for(var xe=Array(ye),Ge=0;Ge<ye;Ge++)xe[Ge]=arguments[Ge+2];he.children=xe}return N(z.type,ge,he)},ze.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},ze.createElement=function(z,ne,Q){var he,ge={},ye=null;if(ne!=null)for(he in ne.key!==void 0&&(ye=""+ne.key),ne)S.call(ne,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ge[he]=ne[he]);var xe=arguments.length-2;if(xe===1)ge.children=Q;else if(1<xe){for(var Ge=Array(xe),Pe=0;Pe<xe;Pe++)Ge[Pe]=arguments[Pe+2];ge.children=Ge}if(z&&z.defaultProps)for(he in xe=z.defaultProps,xe)ge[he]===void 0&&(ge[he]=xe[he]);return N(z,ye,ge)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(z){return{$$typeof:f,render:z}},ze.isValidElement=O,ze.lazy=function(z){return{$$typeof:_,_payload:{_status:-1,_result:z},_init:_e}},ze.memo=function(z,ne){return{$$typeof:g,type:z,compare:ne===void 0?null:ne}},ze.startTransition=function(z){var ne=C.T,Q={};C.T=Q;try{var he=z(),ge=C.S;ge!==null&&ge(Q,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Z,De)}catch(ye){De(ye)}finally{ne!==null&&Q.types!==null&&(ne.types=Q.types),C.T=ne}},ze.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},ze.use=function(z){return C.H.use(z)},ze.useActionState=function(z,ne,Q){return C.H.useActionState(z,ne,Q)},ze.useCallback=function(z,ne){return C.H.useCallback(z,ne)},ze.useContext=function(z){return C.H.useContext(z)},ze.useDebugValue=function(){},ze.useDeferredValue=function(z,ne){return C.H.useDeferredValue(z,ne)},ze.useEffect=function(z,ne){return C.H.useEffect(z,ne)},ze.useEffectEvent=function(z){return C.H.useEffectEvent(z)},ze.useId=function(){return C.H.useId()},ze.useImperativeHandle=function(z,ne,Q){return C.H.useImperativeHandle(z,ne,Q)},ze.useInsertionEffect=function(z,ne){return C.H.useInsertionEffect(z,ne)},ze.useLayoutEffect=function(z,ne){return C.H.useLayoutEffect(z,ne)},ze.useMemo=function(z,ne){return C.H.useMemo(z,ne)},ze.useOptimistic=function(z,ne){return C.H.useOptimistic(z,ne)},ze.useReducer=function(z,ne,Q){return C.H.useReducer(z,ne,Q)},ze.useRef=function(z){return C.H.useRef(z)},ze.useState=function(z){return C.H.useState(z)},ze.useSyncExternalStore=function(z,ne,Q){return C.H.useSyncExternalStore(z,ne,Q)},ze.useTransition=function(){return C.H.useTransition()},ze.version="19.2.4",ze}var Eb;function My(){return Eb||(Eb=1,mg.exports=LC()),mg.exports}var D=My();const Ot=VC(D);var pg={exports:{}},Wu={},gg={exports:{}},yg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function UC(){return Tb||(Tb=1,(function(i){function e(X,ue){var _e=X.length;X.push(ue);e:for(;0<_e;){var De=_e-1>>>1,Be=X[De];if(0<a(Be,ue))X[De]=ue,X[_e]=Be,_e=De;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ue=X[0],_e=X.pop();if(_e!==ue){X[0]=_e;e:for(var De=0,Be=X.length,z=Be>>>1;De<z;){var ne=2*(De+1)-1,Q=X[ne],he=ne+1,ge=X[he];if(0>a(Q,_e))he<Be&&0>a(ge,Q)?(X[De]=ge,X[he]=_e,De=he):(X[De]=Q,X[ne]=_e,De=ne);else if(he<Be&&0>a(ge,_e))X[De]=ge,X[he]=_e,De=he;else break e}}return ue}function a(X,ue){var _e=X.sortIndex-ue.sortIndex;return _e!==0?_e:X.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var m=[],g=[],_=1,E=null,b=3,w=!1,k=!1,x=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function se(X){for(var ue=t(g);ue!==null;){if(ue.callback===null)r(g);else if(ue.startTime<=X)r(g),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(g)}}function ae(X){if(x=!1,se(X),!k)if(t(m)!==null)k=!0,Z||(Z=!0,j());else{var ue=t(g);ue!==null&&Me(ae,ue.startTime-X)}}var Z=!1,C=-1,S=5,N=-1;function V(){return M?!0:!(i.unstable_now()-N<S)}function O(){if(M=!1,Z){var X=i.unstable_now();N=X;var ue=!0;try{e:{k=!1,x&&(x=!1,G(C),C=-1),w=!0;var _e=b;try{t:{for(se(X),E=t(m);E!==null&&!(E.expirationTime>X&&V());){var De=E.callback;if(typeof De=="function"){E.callback=null,b=E.priorityLevel;var Be=De(E.expirationTime<=X);if(X=i.unstable_now(),typeof Be=="function"){E.callback=Be,se(X),ue=!0;break t}E===t(m)&&r(m),se(X)}else r(m);E=t(m)}if(E!==null)ue=!0;else{var z=t(g);z!==null&&Me(ae,z.startTime-X),ue=!1}}break e}finally{E=null,b=_e,w=!1}ue=void 0}}finally{ue?j():Z=!1}}}var j;if(typeof q=="function")j=function(){q(O)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ae=P.port2;P.port1.onmessage=O,j=function(){Ae.postMessage(null)}}else j=function(){U(O,0)};function Me(X,ue){C=U(function(){X(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(X){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var _e=b;b=ue;try{return X()}finally{b=_e}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(X,ue){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _e=b;b=X;try{return ue()}finally{b=_e}},i.unstable_scheduleCallback=function(X,ue,_e){var De=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?De+_e:De):_e=De,X){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=_e+Be,X={id:_++,callback:ue,priorityLevel:X,startTime:_e,expirationTime:Be,sortIndex:-1},_e>De?(X.sortIndex=_e,e(g,X),t(m)===null&&X===t(g)&&(x?(G(C),C=-1):x=!0,Me(ae,_e-De))):(X.sortIndex=Be,e(m,X),k||w||(k=!0,Z||(Z=!0,j()))),X},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(X){var ue=b;return function(){var _e=b;b=ue;try{return X.apply(this,arguments)}finally{b=_e}}}})(yg)),yg}var bb;function jC(){return bb||(bb=1,gg.exports=UC()),gg.exports}var _g={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function zC(){if(Sb)return Vn;Sb=1;var i=My();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Vn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},Vn.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},Vn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Vn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Vn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:w}):_==="script"&&r.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Vn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=f(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Vn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Vn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=f(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Vn.requestFormReset=function(m){r.d.r(m)},Vn.unstable_batchedUpdates=function(m,g){return m(g)},Vn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},Vn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Vn.version="19.2.4",Vn}var Ab;function JS(){if(Ab)return _g.exports;Ab=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),_g.exports=zC(),_g.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wb;function BC(){if(wb)return Wu;wb=1;var i=jC(),e=My(),t=JS();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,u=s;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return m(d),n;if(p===u)return m(d),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=d,u=p;else{for(var v=!1,A=d.child;A;){if(A===o){v=!0,o=d,u=p;break}if(A===u){v=!0,u=d,o=p;break}A=A.sibling}if(!v){for(A=p.child;A;){if(A===o){v=!0,o=p,u=d;break}if(A===u){v=!0,u=p,o=d;break}A=A.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),q=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var P=Symbol.for("react.client.reference");function Ae(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===P?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case U:return"Profiler";case M:return"StrictMode";case ae:return"Suspense";case Z:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case q:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case se:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return s=n.displayName||null,s!==null?s:Ae(n.type)||"Memo";case S:s=n._payload,n=n._init;try{return Ae(n(s))}catch{}}return null}var Me=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},De=[],Be=-1;function z(n){return{current:n}}function ne(n){0>Be||(n.current=De[Be],De[Be]=null,Be--)}function Q(n,s){Be++,De[Be]=n.current,n.current=s}var he=z(null),ge=z(null),ye=z(null),xe=z(null);function Ge(n,s){switch(Q(ye,s),Q(ge,n),Q(he,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?zT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=zT(s),n=BT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(he),Q(he,n)}function Pe(){ne(he),ne(ge),ne(ye)}function je(n){n.memoizedState!==null&&Q(xe,n);var s=he.current,o=BT(s,n.type);s!==o&&(Q(ge,n),Q(he,o))}function Mt(n){ge.current===n&&(ne(he),ne(ge)),xe.current===n&&(ne(xe),Yu._currentValue=_e)}var vt,Pt;function J(n){if(vt===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);vt=s&&s[1]||"",Pt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vt+n+Pt}var pe=!1;function Te(n,s){if(!n||pe)return"";pe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(te){var W=te}Reflect.construct(n,[],le)}else{try{le.call()}catch(te){W=te}n.call(le.prototype)}}else{try{throw Error()}catch(te){W=te}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(te){if(te&&W&&typeof te.stack=="string")return[te.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],A=p[1];if(v&&A){var L=v.split(`
`),$=A.split(`
`);for(d=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;if(u===L.length||d===$.length)for(u=L.length-1,d=$.length-1;1<=u&&0<=d&&L[u]!==$[d];)d--;for(;1<=u&&0<=d;u--,d--)if(L[u]!==$[d]){if(u!==1||d!==1)do if(u--,d--,0>d||L[u]!==$[d]){var re=`
`+L[u].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=u&&0<=d);break}}}finally{pe=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?J(o):""}function ke(n,s){switch(n.tag){case 26:case 27:case 5:return J(n.type);case 16:return J("Lazy");case 13:return n.child!==s&&s!==null?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return Te(n.type,!1);case 11:return Te(n.type.render,!1);case 1:return Te(n.type,!0);case 31:return J("Activity");default:return""}}function Oe(n){try{var s="",o=null;do s+=ke(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ie=Object.prototype.hasOwnProperty,Ue=i.unstable_scheduleCallback,jt=i.unstable_cancelCallback,Wi=i.unstable_shouldYield,Zi=i.unstable_requestPaint,Qt=i.unstable_now,ki=i.unstable_getCurrentPriorityLevel,vi=i.unstable_ImmediatePriority,Tn=i.unstable_UserBlockingPriority,bn=i.unstable_NormalPriority,qe=i.unstable_LowPriority,Tt=i.unstable_IdlePriority,on=i.log,ua=i.unstable_setDisableYieldValue,ii=null,ln=null;function xn(n){if(typeof on=="function"&&ua(n),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(ii,n)}catch{}}var wt=Math.clz32?Math.clz32:co,uo=Math.log,Cr=Math.LN2;function co(n){return n>>>=0,n===0?32:31-(uo(n)/Cr|0)|0}var Ei=256,Dr=262144,Qe=4194304;function It(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rt(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,p=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?d=It(u):(v&=A,v!==0?d=It(v):o||(o=A&~n,o!==0&&(d=It(o))))):(A=u&~p,A!==0?d=It(A):v!==0?d=It(v):o||(o=u&~n,o!==0&&(d=It(o)))),d===0?0:s!==0&&s!==d&&(s&p)===0&&(p=d&-d,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:d}function $t(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Nn(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mn(){var n=Qe;return Qe<<=1,(Qe&62914560)===0&&(Qe=4194304),n}function zt(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Yn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Bt(n,s,o,u,d,p){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,L=n.expirationTimes,$=n.hiddenUpdates;for(o=v&~o;0<o;){var re=31-wt(o),le=1<<re;A[re]=0,L[re]=-1;var W=$[re];if(W!==null)for($[re]=null,re=0;re<W.length;re++){var te=W[re];te!==null&&(te.lane&=-536870913)}o&=~le}u!==0&&Mn(n,u,0),p!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=p&~(v&~s))}function Mn(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-wt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function On(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-wt(o),d=1<<u;d&s|n[u]&s&&(n[u]|=s),o&=~d}}function zn(n,s){var o=s&-s;return o=(o&42)!==0?1:ri(o),(o&(n.suspendedLanes|s))!==0?0:o}function ri(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Bn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function si(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:cb(n.type))}function Sn(n,s){var o=ue.p;try{return ue.p=n,s()}finally{ue.p=o}}var qn=Math.random().toString(36).slice(2),Xt="__reactFiber$"+qn,pn="__reactProps$"+qn,er="__reactContainer$"+qn,ho="__reactEvents$"+qn,vm="__reactListeners$"+qn,fh="__reactHandles$"+qn,dh="__reactResources$"+qn,tr="__reactMarker$"+qn;function fo(n){delete n[Xt],delete n[pn],delete n[ho],delete n[vm],delete n[fh]}function nr(n){var s=n[Xt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[er]||o[Xt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=QT(n);n!==null;){if(o=n[Xt])return o;n=QT(n)}return s}n=o,o=n.parentNode}return null}function Ti(n){if(n=n[Xt]||n[er]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function ai(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function ir(n){var s=n[dh];return s||(s=n[dh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Jt(n){n[tr]=!0}var eu=new Set,tu={};function rr(n,s){sr(n,s),sr(n+"Capture",s)}function sr(n,s){for(tu[n]=s,n=0;n<s.length;n++)eu.add(s[n])}var nu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),iu={},ru={};function mh(n){return Ie.call(ru,n)?!0:Ie.call(iu,n)?!1:nu.test(n)?ru[n]=!0:(iu[n]=!0,!1)}function mo(n,s,o){if(mh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function oi(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Wt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function gn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function as(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function su(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,p=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ut(n){if(!n._valueTracker){var s=as(n)?"checked":"value";n._valueTracker=su(n,s,""+n[s])}}function ca(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=as(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function ar(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ha=/[\n"\\]/g;function Qn(n){return n.replace(ha,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function po(n,s,o,u,d,p,v,A){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+gn(s)):n.value!==""+gn(s)&&(n.value=""+gn(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?au(n,v,gn(s)):o!=null?au(n,v,gn(o)):u!=null&&n.removeAttribute("value"),d==null&&p!=null&&(n.defaultChecked=!!p),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+gn(A):n.removeAttribute("name")}function ph(n,s,o,u,d,p,v,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){ut(n);return}o=o!=null?""+gn(o):"",s=s!=null?""+gn(s):o,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),ut(n)}function au(n,s,o){s==="number"&&ar(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function os(n,s,o,u){if(n=n.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=s.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+gn(o),s=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function gh(n,s,o){if(s!=null&&(s=""+gn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+gn(o):""}function ls(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Me(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=gn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),ut(n)}function $n(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var yh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||yh.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function lu(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&ou(n,d,u)}else for(var p in s)s.hasOwnProperty(p)&&ou(n,p,s[p])}function go(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),us=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yo(n){return us.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Li(){}var uu=null;function bi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var cs=null,or=null;function fa(n){var s=Ti(n);if(s&&(n=s.stateNode)){var o=n[pn]||null;e:switch(n=s.stateNode,s.type){case"input":if(po(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Qn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var d=u[pn]||null;if(!d)throw Error(r(90));po(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&ca(u)}break e;case"textarea":gh(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&os(n,!!o.multiple,s,!1)}}}var _o=!1;function hs(n,s,o){if(_o)return n(s,o);_o=!0;try{var u=n(s);return u}finally{if(_o=!1,(cs!==null||or!==null)&&(ff(),cs&&(s=cs,n=or,or=cs=null,fa(s),n)))for(s=0;s<n.length;s++)fa(n[s])}}function Ui(n,s){var o=n.stateNode;if(o===null)return null;var u=o[pn]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),da=!1;if(Si)try{var pt={};Object.defineProperty(pt,"passive",{get:function(){da=!0}}),window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{da=!1}var lr=null,cu=null,ma=null;function hu(){if(ma)return ma;var n,s=cu,o=s.length,u,d="value"in lr?lr.value:lr.textContent,p=d.length;for(n=0;n<o&&s[n]===d[n];n++);var v=o-n;for(u=1;u<=v&&s[o-u]===d[p-u];u++);return ma=d.slice(n,1<u?1-u:void 0)}function pa(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function xr(){return!0}function ji(){return!1}function An(n){function s(o,u,d,p,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?xr:ji,this.isPropagationStopped=ji,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),s}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=An(Nr),fs=E({},Nr,{view:0,detail:0}),fu=An(fs),ds,vo,cr,Eo=E({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==cr&&(cr&&n.type==="mousemove"?(ds=n.screenX-cr.screenX,vo=n.screenY-cr.screenY):vo=ds=0,cr=n),ds)},movementY:function(n){return"movementY"in n?n.movementY:vo}}),du=An(Eo),ga=E({},Eo,{dataTransfer:0}),vh=An(ga),Eh=E({},fs,{relatedTarget:0}),ya=An(Eh),mu=E({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Th=An(mu),To=E({},Nr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bh=An(To),Sh=E({},Nr,{data:0}),hr=An(Sh),Ah={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ih[n])?!!s[n]:!1}function ms(){return Rh}var Fn=E({},fs,{key:function(n){if(n.key){var s=Ah[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=pa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(n){return n.type==="keypress"?pa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?pa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ch=An(Fn),Dh=E({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mr=An(Dh),h=E({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),y=An(h),T=E({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=An(T),K=E({},Eo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=An(K),de=E({},Nr,{newState:0,oldState:0}),Fe=An(de),qt=[9,13,27,32],st=Si&&"CompositionEvent"in window,Ct=null;Si&&"documentMode"in document&&(Ct=document.documentMode);var Ai=Si&&"TextEvent"in window&&!Ct,fr=Si&&(!st||Ct&&8<Ct&&11>=Ct),zi=" ",Bi=!1;function _a(n,s){switch(n){case"keyup":return qt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var So=!1;function rR(n,s){switch(n){case"compositionend":return bo(s);case"keypress":return s.which!==32?null:(Bi=!0,zi);case"textInput":return n=s.data,n===zi&&Bi?null:n;default:return null}}function sR(n,s){if(So)return n==="compositionend"||!st&&_a(n,s)?(n=hu(),ma=cu=lr=null,So=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return fr&&s.locale!=="ko"?null:s.data;default:return null}}var aR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!aR[n.type]:s==="textarea"}function W_(n,s,o,u){cs?or?or.push(u):or=[u]:cs=u,s=vf(s,"onChange"),0<s.length&&(o=new ur("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var pu=null,gu=null;function oR(n){VT(n,0)}function xh(n){var s=ai(n);if(ca(s))return n}function Z_(n,s){if(n==="change")return s}var ev=!1;if(Si){var Em;if(Si){var Tm="oninput"in document;if(!Tm){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),Tm=typeof tv.oninput=="function"}Em=Tm}else Em=!1;ev=Em&&(!document.documentMode||9<document.documentMode)}function nv(){pu&&(pu.detachEvent("onpropertychange",iv),gu=pu=null)}function iv(n){if(n.propertyName==="value"&&xh(gu)){var s=[];W_(s,gu,n,bi(n)),hs(oR,s)}}function lR(n,s,o){n==="focusin"?(nv(),pu=s,gu=o,pu.attachEvent("onpropertychange",iv)):n==="focusout"&&nv()}function uR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xh(gu)}function cR(n,s){if(n==="click")return xh(s)}function hR(n,s){if(n==="input"||n==="change")return xh(s)}function fR(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var li=typeof Object.is=="function"?Object.is:fR;function yu(n,s){if(li(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!Ie.call(s,d)||!li(n[d],s[d]))return!1}return!0}function rv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function sv(n,s){var o=rv(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=rv(o)}}function av(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?av(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function ov(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ar(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=ar(n.document)}return s}function bm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var dR=Si&&"documentMode"in document&&11>=document.documentMode,Ao=null,Sm=null,_u=null,Am=!1;function lv(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Am||Ao==null||Ao!==ar(u)||(u=Ao,"selectionStart"in u&&bm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),_u&&yu(_u,u)||(_u=u,u=vf(Sm,"onSelect"),0<u.length&&(s=new ur("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ao)))}function va(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var wo={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},wm={},uv={};Si&&(uv=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function Ea(n){if(wm[n])return wm[n];if(!wo[n])return n;var s=wo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in uv)return wm[n]=s[o];return n}var cv=Ea("animationend"),hv=Ea("animationiteration"),fv=Ea("animationstart"),mR=Ea("transitionrun"),pR=Ea("transitionstart"),gR=Ea("transitioncancel"),dv=Ea("transitionend"),mv=new Map,Im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Im.push("scrollEnd");function qi(n,s){mv.set(n,s),rr(s,[n])}var Nh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},wi=[],Io=0,Rm=0;function Mh(){for(var n=Io,s=Rm=Io=0;s<n;){var o=wi[s];wi[s++]=null;var u=wi[s];wi[s++]=null;var d=wi[s];wi[s++]=null;var p=wi[s];if(wi[s++]=null,u!==null&&d!==null){var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}p!==0&&pv(o,d,p)}}function Oh(n,s,o,u){wi[Io++]=n,wi[Io++]=s,wi[Io++]=o,wi[Io++]=u,Rm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Cm(n,s,o,u){return Oh(n,s,o,u),Vh(n)}function Ta(n,s){return Oh(n,null,null,s),Vh(n)}function pv(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(d=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,d&&s!==null&&(d=31-wt(o),n=p.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=o|536870912),p):null}function Vh(n){if(50<zu)throw zu=0,Lp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ro={};function yR(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(n,s,o,u){return new yR(n,s,o,u)}function Dm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Or(n,s){var o=n.alternate;return o===null?(o=ui(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function gv(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Ph(n,s,o,u,d,p){var v=0;if(u=n,typeof n=="function")Dm(n)&&(v=1);else if(typeof n=="string")v=bC(n,o,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=ui(31,o,s,d),n.elementType=N,n.lanes=p,n;case x:return ba(o.children,d,p,s);case M:v=8,d|=24;break;case U:return n=ui(12,o,s,d|2),n.elementType=U,n.lanes=p,n;case ae:return n=ui(13,o,s,d),n.elementType=ae,n.lanes=p,n;case Z:return n=ui(19,o,s,d),n.elementType=Z,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:v=10;break e;case G:v=9;break e;case se:v=11;break e;case C:v=14;break e;case S:v=16,u=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=ui(v,o,s,d),s.elementType=n,s.type=u,s.lanes=p,s}function ba(n,s,o,u){return n=ui(7,n,u,s),n.lanes=o,n}function xm(n,s,o){return n=ui(6,n,null,s),n.lanes=o,n}function yv(n){var s=ui(18,null,null,0);return s.stateNode=n,s}function Nm(n,s,o){return s=ui(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var _v=new WeakMap;function Ii(n,s){if(typeof n=="object"&&n!==null){var o=_v.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Oe(s)},_v.set(n,s),s)}return{value:n,source:s,stack:Oe(s)}}var Co=[],Do=0,kh=null,vu=0,Ri=[],Ci=0,ps=null,dr=1,mr="";function Vr(n,s){Co[Do++]=vu,Co[Do++]=kh,kh=n,vu=s}function vv(n,s,o){Ri[Ci++]=dr,Ri[Ci++]=mr,Ri[Ci++]=ps,ps=n;var u=dr;n=mr;var d=32-wt(u)-1;u&=~(1<<d),o+=1;var p=32-wt(s)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,dr=1<<32-wt(s)+d|o<<d|u,mr=p+n}else dr=1<<p|o<<d|u,mr=n}function Mm(n){n.return!==null&&(Vr(n,1),vv(n,1,0))}function Om(n){for(;n===kh;)kh=Co[--Do],Co[Do]=null,vu=Co[--Do],Co[Do]=null;for(;n===ps;)ps=Ri[--Ci],Ri[Ci]=null,mr=Ri[--Ci],Ri[Ci]=null,dr=Ri[--Ci],Ri[Ci]=null}function Ev(n,s){Ri[Ci++]=dr,Ri[Ci++]=mr,Ri[Ci++]=ps,dr=s.id,mr=s.overflow,ps=n}var wn=null,St=null,tt=!1,gs=null,Di=!1,Vm=Error(r(519));function ys(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eu(Ii(s,n)),Vm}function Tv(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Xt]=n,s[pn]=u,o){case"dialog":Xe("cancel",s),Xe("close",s);break;case"iframe":case"object":case"embed":Xe("load",s);break;case"video":case"audio":for(o=0;o<qu.length;o++)Xe(qu[o],s);break;case"source":Xe("error",s);break;case"img":case"image":case"link":Xe("error",s),Xe("load",s);break;case"details":Xe("toggle",s);break;case"input":Xe("invalid",s),ph(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Xe("invalid",s);break;case"textarea":Xe("invalid",s),ls(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||UT(s.textContent,o)?(u.popover!=null&&(Xe("beforetoggle",s),Xe("toggle",s)),u.onScroll!=null&&Xe("scroll",s),u.onScrollEnd!=null&&Xe("scrollend",s),u.onClick!=null&&(s.onclick=Li),s=!0):s=!1,s||ys(n,!0)}function bv(n){for(wn=n.return;wn;)switch(wn.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:wn=wn.return}}function xo(n){if(n!==wn)return!1;if(!tt)return bv(n),tt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Wp(n.type,n.memoizedProps)),o=!o),o&&St&&ys(n),bv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));St=YT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));St=YT(n)}else s===27?(s=St,Ns(n.type)?(n=ig,ig=null,St=n):St=s):St=wn?Ni(n.stateNode.nextSibling):null;return!0}function Sa(){St=wn=null,tt=!1}function Pm(){var n=gs;return n!==null&&(Zn===null?Zn=n:Zn.push.apply(Zn,n),gs=null),n}function Eu(n){gs===null?gs=[n]:gs.push(n)}var km=z(null),Aa=null,Pr=null;function _s(n,s,o){Q(km,s._currentValue),s._currentValue=o}function kr(n){n._currentValue=km.current,ne(km)}function Lm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Um(n,s,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var p=d.dependencies;if(p!==null){var v=d.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=d;for(var L=0;L<s.length;L++)if(A.context===s[L]){p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),Lm(p.return,o,n),u||(v=null);break e}p=A.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(r(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),Lm(v,o,n),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===n){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function No(n,s,o,u){n=null;for(var d=s,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var A=d.type;li(d.pendingProps.value,v.value)||(n!==null?n.push(A):n=[A])}}else if(d===xe.current){if(v=d.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Yu):n=[Yu])}d=d.return}n!==null&&Um(s,n,o,u),s.flags|=262144}function Lh(n){for(n=n.firstContext;n!==null;){if(!li(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function wa(n){Aa=n,Pr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function In(n){return Sv(Aa,n)}function Uh(n,s){return Aa===null&&wa(n),Sv(n,s)}function Sv(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Pr===null){if(n===null)throw Error(r(308));Pr=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Pr=Pr.next=s;return o}var _R=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},vR=i.unstable_scheduleCallback,ER=i.unstable_NormalPriority,Zt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jm(){return{controller:new _R,data:new Map,refCount:0}}function Tu(n){n.refCount--,n.refCount===0&&vR(ER,function(){n.controller.abort()})}var bu=null,zm=0,Mo=0,Oo=null;function TR(n,s){if(bu===null){var o=bu=[];zm=0,Mo=Fp(),Oo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return zm++,s.then(Av,Av),s}function Av(){if(--zm===0&&bu!==null){Oo!==null&&(Oo.status="fulfilled");var n=bu;bu=null,Mo=0,Oo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function bR(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var wv=X.S;X.S=function(n,s){lT=Qt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&TR(n,s),wv!==null&&wv(n,s)};var Ia=z(null);function Bm(){var n=Ia.current;return n!==null?n:Et.pooledCache}function jh(n,s){s===null?Q(Ia,Ia.current):Q(Ia,s.pool)}function Iv(){var n=Bm();return n===null?null:{parent:Zt._currentValue,pool:n}}var Vo=Error(r(460)),qm=Error(r(474)),zh=Error(r(542)),Bh={then:function(){}};function Rv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Cv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Li,Li),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,xv(n),n;default:if(typeof s.status=="string")s.then(Li,Li);else{if(n=Et,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,xv(n),n}throw Ca=s,Vo}}function Ra(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ca=o,Vo):o}}var Ca=null;function Dv(){if(Ca===null)throw Error(r(459));var n=Ca;return Ca=null,n}function xv(n){if(n===Vo||n===zh)throw Error(r(483))}var Po=null,Su=0;function qh(n){var s=Su;return Su+=1,Po===null&&(Po=[]),Cv(Po,n,s)}function Au(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Fh(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Nv(n){function s(F,B){if(n){var Y=F.deletions;Y===null?(F.deletions=[B],F.flags|=16):Y.push(B)}}function o(F,B){if(!n)return null;for(;B!==null;)s(F,B),B=B.sibling;return null}function u(F){for(var B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function d(F,B){return F=Or(F,B),F.index=0,F.sibling=null,F}function p(F,B,Y){return F.index=Y,n?(Y=F.alternate,Y!==null?(Y=Y.index,Y<B?(F.flags|=67108866,B):Y):(F.flags|=67108866,B)):(F.flags|=1048576,B)}function v(F){return n&&F.alternate===null&&(F.flags|=67108866),F}function A(F,B,Y,oe){return B===null||B.tag!==6?(B=xm(Y,F.mode,oe),B.return=F,B):(B=d(B,Y),B.return=F,B)}function L(F,B,Y,oe){var Re=Y.type;return Re===x?re(F,B,Y.props.children,oe,Y.key):B!==null&&(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===S&&Ra(Re)===B.type)?(B=d(B,Y.props),Au(B,Y),B.return=F,B):(B=Ph(Y.type,Y.key,Y.props,null,F.mode,oe),Au(B,Y),B.return=F,B)}function $(F,B,Y,oe){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=Nm(Y,F.mode,oe),B.return=F,B):(B=d(B,Y.children||[]),B.return=F,B)}function re(F,B,Y,oe,Re){return B===null||B.tag!==7?(B=ba(Y,F.mode,oe,Re),B.return=F,B):(B=d(B,Y),B.return=F,B)}function le(F,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=xm(""+B,F.mode,Y),B.return=F,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return Y=Ph(B.type,B.key,B.props,null,F.mode,Y),Au(Y,B),Y.return=F,Y;case k:return B=Nm(B,F.mode,Y),B.return=F,B;case S:return B=Ra(B),le(F,B,Y)}if(Me(B)||j(B))return B=ba(B,F.mode,Y,null),B.return=F,B;if(typeof B.then=="function")return le(F,qh(B),Y);if(B.$$typeof===q)return le(F,Uh(F,B),Y);Fh(F,B)}return null}function W(F,B,Y,oe){var Re=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Re!==null?null:A(F,B,""+Y,oe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===Re?L(F,B,Y,oe):null;case k:return Y.key===Re?$(F,B,Y,oe):null;case S:return Y=Ra(Y),W(F,B,Y,oe)}if(Me(Y)||j(Y))return Re!==null?null:re(F,B,Y,oe,null);if(typeof Y.then=="function")return W(F,B,qh(Y),oe);if(Y.$$typeof===q)return W(F,B,Uh(F,Y),oe);Fh(F,Y)}return null}function te(F,B,Y,oe,Re){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return F=F.get(Y)||null,A(B,F,""+oe,Re);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return F=F.get(oe.key===null?Y:oe.key)||null,L(B,F,oe,Re);case k:return F=F.get(oe.key===null?Y:oe.key)||null,$(B,F,oe,Re);case S:return oe=Ra(oe),te(F,B,Y,oe,Re)}if(Me(oe)||j(oe))return F=F.get(Y)||null,re(B,F,oe,Re,null);if(typeof oe.then=="function")return te(F,B,Y,qh(oe),Re);if(oe.$$typeof===q)return te(F,B,Y,Uh(B,oe),Re);Fh(B,oe)}return null}function Ee(F,B,Y,oe){for(var Re=null,it=null,Se=B,Ke=B=0,We=null;Se!==null&&Ke<Y.length;Ke++){Se.index>Ke?(We=Se,Se=null):We=Se.sibling;var rt=W(F,Se,Y[Ke],oe);if(rt===null){Se===null&&(Se=We);break}n&&Se&&rt.alternate===null&&s(F,Se),B=p(rt,B,Ke),it===null?Re=rt:it.sibling=rt,it=rt,Se=We}if(Ke===Y.length)return o(F,Se),tt&&Vr(F,Ke),Re;if(Se===null){for(;Ke<Y.length;Ke++)Se=le(F,Y[Ke],oe),Se!==null&&(B=p(Se,B,Ke),it===null?Re=Se:it.sibling=Se,it=Se);return tt&&Vr(F,Ke),Re}for(Se=u(Se);Ke<Y.length;Ke++)We=te(Se,F,Ke,Y[Ke],oe),We!==null&&(n&&We.alternate!==null&&Se.delete(We.key===null?Ke:We.key),B=p(We,B,Ke),it===null?Re=We:it.sibling=We,it=We);return n&&Se.forEach(function(ks){return s(F,ks)}),tt&&Vr(F,Ke),Re}function Ne(F,B,Y,oe){if(Y==null)throw Error(r(151));for(var Re=null,it=null,Se=B,Ke=B=0,We=null,rt=Y.next();Se!==null&&!rt.done;Ke++,rt=Y.next()){Se.index>Ke?(We=Se,Se=null):We=Se.sibling;var ks=W(F,Se,rt.value,oe);if(ks===null){Se===null&&(Se=We);break}n&&Se&&ks.alternate===null&&s(F,Se),B=p(ks,B,Ke),it===null?Re=ks:it.sibling=ks,it=ks,Se=We}if(rt.done)return o(F,Se),tt&&Vr(F,Ke),Re;if(Se===null){for(;!rt.done;Ke++,rt=Y.next())rt=le(F,rt.value,oe),rt!==null&&(B=p(rt,B,Ke),it===null?Re=rt:it.sibling=rt,it=rt);return tt&&Vr(F,Ke),Re}for(Se=u(Se);!rt.done;Ke++,rt=Y.next())rt=te(Se,F,Ke,rt.value,oe),rt!==null&&(n&&rt.alternate!==null&&Se.delete(rt.key===null?Ke:rt.key),B=p(rt,B,Ke),it===null?Re=rt:it.sibling=rt,it=rt);return n&&Se.forEach(function(OC){return s(F,OC)}),tt&&Vr(F,Ke),Re}function _t(F,B,Y,oe){if(typeof Y=="object"&&Y!==null&&Y.type===x&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var Re=Y.key;B!==null;){if(B.key===Re){if(Re=Y.type,Re===x){if(B.tag===7){o(F,B.sibling),oe=d(B,Y.props.children),oe.return=F,F=oe;break e}}else if(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===S&&Ra(Re)===B.type){o(F,B.sibling),oe=d(B,Y.props),Au(oe,Y),oe.return=F,F=oe;break e}o(F,B);break}else s(F,B);B=B.sibling}Y.type===x?(oe=ba(Y.props.children,F.mode,oe,Y.key),oe.return=F,F=oe):(oe=Ph(Y.type,Y.key,Y.props,null,F.mode,oe),Au(oe,Y),oe.return=F,F=oe)}return v(F);case k:e:{for(Re=Y.key;B!==null;){if(B.key===Re)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){o(F,B.sibling),oe=d(B,Y.children||[]),oe.return=F,F=oe;break e}else{o(F,B);break}else s(F,B);B=B.sibling}oe=Nm(Y,F.mode,oe),oe.return=F,F=oe}return v(F);case S:return Y=Ra(Y),_t(F,B,Y,oe)}if(Me(Y))return Ee(F,B,Y,oe);if(j(Y)){if(Re=j(Y),typeof Re!="function")throw Error(r(150));return Y=Re.call(Y),Ne(F,B,Y,oe)}if(typeof Y.then=="function")return _t(F,B,qh(Y),oe);if(Y.$$typeof===q)return _t(F,B,Uh(F,Y),oe);Fh(F,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(o(F,B.sibling),oe=d(B,Y),oe.return=F,F=oe):(o(F,B),oe=xm(Y,F.mode,oe),oe.return=F,F=oe),v(F)):o(F,B)}return function(F,B,Y,oe){try{Su=0;var Re=_t(F,B,Y,oe);return Po=null,Re}catch(Se){if(Se===Vo||Se===zh)throw Se;var it=ui(29,Se,null,F.mode);return it.lanes=oe,it.return=F,it}finally{}}}var Da=Nv(!0),Mv=Nv(!1),vs=!1;function Fm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Es(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ts(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(at&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Vh(n),pv(n,null,o),s}return Oh(n,u,s,o),Vh(n)}function wu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,On(n,o)}}function Gm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?d=p=s:p=p.next=s}else d=p=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Km=!1;function Iu(){if(Km){var n=Oo;if(n!==null)throw n}}function Ru(n,s,o,u){Km=!1;var d=n.updateQueue;vs=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var L=A,$=L.next;L.next=null,v===null?p=$:v.next=$,v=L;var re=n.alternate;re!==null&&(re=re.updateQueue,A=re.lastBaseUpdate,A!==v&&(A===null?re.firstBaseUpdate=$:A.next=$,re.lastBaseUpdate=L))}if(p!==null){var le=d.baseState;v=0,re=$=L=null,A=p;do{var W=A.lane&-536870913,te=W!==A.lane;if(te?(Je&W)===W:(u&W)===W){W!==0&&W===Mo&&(Km=!0),re!==null&&(re=re.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ee=n,Ne=A;W=s;var _t=o;switch(Ne.tag){case 1:if(Ee=Ne.payload,typeof Ee=="function"){le=Ee.call(_t,le,W);break e}le=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ne.payload,W=typeof Ee=="function"?Ee.call(_t,le,W):Ee,W==null)break e;le=E({},le,W);break e;case 2:vs=!0}}W=A.callback,W!==null&&(n.flags|=64,te&&(n.flags|=8192),te=d.callbacks,te===null?d.callbacks=[W]:te.push(W))}else te={lane:W,tag:A.tag,payload:A.payload,callback:A.callback,next:null},re===null?($=re=te,L=le):re=re.next=te,v|=W;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;te=A,A=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(!0);re===null&&(L=le),d.baseState=L,d.firstBaseUpdate=$,d.lastBaseUpdate=re,p===null&&(d.shared.lanes=0),Is|=v,n.lanes=v,n.memoizedState=le}}function Ov(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Vv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ov(o[n],s)}var ko=z(null),Hh=z(0);function Pv(n,s){n=Gr,Q(Hh,n),Q(ko,s),Gr=n|s.baseLanes}function Ym(){Q(Hh,Gr),Q(ko,ko.current)}function Qm(){Gr=Hh.current,ne(ko),ne(Hh)}var ci=z(null),xi=null;function bs(n){var s=n.alternate;Q(Ft,Ft.current&1),Q(ci,n),xi===null&&(s===null||ko.current!==null||s.memoizedState!==null)&&(xi=n)}function $m(n){Q(Ft,Ft.current),Q(ci,n),xi===null&&(xi=n)}function kv(n){n.tag===22?(Q(Ft,Ft.current),Q(ci,n),xi===null&&(xi=n)):Ss()}function Ss(){Q(Ft,Ft.current),Q(ci,ci.current)}function hi(n){ne(ci),xi===n&&(xi=null),ne(Ft)}var Ft=z(0);function Gh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||tg(o)||ng(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Lr=0,He=null,gt=null,en=null,Kh=!1,Lo=!1,xa=!1,Yh=0,Cu=0,Uo=null,SR=0;function kt(){throw Error(r(321))}function Xm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!li(n[o],s[o]))return!1;return!0}function Jm(n,s,o,u,d,p){return Lr=p,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=n===null||n.memoizedState===null?vE:fp,xa=!1,p=o(u,d),xa=!1,Lo&&(p=Uv(s,o,u,d)),Lv(n),p}function Lv(n){X.H=Nu;var s=gt!==null&&gt.next!==null;if(Lr=0,en=gt=He=null,Kh=!1,Cu=0,Uo=null,s)throw Error(r(300));n===null||tn||(n=n.dependencies,n!==null&&Lh(n)&&(tn=!0))}function Uv(n,s,o,u){He=n;var d=0;do{if(Lo&&(Uo=null),Cu=0,Lo=!1,25<=d)throw Error(r(301));if(d+=1,en=gt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=EE,p=s(o,u)}while(Lo);return p}function AR(){var n=X.H,s=n.useState()[0];return s=typeof s.then=="function"?Du(s):s,n=n.useState()[0],(gt!==null?gt.memoizedState:null)!==n&&(He.flags|=1024),s}function Wm(){var n=Yh!==0;return Yh=0,n}function Zm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function ep(n){if(Kh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Kh=!1}Lr=0,en=gt=He=null,Lo=!1,Cu=Yh=0,Uo=null}function Hn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?He.memoizedState=en=n:en=en.next=n,en}function Ht(){if(gt===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var s=en===null?He.memoizedState:en.next;if(s!==null)en=s,gt=n;else{if(n===null)throw He.alternate===null?Error(r(467)):Error(r(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},en===null?He.memoizedState=en=n:en=en.next=n}return en}function Qh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Du(n){var s=Cu;return Cu+=1,Uo===null&&(Uo=[]),n=Cv(Uo,n,s),s=He,(en===null?s.memoizedState:en.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?vE:fp),n}function $h(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Du(n);if(n.$$typeof===q)return In(n)}throw Error(r(438,String(n)))}function tp(n){var s=null,o=He.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Qh(),He.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=V;return s.index++,o}function Ur(n,s){return typeof s=="function"?s(n):s}function Xh(n){var s=Ht();return np(s,gt,n)}function np(n,s,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var d=n.baseQueue,p=u.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}s.baseQueue=d=p,u.pending=null}if(p=n.baseState,d===null)n.memoizedState=p;else{s=d.next;var A=v=null,L=null,$=s,re=!1;do{var le=$.lane&-536870913;if(le!==$.lane?(Je&le)===le:(Lr&le)===le){var W=$.revertLane;if(W===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),le===Mo&&(re=!0);else if((Lr&W)===W){$=$.next,W===Mo&&(re=!0);continue}else le={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},L===null?(A=L=le,v=p):L=L.next=le,He.lanes|=W,Is|=W;le=$.action,xa&&o(p,le),p=$.hasEagerState?$.eagerState:o(p,le)}else W={lane:le,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},L===null?(A=L=W,v=p):L=L.next=W,He.lanes|=le,Is|=le;$=$.next}while($!==null&&$!==s);if(L===null?v=p:L.next=A,!li(p,n.memoizedState)&&(tn=!0,re&&(o=Oo,o!==null)))throw o;n.memoizedState=p,n.baseState=v,n.baseQueue=L,u.lastRenderedState=p}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function ip(n){var s=Ht(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,p=s.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);li(p,s.memoizedState)||(tn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function jv(n,s,o){var u=He,d=Ht(),p=tt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var v=!li((gt||d).memoizedState,o);if(v&&(d.memoizedState=o,tn=!0),d=d.queue,ap(qv.bind(null,u,d,n),[n]),d.getSnapshot!==s||v||en!==null&&en.memoizedState.tag&1){if(u.flags|=2048,jo(9,{destroy:void 0},Bv.bind(null,u,d,o,s),null),Et===null)throw Error(r(349));p||(Lr&127)!==0||zv(u,s,o)}return o}function zv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=He.updateQueue,s===null?(s=Qh(),He.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Bv(n,s,o,u){s.value=o,s.getSnapshot=u,Fv(s)&&Hv(n)}function qv(n,s,o){return o(function(){Fv(s)&&Hv(n)})}function Fv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!li(n,o)}catch{return!0}}function Hv(n){var s=Ta(n,2);s!==null&&ei(s,n,2)}function rp(n){var s=Hn();if(typeof n=="function"){var o=n;if(n=o(),xa){xn(!0);try{o()}finally{xn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:n},s}function Gv(n,s,o,u){return n.baseState=o,np(n,gt,typeof u=="function"?u:Ur)}function wR(n,s,o,u,d){if(Zh(n))throw Error(r(485));if(n=s.action,n!==null){var p={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};X.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,Kv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function Kv(n,s){var o=s.action,u=s.payload,d=n.state;if(s.isTransition){var p=X.T,v={};X.T=v;try{var A=o(d,u),L=X.S;L!==null&&L(v,A),Yv(n,s,A)}catch($){sp(n,s,$)}finally{p!==null&&v.types!==null&&(p.types=v.types),X.T=p}}else try{p=o(d,u),Yv(n,s,p)}catch($){sp(n,s,$)}}function Yv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Qv(n,s,u)},function(u){return sp(n,s,u)}):Qv(n,s,o)}function Qv(n,s,o){s.status="fulfilled",s.value=o,$v(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Kv(n,o)))}function sp(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,$v(s),s=s.next;while(s!==u)}n.action=null}function $v(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Xv(n,s){return s}function Jv(n,s){if(tt){var o=Et.formState;if(o!==null){e:{var u=He;if(tt){if(St){t:{for(var d=St,p=Di;d.nodeType!==8;){if(!p){d=null;break t}if(d=Ni(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){St=Ni(d.nextSibling),u=d.data==="F!";break e}}ys(u)}u=!1}u&&(s=o[0])}}return o=Hn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xv,lastRenderedState:s},o.queue=u,o=gE.bind(null,He,u),u.dispatch=o,u=rp(!1),p=hp.bind(null,He,!1,u.queue),u=Hn(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,o=wR.bind(null,He,d,p,o),d.dispatch=o,u.memoizedState=n,[s,o,!1]}function Wv(n){var s=Ht();return Zv(s,gt,n)}function Zv(n,s,o){if(s=np(n,s,Xv)[0],n=Xh(Ur)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Du(s)}catch(v){throw v===Vo?zh:v}else u=s;s=Ht();var d=s.queue,p=d.dispatch;return o!==s.memoizedState&&(He.flags|=2048,jo(9,{destroy:void 0},IR.bind(null,d,o),null)),[u,p,n]}function IR(n,s){n.action=s}function eE(n){var s=Ht(),o=gt;if(o!==null)return Zv(s,o,n);Ht(),s=s.memoizedState,o=Ht();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function jo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=He.updateQueue,s===null&&(s=Qh(),He.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function tE(){return Ht().memoizedState}function Jh(n,s,o,u){var d=Hn();He.flags|=n,d.memoizedState=jo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Wh(n,s,o,u){var d=Ht();u=u===void 0?null:u;var p=d.memoizedState.inst;gt!==null&&u!==null&&Xm(u,gt.memoizedState.deps)?d.memoizedState=jo(s,p,o,u):(He.flags|=n,d.memoizedState=jo(1|s,p,o,u))}function nE(n,s){Jh(8390656,8,n,s)}function ap(n,s){Wh(2048,8,n,s)}function RR(n){He.flags|=4;var s=He.updateQueue;if(s===null)s=Qh(),He.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function iE(n){var s=Ht().memoizedState;return RR({ref:s,nextImpl:n}),function(){if((at&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function rE(n,s){return Wh(4,2,n,s)}function sE(n,s){return Wh(4,4,n,s)}function aE(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function oE(n,s,o){o=o!=null?o.concat([n]):null,Wh(4,4,aE.bind(null,s,n),o)}function op(){}function lE(n,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Xm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function uE(n,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Xm(s,u[1]))return u[0];if(u=n(),xa){xn(!0);try{n()}finally{xn(!1)}}return o.memoizedState=[u,s],u}function lp(n,s,o){return o===void 0||(Lr&1073741824)!==0&&(Je&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=cT(),He.lanes|=n,Is|=n,o)}function cE(n,s,o,u){return li(o,s)?o:ko.current!==null?(n=lp(n,o,u),li(n,s)||(tn=!0),n):(Lr&42)===0||(Lr&1073741824)!==0&&(Je&261930)===0?(tn=!0,n.memoizedState=o):(n=cT(),He.lanes|=n,Is|=n,s)}function hE(n,s,o,u,d){var p=ue.p;ue.p=p!==0&&8>p?p:8;var v=X.T,A={};X.T=A,hp(n,!1,s,o);try{var L=d(),$=X.S;if($!==null&&$(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var re=bR(L,u);xu(n,s,re,mi(n))}else xu(n,s,u,mi(n))}catch(le){xu(n,s,{then:function(){},status:"rejected",reason:le},mi())}finally{ue.p=p,v!==null&&A.types!==null&&(v.types=A.types),X.T=v}}function CR(){}function up(n,s,o,u){if(n.tag!==5)throw Error(r(476));var d=fE(n).queue;hE(n,d,s,_e,o===null?CR:function(){return dE(n),o(u)})}function fE(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function dE(n){var s=fE(n);s.next===null&&(s=n.alternate.memoizedState),xu(n,s.next.queue,{},mi())}function cp(){return In(Yu)}function mE(){return Ht().memoizedState}function pE(){return Ht().memoizedState}function DR(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=mi();n=Es(o);var u=Ts(s,n,o);u!==null&&(ei(u,s,o),wu(u,s,o)),s={cache:jm()},n.payload=s;return}s=s.return}}function xR(n,s,o){var u=mi();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zh(n)?yE(s,o):(o=Cm(n,s,o,u),o!==null&&(ei(o,n,u),_E(o,s,u)))}function gE(n,s,o){var u=mi();xu(n,s,o,u)}function xu(n,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zh(n))yE(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,A=p(v,o);if(d.hasEagerState=!0,d.eagerState=A,li(A,v))return Oh(n,s,d,0),Et===null&&Mh(),!1}catch{}finally{}if(o=Cm(n,s,d,u),o!==null)return ei(o,n,u),_E(o,s,u),!0}return!1}function hp(n,s,o,u){if(u={lane:2,revertLane:Fp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Zh(n)){if(s)throw Error(r(479))}else s=Cm(n,o,u,2),s!==null&&ei(s,n,2)}function Zh(n){var s=n.alternate;return n===He||s!==null&&s===He}function yE(n,s){Lo=Kh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function _E(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,On(n,o)}}var Nu={readContext:In,use:$h,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};Nu.useEffectEvent=kt;var vE={readContext:In,use:$h,useCallback:function(n,s){return Hn().memoizedState=[n,s===void 0?null:s],n},useContext:In,useEffect:nE,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Jh(4194308,4,aE.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Jh(4194308,4,n,s)},useInsertionEffect:function(n,s){Jh(4,2,n,s)},useMemo:function(n,s){var o=Hn();s=s===void 0?null:s;var u=n();if(xa){xn(!0);try{n()}finally{xn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=Hn();if(o!==void 0){var d=o(s);if(xa){xn(!0);try{o(s)}finally{xn(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=xR.bind(null,He,n),[u.memoizedState,n]},useRef:function(n){var s=Hn();return n={current:n},s.memoizedState=n},useState:function(n){n=rp(n);var s=n.queue,o=gE.bind(null,He,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:op,useDeferredValue:function(n,s){var o=Hn();return lp(o,n,s)},useTransition:function(){var n=rp(!1);return n=hE.bind(null,He,n.queue,!0,!1),Hn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=He,d=Hn();if(tt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Et===null)throw Error(r(349));(Je&127)!==0||zv(u,s,o)}d.memoizedState=o;var p={value:o,getSnapshot:s};return d.queue=p,nE(qv.bind(null,u,p,n),[n]),u.flags|=2048,jo(9,{destroy:void 0},Bv.bind(null,u,p,o,s),null),o},useId:function(){var n=Hn(),s=Et.identifierPrefix;if(tt){var o=mr,u=dr;o=(u&~(1<<32-wt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Yh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=SR++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:cp,useFormState:Jv,useActionState:Jv,useOptimistic:function(n){var s=Hn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=hp.bind(null,He,!0,o),o.dispatch=s,[n,s]},useMemoCache:tp,useCacheRefresh:function(){return Hn().memoizedState=DR.bind(null,He)},useEffectEvent:function(n){var s=Hn(),o={impl:n};return s.memoizedState=o,function(){if((at&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},fp={readContext:In,use:$h,useCallback:lE,useContext:In,useEffect:ap,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:uE,useReducer:Xh,useRef:tE,useState:function(){return Xh(Ur)},useDebugValue:op,useDeferredValue:function(n,s){var o=Ht();return cE(o,gt.memoizedState,n,s)},useTransition:function(){var n=Xh(Ur)[0],s=Ht().memoizedState;return[typeof n=="boolean"?n:Du(n),s]},useSyncExternalStore:jv,useId:mE,useHostTransitionStatus:cp,useFormState:Wv,useActionState:Wv,useOptimistic:function(n,s){var o=Ht();return Gv(o,gt,n,s)},useMemoCache:tp,useCacheRefresh:pE};fp.useEffectEvent=iE;var EE={readContext:In,use:$h,useCallback:lE,useContext:In,useEffect:ap,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:uE,useReducer:ip,useRef:tE,useState:function(){return ip(Ur)},useDebugValue:op,useDeferredValue:function(n,s){var o=Ht();return gt===null?lp(o,n,s):cE(o,gt.memoizedState,n,s)},useTransition:function(){var n=ip(Ur)[0],s=Ht().memoizedState;return[typeof n=="boolean"?n:Du(n),s]},useSyncExternalStore:jv,useId:mE,useHostTransitionStatus:cp,useFormState:eE,useActionState:eE,useOptimistic:function(n,s){var o=Ht();return gt!==null?Gv(o,gt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:tp,useCacheRefresh:pE};EE.useEffectEvent=iE;function dp(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var mp={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=mi(),d=Es(u);d.payload=s,o!=null&&(d.callback=o),s=Ts(n,d,u),s!==null&&(ei(s,n,u),wu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=mi(),d=Es(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Ts(n,d,u),s!==null&&(ei(s,n,u),wu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=mi(),u=Es(o);u.tag=2,s!=null&&(u.callback=s),s=Ts(n,u,o),s!==null&&(ei(s,n,o),wu(s,n,o))}};function TE(n,s,o,u,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):s.prototype&&s.prototype.isPureReactComponent?!yu(o,u)||!yu(d,p):!0}function bE(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&mp.enqueueReplaceState(s,s.state,null)}function Na(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function SE(n){Nh(n)}function AE(n){console.error(n)}function wE(n){Nh(n)}function ef(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function IE(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function pp(n,s,o){return o=Es(o),o.tag=3,o.payload={element:null},o.callback=function(){ef(n,s)},o}function RE(n){return n=Es(n),n.tag=3,n}function CE(n,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;n.payload=function(){return d(p)},n.callback=function(){IE(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){IE(s,o,u),typeof d!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function NR(n,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&No(s,o,d,!0),o=ci.current,o!==null){switch(o.tag){case 31:case 13:return xi===null?df():o.alternate===null&&Lt===0&&(Lt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Bh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),zp(n,u,d)),!1;case 22:return o.flags|=65536,u===Bh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),zp(n,u,d)),!1}throw Error(r(435,o.tag))}return zp(n,u,d),df(),!1}if(tt)return s=ci.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Vm&&(n=Error(r(422),{cause:u}),Eu(Ii(n,o)))):(u!==Vm&&(s=Error(r(423),{cause:u}),Eu(Ii(s,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Ii(u,o),d=pp(n.stateNode,u,d),Gm(n,d),Lt!==4&&(Lt=2)),!1;var p=Error(r(520),{cause:u});if(p=Ii(p,o),ju===null?ju=[p]:ju.push(p),Lt!==4&&(Lt=2),s===null)return!0;u=Ii(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=pp(o.stateNode,u,n),Gm(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Rs===null||!Rs.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=RE(d),CE(d,n,o,u),Gm(o,d),!1}o=o.return}while(o!==null);return!1}var gp=Error(r(461)),tn=!1;function Rn(n,s,o,u){s.child=n===null?Mv(s,null,o,u):Da(s,n.child,o,u)}function DE(n,s,o,u,d){o=o.render;var p=s.ref;if("ref"in u){var v={};for(var A in u)A!=="ref"&&(v[A]=u[A])}else v=u;return wa(s),u=Jm(n,s,o,v,p,d),A=Wm(),n!==null&&!tn?(Zm(n,s,d),jr(n,s,d)):(tt&&A&&Mm(s),s.flags|=1,Rn(n,s,u,d),s.child)}function xE(n,s,o,u,d){if(n===null){var p=o.type;return typeof p=="function"&&!Dm(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,NE(n,s,p,u,d)):(n=Ph(o.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!Ap(n,d)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:yu,o(v,u)&&n.ref===s.ref)return jr(n,s,d)}return s.flags|=1,n=Or(p,u),n.ref=s.ref,n.return=s,s.child=n}function NE(n,s,o,u,d){if(n!==null){var p=n.memoizedProps;if(yu(p,u)&&n.ref===s.ref)if(tn=!1,s.pendingProps=u=p,Ap(n,d))(n.flags&131072)!==0&&(tn=!0);else return s.lanes=n.lanes,jr(n,s,d)}return yp(n,s,o,u,d)}function ME(n,s,o,u){var d=u.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=s.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~p}else u=0,s.child=null;return OE(n,s,p,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&jh(s,p!==null?p.cachePool:null),p!==null?Pv(s,p):Ym(),kv(s);else return u=s.lanes=536870912,OE(n,s,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(jh(s,p.cachePool),Pv(s,p),Ss(),s.memoizedState=null):(n!==null&&jh(s,null),Ym(),Ss());return Rn(n,s,d,o),s.child}function Mu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function OE(n,s,o,u,d){var p=Bm();return p=p===null?null:{parent:Zt._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},n!==null&&jh(s,null),Ym(),kv(s),n!==null&&No(n,s,u,!0),s.childLanes=d,null}function tf(n,s){return s=rf({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function VE(n,s,o){return Da(s,n.child,null,o),n=tf(s,s.pendingProps),n.flags|=2,hi(s),s.memoizedState=null,n}function MR(n,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(tt){if(u.mode==="hidden")return n=tf(s,u),s.lanes=536870912,Mu(null,n);if($m(s),(n=St)?(n=KT(n,Di),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ps!==null?{id:dr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},o=yv(n),o.return=s,s.child=o,wn=s,St=null)):n=null,n===null)throw ys(s);return s.lanes=536870912,null}return tf(s,u)}var p=n.memoizedState;if(p!==null){var v=p.dehydrated;if($m(s),d)if(s.flags&256)s.flags&=-257,s=VE(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(tn||No(n,s,o,!1),d=(o&n.childLanes)!==0,tn||d){if(u=Et,u!==null&&(v=zn(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,Ta(n,v),ei(u,n,v),gp;df(),s=VE(n,s,o)}else n=p.treeContext,St=Ni(v.nextSibling),wn=s,tt=!0,gs=null,Di=!1,n!==null&&Ev(s,n),s=tf(s,u),s.flags|=4096;return s}return n=Or(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function nf(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function yp(n,s,o,u,d){return wa(s),o=Jm(n,s,o,u,void 0,d),u=Wm(),n!==null&&!tn?(Zm(n,s,d),jr(n,s,d)):(tt&&u&&Mm(s),s.flags|=1,Rn(n,s,o,d),s.child)}function PE(n,s,o,u,d,p){return wa(s),s.updateQueue=null,o=Uv(s,u,o,d),Lv(n),u=Wm(),n!==null&&!tn?(Zm(n,s,p),jr(n,s,p)):(tt&&u&&Mm(s),s.flags|=1,Rn(n,s,o,p),s.child)}function kE(n,s,o,u,d){if(wa(s),s.stateNode===null){var p=Ro,v=o.contextType;typeof v=="object"&&v!==null&&(p=In(v)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=mp,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Fm(s),v=o.contextType,p.context=typeof v=="object"&&v!==null?In(v):Ro,p.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(dp(s,o,v,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&mp.enqueueReplaceState(p,p.state,null),Ru(s,u,p,d),Iu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){p=s.stateNode;var A=s.memoizedProps,L=Na(o,A);p.props=L;var $=p.context,re=o.contextType;v=Ro,typeof re=="object"&&re!==null&&(v=In(re));var le=o.getDerivedStateFromProps;re=typeof le=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,re||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||$!==v)&&bE(s,p,u,v),vs=!1;var W=s.memoizedState;p.state=W,Ru(s,u,p,d),Iu(),$=s.memoizedState,A||W!==$||vs?(typeof le=="function"&&(dp(s,o,le,u),$=s.memoizedState),(L=vs||TE(s,o,L,u,W,$,v))?(re||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=$),p.props=u,p.state=$,p.context=v,u=L):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Hm(n,s),v=s.memoizedProps,re=Na(o,v),p.props=re,le=s.pendingProps,W=p.context,$=o.contextType,L=Ro,typeof $=="object"&&$!==null&&(L=In($)),A=o.getDerivedStateFromProps,($=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==le||W!==L)&&bE(s,p,u,L),vs=!1,W=s.memoizedState,p.state=W,Ru(s,u,p,d),Iu();var te=s.memoizedState;v!==le||W!==te||vs||n!==null&&n.dependencies!==null&&Lh(n.dependencies)?(typeof A=="function"&&(dp(s,o,A,u),te=s.memoizedState),(re=vs||TE(s,o,re,u,W,te,L)||n!==null&&n.dependencies!==null&&Lh(n.dependencies))?($||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,te,L),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,te,L)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=te),p.props=u,p.state=te,p.context=L,u=re):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),u=!1)}return p=u,nf(n,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&u?(s.child=Da(s,n.child,null,d),s.child=Da(s,null,o,d)):Rn(n,s,o,d),s.memoizedState=p.state,n=s.child):n=jr(n,s,d),n}function LE(n,s,o,u){return Sa(),s.flags|=256,Rn(n,s,o,u),s.child}var _p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vp(n){return{baseLanes:n,cachePool:Iv()}}function Ep(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=di),n}function UE(n,s,o){var u=s.pendingProps,d=!1,p=(s.flags&128)!==0,v;if((v=p)||(v=n!==null&&n.memoizedState===null?!1:(Ft.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(tt){if(d?bs(s):Ss(),(n=St)?(n=KT(n,Di),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ps!==null?{id:dr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},o=yv(n),o.return=s,s.child=o,wn=s,St=null)):n=null,n===null)throw ys(s);return ng(n)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,d?(Ss(),d=s.mode,A=rf({mode:"hidden",children:A},d),u=ba(u,d,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=vp(o),u.childLanes=Ep(n,v,o),s.memoizedState=_p,Mu(null,u)):(bs(s),Tp(s,A))}var L=n.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(p)s.flags&256?(bs(s),s.flags&=-257,s=bp(n,s,o)):s.memoizedState!==null?(Ss(),s.child=n.child,s.flags|=128,s=null):(Ss(),A=u.fallback,d=s.mode,u=rf({mode:"visible",children:u.children},d),A=ba(A,d,o,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,Da(s,n.child,null,o),u=s.child,u.memoizedState=vp(o),u.childLanes=Ep(n,v,o),s.memoizedState=_p,s=Mu(null,u));else if(bs(s),ng(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var $=v.dgst;v=$,u=Error(r(419)),u.stack="",u.digest=v,Eu({value:u,source:null,stack:null}),s=bp(n,s,o)}else if(tn||No(n,s,o,!1),v=(o&n.childLanes)!==0,tn||v){if(v=Et,v!==null&&(u=zn(v,o),u!==0&&u!==L.retryLane))throw L.retryLane=u,Ta(n,u),ei(v,n,u),gp;tg(A)||df(),s=bp(n,s,o)}else tg(A)?(s.flags|=192,s.child=n.child,s=null):(n=L.treeContext,St=Ni(A.nextSibling),wn=s,tt=!0,gs=null,Di=!1,n!==null&&Ev(s,n),s=Tp(s,u.children),s.flags|=4096);return s}return d?(Ss(),A=u.fallback,d=s.mode,L=n.child,$=L.sibling,u=Or(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,$!==null?A=Or($,A):(A=ba(A,d,o,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,Mu(null,u),u=s.child,A=n.child.memoizedState,A===null?A=vp(o):(d=A.cachePool,d!==null?(L=Zt._currentValue,d=d.parent!==L?{parent:L,pool:L}:d):d=Iv(),A={baseLanes:A.baseLanes|o,cachePool:d}),u.memoizedState=A,u.childLanes=Ep(n,v,o),s.memoizedState=_p,Mu(n.child,u)):(bs(s),o=n.child,n=o.sibling,o=Or(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=o,s.memoizedState=null,o)}function Tp(n,s){return s=rf({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function rf(n,s){return n=ui(22,n,null,s),n.lanes=0,n}function bp(n,s,o){return Da(s,n.child,null,o),n=Tp(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function jE(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Lm(n.return,s,o)}function Sp(n,s,o,u,d,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=d,v.treeForkCount=p)}function zE(n,s,o){var u=s.pendingProps,d=u.revealOrder,p=u.tail;u=u.children;var v=Ft.current,A=(v&2)!==0;if(A?(v=v&1|2,s.flags|=128):v&=1,Q(Ft,v),Rn(n,s,u,o),u=tt?vu:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jE(n,o,s);else if(n.tag===19)jE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)n=o.alternate,n!==null&&Gh(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Sp(s,!1,d,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Gh(n)===null){s.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}Sp(s,!0,o,null,p,u);break;case"together":Sp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function jr(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Is|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(No(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=Or(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Or(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Ap(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Lh(n)))}function OR(n,s,o){switch(s.tag){case 3:Ge(s,s.stateNode.containerInfo),_s(s,Zt,n.memoizedState.cache),Sa();break;case 27:case 5:je(s);break;case 4:Ge(s,s.stateNode.containerInfo);break;case 10:_s(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,$m(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(bs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?UE(n,s,o):(bs(s),n=jr(n,s,o),n!==null?n.sibling:null);bs(s);break;case 19:var d=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(No(n,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return zE(n,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Q(Ft,Ft.current),u)break;return null;case 22:return s.lanes=0,ME(n,s,o,s.pendingProps);case 24:_s(s,Zt,n.memoizedState.cache)}return jr(n,s,o)}function BE(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)tn=!0;else{if(!Ap(n,o)&&(s.flags&128)===0)return tn=!1,OR(n,s,o);tn=(n.flags&131072)!==0}else tn=!1,tt&&(s.flags&1048576)!==0&&vv(s,vu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Ra(s.elementType),s.type=n,typeof n=="function")Dm(n)?(u=Na(n,u),s.tag=1,s=kE(null,s,n,u,o)):(s.tag=0,s=yp(null,s,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===se){s.tag=11,s=DE(null,s,n,u,o);break e}else if(d===C){s.tag=14,s=xE(null,s,n,u,o);break e}}throw s=Ae(n)||n,Error(r(306,s,""))}}return s;case 0:return yp(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=Na(u,s.pendingProps),kE(n,s,u,d,o);case 3:e:{if(Ge(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;d=p.element,Hm(n,s),Ru(s,u,null,o);var v=s.memoizedState;if(u=v.cache,_s(s,Zt,u),u!==p.cache&&Um(s,[Zt],o,!0),Iu(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=LE(n,s,u,o);break e}else if(u!==d){d=Ii(Error(r(424)),s),Eu(d),s=LE(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(St=Ni(n.firstChild),wn=s,tt=!0,gs=null,Di=!0,o=Mv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Sa(),u===d){s=jr(n,s,o);break e}Rn(n,s,u,o)}s=s.child}return s;case 26:return nf(n,s),n===null?(o=WT(s.type,null,s.pendingProps,null))?s.memoizedState=o:tt||(o=s.type,n=s.pendingProps,u=Ef(ye.current).createElement(o),u[Xt]=s,u[pn]=n,Cn(u,o,n),Jt(u),s.stateNode=u):s.memoizedState=WT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return je(s),n===null&&tt&&(u=s.stateNode=$T(s.type,s.pendingProps,ye.current),wn=s,Di=!0,d=St,Ns(s.type)?(ig=d,St=Ni(u.firstChild)):St=d),Rn(n,s,s.pendingProps.children,o),nf(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&tt&&((d=u=St)&&(u=uC(u,s.type,s.pendingProps,Di),u!==null?(s.stateNode=u,wn=s,St=Ni(u.firstChild),Di=!1,d=!0):d=!1),d||ys(s)),je(s),d=s.type,p=s.pendingProps,v=n!==null?n.memoizedProps:null,u=p.children,Wp(d,p)?u=null:v!==null&&Wp(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=Jm(n,s,AR,null,null,o),Yu._currentValue=d),nf(n,s),Rn(n,s,u,o),s.child;case 6:return n===null&&tt&&((n=o=St)&&(o=cC(o,s.pendingProps,Di),o!==null?(s.stateNode=o,wn=s,St=null,n=!0):n=!1),n||ys(s)),null;case 13:return UE(n,s,o);case 4:return Ge(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Da(s,null,u,o):Rn(n,s,u,o),s.child;case 11:return DE(n,s,s.type,s.pendingProps,o);case 7:return Rn(n,s,s.pendingProps,o),s.child;case 8:return Rn(n,s,s.pendingProps.children,o),s.child;case 12:return Rn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,_s(s,s.type,u.value),Rn(n,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,wa(s),d=In(d),u=u(d),s.flags|=1,Rn(n,s,u,o),s.child;case 14:return xE(n,s,s.type,s.pendingProps,o);case 15:return NE(n,s,s.type,s.pendingProps,o);case 19:return zE(n,s,o);case 31:return MR(n,s,o);case 22:return ME(n,s,o,s.pendingProps);case 24:return wa(s),u=In(Zt),n===null?(d=Bm(),d===null&&(d=Et,p=jm(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),s.memoizedState={parent:u,cache:d},Fm(s),_s(s,Zt,d)):((n.lanes&o)!==0&&(Hm(n,s),Ru(s,null,null,o),Iu()),d=n.memoizedState,p=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),_s(s,Zt,u)):(u=p.cache,_s(s,Zt,u),u!==d.cache&&Um(s,[Zt],o,!0))),Rn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function zr(n){n.flags|=4}function wp(n,s,o,u,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(mT())n.flags|=8192;else throw Ca=Bh,qm}else n.flags&=-16777217}function qE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!ib(s))if(mT())n.flags|=8192;else throw Ca=Bh,qm}function sf(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?mn():536870912,n.lanes|=s,Fo|=s)}function Ou(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function At(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function VR(n,s,o){var u=s.pendingProps;switch(Om(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(s),null;case 1:return At(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),kr(Zt),Pe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(xo(s)?zr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Pm())),At(s),null;case 26:var d=s.type,p=s.memoizedState;return n===null?(zr(s),p!==null?(At(s),qE(s,p)):(At(s),wp(s,d,null,u,o))):p?p!==n.memoizedState?(zr(s),At(s),qE(s,p)):(At(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&zr(s),At(s),wp(s,d,n,u,o)),null;case 27:if(Mt(s),o=ye.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&zr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return At(s),null}n=he.current,xo(s)?Tv(s):(n=$T(d,u,o),s.stateNode=n,zr(s))}return At(s),null;case 5:if(Mt(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&zr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return At(s),null}if(p=he.current,xo(s))Tv(s);else{var v=Ef(ye.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(d,{is:u.is}):v.createElement(d)}}p[Xt]=s,p[pn]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=p;e:switch(Cn(p,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&zr(s)}}return At(s),wp(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&zr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=ye.current,xo(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,d=wn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Xt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||UT(n.nodeValue,o)),n||ys(s,!0)}else n=Ef(n).createTextNode(u),n[Xt]=s,s.stateNode=n}return At(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=xo(s),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Xt]=s}else Sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;At(s),n=!1}else o=Pm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(hi(s),s):(hi(s),null);if((s.flags&128)!==0)throw Error(r(558))}return At(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=xo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Xt]=s}else Sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;At(s),d=!1}else d=Pm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(hi(s),s):(hi(s),null)}return hi(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),sf(s,s.updateQueue),At(s),null);case 4:return Pe(),n===null&&Yp(s.stateNode.containerInfo),At(s),null;case 10:return kr(s.type),At(s),null;case 19:if(ne(Ft),u=s.memoizedState,u===null)return At(s),null;if(d=(s.flags&128)!==0,p=u.rendering,p===null)if(d)Ou(u,!1);else{if(Lt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=Gh(n),p!==null){for(s.flags|=128,Ou(u,!1),n=p.updateQueue,s.updateQueue=n,sf(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)gv(o,n),o=o.sibling;return Q(Ft,Ft.current&1|2),tt&&Vr(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Qt()>cf&&(s.flags|=128,d=!0,Ou(u,!1),s.lanes=4194304)}else{if(!d)if(n=Gh(p),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,sf(s,n),Ou(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!tt)return At(s),null}else 2*Qt()-u.renderingStartTime>cf&&o!==536870912&&(s.flags|=128,d=!0,Ou(u,!1),s.lanes=4194304);u.isBackwards?(p.sibling=s.child,s.child=p):(n=u.last,n!==null?n.sibling=p:s.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Qt(),n.sibling=null,o=Ft.current,Q(Ft,d?o&1|2:o&1),tt&&Vr(s,u.treeForkCount),n):(At(s),null);case 22:case 23:return hi(s),Qm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(At(s),s.subtreeFlags&6&&(s.flags|=8192)):At(s),o=s.updateQueue,o!==null&&sf(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&ne(Ia),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),kr(Zt),At(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function PR(n,s){switch(Om(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return kr(Zt),Pe(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Mt(s),null;case 31:if(s.memoizedState!==null){if(hi(s),s.alternate===null)throw Error(r(340));Sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(hi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ne(Ft),null;case 4:return Pe(),null;case 10:return kr(s.type),null;case 22:case 23:return hi(s),Qm(),n!==null&&ne(Ia),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return kr(Zt),null;case 25:return null;default:return null}}function FE(n,s){switch(Om(s),s.tag){case 3:kr(Zt),Pe();break;case 26:case 27:case 5:Mt(s);break;case 4:Pe();break;case 31:s.memoizedState!==null&&hi(s);break;case 13:hi(s);break;case 19:ne(Ft);break;case 10:kr(s.type);break;case 22:case 23:hi(s),Qm(),n!==null&&ne(Ia);break;case 24:kr(Zt)}}function Vu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==d)}}catch(A){ht(s,s.return,A)}}function As(n,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&n)===n){var v=u.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,d=s;var L=o,$=A;try{$()}catch(re){ht(d,L,re)}}}u=u.next}while(u!==p)}}catch(re){ht(s,s.return,re)}}function HE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Vv(s,o)}catch(u){ht(n,n.return,u)}}}function GE(n,s,o){o.props=Na(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ht(n,s,u)}}function Pu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){ht(n,s,d)}}function pr(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){ht(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){ht(n,s,d)}else o.current=null}function KE(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){ht(n,n.return,d)}}function Ip(n,s,o){try{var u=n.stateNode;iC(u,n.type,o,s),u[pn]=s}catch(d){ht(n,n.return,d)}}function YE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ns(n.type)||n.tag===4}function Rp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||YE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ns(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Cp(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Li));else if(u!==4&&(u===27&&Ns(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Cp(n,s,o),n=n.sibling;n!==null;)Cp(n,s,o),n=n.sibling}function af(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Ns(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(af(n,s,o),n=n.sibling;n!==null;)af(n,s,o),n=n.sibling}function QE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Cn(s,u,o),s[Xt]=n,s[pn]=o}catch(p){ht(n,n.return,p)}}var Br=!1,nn=!1,Dp=!1,$E=typeof WeakSet=="function"?WeakSet:Set,yn=null;function kR(n,s){if(n=n.containerInfo,Xp=Rf,n=ov(n),bm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,A=-1,L=-1,$=0,re=0,le=n,W=null;t:for(;;){for(var te;le!==o||d!==0&&le.nodeType!==3||(A=v+d),le!==p||u!==0&&le.nodeType!==3||(L=v+u),le.nodeType===3&&(v+=le.nodeValue.length),(te=le.firstChild)!==null;)W=le,le=te;for(;;){if(le===n)break t;if(W===o&&++$===d&&(A=v),W===p&&++re===u&&(L=v),(te=le.nextSibling)!==null)break;le=W,W=le.parentNode}le=te}o=A===-1||L===-1?null:{start:A,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(Jp={focusedElem:n,selectionRange:o},Rf=!1,yn=s;yn!==null;)if(s=yn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,yn=n;else for(;yn!==null;){switch(s=yn,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,d=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ee=Na(o.type,d);n=u.getSnapshotBeforeUpdate(Ee,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){ht(o,o.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)eg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":eg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,yn=n;break}yn=s.return}}function XE(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Fr(n,o),u&4&&Vu(5,o);break;case 1:if(Fr(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(v){ht(o,o.return,v)}else{var d=Na(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){ht(o,o.return,v)}}u&64&&HE(o),u&512&&Pu(o,o.return);break;case 3:if(Fr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Vv(n,s)}catch(v){ht(o,o.return,v)}}break;case 27:s===null&&u&4&&QE(o);case 26:case 5:Fr(n,o),s===null&&u&4&&KE(o),u&512&&Pu(o,o.return);break;case 12:Fr(n,o);break;case 31:Fr(n,o),u&4&&ZE(n,o);break;case 13:Fr(n,o),u&4&&eT(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=GR.bind(null,o),hC(n,o))));break;case 22:if(u=o.memoizedState!==null||Br,!u){s=s!==null&&s.memoizedState!==null||nn,d=Br;var p=nn;Br=u,(nn=s)&&!p?Hr(n,o,(o.subtreeFlags&8772)!==0):Fr(n,o),Br=d,nn=p}break;case 30:break;default:Fr(n,o)}}function JE(n){var s=n.alternate;s!==null&&(n.alternate=null,JE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&fo(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Dt=null,Xn=!1;function qr(n,s,o){for(o=o.child;o!==null;)WE(n,s,o),o=o.sibling}function WE(n,s,o){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(ii,o)}catch{}switch(o.tag){case 26:nn||pr(o,s),qr(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:nn||pr(o,s);var u=Dt,d=Xn;Ns(o.type)&&(Dt=o.stateNode,Xn=!1),qr(n,s,o),Hu(o.stateNode),Dt=u,Xn=d;break;case 5:nn||pr(o,s);case 6:if(u=Dt,d=Xn,Dt=null,qr(n,s,o),Dt=u,Xn=d,Dt!==null)if(Xn)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(o.stateNode)}catch(p){ht(o,s,p)}else try{Dt.removeChild(o.stateNode)}catch(p){ht(o,s,p)}break;case 18:Dt!==null&&(Xn?(n=Dt,HT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Jo(n)):HT(Dt,o.stateNode));break;case 4:u=Dt,d=Xn,Dt=o.stateNode.containerInfo,Xn=!0,qr(n,s,o),Dt=u,Xn=d;break;case 0:case 11:case 14:case 15:As(2,o,s),nn||As(4,o,s),qr(n,s,o);break;case 1:nn||(pr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&GE(o,s,u)),qr(n,s,o);break;case 21:qr(n,s,o);break;case 22:nn=(u=nn)||o.memoizedState!==null,qr(n,s,o),nn=u;break;default:qr(n,s,o)}}function ZE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Jo(n)}catch(o){ht(s,s.return,o)}}}function eT(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Jo(n)}catch(o){ht(s,s.return,o)}}function LR(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new $E),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new $E),s;default:throw Error(r(435,n.tag))}}function of(n,s){var o=LR(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=KR.bind(null,n,u);u.then(d,d)}})}function Jn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],p=n,v=s,A=v;e:for(;A!==null;){switch(A.tag){case 27:if(Ns(A.type)){Dt=A.stateNode,Xn=!1;break e}break;case 5:Dt=A.stateNode,Xn=!1;break e;case 3:case 4:Dt=A.stateNode.containerInfo,Xn=!0;break e}A=A.return}if(Dt===null)throw Error(r(160));WE(p,v,d),Dt=null,Xn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)tT(s,n),s=s.sibling}var Fi=null;function tT(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Jn(s,n),Wn(n),u&4&&(As(3,n,n.return),Vu(3,n),As(5,n,n.return));break;case 1:Jn(s,n),Wn(n),u&512&&(nn||o===null||pr(o,o.return)),u&64&&Br&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=Fi;if(Jn(s,n),Wn(n),u&512&&(nn||o===null||pr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[tr]||p[Xt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),Cn(p,u,o),p[Xt]=n,Jt(p),u=p;break e;case"link":var v=tb("link","href",d).get(u+(o.href||""));if(v){for(var A=0;A<v.length;A++)if(p=v[A],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(A,1);break t}}p=d.createElement(u),Cn(p,u,o),d.head.appendChild(p);break;case"meta":if(v=tb("meta","content",d).get(u+(o.content||""))){for(A=0;A<v.length;A++)if(p=v[A],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(A,1);break t}}p=d.createElement(u),Cn(p,u,o),d.head.appendChild(p);break;default:throw Error(r(468,u))}p[Xt]=n,Jt(p),u=p}n.stateNode=u}else nb(d,n.type,n.stateNode);else n.stateNode=eb(d,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?nb(d,n.type,n.stateNode):eb(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Ip(n,n.memoizedProps,o.memoizedProps)}break;case 27:Jn(s,n),Wn(n),u&512&&(nn||o===null||pr(o,o.return)),o!==null&&u&4&&Ip(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Jn(s,n),Wn(n),u&512&&(nn||o===null||pr(o,o.return)),n.flags&32){d=n.stateNode;try{$n(d,"")}catch(Ee){ht(n,n.return,Ee)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,Ip(n,d,o!==null?o.memoizedProps:d)),u&1024&&(Dp=!0);break;case 6:if(Jn(s,n),Wn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Ee){ht(n,n.return,Ee)}}break;case 3:if(Sf=null,d=Fi,Fi=Tf(s.containerInfo),Jn(s,n),Fi=d,Wn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Jo(s.containerInfo)}catch(Ee){ht(n,n.return,Ee)}Dp&&(Dp=!1,nT(n));break;case 4:u=Fi,Fi=Tf(n.stateNode.containerInfo),Jn(s,n),Wn(n),Fi=u;break;case 12:Jn(s,n),Wn(n);break;case 31:Jn(s,n),Wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,of(n,u)));break;case 13:Jn(s,n),Wn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(uf=Qt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,of(n,u)));break;case 22:d=n.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,$=Br,re=nn;if(Br=$||d,nn=re||L,Jn(s,n),nn=re,Br=$,Wn(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||L||Br||nn||Ma(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){L=o=s;try{if(p=L.stateNode,d)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=L.stateNode;var le=L.memoizedProps.style,W=le!=null&&le.hasOwnProperty("display")?le.display:null;A.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Ee){ht(L,L.return,Ee)}}}else if(s.tag===6){if(o===null){L=s;try{L.stateNode.nodeValue=d?"":L.memoizedProps}catch(Ee){ht(L,L.return,Ee)}}}else if(s.tag===18){if(o===null){L=s;try{var te=L.stateNode;d?GT(te,!0):GT(L.stateNode,!1)}catch(Ee){ht(L,L.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,of(n,o))));break;case 19:Jn(s,n),Wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,of(n,u)));break;case 30:break;case 21:break;default:Jn(s,n),Wn(n)}}function Wn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(YE(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var d=o.stateNode,p=Rp(n);af(n,p,d);break;case 5:var v=o.stateNode;o.flags&32&&($n(v,""),o.flags&=-33);var A=Rp(n);af(n,A,v);break;case 3:case 4:var L=o.stateNode.containerInfo,$=Rp(n);Cp(n,$,L);break;default:throw Error(r(161))}}catch(re){ht(n,n.return,re)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function nT(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;nT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Fr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)XE(n,s.alternate,s),s=s.sibling}function Ma(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:As(4,s,s.return),Ma(s);break;case 1:pr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&GE(s,s.return,o),Ma(s);break;case 27:Hu(s.stateNode);case 26:case 5:pr(s,s.return),Ma(s);break;case 22:s.memoizedState===null&&Ma(s);break;case 30:Ma(s);break;default:Ma(s)}n=n.sibling}}function Hr(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,p=s,v=p.flags;switch(p.tag){case 0:case 11:case 15:Hr(d,p,o),Vu(4,p);break;case 1:if(Hr(d,p,o),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch($){ht(u,u.return,$)}if(u=p,d=u.updateQueue,d!==null){var A=u.stateNode;try{var L=d.shared.hiddenCallbacks;if(L!==null)for(d.shared.hiddenCallbacks=null,d=0;d<L.length;d++)Ov(L[d],A)}catch($){ht(u,u.return,$)}}o&&v&64&&HE(p),Pu(p,p.return);break;case 27:QE(p);case 26:case 5:Hr(d,p,o),o&&u===null&&v&4&&KE(p),Pu(p,p.return);break;case 12:Hr(d,p,o);break;case 31:Hr(d,p,o),o&&v&4&&ZE(d,p);break;case 13:Hr(d,p,o),o&&v&4&&eT(d,p);break;case 22:p.memoizedState===null&&Hr(d,p,o),Pu(p,p.return);break;case 30:break;default:Hr(d,p,o)}s=s.sibling}}function xp(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Tu(o))}function Np(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Tu(n))}function Hi(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)iT(n,s,o,u),s=s.sibling}function iT(n,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Hi(n,s,o,u),d&2048&&Vu(9,s);break;case 1:Hi(n,s,o,u);break;case 3:Hi(n,s,o,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Tu(n)));break;case 12:if(d&2048){Hi(n,s,o,u),n=s.stateNode;try{var p=s.memoizedProps,v=p.id,A=p.onPostCommit;typeof A=="function"&&A(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){ht(s,s.return,L)}}else Hi(n,s,o,u);break;case 31:Hi(n,s,o,u);break;case 13:Hi(n,s,o,u);break;case 23:break;case 22:p=s.stateNode,v=s.alternate,s.memoizedState!==null?p._visibility&2?Hi(n,s,o,u):ku(n,s):p._visibility&2?Hi(n,s,o,u):(p._visibility|=2,zo(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&xp(v,s);break;case 24:Hi(n,s,o,u),d&2048&&Np(s.alternate,s);break;default:Hi(n,s,o,u)}}function zo(n,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,v=s,A=o,L=u,$=v.flags;switch(v.tag){case 0:case 11:case 15:zo(p,v,A,L,d),Vu(8,v);break;case 23:break;case 22:var re=v.stateNode;v.memoizedState!==null?re._visibility&2?zo(p,v,A,L,d):ku(p,v):(re._visibility|=2,zo(p,v,A,L,d)),d&&$&2048&&xp(v.alternate,v);break;case 24:zo(p,v,A,L,d),d&&$&2048&&Np(v.alternate,v);break;default:zo(p,v,A,L,d)}s=s.sibling}}function ku(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,d=u.flags;switch(u.tag){case 22:ku(o,u),d&2048&&xp(u.alternate,u);break;case 24:ku(o,u),d&2048&&Np(u.alternate,u);break;default:ku(o,u)}s=s.sibling}}var Lu=8192;function Bo(n,s,o){if(n.subtreeFlags&Lu)for(n=n.child;n!==null;)rT(n,s,o),n=n.sibling}function rT(n,s,o){switch(n.tag){case 26:Bo(n,s,o),n.flags&Lu&&n.memoizedState!==null&&SC(o,Fi,n.memoizedState,n.memoizedProps);break;case 5:Bo(n,s,o);break;case 3:case 4:var u=Fi;Fi=Tf(n.stateNode.containerInfo),Bo(n,s,o),Fi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Lu,Lu=16777216,Bo(n,s,o),Lu=u):Bo(n,s,o));break;default:Bo(n,s,o)}}function sT(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Uu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];yn=u,oT(u,n)}sT(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)aT(n),n=n.sibling}function aT(n){switch(n.tag){case 0:case 11:case 15:Uu(n),n.flags&2048&&As(9,n,n.return);break;case 3:Uu(n);break;case 12:Uu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,lf(n)):Uu(n);break;default:Uu(n)}}function lf(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];yn=u,oT(u,n)}sT(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:As(8,s,s.return),lf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,lf(s));break;default:lf(s)}n=n.sibling}}function oT(n,s){for(;yn!==null;){var o=yn;switch(o.tag){case 0:case 11:case 15:As(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Tu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,yn=u;else e:for(o=n;yn!==null;){u=yn;var d=u.sibling,p=u.return;if(JE(u),u===o){yn=null;break e}if(d!==null){d.return=p,yn=d;break e}yn=p}}}var UR={getCacheForType:function(n){var s=In(Zt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return In(Zt).controller.signal}},jR=typeof WeakMap=="function"?WeakMap:Map,at=0,Et=null,$e=null,Je=0,ct=0,fi=null,ws=!1,qo=!1,Mp=!1,Gr=0,Lt=0,Is=0,Oa=0,Op=0,di=0,Fo=0,ju=null,Zn=null,Vp=!1,uf=0,lT=0,cf=1/0,hf=null,Rs=null,un=0,Cs=null,Ho=null,Kr=0,Pp=0,kp=null,uT=null,zu=0,Lp=null;function mi(){return(at&2)!==0&&Je!==0?Je&-Je:X.T!==null?Fp():si()}function cT(){if(di===0)if((Je&536870912)===0||tt){var n=Dr;Dr<<=1,(Dr&3932160)===0&&(Dr=262144),di=n}else di=536870912;return n=ci.current,n!==null&&(n.flags|=32),di}function ei(n,s,o){(n===Et&&(ct===2||ct===9)||n.cancelPendingCommit!==null)&&(Go(n,0),Ds(n,Je,di,!1)),Yn(n,o),((at&2)===0||n!==Et)&&(n===Et&&((at&2)===0&&(Oa|=o),Lt===4&&Ds(n,Je,di,!1)),gr(n))}function hT(n,s,o){if((at&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||$t(n,s),d=u?qR(n,s):jp(n,s,!0),p=u;do{if(d===0){qo&&!u&&Ds(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!zR(o)){d=jp(n,s,!1),p=!1;continue}if(d===2){if(p=s,n.errorRecoveryDisabledLanes&p)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var A=n;d=ju;var L=A.current.memoizedState.isDehydrated;if(L&&(Go(A,v).flags|=256),v=jp(A,v,!1),v!==2){if(Mp&&!L){A.errorRecoveryDisabledLanes|=p,Oa|=p,d=4;break e}p=Zn,Zn=d,p!==null&&(Zn===null?Zn=p:Zn.push.apply(Zn,p))}d=v}if(p=!1,d!==2)continue}}if(d===1){Go(n,0),Ds(n,s,0,!0);break}e:{switch(u=n,p=d,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ds(u,s,di,!ws);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=uf+300-Qt(),10<d)){if(Ds(u,s,di,!ws),Rt(u,0,!0)!==0)break e;Kr=s,u.timeoutHandle=qT(fT.bind(null,u,o,Zn,hf,Vp,s,di,Oa,Fo,ws,p,"Throttled",-0,0),d);break e}fT(u,o,Zn,hf,Vp,s,di,Oa,Fo,ws,p,null,-0,0)}}break}while(!0);gr(n)}function fT(n,s,o,u,d,p,v,A,L,$,re,le,W,te){if(n.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Li},rT(s,p,le);var Ee=(p&62914560)===p?uf-Qt():(p&4194048)===p?lT-Qt():0;if(Ee=AC(le,Ee),Ee!==null){Kr=p,n.cancelPendingCommit=Ee(ET.bind(null,n,s,p,o,u,d,v,A,L,re,le,null,W,te)),Ds(n,p,v,!$);return}}ET(n,s,p,o,u,d,v,A,L)}function zR(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!li(p(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ds(n,s,o,u){s&=~Op,s&=~Oa,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var p=31-wt(d),v=1<<p;u[p]=-1,d&=~v}o!==0&&Mn(n,o,s)}function ff(){return(at&6)===0?(Bu(0),!1):!0}function Up(){if($e!==null){if(ct===0)var n=$e.return;else n=$e,Pr=Aa=null,ep(n),Po=null,Su=0,n=$e;for(;n!==null;)FE(n.alternate,n),n=n.return;$e=null}}function Go(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,aC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Kr=0,Up(),Et=n,$e=o=Or(n.current,null),Je=s,ct=0,fi=null,ws=!1,qo=$t(n,s),Mp=!1,Fo=di=Op=Oa=Is=Lt=0,Zn=ju=null,Vp=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-wt(u),p=1<<d;s|=n[d],u&=~p}return Gr=s,Mh(),o}function dT(n,s){He=null,X.H=Nu,s===Vo||s===zh?(s=Dv(),ct=3):s===qm?(s=Dv(),ct=4):ct=s===gp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fi=s,$e===null&&(Lt=1,ef(n,Ii(s,n.current)))}function mT(){var n=ci.current;return n===null?!0:(Je&4194048)===Je?xi===null:(Je&62914560)===Je||(Je&536870912)!==0?n===xi:!1}function pT(){var n=X.H;return X.H=Nu,n===null?Nu:n}function gT(){var n=X.A;return X.A=UR,n}function df(){Lt=4,ws||(Je&4194048)!==Je&&ci.current!==null||(qo=!0),(Is&134217727)===0&&(Oa&134217727)===0||Et===null||Ds(Et,Je,di,!1)}function jp(n,s,o){var u=at;at|=2;var d=pT(),p=gT();(Et!==n||Je!==s)&&(hf=null,Go(n,s)),s=!1;var v=Lt;e:do try{if(ct!==0&&$e!==null){var A=$e,L=fi;switch(ct){case 8:Up(),v=6;break e;case 3:case 2:case 9:case 6:ci.current===null&&(s=!0);var $=ct;if(ct=0,fi=null,Ko(n,A,L,$),o&&qo){v=0;break e}break;default:$=ct,ct=0,fi=null,Ko(n,A,L,$)}}BR(),v=Lt;break}catch(re){dT(n,re)}while(!0);return s&&n.shellSuspendCounter++,Pr=Aa=null,at=u,X.H=d,X.A=p,$e===null&&(Et=null,Je=0,Mh()),v}function BR(){for(;$e!==null;)yT($e)}function qR(n,s){var o=at;at|=2;var u=pT(),d=gT();Et!==n||Je!==s?(hf=null,cf=Qt()+500,Go(n,s)):qo=$t(n,s);e:do try{if(ct!==0&&$e!==null){s=$e;var p=fi;t:switch(ct){case 1:ct=0,fi=null,Ko(n,s,p,1);break;case 2:case 9:if(Rv(p)){ct=0,fi=null,_T(s);break}s=function(){ct!==2&&ct!==9||Et!==n||(ct=7),gr(n)},p.then(s,s);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Rv(p)?(ct=0,fi=null,_T(s)):(ct=0,fi=null,Ko(n,s,p,7));break;case 5:var v=null;switch($e.tag){case 26:v=$e.memoizedState;case 5:case 27:var A=$e;if(v?ib(v):A.stateNode.complete){ct=0,fi=null;var L=A.sibling;if(L!==null)$e=L;else{var $=A.return;$!==null?($e=$,mf($)):$e=null}break t}}ct=0,fi=null,Ko(n,s,p,5);break;case 6:ct=0,fi=null,Ko(n,s,p,6);break;case 8:Up(),Lt=6;break e;default:throw Error(r(462))}}FR();break}catch(re){dT(n,re)}while(!0);return Pr=Aa=null,X.H=u,X.A=d,at=o,$e!==null?0:(Et=null,Je=0,Mh(),Lt)}function FR(){for(;$e!==null&&!Wi();)yT($e)}function yT(n){var s=BE(n.alternate,n,Gr);n.memoizedProps=n.pendingProps,s===null?mf(n):$e=s}function _T(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=PE(o,s,s.pendingProps,s.type,void 0,Je);break;case 11:s=PE(o,s,s.pendingProps,s.type.render,s.ref,Je);break;case 5:ep(s);default:FE(o,s),s=$e=gv(s,Gr),s=BE(o,s,Gr)}n.memoizedProps=n.pendingProps,s===null?mf(n):$e=s}function Ko(n,s,o,u){Pr=Aa=null,ep(s),Po=null,Su=0;var d=s.return;try{if(NR(n,d,s,o,Je)){Lt=1,ef(n,Ii(o,n.current)),$e=null;return}}catch(p){if(d!==null)throw $e=d,p;Lt=1,ef(n,Ii(o,n.current)),$e=null;return}s.flags&32768?(tt||u===1?n=!0:qo||(Je&536870912)!==0?n=!1:(ws=n=!0,(u===2||u===9||u===3||u===6)&&(u=ci.current,u!==null&&u.tag===13&&(u.flags|=16384))),vT(s,n)):mf(s)}function mf(n){var s=n;do{if((s.flags&32768)!==0){vT(s,ws);return}n=s.return;var o=VR(s.alternate,s,Gr);if(o!==null){$e=o;return}if(s=s.sibling,s!==null){$e=s;return}$e=s=n}while(s!==null);Lt===0&&(Lt=5)}function vT(n,s){do{var o=PR(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);Lt=6,$e=null}function ET(n,s,o,u,d,p,v,A,L){n.cancelPendingCommit=null;do pf();while(un!==0);if((at&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=Rm,Bt(n,o,p,v,A,L),n===Et&&($e=Et=null,Je=0),Ho=s,Cs=n,Kr=o,Pp=p,kp=d,uT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,YR(bn,function(){return wT(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,d=ue.p,ue.p=2,v=at,at|=4;try{kR(n,s,o)}finally{at=v,ue.p=d,X.T=u}}un=1,TT(),bT(),ST()}}function TT(){if(un===1){un=0;var n=Cs,s=Ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=ue.p;ue.p=2;var d=at;at|=4;try{tT(s,n);var p=Jp,v=ov(n.containerInfo),A=p.focusedElem,L=p.selectionRange;if(v!==A&&A&&A.ownerDocument&&av(A.ownerDocument.documentElement,A)){if(L!==null&&bm(A)){var $=L.start,re=L.end;if(re===void 0&&(re=$),"selectionStart"in A)A.selectionStart=$,A.selectionEnd=Math.min(re,A.value.length);else{var le=A.ownerDocument||document,W=le&&le.defaultView||window;if(W.getSelection){var te=W.getSelection(),Ee=A.textContent.length,Ne=Math.min(L.start,Ee),_t=L.end===void 0?Ne:Math.min(L.end,Ee);!te.extend&&Ne>_t&&(v=_t,_t=Ne,Ne=v);var F=sv(A,Ne),B=sv(A,_t);if(F&&B&&(te.rangeCount!==1||te.anchorNode!==F.node||te.anchorOffset!==F.offset||te.focusNode!==B.node||te.focusOffset!==B.offset)){var Y=le.createRange();Y.setStart(F.node,F.offset),te.removeAllRanges(),Ne>_t?(te.addRange(Y),te.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),te.addRange(Y))}}}}for(le=[],te=A;te=te.parentNode;)te.nodeType===1&&le.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<le.length;A++){var oe=le[A];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Rf=!!Xp,Jp=Xp=null}finally{at=d,ue.p=u,X.T=o}}n.current=s,un=2}}function bT(){if(un===2){un=0;var n=Cs,s=Ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=ue.p;ue.p=2;var d=at;at|=4;try{XE(n,s.alternate,s)}finally{at=d,ue.p=u,X.T=o}}un=3}}function ST(){if(un===4||un===3){un=0,Zi();var n=Cs,s=Ho,o=Kr,u=uT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,Ho=Cs=null,AT(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Rs=null),Bn(o),s=s.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(ii,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,d=ue.p,ue.p=2,X.T=null;try{for(var p=n.onRecoverableError,v=0;v<u.length;v++){var A=u[v];p(A.value,{componentStack:A.stack})}}finally{X.T=s,ue.p=d}}(Kr&3)!==0&&pf(),gr(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===Lp?zu++:(zu=0,Lp=n):zu=0,Bu(0)}}function AT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Tu(s)))}function pf(){return TT(),bT(),ST(),wT()}function wT(){if(un!==5)return!1;var n=Cs,s=Pp;Pp=0;var o=Bn(Kr),u=X.T,d=ue.p;try{ue.p=32>o?32:o,X.T=null,o=kp,kp=null;var p=Cs,v=Kr;if(un=0,Ho=Cs=null,Kr=0,(at&6)!==0)throw Error(r(331));var A=at;if(at|=4,aT(p.current),iT(p,p.current,v,o),at=A,Bu(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(ii,p)}catch{}return!0}finally{ue.p=d,X.T=u,AT(n,s)}}function IT(n,s,o){s=Ii(o,s),s=pp(n.stateNode,s,2),n=Ts(n,s,2),n!==null&&(Yn(n,2),gr(n))}function ht(n,s,o){if(n.tag===3)IT(n,n,o);else for(;s!==null;){if(s.tag===3){IT(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Rs===null||!Rs.has(u))){n=Ii(o,n),o=RE(2),u=Ts(s,o,2),u!==null&&(CE(o,u,s,n),Yn(u,2),gr(u));break}}s=s.return}}function zp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new jR;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(Mp=!0,d.add(o),n=HR.bind(null,n,s,o),s.then(n,n))}function HR(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Et===n&&(Je&o)===o&&(Lt===4||Lt===3&&(Je&62914560)===Je&&300>Qt()-uf?(at&2)===0&&Go(n,0):Op|=o,Fo===Je&&(Fo=0)),gr(n)}function RT(n,s){s===0&&(s=mn()),n=Ta(n,s),n!==null&&(Yn(n,s),gr(n))}function GR(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),RT(n,o)}function KR(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),RT(n,o)}function YR(n,s){return Ue(n,s)}var gf=null,Yo=null,Bp=!1,yf=!1,qp=!1,xs=0;function gr(n){n!==Yo&&n.next===null&&(Yo===null?gf=Yo=n:Yo=Yo.next=n),yf=!0,Bp||(Bp=!0,$R())}function Bu(n,s){if(!qp&&yf){qp=!0;do for(var o=!1,u=gf;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var v=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-wt(42|n)+1)-1,p&=d&~(v&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,NT(u,p))}else p=Je,p=Rt(u,u===Et?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||$t(u,p)||(o=!0,NT(u,p));u=u.next}while(o);qp=!1}}function QR(){CT()}function CT(){yf=Bp=!1;var n=0;xs!==0&&sC()&&(n=xs);for(var s=Qt(),o=null,u=gf;u!==null;){var d=u.next,p=DT(u,s);p===0?(u.next=null,o===null?gf=d:o.next=d,d===null&&(Yo=o)):(o=u,(n!==0||(p&3)!==0)&&(yf=!0)),u=d}un!==0&&un!==5||Bu(n),xs!==0&&(xs=0)}function DT(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var v=31-wt(p),A=1<<v,L=d[v];L===-1?((A&o)===0||(A&u)!==0)&&(d[v]=Nn(A,s)):L<=s&&(n.expiredLanes|=A),p&=~A}if(s=Et,o=Je,o=Rt(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(ct===2||ct===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&jt(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||$t(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&jt(u),Bn(o)){case 2:case 8:o=Tn;break;case 32:o=bn;break;case 268435456:o=Tt;break;default:o=bn}return u=xT.bind(null,n),o=Ue(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&jt(u),n.callbackPriority=2,n.callbackNode=null,2}function xT(n,s){if(un!==0&&un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(pf()&&n.callbackNode!==o)return null;var u=Je;return u=Rt(n,n===Et?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(hT(n,u,s),DT(n,Qt()),n.callbackNode!=null&&n.callbackNode===o?xT.bind(null,n):null)}function NT(n,s){if(pf())return null;hT(n,s,!0)}function $R(){oC(function(){(at&6)!==0?Ue(vi,QR):CT()})}function Fp(){if(xs===0){var n=Mo;n===0&&(n=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),xs=n}return xs}function MT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yo(""+n)}function OT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function XR(n,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var p=MT((d[pn]||null).action),v=u.submitter;v&&(s=(s=v[pn]||null)?MT(s.formAction):v.getAttribute("formAction"),s!==null&&(p=s,v=null));var A=new ur("action","action",null,u,d);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(xs!==0){var L=v?OT(d,v):new FormData(d);up(o,{pending:!0,data:L,method:d.method,action:p},null,L)}}else typeof p=="function"&&(A.preventDefault(),L=v?OT(d,v):new FormData(d),up(o,{pending:!0,data:L,method:d.method,action:p},p,L))},currentTarget:d}]})}}for(var Hp=0;Hp<Im.length;Hp++){var Gp=Im[Hp],JR=Gp.toLowerCase(),WR=Gp[0].toUpperCase()+Gp.slice(1);qi(JR,"on"+WR)}qi(cv,"onAnimationEnd"),qi(hv,"onAnimationIteration"),qi(fv,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(mR,"onTransitionRun"),qi(pR,"onTransitionStart"),qi(gR,"onTransitionCancel"),qi(dv,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qu));function VT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var v=u.length-1;0<=v;v--){var A=u[v],L=A.instance,$=A.currentTarget;if(A=A.listener,L!==p&&d.isPropagationStopped())break e;p=A,d.currentTarget=$;try{p(d)}catch(re){Nh(re)}d.currentTarget=null,p=L}else for(v=0;v<u.length;v++){if(A=u[v],L=A.instance,$=A.currentTarget,A=A.listener,L!==p&&d.isPropagationStopped())break e;p=A,d.currentTarget=$;try{p(d)}catch(re){Nh(re)}d.currentTarget=null,p=L}}}}function Xe(n,s){var o=s[ho];o===void 0&&(o=s[ho]=new Set);var u=n+"__bubble";o.has(u)||(PT(s,n,2,!1),o.add(u))}function Kp(n,s,o){var u=0;s&&(u|=4),PT(o,n,u,s)}var _f="_reactListening"+Math.random().toString(36).slice(2);function Yp(n){if(!n[_f]){n[_f]=!0,eu.forEach(function(o){o!=="selectionchange"&&(ZR.has(o)||Kp(o,!1,n),Kp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[_f]||(s[_f]=!0,Kp("selectionchange",!1,s))}}function PT(n,s,o,u){switch(cb(s)){case 2:var d=RC;break;case 8:d=CC;break;default:d=lg}o=d.bind(null,s,o,n),d=void 0,!da||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,o,{capture:!0,passive:d}):n.addEventListener(s,o,!0):d!==void 0?n.addEventListener(s,o,{passive:d}):n.addEventListener(s,o,!1)}function Qp(n,s,o,u,d){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var A=u.stateNode.containerInfo;if(A===d)break;if(v===4)for(v=u.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;A!==null;){if(v=nr(A),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){u=p=v;continue e}A=A.parentNode}}u=u.return}hs(function(){var $=p,re=bi(o),le=[];e:{var W=mv.get(n);if(W!==void 0){var te=ur,Ee=n;switch(n){case"keypress":if(pa(o)===0)break e;case"keydown":case"keyup":te=Ch;break;case"focusin":Ee="focus",te=ya;break;case"focusout":Ee="blur",te=ya;break;case"beforeblur":case"afterblur":te=ya;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=y;break;case cv:case hv:case fv:te=Th;break;case dv:te=R;break;case"scroll":case"scrollend":te=fu;break;case"wheel":te=ee;break;case"copy":case"cut":case"paste":te=bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Mr;break;case"toggle":case"beforetoggle":te=Fe}var Ne=(s&4)!==0,_t=!Ne&&(n==="scroll"||n==="scrollend"),F=Ne?W!==null?W+"Capture":null:W;Ne=[];for(var B=$,Y;B!==null;){var oe=B;if(Y=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Y===null||F===null||(oe=Ui(B,F),oe!=null&&Ne.push(Fu(B,oe,Y))),_t)break;B=B.return}0<Ne.length&&(W=new te(W,Ee,null,o,re),le.push({event:W,listeners:Ne}))}}if((s&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",te=n==="mouseout"||n==="pointerout",W&&o!==uu&&(Ee=o.relatedTarget||o.fromElement)&&(nr(Ee)||Ee[er]))break e;if((te||W)&&(W=re.window===re?re:(W=re.ownerDocument)?W.defaultView||W.parentWindow:window,te?(Ee=o.relatedTarget||o.toElement,te=$,Ee=Ee?nr(Ee):null,Ee!==null&&(_t=l(Ee),Ne=Ee.tag,Ee!==_t||Ne!==5&&Ne!==27&&Ne!==6)&&(Ee=null)):(te=null,Ee=$),te!==Ee)){if(Ne=du,oe="onMouseLeave",F="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Mr,oe="onPointerLeave",F="onPointerEnter",B="pointer"),_t=te==null?W:ai(te),Y=Ee==null?W:ai(Ee),W=new Ne(oe,B+"leave",te,o,re),W.target=_t,W.relatedTarget=Y,oe=null,nr(re)===$&&(Ne=new Ne(F,B+"enter",Ee,o,re),Ne.target=Y,Ne.relatedTarget=_t,oe=Ne),_t=oe,te&&Ee)t:{for(Ne=eC,F=te,B=Ee,Y=0,oe=F;oe;oe=Ne(oe))Y++;oe=0;for(var Re=B;Re;Re=Ne(Re))oe++;for(;0<Y-oe;)F=Ne(F),Y--;for(;0<oe-Y;)B=Ne(B),oe--;for(;Y--;){if(F===B||B!==null&&F===B.alternate){Ne=F;break t}F=Ne(F),B=Ne(B)}Ne=null}else Ne=null;te!==null&&kT(le,W,te,Ne,!1),Ee!==null&&_t!==null&&kT(le,_t,Ee,Ne,!0)}}e:{if(W=$?ai($):window,te=W.nodeName&&W.nodeName.toLowerCase(),te==="select"||te==="input"&&W.type==="file")var it=Z_;else if(J_(W))if(ev)it=hR;else{it=uR;var Se=lR}else te=W.nodeName,!te||te.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?$&&go($.elementType)&&(it=Z_):it=cR;if(it&&(it=it(n,$))){W_(le,it,o,re);break e}Se&&Se(n,W,$),n==="focusout"&&$&&W.type==="number"&&$.memoizedProps.value!=null&&au(W,"number",W.value)}switch(Se=$?ai($):window,n){case"focusin":(J_(Se)||Se.contentEditable==="true")&&(Ao=Se,Sm=$,_u=null);break;case"focusout":_u=Sm=Ao=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,lv(le,o,re);break;case"selectionchange":if(dR)break;case"keydown":case"keyup":lv(le,o,re)}var Ke;if(st)e:{switch(n){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else So?_a(n,o)&&(We="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(We="onCompositionStart");We&&(fr&&o.locale!=="ko"&&(So||We!=="onCompositionStart"?We==="onCompositionEnd"&&So&&(Ke=hu()):(lr=re,cu="value"in lr?lr.value:lr.textContent,So=!0)),Se=vf($,We),0<Se.length&&(We=new hr(We,n,null,o,re),le.push({event:We,listeners:Se}),Ke?We.data=Ke:(Ke=bo(o),Ke!==null&&(We.data=Ke)))),(Ke=Ai?rR(n,o):sR(n,o))&&(We=vf($,"onBeforeInput"),0<We.length&&(Se=new hr("onBeforeInput","beforeinput",null,o,re),le.push({event:Se,listeners:We}),Se.data=Ke)),XR(le,n,$,o,re)}VT(le,s)})}function Fu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function vf(n,s){for(var o=s+"Capture",u=[];n!==null;){var d=n,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Ui(n,o),d!=null&&u.unshift(Fu(n,d,p)),d=Ui(n,s),d!=null&&u.push(Fu(n,d,p))),n.tag===3)return u;n=n.return}return[]}function eC(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function kT(n,s,o,u,d){for(var p=s._reactName,v=[];o!==null&&o!==u;){var A=o,L=A.alternate,$=A.stateNode;if(A=A.tag,L!==null&&L===u)break;A!==5&&A!==26&&A!==27||$===null||(L=$,d?($=Ui(o,p),$!=null&&v.unshift(Fu(o,$,L))):d||($=Ui(o,p),$!=null&&v.push(Fu(o,$,L)))),o=o.return}v.length!==0&&n.push({event:s,listeners:v})}var tC=/\r\n?/g,nC=/\u0000|\uFFFD/g;function LT(n){return(typeof n=="string"?n:""+n).replace(tC,`
`).replace(nC,"")}function UT(n,s){return s=LT(s),LT(n)===s}function yt(n,s,o,u,d,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||$n(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&$n(n,""+u);break;case"className":oi(n,"class",u);break;case"tabIndex":oi(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(n,o,u);break;case"style":lu(n,u,p);break;case"data":if(s!=="object"){oi(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=yo(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&yt(n,s,"name",d.name,d,null),yt(n,s,"formEncType",d.formEncType,d,null),yt(n,s,"formMethod",d.formMethod,d,null),yt(n,s,"formTarget",d.formTarget,d,null)):(yt(n,s,"encType",d.encType,d,null),yt(n,s,"method",d.method,d,null),yt(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=yo(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Li);break;case"onScroll":u!=null&&Xe("scroll",n);break;case"onScrollEnd":u!=null&&Xe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=yo(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Xe("beforetoggle",n),Xe("toggle",n),mo(n,"popover",u);break;case"xlinkActuate":Wt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Wt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Wt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Wt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Wt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Wt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":mo(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_h.get(o)||o,mo(n,o,u))}}function $p(n,s,o,u,d,p){switch(o){case"style":lu(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?$n(n,u):(typeof u=="number"||typeof u=="bigint")&&$n(n,""+u);break;case"onScroll":u!=null&&Xe("scroll",n);break;case"onScrollEnd":u!=null&&Xe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tu.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),p=n[pn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):mo(n,o,u)}}}function Cn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",n),Xe("load",n);var u=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:yt(n,s,p,v,o,null)}}d&&yt(n,s,"srcSet",o.srcSet,o,null),u&&yt(n,s,"src",o.src,o,null);return;case"input":Xe("invalid",n);var A=p=v=d=null,L=null,$=null;for(u in o)if(o.hasOwnProperty(u)){var re=o[u];if(re!=null)switch(u){case"name":d=re;break;case"type":v=re;break;case"checked":L=re;break;case"defaultChecked":$=re;break;case"value":p=re;break;case"defaultValue":A=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,s));break;default:yt(n,s,u,re,o,null)}}ph(n,p,A,L,$,v,d,!1);return;case"select":Xe("invalid",n),u=v=p=null;for(d in o)if(o.hasOwnProperty(d)&&(A=o[d],A!=null))switch(d){case"value":p=A;break;case"defaultValue":v=A;break;case"multiple":u=A;default:yt(n,s,d,A,o,null)}s=p,o=v,n.multiple=!!u,s!=null?os(n,!!u,s,!1):o!=null&&os(n,!!u,o,!0);return;case"textarea":Xe("invalid",n),p=d=u=null;for(v in o)if(o.hasOwnProperty(v)&&(A=o[v],A!=null))switch(v){case"value":u=A;break;case"defaultValue":d=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:yt(n,s,v,A,o,null)}ls(n,u,d,p);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(u=o[L],u!=null))switch(L){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:yt(n,s,L,u,o,null)}return;case"dialog":Xe("beforetoggle",n),Xe("toggle",n),Xe("cancel",n),Xe("close",n);break;case"iframe":case"object":Xe("load",n);break;case"video":case"audio":for(u=0;u<qu.length;u++)Xe(qu[u],n);break;case"image":Xe("error",n),Xe("load",n);break;case"details":Xe("toggle",n);break;case"embed":case"source":case"link":Xe("error",n),Xe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(u=o[$],u!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:yt(n,s,$,u,o,null)}return;default:if(go(s)){for(re in o)o.hasOwnProperty(re)&&(u=o[re],u!==void 0&&$p(n,s,re,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&yt(n,s,A,u,o,null))}function iC(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,v=null,A=null,L=null,$=null,re=null;for(te in o){var le=o[te];if(o.hasOwnProperty(te)&&le!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":L=le;default:u.hasOwnProperty(te)||yt(n,s,te,null,u,le)}}for(var W in u){var te=u[W];if(le=o[W],u.hasOwnProperty(W)&&(te!=null||le!=null))switch(W){case"type":p=te;break;case"name":d=te;break;case"checked":$=te;break;case"defaultChecked":re=te;break;case"value":v=te;break;case"defaultValue":A=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:te!==le&&yt(n,s,W,te,u,le)}}po(n,v,A,L,$,re,p,d);return;case"select":te=v=A=W=null;for(p in o)if(L=o[p],o.hasOwnProperty(p)&&L!=null)switch(p){case"value":break;case"multiple":te=L;default:u.hasOwnProperty(p)||yt(n,s,p,null,u,L)}for(d in u)if(p=u[d],L=o[d],u.hasOwnProperty(d)&&(p!=null||L!=null))switch(d){case"value":W=p;break;case"defaultValue":A=p;break;case"multiple":v=p;default:p!==L&&yt(n,s,d,p,u,L)}s=A,o=v,u=te,W!=null?os(n,!!o,W,!1):!!u!=!!o&&(s!=null?os(n,!!o,s,!0):os(n,!!o,o?[]:"",!1));return;case"textarea":te=W=null;for(A in o)if(d=o[A],o.hasOwnProperty(A)&&d!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:yt(n,s,A,null,u,d)}for(v in u)if(d=u[v],p=o[v],u.hasOwnProperty(v)&&(d!=null||p!=null))switch(v){case"value":W=d;break;case"defaultValue":te=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==p&&yt(n,s,v,d,u,p)}gh(n,W,te);return;case"option":for(var Ee in o)if(W=o[Ee],o.hasOwnProperty(Ee)&&W!=null&&!u.hasOwnProperty(Ee))switch(Ee){case"selected":n.selected=!1;break;default:yt(n,s,Ee,null,u,W)}for(L in u)if(W=u[L],te=o[L],u.hasOwnProperty(L)&&W!==te&&(W!=null||te!=null))switch(L){case"selected":n.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:yt(n,s,L,W,u,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in o)W=o[Ne],o.hasOwnProperty(Ne)&&W!=null&&!u.hasOwnProperty(Ne)&&yt(n,s,Ne,null,u,W);for($ in u)if(W=u[$],te=o[$],u.hasOwnProperty($)&&W!==te&&(W!=null||te!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:yt(n,s,$,W,u,te)}return;default:if(go(s)){for(var _t in o)W=o[_t],o.hasOwnProperty(_t)&&W!==void 0&&!u.hasOwnProperty(_t)&&$p(n,s,_t,void 0,u,W);for(re in u)W=u[re],te=o[re],!u.hasOwnProperty(re)||W===te||W===void 0&&te===void 0||$p(n,s,re,W,u,te);return}}for(var F in o)W=o[F],o.hasOwnProperty(F)&&W!=null&&!u.hasOwnProperty(F)&&yt(n,s,F,null,u,W);for(le in u)W=u[le],te=o[le],!u.hasOwnProperty(le)||W===te||W==null&&te==null||yt(n,s,le,W,u,te)}function jT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rC(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],p=d.transferSize,v=d.initiatorType,A=d.duration;if(p&&A&&jT(v)){for(v=0,A=d.responseEnd,u+=1;u<o.length;u++){var L=o[u],$=L.startTime;if($>A)break;var re=L.transferSize,le=L.initiatorType;re&&jT(le)&&(L=L.responseEnd,v+=re*(L<A?1:(A-$)/(L-$)))}if(--u,s+=8*(p+v)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Xp=null,Jp=null;function Ef(n){return n.nodeType===9?n:n.ownerDocument}function zT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function BT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Wp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zp=null;function sC(){var n=window.event;return n&&n.type==="popstate"?n===Zp?!1:(Zp=n,!0):(Zp=null,!1)}var qT=typeof setTimeout=="function"?setTimeout:void 0,aC=typeof clearTimeout=="function"?clearTimeout:void 0,FT=typeof Promise=="function"?Promise:void 0,oC=typeof queueMicrotask=="function"?queueMicrotask:typeof FT<"u"?function(n){return FT.resolve(null).then(n).catch(lC)}:qT;function lC(n){setTimeout(function(){throw n})}function Ns(n){return n==="head"}function HT(n,s){var o=s,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),Jo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Hu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Hu(o);for(var p=o.firstChild;p;){var v=p.nextSibling,A=p.nodeName;p[tr]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&Hu(n.ownerDocument.body);o=d}while(o);Jo(s)}function GT(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function eg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":eg(o),fo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function uC(n,s,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[tr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Ni(n.nextSibling),n===null)break}return null}function cC(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ni(n.nextSibling),n===null))return null;return n}function KT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ni(n.nextSibling),n===null))return null;return n}function tg(n){return n.data==="$?"||n.data==="$~"}function ng(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function hC(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ni(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var ig=null;function YT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Ni(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function QT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function $T(n,s,o){switch(s=Ef(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Hu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);fo(n)}var Mi=new Map,XT=new Set;function Tf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Yr=ue.d;ue.d={f:fC,r:dC,D:mC,C:pC,L:gC,m:yC,X:vC,S:_C,M:EC};function fC(){var n=Yr.f(),s=ff();return n||s}function dC(n){var s=Ti(n);s!==null&&s.tag===5&&s.type==="form"?dE(s):Yr.r(n)}var Qo=typeof document>"u"?null:document;function JT(n,s,o){var u=Qo;if(u&&typeof s=="string"&&s){var d=Qn(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),XT.has(d)||(XT.add(d),n={rel:n,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Cn(s,"link",n),Jt(s),u.head.appendChild(s)))}}function mC(n){Yr.D(n),JT("dns-prefetch",n,null)}function pC(n,s){Yr.C(n,s),JT("preconnect",n,s)}function gC(n,s,o){Yr.L(n,s,o);var u=Qo;if(u&&n&&s){var d='link[rel="preload"][as="'+Qn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Qn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Qn(o.imageSizes)+'"]')):d+='[href="'+Qn(n)+'"]';var p=d;switch(s){case"style":p=$o(n);break;case"script":p=Xo(n)}Mi.has(p)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Mi.set(p,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(Gu(p))||s==="script"&&u.querySelector(Ku(p))||(s=u.createElement("link"),Cn(s,"link",n),Jt(s),u.head.appendChild(s)))}}function yC(n,s){Yr.m(n,s);var o=Qo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Qn(u)+'"][href="'+Qn(n)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Xo(n)}if(!Mi.has(p)&&(n=E({rel:"modulepreload",href:n},s),Mi.set(p,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ku(p)))return}u=o.createElement("link"),Cn(u,"link",n),Jt(u),o.head.appendChild(u)}}}function _C(n,s,o){Yr.S(n,s,o);var u=Qo;if(u&&n){var d=ir(u).hoistableStyles,p=$o(n);s=s||"default";var v=d.get(p);if(!v){var A={loading:0,preload:null};if(v=u.querySelector(Gu(p)))A.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Mi.get(p))&&rg(n,o);var L=v=u.createElement("link");Jt(L),Cn(L,"link",n),L._p=new Promise(function($,re){L.onload=$,L.onerror=re}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,bf(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:A},d.set(p,v)}}}function vC(n,s){Yr.X(n,s);var o=Qo;if(o&&n){var u=ir(o).hoistableScripts,d=Xo(n),p=u.get(d);p||(p=o.querySelector(Ku(d)),p||(n=E({src:n,async:!0},s),(s=Mi.get(d))&&sg(n,s),p=o.createElement("script"),Jt(p),Cn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function EC(n,s){Yr.M(n,s);var o=Qo;if(o&&n){var u=ir(o).hoistableScripts,d=Xo(n),p=u.get(d);p||(p=o.querySelector(Ku(d)),p||(n=E({src:n,async:!0,type:"module"},s),(s=Mi.get(d))&&sg(n,s),p=o.createElement("script"),Jt(p),Cn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function WT(n,s,o,u){var d=(d=ye.current)?Tf(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=$o(o.href),o=ir(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=$o(o.href);var p=ir(d).hoistableStyles,v=p.get(n);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,v),(p=d.querySelector(Gu(n)))&&!p._p&&(v.instance=p,v.state.loading=5),Mi.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Mi.set(n,o),p||TC(d,n,o,v.state))),s&&u===null)throw Error(r(528,""));return v}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xo(o),o=ir(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function $o(n){return'href="'+Qn(n)+'"'}function Gu(n){return'link[rel="stylesheet"]['+n+"]"}function ZT(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function TC(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Cn(s,"link",o),Jt(s),n.head.appendChild(s))}function Xo(n){return'[src="'+Qn(n)+'"]'}function Ku(n){return"script[async]"+n}function eb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Qn(o.href)+'"]');if(u)return s.instance=u,Jt(u),u;var d=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Jt(u),Cn(u,"style",d),bf(u,o.precedence,n),s.instance=u;case"stylesheet":d=$o(o.href);var p=n.querySelector(Gu(d));if(p)return s.state.loading|=4,s.instance=p,Jt(p),p;u=ZT(o),(d=Mi.get(d))&&rg(u,d),p=(n.ownerDocument||n).createElement("link"),Jt(p);var v=p;return v._p=new Promise(function(A,L){v.onload=A,v.onerror=L}),Cn(p,"link",u),s.state.loading|=4,bf(p,o.precedence,n),s.instance=p;case"script":return p=Xo(o.src),(d=n.querySelector(Ku(p)))?(s.instance=d,Jt(d),d):(u=o,(d=Mi.get(p))&&(u=E({},o),sg(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Jt(d),Cn(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,bf(u,o.precedence,n));return s.instance}function bf(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,v=0;v<u.length;v++){var A=u[v];if(A.dataset.precedence===s)p=A;else if(p!==d)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function rg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function sg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Sf=null;function tb(n,s,o){if(Sf===null){var u=new Map,d=Sf=new Map;d.set(o,u)}else d=Sf,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var p=o[d];if(!(p[tr]||p[Xt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(s)||"";v=n+v;var A=u.get(v);A?A.push(p):u.set(v,[p])}}return u}function nb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function bC(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ib(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function SC(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=$o(u.href),p=s.querySelector(Gu(d));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Af.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=p,Jt(p);return}p=s.ownerDocument||s,u=ZT(u),(d=Mi.get(d))&&rg(u,d),p=p.createElement("link"),Jt(p);var v=p;v._p=new Promise(function(A,L){v.onload=A,v.onerror=L}),Cn(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Af.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var ag=0;function AC(n,s){return n.stylesheets&&n.count===0&&If(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&If(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&ag===0&&(ag=62500*rC());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&If(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>ag?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function Af(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)If(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var wf=null;function If(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,wf=new Map,s.forEach(wC,n),wf=null,Af.call(n))}function wC(n,s){if(!(s.state.loading&4)){var o=wf.get(n);if(o)var u=o.get(null);else{o=new Map,wf.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var v=d[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}d=s.instance,v=d.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,d),o.set(v,d),this.count++,u=Af.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var Yu={$$typeof:q,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function IC(n,s,o,u,d,p,v,A,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function rb(n,s,o,u,d,p,v,A,L,$,re,le){return n=new IC(n,s,o,v,L,$,re,le,A),s=1,p===!0&&(s|=24),p=ui(3,null,null,s),n.current=p,p.stateNode=n,s=jm(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Fm(p),n}function sb(n){return n?(n=Ro,n):Ro}function ab(n,s,o,u,d,p){d=sb(d),u.context===null?u.context=d:u.pendingContext=d,u=Es(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ts(n,u,s),o!==null&&(ei(o,n,s),wu(o,n,s))}function ob(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function og(n,s){ob(n,s),(n=n.alternate)&&ob(n,s)}function lb(n){if(n.tag===13||n.tag===31){var s=Ta(n,67108864);s!==null&&ei(s,n,67108864),og(n,67108864)}}function ub(n){if(n.tag===13||n.tag===31){var s=mi();s=ri(s);var o=Ta(n,s);o!==null&&ei(o,n,s),og(n,s)}}var Rf=!0;function RC(n,s,o,u){var d=X.T;X.T=null;var p=ue.p;try{ue.p=2,lg(n,s,o,u)}finally{ue.p=p,X.T=d}}function CC(n,s,o,u){var d=X.T;X.T=null;var p=ue.p;try{ue.p=8,lg(n,s,o,u)}finally{ue.p=p,X.T=d}}function lg(n,s,o,u){if(Rf){var d=ug(u);if(d===null)Qp(n,s,u,Cf,o),hb(n,u);else if(xC(d,n,s,o,u))u.stopPropagation();else if(hb(n,u),s&4&&-1<DC.indexOf(n)){for(;d!==null;){var p=Ti(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=It(p.pendingLanes);if(v!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var L=1<<31-wt(v);A.entanglements[1]|=L,v&=~L}gr(p),(at&6)===0&&(cf=Qt()+500,Bu(0))}}break;case 31:case 13:A=Ta(p,2),A!==null&&ei(A,p,2),ff(),og(p,2)}if(p=ug(u),p===null&&Qp(n,s,u,Cf,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else Qp(n,s,u,null,o)}}function ug(n){return n=bi(n),cg(n)}var Cf=null;function cg(n){if(Cf=null,n=nr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=f(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Cf=n,null}function cb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ki()){case vi:return 2;case Tn:return 8;case bn:case qe:return 32;case Tt:return 268435456;default:return 32}default:return 32}}var hg=!1,Ms=null,Os=null,Vs=null,Qu=new Map,$u=new Map,Ps=[],DC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hb(n,s){switch(n){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":Qu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(s.pointerId)}}function Xu(n,s,o,u,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},s!==null&&(s=Ti(s),s!==null&&lb(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function xC(n,s,o,u,d){switch(s){case"focusin":return Ms=Xu(Ms,n,s,o,u,d),!0;case"dragenter":return Os=Xu(Os,n,s,o,u,d),!0;case"mouseover":return Vs=Xu(Vs,n,s,o,u,d),!0;case"pointerover":var p=d.pointerId;return Qu.set(p,Xu(Qu.get(p)||null,n,s,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,$u.set(p,Xu($u.get(p)||null,n,s,o,u,d)),!0}return!1}function fb(n){var s=nr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Sn(n.priority,function(){ub(o)});return}}else if(s===31){if(s=f(o),s!==null){n.blockedOn=s,Sn(n.priority,function(){ub(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Df(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=ug(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);uu=u,o.target.dispatchEvent(u),uu=null}else return s=Ti(o),s!==null&&lb(s),n.blockedOn=o,!1;s.shift()}return!0}function db(n,s,o){Df(n)&&o.delete(s)}function NC(){hg=!1,Ms!==null&&Df(Ms)&&(Ms=null),Os!==null&&Df(Os)&&(Os=null),Vs!==null&&Df(Vs)&&(Vs=null),Qu.forEach(db),$u.forEach(db)}function xf(n,s){n.blockedOn===s&&(n.blockedOn=null,hg||(hg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,NC)))}var Nf=null;function mb(n){Nf!==n&&(Nf=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Nf===n&&(Nf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(cg(u||o)===null)continue;break}var p=Ti(o);p!==null&&(n.splice(s,3),s-=3,up(p,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Jo(n){function s(L){return xf(L,n)}Ms!==null&&xf(Ms,n),Os!==null&&xf(Os,n),Vs!==null&&xf(Vs,n),Qu.forEach(s),$u.forEach(s);for(var o=0;o<Ps.length;o++){var u=Ps[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ps.length&&(o=Ps[0],o.blockedOn===null);)fb(o),o.blockedOn===null&&Ps.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],p=o[u+1],v=d[pn]||null;if(typeof p=="function")v||mb(o);else if(v){var A=null;if(p&&p.hasAttribute("formAction")){if(d=p,v=p[pn]||null)A=v.formAction;else if(cg(d)!==null)continue}else A=v.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),mb(o)}}}function pb(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function fg(n){this._internalRoot=n}Mf.prototype.render=fg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=mi();ab(o,u,n,s,null,null)},Mf.prototype.unmount=fg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ab(n.current,2,null,n,null,null),ff(),s[er]=null}};function Mf(n){this._internalRoot=n}Mf.prototype.unstable_scheduleHydration=function(n){if(n){var s=si();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Ps.length&&s!==0&&s<Ps[o].priority;o++);Ps.splice(o,0,n),o===0&&fb(n)}};var gb=e.version;if(gb!=="19.2.4")throw Error(r(527,gb,"19.2.4"));ue.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var MC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Of.isDisabled&&Of.supportsFiber)try{ii=Of.inject(MC),ln=Of}catch{}}return Wu.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,u="",d=SE,p=AE,v=wE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=rb(n,1,!1,null,null,o,u,null,d,p,v,pb),n[er]=s.current,Yp(n),new fg(s)},Wu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var u=!1,d="",p=SE,v=AE,A=wE,L=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(L=o.formState)),s=rb(n,1,!0,s,o??null,u,d,L,p,v,A,pb),s.context=sb(null),o=s.current,u=mi(),u=ri(u),d=Es(u),d.callback=null,Ts(o,d,u),o=u,s.current.lanes=o,Yn(s,o),gr(s),n[er]=s.current,Yp(n),new Mf(s)},Wu.version="19.2.4",Wu}var Ib;function qC(){if(Ib)return pg.exports;Ib=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),pg.exports=BC(),pg.exports}var FC=qC();const HC=()=>{};var Rb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},GC=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],f=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},ZS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,f=c?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let b=(f&15)<<2|g>>6,w=g&63;m||(w=64,c||(b=64)),r.push(t[_],t[E],t[b],t[w])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(WS(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):GC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const E=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||g==null||E==null)throw new KC;const b=l<<2|f>>4;if(r.push(b),g!==64){const w=f<<4&240|g>>2;if(r.push(w),E!==64){const k=g<<6&192|E;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class KC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YC=function(i){const e=WS(i);return ZS.encodeByteArray(e,!0)},eA=function(i){return YC(i).replace(/\./g,"")},tA=function(i){try{return ZS.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=()=>nA().__FIREBASE_DEFAULTS__,$C=()=>{if(typeof process>"u"||typeof Rb>"u")return;const i=Rb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},XC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&tA(i[1]);return e&&JSON.parse(e)},Bd=()=>{try{return HC()||QC()||$C()||XC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},JC=i=>{var e,t;return(t=(e=Bd())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},iA=()=>{var i;return(i=Bd())==null?void 0:i.config},rA=i=>{var e;return(e=Bd())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sA(i){return(await fetch(i,{credentials:"include"})).ok}const pc={};function ZC(){const i={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?i.emulator.push(e):i.prod.push(e);return i}function eD(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Cb=!1;function tD(i,e){if(typeof window>"u"||typeof document>"u"||!ql(window.location.host)||pc[i]===e||pc[i]||Cb)return;pc[i]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=ZC().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Cb=!0,c()},b}function _(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=eD(r),w=t("text"),k=document.getElementById(w)||document.createElement("span"),x=t("learnmore"),M=document.getElementById(x)||document.createElement("a"),U=t("preprendIcon"),G=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const q=b.element;f(q),_(M,x);const se=g();m(G,U),q.append(G,k,M,se),document.body.appendChild(q)}l?(k.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function aA(){var e;const i=(e=Bd())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rD(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function sD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aD(){const i=fn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function oA(){return!aA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lA(){return!aA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function uA(){try{return typeof indexedDB=="object"}catch{return!1}}function oD(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="FirebaseError";class is extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lD,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?uD(l,r):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new is(a,f,r)}}function uD(i,e){return i.replace(cD,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const cD=/\{\$([^}]+)}/g;function hD(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Xa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],c=e[a];if(Db(l)&&Db(c)){if(!Xa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Db(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fD(i,e){const t=new dD(i,e);return t.subscribe.bind(t)}class dD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=vg),a.error===void 0&&(a.error=vg),a.complete===void 0&&(a.complete=vg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mD(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function vg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(i){return i&&i._delegate?i._delegate:i}class Ja{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new WC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yD(e))try{this.getOrInitializeService({instanceIdentifier:Pa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pa){return this.instances.has(e)}getOptions(e=Pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pa){return this.component?this.component.multipleInstances?e:Pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gD(i){return i===Pa?void 0:i}function yD(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ze||(Ze={}));const vD={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},ED=Ze.INFO,TD={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},bD=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=TD[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Oy{constructor(e){this.name=e,this._logLevel=ED,this._logHandler=bD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const SD=(i,e)=>e.some(t=>i instanceof t);let xb,Nb;function AD(){return xb||(xb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wD(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cA=new WeakMap,Hg=new WeakMap,hA=new WeakMap,Eg=new WeakMap,Vy=new WeakMap;function ID(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(Ys(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&cA.set(t,i)}).catch(()=>{}),Vy.set(e,i),e}function RD(i){if(Hg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});Hg.set(i,e)}let Gg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Hg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||hA.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ys(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function CD(i){Gg=i(Gg)}function DD(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Tg(this),e,...t);return hA.set(r,e.sort?e.sort():[e]),Ys(r)}:wD().includes(i)?function(...e){return i.apply(Tg(this),e),Ys(cA.get(this))}:function(...e){return Ys(i.apply(Tg(this),e))}}function xD(i){return typeof i=="function"?DD(i):(i instanceof IDBTransaction&&RD(i),SD(i,AD())?new Proxy(i,Gg):i)}function Ys(i){if(i instanceof IDBRequest)return ID(i);if(Eg.has(i))return Eg.get(i);const e=xD(i);return e!==i&&(Eg.set(i,e),Vy.set(e,i)),e}const Tg=i=>Vy.get(i);function ND(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),f=Ys(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Ys(c.result),m.oldVersion,m.newVersion,Ys(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const MD=["get","getKey","getAll","getAllKeys","count"],OD=["put","add","delete","clear"],bg=new Map;function Mb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(bg.get(e))return bg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=OD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||MD.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return bg.set(e,l),l}CD(i=>({...i,get:(e,t,r)=>Mb(e,t)||i.get(e,t,r),has:(e,t)=>!!Mb(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function PD(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kg="@firebase/app",Ob="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Oy("@firebase/app"),kD="@firebase/app-compat",LD="@firebase/analytics-compat",UD="@firebase/analytics",jD="@firebase/app-check-compat",zD="@firebase/app-check",BD="@firebase/auth",qD="@firebase/auth-compat",FD="@firebase/database",HD="@firebase/data-connect",GD="@firebase/database-compat",KD="@firebase/functions",YD="@firebase/functions-compat",QD="@firebase/installations",$D="@firebase/installations-compat",XD="@firebase/messaging",JD="@firebase/messaging-compat",WD="@firebase/performance",ZD="@firebase/performance-compat",ex="@firebase/remote-config",tx="@firebase/remote-config-compat",nx="@firebase/storage",ix="@firebase/storage-compat",rx="@firebase/firestore",sx="@firebase/ai",ax="@firebase/firestore-compat",ox="firebase",lx="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="[DEFAULT]",ux={[Kg]:"fire-core",[kD]:"fire-core-compat",[UD]:"fire-analytics",[LD]:"fire-analytics-compat",[zD]:"fire-app-check",[jD]:"fire-app-check-compat",[BD]:"fire-auth",[qD]:"fire-auth-compat",[FD]:"fire-rtdb",[HD]:"fire-data-connect",[GD]:"fire-rtdb-compat",[KD]:"fire-fn",[YD]:"fire-fn-compat",[QD]:"fire-iid",[$D]:"fire-iid-compat",[XD]:"fire-fcm",[JD]:"fire-fcm-compat",[WD]:"fire-perf",[ZD]:"fire-perf-compat",[ex]:"fire-rc",[tx]:"fire-rc-compat",[nx]:"fire-gcs",[ix]:"fire-gcs-compat",[rx]:"fire-fst",[ax]:"fire-fst-compat",[sx]:"fire-vertex","fire-js":"fire-js",[ox]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=new Map,cx=new Map,Qg=new Map;function Vb(i,e){try{i.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function vl(i){const e=i.name;if(Qg.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;Qg.set(e,i);for(const t of ld.values())Vb(t,i);for(const t of cx.values())Vb(t,i);return!0}function Py(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ki(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new Qc("app","Firebase",hx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=lx;function fA(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Yg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Qs.create("bad-app-name",{appName:String(a)});if(t||(t=iA()),!t)throw Qs.create("no-options");const l=ld.get(a);if(l){if(Xa(t,l.options)&&Xa(r,l.config))return l;throw Qs.create("duplicate-app",{appName:a})}const c=new _D(a);for(const m of Qg.values())c.addComponent(m);const f=new fx(t,r,c);return ld.set(a,f),f}function dx(i=Yg){const e=ld.get(i);if(!e&&i===Yg&&iA())return fA();if(!e)throw Qs.create("no-app",{appName:i});return e}function $s(i,e,t){let r=ux[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(c.join(" "));return}vl(new Ja(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="firebase-heartbeat-database",px=1,xc="firebase-heartbeat-store";let Sg=null;function dA(){return Sg||(Sg=ND(mx,px,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(xc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Qs.create("idb-open",{originalErrorMessage:i.message})})),Sg}async function gx(i){try{const t=(await dA()).transaction(xc),r=await t.objectStore(xc).get(mA(i));return await t.done,r}catch(e){if(e instanceof is)Zr.warn(e.message);else{const t=Qs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(t.message)}}}async function Pb(i,e){try{const r=(await dA()).transaction(xc,"readwrite");await r.objectStore(xc).put(e,mA(i)),await r.done}catch(t){if(t instanceof is)Zr.warn(t.message);else{const r=Qs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Zr.warn(r.message)}}}function mA(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=1024,_x=30;class vx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=kb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>_x){const c=bx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=kb(),{heartbeatsToSend:r,unsentEntries:a}=Ex(this._heartbeatsCache.heartbeats),l=eA(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Zr.warn(t),""}}}function kb(){return new Date().toISOString().substring(0,10)}function Ex(i,e=yx){const t=[];let r=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Lb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Lb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Tx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uA()?oD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Pb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Pb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Lb(i){return eA(JSON.stringify({version:2,heartbeats:i})).length}function bx(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(i){vl(new Ja("platform-logger",e=>new VD(e),"PRIVATE")),vl(new Ja("heartbeat",e=>new vx(e),"PRIVATE")),$s(Kg,Ob,i),$s(Kg,Ob,"esm2020"),$s("fire-js","")}Sx("");var Ax="firebase",wx="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$s(Ax,wx,"app");function pA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ix=pA,gA=new Qc("auth","Firebase",pA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=new Oy("@firebase/auth");function Rx(i,...e){ud.logLevel<=Ze.WARN&&ud.warn(`Auth (${Fl}): ${i}`,...e)}function Gf(i,...e){ud.logLevel<=Ze.ERROR&&ud.error(`Auth (${Fl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(i,...e){throw Ly(i,...e)}function Qi(i,...e){return Ly(i,...e)}function ky(i,e,t){const r={...Ix(),[e]:t};return new Qc("auth","Firebase",r).create(e,{appName:i.name})}function Ha(i){return ky(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cx(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ir(i,"argument-error"),ky(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ly(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return gA.create(i,...e)}function Ve(i,e,...t){if(!i)throw Ly(e,...t)}function $r(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Gf(e),new Error(e)}function es(i,e){i||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function Dx(){return Ub()==="http:"||Ub()==="https:"}function Ub(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dx()||rD()||"connection"in navigator)?navigator.onLine:!0}function Nx(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t){this.shortDelay=e,this.longDelay=t,es(t>e,"Short delay should be less than long delay!"),this.isMobile=nD()||sD()}get(){return xx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(i,e){es(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vx=new Xc(3e4,6e4);function jy(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Hl(i,e,t,r,a={}){return _A(i,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const f=$c({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...l};return iD()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&ql(i.emulatorConfig.host)&&(g.credentials="include"),yA.fetch()(await vA(i,i.config.apiHost,t,f),g)})}async function _A(i,e,t){i._canInitEmulator=!1;const r={...Mx,...e};try{const a=new kx(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Vf(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vf(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Vf(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw Vf(i,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw ky(i,_,g);Ir(i,_)}}catch(a){if(a instanceof is)throw a;Ir(i,"network-request-failed",{message:String(a)})}}async function Px(i,e,t,r,a={}){const l=await Hl(i,e,t,r,a);return"mfaPendingCredential"in l&&Ir(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function vA(i,e,t,r){const a=`${e}${t}?${r}`,l=i,c=l.config.emulator?Uy(i.config,a):`${i.config.apiScheme}://${a}`;return Ox.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class kx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),Vx.get())})}}function Vf(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Qi(i,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(i,e){return Hl(i,"POST","/v1/accounts:delete",e)}async function cd(i,e){return Hl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ux(i,e=!1){const t=an(i),r=await t.getIdToken(e),a=zy(r);Ve(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:gc(Ag(a.auth_time)),issuedAtTime:gc(Ag(a.iat)),expirationTime:gc(Ag(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ag(i){return Number(i)*1e3}function zy(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Gf("JWT malformed, contained fewer than 3 sections"),null;try{const a=tA(t);return a?JSON.parse(a):(Gf("Failed to decode base64 JWT payload"),null)}catch(a){return Gf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function jb(i){const e=zy(i);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof is&&jx(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function jx({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(i){var E;const e=i.auth,t=await i.getIdToken(),r=await Nc(i,cd(e,{idToken:t}));Ve(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?EA(a.providerUserInfo):[],c=qx(i.providerData,l),f=i.isAnonymous,m=!(i.email&&a.passwordHash)&&!(c!=null&&c.length),g=f?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Xg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function Bx(i){const e=an(i);await hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qx(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function EA(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(i,e){const t=await _A(i,{},async()=>{const r=$c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await vA(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return i.emulatorConfig&&ql(i.emulatorConfig.host)&&(m.credentials="include"),yA.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Hx(i,e){return Hl(i,"POST","/v2/accounts:revokeToken",jy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=jb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await Fx(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new fl;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Ve(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ve(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fl,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(i,e){Ve(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Yi{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new zx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Xg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Nc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ux(this,e)}reload(){return Bx(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ki(this.auth.app))return Promise.reject(Ha(this.auth));const e=await this.getIdToken();return await Nc(this,Lx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:w,providerData:k,stsTokenManager:x}=t;Ve(E&&x,e,"internal-error");const M=fl.fromJSON(this.name,x);Ve(typeof E=="string",e,"internal-error"),Ls(r,e.name),Ls(a,e.name),Ve(typeof b=="boolean",e,"internal-error"),Ve(typeof w=="boolean",e,"internal-error"),Ls(l,e.name),Ls(c,e.name),Ls(f,e.name),Ls(m,e.name),Ls(g,e.name),Ls(_,e.name);const U=new Yi({uid:E,auth:e,email:a,emailVerified:b,displayName:r,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:M,createdAt:g,lastLoginAt:_});return k&&Array.isArray(k)&&(U.providerData=k.map(G=>({...G}))),m&&(U._redirectEventId=m),U}static async _fromIdTokenResponse(e,t,r=!1){const a=new fl;a.updateFromServerResponse(t);const l=new Yi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await hd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ve(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?EA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new fl;f.updateFromIdToken(r);const m=new Yi({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Xg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Map;function Xr(i){es(i instanceof Function,"Expected a class definition");let e=zb.get(i);return e?(es(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,zb.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}TA.type="NONE";const Bb=TA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(i,e,t){return`firebase:${i}:${e}:${t}`}class dl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Kf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Kf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cd(this.auth,{idToken:e}).catch(()=>{});return t?Yi._fromGetAccountInfoResponse(this.auth,t,e):null}return Yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new dl(Xr(Bb),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Xr(Bb);const c=Kf(r,e.config.apiKey,e.name);let f=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const b=await cd(e,{idToken:_}).catch(()=>{});if(!b)break;E=await Yi._fromGetAccountInfoResponse(e,b,_)}else E=Yi._fromJSON(e,_);g!==l&&(f=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new dl(l,e,r):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new dl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RA(e))return"Blackberry";if(CA(e))return"Webos";if(SA(e))return"Safari";if((e.includes("chrome/")||AA(e))&&!e.includes("edge/"))return"Chrome";if(IA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bA(i=fn()){return/firefox\//i.test(i)}function SA(i=fn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AA(i=fn()){return/crios\//i.test(i)}function wA(i=fn()){return/iemobile/i.test(i)}function IA(i=fn()){return/android/i.test(i)}function RA(i=fn()){return/blackberry/i.test(i)}function CA(i=fn()){return/webos/i.test(i)}function By(i=fn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Gx(i=fn()){var e;return By(i)&&!!((e=window.navigator)!=null&&e.standalone)}function Kx(){return aD()&&document.documentMode===10}function DA(i=fn()){return By(i)||IA(i)||CA(i)||RA(i)||/windows phone/i.test(i)||wA(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(i,e=[]){let t;switch(i){case"Browser":t=qb(fn());break;case"Worker":t=`${qb(fn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(i,e={}){return Hl(i,"GET","/v2/passwordPolicy",jy(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=6;class Xx{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$x,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fb(this),this.idTokenSubscription=new Fb(this),this.beforeStateQueue=new Yx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await dl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cd(this,{idToken:e}),r=await Yi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ki(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ki(this.app))return Promise.reject(Ha(this));const t=e?an(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ki(this.app)?Promise.reject(Ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ki(this.app)?Promise.reject(Ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qx(this),t=new Xx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Hx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await dl.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Ki(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Rx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function qd(i){return an(i)}class Fb{constructor(e){this.auth=e,this.observer=null,this.addObserver=fD(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wx(i){qy=i}function Zx(i){return qy.loadJS(i)}function eN(){return qy.gapiScript}function tN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(i,e){const t=Py(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Xa(l,e??{}))return a;Ir(a,"already-initialized")}return t.initialize({options:e})}function iN(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Xr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rN(i,e,t){const r=qd(i);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=NA(e),{host:c,port:f}=sN(e),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(Xa(g,r.config.emulator)&&Xa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,ql(c)?(sA(`${l}//${c}${m}`),tD("Auth",!0)):aN()}function NA(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function sN(i){const e=NA(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Hb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Hb(c)}}}function Hb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function aN(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,t){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(i,e){return Px(i,"POST","/v1/accounts:signInWithIdp",jy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="http://localhost";class Wa extends MA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Wa(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ml(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ml(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ml(e,t)}buildRequest(){const e={requestUri:oN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$c(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends Fy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Jc{constructor(){super("facebook.com")}static credential(e){return Wa._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wa._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Qr.credential(t,r)}catch{return null}}}Qr.GOOGLE_SIGN_IN_METHOD="google.com";Qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Jc{constructor(){super("github.com")}static credential(e){return Wa._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Jc{constructor(){super("twitter.com")}static credential(e,t){return Wa._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hs.credential(t,r)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Yi._fromIdTokenResponse(e,r,a),c=Gb(r);return new El({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=Gb(r);return new El({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function Gb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends is{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,fd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new fd(e,t,r,a)}}function OA(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?fd._fromErrorAndOperation(i,l,e,r):l})}async function lN(i,e,t=!1){const r=await Nc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return El._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(i,e,t=!1){const{auth:r}=i;if(Ki(r.app))return Promise.reject(Ha(r));const a="reauthenticate";try{const l=await Nc(i,OA(r,a,e,i),t);Ve(l.idToken,r,"internal-error");const c=zy(l.idToken);Ve(c,r,"internal-error");const{sub:f}=c;return Ve(i.uid===f,r,"user-mismatch"),El._forOperation(i,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ir(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(i,e,t=!1){if(Ki(i.app))return Promise.reject(Ha(i));const r="signIn",a=await OA(i,r,e),l=await El._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}function hN(i,e,t,r){return an(i).onIdTokenChanged(e,t,r)}function fN(i,e,t){return an(i).beforeAuthStateChanged(e,t)}function dN(i,e,t,r){return an(i).onAuthStateChanged(e,t,r)}function mN(i){return an(i).signOut()}const dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dd,"1"),this.storage.removeItem(dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=1e3,gN=10;class PA extends VA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Kx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,gN):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},pN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}PA.type="LOCAL";const yN=PA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends VA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kA.type="SESSION";const LA=kA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Fd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(c).map(async g=>g(t.origin,l)),m=await _N(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=Hy("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function EN(i){Ar().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function TN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bN(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function SN(){return UA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebaseLocalStorageDb",AN=1,md="firebaseLocalStorage",zA="fbase_key";class Wc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hd(i,e){return i.transaction([md],e?"readwrite":"readonly").objectStore(md)}function wN(){const i=indexedDB.deleteDatabase(jA);return new Wc(i).toPromise()}function Jg(){const i=indexedDB.open(jA,AN);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(md,{keyPath:zA})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(md)?e(r):(r.close(),await wN(),e(await Jg()))})})}async function Kb(i,e,t){const r=Hd(i,!0).put({[zA]:e,value:t});return new Wc(r).toPromise()}async function IN(i,e){const t=Hd(i,!1).get(e),r=await new Wc(t).toPromise();return r===void 0?null:r.value}function Yb(i,e){const t=Hd(i,!0).delete(e);return new Wc(t).toPromise()}const RN=800,CN=3;class BA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>CN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(SN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await TN(),!this.activeServiceWorker)return;this.sender=new vN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jg();return await Kb(e,dd,"1"),await Yb(e,dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>IN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Yb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Hd(a,!1).getAll();return new Wc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BA.type="LOCAL";const DN=BA;new Xc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(i,e){return e?Xr(e):(Ve(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends MA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ml(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ml(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xN(i){return cN(i.auth,new Gy(i),i.bypassAuthState)}function NN(i){const{auth:e,user:t}=i;return Ve(t,e,"internal-error"),uN(t,new Gy(i),i.bypassAuthState)}async function MN(i){const{auth:e,user:t}=i;return Ve(t,e,"internal-error"),lN(t,new Gy(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xN;case"linkViaPopup":case"linkViaRedirect":return MN;case"reauthViaPopup":case"reauthViaRedirect":return NN;default:Ir(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=new Xc(2e3,1e4);async function VN(i,e,t){if(Ki(i.app))return Promise.reject(Qi(i,"operation-not-supported-in-this-environment"));const r=qd(i);Cx(i,e,Fy);const a=qA(r,t);return new qa(r,"signInViaPopup",e,a).executeNotNull()}class qa extends FA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=Hy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ON.get())};e()}}qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="pendingRedirect",Yf=new Map;class kN extends FA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yf.get(this.auth._key());if(!e){try{const r=await LN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yf.set(this.auth._key(),e)}return this.bypassAuthState||Yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LN(i,e){const t=zN(e),r=jN(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function UN(i,e){Yf.set(i._key(),e)}function jN(i){return Xr(i._redirectPersistence)}function zN(i){return Kf(PN,i.config.apiKey,i.name)}async function BN(i,e,t=!1){if(Ki(i.app))return Promise.reject(Ha(i));const r=qd(i),a=qA(r,e),c=await new kN(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=600*1e3;class FN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!HA(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qb(e))}saveEventToCache(e){this.cachedEventUids.add(Qb(e)),this.lastProcessedEventTime=Date.now()}}function Qb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function HA({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HA(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(i,e={}){return Hl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YN=/^https?/;async function QN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await GN(i);for(const t of e)try{if($N(t))return}catch{}Ir(i,"unauthorized-domain")}function $N(i){const e=$g(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!YN.test(t))return!1;if(KN.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Xc(3e4,6e4);function $b(){const i=Ar().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function JN(i){return new Promise((e,t)=>{var a,l,c;function r(){$b(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$b(),t(Qi(i,"network-request-failed"))},timeout:XN.get()})}if((l=(a=Ar().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Ar().gapi)!=null&&c.load)r();else{const f=tN("iframefcb");return Ar()[f]=()=>{gapi.load?r():t(Qi(i,"network-request-failed"))},Zx(`${eN()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Qf=null,e})}let Qf=null;function WN(i){return Qf=Qf||JN(i),Qf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new Xc(5e3,15e3),e2="__/auth/iframe",t2="emulator/auth/iframe",n2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r2(i){const e=i.config;Ve(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Uy(e,t2):`https://${i.config.authDomain}/${e2}`,r={apiKey:e.apiKey,appName:i.name,v:Fl},a=i2.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${$c(r).slice(1)}`}async function s2(i){const e=await WN(i),t=Ar().gapi;return Ve(t,i,"internal-error"),e.open({where:document.body,url:r2(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n2,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Qi(i,"network-request-failed"),f=Ar().setTimeout(()=>{l(c)},ZN.get());function m(){Ar().clearTimeout(f),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o2=500,l2=600,u2="_blank",c2="http://localhost";class Xb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h2(i,e,t,r=o2,a=l2){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m={...a2,width:r.toString(),height:a.toString(),top:l,left:c},g=fn().toLowerCase();t&&(f=AA(g)?u2:t),bA(g)&&(e=e||c2,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[w,k])=>`${b}${w}=${k},`,"");if(Gx(g)&&f!=="_self")return f2(e||"",f),new Xb(null);const E=window.open(e||"",f,_);Ve(E,i,"popup-blocked");try{E.focus()}catch{}return new Xb(E)}function f2(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="__/auth/handler",m2="emulator/auth/handler",p2=encodeURIComponent("fac");async function Jb(i,e,t,r,a,l){Ve(i.config.authDomain,i,"auth-domain-config-required"),Ve(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Fl,eventId:a};if(e instanceof Fy){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",hD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Jc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}i.tenantId&&(c.tid=i.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await i._getAppCheckToken(),g=m?`#${p2}=${encodeURIComponent(m)}`:"";return`${g2(i)}?${$c(f).slice(1)}${g}`}function g2({config:i}){return i.emulator?Uy(i,m2):`https://${i.authDomain}/${d2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="webStorageSupport";class y2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LA,this._completeRedirectFn=BN,this._overrideRedirectResult=UN}async _openPopup(e,t,r,a){var c;es((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Jb(e,t,r,$g(),a);return h2(e,l,Hy())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Jb(e,t,r,$g(),a);return EN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(es(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await s2(e),r=new FN(e);return t.register("authEvent",a=>(Ve(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wg,{type:wg},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[wg];l!==void 0&&t(!!l),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DA()||SA()||By()}}const _2=y2;var Wb="@firebase/auth",Zb="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T2(i){vl(new Ja("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;Ve(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xA(i)},g=new Jx(r,a,l,m);return iN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vl(new Ja("auth-internal",e=>{const t=qd(e.getProvider("auth").getImmediate());return(r=>new v2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$s(Wb,Zb,E2(i)),$s(Wb,Zb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=300,S2=rA("authIdTokenMaxAge")||b2;let e0=null;const A2=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>S2)return;const a=t==null?void 0:t.token;e0!==a&&(e0=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function w2(i=dx()){const e=Py(i,"auth");if(e.isInitialized())return e.getImmediate();const t=nN(i,{popupRedirectResolver:_2,persistence:[DN,yN,LA]}),r=rA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=A2(l.toString());fN(t,c,()=>c(t.currentUser)),hN(t,f=>c(f))}}const a=JC("auth");return a&&rN(t,`http://${a}`),t}function I2(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}Wx({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=Qi("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",I2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T2("Browser");var t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,GA;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function N(){}N.prototype=S.prototype,C.F=S.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(V,O,j){for(var P=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)P[Ae-2]=arguments[Ae];return S.prototype[O].apply(V,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,S,N){N||(N=0);const V=Array(16);if(typeof S=="string")for(var O=0;O<16;++O)V[O]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(O=0;O<16;++O)V[O]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=C.g[0],N=C.g[1],O=C.g[2];let j=C.g[3],P;P=S+(j^N&(O^j))+V[0]+3614090360&4294967295,S=N+(P<<7&4294967295|P>>>25),P=j+(O^S&(N^O))+V[1]+3905402710&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(N^j&(S^N))+V[2]+606105819&4294967295,O=j+(P<<17&4294967295|P>>>15),P=N+(S^O&(j^S))+V[3]+3250441966&4294967295,N=O+(P<<22&4294967295|P>>>10),P=S+(j^N&(O^j))+V[4]+4118548399&4294967295,S=N+(P<<7&4294967295|P>>>25),P=j+(O^S&(N^O))+V[5]+1200080426&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(N^j&(S^N))+V[6]+2821735955&4294967295,O=j+(P<<17&4294967295|P>>>15),P=N+(S^O&(j^S))+V[7]+4249261313&4294967295,N=O+(P<<22&4294967295|P>>>10),P=S+(j^N&(O^j))+V[8]+1770035416&4294967295,S=N+(P<<7&4294967295|P>>>25),P=j+(O^S&(N^O))+V[9]+2336552879&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(N^j&(S^N))+V[10]+4294925233&4294967295,O=j+(P<<17&4294967295|P>>>15),P=N+(S^O&(j^S))+V[11]+2304563134&4294967295,N=O+(P<<22&4294967295|P>>>10),P=S+(j^N&(O^j))+V[12]+1804603682&4294967295,S=N+(P<<7&4294967295|P>>>25),P=j+(O^S&(N^O))+V[13]+4254626195&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(N^j&(S^N))+V[14]+2792965006&4294967295,O=j+(P<<17&4294967295|P>>>15),P=N+(S^O&(j^S))+V[15]+1236535329&4294967295,N=O+(P<<22&4294967295|P>>>10),P=S+(O^j&(N^O))+V[1]+4129170786&4294967295,S=N+(P<<5&4294967295|P>>>27),P=j+(N^O&(S^N))+V[6]+3225465664&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^N&(j^S))+V[11]+643717713&4294967295,O=j+(P<<14&4294967295|P>>>18),P=N+(j^S&(O^j))+V[0]+3921069994&4294967295,N=O+(P<<20&4294967295|P>>>12),P=S+(O^j&(N^O))+V[5]+3593408605&4294967295,S=N+(P<<5&4294967295|P>>>27),P=j+(N^O&(S^N))+V[10]+38016083&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^N&(j^S))+V[15]+3634488961&4294967295,O=j+(P<<14&4294967295|P>>>18),P=N+(j^S&(O^j))+V[4]+3889429448&4294967295,N=O+(P<<20&4294967295|P>>>12),P=S+(O^j&(N^O))+V[9]+568446438&4294967295,S=N+(P<<5&4294967295|P>>>27),P=j+(N^O&(S^N))+V[14]+3275163606&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^N&(j^S))+V[3]+4107603335&4294967295,O=j+(P<<14&4294967295|P>>>18),P=N+(j^S&(O^j))+V[8]+1163531501&4294967295,N=O+(P<<20&4294967295|P>>>12),P=S+(O^j&(N^O))+V[13]+2850285829&4294967295,S=N+(P<<5&4294967295|P>>>27),P=j+(N^O&(S^N))+V[2]+4243563512&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^N&(j^S))+V[7]+1735328473&4294967295,O=j+(P<<14&4294967295|P>>>18),P=N+(j^S&(O^j))+V[12]+2368359562&4294967295,N=O+(P<<20&4294967295|P>>>12),P=S+(N^O^j)+V[5]+4294588738&4294967295,S=N+(P<<4&4294967295|P>>>28),P=j+(S^N^O)+V[8]+2272392833&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^N)+V[11]+1839030562&4294967295,O=j+(P<<16&4294967295|P>>>16),P=N+(O^j^S)+V[14]+4259657740&4294967295,N=O+(P<<23&4294967295|P>>>9),P=S+(N^O^j)+V[1]+2763975236&4294967295,S=N+(P<<4&4294967295|P>>>28),P=j+(S^N^O)+V[4]+1272893353&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^N)+V[7]+4139469664&4294967295,O=j+(P<<16&4294967295|P>>>16),P=N+(O^j^S)+V[10]+3200236656&4294967295,N=O+(P<<23&4294967295|P>>>9),P=S+(N^O^j)+V[13]+681279174&4294967295,S=N+(P<<4&4294967295|P>>>28),P=j+(S^N^O)+V[0]+3936430074&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^N)+V[3]+3572445317&4294967295,O=j+(P<<16&4294967295|P>>>16),P=N+(O^j^S)+V[6]+76029189&4294967295,N=O+(P<<23&4294967295|P>>>9),P=S+(N^O^j)+V[9]+3654602809&4294967295,S=N+(P<<4&4294967295|P>>>28),P=j+(S^N^O)+V[12]+3873151461&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^N)+V[15]+530742520&4294967295,O=j+(P<<16&4294967295|P>>>16),P=N+(O^j^S)+V[2]+3299628645&4294967295,N=O+(P<<23&4294967295|P>>>9),P=S+(O^(N|~j))+V[0]+4096336452&4294967295,S=N+(P<<6&4294967295|P>>>26),P=j+(N^(S|~O))+V[7]+1126891415&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~N))+V[14]+2878612391&4294967295,O=j+(P<<15&4294967295|P>>>17),P=N+(j^(O|~S))+V[5]+4237533241&4294967295,N=O+(P<<21&4294967295|P>>>11),P=S+(O^(N|~j))+V[12]+1700485571&4294967295,S=N+(P<<6&4294967295|P>>>26),P=j+(N^(S|~O))+V[3]+2399980690&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~N))+V[10]+4293915773&4294967295,O=j+(P<<15&4294967295|P>>>17),P=N+(j^(O|~S))+V[1]+2240044497&4294967295,N=O+(P<<21&4294967295|P>>>11),P=S+(O^(N|~j))+V[8]+1873313359&4294967295,S=N+(P<<6&4294967295|P>>>26),P=j+(N^(S|~O))+V[15]+4264355552&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~N))+V[6]+2734768916&4294967295,O=j+(P<<15&4294967295|P>>>17),P=N+(j^(O|~S))+V[13]+1309151649&4294967295,N=O+(P<<21&4294967295|P>>>11),P=S+(O^(N|~j))+V[4]+4149444226&4294967295,S=N+(P<<6&4294967295|P>>>26),P=j+(N^(S|~O))+V[11]+3174756917&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~N))+V[2]+718787259&4294967295,O=j+(P<<15&4294967295|P>>>17),P=N+(j^(O|~S))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.v=function(C,S){S===void 0&&(S=C.length);const N=S-this.blockSize,V=this.C;let O=this.h,j=0;for(;j<S;){if(O==0)for(;j<=N;)a(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<S;)if(V[O++]=C.charCodeAt(j++),O==this.blockSize){a(this,V),O=0;break}}else for(;j<S;)if(V[O++]=C[j++],O==this.blockSize){a(this,V),O=0;break}}this.h=O,this.o+=S},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)C[S++]=this.g[N]>>>V&255;return C};function l(C,S){var N=f;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=S(C)}function c(C,S){this.h=S;const N=[];let V=!0;for(let O=C.length-1;O>=0;O--){const j=C[O]|0;V&&j==S||(N[O]=j,V=!1)}this.g=N}var f={};function m(C){return-128<=C&&C<128?l(C,function(S){return new c([S|0],S<0?-1:0)}):new c([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return M(g(-C));const S=[];let N=1;for(let V=0;C>=N;V++)S[V]=C/N|0,N*=4294967296;return new c(S,0)}function _(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return M(_(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(S,8));let V=E;for(let j=0;j<C.length;j+=8){var O=Math.min(8,C.length-j);const P=parseInt(C.substring(j,j+O),S);O<8?(O=g(Math.pow(S,O)),V=V.j(O).add(g(P))):(V=V.j(N),V=V.add(g(P)))}return V}var E=m(0),b=m(1),w=m(16777216);i=c.prototype,i.m=function(){if(x(this))return-M(this).m();let C=0,S=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);C+=(V>=0?V:4294967296+V)*S,S*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(k(this))return"0";if(x(this))return"-"+M(this).toString(C);const S=g(Math.pow(C,6));var N=this;let V="";for(;;){const O=se(N,S).g;N=U(N,O.j(S));let j=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=O,k(N))return j+V;for(;j.length<6;)j="0"+j;V=j+V}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function k(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function x(C){return C.h==-1}i.l=function(C){return C=U(this,C),x(C)?-1:k(C)?0:1};function M(C){const S=C.g.length,N=[];for(let V=0;V<S;V++)N[V]=~C.g[V];return new c(N,~C.h).add(b)}i.abs=function(){return x(this)?M(this):this},i.add=function(C){const S=Math.max(this.g.length,C.g.length),N=[];let V=0;for(let O=0;O<=S;O++){let j=V+(this.i(O)&65535)+(C.i(O)&65535),P=(j>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);V=P>>>16,j&=65535,P&=65535,N[O]=P<<16|j}return new c(N,N[N.length-1]&-2147483648?-1:0)};function U(C,S){return C.add(M(S))}i.j=function(C){if(k(this)||k(C))return E;if(x(this))return x(C)?M(this).j(M(C)):M(M(this).j(C));if(x(C))return M(this.j(M(C)));if(this.l(w)<0&&C.l(w)<0)return g(this.m()*C.m());const S=this.g.length+C.g.length,N=[];for(var V=0;V<2*S;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let O=0;O<C.g.length;O++){const j=this.i(V)>>>16,P=this.i(V)&65535,Ae=C.i(O)>>>16,Me=C.i(O)&65535;N[2*V+2*O]+=P*Me,G(N,2*V+2*O),N[2*V+2*O+1]+=j*Me,G(N,2*V+2*O+1),N[2*V+2*O+1]+=P*Ae,G(N,2*V+2*O+1),N[2*V+2*O+2]+=j*Ae,G(N,2*V+2*O+2)}for(C=0;C<S;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=S;C<2*S;C++)N[C]=0;return new c(N,0)};function G(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function q(C,S){this.g=C,this.h=S}function se(C,S){if(k(S))throw Error("division by zero");if(k(C))return new q(E,E);if(x(C))return S=se(M(C),S),new q(M(S.g),M(S.h));if(x(S))return S=se(C,M(S)),new q(M(S.g),S.h);if(C.g.length>30){if(x(C)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var N=b,V=S;V.l(C)<=0;)N=ae(N),V=ae(V);var O=Z(N,1),j=Z(V,1);for(V=Z(V,2),N=Z(N,2);!k(V);){var P=j.add(V);P.l(C)<=0&&(O=O.add(N),j=P),V=Z(V,1),N=Z(N,1)}return S=U(C,O.j(S)),new q(O,S)}for(O=E;C.l(S)>=0;){for(N=Math.max(1,Math.floor(C.m()/S.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),j=g(N),P=j.j(S);x(P)||P.l(C)>0;)N-=V,j=g(N),P=j.j(S);k(j)&&(j=b),O=O.add(j),C=U(C,P)}return new q(O,C)}i.B=function(C){return se(this,C).h},i.and=function(C){const S=Math.max(this.g.length,C.g.length),N=[];for(let V=0;V<S;V++)N[V]=this.i(V)&C.i(V);return new c(N,this.h&C.h)},i.or=function(C){const S=Math.max(this.g.length,C.g.length),N=[];for(let V=0;V<S;V++)N[V]=this.i(V)|C.i(V);return new c(N,this.h|C.h)},i.xor=function(C){const S=Math.max(this.g.length,C.g.length),N=[];for(let V=0;V<S;V++)N[V]=this.i(V)^C.i(V);return new c(N,this.h^C.h)};function ae(C){const S=C.g.length+1,N=[];for(let V=0;V<S;V++)N[V]=C.i(V)<<1|C.i(V-1)>>>31;return new c(N,C.h)}function Z(C,S){const N=S>>5;S%=32;const V=C.g.length-N,O=[];for(let j=0;j<V;j++)O[j]=S>0?C.i(j+N)>>>S|C.i(j+N+1)<<32-S:C.i(j+N);return new c(O,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,GA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,Xs=c}).apply(typeof t0<"u"?t0:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KA,lc,YA,$f,Wg,QA,$A,XA;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var T=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var K=h[R];if(!(K in T))break e;T=T[K]}h=h[h.length-1],R=T[h],y=y(R),y!=R&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&T.push([R,y[R]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=m,g.apply(null,arguments)}function _(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var R=T.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(R,K,ee){for(var de=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)de[Fe-2]=arguments[Fe];return y.prototype[K].apply(R,de)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const y=h.length;if(y>0){const T=Array(y);for(let R=0;R<y;R++)T[R]=h[R];return T}return[]}function k(h,y){for(let R=1;R<arguments.length;R++){const K=arguments[R];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=h.length||0;const ee=K.length||0;h.length=T+ee;for(let de=0;de<ee;de++)h[T+de]=K[de]}else h.push(K)}}class x{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function M(h){c.setTimeout(()=>{throw h},0)}function U(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class G{constructor(){this.h=this.g=null}add(y,T){const R=q.get();R.set(y,T),this.h?this.h.next=R:this.g=R,this.h=R}}var q=new x(()=>new se,h=>h.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,Z=!1,C=new G,S=()=>{const h=Promise.resolve(void 0);ae=()=>{h.then(N)}};function N(){for(var h;h=U();){try{h.h.call(h.g)}catch(T){M(T)}var y=q;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Z=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function P(h){return/^[\s\xa0]*$/.test(h)}function Ae(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Ae,O),Ae.prototype.init=function(h,y){const T=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),X=0;function ue(h,y,T,R,K){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!R,this.ha=K,this.key=++X,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h,y,T){for(const R in h)y.call(T,h[R],R,h)}function Be(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function z(h){const y={};for(const T in h)y[T]=h[T];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(h,y){let T,R;for(let K=1;K<arguments.length;K++){R=arguments[K];for(T in R)h[T]=R[T];for(let ee=0;ee<ne.length;ee++)T=ne[ee],Object.prototype.hasOwnProperty.call(R,T)&&(h[T]=R[T])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,y,T,R,K){const ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);const de=ye(h,y,R,K);return de>-1?(y=h[de],T||(y.fa=!1)):(y=new ue(y,this.src,ee,!!R,K),y.fa=T,h.push(y)),y};function ge(h,y){const T=y.type;if(T in h.g){var R=h.g[T],K=Array.prototype.indexOf.call(R,y,void 0),ee;(ee=K>=0)&&Array.prototype.splice.call(R,K,1),ee&&(_e(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ye(h,y,T,R){for(let K=0;K<h.length;++K){const ee=h[K];if(!ee.da&&ee.listener==y&&ee.capture==!!T&&ee.ha==R)return K}return-1}var xe="closure_lm_"+(Math.random()*1e6|0),Ge={};function Pe(h,y,T,R,K){if(Array.isArray(y)){for(let ee=0;ee<y.length;ee++)Pe(h,y[ee],T,R,K);return null}return T=Oe(T),h&&h[Me]?h.J(y,T,f(R)?!!R.capture:!1,K):je(h,y,T,!1,R,K)}function je(h,y,T,R,K,ee){if(!y)throw Error("Invalid event type");const de=f(K)?!!K.capture:!!K;let Fe=Te(h);if(Fe||(h[xe]=Fe=new he(h)),T=Fe.add(y,T,R,de,ee),T.proxy)return T;if(R=Mt(),T.proxy=R,R.src=h,R.listener=T,h.addEventListener)j||(K=de),K===void 0&&(K=!1),h.addEventListener(y.toString(),R,K);else if(h.attachEvent)h.attachEvent(J(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Mt(){function h(T){return y.call(h.src,h.listener,T)}const y=pe;return h}function vt(h,y,T,R,K){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)vt(h,y[ee],T,R,K);else R=f(R)?!!R.capture:!!R,T=Oe(T),h&&h[Me]?(h=h.i,ee=String(y).toString(),ee in h.g&&(y=h.g[ee],T=ye(y,T,R,K),T>-1&&(_e(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[ee],h.h--)))):h&&(h=Te(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ye(y,T,R,K)),(T=h>-1?y[h]:null)&&Pt(T))}function Pt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Me])ge(y.i,h);else{var T=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(T,R,h.capture):y.detachEvent?y.detachEvent(J(T),R):y.addListener&&y.removeListener&&y.removeListener(R),(T=Te(y))?(ge(T,h),T.h==0&&(T.src=null,y[xe]=null)):_e(h)}}}function J(h){return h in Ge?Ge[h]:Ge[h]="on"+h}function pe(h,y){if(h.da)h=!0;else{y=new Ae(y,this);const T=h.listener,R=h.ha||h.src;h.fa&&Pt(h),h=T.call(R,y)}return h}function Te(h){return h=h[xe],h instanceof he?h:null}var ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oe(h){return typeof h=="function"?h:(h[ke]||(h[ke]=function(y){return h.handleEvent(y)}),h[ke])}function Ie(){V.call(this),this.i=new he(this),this.M=this,this.G=null}E(Ie,V),Ie.prototype[Me]=!0,Ie.prototype.removeEventListener=function(h,y,T,R){vt(this,h,y,T,R)};function Ue(h,y){var T,R=h.G;if(R)for(T=[];R;R=R.G)T.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var K=y;y=new O(R,h),Q(y,K)}K=!0;let ee,de;if(T)for(de=T.length-1;de>=0;de--)ee=y.g=T[de],K=jt(ee,R,!0,y)&&K;if(ee=y.g=h,K=jt(ee,R,!0,y)&&K,K=jt(ee,R,!1,y)&&K,T)for(de=0;de<T.length;de++)ee=y.g=T[de],K=jt(ee,R,!1,y)&&K}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let R=0;R<T.length;R++)_e(T[R]);delete h.g[y],h.h--}}this.G=null},Ie.prototype.J=function(h,y,T,R){return this.i.add(String(h),y,!1,T,R)},Ie.prototype.K=function(h,y,T,R){return this.i.add(String(h),y,!0,T,R)};function jt(h,y,T,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let K=!0;for(let ee=0;ee<y.length;++ee){const de=y[ee];if(de&&!de.da&&de.capture==T){const Fe=de.listener,qt=de.ha||de.src;de.fa&&ge(h.i,de),K=Fe.call(qt,R)!==!1&&K}}return K&&!R.defaultPrevented}function Wi(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Zi(h){h.g=Wi(()=>{h.g=null,h.i&&(h.i=!1,Zi(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Qt extends V{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Zi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(h){V.call(this),this.h=h,this.g={}}E(ki,V);var vi=[];function Tn(h){De(h.g,function(y,T){this.g.hasOwnProperty(T)&&Pt(y)},h),h.g={}}ki.prototype.N=function(){ki.Z.N.call(this),Tn(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=c.JSON.stringify,qe=c.JSON.parse,Tt=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function on(){}function ua(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ln(){O.call(this,"d")}E(ln,O);function xn(){O.call(this,"c")}E(xn,O);var wt={},uo=null;function Cr(){return uo=uo||new Ie}wt.Ia="serverreachability";function co(h){O.call(this,wt.Ia,h)}E(co,O);function Ei(h){const y=Cr();Ue(y,new co(y))}wt.STAT_EVENT="statevent";function Dr(h,y){O.call(this,wt.STAT_EVENT,h),this.stat=y}E(Dr,O);function Qe(h){const y=Cr();Ue(y,new Dr(y,h))}wt.Ja="timingevent";function It(h,y){O.call(this,wt.Ja,h),this.size=y}E(It,O);function Rt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function $t(){this.g=!0}$t.prototype.ua=function(){this.g=!1};function Nn(h,y,T,R,K,ee){h.info(function(){if(h.g)if(ee){var de="",Fe=ee.split("&");for(let st=0;st<Fe.length;st++){var qt=Fe[st].split("=");if(qt.length>1){const Ct=qt[0];qt=qt[1];const Ai=Ct.split("_");de=Ai.length>=2&&Ai[1]=="type"?de+(Ct+"="+qt+"&"):de+(Ct+"=redacted&")}}}else de=null;else de=ee;return"XMLHTTP REQ ("+R+") [attempt "+K+"]: "+y+`
`+T+`
`+de})}function mn(h,y,T,R,K,ee,de){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+K+"]: "+y+`
`+T+`
`+ee+" "+de})}function zt(h,y,T,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Bt(h,T)+(R?" "+R:"")})}function Yn(h,y){h.info(function(){return"TIMEOUT: "+y})}$t.prototype.info=function(){};function Bt(h,y){if(!h.g)return y;if(!y)return null;try{const ee=JSON.parse(y);if(ee){for(h=0;h<ee.length;h++)if(Array.isArray(ee[h])){var T=ee[h];if(!(T.length<2)){var R=T[1];if(Array.isArray(R)&&!(R.length<1)){var K=R[0];if(K!="noop"&&K!="stop"&&K!="close")for(let de=1;de<R.length;de++)R[de]=""}}}}return bn(ee)}catch{return y}}var Mn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},On={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zn;function ri(){}E(ri,on),ri.prototype.g=function(){return new XMLHttpRequest},zn=new ri;function Bn(h){return encodeURIComponent(String(h))}function si(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Sn(h,y,T,R){this.j=h,this.i=y,this.l=T,this.S=R||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var Xt={},pn={};function er(h,y,T){h.M=1,h.A=ca(Wt(y)),h.u=T,h.R=!0,ho(h,null)}function ho(h,y){h.F=Date.now(),tr(h),h.B=Wt(h.A);var T=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),go(T.i,"t",R),h.C=0,T=h.j.L,h.h=new qn,h.g=Ih(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Qt(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,R=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(vi[0]=K.toString()),K=vi);for(let ee=0;ee<K.length;ee++){const de=Pe(T,K[ee],R||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=h.J?z(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ei(),Nn(h.i,h.v,h.B,h.l,h.S,h.u)}Sn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ji(h)==3?y.j():this.Y(h)},Sn.prototype.Y=function(h){try{if(h==this.g)e:{const Fe=ji(this.g),qt=this.g.ya(),st=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||Fe!=4||qt==7||(qt==8||st<=0?Ei(3):Ei(2)),nr(this);var y=this.g.ca();this.X=y;var T=vm(this);if(this.o=y==200,mn(this.i,this.v,this.B,this.l,this.S,Fe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,K=this.g;if((R=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(R)){var ee=R;break t}}ee=null}if(h=ee)zt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ir(this,h);else{this.o=!1,this.m=3,Qe(12),ai(this),Ti(this);break e}}if(this.R){h=!0;let Ct;for(;!this.K&&this.C<T.length;)if(Ct=dh(this,T),Ct==pn){Fe==4&&(this.m=4,Qe(14),h=!1),zt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==Xt){this.m=4,Qe(15),zt(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else zt(this.i,this.l,Ct,null),ir(this,Ct);if(fh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||T.length!=0||this.h.h||(this.m=1,Qe(16),h=!1),this.o=this.o&&h,!h)zt(this.i,this.l,T,"[Invalid Chunked Response]"),ai(this),Ti(this);else if(T.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),mu(de),de.P=!0,Qe(11))}}else zt(this.i,this.l,T,null),ir(this,T);Fe==4&&ai(this),this.o&&!this.K&&(Fe==4?bh(this.j,this):(this.o=!1,tr(this)))}else Nr(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Qe(12)):(this.m=0,Qe(13)),ai(this),Ti(this)}}}catch{}finally{}};function vm(h){if(!fh(h))return h.g.la();const y=An(h.g);if(y==="")return"";let T="";const R=y.length,K=ji(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ai(h),Ti(h),"";h.h.i=new c.TextDecoder}for(let ee=0;ee<R;ee++)h.h.h=!0,T+=h.h.i.decode(y[ee],{stream:!(K&&ee==R-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function fh(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function dh(h,y){var T=h.C,R=y.indexOf(`
`,T);return R==-1?pn:(T=Number(y.substring(T,R)),isNaN(T)?Xt:(R+=1,R+T>y.length?pn:(y=y.slice(R,R+T),h.C=R+T,y)))}Sn.prototype.cancel=function(){this.K=!0,ai(this)};function tr(h){h.T=Date.now()+h.H,fo(h,h.H)}function fo(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Rt(g(h.aa,h),y)}function nr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Sn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Yn(this.i,this.B),this.M!=2&&(Ei(),Qe(17)),ai(this),this.m=2,Ti(this)):fo(this,this.T-h)};function Ti(h){h.j.I==0||h.K||bh(h.j,h)}function ai(h){nr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Tn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ir(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||sr(T.h,h))){if(!h.L&&sr(T.h,h)&&T.I==3){try{var R=T.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var K=R;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)To(T),ds(T);else break e;ya(T),Qe(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Rt(g(T.Va,T),6e3));rr(T.h)<=1&&T.ta&&(T.ta=void 0)}else hr(T,11)}else if((h.L||T.g==h)&&To(T),!P(y))for(K=T.Ba.g.parse(y),y=0;y<K.length;y++){let st=K[y];const Ct=st[0];if(!(Ct<=T.K))if(T.K=Ct,st=st[1],T.I==2)if(st[0]=="c"){T.M=st[1],T.ba=st[2];const Ai=st[3];Ai!=null&&(T.ka=Ai,T.j.info("VER="+T.ka));const fr=st[4];fr!=null&&(T.za=fr,T.j.info("SVER="+T.za));const zi=st[5];zi!=null&&typeof zi=="number"&&zi>0&&(R=1.5*zi,T.O=R,T.j.info("backChannelRequestTimeoutMs_="+R)),R=T;const Bi=h.g;if(Bi){const _a=Bi.g?Bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var ee=R.h;ee.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(nu(ee,ee.h),ee.h=null))}if(R.G){const bo=Bi.g?Bi.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(R.wa=bo,ut(R.J,R.G,bo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),R=T;var de=h;if(R.na=wh(R,R.L?R.ba:null,R.W),de.L){iu(R.h,de);var Fe=de,qt=R.O;qt&&(Fe.H=qt),Fe.D&&(nr(Fe),tr(Fe)),R.g=de}else Eh(R);T.i.length>0&&cr(T)}else st[0]!="stop"&&st[0]!="close"||hr(T,7);else T.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?hr(T,7):fu(T):st[0]!="noop"&&T.l&&T.l.qa(st),T.A=0)}}Ei(4)}catch{}}var Jt=class{constructor(h,y){this.g=h,this.map=y}};function eu(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function rr(h){return h.h?1:h.g?h.g.size:0}function sr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function nu(h,y){h.g?h.g.add(y):h.h=y}function iu(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}eu.prototype.cancel=function(){if(this.i=ru(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ru(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return w(h.i)}var mh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mo(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const R=h[T].indexOf("=");let K,ee=null;R>=0?(K=h[T].substring(0,R),ee=h[T].substring(R+1)):K=h[T],y(K,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function oi(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof oi?(this.l=h.l,gn(this,h.j),this.o=h.o,this.g=h.g,as(this,h.u),this.h=h.h,su(this,_h(h.i)),this.m=h.m):h&&(y=String(h).match(mh))?(this.l=!1,gn(this,y[1]||"",!0),this.o=ar(y[2]||""),this.g=ar(y[3]||"",!0),as(this,y[4]),this.h=ar(y[5]||"",!0),su(this,y[6]||"",!0),this.m=ar(y[7]||"")):(this.l=!1,this.i=new ls(null,this.l))}oi.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ha(y,po,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ha(y,po,!0),"@"),h.push(Bn(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ha(T,T.charAt(0)=="/"?au:ph,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ha(T,gh)),h.join("")},oi.prototype.resolve=function(h){const y=Wt(this);let T=!!h.j;T?gn(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var R=h.h;if(T)as(y,h.u);else if(T=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var K=y.h.lastIndexOf("/");K!=-1&&(R=y.h.slice(0,K+1)+R)}if(K=R,K==".."||K==".")R="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){R=K.lastIndexOf("/",0)==0,K=K.split("/");const ee=[];for(let de=0;de<K.length;){const Fe=K[de++];Fe=="."?R&&de==K.length&&ee.push(""):Fe==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),R&&de==K.length&&ee.push("")):(ee.push(Fe),R=!0)}R=ee.join("/")}else R=K}return T?y.h=R:T=h.i.toString()!=="",T?su(y,_h(h.i)):T=!!h.m,T&&(y.m=h.m),y};function Wt(h){return new oi(h)}function gn(h,y,T){h.j=T?ar(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function as(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function su(h,y,T){y instanceof ls?(h.i=y,yo(h.i,h.l)):(T||(y=ha(y,os)),h.i=new ls(y,h.l))}function ut(h,y,T){h.i.set(y,T)}function ca(h){return ut(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ar(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ha(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,Qn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Qn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var po=/[#\/\?@]/g,ph=/[#\?:]/g,au=/[#\?]/g,os=/[#\?@]/g,gh=/#/g;function ls(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function $n(h){h.g||(h.g=new Map,h.h=0,h.i&&mo(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}i=ls.prototype,i.add=function(h,y){$n(this),this.i=null,h=us(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function yh(h,y){$n(h),y=us(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function ou(h,y){return $n(h),y=us(h,y),h.g.has(y)}i.forEach=function(h,y){$n(this),this.g.forEach(function(T,R){T.forEach(function(K){h.call(y,K,R,this)},this)},this)};function lu(h,y){$n(h);let T=[];if(typeof y=="string")ou(h,y)&&(T=T.concat(h.g.get(us(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}i.set=function(h,y){return $n(this),this.i=null,h=us(this,h),ou(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=lu(this,h),h.length>0?String(h[0]):y):y};function go(h,y,T){yh(h,y),T.length>0&&(h.i=null,h.g.set(us(h,y),w(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var T=y[R];const K=Bn(T);T=lu(this,T);for(let ee=0;ee<T.length;ee++){let de=K;T[ee]!==""&&(de+="="+Bn(T[ee])),h.push(de)}}return this.i=h.join("&")};function _h(h){const y=new ls;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function us(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function yo(h,y){y&&!h.j&&($n(h),h.i=null,h.g.forEach(function(T,R){const K=R.toLowerCase();R!=K&&(yh(this,R),go(this,K,T))},h)),h.j=y}function Li(h,y){const T=new $t;if(c.Image){const R=new Image;R.onload=_(bi,T,"TestLoadImage: loaded",!0,y,R),R.onerror=_(bi,T,"TestLoadImage: error",!1,y,R),R.onabort=_(bi,T,"TestLoadImage: abort",!1,y,R),R.ontimeout=_(bi,T,"TestLoadImage: timeout",!1,y,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function uu(h,y){const T=new $t,R=new AbortController,K=setTimeout(()=>{R.abort(),bi(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(ee=>{clearTimeout(K),ee.ok?bi(T,"TestPingServer: ok",!0,y):bi(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(K),bi(T,"TestPingServer: error",!1,y)})}function bi(h,y,T,R,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),R(T)}catch{}}function cs(){this.g=new Tt}function or(h){this.i=h.Sb||null,this.h=h.ab||!1}E(or,on),or.prototype.g=function(){return new fa(this.i,this.h)};function fa(h,y){Ie.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(fa,Ie),i=fa.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Ui(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_o(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _o(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?hs(this):Ui(this),this.readyState==3&&_o(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,hs(this))},i.Na=function(h){this.g&&(this.response=h,hs(this))},i.ga=function(){this.g&&hs(this)};function hs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ui(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Ui(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Si(h){let y="";return De(h,function(T,R){y+=R,y+=":",y+=T,y+=`\r
`}),y}function da(h,y,T){e:{for(R in T){var R=!1;break e}R=!0}R||(T=Si(T),typeof h=="string"?T!=null&&Bn(T):ut(h,y,T))}function pt(h){Ie.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(pt,Ie);var lr=/^https?$/i,cu=["POST","PUT"];i=pt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,T,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zn.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ee){ma(this,ee);return}if(h=T||"",T=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var K in R)T.set(K,R[K]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ee of R.keys())T.set(ee,R.get(ee));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(cu,y,void 0)>=0)||R||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,de]of T)this.g.setRequestHeader(ee,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ee){ma(this,ee)}};function ma(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,hu(h),xr(h)}function hu(h){h.A||(h.A=!0,Ue(h,"complete"),Ue(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ue(this,"complete"),Ue(this,"abort"),xr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),pt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?pa(this):this.Xa())},i.Xa=function(){pa(this)};function pa(h){if(h.h&&typeof l<"u"){if(h.v&&ji(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ue(h,"readystatechange"),ji(h)==4){h.h=!1;try{const ee=h.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var R;if(R=ee===0){let de=String(h.D).match(mh)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),R=!lr.test(de?de.toLowerCase():"")}T=R}if(T)Ue(h,"complete"),Ue(h,"success");else{h.o=6;try{var K=ji(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",hu(h)}}finally{xr(h)}}}}function xr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||Ue(h,"ready");try{T.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ji(h){return h.g?h.g.readyState:0}i.ca=function(){try{return ji(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),qe(y)}};function An(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Nr(h){const y={};h=(h.g&&ji(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(P(h[R]))continue;var T=si(h[R]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=y[K]||[];y[K]=ee,ee.push(T)}Be(y,function(R){return R.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ur(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function fs(h){this.za=0,this.i=[],this.j=new $t,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ur("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ur("baseRetryDelayMs",5e3,h),this.Za=ur("retryDelaySeedMs",1e4,h),this.Ta=ur("forwardChannelMaxRetries",2,h),this.va=ur("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new eu(h&&h.concurrentRequestLimit),this.Ba=new cs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=fs.prototype,i.ka=8,i.I=1,i.connect=function(h,y,T,R){Qe(0),this.W=h,this.H=y||{},T&&R!==void 0&&(this.H.OSID=T,this.H.OAID=R),this.F=this.X,this.J=wh(this,null,this.W),cr(this)};function fu(h){if(vo(h),h.I==3){var y=h.V++,T=Wt(h.J);if(ut(T,"SID",h.M),ut(T,"RID",y),ut(T,"TYPE","terminate"),ga(h,T),y=new Sn(h,h.j,y),y.M=2,y.A=ca(Wt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Ih(y.j,null),y.g.ea(y.A)),y.F=Date.now(),tr(y)}Ah(h)}function ds(h){h.g&&(mu(h),h.g.cancel(),h.g=null)}function vo(h){ds(h),h.v&&(c.clearTimeout(h.v),h.v=null),To(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function cr(h){if(!tu(h.h)&&!h.m){h.m=!0;var y=h.Ea;ae||S(),Z||(ae(),Z=!0),C.add(y,h),h.D=0}}function Eo(h,y){return rr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Rt(g(h.Ea,h,y),Sh(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new Sn(this,this.j,h);let ee=this.o;if(this.U&&(ee?(ee=z(ee),Q(ee,this.U)):ee=this.U),this.u!==null||this.R||(K.J=ee,ee=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var R=this.i[T];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=vh(this,K,y),T=Wt(this.J),ut(T,"RID",h),ut(T,"CVER",22),this.G&&ut(T,"X-HTTP-Session-Id",this.G),ga(this,T),ee&&(this.R?y="headers="+Bn(Si(ee))+"&"+y:this.u&&da(T,this.u,ee)),nu(this.h,K),this.Ra&&ut(T,"TYPE","init"),this.S?(ut(T,"$req",y),ut(T,"SID","null"),K.U=!0,er(K,T,null)):er(K,T,y),this.I=2}}else this.I==3&&(h?du(this,h):this.i.length==0||tu(this.h)||du(this))};function du(h,y){var T;y?T=y.l:T=h.V++;const R=Wt(h.J);ut(R,"SID",h.M),ut(R,"RID",T),ut(R,"AID",h.K),ga(h,R),h.u&&h.o&&da(R,h.u,h.o),T=new Sn(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=vh(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),nu(h.h,T),er(T,R,y)}function ga(h,y){h.H&&De(h.H,function(T,R){ut(y,R,T)}),h.l&&De({},function(T,R){ut(y,R,T)})}function vh(h,y,T){T=Math.min(h.i.length,T);const R=h.l?g(h.l.Ka,h.l,h):null;e:{var K=h.i;let Fe=-1;for(;;){const qt=["count="+T];Fe==-1?T>0?(Fe=K[0].g,qt.push("ofs="+Fe)):Fe=0:qt.push("ofs="+Fe);let st=!0;for(let Ct=0;Ct<T;Ct++){var ee=K[Ct].g;const Ai=K[Ct].map;if(ee-=Fe,ee<0)Fe=Math.max(0,K[Ct].g-100),st=!1;else try{ee="req"+ee+"_"||"";try{var de=Ai instanceof Map?Ai:Object.entries(Ai);for(const[fr,zi]of de){let Bi=zi;f(zi)&&(Bi=bn(zi)),qt.push(ee+fr+"="+encodeURIComponent(Bi))}}catch(fr){throw qt.push(ee+"type="+encodeURIComponent("_badmap")),fr}}catch{R&&R(Ai)}}if(st){de=qt.join("&");break e}}de=void 0}return h=h.i.splice(0,T),y.G=h,de}function Eh(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ae||S(),Z||(ae(),Z=!0),C.add(y,h),h.A=0}}function ya(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Rt(g(h.Da,h),Sh(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,Th(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Rt(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qe(10),ds(this),Th(this))};function mu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Th(h){h.g=new Sn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Wt(h.na);ut(y,"RID","rpc"),ut(y,"SID",h.M),ut(y,"AID",h.K),ut(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&ut(y,"TO",h.ia),ut(y,"TYPE","xmlhttp"),ga(h,y),h.u&&h.o&&da(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=ca(Wt(y)),T.u=null,T.R=!0,ho(T,h)}i.Va=function(){this.C!=null&&(this.C=null,ds(this),ya(this),Qe(19))};function To(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function bh(h,y){var T=null;if(h.g==y){To(h),mu(h),h.g=null;var R=2}else if(sr(h.h,y))T=y.G,iu(h.h,y),R=1;else return;if(h.I!=0){if(y.o)if(R==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var K=h.D;R=Cr(),Ue(R,new It(R,T)),cr(h)}else Eh(h);else if(K=y.m,K==3||K==0&&y.X>0||!(R==1&&Eo(h,y)||R==2&&ya(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),K){case 1:hr(h,5);break;case 4:hr(h,10);break;case 3:hr(h,6);break;default:hr(h,2)}}}function Sh(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function hr(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),R=h.Ua;const K=!R;R=new oi(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gn(R,"https"),ca(R),K?Li(R.toString(),T):uu(R.toString(),T)}else Qe(2);h.I=0,h.l&&h.l.pa(y),Ah(h),vo(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Qe(2)):(this.j.info("Failed to ping google.com"),Qe(1))};function Ah(h){if(h.I=0,h.ja=[],h.l){const y=ru(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ja,y),k(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function wh(h,y,T){var R=T instanceof oi?Wt(T):new oi(T);if(R.g!="")y&&(R.g=y+"."+R.g),as(R,R.u);else{var K=c.location;R=K.protocol,y=y?y+"."+K.hostname:K.hostname,K=+K.port;const ee=new oi(null);R&&gn(ee,R),y&&(ee.g=y),K&&as(ee,K),T&&(ee.h=T),R=ee}return T=h.G,y=h.wa,T&&y&&ut(R,T,y),ut(R,"VER",h.ka),ga(h,R),R}function Ih(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new pt(new or({ab:T})):new pt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rh(){}i=Rh.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function ms(){}ms.prototype.g=function(h,y){return new Fn(h,y)};function Fn(h,y){Ie.call(this),this.g=new fs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!P(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Mr(this)}E(Fn,Ie),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){fu(this.g)},Fn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=bn(h),h=T);y.i.push(new Jt(y.Ya++,h)),y.I==3&&cr(y)},Fn.prototype.N=function(){this.g.l=null,delete this.j,fu(this.g),delete this.g,Fn.Z.N.call(this)};function Ch(h){ln.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Ch,ln);function Dh(){xn.call(this),this.status=1}E(Dh,xn);function Mr(h){this.g=h}E(Mr,Rh),Mr.prototype.ra=function(){Ue(this.g,"a")},Mr.prototype.qa=function(h){Ue(this.g,new Ch(h))},Mr.prototype.pa=function(h){Ue(this.g,new Dh)},Mr.prototype.oa=function(){Ue(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,XA=function(){return new ms},$A=function(){return Cr()},QA=wt,Wg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mn.NO_ERROR=0,Mn.TIMEOUT=8,Mn.HTTP_ERROR=6,$f=Mn,On.COMPLETE="complete",YA=On,ua.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,lc=ua,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,KA=pt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl="12.9.0";function R2(i){Gl=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new Oy("@firebase/firestore");function al(){return Za.logLevel}function ce(i,...e){if(Za.logLevel<=Ze.DEBUG){const t=e.map(Ky);Za.debug(`Firestore (${Gl}): ${i}`,...t)}}function Gt(i,...e){if(Za.logLevel<=Ze.ERROR){const t=e.map(Ky);Za.error(`Firestore (${Gl}): ${i}`,...t)}}function Tl(i,...e){if(Za.logLevel<=Ze.WARN){const t=e.map(Ky);Za.warn(`Firestore (${Gl}): ${i}`,...t)}}function Ky(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,JA(i,r,t)}function JA(i,e,t){let r=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Gt(r),new Error(r)}function we(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||JA(e,a,r)}function be(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(kn.UNAUTHENTICATED)))}shutdown(){}}class x2{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){we(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Js;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Js,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Js)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new C2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new kn(e)}}class N2{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class M2{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new N2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(kn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class n0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ki(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){we(this.o===void 0,3512);const r=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new n0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(we(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new n0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=V2(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Le(i,e){return i<e?-1:i>e?1:0}function Zg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return Ig(a)===Ig(l)?Le(a,l):Ig(a)?1:-1}return Le(i.length,e.length)}const P2=55296,k2=57343;function Ig(i){const e=i.charCodeAt(0);return e>=P2&&e<=k2}function bl(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}function WA(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="__name__";class Er{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Er.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Er?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Er.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const r=Er.isNumericId(e),a=Er.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Er.extractNumericId(e).compare(Er.extractNumericId(t)):Zg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class lt extends Er{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const L2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Er{construct(e,t,r){return new Vt(e,t,r)}static isValidIdentifier(e){return L2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i0}static keyField(){return new Vt([i0])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new fe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new fe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new fe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(r+=f,a++):(l(),a++)}if(l(),c)throw new fe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(lt.fromString(e))}static fromName(e){return new me(lt.fromString(e).popFirst(5))}static empty(){return new me(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(i,e,t){if(!t)throw new fe(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function U2(i,e,t,r){if(e===!0&&r===!0)throw new fe(ie.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function r0(i){if(!me.isDocumentKey(i))throw new fe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function s0(i){if(me.isDocumentKey(i))throw new fe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ew(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Gd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ve(12329,{type:typeof i})}function Wr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gd(i);throw new fe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Zc(i,e){if(!ew(i))throw new fe(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new fe(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=-62135596800,o0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*o0);return new ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<a0)throw new fe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/o0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-a0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:sn("string",ft._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ft(0,0))}static max(){return new Ce(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=-1;class pd{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function ey(i){return i.fields.find((e=>e.kind===2))}function ka(i){return i.fields.filter((e=>e.kind!==2))}pd.UNKNOWN_ID=-1;class Xf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mc(0,_i.min())}}function tw(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new _i(a,me.empty(),e)}function nw(i){return new _i(i.readTime,i.key,Sl)}class _i{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _i(Ce.min(),me.empty(),Sl)}static max(){return new _i(Ce.max(),me.empty(),Sl)}}function Qy(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(i.documentKey,e.documentKey),t!==0?t:Le(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==iw)throw i;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,r)=>{t(e)}))}static reject(e){return new H(((t,r)=>{r(e)}))}static waitFor(e){return new H(((t,r)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=H.resolve(!1);for(const r of e)t=t.next((a=>a?H.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new H(((r,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++f,f===l&&r(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new H(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="SimpleDb";class Kd{static open(e,t,r,a){try{return new Kd(t,e.transaction(a,r))}catch(l){throw new yc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Js,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new yc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=$y(r.target.error);this.S.reject(new yc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(pi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new z2(t)}}class Ws{static delete(e){return ce(pi,"Removing database:",e),Ua(nA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!uA())return!1;if(Ws.F())return!0;const e=fn(),t=Ws.M(e),r=0<t&&t<10,a=sw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ws.M(fn())===12.2&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(pi,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new yc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new fe(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new fe(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new yc(e,c))},a.onupgradeneeded=l=>{ce(pi,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{ce(pi,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const f=Kd.open(this.db,e,l?"readonly":"readwrite",r),m=a(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),H.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(ce(pi,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function sw(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class j2{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Ua(this.U.delete())}}class yc extends fe{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function aa(i){return i.name==="IndexedDbTransactionError"}class z2{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(pi,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(pi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ua(r)}add(e){return ce(pi,"ADD",this.store.name,e,e),Ua(this.store.add(e))}get(e){return Ua(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(pi,"GET",this.store.name,e,t),t)))}delete(e){return ce(pi,"DELETE",this.store.name,e),Ua(this.store.delete(e))}count(){return ce(pi,"COUNT",this.store.name),Ua(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new H(((c,f)=>{l.onerror=m=>{f(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(r),c=[];return this.J(l,((f,m)=>{c.push(m)})).next((()=>c))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new H(((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}X(e,t){ce(pi,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,c,f)=>f.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new H(((r,a)=>{t.onerror=l=>{const c=$y(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((f=>{f?c.continue():r()})):r()}}))}J(e,t){const r=[];return new H(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void a();const m=new j2(f),g=t(f.primaryKey,f.value,m);if(g instanceof H){const _=g.catch((E=>(m.done(),H.reject(E))));r.push(_)}m.isDone?a():m.G===null?f.continue():f.continue(m.G)}})).next((()=>H.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ua(i){return new H(((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=$y(r.target.error);t(a)}}))}let l0=!1;function $y(i){const e=Ws.M(fn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l0||(l0=!0,setTimeout((()=>{throw r}),0)),r}}return i}const _c="IndexBackfiller";class B2{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(_c,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(_c,`Documents written: ${t}`)}catch(t){aa(t)?ce(_c,"Ignoring IndexedDB error during index backfill: ",t):await sa(t)}await this.re(6e4)}))}}class q2{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return H.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ce(_c,`Processing collection: ${c}`),this.oe(e,c,a).next((f=>{a-=f,r.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((f=>(ce(_c,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const c=nw(l);Qy(c,r)>0&&(r=c)})),new _i(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ti.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=-1;function Yd(i){return i==null}function Oc(i){return i===0&&1/i==-1/0}function aw(i){return typeof i=="number"&&Number.isInteger(i)&&!Oc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="";function jn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=u0(e)),e=F2(i.get(t),e);return u0(e)}function F2(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case gd:t+="";break;default:t+=l}}return t}function u0(i){return i+gd+""}function br(i){const e=i.length;if(we(e>=2,64408,{path:i}),e===2)return we(i.charAt(0)===gd&&i.charAt(1)==="",56145,{path:i}),lt.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=i.indexOf(gd,l);switch((c<0||c>t)&&ve(50515,{path:i}),i.charAt(c+1)){case"":const f=i.substring(l,c);let m;a.length===0?m=f:(a+=f,m=a,a=""),r.push(m);break;case"":a+=i.substring(l,c),a+="\0";break;case"":a+=i.substring(l,c+1);break;default:ve(61167,{path:i})}l=c+2}return new lt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="remoteDocuments",eh="owner",Wo="owner",Vc="mutationQueues",H2="userId",Gi="mutations",c0="batchId",Fa="userMutationsIndex",h0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(i,e){return[i,jn(e)]}function ow(i,e,t){return[i,jn(e),t]}const G2={},Al="documentMutations",yd="remoteDocumentsV14",K2=["prefixPath","collectionGroup","readTime","documentId"],Wf="documentKeyIndex",Y2=["prefixPath","collectionGroup","documentId"],lw="collectionGroupIndex",Q2=["collectionGroup","readTime","prefixPath","documentId"],Pc="remoteDocumentGlobal",ty="remoteDocumentGlobalKey",wl="targets",uw="queryTargetsIndex",$2=["canonicalId","targetId"],Il="targetDocuments",X2=["targetId","path"],Xy="documentTargetsIndex",J2=["path","targetId"],_d="targetGlobalKey",Ka="targetGlobal",kc="collectionParents",W2=["collectionId","parent"],Rl="clientMetadata",Z2="clientId",Qd="bundles",eM="bundleId",$d="namedQueries",tM="name",Jy="indexConfiguration",nM="indexId",ny="collectionGroupIndex",iM="collectionGroup",vc="indexState",rM=["indexId","uid"],cw="sequenceNumberIndex",sM=["uid","sequenceNumber"],Ec="indexEntries",aM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hw="documentKeyIndex",oM=["indexId","uid","orderedDocumentKey"],Xd="documentOverlays",lM=["userId","collectionPath","documentId"],iy="collectionPathOverlayIndex",uM=["userId","collectionPath","largestBatchId"],fw="collectionGroupOverlayIndex",cM=["userId","collectionGroup","largestBatchId"],Wy="globals",hM="name",dw=[Vc,Gi,Al,La,wl,eh,Ka,Il,Rl,Pc,kc,Qd,$d],fM=[...dw,Xd],mw=[Vc,Gi,Al,yd,wl,eh,Ka,Il,Rl,Pc,kc,Qd,$d,Xd],pw=mw,Zy=[...pw,Jy,vc,Ec],dM=Zy,gw=[...Zy,Wy],mM=gw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends rw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function dn(i,e){const t=be(i);return Ws.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function oa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function yw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kf(this.root,e,this.comparator,!1)}getReverseIterator(){return new kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kf(this.root,e,this.comparator,!0)}}class kf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=a??Dn.EMPTY,this.right=l??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Dn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Dn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new d0(this.data.getIterator())}getIteratorFrom(e){return new d0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class d0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zo(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new ni([])}unionWith(e){let t=new mt(Vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new _w("Invalid base64 string: "+l):l}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const pM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(i){if(we(!!i,39018),typeof i=="string"){let e=0;const t=pM.exec(i);if(we(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(i.seconds),nanos:Nt(i.nanos)}}function Nt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ns(i){return typeof i=="string"?Yt.fromBase64String(i):Yt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="server_timestamp",Ew="__type__",Tw="__previous_value__",bw="__local_write_time__";function e_(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[Ew])==null?void 0:r.stringValue)===vw}function Jd(i){const e=i.mapValue.fields[Tw];return e_(e)?Jd(e):e}function Lc(i){const e=ts(i.mapValue.fields[bw].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,t,r,a,l,c,f,m,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_,this.apiKey=E}}const vd="(default)";class eo{constructor(e,t){this.projectId=e,this.database=t||vd}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database===vd}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}function yM(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new fe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(i.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="__type__",Sw="__max__",Ks={mapValue:{fields:{__type__:{stringValue:Sw}}}},n_="__vector__",Cl="value",Zf={nullValue:"NULL_VALUE"};function ea(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?e_(i)?4:Aw(i)?9007199254740991:Wd(i)?10:11:ve(28295,{value:i})}function Rr(i,e){if(i===e)return!0;const t=ea(i);if(t!==ea(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Lc(i).isEqual(Lc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ts(a.timestampValue),f=ts(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return ns(a.bytesValue).isEqual(ns(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return Nt(a.geoPointValue.latitude)===Nt(l.geoPointValue.latitude)&&Nt(a.geoPointValue.longitude)===Nt(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Nt(a.integerValue)===Nt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Nt(a.doubleValue),f=Nt(l.doubleValue);return c===f?Oc(c)===Oc(f):isNaN(c)&&isNaN(f)}return!1})(i,e);case 9:return bl(i.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(f0(c)!==f0(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Rr(c[m],f[m])))return!1;return!0})(i,e);default:return ve(52216,{left:i})}}function Uc(i,e){return(i.values||[]).find((t=>Rr(t,e)))!==void 0}function ta(i,e){if(i===e)return 0;const t=ea(i),r=ea(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Nt(l.integerValue||l.doubleValue),m=Nt(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(i,e);case 3:return m0(i.timestampValue,e.timestampValue);case 4:return m0(Lc(i),Lc(e));case 5:return Zg(i.stringValue,e.stringValue);case 6:return(function(l,c){const f=ns(l),m=ns(c);return f.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const _=Le(f[g],m[g]);if(_!==0)return _}return Le(f.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Le(Nt(l.latitude),Nt(c.latitude));return f!==0?f:Le(Nt(l.longitude),Nt(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return p0(i.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,w,k,x;const f=l.fields||{},m=c.fields||{},g=(b=f[Cl])==null?void 0:b.arrayValue,_=(w=m[Cl])==null?void 0:w.arrayValue,E=Le(((k=g==null?void 0:g.values)==null?void 0:k.length)||0,((x=_==null?void 0:_.values)==null?void 0:x.length)||0);return E!==0?E:p0(g,_)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ks.mapValue&&c===Ks.mapValue)return 0;if(l===Ks.mapValue)return 1;if(c===Ks.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const b=Zg(m[E],_[E]);if(b!==0)return b;const w=ta(f[m[E]],g[_[E]]);if(w!==0)return w}return Le(m.length,_.length)})(i.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function m0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Le(i,e);const t=ts(i),r=ts(e),a=Le(t.seconds,r.seconds);return a!==0?a:Le(t.nanos,r.nanos)}function p0(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ta(t[a],r[a]);if(l)return l}return Le(t.length,r.length)}function Dl(i){return sy(i)}function sy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=ts(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return ns(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return me.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=sy(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${sy(t.fields[c])}`;return a+"}"})(i.mapValue):ve(61005,{value:i})}function ed(i){switch(ea(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jd(i);return e?16+ed(e):16;case 5:return 2*i.stringValue.length;case 6:return ns(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+ed(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return oa(r.fields,((l,c)=>{a+=l.length+ed(c)})),a})(i.mapValue);default:throw ve(13486,{value:i})}}function jc(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ay(i){return!!i&&"integerValue"in i}function zc(i){return!!i&&"arrayValue"in i}function g0(i){return!!i&&"nullValue"in i}function y0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function td(i){return!!i&&"mapValue"in i}function Wd(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[t_])==null?void 0:r.stringValue)===n_}function Tc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return oa(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Tc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tc(i.arrayValue.values[t]);return e}return{...i}}function Aw(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Sw}const ww={mapValue:{fields:{[t_]:{stringValue:n_},[Cl]:{arrayValue:{}}}}};function _M(i){return"nullValue"in i?Zf:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?jc(eo.empty(),me.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Wd(i)?ww:{mapValue:{}}:ve(35942,{value:i})}function vM(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?jc(eo.empty(),me.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?ww:"mapValue"in i?Wd(i)?{mapValue:{}}:Ks:ve(61959,{value:i})}function _0(i,e){const t=ta(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function v0(i,e){const t=ta(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!td(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(t)}setAll(e){let t=Vt.emptyPath(),r={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=f.popLast()}c?r[f.lastSegment()]=Tc(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());td(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];td(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){oa(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Un(Tc(this.value))}}function Iw(i){const e=[];return oa(i.fields,((t,r)=>{const a=new Vt([t]);if(td(r)){const l=Iw(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,r,a,l,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Ut(e,0,Ce.min(),Ce.min(),Ce.min(),Un.empty(),0)}static newFoundDocument(e,t,r,a){return new Ut(e,1,t,Ce.min(),r,a,0)}static newNoDocument(e,t){return new Ut(e,2,t,Ce.min(),Ce.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Ce.min(),Ce.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t){this.position=e,this.inclusive=t}}function E0(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?r=me.comparator(me.fromName(c.referenceValue),t.key):r=ta(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function T0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Rr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function EM(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{}class et extends Rw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new TM(e,t,r):t==="array-contains"?new AM(e,r):t==="in"?new Ow(e,r):t==="not-in"?new wM(e,r):t==="array-contains-any"?new IM(e,r):new et(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bM(e,r):new SM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ta(t,this.value)):t!==null&&ea(this.value)===ea(t)&&this.matchesComparison(ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dt extends Rw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dt(e,t)}matches(e){return Nl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nl(i){return i.op==="and"}function oy(i){return i.op==="or"}function i_(i){return Cw(i)&&Nl(i)}function Cw(i){for(const e of i.filters)if(e instanceof dt)return!1;return!0}function ly(i){if(i instanceof et)return i.field.canonicalString()+i.op.toString()+Dl(i.value);if(i_(i))return i.filters.map((e=>ly(e))).join(",");{const e=i.filters.map((t=>ly(t))).join(",");return`${i.op}(${e})`}}function Dw(i,e){return i instanceof et?(function(r,a){return a instanceof et&&r.op===a.op&&r.field.isEqual(a.field)&&Rr(r.value,a.value)})(i,e):i instanceof dt?(function(r,a){return a instanceof dt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,f)=>l&&Dw(c,a.filters[f])),!0):!1})(i,e):void ve(19439)}function xw(i,e){const t=i.filters.concat(e);return dt.create(t,i.op)}function Nw(i){return i instanceof et?(function(t){return`${t.field.canonicalString()} ${t.op} ${Dl(t.value)}`})(i):i instanceof dt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Nw).join(" ,")+"}"})(i):"Filter"}class TM extends et{constructor(e,t,r){super(e,t,r),this.key=me.fromName(r.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class bM extends et{constructor(e,t){super(e,"in",t),this.keys=Mw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SM extends et{constructor(e,t){super(e,"not-in",t),this.keys=Mw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mw(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>me.fromName(r.referenceValue)))}class AM extends et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zc(t)&&Uc(t.arrayValue,this.value)}}class Ow extends et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}}class wM extends et{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uc(this.value.arrayValue,t)}}class IM extends et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Uc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t=null,r=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function uy(i,e=null,t=[],r=[],a=null,l=null,c=null){return new RM(i,e,t,r,a,l,c)}function to(i){const e=be(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ly(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Yd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Dl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Dl(r))).join(",")),e.Te=t}return e.Te}function th(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!EM(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Dw(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!T0(i.startAt,e.startAt)&&T0(i.endAt,e.endAt)}function Ed(i){return me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Td(i,e){return i.filters.filter((t=>t instanceof et&&t.field.isEqual(e)))}function b0(i,e,t){let r=Zf,a=!0;for(const l of Td(i,e)){let c=Zf,f=!0;switch(l.op){case"<":case"<=":c=_M(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=Zf}_0({value:r,inclusive:a},{value:c,inclusive:f})<0&&(r=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];_0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function S0(i,e,t){let r=Ks,a=!0;for(const l of Td(i,e)){let c=Ks,f=!0;switch(l.op){case">=":case">":c=vM(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=Ks}v0({value:r,inclusive:a},{value:c,inclusive:f})>0&&(r=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];v0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,t=null,r=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Vw(i,e,t,r,a,l,c,f){return new Kl(i,e,t,r,a,l,c,f)}function Zd(i){return new Kl(i)}function A0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function CM(i){return me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Pw(i){return i.collectionGroup!==null}function bc(i){const e=be(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new mt(Vt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Bc(l,r))})),t.has(Vt.keyField().canonicalString())||e.Ie.push(new Bc(Vt.keyField(),r))}return e.Ie}function yi(i){const e=be(i);return e.Ee||(e.Ee=DM(e,bc(i))),e.Ee}function DM(i,e){if(i.limitType==="F")return uy(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Bc(a.field,l)}));const t=i.endAt?new xl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new xl(i.startAt.position,i.startAt.inclusive):null;return uy(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function cy(i,e){const t=i.filters.concat([e]);return new Kl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function xM(i,e){const t=i.explicitOrderBy.concat([e]);return new Kl(i.path,i.collectionGroup,t,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function hy(i,e,t){return new Kl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function em(i,e){return th(yi(i),yi(e))&&i.limitType===e.limitType}function kw(i){return`${to(yi(i))}|lt:${i.limitType}`}function ol(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Nw(a))).join(", ")}]`),Yd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Dl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Dl(a))).join(",")),`Target(${r})`})(yi(i))}; limitType=${i.limitType})`}function nh(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):me.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of bc(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(c,f,m){const g=E0(c,f,m);return c.inclusive?g<=0:g<0})(r.startAt,bc(r),a)||r.endAt&&!(function(c,f,m){const g=E0(c,f,m);return c.inclusive?g>=0:g>0})(r.endAt,bc(r),a))})(i,e)}function Lw(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Uw(i){return(e,t)=>{let r=!1;for(const a of bc(i)){const l=NM(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function NM(i,e,t){const r=i.field.isKeyField()?me.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?ta(m,g):ve(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return yw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new bt(me.comparator);function gi(){return MM}const jw=new bt(me.comparator);function uc(...i){let e=jw;for(const t of i)e=e.insert(t.key,t);return e}function zw(i){let e=jw;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Sr(){return Sc()}function Bw(){return Sc()}function Sc(){return new rs((i=>i.toString()),((i,e)=>i.isEqual(e)))}const OM=new bt(me.comparator),VM=new mt(me.comparator);function Ye(...i){let e=VM;for(const t of i)e=e.add(t);return e}const PM=new mt(Le);function r_(){return PM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(e)?"-0":e}}function qw(i){return{integerValue:""+i}}function kM(i,e){return aw(e)?qw(e):s_(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(){this._=void 0}}function LM(i,e,t){return i instanceof qc?(function(a,l){const c={fields:{[Ew]:{stringValue:vw},[bw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&e_(l)&&(l=Jd(l)),l&&(c.fields[Tw]=l),{mapValue:c}})(t,e):i instanceof Ml?Hw(i,e):i instanceof Ol?Gw(i,e):(function(a,l){const c=Fw(a,l),f=w0(c)+w0(a.Ae);return ay(c)&&ay(a.Ae)?qw(f):s_(a.serializer,f)})(i,e)}function UM(i,e,t){return i instanceof Ml?Hw(i,e):i instanceof Ol?Gw(i,e):t}function Fw(i,e){return i instanceof Fc?(function(r){return ay(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class qc extends tm{}class Ml extends tm{constructor(e){super(),this.elements=e}}function Hw(i,e){const t=Kw(e);for(const r of i.elements)t.some((a=>Rr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Ol extends tm{constructor(e){super(),this.elements=e}}function Gw(i,e){let t=Kw(e);for(const r of i.elements)t=t.filter((a=>!Rr(a,r)));return{arrayValue:{values:t}}}class Fc extends tm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function w0(i){return Nt(i.integerValue||i.doubleValue)}function Kw(i){return zc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,t){this.field=e,this.transform=t}}function zM(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof Ml&&a instanceof Ml||r instanceof Ol&&a instanceof Ol?bl(r.elements,a.elements,Rr):r instanceof Fc&&a instanceof Fc?Rr(r.Ae,a.Ae):r instanceof qc&&a instanceof qc})(i.transform,e.transform)}class BM{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class nm{}function Yw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ih(i.key,En.none()):new Yl(i.key,i.data,En.none());{const t=i.data,r=Un.empty();let a=new mt(Vt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ss(i.key,r,new ni(a.toArray()),En.none())}}function qM(i,e,t){i instanceof Yl?(function(a,l,c){const f=a.value.clone(),m=R0(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(i,e,t):i instanceof ss?(function(a,l,c){if(!nd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=R0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Qw(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ac(i,e,t,r){return i instanceof Yl?(function(l,c,f,m){if(!nd(l.precondition,c))return f;const g=l.value.clone(),_=C0(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,t,r):i instanceof ss?(function(l,c,f,m){if(!nd(l.precondition,c))return f;const g=C0(l.fieldTransforms,m,c),_=c.data;return _.setAll(Qw(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(l,c,f){return nd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(i,e,t)}function FM(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=Fw(r.transform,a||null);l!=null&&(t===null&&(t=Un.empty()),t.set(r.field,l))}return t||null}function I0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&bl(r,a,((l,c)=>zM(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Yl extends nm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ss extends nm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Qw(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function R0(i,e,t){const r=new Map;we(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,f=e.data.field(l.field);r.set(l.field,UM(c,f,t[a]))}return r}function C0(i,e,t){const r=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);r.set(a.field,LM(l,c,e))}return r}class ih extends nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $w extends nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&qM(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ac(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Bw();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=Yw(c,f);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,((t,r)=>I0(t,r)))&&bl(this.baseMutations,e.baseMutations,((t,r)=>I0(t,r)))}}class o_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){we(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return OM})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new o_(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,nt;function GM(i){switch(i){case ie.OK:return ve(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return ve(15467,{code:i})}}function Xw(i){if(i===void 0)return Gt("GRPC error has no .code"),ie.UNKNOWN;switch(i){case rn.OK:return ie.OK;case rn.CANCELLED:return ie.CANCELLED;case rn.UNKNOWN:return ie.UNKNOWN;case rn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case rn.INTERNAL:return ie.INTERNAL;case rn.UNAVAILABLE:return ie.UNAVAILABLE;case rn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case rn.NOT_FOUND:return ie.NOT_FOUND;case rn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case rn.ABORTED:return ie.ABORTED;case rn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case rn.DATA_LOSS:return ie.DATA_LOSS;default:return ve(39323,{code:i})}}(nt=rn||(rn={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=new Xs([4294967295,4294967295],0);function D0(i){const e=KM().encode(i),t=new GA;return t.update(e),new Uint8Array(t.digest())}function x0(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Xs([t,r],0),new Xs([a,l],0)]}class u_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cc(`Invalid padding: ${t}`);if(r<0)throw new cc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Xs.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(Xs.fromNumber(r)));return a.compare(YM)===1&&(a=new Xs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=D0(e),[r,a]=x0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new u_(l,a,t);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=D0(e),[r,a]=x0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,sh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rh(Ce.min(),a,new bt(Le),gi(),Ye())}}class sh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sh(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class Jw{constructor(e,t){this.targetId=e,this.Ce=t}}class Ww{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class N0{constructor(){this.ve=0,this.Fe=M0(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ve(38017,{changeType:l})}})),new sh(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=M0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class QM{constructor(e){this.Ge=e,this.ze=new Map,this.je=gi(),this.He=Lf(),this.Je=Lf(),this.Ze=new bt(Le)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Ed(l))if(r===0){const c=new me(l.path);this.et(t,c,Ut.newNoDocument(c,Ce.min()))}else we(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=ns(r).toUint8Array()}catch(m){if(m instanceof _w)return Tl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new u_(c,a,l)}catch(m){return Tl(m instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Ed(f.target)){const m=new me(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Ut.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=Ye();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new rh(e,t,this.Ze,this.je,r);return this.je=gi(),this.He=Lf(),this.Je=Lf(),this.Ze=new bt(Le),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new N0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new mt(Le),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new mt(Le),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new N0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lf(){return new bt(me.comparator)}function M0(){return new bt(me.comparator)}const $M={asc:"ASCENDING",desc:"DESCENDING"},XM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JM={and:"AND",or:"OR"};class WM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fy(i,e){return i.useProto3Json||Yd(e)?e:{value:e}}function Vl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function ZM(i,e){return Vl(i,e.toTimestamp())}function Gn(i){return we(!!i,49232),Ce.fromTimestamp((function(t){const r=ts(t);return new ft(r.seconds,r.nanos)})(i))}function c_(i,e){return dy(i,e).canonicalString()}function dy(i,e){const t=(function(a){return new lt(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function eI(i){const e=lt.fromString(i);return we(uI(e),10190,{key:e.toString()}),e}function bd(i,e){return c_(i.databaseId,e.path)}function Ya(i,e){const t=eI(e);if(t.get(1)!==i.databaseId.projectId)throw new fe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new fe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new me(iI(t))}function tI(i,e){return c_(i.databaseId,e)}function nI(i){const e=eI(i);return e.length===4?lt.emptyPath():iI(e)}function my(i){return new lt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function iI(i){return we(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function O0(i,e,t){return{name:bd(i,e),fields:t.value.mapValue.fields}}function eO(i,e,t){const r=Ya(i,e.name),a=Gn(e.updateTime),l=e.createTime?Gn(e.createTime):Ce.min(),c=new Un({mapValue:{fields:e.fields}}),f=Ut.newFoundDocument(r,a,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function tO(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ve(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(we(_===void 0||typeof _=="string",58123),Yt.fromBase64String(_||"")):(we(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Yt.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(g){const _=g.code===void 0?ie.UNKNOWN:Xw(g.code);return new fe(_,g.message||"")})(c);t=new Ww(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Ya(i,r.document.name),l=Gn(r.document.updateTime),c=r.document.createTime?Gn(r.document.createTime):Ce.min(),f=new Un({mapValue:{fields:r.document.fields}}),m=Ut.newFoundDocument(a,l,c,f),g=r.targetIds||[],_=r.removedTargetIds||[];t=new id(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Ya(i,r.document),l=r.readTime?Gn(r.readTime):Ce.min(),c=Ut.newNoDocument(a,l),f=r.removedTargetIds||[];t=new id([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Ya(i,r.document),l=r.removedTargetIds||[];t=new id([],l,a,null)}else{if(!("filter"in e))return ve(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new HM(a,l),f=r.targetId;t=new Jw(f,c)}}return t}function Sd(i,e){let t;if(e instanceof Yl)t={update:O0(i,e.key,e.value)};else if(e instanceof ih)t={delete:bd(i,e.key)};else if(e instanceof ss)t={update:O0(i,e.key,e.data),updateMask:oO(e.fieldMask)};else{if(!(e instanceof $w))return ve(16599,{dt:e.type});t={verify:bd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const f=c.transform;if(f instanceof qc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ml)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ol)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Fc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw ve(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:ZM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve(27497)})(i,e.precondition)),t}function py(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?En.updateTime(Gn(l.updateTime)):l.exists!==void 0?En.exists(l.exists):En.none()})(e.currentDocument):En.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,f){let m=null;if("setToServerValue"in f)we(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new qc;else if("appendMissingElements"in f){const _=f.appendMissingElements.values||[];m=new Ml(_)}else if("removeAllFromArray"in f){const _=f.removeAllFromArray.values||[];m=new Ol(_)}else"increment"in f?m=new Fc(c,f.increment):ve(16584,{proto:f});const g=Vt.fromServerFormat(f.fieldPath);return new jM(g,m)})(i,a))):[];if(e.update){e.update.name;const a=Ya(i,e.update.name),l=new Un({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new ni(g.map((_=>Vt.fromServerFormat(_))))})(e.updateMask);return new ss(a,l,c,t,r)}return new Yl(a,l,t,r)}if(e.delete){const a=Ya(i,e.delete);return new ih(a,t)}if(e.verify){const a=Ya(i,e.verify);return new $w(a,t)}return ve(1463,{proto:e})}function nO(i,e){return i&&i.length>0?(we(e!==void 0,14353),i.map((t=>(function(a,l){let c=a.updateTime?Gn(a.updateTime):Gn(l);return c.isEqual(Ce.min())&&(c=Gn(l)),new BM(c,a.transformResults||[])})(t,e)))):[]}function rI(i,e){return{documents:[tI(i,e.path)]}}function sI(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tI(i,a);const l=(function(g){if(g.length!==0)return lI(dt.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:ll(b.field),direction:rO(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=fy(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function aI(i){let e=nI(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){we(r===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const b=oI(E);return b instanceof dt&&i_(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(k){return new Bc(ul(k.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let b;return b=typeof E=="object"?E.value:E,Yd(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(E){const b=!!E.before,w=E.values||[];return new xl(w,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,w=E.values||[];return new xl(w,b)})(t.endAt)),Vw(e,a,c,l,f,"F",m,g)}function iO(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oI(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ul(t.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=ul(t.unaryFilter.field);return et.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ul(t.unaryFilter.field);return et.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ul(t.unaryFilter.field);return et.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(i):i.fieldFilter!==void 0?(function(t){return et.create(ul(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return dt.create(t.compositeFilter.filters.map((r=>oI(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(i):ve(30097,{filter:i})}function rO(i){return $M[i]}function sO(i){return XM[i]}function aO(i){return JM[i]}function ll(i){return{fieldPath:i.canonicalString()}}function ul(i){return Vt.fromServerFormat(i.fieldPath)}function lI(i){return i instanceof et?(function(t){if(t.op==="=="){if(y0(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NAN"}};if(g0(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(y0(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NOT_NAN"}};if(g0(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(t.field),op:sO(t.op),value:t.value}}})(i):i instanceof dt?(function(t){const r=t.getFilters().map((a=>lI(a)));return r.length===1?r[0]:{compositeFilter:{op:aO(t.op),filters:r}}})(i):ve(54877,{filter:i})}function oO(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function uI(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function cI(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t,r,a,l=Ce.min(),c=Ce.min(),f=Yt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.yt=e}}function lO(i,e){let t;if(e.document)t=eO(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=me.fromSegments(e.noDocument.path),a=io(e.noDocument.readTime);t=Ut.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve(56709);{const r=me.fromSegments(e.unknownDocument.path),a=io(e.unknownDocument.version);t=Ut.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new ft(a[0],a[1]);return Ce.fromTimestamp(l)})(e.readTime)),t}function V0(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ad(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:bd(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Vl(l,c.version.toTimestamp()),createTime:Vl(l,c.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:no(e.version)};else{if(!e.isUnknownDocument())return ve(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:no(e.version)}}return r}function Ad(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function no(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function io(i){const e=new ft(i.seconds,i.nanoseconds);return Ce.fromTimestamp(e)}function ja(i,e){const t=(e.baseMutations||[]).map((l=>py(i.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];c.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>py(i.yt,l))),a=ft.fromMillis(e.localWriteTimeMs);return new a_(e.batchId,a,t,r)}function hc(i){const e=io(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?io(i.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const c=l.documents.length;return we(c===1,1966,{count:c}),yi(Zd(nI(l.documents[0])))})(i.query):(function(l){return yi(aI(l))})(i.query),new Jr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Yt.fromBase64String(i.resumeToken))}function fI(i,e){const t=no(e.snapshotVersion),r=no(e.lastLimboFreeSnapshotVersion);let a;a=Ed(e.target)?rI(i.yt,e.target):sI(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:to(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function dI(i){const e=aI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?hy(e,e.limit,"L"):e}function Rg(i,e){return new l_(e.largestBatchId,py(i.yt,e.overlayMutation))}function P0(i,e){const t=e.path.lastSegment();return[i,jn(e.path.popLast()),t]}function k0(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:no(r.readTime),documentKey:jn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{getBundleMetadata(e,t){return L0(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:io(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return L0(e).put((function(a){return{bundleId:a.id,createTime:no(Gn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return U0(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:dI(l.bundledQuery),readTime:io(l.readTime)}})(r)}))}saveNamedQuery(e,t){return U0(e).put((function(a){return{name:a.name,readTime:no(Gn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function L0(i){return dn(i,Qd)}function U0(i){return dn(i,$d)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new im(e,r)}getOverlay(e,t){return Zu(e).get(P0(this.userId,t)).next((r=>r?Rg(this.serializer,r):null))}getOverlays(e,t){const r=Sr();return H.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,c)=>{const f=new l_(t,c);a.push(this.bt(e,f))})),H.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(jn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Zu(e).X(iy,f))})),H.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Sr(),l=jn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Zu(e).H(iy,c).next((f=>{for(const m of f){const g=Rg(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Sr();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zu(e).ee({index:fw,range:f},((m,g,_)=>{const E=Rg(this.serializer,g);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):_.done()})).next((()=>l))}bt(e,t){return Zu(e).put((function(a,l,c){const[f,m,g]=P0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Sd(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Zu(i){return dn(i,Xd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{St(e){return dn(e,Wy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Yt.fromUint8Array(r):Yt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Nt(e.integerValue));else if("doubleValue"in e){const r=Nt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Oc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ts(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ns(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Aw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Wd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ve(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){var c,f;const r=e.fields||{};this.Ft(t,53);const a=Cl,l=((f=(c=r[a].arrayValue)==null?void 0:c.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(Nt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),me.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}za.Wt=new za;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=255;function hO(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function j0(i){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const c=hO(255&r[l]);if(a+=c,c!==8)break}return a})(i);return Math.ceil(e/8)}class fO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=j0(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=j0(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(el),this.sn(255)}_n(){this.an(el),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===el?(this.sn(el),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===el?(this.an(el),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class dO{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class mO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ec{constructor(){this.cn=new fO,this.ascending=new dO(this.cn),this.descending=new mO(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new Ba(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:rd(this.Tn),directionalValue:rd(this.In),orderedDocumentKey:rd(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Us(i,e){let t=i.hn-e.hn;return t!==0?t:(t=z0(i.Tn,e.Tn),t!==0?t:(t=z0(i.In,e.In),t!==0?t:me.comparator(i.Pn,e.Pn)))}function z0(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function rd(i){return lA()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(i):i}function B0(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(i)}class q0{constructor(e){this.Vn=new mt(((t,r)=>Vt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(we(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=ey(e);if(t!==void 0&&!this.pn(t))return!1;const r=ka(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const m=r[l];if(!this.yn(f,m)||!this.wn(this.dn[c++],m))return!1}++l}for(;l<r.length;++l){const f=r[l];if(c>=this.dn.length||!this.wn(this.dn[c++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new mt(Vt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Xf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Xf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Xf(r.field,r.dir==="asc"?0:1)));return new pd(pd.UNKNOWN_ID,this.collectionId,t,Mc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(i){var t,r;if(we(i instanceof et||i instanceof dt,20012),i instanceof et){if(i instanceof Ow){const a=((r=(t=i.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((l=>et.create(i.field,"==",l))))||[];return dt.create(a,"or")}return i}const e=i.filters.map((a=>mI(a)));return dt.create(e,i.op)}function pO(i){if(i.getFilters().length===0)return[];const e=_y(mI(i));return we(pI(e),7391),gy(e)||yy(e)?[e]:e.getFilters()}function gy(i){return i instanceof et}function yy(i){return i instanceof dt&&i_(i)}function pI(i){return gy(i)||yy(i)||(function(t){if(t instanceof dt&&oy(t)){for(const r of t.getFilters())if(!gy(r)&&!yy(r))return!1;return!0}return!1})(i)}function _y(i){if(we(i instanceof et||i instanceof dt,34018),i instanceof et)return i;if(i.filters.length===1)return _y(i.filters[0]);const e=i.filters.map((r=>_y(r)));let t=dt.create(e,i.op);return t=wd(t),pI(t)?t:(we(t instanceof dt,64498),we(Nl(t),40251),we(t.filters.length>1,57927),t.filters.reduce(((r,a)=>h_(r,a))))}function h_(i,e){let t;return we(i instanceof et||i instanceof dt,38388),we(e instanceof et||e instanceof dt,25473),t=i instanceof et?e instanceof et?(function(a,l){return dt.create([a,l],"and")})(i,e):F0(i,e):e instanceof et?F0(e,i):(function(a,l){if(we(a.filters.length>0&&l.filters.length>0,48005),Nl(a)&&Nl(l))return xw(a,l.getFilters());const c=oy(a)?a:l,f=oy(a)?l:a,m=c.filters.map((g=>h_(g,f)));return dt.create(m,"or")})(i,e),wd(t)}function F0(i,e){if(Nl(e))return xw(e,i.getFilters());{const t=e.filters.map((r=>h_(i,r)));return dt.create(t,"or")}}function wd(i){if(we(i instanceof et||i instanceof dt,11850),i instanceof et)return i;const e=i.getFilters();if(e.length===1)return wd(e[0]);if(Cw(i))return i;const t=e.map((a=>wd(a))),r=[];return t.forEach((a=>{a instanceof et?r.push(a):a instanceof dt&&(a.op===i.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:dt.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.Sn=new f_}addToCollectionParentIndex(e,t){return this.Sn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(_i.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class f_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new mt(lt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new mt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="IndexedDbIndexManager",Uf=new Uint8Array(0);class yO{constructor(e,t){this.databaseId=t,this.Dn=new f_,this.Cn=new rs((r=>to(r)),((r,a)=>th(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:jn(a)};return G0(e).put(l)}return H.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[WA(t),""],!1,!0);return G0(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(br(c.parent))}return r}))}addFieldIndex(e,t){const r=tc(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=nl(e);return l.next((f=>{c.put(k0(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=tc(e),a=nl(e),l=tl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=tc(e),r=tl(e),a=nl(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return H.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new q0(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=tl(e);let a=!0;const l=new Map;return H.forEach(this.vn(t),(c=>this.Fn(e,c).next((f=>{a&&(a=!!f),l.set(c,f)})))).next((()=>{if(a){let c=Ye();const f=[];return H.forEach(l,((m,g)=>{ce(H0,`Using index ${(function(q){return`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map((se=>`${se.fieldPath}:${se.kind}`)).join(",")}`})(m)} to execute ${to(t)}`);const _=(function(q,se){const ae=ey(se);if(ae===void 0)return null;for(const Z of Td(q,ae.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null})(g,m),E=(function(q,se){const ae=new Map;for(const Z of ka(se))for(const C of Td(q,Z.fieldPath))switch(C.op){case"==":case"in":ae.set(Z.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return ae.set(Z.fieldPath.canonicalString(),C.value),Array.from(ae.values())}return null})(g,m),b=(function(q,se){const ae=[];let Z=!0;for(const C of ka(se)){const S=C.kind===0?b0(q,C.fieldPath,q.startAt):S0(q,C.fieldPath,q.startAt);ae.push(S.value),Z&&(Z=S.inclusive)}return new xl(ae,Z)})(g,m),w=(function(q,se){const ae=[];let Z=!0;for(const C of ka(se)){const S=C.kind===0?S0(q,C.fieldPath,q.endAt):b0(q,C.fieldPath,q.endAt);ae.push(S.value),Z&&(Z=S.inclusive)}return new xl(ae,Z)})(g,m),k=this.Mn(m,g,b),x=this.Mn(m,g,w),M=this.xn(m,g,E),U=this.On(m.indexId,_,k,b.inclusive,x,w.inclusive,M);return H.forEach(U,(G=>r.Z(G,t.limit).next((q=>{q.forEach((se=>{const ae=me.fromSegments(se.documentKey);c.has(ae)||(c=c.add(ae),f.push(ae))}))}))))})).next((()=>f))}return H.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=pO(dt.create(e.filters,"and")).map((r=>uy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,c,f){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let E=0;E<m;++E){const b=t?this.Nn(t[E/g]):Uf,w=this.Bn(e,b,r[E%g],a),k=this.Ln(e,b,l[E%g],c),x=f.map((M=>this.Bn(e,b,M,!0)));_.push(...this.createRange(w,k,x))}return _}Bn(e,t,r,a){const l=new Ba(e,me.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new Ba(e,me.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new q0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const f of l)r.gn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(e,t){let r=2;const a=this.vn(t);return H.forEach(a,(l=>this.Fn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(m){let g=new mt(Vt.comparator),_=!1;for(const E of m.filters)for(const b of E.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:g=g.add(b.field));for(const E of m.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(_?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new ec;for(const a of ka(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.ln(a.kind);za.Wt.Dt(l,c)}return r.un()}Nn(e){const t=new ec;return za.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new ec;return za.Wt.Dt(jc(this.databaseId,t),r.ln((function(l){const c=ka(l);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new ec);let l=0;for(const c of ka(e)){const f=r[l++];for(const m of a)if(this.qn(t,c.fieldPath)&&zc(f))a=this.Un(a,c,f);else{const g=m.ln(c.kind);za.Wt.Dt(f,g)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const f of a){const m=new ec;m.seed(f.un()),za.Wt.Dt(c,m.ln(t.kind)),l.push(m)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof et&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=tc(e),a=nl(e);return(t?r.H(ny,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const c=[];return H.forEach(l,(f=>a.get([f.indexId,this.uid]).next((m=>{c.push((function(_,E){const b=E?new Mc(E.sequenceNumber,new _i(io(E.readTime),new me(br(E.documentKey)),E.largestBatchId)):Mc.empty(),w=_.fields.map((([k,x])=>new Xf(Vt.fromServerFormat(k),x)));return new pd(_.indexId,_.collectionGroup,w,b)})(f,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Le(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=tc(e),l=nl(e);return this.Wn(e).next((c=>a.H(ny,IDBKeyRange.bound(t,t)).next((f=>H.forEach(f,(m=>l.put(k0(m.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return H.forEach(t,((a,l)=>{const c=r.get(a.collectionGroup);return(c?H.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(r.set(a.collectionGroup,f),H.forEach(f,(m=>this.Qn(e,a,m).next((g=>{const _=this.Gn(l,m);return g.isEqual(_)?H.resolve():this.zn(e,l,m,g,_)})))))))}))}jn(e,t,r,a){return tl(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return tl(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=tl(e);let l=new mt(Us);return a.ee({index:hw,range:IDBKeyRange.only([r.indexId,this.uid,rd(this.Kn(r,t))])},((c,f)=>{l=l.add(new Ba(r.indexId,t,B0(f.arrayValue),B0(f.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new mt(Us);const a=this.kn(t,e);if(a==null)return r;const l=ey(t);if(l!=null){const c=e.data.field(l.fieldPath);if(zc(c))for(const f of c.arrayValue.values||[])r=r.add(new Ba(t.indexId,e.key,this.Nn(f),a))}else r=r.add(new Ba(t.indexId,e.key,Uf,a));return r}zn(e,t,r,a,l){ce(H0,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,_,E,b){const w=m.getIterator(),k=g.getIterator();let x=Zo(w),M=Zo(k);for(;x||M;){let U=!1,G=!1;if(x&&M){const q=_(x,M);q<0?G=!0:q>0&&(U=!0)}else x!=null?G=!0:U=!0;U?(E(M),M=Zo(k)):G?(b(x),x=Zo(w)):(x=Zo(w),M=Zo(k))}})(a,l,Us,(f=>{c.push(this.jn(e,t,r,f))}),(f=>{c.push(this.Hn(e,t,r,f))})),H.waitFor(c)}Wn(e){let t=1;return nl(e).ee({index:cw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,f)=>Us(c,f))).filter(((c,f,m)=>!f||Us(c,m[f-1])!==0));const a=[];a.push(e);for(const c of r){const f=Us(c,e),m=Us(c,t);if(f===0)a[0]=e.En();else if(f>0&&m<0)a.push(c),a.push(c.En());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const f=a[c].An(this.uid,Uf,me.empty()),m=a[c+1].An(this.uid,Uf,me.empty());l.push(IDBKeyRange.bound(f,m))}return l}Jn(e,t){return Us(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(K0)}getMinOffset(e,t){return H.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||ve(44426))))).next(K0)}}function G0(i){return dn(i,kc)}function tl(i){return dn(i,Ec)}function tc(i){return dn(i,Jy)}function nl(i){return dn(i,vc)}function K0(i){we(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;Qy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new _i(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gI=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(i,e,t){const r=i.store(Gi),a=i.store(Al),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=r.ee({range:c},((_,E,b)=>(f++,b.delete())));l.push(m.next((()=>{we(f===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const E=ow(e,_.key.path,t.batchId);l.push(a.delete(E)),g.push(_.key)}return H.waitFor(l).next((()=>g))}function Id(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ve(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(gI,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);class rm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){we(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new rm(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return js(e).ee({index:Fa,range:r},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=cl(e),c=js(e);return c.add({}).next((f=>{we(typeof f=="number",49019);const m=new a_(f,t,r,a),g=(function(w,k,x){const M=x.baseMutations.map((G=>Sd(w.yt,G))),U=x.mutations.map((G=>Sd(w.yt,G)));return{userId:k,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:M,mutations:U}})(this.serializer,this.userId,m),_=[];let E=new mt(((b,w)=>Le(b.canonicalString(),w.canonicalString())));for(const b of a){const w=ow(this.userId,b.key.path,f);E=E.add(b.key.path.popLast()),_.push(c.put(g)),_.push(l.put(w,G2))}return E.forEach((b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),H.waitFor(_).next((()=>m))}))}lookupMutationBatch(e,t){return js(e).get(t).next((r=>r?(we(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ja(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?H.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return js(e).ee({index:Fa,range:a},((c,f,m)=>{f.userId===this.userId&&(we(f.batchId>=r,47524,{Yn:r}),l=ja(this.serializer,f)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ga;return js(e).ee({index:Fa,range:t,reverse:!0},((a,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ga],[this.userId,Number.POSITIVE_INFINITY]);return js(e).H(Fa,t).next((r=>r.map((a=>ja(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return cl(e).ee({range:a},((c,f,m)=>{const[g,_,E]=c,b=br(_);if(g===this.userId&&t.path.isEqual(b))return js(e).get(E).next((w=>{if(!w)throw ve(61480,{er:c,batchId:E});we(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:E}),l.push(ja(this.serializer,w))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(Le);const a=[];return t.forEach((l=>{const c=Jf(this.userId,l.path),f=IDBKeyRange.lowerBound(c),m=cl(e).ee({range:f},((g,_,E)=>{const[b,w,k]=g,x=br(w);b===this.userId&&l.path.isEqual(x)?r=r.add(k):E.done()}));a.push(m)})),H.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Jf(this.userId,r),c=IDBKeyRange.lowerBound(l);let f=new mt(Le);return cl(e).ee({range:c},((m,g,_)=>{const[E,b,w]=m,k=br(b);E===this.userId&&r.isPrefixOf(k)?k.length===a&&(f=f.add(w)):_.done()})).next((()=>this.tr(e,f)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(js(e).get(l).next((c=>{if(c===null)throw ve(35274,{batchId:l});we(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(ja(this.serializer,c))})))})),H.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return yI(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),H.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return cl(e).ee({range:r},((l,c,f)=>{if(l[0]===this.userId){const m=br(l[1]);a.push(m)}else f.done()})).next((()=>{we(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return _I(e,this.userId,t)}ir(e){return vI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ga,lastStreamToken:""}))}}function _I(i,e,t){const r=Jf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return cl(i).ee({range:l,Y:!0},((f,m,g)=>{const[_,E,b]=f;_===e&&E===a&&(c=!0),g.done()})).next((()=>c))}function js(i){return dn(i,Gi)}function cl(i){return dn(i,Al)}function vI(i){return dn(i,Vc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ro(0)}static ar(){return new ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new ro(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ce.fromTimestamp(new ft(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>il(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(we(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return il(e).ee(((c,f)=>{const m=hc(f);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>H.waitFor(l))).next((()=>a))}forEachTarget(e,t){return il(e).ee(((r,a)=>{const l=hc(a);t(l)}))}ur(e){return Q0(e).get(_d).next((t=>(we(t!==null,2888),t)))}cr(e,t){return Q0(e).put(_d,t)}lr(e,t){return il(e).put(fI(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=to(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return il(e).ee({range:a,index:uw},((c,f,m)=>{const g=hc(f);th(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Gs(e);return t.forEach((c=>{const f=jn(c.path);a.push(l.put({targetId:r,path:f})),a.push(this.referenceDelegate.addReference(e,r,c))})),H.waitFor(a)}removeMatchingKeys(e,t,r){const a=Gs(e);return H.forEach(t,(l=>{const c=jn(l.path);return H.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Gs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Gs(e);let l=Ye();return a.ee({range:r,Y:!0},((c,f,m)=>{const g=br(c[1]),_=new me(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const r=jn(t.path),a=IDBKeyRange.bound([r],[WA(r)],!1,!0);let l=0;return Gs(e).ee({index:Xy,Y:!0,range:a},(([c,f],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return il(e).get(t).next((r=>r?hc(r):null))}}function il(i){return dn(i,wl)}function Q0(i){return dn(i,Ka)}function Gs(i){return dn(i,Il)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="LruGarbageCollector",EI=1048576;function X0([i,e],[t,r]){const a=Le(i,t);return a===0?Le(e,r):a}class vO{constructor(e){this.Pr=e,this.buffer=new mt(X0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();X0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class TI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ce($0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?ce($0,"Ignoring IndexedDB error during garbage collection: ",t):await sa(t)}await this.Ar(3e5)}))}}class EO{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(ti.ce);const r=new vO(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(Y0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,c,f,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,f=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),al()<=Ze.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function bI(i,e){return new EO(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t){this.db=e,this.garbageCollector=bI(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return jf(e,r)}removeReference(e,t,r){return jf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jf(e,t)}wr(e,t){return(function(a,l){let c=!1;return vI(a).te((f=>_I(a,f,l).next((m=>(m&&(c=!0),H.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,f)=>{if(f<=t){const m=this.wr(e,c).next((g=>{if(!g)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Ce.min()),Gs(e).delete((function(E){return[0,jn(E.path)]})(c)))))}));a.push(m)}})).next((()=>H.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jf(e,t)}yr(e,t){const r=Gs(e);let a,l=ti.ce;return r.ee({index:Xy},(([c,f],{path:m,sequenceNumber:g})=>{c===0?(l!==ti.ce&&t(new me(br(a)),l),l=g,a=m):l=ti.ce})).next((()=>{l!==ti.ce&&t(new me(br(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jf(i,e){return Gs(i).put((function(r,a){return{targetId:0,path:jn(r.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.changes=new rs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Va(e).put(r)}removeEntry(e,t,r){return Va(e).delete((function(l,c){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Ad(c),f[f.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Ut.newInvalidDocument(t);return Va(e).ee({index:Wf,range:IDBKeyRange.only(nc(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:Ut.newInvalidDocument(t)};return Va(e).ee({index:Wf,range:IDBKeyRange.only(nc(t))},((a,l)=>{r={document:this.Sr(t,l),size:Id(l)}})).next((()=>r))}getEntries(e,t){let r=gi();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);r=r.insert(a,c)})).next((()=>r))}vr(e,t){let r=gi(),a=new bt(me.comparator);return this.Cr(e,t,((l,c)=>{const f=this.Sr(l,c);r=r.insert(l,f),a=a.insert(l,Id(c))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return H.resolve();let a=new mt(Z0);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(nc(a.first()),nc(a.last())),c=a.getIterator();let f=c.getNext();return Va(e).ee({index:Wf,range:l},((m,g,_)=>{const E=me.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&Z0(f,E)<0;)r(f,null),f=c.getNext();f&&f.isEqual(E)&&(r(f,g),f=c.hasNext()?c.getNext():null),f?_.j(nc(f)):_.done()})).next((()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),Ad(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Va(e).H(IDBKeyRange.bound(f,m,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let _=gi();for(const E of g){const b=this.Sr(me.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);b.isFoundDocument()&&(nh(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _}))}getAllFromCollectionGroup(e,t,r,a){let l=gi();const c=W0(t,r),f=W0(t,_i.max());return Va(e).ee({index:lw,range:IDBKeyRange.bound(c,f,!0)},((m,g,_)=>{const E=this.Sr(me.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new SO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return J0(e).get(ty).next((t=>(we(!!t,20021),t)))}br(e,t){return J0(e).put(ty,t)}Sr(e,t){if(t){const r=lO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return Ut.newInvalidDocument(e)}}function AI(i){return new bO(i)}class SO extends SI{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new rs((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new mt(((l,c)=>Le(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const f=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,f.readTime)),c.isValidDocument()){const m=V0(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=Id(m);r+=g-f.size,t.push(this.Mr.addEntry(e,l,m))}else if(r-=f.size,this.trackRemovals){const m=V0(this.Mr.serializer,c.convertToNoDocument(Ce.min()));t.push(this.Mr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),H.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function J0(i){return dn(i,Pc)}function Va(i){return dn(i,yd)}function nc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function W0(i,e){const t=e.documentKey.path.toArray();return[i,Ad(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Z0(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Le(t[l],r[l]),a)return a;return a=Le(t.length,r.length),a||(a=Le(t[t.length-2],r[r.length-2]),a||Le(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Ac(r.mutation,a,ni.empty(),ft.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ye()){const a=Sr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=uc();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Sr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ye())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,r,a){let l=gi();const c=Sc(),f=(function(){return Sc()})();return t.forEach(((m,g)=>{const _=r.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof ss)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Ac(_.mutation,g,_.mutation.getFieldMask(),ft.now())):c.set(g.key,ni.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>f.set(g,new AO(_,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Sc();let a=new bt(((c,f)=>c-f)),l=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||ni.empty();_=f.applyToLocalView(g,_),r.set(m,_);const E=(a.get(f.batchId)||Ye()).add(m);a=a.insert(f.batchId,E)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,_=m.value,E=Bw();_.forEach((b=>{if(!l.has(b)){const w=Yw(t.get(b),r.get(b));w!==null&&E.set(b,w),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return H.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return CM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):H.resolve(Sr());let f=Sl,m=l;return c.next((g=>H.forEach(g,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?H.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Ye()))).next((_=>({batchId:f,changes:zw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((r=>{let a=uc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=uc();return this.indexManager.getCollectionParents(e,l).next((f=>H.forEach(f,(m=>{const g=(function(E,b){return new Kl(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((_=>{_.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Ut.newInvalidDocument(_)))}));let f=uc();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&Ac(_.mutation,g,ni.empty(),ft.now()),nh(t,g)&&(f=f.insert(m,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return H.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Gn(a.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:dI(a.bundledQuery),readTime:Gn(a.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.overlays=new bt(me.comparator),this.Lr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Sr();return H.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),H.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){const a=Sr(),l=t.length+1,c=new me(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return H.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new bt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=Sr(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const f=Sr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>f.set(g,_))),!(f.size()>=a)););return H.resolve(f)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new l_(t,r));let l=this.Lr.get(t);l===void 0&&(l=Ye(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(){this.kr=new mt(_n.Kr),this.qr=new mt(_n.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new _n(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new _n(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new me(new lt([])),r=new _n(t,e),a=new _n(t,e+1),l=[];return this.qr.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new me(new lt([])),r=new _n(t,e),a=new _n(t,e+1);let l=Ye();return this.qr.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new _n(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class _n{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return me.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new mt(_n.Kr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new a_(l,t,r,a);this.mutationQueue.push(c);for(const f of a)this.Jr=this.Jr.add(new _n(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return H.resolve(c)}lookupMutationBatch(e,t){return H.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return H.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Ga:this.Yn-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _n(t,0),a=new _n(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),H.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(Le);return t.forEach((a=>{const l=new _n(a,0),c=new _n(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{r=r.add(f.Hr)}))})),H.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;me.isDocumentKey(l)||(l=l.child(""));const c=new _n(new me(l),0);let f=new mt(Le);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Hr)),!0)}),c),H.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){we(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return H.forEach(t.mutations,(a=>{const l=new _n(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new _n(t,0),a=this.Jr.firstAfterOrEqual(r);return H.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.ti=e,this.docs=(function(){return new bt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Ut.newInvalidDocument(a))})),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=gi();const c=t.path,f=new me(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Qy(nw(_),r)<=0||(a.has(_.key)||nh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return H.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ve(9500)}ni(e,t){return H.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new xO(this)}getSize(e){return H.resolve(this.size)}}class xO extends SI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),H.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.persistence=e,this.ri=new rs((t=>to(t)),th),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new d_,this.targetCount=0,this.oi=ro._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),H.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ro(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.lr(t),H.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),H.waitFor(l).next((()=>a))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),H.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t){this._i={},this.overlays={},this.ai=new ti(0),this.ui=!1,this.ui=!0,this.ci=new RO,this.referenceDelegate=e(this),this.li=new NO(this),this.indexManager=new gO,this.remoteDocumentCache=(function(a){return new DO(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new hI(t),this.Pi=new wO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new CO(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const a=new MO(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return H.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class MO extends rw{constructor(e){super(),this.currentSequenceNumber=e}}class sm{constructor(e){this.persistence=e,this.Ri=new d_,this.Ai=null}static Vi(e){return new sm(e)}get di(){if(this.Ai)return this.Ai;throw ve(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.di,(r=>{const a=me.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ce.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Rd{constructor(e,t){this.persistence=e,this.fi=new rs((r=>jn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=bI(this,t)}static Vi(e,t){return new Rd(e,t)}Ti(){}Ii(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return H.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?H.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(r++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ed(e.data.value)),t}wr(e,t,r){return H.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return H.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Kd("createOrUpgrade",t);r<1&&a>=1&&((function(m){m.createObjectStore(eh)})(e),(function(m){m.createObjectStore(Vc,{keyPath:H2}),m.createObjectStore(Gi,{keyPath:c0,autoIncrement:!0}).createIndex(Fa,h0,{unique:!0}),m.createObjectStore(Al)})(e),eS(e),(function(m){m.createObjectStore(La)})(e));let c=H.resolve();return r<3&&a>=3&&(r!==0&&((function(m){m.deleteObjectStore(Il),m.deleteObjectStore(wl),m.deleteObjectStore(Ka)})(e),eS(e)),c=c.next((()=>(function(m){const g=m.store(Ka),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return g.put(_d,_)})(l)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(m,g){return g.store(Gi).H().next((E=>{m.deleteObjectStore(Gi),m.createObjectStore(Gi,{keyPath:c0,autoIncrement:!0}).createIndex(Fa,h0,{unique:!0});const b=g.store(Gi),w=E.map((k=>b.put(k)));return H.waitFor(w)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(Rl,{keyPath:Z2})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.gi(l)))),r<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore(Pc)})(e),this.pi(l))))),r<7&&a>=7&&(c=c.next((()=>this.yi(l)))),r<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),r<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.bi(l)))),r<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Qd,{keyPath:eM})})(e),(function(m){m.createObjectStore($d,{keyPath:tM})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(Xd,{keyPath:lM});g.createIndex(iy,uM,{unique:!1}),g.createIndex(fw,cM,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(yd,{keyPath:K2});g.createIndex(Wf,Y2),g.createIndex(lw,Q2)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(La)))),r<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),r<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore(Jy,{keyPath:nM,autoIncrement:!0}).createIndex(ny,iM,{unique:!1}),m.createObjectStore(vc,{keyPath:rM}).createIndex(cw,sM,{unique:!1}),m.createObjectStore(Ec,{keyPath:aM}).createIndex(hw,oM,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore(vc).clear()})).next((()=>{t.objectStore(Ec).clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(Wy,{keyPath:hM})})(e)}))),r<18&&a>=18&&lA()&&(c=c.next((()=>{t.objectStore(vc).clear()})).next((()=>{t.objectStore(Ec).clear()}))),c}pi(e){let t=0;return e.store(La).ee(((r,a)=>{t+=Id(a)})).next((()=>{const r={byteSize:t};return e.store(Pc).put(ty,r)}))}gi(e){const t=e.store(Vc),r=e.store(Gi);return t.H().next((a=>H.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Ga],[l.userId,l.lastAcknowledgedBatchId]);return r.H(Fa,c).next((f=>H.forEach(f,(m=>{we(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=ja(this.serializer,m);return yI(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(Il),r=e.store(La);return e.store(Ka).get(_d).next((a=>{const l=[];return r.ee(((c,f)=>{const m=new lt(c),g=(function(E){return[0,jn(E)]})(m);l.push(t.get(g).next((_=>_?H.resolve():(E=>t.put({targetId:0,path:jn(E),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>H.waitFor(l)))}))}wi(e,t){e.createObjectStore(kc,{keyPath:W2});const r=t.store(kc),a=new f_,l=c=>{if(a.add(c)){const f=c.lastSegment(),m=c.popLast();return r.put({collectionId:f,parent:jn(m)})}};return t.store(La).ee({Y:!0},((c,f)=>{const m=new lt(c);return l(m.popLast())})).next((()=>t.store(Al).ee({Y:!0},(([c,f,m],g)=>{const _=br(f);return l(_.popLast())}))))}bi(e){const t=e.store(wl);return t.ee(((r,a)=>{const l=hc(a),c=fI(this.serializer,l);return t.put(c)}))}Si(e,t){const r=t.store(La),a=[];return r.ee(((l,c)=>{const f=t.store(yd),m=(function(E){return E.document?new me(lt.fromString(E.document.name).popFirst(5)):E.noDocument?me.fromSegments(E.noDocument.path):E.unknownDocument?me.fromSegments(E.unknownDocument.path):ve(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(f.put(g))})).next((()=>H.waitFor(a)))}Di(e,t){const r=t.store(Gi),a=AI(this.serializer),l=new m_(sm.Vi,this.serializer.yt);return r.H().next((c=>{const f=new Map;return c.forEach((m=>{let g=f.get(m.userId)??Ye();ja(this.serializer,m).keys().forEach((_=>g=g.add(_))),f.set(m.userId,g)})),H.forEach(f,((m,g)=>{const _=new kn(g),E=im.wt(this.serializer,_),b=l.getIndexManager(_),w=rm.wt(_,this.serializer,b,l.referenceDelegate);return new wI(a,w,E,b).recalculateAndSaveOverlaysForDocumentKeys(new ry(t,ti.ce),m).next()}))}))}}function eS(i){i.createObjectStore(Il,{keyPath:X2}).createIndex(Xy,J2,{unique:!0}),i.createObjectStore(wl,{keyPath:"targetId"}).createIndex(uw,$2,{unique:!0}),i.createObjectStore(Ka)}const zs="IndexedDbPersistence",Cg=18e5,Dg=5e3,xg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",VO="main";class p_{constructor(e,t,r,a,l,c,f,m,g,_,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=c,this.document=f,this.Fi=g,this.Mi=_,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=b=>Promise.resolve(),!p_.v())throw new fe(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new TO(this,a),this.Ki=t+VO,this.serializer=new hI(m),this.qi=new Ws(this.Ki,this.xi,new OO(this.serializer)),this.ci=new cO,this.li=new _O(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AI(this.serializer),this.Pi=new uO,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&Gt(zs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(ie.FAILED_PRECONDITION,xg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new ti(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>zf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(aa(e))return ce(zs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(zs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return ic(e).get(Wo).next((t=>H.resolve(this.Xi(t))))}Yi(e){return zf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Cg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=dn(t,Rl);return r.H().next((a=>{const l=this.ns(a,Cg),c=a.filter((f=>l.indexOf(f)===-1));return H.forEach(c,(f=>r.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?H.resolve(!0):ic(e).get(Wo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Dg)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new fe(ie.FAILED_PRECONDITION,xg);return!1}}return!(!this.networkEnabled||!this.inForeground)||zf(e).H().next((r=>this.ns(r,Dg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||c&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(zs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[eh,Rl],(e=>{const t=new ry(e,ti.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>zf(e).H().next((t=>this.ns(t,Cg).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return rm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return im.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce(zs,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?mM:m===17?gw:m===16?dM:m===15?Zy:m===14?pw:m===13?mw:m===12?fM:m===11?dw:void ve(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(f=>(c=new ry(f,this.ai?this.ai.next():ti.ce),t==="readwrite-primary"?this.ji(c).next((m=>!!m||this.Hi(c))).next((m=>{if(!m)throw Gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new fe(ie.FAILED_PRECONDITION,iw);return r(c)})).next((m=>this.Zi(c).next((()=>m)))):this.Ps(c).next((()=>r(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Ps(e){return ic(e).get(Wo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Dg)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new fe(ie.FAILED_PRECONDITION,xg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ic(e).put(Wo,t)}static v(){return Ws.v()}Ji(e){const t=ic(e);return t.get(Wo).next((r=>this.Xi(r)?(ce(zs,"Releasing primary lease."),t.delete(Wo)):H.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Gt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;oA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const r=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return ce(zs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Gt(zs,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Gt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ic(i){return dn(i,eh)}function zf(i){return dn(i,Rl)}function II(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Ye(),a=Ye();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new g_(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return oA()?8:sw(fn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new PO;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(al()<=Ze.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",ol(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(al()<=Ze.DEBUG&&ce("QueryEngine","Query:",ol(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(al()<=Ze.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",ol(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(t))):H.resolve())}gs(e,t){if(A0(t))return H.resolve(null);let r=yi(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=hy(t,null,"F"),r=yi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ye(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.bs(t,f);return this.Ss(t,g,c,m.readTime)?this.gs(e,hy(t,null,"F")):this.Ds(e,g,t,m)}))))})))))}ps(e,t,r,a){return A0(t)||a.isEqual(Ce.min())?H.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,a)?H.resolve(null):(al()<=Ze.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ol(t)),this.Ds(e,c,t,tw(a,Sl)).next((f=>f)))}))}bs(e,t){let r=new mt(Uw(e));return t.forEach(((a,l)=>{nh(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return al()<=Ze.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",ol(t)),this.fs.getDocumentsMatchingQuery(e,t,_i.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="LocalStore",kO=3e8;class LO{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new bt(Le),this.Fs=new rs((l=>to(l)),th),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function CI(i,e,t,r){return new LO(i,e,t,r)}async function DI(i,e){const t=be(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],f=[];let m=Ye();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){f.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function UO(i,e){const t=be(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,_){const E=g.batch,b=E.keys();let w=H.resolve();return b.forEach((k=>{w=w.next((()=>_.getEntry(m,k))).next((x=>{const M=g.docVersions.get(k);we(M!==null,48541),x.version.compareTo(M)<0&&(E.applyToRemoteDocument(x,g),x.isValidDocument()&&(x.setReadTime(g.commitVersion),_.addEntry(x)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=Ye();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function xI(i){const e=be(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function jO(i,e){const t=be(i),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((_,E)=>{const b=a.get(E);if(!b)return;f.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let w=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Yt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,r)),a=a.insert(E,w),(function(x,M,U){return x.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=kO?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(b,w,_)&&f.push(t.li.updateTargetData(l,w))}));let m=gi(),g=Ye();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(zO(l,c,e.documentUpdates).next((_=>{m=_.Bs,g=_.Ls}))),!r.isEqual(Ce.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(_)}return H.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.vs=a,l)))}function zO(i,e,t){let r=Ye(),a=Ye();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=gi();return t.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):ce(y_,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:a}}))}function BO(i,e){const t=be(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ga),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Cd(i,e){const t=be(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,H.resolve(a)):t.li.allocateTargetId(r).next((c=>(a=new Jr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Pl(i,e,t){const r=be(i),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!aa(c))throw c;ce(y_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function vy(i,e,t){const r=be(i);let a=Ce.min(),l=Ye();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const E=be(m),b=E.Fs.get(_);return b!==void 0?H.resolve(E.vs.get(b)):E.li.getTargetData(g,_)})(r,c,yi(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?a:Ce.min(),t?l:Ye()))).next((f=>(OI(r,Lw(e),f),{documents:f,ks:l})))))}function NI(i,e){const t=be(i),r=be(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((c=>c?c.target:null))))}function MI(i,e){const t=be(i),r=t.Ms.get(e)||Ce.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,tw(r,Sl),Number.MAX_SAFE_INTEGER))).then((a=>(OI(t,e,a),a)))}function OI(i,e,t){let r=i.Ms.get(e)||Ce.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.Ms.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="firestore_clients";function tS(i,e){return`${VI}_${i}_${e}`}const PI="firestore_mutations";function nS(i,e,t){let r=`${PI}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const kI="firestore_targets";function Ng(i,e){return`${kI}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="SharedClientState";class Dd{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new fe(a.error.code,a.error.message))),c?new Dd(e,t,a.state,l):(Gt(Tr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new fe(r.error.code,r.error.message))),l?new wc(e,r.state,a):(Gt(Tr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=r_();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=aw(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new xd(e,l):(Gt(Tr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class __{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new __(t.clientId,t.onlineState):(Gt(Tr,`Failed to parse online state: ${e}`),null)}}class Ey{constructor(){this.activeTargetIds=r_()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mg{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new bt(Le),this.started=!1,this.Zs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=tS(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Ey),this.eo=new RegExp(`^${VI}_${c}_([^_]*)$`),this.no=new RegExp(`^${PI}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${kI}_${c}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(tS(this.persistenceKey,r));if(a){const l=xd.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Ng(this.persistenceKey,e));if(a){const l=wc.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ng(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(Tr,"READ",e,t),t}setItem(e,t){ce(Tr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(Tr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ce(Tr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let c=ti.ce;if(l!=null)try{const f=JSON.parse(l);we(typeof f=="number",30636,{yo:l}),c=f}catch(f){Gt(Tr,"Failed to read sequence number from WebStorage",f)}return c})(t.newValue);r!==ti.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new Dd(this.currentUser,e,t,r),l=nS(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=nS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=Ng(this.persistenceKey,e),l=new wc(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return xd.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Dd.$s(new kn(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return wc.$s(a,t)}_o(e){return __.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ce(Tr,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),c=[],f=[];return l.forEach((m=>{a.has(m)||c.push(m)})),a.forEach((m=>{l.has(m)||f.push(m)})),this.syncEngine.Co(c,f).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=r_();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class LI{constructor(){this.vo=new Ey,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ey,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="ConnectivityMonitor";class rS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ce(iS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ce(iS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf=null;function Ty(){return Bf===null?Bf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bf++,"0x"+Bf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="RestConnection",FO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class HO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===vd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const c=Ty(),f=this.Qo(e,t.toUriEncodedString());ce(Og,`Sending RPC '${e}' ${c}:`,f,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:g}=new URL(f),_=ql(g);return this.zo(e,f,m,r,_).then((E=>(ce(Og,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Tl(Og,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",r),E}))}jo(e,t,r,a,l,c){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=FO[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection",rc=(i,e,t)=>{i.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class pl extends HO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!pl.c_){const e=$A();rc(e,QA.STAT_EVENT,(t=>{t.stat===Wg.PROXY?ce(Pn,"STAT_EVENT: detected buffering proxy"):t.stat===Wg.NOPROXY&&ce(Pn,"STAT_EVENT: detected no buffering proxy")})),pl.c_=!0}}zo(e,t,r,a,l){const c=Ty();return new Promise(((f,m)=>{const g=new KA;g.setWithCredentials(!0),g.listenOnce(YA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case $f.NO_ERROR:const E=g.getResponseJson();ce(Pn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case $f.TIMEOUT:ce(Pn,`RPC '${e}' ${c} timed out`),m(new fe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case $f.HTTP_ERROR:const b=g.getStatus();if(ce(Pn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const k=w==null?void 0:w.error;if(k&&k.status&&k.message){const x=(function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(G)>=0?G:ie.UNKNOWN})(k.status);m(new fe(x,k.message))}else m(new fe(ie.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new fe(ie.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ce(Pn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ce(Pn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,r,15)}))}T_(e,t,r){const a=Ty(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const g=l.join("");ce(Pn,`Creating RPC '${e}' stream ${a}: ${g}`,f);const _=c.createWebChannel(g,f);this.I_(_);let E=!1,b=!1;const w=new GO({Ho:k=>{b?ce(Pn,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(E||(ce(Pn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),E=!0),ce(Pn,`RPC '${e}' stream ${a} sending:`,k),_.send(k))},Jo:()=>_.close()});return rc(_,lc.EventType.OPEN,(()=>{b||(ce(Pn,`RPC '${e}' stream ${a} transport opened.`),w.i_())})),rc(_,lc.EventType.CLOSE,(()=>{b||(b=!0,ce(Pn,`RPC '${e}' stream ${a} transport closed`),w.o_(),this.E_(_))})),rc(_,lc.EventType.ERROR,(k=>{b||(b=!0,Tl(Pn,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),w.o_(new fe(ie.UNAVAILABLE,"The operation could not be completed")))})),rc(_,lc.EventType.MESSAGE,(k=>{var x;if(!b){const M=k.data[0];we(!!M,16349);const U=M,G=(U==null?void 0:U.error)||((x=U[0])==null?void 0:x.error);if(G){ce(Pn,`RPC '${e}' stream ${a} received error:`,G);const q=G.status;let se=(function(C){const S=rn[C];if(S!==void 0)return Xw(S)})(q),ae=G.message;q==="NOT_FOUND"&&ae.includes("database")&&ae.includes("does not exist")&&ae.includes(this.databaseId.database)&&Tl(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),se===void 0&&(se=ie.INTERNAL,ae="Unknown error status: "+q+" with message "+G.message),b=!0,w.o_(new fe(se,ae)),_.close()}else ce(Pn,`RPC '${e}' stream ${a} received:`,M),w.__(M)}})),pl.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return XA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(i){return new pl(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(){return typeof window<"u"?window:null}function sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(i){return new WM(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pl.c_=!1;class jI{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="PersistentStream";class zI{constructor(e,t,r,a,l,c,f,m){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Gt(t.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new fe(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(sS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ce(sS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YO extends zI{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=tO(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?Gn(c.readTime):Ce.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=my(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=Ed(m)?{documents:rI(l,m)}:{query:sI(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Zw(l,c.resumeToken);const g=fy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ce.min())>0){f.readTime=Vl(l,c.snapshotVersion.toTimestamp());const g=fy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const r=iO(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=my(this.serializer),t.removeTarget=e,this.K_(t)}}class QO extends zI{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=nO(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=my(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Sd(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{}class XO extends $O{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new fe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,dy(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(ie.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,dy(t,r),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new fe(ie.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function JO(i,e,t,r){return new XO(i,e,t,r)}class WO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gt(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class ZO{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{oo(this)&&(ce(so,"Restarting streams for network reachability change."),await(async function(m){const g=be(m);g.Ea.add(4),await ah(g),g.Va.set("Unknown"),g.Ea.delete(4),await om(g)})(this))}))})),this.Va=new WO(r,a)}}async function om(i){if(oo(i))for(const e of i.Ra)await e(!0)}async function ah(i){for(const e of i.Ra)await e(!1)}function lm(i,e){const t=be(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),T_(t)?E_(t):$l(t).O_()&&v_(t,e))}function kl(i,e){const t=be(i),r=$l(t);t.Ia.delete(e),r.O_()&&BI(t,e),t.Ia.size===0&&(r.O_()?r.L_():oo(t)&&t.Va.set("Unknown"))}function v_(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$l(i).Z_(e)}function BI(i,e){i.da.$e(e),$l(i).X_(e)}function E_(i){i.da=new QM({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),$l(i).start(),i.Va.ua()}function T_(i){return oo(i)&&!$l(i).x_()&&i.Ia.size>0}function oo(i){return be(i).Ea.size===0}function qI(i){i.da=void 0}async function eV(i){i.Va.set("Online")}async function tV(i){i.Ia.forEach(((e,t)=>{v_(i,e)}))}async function nV(i,e){qI(i),T_(i)?(i.Va.ha(e),E_(i)):i.Va.set("Unknown")}async function iV(i,e,t){if(i.Va.set("Online"),e instanceof Ww&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.da.removeTarget(f))})(i,e)}catch(r){ce(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nd(i,r)}else if(e instanceof id?i.da.Xe(e):e instanceof Jw?i.da.st(e):i.da.tt(e),!t.isEqual(Ce.min()))try{const r=await xI(i.localStore);t.compareTo(r)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Yt.EMPTY_BYTE_STRING,_.snapshotVersion)),BI(l,m);const E=new Jr(_.target,m,g,_.sequenceNumber);v_(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(i,t)}catch(r){ce(so,"Failed to raise snapshot:",r),await Nd(i,r)}}async function Nd(i,e,t){if(!aa(e))throw e;i.Ea.add(1),await ah(i),i.Va.set("Offline"),t||(t=()=>xI(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ce(so,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await om(i)}))}function FI(i,e){return e().catch((t=>Nd(i,t,e)))}async function Ql(i){const e=be(i),t=na(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ga;for(;rV(e);)try{const a=await BO(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,sV(e,a)}catch(a){await Nd(e,a)}HI(e)&&GI(e)}function rV(i){return oo(i)&&i.Ta.length<10}function sV(i,e){i.Ta.push(e);const t=na(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function HI(i){return oo(i)&&!na(i).x_()&&i.Ta.length>0}function GI(i){na(i).start()}async function aV(i){na(i).ra()}async function oV(i){const e=na(i);for(const t of i.Ta)e.ea(t.mutations)}async function lV(i,e,t){const r=i.Ta.shift(),a=o_.from(r,e,t);await FI(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Ql(i)}async function uV(i,e){e&&na(i).Y_&&await(async function(r,a){if((function(c){return GM(c)&&c!==ie.ABORTED})(a.code)){const l=r.Ta.shift();na(r).B_(),await FI(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Ql(r)}})(i,e),HI(i)&&GI(i)}async function aS(i,e){const t=be(i);t.asyncQueue.verifyOperationInProgress(),ce(so,"RemoteStore received new credentials");const r=oo(t);t.Ea.add(3),await ah(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await om(t)}async function by(i,e){const t=be(i);e?(t.Ea.delete(2),await om(t)):e||(t.Ea.add(2),await ah(t),t.Va.set("Unknown"))}function $l(i){return i.ma||(i.ma=(function(t,r,a){const l=be(t);return l.sa(),new YO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:eV.bind(null,i),Yo:tV.bind(null,i),t_:nV.bind(null,i),J_:iV.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),T_(i)?E_(i):i.Va.set("Unknown")):(await i.ma.stop(),qI(i))}))),i.ma}function na(i){return i.fa||(i.fa=(function(t,r,a){const l=be(t);return l.sa(),new QO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:aV.bind(null,i),t_:uV.bind(null,i),ta:oV.bind(null,i),na:lV.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Ql(i)):(await i.fa.stop(),i.Ta.length>0&&(ce(so,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,f=new b_(e,t,c,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S_(i,e){if(Gt("AsyncQueue",`${e}: ${i}`),aa(i))return new fe(ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{static emptySet(e){return new gl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||me.comparator(t.key,r.key):(t,r)=>me.comparator(t.key,r.key),this.keyedMap=uc(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new gl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.ga=new bt(me.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ll{constructor(e,t,r,a,l,c,f,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Ll(e,t,gl.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class hV{constructor(){this.queries=lS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=be(t),l=a.queries;a.queries=lS(),l.forEach(((c,f)=>{for(const m of f.ba)m.onError(r)}))})(this,new fe(ie.ABORTED,"Firestore shutting down"))}}function lS(){return new rs((i=>kw(i)),em)}async function fV(i,e){const t=be(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new cV,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=S_(c,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&A_(t)}async function dV(i,e){const t=be(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function mV(i,e){const t=be(i);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(a)&&(r=!0);c.wa=a}}r&&A_(t)}function pV(i,e,t){const r=be(i),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function A_(i){i.Ca.forEach((e=>{e.next()}))}var Sy,uS;(uS=Sy||(Sy={})).Ma="default",uS.Cache="cache";class gV{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Ll(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.key=e}}class YI{constructor(e){this.key=e}}class yV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ye(),this.mutatedKeys=Ye(),this.eu=Uw(e),this.tu=new gl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new oS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,E)=>{const b=a.get(_),w=nh(this.query,E)?E:null,k=!!b&&this.mutatedKeys.has(b.key),x=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;b&&w?b.data.isEqual(w.data)?k!==x&&(r.track({type:3,doc:w}),M=!0):this.su(b,w)||(r.track({type:2,doc:w}),M=!0,(m&&this.eu(w,m)>0||g&&this.eu(w,g)<0)&&(f=!0)):!b&&w?(r.track({type:0,doc:w}),M=!0):b&&!w&&(r.track({type:1,doc:b}),M=!0,(m||g)&&(f=!0)),M&&(w?(c=c.add(w),l=x?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:c,iu:r,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(w,k){const x=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Vt:M})}};return x(w)-x(k)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),a=a??!1;const f=t&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new Ll(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new YI(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new KI(r))})),t}cu(e){this.Za=e.ks,this.Ya=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xl="SyncEngine";class _V{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vV{constructor(e){this.key=e,this.hu=!1}}class EV{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new rs((f=>kw(f)),em),this.Iu=new Map,this.Eu=new Set,this.Ru=new bt(me.comparator),this.Au=new Map,this.Vu=new d_,this.du={},this.mu=new Map,this.fu=ro.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TV(i,e,t=!0){const r=um(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await QI(r,e,t,!0),a}async function bV(i,e){const t=um(i);await QI(t,e,!0,!1)}async function QI(i,e,t,r){const a=await Cd(i.localStore,yi(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await w_(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&lm(i.remoteStore,a),f}async function w_(i,e,t,r,a){i.pu=(E,b,w)=>(async function(x,M,U,G){let q=M.view.ru(U);q.Ss&&(q=await vy(x.localStore,M.query,!1).then((({documents:C})=>M.view.ru(C,q))));const se=G&&G.targetChanges.get(M.targetId),ae=G&&G.targetMismatches.get(M.targetId)!=null,Z=M.view.applyChanges(q,x.isPrimaryClient,se,ae);return Ay(x,M.targetId,Z.au),Z.snapshot})(i,E,b,w);const l=await vy(i.localStore,e,!0),c=new yV(e,l.ks),f=c.ru(l.documents),m=sh.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),g=c.applyChanges(f,i.isPrimaryClient,m);Ay(i,t,g.au);const _=new _V(e,t,c);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function SV(i,e,t){const r=be(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!em(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Pl(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&kl(r.remoteStore,a.targetId),Ul(r,a.targetId)})).catch(sa)):(Ul(r,a.targetId),await Pl(r.localStore,a.targetId,!0))}async function AV(i,e){const t=be(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),kl(t.remoteStore,r.targetId))}async function wV(i,e,t){const r=D_(i);try{const a=await(function(c,f){const m=be(c),g=ft.now(),_=f.reduce(((w,k)=>w.add(k.key)),Ye());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let k=gi(),x=Ye();return m.xs.getEntries(w,_).next((M=>{k=M,k.forEach(((U,G)=>{G.isValidDocument()||(x=x.add(U))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,k))).next((M=>{E=M;const U=[];for(const G of f){const q=FM(G,E.get(G.key).overlayedDocument);q!=null&&U.push(new ss(G.key,q,Iw(q.value.mapValue),En.exists(!0)))}return m.mutationQueue.addMutationBatch(w,g,U,f)})).next((M=>{b=M;const U=M.applyToLocalDocumentSet(E,x);return m.documentOverlayCache.saveOverlays(w,M.batchId,U)}))})).then((()=>({batchId:b.batchId,changes:zw(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let g=c.du[c.currentUser.toKey()];g||(g=new bt(Le)),g=g.insert(f,m),c.du[c.currentUser.toKey()]=g})(r,a.batchId,t),await la(r,a.changes),await Ql(r.remoteStore)}catch(a){const l=S_(a,"Failed to persist write");t.reject(l)}}async function $I(i,e){const t=be(i);try{const r=await jO(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(we(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?we(c.hu,14607):a.removedDocuments.size>0&&(we(c.hu,42227),c.hu=!1))})),await la(t,r,e)}catch(r){await sa(r)}}function cS(i,e,t){const r=be(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=be(c);m.onlineState=f;let g=!1;m.queries.forEach(((_,E)=>{for(const b of E.ba)b.va(f)&&(g=!0)})),g&&A_(m)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IV(i,e,t){const r=be(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new bt(me.comparator);c=c.insert(l,Ut.newNoDocument(l,Ce.min()));const f=Ye().add(l),m=new rh(Ce.min(),new Map,new bt(Le),c,f);await $I(r,m),r.Ru=r.Ru.remove(l),r.Au.delete(e),C_(r)}else await Pl(r.localStore,e,!1).then((()=>Ul(r,e,t))).catch(sa)}async function RV(i,e){const t=be(i),r=e.batch.batchId;try{const a=await UO(t.localStore,e);R_(t,r,null),I_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await la(t,a)}catch(a){await sa(a)}}async function CV(i,e,t){const r=be(i);try{const a=await(function(c,f){const m=be(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,f).next((E=>(we(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(r.localStore,e);R_(r,e,t),I_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await la(r,a)}catch(a){await sa(a)}}function I_(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function R_(i,e,t){const r=be(i);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function Ul(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||XI(i,r)}))}function XI(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(kl(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),C_(i))}function Ay(i,e,t){for(const r of t)r instanceof KI?(i.Vu.addReference(r.key,e),DV(i,r)):r instanceof YI?(ce(Xl,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||XI(i,r.key)):ve(19791,{wu:r})}function DV(i,e){const t=e.key,r=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(r)||(ce(Xl,"New document in limbo: "+t),i.Eu.add(r),C_(i))}function C_(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new me(lt.fromString(e)),r=i.fu.next();i.Au.set(r,new vV(t)),i.Ru=i.Ru.insert(t,r),lm(i.remoteStore,new Jr(yi(Zd(t.path)),r,"TargetPurposeLimboResolution",ti.ce))}}async function la(i,e,t){const r=be(i),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,m)=>{c.push(r.pu(m,e,t).then((g=>{var _;if((g||t)&&r.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){a.push(g);const E=g_.Es(m.targetId,g);l.push(E)}})))})),await Promise.all(c),r.Pu.J_(a),await(async function(m,g){const _=be(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>H.forEach(g,(b=>H.forEach(b.Ts,(w=>_.persistence.referenceDelegate.addReference(E,b.targetId,w))).next((()=>H.forEach(b.Is,(w=>_.persistence.referenceDelegate.removeReference(E,b.targetId,w)))))))))}catch(E){if(!aa(E))throw E;ce(y_,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const w=_.vs.get(b),k=w.snapshotVersion,x=w.withLastLimboFreeSnapshotVersion(k);_.vs=_.vs.insert(b,x)}}})(r.localStore,l))}async function xV(i,e){const t=be(i);if(!t.currentUser.isEqual(e)){ce(Xl,"User change. New user:",e.toKey());const r=await DI(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new fe(ie.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await la(t,r.Ns)}}function NV(i,e){const t=be(i),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let a=Ye();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}async function MV(i,e){const t=be(i),r=await vy(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&Ay(t,e.targetId,a.au),a}async function OV(i,e){const t=be(i);return MI(t.localStore,e).then((r=>la(t,r)))}async function VV(i,e,t,r){const a=be(i),l=await(function(f,m){const g=be(f),_=be(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(E=>_.Xn(E,m).next((b=>b?g.localDocuments.getDocuments(E,b):H.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Ql(a.remoteStore):t==="acknowledged"||t==="rejected"?(R_(a,e,r||null),I_(a,e),(function(f,m){be(be(f).mutationQueue).nr(m)})(a.localStore,e)):ve(6720,"Unknown batchState",{bu:t}),await la(a,l)):ce(Xl,"Cannot apply mutation batch with id: "+e)}async function PV(i,e){const t=be(i);if(um(t),D_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await hS(t,r.toArray());t.gu=!0,await by(t.remoteStore,!0);for(const l of a)lm(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then((()=>(Ul(t,c),Pl(t.localStore,c,!0)))),kl(t.remoteStore,c)})),await a,await hS(t,r),(function(c){const f=be(c);f.Au.forEach(((m,g)=>{kl(f.remoteStore,g)})),f.Vu.zr(),f.Au=new Map,f.Ru=new bt(me.comparator)})(t),t.gu=!1,await by(t.remoteStore,!1)}}async function hS(i,e,t){const r=be(i),a=[],l=[];for(const c of e){let f;const m=r.Iu.get(c);if(m&&m.length!==0){f=await Cd(r.localStore,yi(m[0]));for(const g of m){const _=r.Tu.get(g),E=await MV(r,_);E.snapshot&&l.push(E.snapshot)}}else{const g=await NI(r.localStore,c);f=await Cd(r.localStore,g),await w_(r,JI(g),c,!1,f.resumeToken)}a.push(f)}return r.Pu.J_(l),a}function JI(i){return Vw(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function kV(i){return(function(t){return be(be(t).persistence).hs()})(be(i).localStore)}async function LV(i,e,t,r){const a=be(i);if(a.gu)return void ce(Xl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await MI(a.localStore,Lw(l[0])),f=rh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Yt.EMPTY_BYTE_STRING);await la(a,c,f);break}case"rejected":await Pl(a.localStore,e,!0),Ul(a,e,r);break;default:ve(64155,t)}}async function UV(i,e,t){const r=um(i);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ce(Xl,"Adding an already active target "+a);continue}const l=await NI(r.localStore,a),c=await Cd(r.localStore,l);await w_(r,JI(l),c.targetId,!1,c.resumeToken),lm(r.remoteStore,c)}for(const a of t)r.Iu.has(a)&&await Pl(r.localStore,a,!1).then((()=>{kl(r.remoteStore,a),Ul(r,a)})).catch(sa)}}function um(i){const e=be(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=$I.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IV.bind(null,e),e.Pu.J_=mV.bind(null,e.eventManager),e.Pu.yu=pV.bind(null,e.eventManager),e}function D_(i){const e=be(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CV.bind(null,e),e}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=am(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return CI(this.persistence,new RI,e.initialUser,this.serializer)}Cu(e){return new m_(sm.Vi,this.serializer)}Du(e){return new LI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class jV extends Hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){we(this.persistence.referenceDelegate instanceof Rd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new TI(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new m_((r=>Rd.Vi(r,t)),this.serializer)}}class WI extends Hc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await D_(this.xu.syncEngine),await Ql(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return CI(this.persistence,new RI,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new TI(r,e.asyncQueue,t)}Mu(e,t){const r=new q2(t,this.persistence);return new B2(e.asyncQueue,r)}Cu(e){const t=II(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new p_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UI(),sd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new LI}}class zV extends WI{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Mg&&(this.sharedClientState.syncEngine={So:VV.bind(null,t),Do:LV.bind(null,t),Co:UV.bind(null,t),hs:kV.bind(null,t),bo:OV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await PV(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=UI();if(!Mg.v(t))throw new fe(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=II(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xV.bind(null,this.syncEngine),await by(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hV})()}createDatastore(e){const t=am(e.databaseInfo.databaseId),r=KO(e.databaseInfo);return JO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,f){return new ZO(r,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>cS(this.syncEngine,t,0)),(function(){return rS.v()?new rS:new qO})())}createSyncEngine(e,t){return(function(a,l,c,f,m,g,_){const E=new EV(a,l,c,f,m,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=be(a);ce(so,"RemoteStore shutting down."),l.Ea.add(5),await ah(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Gc.provider={build:()=>new Gc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="FirestoreClient";class qV{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=kn.UNAUTHENTICATED,this.clientId=Yy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{ce(ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ce(ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=S_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Vg(i,e){i.asyncQueue.verifyOperationInProgress(),ce(ia,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await DI(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function fS(i,e){i.asyncQueue.verifyOperationInProgress();const t=await FV(i);ce(ia,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>aS(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>aS(e.remoteStore,a))),i._onlineComponents=e}async function FV(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ce(ia,"Using user provided OfflineComponentProvider");try{await Vg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Tl("Error using user provided cache. Falling back to memory cache: "+t),await Vg(i,new Hc)}}else ce(ia,"Using default OfflineComponentProvider"),await Vg(i,new jV(void 0));return i._offlineComponents}async function ZI(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ce(ia,"Using user provided OnlineComponentProvider"),await fS(i,i._uninitializedComponentsProvider._online)):(ce(ia,"Using default OnlineComponentProvider"),await fS(i,new Gc))),i._onlineComponents}function HV(i){return ZI(i).then((e=>e.syncEngine))}async function dS(i){const e=await ZI(i),t=e.eventManager;return t.onListen=TV.bind(null,e.syncEngine),t.onUnlisten=SV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=AV.bind(null,e.syncEngine),t}function GV(i,e,t,r){const a=new BV(r),l=new gV(e,a,t);return i.asyncQueue.enqueueAndForget((async()=>fV(await dS(i),l))),()=>{a.Nu(),i.asyncQueue.enqueueAndForget((async()=>dV(await dS(i),l)))}}function KV(i,e){const t=new Js;return i.asyncQueue.enqueueAndForget((async()=>wV(await HV(i),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="ComponentProvider",mS=new Map;function QV(i,e,t,r,a){return new gM(i,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,e1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="firestore.googleapis.com",pS=!0;class gS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$V,this.ssl=pS}else this.host=e.host,this.ssl=e.ssl??pS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EI)throw new fe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class x_{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new D2;switch(r.type){case"firstParty":return new M2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=mS.get(t);r&&(ce(YV,"Removing Datastore"),mS.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lo(this.firestore,e,this._query)}}class Kt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Zc(t,Kt._jsonSchema))return new Kt(e,r||null,new me(lt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:sn("string",Kt._jsonSchemaVersion),referencePath:sn("string")};class Zs extends lo{constructor(e,t,r){super(e,t,Zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new me(e))}withConverter(e){return new Zs(this.firestore,e,this._path)}}function t1(i,e,...t){if(i=an(i),ZA("collection","path",e),i instanceof x_){const r=lt.fromString(e,...t);return s0(r),new Zs(i,null,r)}{if(!(i instanceof Kt||i instanceof Zs))throw new fe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(lt.fromString(e,...t));return s0(r),new Zs(i.firestore,null,r)}}function cn(i,e,...t){if(i=an(i),arguments.length===1&&(e=Yy.newId()),ZA("doc","path",e),i instanceof x_){const r=lt.fromString(e,...t);return r0(r),new Kt(i,null,new me(r))}{if(!(i instanceof Kt||i instanceof Zs))throw new fe(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(lt.fromString(e,...t));return r0(r),new Kt(i.firestore,i instanceof Zs?i.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="AsyncQueue";class _S{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jI(this,"async_queue_retry"),this._c=()=>{const r=sd();r&&ce(yS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=sd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Js;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;ce(yS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gt("INTERNAL UNHANDLED ERROR: ",vS(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=b_.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ve(47125,{Pc:vS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function vS(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ao extends x_{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new _S,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _S(e),this._firestoreClient=void 0,await e}}}function XV(i,e,t){t||(t=vd);const r=Py(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Xa(l,e))return a;throw new fe(ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new fe(ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EI)throw new fe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ql(e.host)&&sA(e.host),r.initialize({options:e,instanceIdentifier:t})}function N_(i){if(i._terminated)throw new fe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||JV(i),i._firestoreClient}function JV(i){var r,a,l,c;const e=i._freezeSettings(),t=QV(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,(a=i._app)==null?void 0:a.options.apiKey,e);i._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new qV(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pi(Yt.fromBase64String(e))}catch(t){throw new fe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pi(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,Pi._jsonSchema))return Pi.fromBase64String(e.bytes)}}Pi._jsonSchemaVersion="firestore/bytes/1.0",Pi._jsonSchema={type:sn("string",Pi._jsonSchemaVersion),bytes:sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:sn("string",wr._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $i(e.vectorValues);throw new fe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:sn("string",$i._jsonSchemaVersion),vectorValues:sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=/^__.*__$/;class ZV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yl(e,this.data,t,this.fieldTransforms)}}class n1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function i1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{dataSource:i})}}class O_{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new O_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Md(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(i1(this.dataSource)&&WV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class eP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||am(e)}createContext(e,t,r,a=!1){return new O_({dataSource:e,methodName:t,targetDoc:r,path:Vt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hm(i){const e=i._freezeSettings(),t=am(i._databaseId);return new eP(i._databaseId,!!e.ignoreUndefinedProperties,t)}function r1(i,e,t,r,a,l={}){const c=i.createContext(l.merge||l.mergeFields?2:0,e,t,a);V_("Data must be an object, but it was:",c,r);const f=o1(r,c);let m,g;if(l.merge)m=new ni(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const b=jl(e,E,t);if(!c.contains(b))throw new fe(ie.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);c1(_,b)||_.push(b)}m=new ni(_),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new ZV(new Un(f),m,g)}class fm extends M_{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fm}}function s1(i,e,t,r){const a=i.createContext(1,e,t);V_("Data must be an object, but it was:",a,r);const l=[],c=Un.empty();oa(r,((m,g)=>{const _=u1(e,m,t);g=an(g);const E=a.childContextForFieldPath(_);if(g instanceof fm)l.push(_);else{const b=oh(g,E);b!=null&&(l.push(_),c.set(_,b))}}));const f=new ni(l);return new n1(c,f,a.fieldTransforms)}function a1(i,e,t,r,a,l){const c=i.createContext(1,e,t),f=[jl(e,r,t)],m=[a];if(l.length%2!=0)throw new fe(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(jl(e,l[b])),m.push(l[b+1]);const g=[],_=Un.empty();for(let b=f.length-1;b>=0;--b)if(!c1(g,f[b])){const w=f[b];let k=m[b];k=an(k);const x=c.childContextForFieldPath(w);if(k instanceof fm)g.push(w);else{const M=oh(k,x);M!=null&&(g.push(w),_.set(w,M))}}const E=new ni(g);return new n1(_,E,c.fieldTransforms)}function tP(i,e,t,r=!1){return oh(t,i.createContext(r?4:3,e))}function oh(i,e){if(l1(i=an(i)))return V_("Unsupported field value:",e,i),o1(i,e);if(i instanceof M_)return(function(r,a){if(!i1(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const f of r){let m=oh(f,a.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kM(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ft.fromDate(r);return{timestampValue:Vl(a.serializer,l)}}if(r instanceof ft){const l=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vl(a.serializer,l)}}if(r instanceof wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pi)return{bytesValue:Zw(a.serializer,r._byteString)};if(r instanceof Kt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:c_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof $i)return(function(c,f){const m=c instanceof $i?c.toArray():c;return{mapValue:{fields:{[t_]:{stringValue:n_},[Cl]:{arrayValue:{values:m.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return s_(f.serializer,_)}))}}}}}})(r,a);if(cI(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Gd(r)}`)})(i,e)}function o1(i,e){const t={};return yw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(i,((r,a)=>{const l=oh(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function l1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ft||i instanceof wr||i instanceof Pi||i instanceof Kt||i instanceof M_||i instanceof $i||cI(i))}function V_(i,e,t){if(!l1(t)||!ew(t)){const r=Gd(t);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function jl(i,e,t){if((e=an(e))instanceof cm)return e._internalPath;if(typeof e=="string")return u1(i,e);throw Md("Field path arguments must be of type string or ",i,!1,void 0,t)}const nP=new RegExp("[~\\*/\\[\\]]");function u1(i,e,t){if(e.search(nP)>=0)throw Md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new cm(...e.split("."))._internalPath}catch{throw Md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Md(i,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new fe(ie.INVALID_ARGUMENT,f+i+m)}function c1(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{convertValue(e,t="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return oa(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,a,l;const t=(l=(a=(r=e.fields)==null?void 0:r[Cl].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Nt(c.doubleValue)));return new $i(t)}convertGeoPoint(e){return new wr(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){const t=ts(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);we(uI(r),9688,{name:e});const a=new eo(r.get(1),r.get(3)),l=new me(r.popFirst(5));return a.isEqual(t)||Gt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1 extends iP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}const ES="@firebase/firestore",TS="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(i,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(jl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rP extends f1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P_{}class d1 extends P_{}function m1(i,e,...t){let r=[];e instanceof P_&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof L_)).length,f=l.filter((m=>m instanceof k_)).length;if(c>1||c>0&&f>0)throw new fe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)i=a._apply(i);return i}class k_ extends d1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new k_(e,t,r)}_apply(e){const t=this._parse(e);return g1(e._query,t),new lo(e.firestore,e.converter,cy(e._query,t))}_parse(e){const t=hm(e.firestore);return(function(l,c,f,m,g,_,E){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){AS(E,_);const k=[];for(const x of E)k.push(SS(m,l,x));b={arrayValue:{values:k}}}else b=SS(m,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||AS(E,_),b=tP(f,c,E,_==="in"||_==="not-in");return et.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class L_ extends P_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new L_(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:dt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)g1(c,m),c=cy(c,m)})(e._query,t),new lo(e.firestore,e.converter,cy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class U_ extends d1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new U_(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new fe(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new fe(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bc(l,c)})(e._query,this._field,this._direction);return new lo(e.firestore,e.converter,xM(e._query,t))}}function p1(i,e="asc"){const t=e,r=jl("orderBy",i);return U_._create(r,t)}function SS(i,e,t){if(typeof(t=an(t))=="string"){if(t==="")throw new fe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pw(e)&&t.indexOf("/")!==-1)throw new fe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(lt.fromString(t));if(!me.isDocumentKey(r))throw new fe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jc(i,new me(r))}if(t instanceof Kt)return jc(i,t._key);throw new fe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gd(t)}.`)}function AS(i,e){if(!Array.isArray(i)||i.length===0)throw new fe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g1(i,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function y1(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class aP{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=cP(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function oP(i){return new aP(i)}class lP{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Gc.provider,this._offlineComponentProvider={build:t=>new WI(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class uP{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Gc.provider,this._offlineComponentProvider={build:t=>new zV(t,e==null?void 0:e.cacheSizeBytes)}}}function cP(i){return new lP(i==null?void 0:i.forceOwnership)}function hP(){return new uP}class fc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qa extends f1{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qa._jsonSchema={type:sn("string",Qa._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class ad extends Qa{data(e={}){return super.data(e)}}class yl{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new fc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ad(this._firestore,this._userDataWriter,r.key,r,new fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new ad(a._firestore,a._userDataWriter,f.doc.key,f.doc,new fc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new ad(a._firestore,a._userDataWriter,f.doc.key,f.doc,new fc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:fP(f.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yl._jsonSchemaVersion="firestore/querySnapshot/1.0",yl._jsonSchema={type:sn("string",yl._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hm(e)}set(e,t,r){this._verifyNotCommitted();const a=Pg(e,this._firestore),l=y1(a.converter,t,r),c=r1(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,En.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=Pg(e,this._firestore);let c;return c=typeof(t=an(t))=="string"||t instanceof cm?a1(this._dataReader,"WriteBatch.update",l._key,t,r,a):s1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pg(e,this._firestore);return this._mutations=this._mutations.concat(new ih(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pg(i,e){if((i=an(i)).firestore!==e)throw new fe(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function wy(i,e,t){i=Wr(i,Kt);const r=Wr(i.firestore,ao),a=y1(i.converter,e,t),l=hm(r);return dm(r,[r1(l,"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,En.none())])}function Oi(i,e,t,...r){i=Wr(i,Kt);const a=Wr(i.firestore,ao),l=hm(a);let c;return c=typeof(e=an(e))=="string"||e instanceof cm?a1(l,"updateDoc",i._key,e,t,r):s1(l,"updateDoc",i._key,e),dm(a,[c.toMutation(i._key,En.exists(!0))])}function _1(i){return dm(Wr(i.firestore,ao),[new ih(i._key,En.none())])}function v1(i,...e){var g,_,E;i=an(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||bS(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(bS(e[r])){const b=e[r];e[r]=(g=b.next)==null?void 0:g.bind(b),e[r+1]=(_=b.error)==null?void 0:_.bind(b),e[r+2]=(E=b.complete)==null?void 0:E.bind(b)}let l,c,f;if(i instanceof Kt)c=Wr(i.firestore,ao),f=Zd(i._key.path),l={next:b=>{e[r]&&e[r](mP(c,i,b))},error:e[r+1],complete:e[r+2]};else{const b=Wr(i,lo);c=Wr(b.firestore,ao),f=b._query;const w=new h1(c);l={next:k=>{e[r]&&e[r](new yl(c,w,b,k))},error:e[r+1],complete:e[r+2]},sP(i._query)}const m=N_(c);return GV(m,f,a,l)}function dm(i,e){const t=N_(i);return KV(t,e)}function mP(i,e,t){const r=t.docs.get(e._key),a=new h1(i);return new Qa(i,a,e._key,r,new fc(t.hasPendingWrites,t.fromCache),e.converter)}function E1(i){return i=Wr(i,ao),N_(i),new dP(i,(e=>dm(i,e)))}(function(e,t=!0){R2(Fl),vl(new Ja("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),f=new ao(new x2(r.getProvider("auth-internal")),new O2(c,r.getProvider("app-check-internal")),yM(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),$s(ES,TS,e),$s(ES,TS,"esm2020")})();const Iy={apiKey:"AIzaSyCMQRCfBaVdJWgqMkaWrBHgHlMX51K7tbM",authDomain:"entrypoint-v2.firebaseapp.com",projectId:"entrypoint-v2",storageBucket:"entrypoint-v2.firebasestorage.app",messagingSenderId:"240107297798",appId:"1:240107297798:web:9e4a6c13a2751aead9b787"},zl=!!Iy.apiKey&&!!Iy.projectId;let dc=null,xt=null;if(zl){const i=fA(Iy);dc=w2(i),xt=XV(i,{localCache:oP({tabManager:hP()})})}const T1=D.createContext(null);function pP({children:i}){const[e,t]=D.useState(null),[r,a]=D.useState(zl);D.useEffect(()=>!zl||!dc?void 0:dN(dc,m=>{t(m),a(!1)}),[]);const l=()=>VN(dc,new Qr),c=()=>mN(dc);return I.jsx(T1.Provider,{value:{user:e,loading:r,signinGoogle:l,logout:c},children:i})}function j_(){return D.useContext(T1)}function gP(){const{signinGoogle:i}=j_(),[e,t]=D.useState(""),[r,a]=D.useState(!1),l=async()=>{t(""),a(!0);try{await i()}catch(c){t(c.message.replace("Firebase: ",""))}finally{a(!1)}};return I.jsxs("div",{className:"auth-container",children:[I.jsxs("div",{className:"auth-header",children:[I.jsx("div",{className:"auth-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"auth-title",children:"Lock-In"})]}),I.jsx("button",{className:"auth-google-btn",onClick:l,disabled:r,children:r?"...":"Sign in with Google"}),e&&I.jsx("div",{className:"auth-error",children:e})]})}function yP({children:i}){const{user:e,loading:t}=j_();return t?I.jsx("div",{className:"loading",children:"loading..."}):e?i:I.jsx(gP,{})}const $a={prayer:{bg:"rgba(34, 139, 34, 0.12)",border:"#22a845",text:"#22a845"},spiritual:{bg:"rgba(234, 179, 8, 0.10)",border:"#ca8a04",text:"#ca8a04"},course:{bg:"rgba(37, 99, 235, 0.10)",border:"#2563eb",text:"#2563eb"},study:{bg:"rgba(8, 145, 178, 0.10)",border:"#0891b2",text:"#0891b2"},work:{bg:"rgba(180, 83, 9, 0.10)",border:"#b45309",text:"#b45309"},project:{bg:"rgba(124, 58, 237, 0.10)",border:"#7c3aed",text:"#7c3aed"},sport:{bg:"rgba(220, 38, 38, 0.10)",border:"#dc2626",text:"#dc2626"},therapy:{bg:"rgba(219, 39, 119, 0.10)",border:"#db2777",text:"#db2777"},rest:{bg:"rgba(100, 116, 139, 0.08)",border:"#64748b",text:"#64748b"},neutral:{bg:"rgba(163, 163, 163, 0.06)",border:"#a3a3a3",text:"#a3a3a3"}},b1=Object.keys($a),_P=b1,vP=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function EP(i){const e=Math.floor(i/60)%24,t=Math.round(i%60),r=e>=12?"PM":"AM";return`${e%12||12}:${String(t).padStart(2,"0")} ${r}`}const Bl=["#2d8a4e","#0055a4","#7c3aed","#b45309","#dc2626","#db2777","#0891b2","#64748b"],S1=()=>{const i={};return vP.forEach(e=>{i[e]={blocks:[]}}),i},z_=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function B_(i){const[e,t,r]=i.split("-").map(Number);return new Date(e,t-1,r)}function q_(i){const e=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0"),r=String(i.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function Ic(){return q_(new Date)}function wS(i){const e=(i.getDay()+6)%7;return z_[e]}function A1(i,e,t){return i>=e&&i<=t}function Od(i){return B_(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function TP(i,e){return`${Od(i)}  ${Od(e)}`}function bP(i){const[e,t,r]=i.split("-");return`${r}-${t}-${e}`}function SP(i,e){const t=B_(i),r=(t.getDay()+6)%7,l=z_.indexOf(e)-r,c=new Date(t);return c.setDate(c.getDate()+l),q_(c)}function AP(i,e){const t=[],r=new Date(i,e,1);for(;r.getMonth()===e;)t.push({iso:q_(r),date:new Date(r)}),r.setDate(r.getDate()+1);return t}const wP=new Date().getFullYear(),IP={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};function IS(i){const e=i.trim().match(/^(\w{3})\s+(\d{1,2})$/);if(!e)return null;const t=IP[e[1]],r=parseInt(e[2],10);if(t==null||isNaN(r))return null;const a=new Date(wP,t,r),l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),f=String(a.getDate()).padStart(2,"0");return`${l}-${c}-${f}`}function RP(i){if(!i)return{startDate:"",endDate:""};const e=i.split(/\u2192|->||/).map(a=>a.trim()),t=IS(e[0]),r=e[1]?IS(e[1]):t;return{startDate:t||"",endDate:r||""}}function CP(i){return{id:i.id||crypto.randomUUID(),activity:i.activity||"",type:i.type||"neutral",icon:i.icon||"",duration:i.duration||60,segment:null,offsetMinutes:0,time:i.time||"08:00",tasks:[]}}function DP(i,e){var c;const{startDate:t,endDate:r}=RP(i.dates),a={},l=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const f of l){const m=(c=i.days)==null?void 0:c[f];a[f]={blocks:((m==null?void 0:m.blocks)||[]).map(CP)}}return{id:i.id||crypto.randomUUID(),label:i.label||`Plan ${e+1}`,color:Bl[e%Bl.length],startDate:t,endDate:r,order:i.order??e,routine:a}}function xP(){const e=localStorage.getItem("entrypoint-v2-tabs");if(!e)return null;try{const t=JSON.parse(e);return!Array.isArray(t)||t.length===0?null:t.map(DP)}catch{return null}}function NP(){const i=!!localStorage.getItem("entrypoint-v2-tabs"),e=!!localStorage.getItem("entrypoint-v2-plans");return i&&!e}const Vd="entrypoint-v2-plans",MP="entrypoint-v2-tabs";function RS(){if(NP()){const i=xP();if(i)return w1(i),i}try{const i=localStorage.getItem(Vd);if(i){const e=JSON.parse(i);if(Array.isArray(e)&&e.length>0)return e}}catch{}return[]}function w1(i){localStorage.setItem(Vd,JSON.stringify(i))}async function OP(i){const e=`entrypoint-v2-migrated-${i}`;if(localStorage.getItem(e))return;let t=null;try{const r=localStorage.getItem(Vd);if(r){const a=JSON.parse(r);Array.isArray(a)&&a.length>0&&(t=a)}}catch{}if(t&&t.length>0){const r=E1(xt);for(const a of t)r.set(cn(xt,"users",i,"plans",a.id),{...a});await r.commit()}localStorage.setItem(e,"1"),localStorage.removeItem(Vd),localStorage.removeItem(MP)}function VP(){const[i,e]=D.useState(()=>RS()),[t,r]=D.useState(()=>{var b;return((b=RS()[0])==null?void 0:b.id)||null}),a=i.find(b=>b.id===t)||i[0]||null;a&&t!==a.id&&r(a.id);const l=D.useCallback(b=>{e(w=>{const k=typeof b=="function"?b(w):b;return w1(k),k})},[]),c=D.useCallback(b=>{const w=crypto.randomUUID(),k={id:w,label:b.label||"New Plan",color:b.color||Bl[0],startDate:b.startDate||"",endDate:b.endDate||"",order:b.order??i.length,routine:b.routine||S1()};return l(x=>[...x,k]),r(w),w},[l,i.length]),f=D.useCallback((b,w)=>{l(k=>k.map(x=>x.id===b?{...x,...w}:x))},[l]),m=D.useCallback(b=>{l(w=>w.filter(k=>k.id!==b)),t===b&&r(null)},[t,l]),g=D.useCallback((b,w,k)=>{const x=b||(a==null?void 0:a.id);x&&l(M=>M.map(U=>U.id===x?{...U,routine:{...U.routine,[w]:{...U.routine[w],blocks:k}}}:U))},[a,l]),_=D.useCallback(b=>i.find(w=>w.startDate&&w.endDate&&A1(b,w.startDate,w.endDate))||null,[i]),E=D.useCallback(b=>{const w=new Set(i.map(x=>x.id)),k=b.filter(x=>!w.has(x.id));k.length!==0&&l(x=>[...x,...k.map((M,U)=>({...M,order:x.length+U}))])},[i,l]);return{plans:i,loading:!1,activePlan:a,activePlanId:t,setActivePlanId:r,createPlan:c,updatePlan:f,deletePlan:m,updateRoutineBlocks:g,getPlanForDate:_,mergePlans:E}}function PP(i){const[e,t]=D.useState([]),[r,a]=D.useState(!0),[l,c]=D.useState(null),f=e.find(k=>k.id===l)||e[0]||null;f&&l!==f.id&&c(f.id),D.useEffect(()=>{if(!i){a(!1);return}OP(i).catch(()=>{});const k=m1(t1(xt,"users",i,"plans"),p1("order"));return v1(k,M=>{t(M.docs.map(U=>({id:U.id,...U.data()}))),a(!1)},()=>a(!1))},[i]),D.useEffect(()=>{e.length>0&&!l&&c(e[0].id)},[e,l]);const m=D.useCallback(async k=>{const x=crypto.randomUUID(),M={id:x,label:k.label||"New Plan",color:k.color||Bl[0],startDate:k.startDate||"",endDate:k.endDate||"",order:k.order??e.length,routine:k.routine||S1()};return await wy(cn(xt,"users",i,"plans",x),M),c(x),x},[i,e.length]),g=D.useCallback(async(k,x)=>{await Oi(cn(xt,"users",i,"plans",k),x)},[i]),_=D.useCallback(async k=>{await _1(cn(xt,"users",i,"plans",k)),l===k&&c(null)},[i,l]),E=D.useCallback(async(k,x,M)=>{const U=k||(f==null?void 0:f.id);U&&await Oi(cn(xt,"users",i,"plans",U),{[`routine.${x}.blocks`]:M})},[i,f]),b=D.useCallback(k=>e.find(x=>x.startDate&&x.endDate&&k>=x.startDate&&k<=x.endDate)||null,[e]),w=D.useCallback(async k=>{const x=new Set(e.map(G=>G.id)),M=k.filter(G=>!x.has(G.id));if(M.length===0)return;const U=E1(xt);M.forEach((G,q)=>{const se={...G,order:e.length+q};U.set(cn(xt,"users",i,"plans",se.id),se)}),await U.commit()},[i,e]);return{plans:e,loading:r,activePlan:f,activePlanId:l,setActivePlanId:c,createPlan:m,updatePlan:g,deletePlan:_,updateRoutineBlocks:E,getPlanForDate:b,mergePlans:w}}function kP(i){return zl&&i?PP(i):VP()}const I1="entrypoint-v2-pipelines";function LP(){try{const i=localStorage.getItem(I1);if(i){const e=JSON.parse(i);if(Array.isArray(e))return e}}catch{}return[]}function UP(i){localStorage.setItem(I1,JSON.stringify(i))}function jP(){const[i,e]=D.useState(()=>LP()),t=D.useCallback(k=>{e(x=>{const M=typeof k=="function"?k(x):k;return UP(M),M})},[]),r=D.useCallback(k=>{const x=crypto.randomUUID(),M={id:x,title:k||"New Section",order:i.length,collapsed:!1,items:[]};return t(U=>[...U,M]),x},[t,i.length]),a=D.useCallback((k,x)=>{t(M=>M.map(U=>U.id===k?{...U,...x}:U))},[t]),l=D.useCallback(k=>{t(x=>x.filter(M=>M.id!==k))},[t]),c=D.useCallback(k=>{t(k.map((x,M)=>({...x,order:M})))},[t]),f=D.useCallback(k=>{t(x=>x.map(M=>M.id===k?{...M,collapsed:!M.collapsed}:M))},[t]),m=D.useCallback((k,x)=>{const M={id:crypto.randomUUID(),icon:"",title:"",description:"",...x};t(U=>U.map(G=>G.id===k?{...G,items:[...G.items||[],M]}:G))},[t]),g=D.useCallback((k,x,M)=>{t(U=>U.map(G=>G.id===k?{...G,items:(G.items||[]).map(q=>q.id===x?{...q,...M}:q)}:G))},[t]),_=D.useCallback((k,x)=>{t(M=>M.map(U=>U.id===k?{...U,items:(U.items||[]).filter(G=>G.id!==x)}:U))},[t]),E=D.useCallback((k,x,M,U)=>{t(G=>{const q=G.find(ae=>ae.id===k);if(!q)return G;const se=(q.items||[]).find(ae=>ae.id===M);return se?G.map(ae=>{if(ae.id===k&&k===x){const Z=(ae.items||[]).filter(C=>C.id!==M);return Z.splice(U,0,se),{...ae,items:Z}}if(ae.id===k)return{...ae,items:(ae.items||[]).filter(Z=>Z.id!==M)};if(ae.id===x){const Z=[...ae.items||[]];return Z.splice(U,0,se),{...ae,items:Z}}return ae}):G})},[t]),b=D.useCallback((k,x)=>{t(M=>M.map(U=>U.id===k?{...U,items:x}:U))},[t]),w=D.useCallback(k=>{const x=new Set(i.map(U=>U.id)),M=k.filter(U=>!x.has(U.id));M.length!==0&&t(U=>[...U,...M.map((G,q)=>({...G,order:U.length+q}))])},[i,t]);return{sections:i,loading:!1,addSection:r,updateSection:a,deleteSection:l,reorderSections:c,toggleCollapse:f,addItem:m,updateItem:g,deleteItem:_,moveItem:E,reorderItems:b,mergeSections:w}}function zP(i){const[e,t]=D.useState([]),[r,a]=D.useState(!0);D.useEffect(()=>{if(!i){a(!1);return}const M=m1(t1(xt,"users",i,"pipelines"),p1("order"));return v1(M,G=>{t(G.docs.map(q=>({id:q.id,...q.data()}))),a(!1)},()=>a(!1))},[i]);const l=D.useCallback(async M=>{const U=crypto.randomUUID(),G={id:U,title:M||"New Section",order:e.length,collapsed:!1,items:[]};return await wy(cn(xt,"users",i,"pipelines",U),G),U},[i,e.length]),c=D.useCallback(async(M,U)=>{await Oi(cn(xt,"users",i,"pipelines",M),U)},[i]),f=D.useCallback(async M=>{await _1(cn(xt,"users",i,"pipelines",M))},[i]),m=D.useCallback(async M=>{for(let U=0;U<M.length;U++)await Oi(cn(xt,"users",i,"pipelines",M[U].id),{order:U})},[i]),g=D.useCallback(async M=>{const U=e.find(G=>G.id===M);U&&await Oi(cn(xt,"users",i,"pipelines",M),{collapsed:!U.collapsed})},[i,e]),_=D.useCallback(async(M,U)=>{const G=e.find(se=>se.id===M);if(!G)return;const q={id:crypto.randomUUID(),icon:"",title:"",description:"",...U};await Oi(cn(xt,"users",i,"pipelines",M),{items:[...G.items||[],q]})},[i,e]),E=D.useCallback(async(M,U,G)=>{const q=e.find(se=>se.id===M);q&&await Oi(cn(xt,"users",i,"pipelines",M),{items:(q.items||[]).map(se=>se.id===U?{...se,...G}:se)})},[i,e]),b=D.useCallback(async(M,U)=>{const G=e.find(q=>q.id===M);G&&await Oi(cn(xt,"users",i,"pipelines",M),{items:(G.items||[]).filter(q=>q.id!==U)})},[i,e]),w=D.useCallback(async(M,U,G,q)=>{const se=e.find(Z=>Z.id===M);if(!se)return;const ae=(se.items||[]).find(Z=>Z.id===G);if(ae)if(M===U){const Z=(se.items||[]).filter(C=>C.id!==G);Z.splice(q,0,ae),await Oi(cn(xt,"users",i,"pipelines",M),{items:Z})}else{const Z=e.find(N=>N.id===U);if(!Z)return;const C=(se.items||[]).filter(N=>N.id!==G),S=[...Z.items||[]];S.splice(q,0,ae),await Oi(cn(xt,"users",i,"pipelines",M),{items:C}),await Oi(cn(xt,"users",i,"pipelines",U),{items:S})}},[i,e]),k=D.useCallback(async(M,U)=>{await Oi(cn(xt,"users",i,"pipelines",M),{items:U})},[i]),x=D.useCallback(async M=>{const U=new Set(e.map(q=>q.id)),G=M.filter(q=>!U.has(q.id));if(G.length!==0)for(let q=0;q<G.length;q++){const se={...G[q],order:e.length+q};await wy(cn(xt,"users",i,"pipelines",se.id),se)}},[i,e]);return{sections:e,loading:r,addSection:l,updateSection:c,deleteSection:f,reorderSections:m,toggleCollapse:g,addItem:_,updateItem:E,deleteItem:b,moveItem:w,reorderItems:k,mergeSections:x}}function BP(i){return zl&&i?zP(i):jP()}function qP(){const[i,e]=D.useState(Ic()),t=Ic(),[r,a]=D.useState(()=>new Date().getFullYear()),[l,c]=D.useState(()=>new Date().getMonth()),f=D.useCallback(()=>{c(E=>E===0?(a(b=>b-1),11):E-1)},[]),m=D.useCallback(()=>{c(E=>E===11?(a(b=>b+1),0):E+1)},[]),g=D.useCallback(()=>{const E=new Date;a(E.getFullYear()),c(E.getMonth()),e(Ic())},[]),_=D.useCallback((E,b)=>{a(E),c(b)},[]);return{selectedDate:i,setSelectedDate:e,today:t,viewYear:r,setViewYear:a,viewMonth:l,setViewMonth:c,prevMonth:f,nextMonth:m,goToday:g,setViewYearMonth:_}}const R1="entrypoint-v2-custom-types",FP=["#0d9488","#84cc16","#e11d48","#6366f1","#f97316","#06b6d4","#a21caf","#65a30d","#be185d","#1d4ed8","#c026d3","#ea580c","#0f766e","#4f46e5","#15803d","#9333ea"],HP=new Set(Object.values($a).map(i=>i.border.toLowerCase())),kg=FP.filter(i=>!HP.has(i.toLowerCase()));function GP(i){if(i.startsWith("hsl"))return{bg:i.replace(")",", 0.10)").replace("hsl(","hsla("),border:i,text:i};const e=parseInt(i.slice(1,3),16),t=parseInt(i.slice(3,5),16),r=parseInt(i.slice(5,7),16);return{bg:`rgba(${e}, ${t}, ${r}, 0.10)`,border:i,text:i}}function KP(i){if(i<kg.length)return kg[i];const e=((i-kg.length)*137.5+30)%360;return`hsl(${Math.round(e)}, 65%, 50%)`}function YP(){try{const i=localStorage.getItem(R1);return i?JSON.parse(i).map(t=>({key:t.key,name:t.name})):[]}catch{return[]}}function Lg(i){localStorage.setItem(R1,JSON.stringify(i.map(e=>({key:e.key,name:e.name}))))}function QP(){const[i,e]=D.useState(YP),t=D.useMemo(()=>i.map((f,m)=>{const g=KP(m);return{...f,color:g,colors:GP(g)}}),[i]),r=D.useCallback(f=>{const m=f.toLowerCase().replace(/\s+/g,"-");return e(g=>{if(g.find(E=>E.key===m))return g;const _=[...g,{key:m,name:f}];return Lg(_),_}),m},[]),a=D.useCallback(f=>{e(m=>{const g=m.filter(_=>_.key!==f);return Lg(g),g})},[]),l=D.useCallback(f=>{e(m=>{const g=new Set(m.map(b=>b.key)),_=f.filter(b=>!g.has(b.key));if(_.length===0)return m;const E=[...m,..._.map(b=>({key:b.key,name:b.name}))];return Lg(E),E})},[]),c=D.useMemo(()=>t.reduce((f,m)=>(f[m.key]=m.colors,f),{}),[t]);return{customTypes:t,customTypeColors:c,addCustomType:r,removeCustomType:a,mergeCustomTypes:l}}const C1="entrypoint-v2-location";function $P(){try{const i=localStorage.getItem(C1);return i?JSON.parse(i):null}catch{return null}}function CS(i){localStorage.setItem(C1,JSON.stringify(i))}async function XP(i,e){const a=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${i}&lon=${e}&format=json&accept-language=en`)).json()).address||{},l=a.city||a.town||a.village||a.county||"Unknown",c=a.country||"Unknown";return{city:l,country:c}}function JP(){const[i,e]=D.useState($P),[t,r]=D.useState(!1),[a,l]=D.useState(!1),c=D.useCallback(f=>{CS(f),e(f),l(!1)},[]);return D.useEffect(()=>{if(!i){if(!navigator.geolocation){l(!0);return}r(!0),navigator.geolocation.getCurrentPosition(async f=>{try{const{latitude:m,longitude:g}=f.coords,{city:_,country:E}=await XP(m,g),b={city:_,country:E,lat:m,lng:g};CS(b),e(b)}catch{l(!0)}finally{r(!1)}},()=>{l(!0),r(!1)},{timeout:1e4})}},[i]),{location:i,setLocation:c,hasLocation:!!i,detecting:t,geoFailed:a}}function D1({title:i,message:e,confirmLabel:t="Delete",onConfirm:r,onClose:a}){return D.useEffect(()=>{const l=c=>{c.key==="Escape"&&a()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[a]),I.jsx("div",{className:"modal-overlay",onClick:a,children:I.jsxs("div",{className:"modal",onClick:l=>l.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:i}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 20px",lineHeight:1.5},children:e}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{className:"btn-secondary",onClick:a,children:"Cancel"}),I.jsx("button",{className:"btn-danger",onClick:r,children:t})]})]})})}function WP({plans:i,activePlanId:e,onSelect:t,onCreate:r,onEdit:a,onDelete:l}){const[c,f]=D.useState(null),[m,g]=D.useState(null),_=D.useRef(null);D.useEffect(()=>{if(!c)return;const w=k=>{k.key==="Escape"&&f(null)};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[c]);const E=(w,k)=>{w.preventDefault(),f({x:w.clientX,y:w.clientY,plan:k})},b=w=>{const k=_.current;k&&k.scrollWidth>k.clientWidth&&(w.preventDefault(),k.scrollLeft+=w.deltaY)};return I.jsxs("div",{className:"plan-sidebar",children:[I.jsxs("div",{className:"plan-list",ref:_,onWheel:b,children:[i.map(w=>I.jsxs("button",{className:`plan-item ${w.id===e?"active":""}`,onClick:()=>t(w.id),onContextMenu:k=>E(k,w),children:[I.jsx("span",{className:"plan-dot",style:{background:w.color}}),I.jsxs("div",{className:"plan-info",children:[I.jsx("span",{className:"plan-label",children:w.label}),w.startDate&&w.endDate&&I.jsx("span",{className:"plan-dates",children:TP(w.startDate,w.endDate)})]})]},w.id)),I.jsx("button",{className:"plan-item plan-add",onClick:r,children:"+ New Plan"})]}),c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:()=>f(null)}),I.jsxs("div",{className:"context-menu",style:{top:c.y,left:c.x},children:[I.jsx("button",{onClick:()=>{a(c.plan),f(null)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{g(c.plan),f(null)},children:"Delete"})]})]}),m&&I.jsx(D1,{title:"Delete Plan",message:`Delete "${m.label}"? This cannot be undone.`,onConfirm:()=>{l(m.id),g(null)},onClose:()=>g(null)})]})}function ZP(i,e,t,r){if(!i||!e)return null;for(const a of t)if(a.id!==r&&!(!a.startDate||!a.endDate)&&i<=a.endDate&&e>=a.startDate)return a;return null}function DS({plan:i,plans:e=[],onSave:t,onClose:r}){const a=!!i,[l,c]=D.useState((i==null?void 0:i.label)||""),[f,m]=D.useState((i==null?void 0:i.color)||Bl[0]),[g,_]=D.useState((i==null?void 0:i.startDate)||""),[E,b]=D.useState((i==null?void 0:i.endDate)||""),[w,k]=D.useState(""),x=M=>{if(M.preventDefault(),k(""),E<g){k("End date must be after start date.");return}const U=ZP(g,E,e,i==null?void 0:i.id);if(U){k(`Overlaps with "${U.label}" (${U.startDate}  ${U.endDate}).`);return}t({label:l.trim(),color:f,startDate:g,endDate:E})};return I.jsx("div",{className:"modal-overlay",onClick:r,onKeyDown:M=>{M.key==="Escape"&&r()},children:I.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),children:[I.jsx("h3",{className:"modal-title",children:a?"Edit Plan":"New Plan"}),I.jsxs("form",{onSubmit:x,className:"modal-form",children:[I.jsxs("label",{className:"modal-label",children:["Label",I.jsx("input",{className:"modal-input",value:l,onChange:M=>c(M.target.value),placeholder:"e.g. Ramadan",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start Date",I.jsx("input",{className:"modal-input",type:"date",value:g,onChange:M=>_(M.target.value),required:!0})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End Date",I.jsx("input",{className:"modal-input",type:"date",value:E,onChange:M=>b(M.target.value),required:!0})]})]}),w&&I.jsx("div",{className:"plan-error",children:w}),I.jsxs("div",{className:"modal-label",children:["Color",I.jsx("div",{className:"color-grid",children:Bl.map(M=>I.jsx("button",{type:"button",className:`color-btn ${f===M?"active":""}`,style:{background:M},onClick:()=>m(M)},M))})]}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{type:"button",className:"btn-secondary",onClick:r,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const e4=["January","February","March","April","May","June","July","August","September","October","November","December"],t4=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function n4({viewYear:i,viewMonth:e,selectedDate:t,today:r,plans:a,highlightDate:l,onPrevMonth:c,onNextMonth:f,onGoToday:m,onSelectDate:g,onPlanClick:_}){const E=D.useMemo(()=>{const w=AP(i,e),k=(w[0].date.getDay()+6)%7;return[...Array.from({length:k},()=>null),...w]},[i,e]),b=D.useMemo(()=>{const w={};for(const k of E){if(!k)continue;const x=a.find(M=>M.startDate&&M.endDate&&A1(k.iso,M.startDate,M.endDate));x&&(w[k.iso]=x)}return w},[E,a]);return I.jsxs("div",{className:"calendar-view",children:[I.jsxs("div",{className:"cal-header",children:[I.jsx("button",{className:"cal-nav",onClick:c,children:""}),I.jsxs("div",{className:"cal-title",children:[I.jsx("span",{className:"cal-month",children:e4[e]}),I.jsx("span",{className:"cal-year",children:i})]}),I.jsx("button",{className:"cal-nav",onClick:f,children:""}),I.jsx("button",{className:"cal-today-btn",onClick:m,children:"Today"})]}),I.jsxs("div",{className:"cal-grid",children:[t4.map(w=>I.jsx("div",{className:"cal-dow",children:w},w)),E.map((w,k)=>{if(!w)return I.jsx("div",{className:"cal-cell cal-blank"},`blank-${k}`);const x=b[w.iso],M=w.iso===r,U=w.iso===t,G=w.iso===l;return I.jsxs("button",{className:`cal-cell ${M?"cal-today":""} ${U?"cal-selected":""} ${x?"cal-has-plan":""} ${G?"cal-highlight":""}`,style:x?{"--plan-color":x.color}:void 0,onClick:()=>g(w.iso),children:[I.jsx("span",{className:"cal-day-num",children:w.date.getDate()}),x&&I.jsx("span",{className:"cal-plan-dot",style:{background:x.color}})]},w.iso)})]}),a.length>0&&I.jsx("div",{className:"cal-plan-legend",children:a.filter(w=>w.startDate&&w.endDate).map(w=>I.jsxs("button",{className:"cal-plan-chip",onClick:()=>_==null?void 0:_(w),children:[I.jsx("span",{className:"cal-plan-chip-dot",style:{background:w.color}}),I.jsx("span",{children:w.label})]},w.id))})]})}const yr=60,hl=5,rl=15,qf=52,xS=8;function sl(i){return Math.max(0,Math.min(1435,Math.round(i/hl)*hl))}function _r(i){return i=Math.round(i),`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function sc(i){return i=Math.round(i),i<=0?null:i>=60?`${Math.floor(i/60)}h${i%60?` ${i%60}m`:""}`:`${i}m`}function NS({block:i,top:e,height:t,col:r=0,totalCols:a=1,isNew:l,isPrayer:c,extraTypeColors:f={},onEdit:m,onDelete:g,onCopy:_,onTimeChange:E,onResize:b,onToggleTask:w}){var Pt;const k=D.useRef(null),x=D.useRef(null),M=D.useRef(null),U=D.useRef(null),G=D.useRef(null),q=D.useRef(null),se=D.useRef(null),[ae,Z]=D.useState(null),C=$a[i.type]||f[i.type]||$a.neutral,S=c?"#2d8a4e":C.text==="#94a3b8"?"#b0b0ba":C.text,N=i.type==="prayer"||c?600:400,V=e/yr*60,O=i.duration||t/yr*60,j=_r(Math.min(V+O,1440)),P=i.time,Ae=`calc(100% - ${qf}px - ${xS}px)`,Me=`calc((${Ae}) / ${a})`,X=`calc(${qf}px + (${Ae}) * ${r} / ${a})`,ue=D.useCallback((J,pe)=>{const Te=k.current,ke=x.current;if(Te){if(pe==="move"){const Oe=e+J;Te.style.top=`${Oe}px`,Te.style.left=`${qf}px`,Te.style.width=`calc(100% - ${qf}px - ${xS}px)`,Te.style.zIndex="10000",Te.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Te.style.opacity="0.85",Te.style.cursor="grabbing";const Ie=sl((e+J)/yr*60);ke&&(ke.textContent=`${_r(Ie)}  ${_r(Math.min(Ie+O,1440))}`)}else if(pe==="top"){const Oe=e+J,Ie=Math.max(t-J,rl/60*yr);Te.style.top=`${Oe}px`,Te.style.height=`${Math.max(Ie,24)}px`,Te.style.zIndex="10000",Te.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Te.style.opacity="0.85";const Ue=sl(V+J/yr*60),jt=Math.max(rl,Math.round((V+O-Ue)/hl)*hl);ke&&(ke.textContent=`${_r(Ue)}  ${_r(Math.min(V+O,1440))}`),M.current&&(M.current.textContent=sc(jt)||"")}else if(pe==="bottom"){const Oe=Math.max(t+J,rl/60*yr);Te.style.height=`${Math.max(Oe,24)}px`,Te.style.zIndex="10000",Te.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Te.style.opacity="0.85";const Ie=Math.max(rl,sl(O+J/yr*60)),Ue=V+Ie;ke&&(ke.textContent=`${_r(V)}  ${_r(Math.min(Ue,1440))}`),M.current&&(M.current.textContent=sc(Ie)||"")}}},[e,t,V,O]),_e=D.useCallback(()=>{const J=k.current;if(!J)return;J.style.top=`${e}px`,J.style.height=`${Math.max(t,24)}px`,J.style.left=X,J.style.width=Me,J.style.zIndex=c?"10":String(Math.ceil(e)+1),J.style.boxShadow="none",J.style.opacity="1",J.style.cursor=c?"default":"pointer";const pe=t<36;x.current&&(x.current.textContent=pe?P:`${P}  ${j}`),M.current&&(M.current.textContent=sc(O)||"")},[e,t,X,Me,P,j,c,O]);D.useEffect(()=>{const J=t<36;x.current&&(x.current.textContent=J?P:`${P}  ${j}`),M.current&&(M.current.textContent=sc(O)||"")},[P,j,t,O]);const De=300,Be=10,z=J=>{if(c||J.button!==0)return;if(J.pointerType==="touch"){const Te=J.pointerId,ke=J.clientY;q.current={startY:ke,tid:setTimeout(()=>{var Ie;q.current=null;const Oe=Ue=>Ue.preventDefault();document.addEventListener("touchmove",Oe,{passive:!1}),se.current=Oe,U.current={y:ke,mode:"move",moved:!1,touch:!0},(Ie=k.current)==null||Ie.setPointerCapture(Te)},De)}}else U.current={y:J.clientY,mode:"move",moved:!1,touch:!1},k.current.setPointerCapture(J.pointerId)},ne=J=>{if(q.current){Math.abs(J.clientY-q.current.startY)>Be&&(clearTimeout(q.current.tid),q.current=null);return}if(!U.current)return;const pe=J.clientY-U.current.y;!U.current.moved&&Math.abs(pe)>4&&(U.current.moved=!0),U.current.moved&&(G.current&&cancelAnimationFrame(G.current),G.current=requestAnimationFrame(()=>ue(pe,U.current.mode)))},Q=J=>{if(q.current){clearTimeout(q.current.tid),q.current=null,J.pointerType==="touch"&&!c&&m(i);return}if(!U.current)return;se.current&&(document.removeEventListener("touchmove",se.current),se.current=null);const pe=J.clientY-U.current.y,{mode:Te,moved:ke}=U.current;if(U.current=null,G.current&&cancelAnimationFrame(G.current),_e(),!ke){c||m(i);return}if(Te==="move"){const Oe=sl((e+pe)/yr*60);E(i.id,_r(Oe))}else if(Te==="top"){const Oe=sl(V+pe/yr*60),Ie=Math.max(rl,Math.round((V+O-Oe)/hl)*hl);b(i.id,_r(Oe),Ie)}else if(Te==="bottom"){const Oe=Math.max(rl,sl(O+pe/yr*60));b(i.id,_r(V),Oe)}},he=()=>{q.current&&(clearTimeout(q.current.tid),q.current=null),U.current&&(U.current=null,_e()),se.current&&(document.removeEventListener("touchmove",se.current),se.current=null)},ge=J=>pe=>{if(c||(pe.stopPropagation(),pe.button!==0))return;if(pe.pointerType==="touch"){const ke=pe.pointerId,Oe=pe.clientY;q.current={startY:Oe,tid:setTimeout(()=>{var Ue;q.current=null;const Ie=jt=>jt.preventDefault();document.addEventListener("touchmove",Ie,{passive:!1}),se.current=Ie,U.current={y:Oe,mode:J,moved:!0,touch:!0},(Ue=pe.target)==null||Ue.setPointerCapture(ke)},De)}}else U.current={y:pe.clientY,mode:J,moved:!0,touch:!1},pe.target.setPointerCapture(pe.pointerId)},ye=J=>{c||(J.preventDefault(),J.stopPropagation(),Z({x:J.clientX,y:J.clientY}))},xe=()=>Z(null);D.useEffect(()=>{if(!ae)return;const J=pe=>{pe.key==="Escape"&&xe()};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[ae]);const Ge=!c&&((Pt=i.tasks)==null?void 0:Pt.length)>0,Pe=Ge?i.tasks.filter(J=>J.done).length:0,je=t<36,Mt=Ge&&t>=60,vt=c?null:sc(O);return I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:k,className:`timeline-block ${l?"new-block":""} ${c?"prayer-block":""}`,style:{top:e,height:Math.max(t,24),left:X,width:Me,right:"auto",background:c?"rgba(34, 139, 34, 0.10)":C.bg,borderLeft:`3px solid ${c?"#2d8a4e":C.border}`,zIndex:c?10:Math.ceil(e)+1,cursor:c?"default":"pointer",transition:"box-shadow 0.15s"},onPointerDown:z,onPointerMove:ne,onPointerUp:Q,onPointerCancel:he,onContextMenu:ye,children:[!c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"resize-handle resize-handle-top",onPointerDown:ge("top"),onPointerMove:ne,onPointerUp:Q}),I.jsx("div",{className:"resize-handle resize-handle-bottom",onPointerDown:ge("bottom"),onPointerMove:ne,onPointerUp:Q})]}),je?I.jsxs("div",{className:"block-compact",children:[I.jsx("span",{ref:x,className:"block-time-sm",children:P}),I.jsx("span",{className:"block-icon-sm",children:i.icon}),I.jsx("span",{className:"block-act-sm",style:{color:S,fontWeight:N},children:i.activity}),Ge&&I.jsxs("span",{className:"block-task-badge",children:[Pe,"/",i.tasks.length]}),vt&&I.jsx("span",{ref:M,className:"block-duration",children:vt})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:x,className:"block-time-sm",children:[P,"  ",j]}),I.jsxs("div",{className:"block-row",children:[I.jsx("span",{className:"block-icon-sm",children:i.icon}),I.jsx("span",{className:"block-act",style:{color:S,fontWeight:N},children:i.activity}),Ge&&!Mt&&I.jsxs("span",{className:"block-task-badge",children:[Pe,"/",i.tasks.length]}),vt&&I.jsx("span",{ref:M,className:"block-duration",children:vt})]}),Mt&&I.jsx("div",{className:"block-tasks",onWheel:J=>{const pe=J.currentTarget;pe.scrollHeight>pe.clientHeight&&J.stopPropagation()},children:i.tasks.map(J=>I.jsxs("label",{className:`block-task-item ${J.done?"done":""}`,onPointerDown:pe=>pe.stopPropagation(),onClick:pe=>pe.stopPropagation(),children:[I.jsx("input",{type:"checkbox",checked:J.done,onChange:()=>w==null?void 0:w(i.id,J.id)}),I.jsx("span",{children:J.text})]},J.id))})]})]}),ae&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:J=>{J.stopPropagation(),xe()}}),I.jsxs("div",{className:"context-menu",style:{top:ae.y,left:ae.x},onClick:J=>J.stopPropagation(),children:[I.jsx("button",{onClick:()=>{xe(),m(i)},children:"Edit"}),I.jsx("button",{onClick:()=>{xe(),_==null||_(i)},children:"Copy"}),I.jsx("button",{className:"danger",onClick:()=>{xe(),g(i.id)},children:"Delete"})]})]})]})}const i4=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function MS(i){return`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function r4({block:i,defaultTime:e,segments:t,onSave:r,onDelete:a,onClose:l,customTypes:c=[],customTypeColors:f={},onAddCustomType:m,onRemoveCustomType:g}){D.useEffect(()=>{if(!i)return;const Q=he=>{he.key==="Delete"&&(he.preventDefault(),a(i.id))};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[i,a]);const _=!!i,E=(i==null?void 0:i.time)||e||"08:00",b=(i==null?void 0:i.duration)||60,[w,k]=D.useState(E),[x,M]=D.useState(()=>{const[Q,he]=E.split(":").map(Number),ge=Q*60+he+b;return MS(ge)}),[U,G]=D.useState((i==null?void 0:i.activity)||""),[q,se]=D.useState((i==null?void 0:i.type)||"neutral"),[ae,Z]=D.useState((i==null?void 0:i.icon)||""),[C,S]=D.useState((i==null?void 0:i.tasks)||[]),[N,V]=D.useState(""),[O,j]=D.useState(!1),[P,Ae]=D.useState(!1),[Me,X]=D.useState(""),ue=new Set(c.map(Q=>Q.key)),_e=[..._P,...c.map(Q=>Q.key)],De={...$a,...f},Be=De[q]||$a.neutral,z=()=>{const[Q,he]=w.split(":").map(Number),[ge,ye]=x.split(":").map(Number);return Math.max(5,ge*60+ye-(Q*60+he))},ne=Q=>{Q.preventDefault(),r({id:(i==null?void 0:i.id)||crypto.randomUUID(),time:w,activity:U.trim(),type:q,icon:ae,duration:z(),segment:null,offsetMinutes:0,tasks:C})};return I.jsx("div",{className:"modal-overlay",onClick:l,onKeyDown:Q=>{Q.key==="Escape"&&l()},children:I.jsxs("div",{className:"modal",onClick:Q=>{Q.stopPropagation(),O&&j(!1)},children:[I.jsx("h3",{className:"modal-title",children:_?"Edit Block":"Add Block"}),I.jsxs("form",{onSubmit:ne,className:"modal-form",children:[I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start",I.jsx("input",{className:"modal-input",value:w,onChange:Q=>{const he=Q.target.value;k(he);const[ge,ye]=w.split(":").map(Number),[xe,Ge]=x.split(":").map(Number),Pe=xe*60+Ge-(ge*60+ye);if(Pe>0&&/^\d{2}:\d{2}$/.test(he)){const[je,Mt]=he.split(":").map(Number);M(MS(je*60+Mt+Pe))}},placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End",I.jsx("input",{className:"modal-input",value:x,onChange:Q=>M(Q.target.value),placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]})]}),I.jsxs("label",{className:"modal-label",children:["Activity",I.jsx("input",{className:"modal-input",value:U,onChange:Q=>G(Q.target.value),placeholder:"e.g. Quran revision",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-label",children:["Type",I.jsxs("div",{className:"modal-row",style:{gap:6,alignItems:"center"},children:[I.jsxs("div",{className:"type-picker",style:{flex:1},onClick:Q=>Q.stopPropagation(),children:[I.jsxs("button",{type:"button",className:"type-picker-btn",onClick:()=>j(Q=>!Q),children:[I.jsx("span",{className:"type-color-dot",style:{background:Be.border}}),I.jsx("span",{children:q.charAt(0).toUpperCase()+q.slice(1).replace(/-/g," ")}),I.jsx("span",{className:"type-picker-arrow",children:O?"":""})]}),O&&I.jsx("div",{className:"type-dropdown",children:_e.map(Q=>{const he=De[Q]||$a.neutral,ge=ue.has(Q);return I.jsxs("div",{className:`type-dropdown-item${Q===q?" active":""}`,children:[I.jsxs("button",{type:"button",className:"type-dropdown-select",onClick:()=>{se(Q),j(!1)},children:[I.jsx("span",{className:"type-color-dot",style:{background:he.border}}),I.jsx("span",{children:Q.charAt(0).toUpperCase()+Q.slice(1).replace(/-/g," ")})]}),ge&&g&&I.jsx("button",{type:"button",className:"type-delete-btn",onClick:()=>{g(Q),q===Q&&se("neutral")},children:""})]},Q)})})]}),I.jsx("button",{type:"button",className:"btn-add-type",onClick:()=>Ae(Q=>!Q),title:"Add custom type",children:"+"})]})]}),P&&I.jsxs("div",{className:"new-type-form",children:[I.jsx("input",{className:"modal-input",placeholder:"Type name",value:Me,onChange:Q=>X(Q.target.value),onKeyDown:Q=>{if(Q.key==="Enter"&&Me.trim()&&m){Q.preventDefault();const he=m(Me.trim());se(he),X(""),Ae(!1)}}}),I.jsx("button",{type:"button",className:"btn-primary btn-sm",disabled:!Me.trim(),onClick:()=>{if(!Me.trim()||!m)return;const Q=m(Me.trim());se(Q),X(""),Ae(!1)},children:"Add"})]}),I.jsxs("div",{className:"modal-label",children:["Icon",I.jsx("div",{className:"icon-grid",children:i4.map(Q=>I.jsx("button",{type:"button",className:`icon-btn ${ae===Q?"active":""}`,onClick:()=>Z(Q),children:Q},Q))})]}),I.jsxs("div",{className:"modal-label",children:["Tasks",I.jsxs("div",{className:"task-list-editor",children:[C.map((Q,he)=>I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{type:"checkbox",checked:Q.done,onChange:()=>{const ge=[...C];ge[he]={...Q,done:!Q.done},S(ge)}}),I.jsx("input",{className:`modal-input task-edit-input${Q.done?" task-done":""}`,value:Q.text,onChange:ge=>{const ye=[...C];ye[he]={...Q,text:ge.target.value},S(ye)}}),I.jsx("button",{type:"button",className:"task-remove-btn",onClick:()=>S(C.filter((ge,ye)=>ye!==he)),children:""})]},Q.id)),I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{className:"modal-input task-edit-input",placeholder:"Add task...",value:N,onChange:Q=>V(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&N.trim()&&(Q.preventDefault(),S([...C,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),V(""))}}),I.jsx("button",{type:"button",className:"task-add-btn",disabled:!N.trim(),onClick:()=>{N.trim()&&(S([...C,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),V(""))},children:"+"})]})]})]}),I.jsxs("div",{className:"modal-actions",children:[_&&I.jsx("button",{type:"button",className:"btn-danger",onClick:()=>a(i.id),children:"Delete"}),I.jsx("div",{style:{flex:1}}),I.jsx("button",{type:"button",className:"btn-secondary",onClick:l,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}var mc=JS();function s4(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return D.useMemo(()=>r=>{e.forEach(a=>a(r))},e)}const mm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Jl(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function F_(i){return"nodeType"in i}function Kn(i){var e,t;return i?Jl(i)?i:F_(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function H_(i){const{Document:e}=Kn(i);return i instanceof e}function lh(i){return Jl(i)?!1:i instanceof Kn(i).HTMLElement}function x1(i){return i instanceof Kn(i).SVGElement}function Wl(i){return i?Jl(i)?i.document:F_(i)?H_(i)?i:lh(i)||x1(i)?i.ownerDocument:document:document:document}const Xi=mm?D.useLayoutEffect:D.useEffect;function pm(i){const e=D.useRef(i);return Xi(()=>{e.current=i}),D.useCallback(function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.current==null?void 0:e.current(...r)},[])}function a4(){const i=D.useRef(null),e=D.useCallback((r,a)=>{i.current=setInterval(r,a)},[]),t=D.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function Kc(i,e){e===void 0&&(e=[i]);const t=D.useRef(i);return Xi(()=>{t.current!==i&&(t.current=i)},e),t}function uh(i,e){const t=D.useRef();return D.useMemo(()=>{const r=i(t.current);return t.current=r,r},[...e])}function Pd(i){const e=pm(i),t=D.useRef(null),r=D.useCallback(a=>{a!==t.current&&(e==null||e(a,t.current)),t.current=a},[]);return[t,r]}function kd(i){const e=D.useRef();return D.useEffect(()=>{e.current=i},[i]),e.current}let Ug={};function ch(i,e){return D.useMemo(()=>{if(e)return e;const t=Ug[i]==null?0:Ug[i]+1;return Ug[i]=t,i+"-"+t},[i,e])}function N1(i){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((l,c)=>{const f=Object.entries(c);for(const[m,g]of f){const _=l[m];_!=null&&(l[m]=_+i*g)}return l},{...e})}}const _l=N1(1),Ld=N1(-1);function o4(i){return"clientX"in i&&"clientY"in i}function gm(i){if(!i)return!1;const{KeyboardEvent:e}=Kn(i.target);return e&&i instanceof e}function l4(i){if(!i)return!1;const{TouchEvent:e}=Kn(i.target);return e&&i instanceof e}function Ud(i){if(l4(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return o4(i)?{x:i.clientX,y:i.clientY}:null}const ra=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[ra.Translate.toString(i),ra.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:r}=i;return e+" "+t+"ms "+r}}}),OS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function u4(i){return i.matches(OS)?i:i.querySelector(OS)}const c4={display:"none"};function h4(i){let{id:e,value:t}=i;return Ot.createElement("div",{id:e,style:c4},t)}function f4(i){let{id:e,announcement:t,ariaLiveType:r="assertive"}=i;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ot.createElement("div",{id:e,style:a,role:"status","aria-live":r,"aria-atomic":!0},t)}function d4(){const[i,e]=D.useState("");return{announce:D.useCallback(r=>{r!=null&&e(r)},[]),announcement:i}}const M1=D.createContext(null);function m4(i){const e=D.useContext(M1);D.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function p4(){const[i]=D.useState(()=>new Set),e=D.useCallback(r=>(i.add(r),()=>i.delete(r)),[i]);return[D.useCallback(r=>{let{type:a,event:l}=r;i.forEach(c=>{var f;return(f=c[a])==null?void 0:f.call(c,l)})},[i]),e]}const g4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},y4={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function _4(i){let{announcements:e=y4,container:t,hiddenTextDescribedById:r,screenReaderInstructions:a=g4}=i;const{announce:l,announcement:c}=d4(),f=ch("DndLiveRegion"),[m,g]=D.useState(!1);if(D.useEffect(()=>{g(!0)},[]),m4(D.useMemo(()=>({onDragStart(E){let{active:b}=E;l(e.onDragStart({active:b}))},onDragMove(E){let{active:b,over:w}=E;e.onDragMove&&l(e.onDragMove({active:b,over:w}))},onDragOver(E){let{active:b,over:w}=E;l(e.onDragOver({active:b,over:w}))},onDragEnd(E){let{active:b,over:w}=E;l(e.onDragEnd({active:b,over:w}))},onDragCancel(E){let{active:b,over:w}=E;l(e.onDragCancel({active:b,over:w}))}}),[l,e])),!m)return null;const _=Ot.createElement(Ot.Fragment,null,Ot.createElement(h4,{id:r,value:a.draggable}),Ot.createElement(f4,{id:f,announcement:c}));return t?mc.createPortal(_,t):_}var hn;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(hn||(hn={}));function jd(){}function VS(i,e){return D.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function v4(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return D.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Ji=Object.freeze({x:0,y:0});function E4(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function T4(i,e){const t=Ud(i);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function b4(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return t-r}function S4(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return r-t}function A4(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function PS(i,e,t){return e===void 0&&(e=i.left),t===void 0&&(t=i.top),{x:e+i.width*.5,y:t+i.height*.5}}const w4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const a=PS(e,e.left,e.top),l=[];for(const c of r){const{id:f}=c,m=t.get(f);if(m){const g=E4(PS(m),a);l.push({id:f,data:{droppableContainer:c,value:g}})}}return l.sort(b4)};function I4(i,e){const t=Math.max(e.top,i.top),r=Math.max(e.left,i.left),a=Math.min(e.left+e.width,i.left+i.width),l=Math.min(e.top+e.height,i.top+i.height),c=a-r,f=l-t;if(r<a&&t<l){const m=e.width*e.height,g=i.width*i.height,_=c*f,E=_/(m+g-_);return Number(E.toFixed(4))}return 0}const R4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const a=[];for(const l of r){const{id:c}=l,f=t.get(c);if(f){const m=I4(f,e);m>0&&a.push({id:c,data:{droppableContainer:l,value:m}})}}return a.sort(S4)};function C4(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function O1(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:Ji}function D4(i){return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((c,f)=>({...c,top:c.top+i*f.y,bottom:c.bottom+i*f.y,left:c.left+i*f.x,right:c.right+i*f.x}),{...t})}}const x4=D4(1);function V1(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function N4(i,e,t){const r=V1(e);if(!r)return i;const{scaleX:a,scaleY:l,x:c,y:f}=r,m=i.left-c-(1-a)*parseFloat(t),g=i.top-f-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),_=a?i.width/a:i.width,E=l?i.height/l:i.height;return{width:_,height:E,top:g,right:m+_,bottom:g+E,left:m}}const M4={ignoreTransform:!1};function Zl(i,e){e===void 0&&(e=M4);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:g,transformOrigin:_}=Kn(i).getComputedStyle(i);g&&(t=N4(t,g,_))}const{top:r,left:a,width:l,height:c,bottom:f,right:m}=t;return{top:r,left:a,width:l,height:c,bottom:f,right:m}}function kS(i){return Zl(i,{ignoreTransform:!0})}function O4(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function V4(i,e){return e===void 0&&(e=Kn(i).getComputedStyle(i)),e.position==="fixed"}function P4(i,e){e===void 0&&(e=Kn(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=e[a];return typeof l=="string"?t.test(l):!1})}function G_(i,e){const t=[];function r(a){if(e!=null&&t.length>=e||!a)return t;if(H_(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!lh(a)||x1(a)||t.includes(a))return t;const l=Kn(i).getComputedStyle(a);return a!==i&&P4(a,l)&&t.push(a),V4(a,l)?t:r(a.parentNode)}return i?r(i):t}function P1(i){const[e]=G_(i,1);return e??null}function jg(i){return!mm||!i?null:Jl(i)?i:F_(i)?H_(i)||i===Wl(i).scrollingElement?window:lh(i)?i:null:null}function k1(i){return Jl(i)?i.scrollX:i.scrollLeft}function L1(i){return Jl(i)?i.scrollY:i.scrollTop}function Ry(i){return{x:k1(i),y:L1(i)}}var vn;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(vn||(vn={}));function U1(i){return!mm||!i?!1:i===document.scrollingElement}function j1(i){const e={x:0,y:0},t=U1(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},r={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},a=i.scrollTop<=e.y,l=i.scrollLeft<=e.x,c=i.scrollTop>=r.y,f=i.scrollLeft>=r.x;return{isTop:a,isLeft:l,isBottom:c,isRight:f,maxScroll:r,minScroll:e}}const k4={x:.2,y:.2};function L4(i,e,t,r,a){let{top:l,left:c,right:f,bottom:m}=t;r===void 0&&(r=10),a===void 0&&(a=k4);const{isTop:g,isBottom:_,isLeft:E,isRight:b}=j1(i),w={x:0,y:0},k={x:0,y:0},x={height:e.height*a.y,width:e.width*a.x};return!g&&l<=e.top+x.height?(w.y=vn.Backward,k.y=r*Math.abs((e.top+x.height-l)/x.height)):!_&&m>=e.bottom-x.height&&(w.y=vn.Forward,k.y=r*Math.abs((e.bottom-x.height-m)/x.height)),!b&&f>=e.right-x.width?(w.x=vn.Forward,k.x=r*Math.abs((e.right-x.width-f)/x.width)):!E&&c<=e.left+x.width&&(w.x=vn.Backward,k.x=r*Math.abs((e.left+x.width-c)/x.width)),{direction:w,speed:k}}function U4(i){if(i===document.scrollingElement){const{innerWidth:l,innerHeight:c}=window;return{top:0,left:0,right:l,bottom:c,width:l,height:c}}const{top:e,left:t,right:r,bottom:a}=i.getBoundingClientRect();return{top:e,left:t,right:r,bottom:a,width:i.clientWidth,height:i.clientHeight}}function z1(i){return i.reduce((e,t)=>_l(e,Ry(t)),Ji)}function j4(i){return i.reduce((e,t)=>e+k1(t),0)}function z4(i){return i.reduce((e,t)=>e+L1(t),0)}function B1(i,e){if(e===void 0&&(e=Zl),!i)return;const{top:t,left:r,bottom:a,right:l}=e(i);P1(i)&&(a<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const B4=[["x",["left","right"],j4],["y",["top","bottom"],z4]];class K_{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=G_(t),a=z1(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,c,f]of B4)for(const m of c)Object.defineProperty(this,m,{get:()=>{const g=f(r),_=a[l]-g;return this.rect[m]+_},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Rc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var a;(a=this.target)==null||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function q4(i){const{EventTarget:e}=Kn(i);return i instanceof e?i:Wl(i)}function zg(i,e){const t=Math.abs(i.x),r=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Vi;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Vi||(Vi={}));function LS(i){i.preventDefault()}function F4(i){i.stopPropagation()}var ot;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(ot||(ot={}));const q1={start:[ot.Space,ot.Enter],cancel:[ot.Esc],end:[ot.Space,ot.Enter,ot.Tab]},H4=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case ot.Right:return{...t,x:t.x+25};case ot.Left:return{...t,x:t.x-25};case ot.Down:return{...t,y:t.y+25};case ot.Up:return{...t,y:t.y-25}}};class F1{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Rc(Wl(t)),this.windowListeners=new Rc(Kn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vi.Resize,this.handleCancel),this.windowListeners.add(Vi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&B1(r),t(Ji)}handleKeyDown(e){if(gm(e)){const{active:t,context:r,options:a}=this.props,{keyboardCodes:l=q1,coordinateGetter:c=H4,scrollBehavior:f="smooth"}=a,{code:m}=e;if(l.end.includes(m)){this.handleEnd(e);return}if(l.cancel.includes(m)){this.handleCancel(e);return}const{collisionRect:g}=r.current,_=g?{x:g.left,y:g.top}:Ji;this.referenceCoordinates||(this.referenceCoordinates=_);const E=c(e,{active:t,context:r.current,currentCoordinates:_});if(E){const b=Ld(E,_),w={x:0,y:0},{scrollableAncestors:k}=r.current;for(const x of k){const M=e.code,{isTop:U,isRight:G,isLeft:q,isBottom:se,maxScroll:ae,minScroll:Z}=j1(x),C=U4(x),S={x:Math.min(M===ot.Right?C.right-C.width/2:C.right,Math.max(M===ot.Right?C.left:C.left+C.width/2,E.x)),y:Math.min(M===ot.Down?C.bottom-C.height/2:C.bottom,Math.max(M===ot.Down?C.top:C.top+C.height/2,E.y))},N=M===ot.Right&&!G||M===ot.Left&&!q,V=M===ot.Down&&!se||M===ot.Up&&!U;if(N&&S.x!==E.x){const O=x.scrollLeft+b.x,j=M===ot.Right&&O<=ae.x||M===ot.Left&&O>=Z.x;if(j&&!b.y){x.scrollTo({left:O,behavior:f});return}j?w.x=x.scrollLeft-O:w.x=M===ot.Right?x.scrollLeft-ae.x:x.scrollLeft-Z.x,w.x&&x.scrollBy({left:-w.x,behavior:f});break}else if(V&&S.y!==E.y){const O=x.scrollTop+b.y,j=M===ot.Down&&O<=ae.y||M===ot.Up&&O>=Z.y;if(j&&!b.x){x.scrollTo({top:O,behavior:f});return}j?w.y=x.scrollTop-O:w.y=M===ot.Down?x.scrollTop-ae.y:x.scrollTop-Z.y,w.y&&x.scrollBy({top:-w.y,behavior:f});break}}this.handleMove(e,_l(Ld(E,this.referenceCoordinates),w))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}F1.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:r=q1,onActivation:a}=e,{active:l}=t;const{code:c}=i.nativeEvent;if(r.start.includes(c)){const f=l.activatorNode.current;return f&&i.target!==f?!1:(i.preventDefault(),a==null||a({event:i.nativeEvent}),!0)}return!1}}];function US(i){return!!(i&&"distance"in i)}function jS(i){return!!(i&&"delay"in i)}class Y_{constructor(e,t,r){var a;r===void 0&&(r=q4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:c}=l;this.props=e,this.events=t,this.document=Wl(c),this.documentListeners=new Rc(this.document),this.listeners=new Rc(r),this.windowListeners=new Rc(Kn(c)),this.initialCoordinates=(a=Ud(l))!=null?a:Ji,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Vi.Resize,this.handleCancel),this.windowListeners.add(Vi.DragStart,LS),this.windowListeners.add(Vi.VisibilityChange,this.handleCancel),this.windowListeners.add(Vi.ContextMenu,LS),this.documentListeners.add(Vi.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(jS(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(US(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Vi.Click,F4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:a,props:l}=this,{onMove:c,options:{activationConstraint:f}}=l;if(!a)return;const m=(t=Ud(e))!=null?t:Ji,g=Ld(a,m);if(!r&&f){if(US(f)){if(f.tolerance!=null&&zg(g,f.tolerance))return this.handleCancel();if(zg(g,f.distance))return this.handleStart()}if(jS(f)&&zg(g,f.tolerance))return this.handleCancel();this.handlePending(f,g);return}e.cancelable&&e.preventDefault(),c(m)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ot.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const G4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Q_ extends Y_{constructor(e){const{event:t}=e,r=Wl(t.target);super(e,G4,r)}}Q_.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const K4={move:{name:"mousemove"},end:{name:"mouseup"}};var Cy;(function(i){i[i.RightClick=2]="RightClick"})(Cy||(Cy={}));class Y4 extends Y_{constructor(e){super(e,K4,Wl(e.event.target))}}Y4.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return t.button===Cy.RightClick?!1:(r==null||r({event:t}),!0)}}];const Bg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class H1 extends Y_{constructor(e){super(e,Bg)}static setup(){return window.addEventListener(Bg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Bg.move.name,e)};function e(){}}}H1.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;const{touches:a}=t;return a.length>1?!1:(r==null||r({event:t}),!0)}}];var Cc;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Cc||(Cc={}));var zd;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(zd||(zd={}));function Q4(i){let{acceleration:e,activator:t=Cc.Pointer,canScroll:r,draggingRect:a,enabled:l,interval:c=5,order:f=zd.TreeOrder,pointerCoordinates:m,scrollableAncestors:g,scrollableAncestorRects:_,delta:E,threshold:b}=i;const w=X4({delta:E,disabled:!l}),[k,x]=a4(),M=D.useRef({x:0,y:0}),U=D.useRef({x:0,y:0}),G=D.useMemo(()=>{switch(t){case Cc.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case Cc.DraggableRect:return a}},[t,a,m]),q=D.useRef(null),se=D.useCallback(()=>{const Z=q.current;if(!Z)return;const C=M.current.x*U.current.x,S=M.current.y*U.current.y;Z.scrollBy(C,S)},[]),ae=D.useMemo(()=>f===zd.TreeOrder?[...g].reverse():g,[f,g]);D.useEffect(()=>{if(!l||!g.length||!G){x();return}for(const Z of ae){if((r==null?void 0:r(Z))===!1)continue;const C=g.indexOf(Z),S=_[C];if(!S)continue;const{direction:N,speed:V}=L4(Z,S,G,e,b);for(const O of["x","y"])w[O][N[O]]||(V[O]=0,N[O]=0);if(V.x>0||V.y>0){x(),q.current=Z,k(se,c),M.current=V,U.current=N;return}}M.current={x:0,y:0},U.current={x:0,y:0},x()},[e,se,r,x,l,c,JSON.stringify(G),JSON.stringify(w),k,g,ae,_,JSON.stringify(b)])}const $4={x:{[vn.Backward]:!1,[vn.Forward]:!1},y:{[vn.Backward]:!1,[vn.Forward]:!1}};function X4(i){let{delta:e,disabled:t}=i;const r=kd(e);return uh(a=>{if(t||!r||!a)return $4;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[vn.Backward]:a.x[vn.Backward]||l.x===-1,[vn.Forward]:a.x[vn.Forward]||l.x===1},y:{[vn.Backward]:a.y[vn.Backward]||l.y===-1,[vn.Forward]:a.y[vn.Forward]||l.y===1}}},[t,e,r])}function J4(i,e){const t=e!=null?i.get(e):void 0,r=t?t.node.current:null;return uh(a=>{var l;return e==null?null:(l=r??a)!=null?l:null},[r,e])}function W4(i,e){return D.useMemo(()=>i.reduce((t,r)=>{const{sensor:a}=r,l=a.activators.map(c=>({eventName:c.eventName,handler:e(c.handler,r)}));return[...t,...l]},[]),[i,e])}var Yc;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Yc||(Yc={}));var Dy;(function(i){i.Optimized="optimized"})(Dy||(Dy={}));const zS=new Map;function Z4(i,e){let{dragging:t,dependencies:r,config:a}=e;const[l,c]=D.useState(null),{frequency:f,measure:m,strategy:g}=a,_=D.useRef(i),E=M(),b=Kc(E),w=D.useCallback(function(U){U===void 0&&(U=[]),!b.current&&c(G=>G===null?U:G.concat(U.filter(q=>!G.includes(q))))},[b]),k=D.useRef(null),x=uh(U=>{if(E&&!t)return zS;if(!U||U===zS||_.current!==i||l!=null){const G=new Map;for(let q of i){if(!q)continue;if(l&&l.length>0&&!l.includes(q.id)&&q.rect.current){G.set(q.id,q.rect.current);continue}const se=q.node.current,ae=se?new K_(m(se),se):null;q.rect.current=ae,ae&&G.set(q.id,ae)}return G}return U},[i,l,t,E,m]);return D.useEffect(()=>{_.current=i},[i]),D.useEffect(()=>{E||w()},[t,E]),D.useEffect(()=>{l&&l.length>0&&c(null)},[JSON.stringify(l)]),D.useEffect(()=>{E||typeof f!="number"||k.current!==null||(k.current=setTimeout(()=>{w(),k.current=null},f))},[f,E,w,...r]),{droppableRects:x,measureDroppableContainers:w,measuringScheduled:l!=null};function M(){switch(g){case Yc.Always:return!1;case Yc.BeforeDragging:return t;default:return!t}}}function $_(i,e){return uh(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function ek(i,e){return $_(i,e)}function tk(i){let{callback:e,disabled:t}=i;const r=pm(e),a=D.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return D.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function ym(i){let{callback:e,disabled:t}=i;const r=pm(e),a=D.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return D.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function nk(i){return new K_(Zl(i),i)}function BS(i,e,t){e===void 0&&(e=nk);const[r,a]=D.useState(null);function l(){a(m=>{if(!i)return null;if(i.isConnected===!1){var g;return(g=m??t)!=null?g:null}const _=e(i);return JSON.stringify(m)===JSON.stringify(_)?m:_})}const c=tk({callback(m){if(i)for(const g of m){const{type:_,target:E}=g;if(_==="childList"&&E instanceof HTMLElement&&E.contains(i)){l();break}}}}),f=ym({callback:l});return Xi(()=>{l(),i?(f==null||f.observe(i),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(f==null||f.disconnect(),c==null||c.disconnect())},[i]),r}function ik(i){const e=$_(i);return O1(i,e)}const qS=[];function rk(i){const e=D.useRef(i),t=uh(r=>i?r&&r!==qS&&i&&e.current&&i.parentNode===e.current.parentNode?r:G_(i):qS,[i]);return D.useEffect(()=>{e.current=i},[i]),t}function sk(i){const[e,t]=D.useState(null),r=D.useRef(i),a=D.useCallback(l=>{const c=jg(l.target);c&&t(f=>f?(f.set(c,Ry(c)),new Map(f)):null)},[]);return D.useEffect(()=>{const l=r.current;if(i!==l){c(l);const f=i.map(m=>{const g=jg(m);return g?(g.addEventListener("scroll",a,{passive:!0}),[g,Ry(g)]):null}).filter(m=>m!=null);t(f.length?new Map(f):null),r.current=i}return()=>{c(i),c(l)};function c(f){f.forEach(m=>{const g=jg(m);g==null||g.removeEventListener("scroll",a)})}},[a,i]),D.useMemo(()=>i.length?e?Array.from(e.values()).reduce((l,c)=>_l(l,c),Ji):z1(i):Ji,[i,e])}function FS(i,e){e===void 0&&(e=[]);const t=D.useRef(null);return D.useEffect(()=>{t.current=null},e),D.useEffect(()=>{const r=i!==Ji;r&&!t.current&&(t.current=i),!r&&t.current&&(t.current=null)},[i]),t.current?Ld(i,t.current):Ji}function ak(i){D.useEffect(()=>{if(!mm)return;const e=i.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},i.map(e=>{let{sensor:t}=e;return t}))}function ok(i,e){return D.useMemo(()=>i.reduce((t,r)=>{let{eventName:a,handler:l}=r;return t[a]=c=>{l(c,e)},t},{}),[i,e])}function G1(i){return D.useMemo(()=>i?O4(i):null,[i])}const HS=[];function lk(i,e){e===void 0&&(e=Zl);const[t]=i,r=G1(t?Kn(t):null),[a,l]=D.useState(HS);function c(){l(()=>i.length?i.map(m=>U1(m)?r:new K_(e(m),m)):HS)}const f=ym({callback:c});return Xi(()=>{f==null||f.disconnect(),c(),i.forEach(m=>f==null?void 0:f.observe(m))},[i]),a}function K1(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return lh(e)?e:i}function uk(i){let{measure:e}=i;const[t,r]=D.useState(null),a=D.useCallback(g=>{for(const{target:_}of g)if(lh(_)){r(E=>{const b=e(_);return E?{...E,width:b.width,height:b.height}:b});break}},[e]),l=ym({callback:a}),c=D.useCallback(g=>{const _=K1(g);l==null||l.disconnect(),_&&(l==null||l.observe(_)),r(_?e(_):null)},[e,l]),[f,m]=Pd(c);return D.useMemo(()=>({nodeRef:f,rect:t,setRef:m}),[t,f,m])}const ck=[{sensor:Q_,options:{}},{sensor:F1,options:{}}],hk={current:{}},od={draggable:{measure:kS},droppable:{measure:kS,strategy:Yc.WhileDragging,frequency:Dy.Optimized},dragOverlay:{measure:Zl}};class Dc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const fk={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Dc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:jd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:od,measureDroppableContainers:jd,windowRect:null,measuringScheduled:!1},Y1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:jd,draggableNodes:new Map,over:null,measureDroppableContainers:jd},hh=D.createContext(Y1),Q1=D.createContext(fk);function dk(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Dc}}}function mk(i,e){switch(e.type){case hn.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case hn.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case hn.DragEnd:case hn.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case hn.RegisterDroppable:{const{element:t}=e,{id:r}=t,a=new Dc(i.droppable.containers);return a.set(r,t),{...i,droppable:{...i.droppable,containers:a}}}case hn.SetDroppableDisabled:{const{id:t,key:r,disabled:a}=e,l=i.droppable.containers.get(t);if(!l||r!==l.key)return i;const c=new Dc(i.droppable.containers);return c.set(t,{...l,disabled:a}),{...i,droppable:{...i.droppable,containers:c}}}case hn.UnregisterDroppable:{const{id:t,key:r}=e,a=i.droppable.containers.get(t);if(!a||r!==a.key)return i;const l=new Dc(i.droppable.containers);return l.delete(t),{...i,droppable:{...i.droppable,containers:l}}}default:return i}}function pk(i){let{disabled:e}=i;const{active:t,activatorEvent:r,draggableNodes:a}=D.useContext(hh),l=kd(r),c=kd(t==null?void 0:t.id);return D.useEffect(()=>{if(!e&&!r&&l&&c!=null){if(!gm(l)||document.activeElement===l.target)return;const f=a.get(c);if(!f)return;const{activatorNode:m,node:g}=f;if(!m.current&&!g.current)return;requestAnimationFrame(()=>{for(const _ of[m.current,g.current]){if(!_)continue;const E=u4(_);if(E){E.focus();break}}})}},[r,e,a,c,l]),null}function $1(i,e){let{transform:t,...r}=e;return i!=null&&i.length?i.reduce((a,l)=>l({transform:a,...r}),t):t}function gk(i){return D.useMemo(()=>({draggable:{...od.draggable,...i==null?void 0:i.draggable},droppable:{...od.droppable,...i==null?void 0:i.droppable},dragOverlay:{...od.dragOverlay,...i==null?void 0:i.dragOverlay}}),[i==null?void 0:i.draggable,i==null?void 0:i.droppable,i==null?void 0:i.dragOverlay])}function yk(i){let{activeNode:e,measure:t,initialRect:r,config:a=!0}=i;const l=D.useRef(!1),{x:c,y:f}=typeof a=="boolean"?{x:a,y:a}:a;Xi(()=>{if(!c&&!f||!e){l.current=!1;return}if(l.current||!r)return;const g=e==null?void 0:e.node.current;if(!g||g.isConnected===!1)return;const _=t(g),E=O1(_,r);if(c||(E.x=0),f||(E.y=0),l.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const b=P1(g);b&&b.scrollBy({top:E.y,left:E.x})}},[e,c,f,r,t])}const _m=D.createContext({...Ji,scaleX:1,scaleY:1});var Bs;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(Bs||(Bs={}));const _k=D.memo(function(e){var t,r,a,l;let{id:c,accessibility:f,autoScroll:m=!0,children:g,sensors:_=ck,collisionDetection:E=R4,measuring:b,modifiers:w,...k}=e;const x=D.useReducer(mk,void 0,dk),[M,U]=x,[G,q]=p4(),[se,ae]=D.useState(Bs.Uninitialized),Z=se===Bs.Initialized,{draggable:{active:C,nodes:S,translate:N},droppable:{containers:V}}=M,O=C!=null?S.get(C):null,j=D.useRef({initial:null,translated:null}),P=D.useMemo(()=>{var Qe;return C!=null?{id:C,data:(Qe=O==null?void 0:O.data)!=null?Qe:hk,rect:j}:null},[C,O]),Ae=D.useRef(null),[Me,X]=D.useState(null),[ue,_e]=D.useState(null),De=Kc(k,Object.values(k)),Be=ch("DndDescribedBy",c),z=D.useMemo(()=>V.getEnabled(),[V]),ne=gk(b),{droppableRects:Q,measureDroppableContainers:he,measuringScheduled:ge}=Z4(z,{dragging:Z,dependencies:[N.x,N.y],config:ne.droppable}),ye=J4(S,C),xe=D.useMemo(()=>ue?Ud(ue):null,[ue]),Ge=Dr(),Pe=ek(ye,ne.draggable.measure);yk({activeNode:C!=null?S.get(C):null,config:Ge.layoutShiftCompensation,initialRect:Pe,measure:ne.draggable.measure});const je=BS(ye,ne.draggable.measure,Pe),Mt=BS(ye?ye.parentElement:null),vt=D.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:Q,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pt=V.getNodeFor((t=vt.current.over)==null?void 0:t.id),J=uk({measure:ne.dragOverlay.measure}),pe=(r=J.nodeRef.current)!=null?r:ye,Te=Z?(a=J.rect)!=null?a:je:null,ke=!!(J.nodeRef.current&&J.rect),Oe=ik(ke?null:je),Ie=G1(pe?Kn(pe):null),Ue=rk(Z?Pt??ye:null),jt=lk(Ue),Wi=$1(w,{transform:{x:N.x-Oe.x,y:N.y-Oe.y,scaleX:1,scaleY:1},activatorEvent:ue,active:P,activeNodeRect:je,containerNodeRect:Mt,draggingNodeRect:Te,over:vt.current.over,overlayNodeRect:J.rect,scrollableAncestors:Ue,scrollableAncestorRects:jt,windowRect:Ie}),Zi=xe?_l(xe,N):null,Qt=sk(Ue),ki=FS(Qt),vi=FS(Qt,[je]),Tn=_l(Wi,ki),bn=Te?x4(Te,Wi):null,qe=P&&bn?E({active:P,collisionRect:bn,droppableRects:Q,droppableContainers:z,pointerCoordinates:Zi}):null,Tt=A4(qe,"id"),[on,ua]=D.useState(null),ii=ke?Wi:_l(Wi,vi),ln=C4(ii,(l=on==null?void 0:on.rect)!=null?l:null,je),xn=D.useRef(null),wt=D.useCallback((Qe,It)=>{let{sensor:Rt,options:$t}=It;if(Ae.current==null)return;const Nn=S.get(Ae.current);if(!Nn)return;const mn=Qe.nativeEvent,zt=new Rt({active:Ae.current,activeNode:Nn,event:mn,options:$t,context:vt,onAbort(Bt){if(!S.get(Bt))return;const{onDragAbort:On}=De.current,zn={id:Bt};On==null||On(zn),G({type:"onDragAbort",event:zn})},onPending(Bt,Mn,On,zn){if(!S.get(Bt))return;const{onDragPending:Bn}=De.current,si={id:Bt,constraint:Mn,initialCoordinates:On,offset:zn};Bn==null||Bn(si),G({type:"onDragPending",event:si})},onStart(Bt){const Mn=Ae.current;if(Mn==null)return;const On=S.get(Mn);if(!On)return;const{onDragStart:zn}=De.current,ri={activatorEvent:mn,active:{id:Mn,data:On.data,rect:j}};mc.unstable_batchedUpdates(()=>{zn==null||zn(ri),ae(Bs.Initializing),U({type:hn.DragStart,initialCoordinates:Bt,active:Mn}),G({type:"onDragStart",event:ri}),X(xn.current),_e(mn)})},onMove(Bt){U({type:hn.DragMove,coordinates:Bt})},onEnd:Yn(hn.DragEnd),onCancel:Yn(hn.DragCancel)});xn.current=zt;function Yn(Bt){return async function(){const{active:On,collisions:zn,over:ri,scrollAdjustedTranslate:Bn}=vt.current;let si=null;if(On&&Bn){const{cancelDrop:Sn}=De.current;si={activatorEvent:mn,active:On,collisions:zn,delta:Bn,over:ri},Bt===hn.DragEnd&&typeof Sn=="function"&&await Promise.resolve(Sn(si))&&(Bt=hn.DragCancel)}Ae.current=null,mc.unstable_batchedUpdates(()=>{U({type:Bt}),ae(Bs.Uninitialized),ua(null),X(null),_e(null),xn.current=null;const Sn=Bt===hn.DragEnd?"onDragEnd":"onDragCancel";if(si){const qn=De.current[Sn];qn==null||qn(si),G({type:Sn,event:si})}})}}},[S]),uo=D.useCallback((Qe,It)=>(Rt,$t)=>{const Nn=Rt.nativeEvent,mn=S.get($t);if(Ae.current!==null||!mn||Nn.dndKit||Nn.defaultPrevented)return;const zt={active:mn};Qe(Rt,It.options,zt)===!0&&(Nn.dndKit={capturedBy:It.sensor},Ae.current=$t,wt(Rt,It))},[S,wt]),Cr=W4(_,uo);ak(_),Xi(()=>{je&&se===Bs.Initializing&&ae(Bs.Initialized)},[je,se]),D.useEffect(()=>{const{onDragMove:Qe}=De.current,{active:It,activatorEvent:Rt,collisions:$t,over:Nn}=vt.current;if(!It||!Rt)return;const mn={active:It,activatorEvent:Rt,collisions:$t,delta:{x:Tn.x,y:Tn.y},over:Nn};mc.unstable_batchedUpdates(()=>{Qe==null||Qe(mn),G({type:"onDragMove",event:mn})})},[Tn.x,Tn.y]),D.useEffect(()=>{const{active:Qe,activatorEvent:It,collisions:Rt,droppableContainers:$t,scrollAdjustedTranslate:Nn}=vt.current;if(!Qe||Ae.current==null||!It||!Nn)return;const{onDragOver:mn}=De.current,zt=$t.get(Tt),Yn=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,Bt={active:Qe,activatorEvent:It,collisions:Rt,delta:{x:Nn.x,y:Nn.y},over:Yn};mc.unstable_batchedUpdates(()=>{ua(Yn),mn==null||mn(Bt),G({type:"onDragOver",event:Bt})})},[Tt]),Xi(()=>{vt.current={activatorEvent:ue,active:P,activeNode:ye,collisionRect:bn,collisions:qe,droppableRects:Q,draggableNodes:S,draggingNode:pe,draggingNodeRect:Te,droppableContainers:V,over:on,scrollableAncestors:Ue,scrollAdjustedTranslate:Tn},j.current={initial:Te,translated:bn}},[P,ye,qe,bn,S,pe,Te,Q,V,on,Ue,Tn]),Q4({...Ge,delta:N,draggingRect:bn,pointerCoordinates:Zi,scrollableAncestors:Ue,scrollableAncestorRects:jt});const co=D.useMemo(()=>({active:P,activeNode:ye,activeNodeRect:je,activatorEvent:ue,collisions:qe,containerNodeRect:Mt,dragOverlay:J,draggableNodes:S,droppableContainers:V,droppableRects:Q,over:on,measureDroppableContainers:he,scrollableAncestors:Ue,scrollableAncestorRects:jt,measuringConfiguration:ne,measuringScheduled:ge,windowRect:Ie}),[P,ye,je,ue,qe,Mt,J,S,V,Q,on,he,Ue,jt,ne,ge,Ie]),Ei=D.useMemo(()=>({activatorEvent:ue,activators:Cr,active:P,activeNodeRect:je,ariaDescribedById:{draggable:Be},dispatch:U,draggableNodes:S,over:on,measureDroppableContainers:he}),[ue,Cr,P,je,U,Be,S,on,he]);return Ot.createElement(M1.Provider,{value:q},Ot.createElement(hh.Provider,{value:Ei},Ot.createElement(Q1.Provider,{value:co},Ot.createElement(_m.Provider,{value:ln},g)),Ot.createElement(pk,{disabled:(f==null?void 0:f.restoreFocus)===!1})),Ot.createElement(_4,{...f,hiddenTextDescribedById:Be}));function Dr(){const Qe=(Me==null?void 0:Me.autoScrollEnabled)===!1,It=typeof m=="object"?m.enabled===!1:m===!1,Rt=Z&&!Qe&&!It;return typeof m=="object"?{...m,enabled:Rt}:{enabled:Rt}}}),vk=D.createContext(null),GS="button",Ek="Draggable";function Tk(i){let{id:e,data:t,disabled:r=!1,attributes:a}=i;const l=ch(Ek),{activators:c,activatorEvent:f,active:m,activeNodeRect:g,ariaDescribedById:_,draggableNodes:E,over:b}=D.useContext(hh),{role:w=GS,roleDescription:k="draggable",tabIndex:x=0}=a??{},M=(m==null?void 0:m.id)===e,U=D.useContext(M?_m:vk),[G,q]=Pd(),[se,ae]=Pd(),Z=ok(c,e),C=Kc(t);Xi(()=>(E.set(e,{id:e,key:l,node:G,activatorNode:se,data:C}),()=>{const N=E.get(e);N&&N.key===l&&E.delete(e)}),[E,e]);const S=D.useMemo(()=>({role:w,tabIndex:x,"aria-disabled":r,"aria-pressed":M&&w===GS?!0:void 0,"aria-roledescription":k,"aria-describedby":_.draggable}),[r,w,x,M,k,_.draggable]);return{active:m,activatorEvent:f,activeNodeRect:g,attributes:S,isDragging:M,listeners:r?void 0:Z,node:G,over:b,setNodeRef:q,setActivatorNodeRef:ae,transform:U}}function X1(){return D.useContext(Q1)}const bk="Droppable",Sk={timeout:25};function J1(i){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:a}=i;const l=ch(bk),{active:c,dispatch:f,over:m,measureDroppableContainers:g}=D.useContext(hh),_=D.useRef({disabled:t}),E=D.useRef(!1),b=D.useRef(null),w=D.useRef(null),{disabled:k,updateMeasurementsFor:x,timeout:M}={...Sk,...a},U=Kc(x??r),G=D.useCallback(()=>{if(!E.current){E.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{g(Array.isArray(U.current)?U.current:[U.current]),w.current=null},M)},[M]),q=ym({callback:G,disabled:k||!c}),se=D.useCallback((S,N)=>{q&&(N&&(q.unobserve(N),E.current=!1),S&&q.observe(S))},[q]),[ae,Z]=Pd(se),C=Kc(e);return D.useEffect(()=>{!q||!ae.current||(q.disconnect(),E.current=!1,q.observe(ae.current))},[ae,q]),D.useEffect(()=>(f({type:hn.RegisterDroppable,element:{id:r,key:l,disabled:t,node:ae,rect:b,data:C}}),()=>f({type:hn.UnregisterDroppable,key:l,id:r})),[r]),D.useEffect(()=>{t!==_.current.disabled&&(f({type:hn.SetDroppableDisabled,id:r,key:l,disabled:t}),_.current.disabled=t)},[r,l,t,f]),{active:c,rect:b,isOver:(m==null?void 0:m.id)===r,node:ae,over:m,setNodeRef:Z}}function Ak(i){let{animation:e,children:t}=i;const[r,a]=D.useState(null),[l,c]=D.useState(null),f=kd(t);return!t&&!r&&f&&a(f),Xi(()=>{if(!l)return;const m=r==null?void 0:r.key,g=r==null?void 0:r.props.id;if(m==null||g==null){a(null);return}Promise.resolve(e(g,l)).then(()=>{a(null)})},[e,r,l]),Ot.createElement(Ot.Fragment,null,t,r?D.cloneElement(r,{ref:c}):null)}const wk={x:0,y:0,scaleX:1,scaleY:1};function Ik(i){let{children:e}=i;return Ot.createElement(hh.Provider,{value:Y1},Ot.createElement(_m.Provider,{value:wk},e))}const Rk={position:"fixed",touchAction:"none"},Ck=i=>gm(i)?"transform 250ms ease":void 0,Dk=D.forwardRef((i,e)=>{let{as:t,activatorEvent:r,adjustScale:a,children:l,className:c,rect:f,style:m,transform:g,transition:_=Ck}=i;if(!f)return null;const E=a?g:{...g,scaleX:1,scaleY:1},b={...Rk,width:f.width,height:f.height,top:f.top,left:f.left,transform:ra.Transform.toString(E),transformOrigin:a&&r?T4(r,f):void 0,transition:typeof _=="function"?_(r):_,...m};return Ot.createElement(t,{className:c,style:b,ref:e},l)}),xk=i=>e=>{let{active:t,dragOverlay:r}=e;const a={},{styles:l,className:c}=i;if(l!=null&&l.active)for(const[f,m]of Object.entries(l.active))m!==void 0&&(a[f]=t.node.style.getPropertyValue(f),t.node.style.setProperty(f,m));if(l!=null&&l.dragOverlay)for(const[f,m]of Object.entries(l.dragOverlay))m!==void 0&&r.node.style.setProperty(f,m);return c!=null&&c.active&&t.node.classList.add(c.active),c!=null&&c.dragOverlay&&r.node.classList.add(c.dragOverlay),function(){for(const[m,g]of Object.entries(a))t.node.style.setProperty(m,g);c!=null&&c.active&&t.node.classList.remove(c.active)}},Nk=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:ra.Transform.toString(e)},{transform:ra.Transform.toString(t)}]},Mk={duration:250,easing:"ease",keyframes:Nk,sideEffects:xk({styles:{active:{opacity:"0"}}})};function Ok(i){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:a}=i;return pm((l,c)=>{if(e===null)return;const f=t.get(l);if(!f)return;const m=f.node.current;if(!m)return;const g=K1(c);if(!g)return;const{transform:_}=Kn(c).getComputedStyle(c),E=V1(_);if(!E)return;const b=typeof e=="function"?e:Vk(e);return B1(m,a.draggable.measure),b({active:{id:l,data:f.data,node:m,rect:a.draggable.measure(m)},draggableNodes:t,dragOverlay:{node:c,rect:a.dragOverlay.measure(g)},droppableContainers:r,measuringConfiguration:a,transform:E})})}function Vk(i){const{duration:e,easing:t,sideEffects:r,keyframes:a}={...Mk,...i};return l=>{let{active:c,dragOverlay:f,transform:m,...g}=l;if(!e)return;const _={x:f.rect.left-c.rect.left,y:f.rect.top-c.rect.top},E={scaleX:m.scaleX!==1?c.rect.width*m.scaleX/f.rect.width:1,scaleY:m.scaleY!==1?c.rect.height*m.scaleY/f.rect.height:1},b={x:m.x-_.x,y:m.y-_.y,...E},w=a({...g,active:c,dragOverlay:f,transform:{initial:m,final:b}}),[k]=w,x=w[w.length-1];if(JSON.stringify(k)===JSON.stringify(x))return;const M=r==null?void 0:r({active:c,dragOverlay:f,...g}),U=f.node.animate(w,{duration:e,easing:t,fill:"forwards"});return new Promise(G=>{U.onfinish=()=>{M==null||M(),G()}})}}let KS=0;function Pk(i){return D.useMemo(()=>{if(i!=null)return KS++,KS},[i])}const kk=Ot.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:a,transition:l,modifiers:c,wrapperElement:f="div",className:m,zIndex:g=999}=i;const{activatorEvent:_,active:E,activeNodeRect:b,containerNodeRect:w,draggableNodes:k,droppableContainers:x,dragOverlay:M,over:U,measuringConfiguration:G,scrollableAncestors:q,scrollableAncestorRects:se,windowRect:ae}=X1(),Z=D.useContext(_m),C=Pk(E==null?void 0:E.id),S=$1(c,{activatorEvent:_,active:E,activeNodeRect:b,containerNodeRect:w,draggingNodeRect:M.rect,over:U,overlayNodeRect:M.rect,scrollableAncestors:q,scrollableAncestorRects:se,transform:Z,windowRect:ae}),N=$_(b),V=Ok({config:r,draggableNodes:k,droppableContainers:x,measuringConfiguration:G}),O=N?M.setRef:void 0;return Ot.createElement(Ik,null,Ot.createElement(Ak,{animation:V},E&&C?Ot.createElement(Dk,{key:C,id:E.id,ref:O,as:f,activatorEvent:_,adjustScale:e,className:m,transition:l,rect:N,style:{zIndex:g,...a},transform:S},t):null))});function X_(i,e,t){const r=i.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function Lk(i,e){return i.reduce((t,r,a)=>{const l=e.get(r);return l&&(t[a]=l),t},Array(i.length))}function Ff(i){return i!==null&&i>=0}function Uk(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function jk(i){return typeof i=="boolean"?{draggable:i,droppable:i}:i}const W1=i=>{let{rects:e,activeIndex:t,overIndex:r,index:a}=i;const l=X_(e,r,t),c=e[a],f=l[a];return!f||!c?null:{x:f.left-c.left,y:f.top-c.top,scaleX:f.width/c.width,scaleY:f.height/c.height}},Hf={scaleX:1,scaleY:1},zk=i=>{var e;let{activeIndex:t,activeNodeRect:r,index:a,rects:l,overIndex:c}=i;const f=(e=l[t])!=null?e:r;if(!f)return null;if(a===t){const g=l[c];return g?{x:0,y:t<c?g.top+g.height-(f.top+f.height):g.top-f.top,...Hf}:null}const m=Bk(l,a,t);return a>t&&a<=c?{x:0,y:-f.height-m,...Hf}:a<t&&a>=c?{x:0,y:f.height+m,...Hf}:{x:0,y:0,...Hf}};function Bk(i,e,t){const r=i[e],a=i[e-1],l=i[e+1];return r?t<e?a?r.top-(a.top+a.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const Z1="Sortable",eR=Ot.createContext({activeIndex:-1,containerId:Z1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:W1,disabled:{draggable:!1,droppable:!1}});function qk(i){let{children:e,id:t,items:r,strategy:a=W1,disabled:l=!1}=i;const{active:c,dragOverlay:f,droppableRects:m,over:g,measureDroppableContainers:_}=X1(),E=ch(Z1,t),b=f.rect!==null,w=D.useMemo(()=>r.map(Z=>typeof Z=="object"&&"id"in Z?Z.id:Z),[r]),k=c!=null,x=c?w.indexOf(c.id):-1,M=g?w.indexOf(g.id):-1,U=D.useRef(w),G=!Uk(w,U.current),q=M!==-1&&x===-1||G,se=jk(l);Xi(()=>{G&&k&&_(w)},[G,w,k,_]),D.useEffect(()=>{U.current=w},[w]);const ae=D.useMemo(()=>({activeIndex:x,containerId:E,disabled:se,disableTransforms:q,items:w,overIndex:M,useDragOverlay:b,sortedRects:Lk(w,m),strategy:a}),[x,E,se.draggable,se.droppable,q,w,M,m,b,a]);return Ot.createElement(eR.Provider,{value:ae},e)}const Fk=i=>{let{id:e,items:t,activeIndex:r,overIndex:a}=i;return X_(t,r,a).indexOf(e)},Hk=i=>{let{containerId:e,isSorting:t,wasDragging:r,index:a,items:l,newIndex:c,previousItems:f,previousContainerId:m,transition:g}=i;return!g||!r||f!==l&&a===c?!1:t?!0:c!==a&&e===m},Gk={duration:200,easing:"ease"},tR="transform",Kk=ra.Transition.toString({property:tR,duration:0,easing:"linear"}),Yk={roleDescription:"sortable"};function Qk(i){let{disabled:e,index:t,node:r,rect:a}=i;const[l,c]=D.useState(null),f=D.useRef(t);return Xi(()=>{if(!e&&t!==f.current&&r.current){const m=a.current;if(m){const g=Zl(r.current,{ignoreTransform:!0}),_={x:m.left-g.left,y:m.top-g.top,scaleX:m.width/g.width,scaleY:m.height/g.height};(_.x||_.y)&&c(_)}}t!==f.current&&(f.current=t)},[e,t,r,a]),D.useEffect(()=>{l&&c(null)},[l]),l}function $k(i){let{animateLayoutChanges:e=Hk,attributes:t,disabled:r,data:a,getNewIndex:l=Fk,id:c,strategy:f,resizeObserverConfig:m,transition:g=Gk}=i;const{items:_,containerId:E,activeIndex:b,disabled:w,disableTransforms:k,sortedRects:x,overIndex:M,useDragOverlay:U,strategy:G}=D.useContext(eR),q=Xk(r,w),se=_.indexOf(c),ae=D.useMemo(()=>({sortable:{containerId:E,index:se,items:_},...a}),[E,a,se,_]),Z=D.useMemo(()=>_.slice(_.indexOf(c)),[_,c]),{rect:C,node:S,isOver:N,setNodeRef:V}=J1({id:c,data:ae,disabled:q.droppable,resizeObserverConfig:{updateMeasurementsFor:Z,...m}}),{active:O,activatorEvent:j,activeNodeRect:P,attributes:Ae,setNodeRef:Me,listeners:X,isDragging:ue,over:_e,setActivatorNodeRef:De,transform:Be}=Tk({id:c,data:ae,attributes:{...Yk,...t},disabled:q.draggable}),z=s4(V,Me),ne=!!O,Q=ne&&!k&&Ff(b)&&Ff(M),he=!U&&ue,ge=he&&Q?Be:null,xe=Q?ge??(f??G)({rects:x,activeNodeRect:P,activeIndex:b,overIndex:M,index:se}):null,Ge=Ff(b)&&Ff(M)?l({id:c,items:_,activeIndex:b,overIndex:M}):se,Pe=O==null?void 0:O.id,je=D.useRef({activeId:Pe,items:_,newIndex:Ge,containerId:E}),Mt=_!==je.current.items,vt=e({active:O,containerId:E,isDragging:ue,isSorting:ne,id:c,index:se,items:_,newIndex:je.current.newIndex,previousItems:je.current.items,previousContainerId:je.current.containerId,transition:g,wasDragging:je.current.activeId!=null}),Pt=Qk({disabled:!vt,index:se,node:S,rect:C});return D.useEffect(()=>{ne&&je.current.newIndex!==Ge&&(je.current.newIndex=Ge),E!==je.current.containerId&&(je.current.containerId=E),_!==je.current.items&&(je.current.items=_)},[ne,Ge,E,_]),D.useEffect(()=>{if(Pe===je.current.activeId)return;if(Pe!=null&&je.current.activeId==null){je.current.activeId=Pe;return}const pe=setTimeout(()=>{je.current.activeId=Pe},50);return()=>clearTimeout(pe)},[Pe]),{active:O,activeIndex:b,attributes:Ae,data:ae,rect:C,index:se,newIndex:Ge,items:_,isOver:N,isSorting:ne,isDragging:ue,listeners:X,node:S,overIndex:M,over:_e,setNodeRef:z,setActivatorNodeRef:De,setDroppableNodeRef:V,setDraggableNodeRef:Me,transform:Pt??xe,transition:J()};function J(){if(Pt||Mt&&je.current.newIndex===se)return Kk;if(!(he&&!gm(j)||!g)&&(ne||vt))return ra.Transition.toString({...g,property:tR})}}function Xk(i,e){var t,r;return typeof i=="boolean"?{draggable:i,droppable:!1}:{draggable:(t=i==null?void 0:i.draggable)!=null?t:e.draggable,droppable:(r=i==null?void 0:i.droppable)!=null?r:e.droppable}}ot.Down,ot.Right,ot.Up,ot.Left;const Jk=["","","","","","","","","","","","","","","",""];function Wk({value:i,onChange:e}){const[t,r]=D.useState(!1),a=D.useRef(null);return D.useEffect(()=>{if(!t)return;const l=c=>{a.current&&!a.current.contains(c.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[t]),I.jsxs("div",{className:"pipeline-emoji-picker",ref:a,children:[I.jsx("button",{className:"pipeline-emoji-btn",onClick:()=>r(!t),children:i||""}),t&&I.jsx("div",{className:"pipeline-emoji-grid",children:Jk.map(l=>I.jsx("button",{className:"pipeline-emoji-option",onClick:()=>{e(l),r(!1)},children:l},l))})]})}function xy({value:i,onChange:e,className:t,placeholder:r,singleClick:a}){const[l,c]=D.useState(!1),[f,m]=D.useState(i),g=D.useRef(null);D.useEffect(()=>{l&&g.current&&g.current.focus()},[l]);const _=()=>{c(!1),f.trim()!==i&&e(f.trim())},E=w=>{w.stopPropagation(),m(i),c(!0)};if(l)return I.jsx("input",{ref:g,className:`pipeline-inline-input ${t||""}`,value:f,placeholder:r,onClick:w=>w.stopPropagation(),onChange:w=>m(w.target.value),onBlur:_,onKeyDown:w=>{w.key==="Enter"&&_(),w.key==="Escape"&&(m(i),c(!1))}});const b=a?{onClick:E}:{onDoubleClick:E};return I.jsx("span",{className:`pipeline-inline-text ${t||""} ${i?"":"pipeline-placeholder"}`,...b,children:i||r})}function Zk({listeners:i,attributes:e}){return I.jsx("button",{className:"pipeline-item-drag-handle",...i,...e})}function e6({item:i,sectionId:e,onUpdate:t,onDelete:r}){const{attributes:a,listeners:l,setNodeRef:c,transform:f,transition:m,isDragging:g}=$k({id:i.id}),_={transform:ra.Transform.toString(f),transition:m};return I.jsxs("div",{ref:c,style:_,className:`pipeline-item${g?" dragging":""}`,children:[I.jsx(Zk,{listeners:l,attributes:a}),I.jsx(Wk,{value:i.icon,onChange:E=>t(e,i.id,{icon:E})}),I.jsxs("div",{className:"pipeline-item-content",children:[I.jsx(xy,{value:i.title,onChange:E=>t(e,i.id,{title:E}),className:"pipeline-item-title",placeholder:"Item title"}),I.jsx(xy,{value:i.description,onChange:E=>t(e,i.id,{description:E}),className:"pipeline-item-desc",placeholder:"Description"})]}),I.jsx("button",{className:"pipeline-item-delete",onClick:()=>r(e,i.id),children:""})]})}function t6({item:i}){return I.jsxs("div",{className:"pipeline-item pipeline-item-overlay",children:[I.jsx("span",{className:"pipeline-item-drag-handle"}),I.jsx("div",{className:"pipeline-emoji-picker",children:I.jsx("button",{className:"pipeline-emoji-btn",children:i.icon||""})}),I.jsxs("div",{className:"pipeline-item-content",children:[I.jsx("span",{className:"pipeline-inline-text pipeline-item-title",children:i.title||"Item title"}),I.jsx("span",{className:"pipeline-inline-text pipeline-item-desc",children:i.description||"Description"})]})]})}function n6({sectionId:i,children:e}){const{setNodeRef:t}=J1({id:`section-${i}`});return I.jsx("div",{ref:t,children:e})}function i6({sections:i,addSection:e,updateSection:t,deleteSection:r,toggleCollapse:a,addItem:l,updateItem:c,deleteItem:f,moveItem:m,reorderItems:g}){var ae;const[_,E]=D.useState(null),[b,w]=D.useState(null),k=v4(VS(Q_,{activationConstraint:{distance:5}}),VS(H1,{activationConstraint:{delay:200,tolerance:5}})),x=D.useMemo(()=>{const Z={};for(const C of i)for(const S of C.items||[])Z[S.id]={item:S,sectionId:C.id};return Z},[i]),M=D.useCallback(Z=>{var C;return typeof Z=="string"&&Z.startsWith("section-")?Z.replace("section-",""):((C=x[Z])==null?void 0:C.sectionId)||null},[x]),U=D.useCallback(Z=>{w(Z.active.id)},[]),G=D.useCallback(Z=>{const{active:C,over:S}=Z;if(!S)return;const N=M(C.id),V=M(S.id);if(!N||!V||N===V)return;const O=i.find(ue=>ue.id===N),j=i.find(ue=>ue.id===V);if(!O||!j)return;const P=O.items||[],Ae=j.items||[];P.findIndex(ue=>ue.id===C.id);const Me=Ae.findIndex(ue=>ue.id===S.id),X=Me>=0?Me:Ae.length;m(N,V,C.id,X)},[M,i,m]),q=D.useCallback(Z=>{const{active:C,over:S}=Z;if(w(null),!S)return;const N=M(C.id),V=M(S.id);if(!(!N||!V)&&N===V){const O=i.find(Me=>Me.id===N);if(!O)return;const j=O.items||[],P=j.findIndex(Me=>Me.id===C.id),Ae=j.findIndex(Me=>Me.id===S.id);P!==Ae&&P>=0&&Ae>=0&&g(N,X_(j,P,Ae))}},[M,i,g]),se=b?(ae=x[b])==null?void 0:ae.item:null;return I.jsxs(_k,{sensors:k,collisionDetection:w4,onDragStart:U,onDragOver:G,onDragEnd:q,children:[I.jsxs("div",{className:"pipeline-sections",children:[i.map(Z=>{const C=Z.items||[],S=C.map(N=>N.id);return I.jsxs("div",{className:"pipeline-section",children:[I.jsxs("div",{className:"pipeline-section-header",onClick:()=>a(Z.id),children:[I.jsx("span",{className:"pipeline-collapse-btn",children:Z.collapsed?"":""}),I.jsx(xy,{value:Z.title,onChange:N=>t(Z.id,{title:N}),className:"pipeline-section-title",placeholder:"Section title",singleClick:!0}),I.jsx("button",{className:"pipeline-section-delete",onClick:N=>{N.stopPropagation(),E(Z.id)},children:""})]}),!Z.collapsed&&I.jsx(n6,{sectionId:Z.id,children:I.jsx(qk,{items:S,strategy:zk,children:I.jsxs("div",{className:"pipeline-section-body",children:[C.map(N=>I.jsx(e6,{item:N,sectionId:Z.id,onUpdate:c,onDelete:f},N.id)),I.jsx("button",{className:"pipeline-add-item",onClick:()=>l(Z.id,{}),children:"+ Add"})]})})})]},Z.id)}),I.jsx("button",{className:"pipeline-add-section",onClick:()=>e("New Section"),children:"+ New Section"}),_&&I.jsx(D1,{title:"Delete Section",message:"This will delete the section and all its items.",onConfirm:()=>{r(_),E(null)},onClose:()=>E(null)})]}),I.jsx(kk,{children:se?I.jsx(t6,{item:se}):null})]})}const Ny="prayerTimesCache";function nR(i,e,t){return`${i}|${e}|${t}`}function qg(i,e,t){try{const r=localStorage.getItem(Ny);return r&&JSON.parse(r)[nR(i,e,t)]||null}catch{return null}}function r6(i,e,t,r){try{const a=localStorage.getItem(Ny),l=a?JSON.parse(a):{};l[nR(i,e,t)]=r;const c=Object.keys(l);c.length>30&&(c.sort(),delete l[c[0]]),localStorage.setItem(Ny,JSON.stringify(l))}catch{}}function s6({date:i,city:e="Lyon",country:t="France",lat:r,lng:a}={}){const l=i||Ic(),[c,f]=D.useState(()=>qg(l,e,t)),[m,g]=D.useState(!qg(l,e,t)),[_,E]=D.useState(null);return D.useEffect(()=>{const b=qg(l,e,t);if(b){f(b),g(!1);return}let w=!1;g(!0);async function k(){try{const x=bP(l);let M;if(r!=null&&a!=null)M=`https://api.aladhan.com/v1/timings/${x}?latitude=${r}&longitude=${a}`;else{const q=`${e},${t}`;M=`https://api.aladhan.com/v1/timingsByAddress/${x}?address=${encodeURIComponent(q)}`}const G=await(await fetch(M)).json();if(!w&&G.data){const q=G.data.timings,se={Fajr:q.Fajr,Dhuhr:q.Dhuhr,Asr:q.Asr,Maghrib:q.Maghrib,Isha:q.Isha};f(se),r6(l,e,t,se)}}catch(x){w||E(x.message)}finally{w||g(!1)}}return k(),()=>{w=!0}},[l,e,t,r,a]),{times:c,loading:m,error:_}}const a6=["pre-fajr","fajr-dhuhr","dhuhr-asr","asr-maghrib","maghrib-isha","post-isha"],o6={"pre-fajr":"Pre-Fajr","fajr-dhuhr":"Fajr  Dhuhr","dhuhr-asr":"Dhuhr  Asr","asr-maghrib":"Asr  Maghrib","maghrib-isha":"Maghrib  Isha","post-isha":"Post-Isha"};function ac(i){const[e,t]=i.split(":").map(Number);return e*60+t}function l6(i){return i=Math.round(i),`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function u6(i){if(!i)return null;const e=ac(i.Fajr),t=ac(i.Dhuhr),r=ac(i.Asr),a=ac(i.Maghrib),l=ac(i.Isha);return{"pre-fajr":{start:"00:00",end:i.Fajr,startMin:0,endMin:e},"fajr-dhuhr":{start:i.Fajr,end:i.Dhuhr,startMin:e,endMin:t},"dhuhr-asr":{start:i.Dhuhr,end:i.Asr,startMin:t,endMin:r},"asr-maghrib":{start:i.Asr,end:i.Maghrib,startMin:r,endMin:a},"maghrib-isha":{start:i.Maghrib,end:i.Isha,startMin:a,endMin:l},"post-isha":{start:i.Isha,end:"23:59",startMin:l,endMin:1439}}}function c6(i,e){if(!i.segment||!e||!e[i.segment])return i.time||"08:00";const r=e[i.segment].startMin+(i.offsetMinutes||0);return l6(Math.max(0,Math.min(1435,r)))}const oc=25;function h6(i){return i?[{id:"prayer-fajr",time:i.Fajr,activity:"Fajr",type:"prayer",icon:"",duration:oc,isPrayer:!0},{id:"prayer-dhuhr",time:i.Dhuhr,activity:"Dhuhr",type:"prayer",icon:"",duration:oc,isPrayer:!0},{id:"prayer-asr",time:i.Asr,activity:"Asr",type:"prayer",icon:"",duration:oc,isPrayer:!0},{id:"prayer-maghrib",time:i.Maghrib,activity:"Maghrib",type:"prayer",icon:"",duration:oc,isPrayer:!0},{id:"prayer-isha",time:i.Isha,activity:"Isha",type:"prayer",icon:"",duration:oc,isPrayer:!0}]:[]}const f6=60;function iR(i){const[e,t]=i.split(":").map(Number);return e*60+t}function YS(i){return i=Math.round(i),`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function d6(i,e=5){return Math.max(0,Math.min(1435,Math.round(i/e)*e))}function m6(i,{hourHeight:e=0,minBlockH:t=0}={}){if(!i.length)return[];const r=e>0&&t>0?t/e*60:0,a=i.map(E=>{const b=iR(E.time),w=E.duration||f6,k=r?b+Math.max(w,r):b+w;return{...E,startMin:b,endMin:b+w,visualEnd:k}});a.sort((E,b)=>E.startMin-b.startMin||b.endMin-b.startMin-(E.endMin-E.startMin));const l=[],c=[];for(const E of a){let b=-1;for(let w=0;w<l.length;w++)if(l[w]<=E.startMin){b=w;break}b===-1&&(b=l.length,l.push(0)),l[b]=E.visualEnd,c.push({...E,col:b})}const f=[];let m=[],g=0;for(const E of c)m.length===0||E.startMin<g?(m.push(E),g=Math.max(g,E.visualEnd)):(f.push(m),m=[E],g=E.visualEnd);m.length&&f.push(m);const _=[];for(const E of f){const b=Math.max(...E.map(w=>w.col))+1;for(const w of E)_.push({...w,totalCols:b})}return _}const vr=60,QS=24,Fg=60,p6=Array.from({length:24},(i,e)=>e),g6=["rgba(34, 139, 34, 0.03)","rgba(34, 139, 34, 0.06)"],$S={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},y6=["M","T","W","T","F","S","S"];function _6({date:i,plan:e,location:t,onOpenLocation:r,onUpdateBlocks:a,onMonth:l,onSelectDate:c,customTypes:f=[],customTypeColors:m={},onAddCustomType:g,onRemoveCustomType:_,pipelineSections:E=[],onAddSection:b,onUpdateSection:w,onDeleteSection:k,onToggleCollapse:x,onAddItem:M,onUpdateItem:U,onDeleteItem:G,onMoveItem:q,onReorderItems:se}){var vt,Pt;const[ae,Z]=D.useState(null),[C,S]=D.useState(null),N=D.useRef(null),V=wS(B_(i)),O=i===Ic(),j=wS(new Date),{times:P}=s6({date:i,city:t==null?void 0:t.city,country:t==null?void 0:t.country,lat:t==null?void 0:t.lat,lng:t==null?void 0:t.lng}),Ae=D.useMemo(()=>u6(P),[P]),Me=D.useMemo(()=>h6(P),[P]),X=((Pt=(vt=e==null?void 0:e.routine)==null?void 0:vt[V])==null?void 0:Pt.blocks)||[],ue=D.useMemo(()=>X.map(J=>J.segment&&Ae?{...J,time:c6(J,Ae)}:J),[X,Ae]),{userBlocks:_e,positionedPrayers:De}=D.useMemo(()=>{const J=ue.map(Ie=>({...Ie,duration:Ie.duration||Fg})),pe=[...Me,...J],Te=m6(pe,{hourHeight:vr,minBlockH:QS}),ke=[],Oe=[];for(const Ie of Te){const Ue={...Ie,top:Ie.startMin/60*vr,height:Math.max(Ie.duration/60*vr,QS)};Ie.isPrayer?Oe.push(Ue):ke.push(Ue)}return{userBlocks:ke,positionedPrayers:Oe}},[ue,Me]),Be=D.useMemo(()=>Ae?a6.map((J,pe)=>{const Te=Ae[J],ke=Te.startMin/60*vr,Oe=(Te.endMin-Te.startMin)/60*vr;return{id:J,top:ke,height:Oe,color:g6[pe%2],label:o6[J]}}):[],[Ae]),z=J=>{if(!e||J.target.closest(".timeline-block")||J.target.closest(".segment-label"))return;const pe=N.current.getBoundingClientRect(),Te=J.clientY-pe.top,ke=d6(Te/vr*60),Oe=YS(ke),Ie=crypto.randomUUID(),Ue={id:Ie,time:Oe,activity:"(New)",type:"neutral",icon:"",duration:Fg,segment:null,offsetMinutes:0,tasks:[]};a(V,[...X,Ue]),S(Ie)},ne=(J,pe)=>{const Te=X.map(ke=>ke.id===J?{...ke,time:pe,segment:null,offsetMinutes:0}:ke);a(V,Te)},Q=(J,pe,Te)=>{const ke=X.map(Oe=>Oe.id===J?{...Oe,time:pe,duration:Te,segment:null,offsetMinutes:0}:Oe);a(V,ke)},he=J=>{let pe=X.map(Te=>Te.id===J.id?J:Te);X.find(Te=>Te.id===J.id)||pe.push(J),a(V,pe),Z(null),S(null)},ge=J=>{a(V,X.filter(pe=>pe.id!==J)),Z(null),S(null)},ye=J=>{const pe=J.duration||Fg,Te=iR(J.time),ke=YS(Math.min(Te+pe,1435)),Oe={...J,id:crypto.randomUUID(),time:ke,segment:null,offsetMinutes:0,tasks:(J.tasks||[]).map(Ie=>({...Ie,id:crypto.randomUUID(),done:!1}))};a(V,[...X,Oe])},xe=(J,pe)=>{const Te=X.map(ke=>ke.id!==J?ke:{...ke,tasks:(ke.tasks||[]).map(Oe=>Oe.id===pe?{...Oe,done:!Oe.done}:Oe)});a(V,Te)},Ge=()=>{C&&(a(V,X.filter(J=>J.id!==C)),S(null)),Z(null)},[Pe,je]=D.useState(()=>{const J=new Date;return J.getHours()*60+J.getMinutes()});D.useEffect(()=>{if(!O)return;const J=setInterval(()=>{const pe=new Date;je(pe.getHours()*60+pe.getMinutes())},6e4);return()=>clearInterval(J)},[O]);const Mt=Pe/60*vr;return I.jsxs("div",{className:"daily-view",children:[I.jsxs("div",{className:"daily-header",children:[I.jsx("button",{className:"daily-back",onClick:l,children:" Month"}),I.jsxs("div",{className:"daily-date-info",children:[I.jsx("span",{className:"daily-day-name",children:$S[V]}),I.jsxs("span",{className:"daily-date-str",children:[Od(i),O?" (today)":""]})]}),e&&I.jsx("span",{className:"daily-plan-badge",style:{borderColor:e.color,color:e.color},children:e.label})]}),I.jsx("div",{className:"day-selector",children:z_.map((J,pe)=>I.jsx("button",{className:`day-btn${J===V?" active":""}${J===j?" today":""}`,onClick:()=>c(SP(i,J)),children:y6[pe]},J))}),P&&I.jsxs("div",{className:"prayer-banner",children:[I.jsxs("div",{className:"prayer-banner-title",onClick:r,style:{cursor:"pointer"},children:["PRAYER TIMES",t!=null&&t.city?`  ${t.city.toUpperCase()}`:""]}),I.jsx("div",{className:"prayer-times-row",children:Object.entries(P).map(([J,pe])=>I.jsxs("div",{className:"prayer-time-item",children:[I.jsx("span",{className:"prayer-name",children:J}),I.jsx("span",{className:"prayer-time",children:pe})]},J))})]}),!e&&I.jsxs("div",{className:"daily-empty",children:["No plan covers this date. Create a plan that includes ",Od(i),"."]}),e&&X.length===0&&I.jsxs("div",{className:"daily-hint",children:["Tap the timeline to add your first block for ",$S[V],"."]}),I.jsx("div",{className:"timeline-scroll",children:I.jsxs("div",{className:"timeline",ref:N,style:{height:24*vr},onClick:z,children:[Be.map(J=>I.jsx("div",{className:"segment-band",style:{top:J.top,height:J.height,background:J.color},children:I.jsx("span",{className:"segment-label",children:J.label})},J.id)),p6.map(J=>I.jsxs("div",{className:"hour-row",style:{top:J*vr,height:vr},children:[I.jsx("span",{className:"hour-label",children:EP(J*60)}),I.jsx("div",{className:"hour-line"})]},J)),O&&I.jsx("div",{className:"now-line",style:{top:Mt},children:I.jsx("div",{className:"now-dot"})}),De.map(J=>I.jsx(NS,{block:J,top:J.top,height:J.height,col:J.col,totalCols:J.totalCols,isPrayer:!0,onEdit:()=>{},onDelete:()=>{},onTimeChange:()=>{},onResize:()=>{}},J.id)),_e.map(J=>I.jsx(NS,{block:J,top:J.top,height:J.height,col:J.col,totalCols:J.totalCols,isNew:J.id===C,extraTypeColors:m,onEdit:pe=>{S(null),Z(pe)},onDelete:ge,onCopy:ye,onTimeChange:ne,onResize:Q,onToggleTask:xe},J.id))]})}),I.jsx(i6,{sections:E,addSection:b,updateSection:w,deleteSection:k,toggleCollapse:x,addItem:M,updateItem:U,deleteItem:G,moveItem:q,reorderItems:se}),ae&&I.jsx(r4,{block:ae,segments:Ae,customTypes:f,customTypeColors:m,onAddCustomType:g,onRemoveCustomType:_,onSave:he,onDelete:ge,onClose:Ge},ae.id+ae.time+(ae.duration||0))]})}function v6(i){const e=JSON.parse(i);if(Array.isArray(e))return{plans:e.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:[],pipelines:[]};if(e&&Array.isArray(e.plans))return{plans:e.plans.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:Array.isArray(e.customTypes)?e.customTypes:[],pipelines:Array.isArray(e.pipelines)?e.pipelines:[]};throw new Error("Unrecognized format")}function E6(i,e,t,r=[]){const a=new Set(e.map(f=>f.id)),l=new Set([...b1,...t.map(f=>f.key)]),c=new Set(r.map(f=>f.id));return{newPlans:i.plans.filter(f=>!a.has(f.id)),skippedPlans:i.plans.filter(f=>a.has(f.id)),newTypes:i.customTypes.filter(f=>!l.has(f.key)),skippedTypes:i.customTypes.filter(f=>l.has(f.key)),newPipelines:(i.pipelines||[]).filter(f=>!c.has(f.id)),skippedPipelines:(i.pipelines||[]).filter(f=>c.has(f.id))}}function T6({file:i,existingPlans:e,existingCustomTypes:t,existingPipelines:r=[],onConfirm:a,onClose:l}){const[c,f]=D.useState(null),[m,g]=D.useState(null),[_,E]=D.useState(null),[b,w]=D.useState(new Set),[k,x]=D.useState(new Set),[M,U]=D.useState(new Set);D.useState(()=>{const S=new FileReader;S.onload=N=>{try{const V=v6(N.target.result);if(V.plans.length===0&&V.customTypes.length===0){f("File contains no data to import.");return}const O=E6(V,e,t,r);g(V),E(O),w(new Set(O.newPlans.map(j=>j.id))),x(new Set(O.newTypes.map(j=>j.key))),U(new Set(O.newPipelines.map(j=>j.id)))}catch(V){f("Invalid file: "+V.message)}},S.readAsText(i)});const G=D.useCallback(S=>{w(N=>{const V=new Set(N);return V.has(S)?V.delete(S):V.add(S),V})},[]),q=D.useCallback(S=>{x(N=>{const V=new Set(N);return V.has(S)?V.delete(S):V.add(S),V})},[]),se=D.useCallback(S=>{U(N=>{const V=new Set(N);return V.has(S)?V.delete(S):V.add(S),V})},[]),ae=D.useCallback(()=>{if(!_)return;const S=_.newPlans.filter(O=>b.has(O.id)),N=_.newTypes.filter(O=>k.has(O.key)),V=_.newPipelines.filter(O=>M.has(O.id));a(S,N,V)},[_,b,k,M,a]),Z=b.size+k.size+M.size,C=_&&_.newPlans.length===0&&_.newTypes.length===0&&_.newPipelines.length===0;return I.jsx("div",{className:"modal-overlay",onClick:l,children:I.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Import Data"}),c&&I.jsxs(I.Fragment,{children:[I.jsx("p",{style:{color:"#ef4444",fontSize:13,margin:"0 0 16px"},children:c}),I.jsx("div",{className:"modal-actions",children:I.jsx("button",{className:"btn-secondary",onClick:l,children:"Close"})})]}),!c&&!_&&I.jsx("p",{style:{color:"#94a3b8",fontSize:13},children:"Reading file..."}),_&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),_.newPlans.length>0&&I.jsx("div",{className:"import-items",children:_.newPlans.map(S=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:b.has(S.id),onChange:()=>G(S.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:S.label}),S.startDate&&I.jsxs("span",{className:"import-item-date",children:[S.startDate,"  ",S.endDate]})]},S.id))}),_.skippedPlans.length>0&&I.jsx("div",{className:"import-items",children:_.skippedPlans.map(S=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:S.label})]},S.id))}),m.plans.length===0&&I.jsx("p",{className:"import-empty",children:"No plans in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),_.newTypes.length>0&&I.jsx("div",{className:"import-items",children:_.newTypes.map(S=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:k.has(S.key),onChange:()=>q(S.key)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:S.name})]},S.key))}),_.skippedTypes.length>0&&I.jsx("div",{className:"import-items",children:_.skippedTypes.map(S=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:S.name||S.key})]},S.key))}),m.customTypes.length===0&&I.jsx("p",{className:"import-empty",children:"No custom types in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),_.newPipelines.length>0&&I.jsx("div",{className:"import-items",children:_.newPipelines.map(S=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:M.has(S.id),onChange:()=>se(S.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:S.title}),I.jsxs("span",{className:"import-item-date",children:[(S.items||[]).length," items"]})]},S.id))}),_.skippedPipelines.length>0&&I.jsx("div",{className:"import-items",children:_.skippedPipelines.map(S=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:S.title})]},S.id))}),(m.pipelines||[]).length===0&&I.jsx("p",{className:"import-empty",children:"No pipeline sections in file"})]}),C&&I.jsx("p",{style:{color:"#f59e0b",fontSize:13,marginTop:8},children:"Everything already exists. Nothing to import."}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:l,children:"Cancel"}),!C&&I.jsxs("button",{className:"btn-primary",onClick:ae,disabled:Z===0,children:["Import",Z>0?` ${Z} item${Z!==1?"s":""}`:""]})]})]})]})})}function b6({plans:i,customTypes:e,pipelineSections:t=[],onClose:r}){const[a,l]=D.useState(()=>new Set(i.map(x=>x.id))),[c,f]=D.useState(()=>new Set(e.map(x=>x.key))),[m,g]=D.useState(()=>new Set(t.map(x=>x.id))),_=D.useCallback(x=>{l(M=>{const U=new Set(M);return U.has(x)?U.delete(x):U.add(x),U})},[]),E=D.useCallback(x=>{f(M=>{const U=new Set(M);return U.has(x)?U.delete(x):U.add(x),U})},[]),b=D.useCallback(x=>{g(M=>{const U=new Set(M);return U.has(x)?U.delete(x):U.add(x),U})},[]),w=a.size+c.size+m.size,k=D.useCallback(()=>{const x=i.filter(Z=>a.has(Z.id)),M=e.filter(Z=>c.has(Z.key)).map(Z=>({key:Z.key,name:Z.name})),U=t.filter(Z=>m.has(Z.id)),G={version:2,plans:x,customTypes:M,pipelines:U},q=new Blob([JSON.stringify(G,null,2)],{type:"application/json"}),se=URL.createObjectURL(q),ae=document.createElement("a");ae.href=se,ae.download="entrypoint-v2-plans.json",ae.click(),URL.revokeObjectURL(se),r()},[i,e,t,a,c,m,r]);return I.jsx("div",{className:"modal-overlay",onClick:r,children:I.jsxs("div",{className:"modal",onClick:x=>x.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Export Data"}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),i.length>0?I.jsx("div",{className:"import-items",children:i.map(x=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:a.has(x.id),onChange:()=>_(x.id)}),I.jsx("span",{className:"import-item-label",children:x.label}),x.startDate&&I.jsxs("span",{className:"import-item-date",children:[x.startDate,"  ",x.endDate]})]},x.id))}):I.jsx("p",{className:"import-empty",children:"No plans to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),e.length>0?I.jsx("div",{className:"import-items",children:e.map(x=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:c.has(x.key),onChange:()=>E(x.key)}),I.jsx("span",{className:"import-item-label",children:x.name})]},x.key))}):I.jsx("p",{className:"import-empty",children:"No custom types to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),t.length>0?I.jsx("div",{className:"import-items",children:t.map(x=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:m.has(x.id),onChange:()=>b(x.id)}),I.jsx("span",{className:"import-item-label",children:x.title}),I.jsxs("span",{className:"import-item-date",children:[(x.items||[]).length," items"]})]},x.id))}):I.jsx("p",{className:"import-empty",children:"No pipeline sections to export"})]}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:r,children:"Cancel"}),I.jsxs("button",{className:"btn-primary",onClick:k,disabled:w===0,children:["Export",w>0?` ${w} item${w!==1?"s":""}`:""]})]})]})})}function S6({onSave:i,onClose:e}){const[t,r]=D.useState(""),[a,l]=D.useState("");D.useEffect(()=>{const m=g=>{g.key==="Escape"&&e&&e()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[e]);const c=()=>{const m=t.trim(),g=a.trim();!m||!g||i({city:m,country:g})},f=m=>{m.key==="Enter"&&c()};return I.jsx("div",{className:"modal-overlay",onClick:e||void 0,children:I.jsxs("div",{className:"modal",onClick:m=>m.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:"Set Your Location"}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 16px",lineHeight:1.5},children:"Used to calculate prayer times."}),I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[I.jsx("input",{className:"modal-input",placeholder:"City (e.g. Lyon)",value:t,onChange:m=>r(m.target.value),onKeyDown:f,autoFocus:!0}),I.jsx("input",{className:"modal-input",placeholder:"Country (e.g. France)",value:a,onChange:m=>l(m.target.value),onKeyDown:f})]}),I.jsxs("div",{className:"modal-actions",children:[e&&I.jsx("button",{className:"btn-secondary",onClick:e,children:"Cancel"}),I.jsx("button",{className:"btn-primary",onClick:c,disabled:!t.trim()||!a.trim(),children:"Save"})]})]})})}function XS(){const i=j_(),e=(i==null?void 0:i.user)||null,t=(i==null?void 0:i.logout)||null,{plans:r,loading:a,activePlan:l,activePlanId:c,setActivePlanId:f,createPlan:m,updatePlan:g,deletePlan:_,updateRoutineBlocks:E,getPlanForDate:b,mergePlans:w}=kP((e==null?void 0:e.uid)||null),{selectedDate:k,setSelectedDate:x,today:M,viewYear:U,viewMonth:G,prevMonth:q,nextMonth:se,setViewYearMonth:ae}=qP(),{customTypes:Z,customTypeColors:C,addCustomType:S,removeCustomType:N,mergeCustomTypes:V}=QP(),{location:O,setLocation:j,hasLocation:P,geoFailed:Ae}=JP(),[Me,X]=D.useState(!1),{sections:ue,addSection:_e,updateSection:De,deleteSection:Be,reorderSections:z,toggleCollapse:ne,addItem:Q,updateItem:he,deleteItem:ge,mergeSections:ye}=BP((e==null?void 0:e.uid)||null),xe=D.useRef(null),[Ge,Pe]=D.useState(null),[je,Mt]=D.useState(!1),[vt,Pt]=D.useState("daily"),[J,pe]=D.useState(null),[Te,ke]=D.useState(null),[Oe,Ie]=D.useState(!1),Ue=D.useCallback((qe,Tt,on)=>{qe.length>0&&w(qe),Tt.length>0&&V(Tt),on&&on.length>0&&ye(on),ke(null)},[w,V,ye]),jt=D.useCallback(qe=>{if(!qe.startDate)return;f(qe.id),x(qe.startDate);const Tt=new Date(qe.startDate+"T00:00:00");ae(Tt.getFullYear(),Tt.getMonth()),pe(qe.startDate),setTimeout(()=>pe(null),1500)},[ae,x,f]),Wi=D.useCallback(qe=>{const Tt=r.find(on=>on.id===qe);Tt!=null&&Tt.startDate?jt(Tt):f(qe)},[r,jt,f]),Zi=D.useCallback(qe=>{x(qe);const Tt=b(qe);Tt&&f(Tt.id),Pt("daily")},[x,b,f]),Qt=D.useCallback(qe=>{x(qe);const Tt=b(qe);Tt&&f(Tt.id)},[x,b,f]),ki=D.useCallback(()=>{Pt("calendar")},[]),vi=b(k),Tn=l&&(vi==null?void 0:vi.id)===l.id?l:vi,bn=D.useCallback((qe,Tt)=>{Tn&&E(Tn.id,qe,Tt)},[Tn,E]);return a?I.jsx("div",{className:"loading",children:"loading plans..."}):I.jsxs("div",{className:"app",children:[I.jsxs("header",{className:"app-header",children:[I.jsxs("div",{children:[I.jsx("div",{className:"header-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"header-title",children:"Lock-In"}),I.jsx("div",{className:"header-quote",children:'"While enjoying every single day on the way."'})]}),I.jsxs("div",{className:"header-actions",children:[I.jsx("button",{className:"header-btn",onClick:()=>Ie(!0),title:"Export",children:"Export"}),I.jsx("button",{className:"header-btn",onClick:()=>{var qe;return(qe=xe.current)==null?void 0:qe.click()},title:"Import",children:"Import"}),I.jsx("input",{ref:xe,type:"file",accept:".json",hidden:!0,onChange:qe=>{qe.target.files[0]&&ke(qe.target.files[0]),qe.target.value=""}}),t&&I.jsx("button",{className:"logout-btn",onClick:t,children:"Logout"})]})]}),I.jsx(WP,{plans:r,activePlanId:l==null?void 0:l.id,onSelect:Wi,onCreate:()=>Mt(!0),onEdit:Pe,onDelete:_}),vt==="calendar"?I.jsx(n4,{viewYear:U,viewMonth:G,selectedDate:k,today:M,plans:r,highlightDate:J,onPrevMonth:q,onNextMonth:se,onGoToday:()=>Zi(M),onSelectDate:Zi,onPlanClick:jt}):I.jsx(_6,{date:k,plan:Tn,location:O,onOpenLocation:()=>X(!0),onUpdateBlocks:bn,onSelectDate:Qt,onMonth:ki,customTypes:Z,customTypeColors:C,onAddCustomType:S,onRemoveCustomType:N,pipelineSections:ue,onAddSection:_e,onUpdateSection:De,onDeleteSection:Be,onToggleCollapse:ne,onAddItem:Q,onUpdateItem:he,onDeleteItem:ge}),je&&I.jsx(DS,{plan:null,plans:r,onSave:qe=>{m(qe),Mt(!1)},onClose:()=>Mt(!1)}),Ge&&I.jsx(DS,{plan:Ge,plans:r,onSave:qe=>{g(Ge.id,qe),Pe(null)},onClose:()=>Pe(null)}),Oe&&I.jsx(b6,{plans:r,customTypes:Z,pipelineSections:ue,onClose:()=>Ie(!1)}),Te&&I.jsx(T6,{file:Te,existingPlans:r,existingCustomTypes:Z,existingPipelines:ue,onConfirm:Ue,onClose:()=>ke(null)}),(!P&&Ae||Me)&&I.jsx(S6,{onSave:qe=>{j(qe),X(!1)},onClose:P?()=>X(!1):void 0})]})}FC.createRoot(document.getElementById("root")).render(I.jsx(D.StrictMode,{children:zl?I.jsx(pP,{children:I.jsx(yP,{children:I.jsx(XS,{})})}):I.jsx(XS,{})}));
