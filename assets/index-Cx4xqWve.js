(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Pp={exports:{}},xu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function iR(){if(AT)return xu;AT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return xu.Fragment=e,xu.jsx=t,xu.jsxs=t,xu}var IT;function sR(){return IT||(IT=1,Pp.exports=iR()),Pp.exports}var I=sR(),kp={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wT;function rR(){if(wT)return xe;wT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,j={};function Q(k,ee,Y){this.props=k,this.context=ee,this.refs=j,this.updater=Y||x}Q.prototype.isReactComponent={},Q.prototype.setState=function(k,ee){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ee,"setState")},Q.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function re(){}re.prototype=Q.prototype;function oe(k,ee,Y){this.props=k,this.context=ee,this.refs=j,this.updater=Y||x}var _e=oe.prototype=new re;_e.constructor=oe,C(_e,Q.prototype),_e.isPureReactComponent=!0;var ve=Array.isArray;function he(){}var D={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(k,ee,Y){var ae=Y.ref;return{$$typeof:r,type:k,key:ee,ref:ae!==void 0?ae:null,props:Y}}function P(k,ee){return N(k.type,ee,k.props)}function M(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function U(k){var ee={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(Y){return ee[Y]})}var V=/\/+/g;function Ke(k,ee){return typeof k=="object"&&k!==null&&k.key!=null?U(""+k.key):ee.toString(36)}function $e(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(he,he):(k.status="pending",k.then(function(ee){k.status==="pending"&&(k.status="fulfilled",k.value=ee)},function(ee){k.status==="pending"&&(k.status="rejected",k.reason=ee)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function J(k,ee,Y,ae,me){var ie=typeof k;(ie==="undefined"||ie==="boolean")&&(k=null);var pe=!1;if(k===null)pe=!0;else switch(ie){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(k.$$typeof){case r:case e:pe=!0;break;case v:return pe=k._init,J(pe(k._payload),ee,Y,ae,me)}}if(pe)return me=me(k),pe=ae===""?"."+Ke(k,0):ae,ve(me)?(Y="",pe!=null&&(Y=pe.replace(V,"$&/")+"/"),J(me,ee,Y,"",function(le){return le})):me!=null&&(M(me)&&(me=P(me,Y+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(V,"$&/")+"/")+pe)),ee.push(me)),1;pe=0;var Re=ae===""?".":ae+":";if(ve(k))for(var Pe=0;Pe<k.length;Pe++)ae=k[Pe],ie=Re+Ke(ae,Pe),pe+=J(ae,ee,Y,ie,me);else if(Pe=R(k),typeof Pe=="function")for(k=Pe.call(k),Pe=0;!(ae=k.next()).done;)ae=ae.value,ie=Re+Ke(ae,Pe++),pe+=J(ae,ee,Y,ie,me);else if(ie==="object"){if(typeof k.then=="function")return J($e(k),ee,Y,ae,me);throw ee=String(k),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return pe}function ue(k,ee,Y){if(k==null)return k;var ae=[],me=0;return J(k,ae,"","",function(ie){return ee.call(Y,ie,me++)}),ae}function Ee(k){if(k._status===-1){var ee=k._result;ee=ee(),ee.then(function(Y){(k._status===0||k._status===-1)&&(k._status=1,k._result=Y)},function(Y){(k._status===0||k._status===-1)&&(k._status=2,k._result=Y)}),k._status===-1&&(k._status=0,k._result=ee)}if(k._status===1)return k._result.default;throw k._result}var Ve=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Ue={map:ue,forEach:function(k,ee,Y){ue(k,function(){ee.apply(this,arguments)},Y)},count:function(k){var ee=0;return ue(k,function(){ee++}),ee},toArray:function(k){return ue(k,function(ee){return ee})||[]},only:function(k){if(!M(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return xe.Activity=T,xe.Children=Ue,xe.Component=Q,xe.Fragment=t,xe.Profiler=a,xe.PureComponent=oe,xe.StrictMode=i,xe.Suspense=p,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,xe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},xe.cache=function(k){return function(){return k.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(k,ee,Y){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ae=C({},k.props),me=k.key;if(ee!=null)for(ie in ee.key!==void 0&&(me=""+ee.key),ee)!A.call(ee,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&ee.ref===void 0||(ae[ie]=ee[ie]);var ie=arguments.length-2;if(ie===1)ae.children=Y;else if(1<ie){for(var pe=Array(ie),Re=0;Re<ie;Re++)pe[Re]=arguments[Re+2];ae.children=pe}return N(k.type,me,ae)},xe.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},xe.createElement=function(k,ee,Y){var ae,me={},ie=null;if(ee!=null)for(ae in ee.key!==void 0&&(ie=""+ee.key),ee)A.call(ee,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(me[ae]=ee[ae]);var pe=arguments.length-2;if(pe===1)me.children=Y;else if(1<pe){for(var Re=Array(pe),Pe=0;Pe<pe;Pe++)Re[Pe]=arguments[Pe+2];me.children=Re}if(k&&k.defaultProps)for(ae in pe=k.defaultProps,pe)me[ae]===void 0&&(me[ae]=pe[ae]);return N(k,ie,me)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(k){return{$$typeof:d,render:k}},xe.isValidElement=M,xe.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:Ee}},xe.memo=function(k,ee){return{$$typeof:g,type:k,compare:ee===void 0?null:ee}},xe.startTransition=function(k){var ee=D.T,Y={};D.T=Y;try{var ae=k(),me=D.S;me!==null&&me(Y,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(he,Ve)}catch(ie){Ve(ie)}finally{ee!==null&&Y.types!==null&&(ee.types=Y.types),D.T=ee}},xe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},xe.use=function(k){return D.H.use(k)},xe.useActionState=function(k,ee,Y){return D.H.useActionState(k,ee,Y)},xe.useCallback=function(k,ee){return D.H.useCallback(k,ee)},xe.useContext=function(k){return D.H.useContext(k)},xe.useDebugValue=function(){},xe.useDeferredValue=function(k,ee){return D.H.useDeferredValue(k,ee)},xe.useEffect=function(k,ee){return D.H.useEffect(k,ee)},xe.useEffectEvent=function(k){return D.H.useEffectEvent(k)},xe.useId=function(){return D.H.useId()},xe.useImperativeHandle=function(k,ee,Y){return D.H.useImperativeHandle(k,ee,Y)},xe.useInsertionEffect=function(k,ee){return D.H.useInsertionEffect(k,ee)},xe.useLayoutEffect=function(k,ee){return D.H.useLayoutEffect(k,ee)},xe.useMemo=function(k,ee){return D.H.useMemo(k,ee)},xe.useOptimistic=function(k,ee){return D.H.useOptimistic(k,ee)},xe.useReducer=function(k,ee,Y){return D.H.useReducer(k,ee,Y)},xe.useRef=function(k){return D.H.useRef(k)},xe.useState=function(k){return D.H.useState(k)},xe.useSyncExternalStore=function(k,ee,Y){return D.H.useSyncExternalStore(k,ee,Y)},xe.useTransition=function(){return D.H.useTransition()},xe.version="19.2.4",xe}var RT;function Yg(){return RT||(RT=1,kp.exports=rR()),kp.exports}var G=Yg(),Lp={exports:{}},Vu={},Up={exports:{}},jp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT;function aR(){return CT||(CT=1,(function(r){function e(J,ue){var Ee=J.length;J.push(ue);e:for(;0<Ee;){var Ve=Ee-1>>>1,Ue=J[Ve];if(0<a(Ue,ue))J[Ve]=ue,J[Ee]=Ue,Ee=Ve;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var ue=J[0],Ee=J.pop();if(Ee!==ue){J[0]=Ee;e:for(var Ve=0,Ue=J.length,k=Ue>>>1;Ve<k;){var ee=2*(Ve+1)-1,Y=J[ee],ae=ee+1,me=J[ae];if(0>a(Y,Ee))ae<Ue&&0>a(me,Y)?(J[Ve]=me,J[ae]=Ee,Ve=ae):(J[Ve]=Y,J[ee]=Ee,Ve=ee);else if(ae<Ue&&0>a(me,Ee))J[Ve]=me,J[ae]=Ee,Ve=ae;else break e}}return ue}function a(J,ue){var Ee=J.sortIndex-ue.sortIndex;return Ee!==0?Ee:J.id-ue.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,T=null,S=3,R=!1,x=!1,C=!1,j=!1,Q=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function _e(J){for(var ue=t(g);ue!==null;){if(ue.callback===null)i(g);else if(ue.startTime<=J)i(g),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(g)}}function ve(J){if(C=!1,_e(J),!x)if(t(p)!==null)x=!0,he||(he=!0,U());else{var ue=t(g);ue!==null&&$e(ve,ue.startTime-J)}}var he=!1,D=-1,A=5,N=-1;function P(){return j?!0:!(r.unstable_now()-N<A)}function M(){if(j=!1,he){var J=r.unstable_now();N=J;var ue=!0;try{e:{x=!1,C&&(C=!1,re(D),D=-1),R=!0;var Ee=S;try{t:{for(_e(J),T=t(p);T!==null&&!(T.expirationTime>J&&P());){var Ve=T.callback;if(typeof Ve=="function"){T.callback=null,S=T.priorityLevel;var Ue=Ve(T.expirationTime<=J);if(J=r.unstable_now(),typeof Ue=="function"){T.callback=Ue,_e(J),ue=!0;break t}T===t(p)&&i(p),_e(J)}else i(p);T=t(p)}if(T!==null)ue=!0;else{var k=t(g);k!==null&&$e(ve,k.startTime-J),ue=!1}}break e}finally{T=null,S=Ee,R=!1}ue=void 0}}finally{ue?U():he=!1}}}var U;if(typeof oe=="function")U=function(){oe(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Ke=V.port2;V.port1.onmessage=M,U=function(){Ke.postMessage(null)}}else U=function(){Q(M,0)};function $e(J,ue){D=Q(function(){J(r.unstable_now())},ue)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(J){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var Ee=S;S=ue;try{return J()}finally{S=Ee}},r.unstable_requestPaint=function(){j=!0},r.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Ee=S;S=J;try{return ue()}finally{S=Ee}},r.unstable_scheduleCallback=function(J,ue,Ee){var Ve=r.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ve+Ee:Ve):Ee=Ve,J){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=Ee+Ue,J={id:v++,callback:ue,priorityLevel:J,startTime:Ee,expirationTime:Ue,sortIndex:-1},Ee>Ve?(J.sortIndex=Ee,e(g,J),t(p)===null&&J===t(g)&&(C?(re(D),D=-1):C=!0,$e(ve,Ee-Ve))):(J.sortIndex=Ue,e(p,J),x||R||(x=!0,he||(he=!0,U()))),J},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(J){var ue=S;return function(){var Ee=S;S=ue;try{return J.apply(this,arguments)}finally{S=Ee}}}})(jp)),jp}var DT;function oR(){return DT||(DT=1,Up.exports=aR()),Up.exports}var zp={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function lR(){if(NT)return cn;NT=1;var r=Yg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:g,implementation:v}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},cn.flushSync=function(p){var g=c.T,v=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=v,i.d.f()}},cn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},cn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},cn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&i.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},cn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},cn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},cn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},cn.requestFormReset=function(p){i.d.r(p)},cn.unstable_batchedUpdates=function(p,g){return p(g)},cn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},cn.version="19.2.4",cn}var xT;function uR(){if(xT)return zp.exports;xT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zp.exports=lR(),zp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function cR(){if(VT)return Vu;VT=1;var r=oR(),e=Yg(),t=uR();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,b=f.child;b;){if(b===o){_=!0,o=f,u=m;break}if(b===u){_=!0,u=f,o=m;break}b=b.sibling}if(!_){for(b=m.child;b;){if(b===o){_=!0,o=m,u=f;break}if(b===u){_=!0,u=m,o=f;break}b=b.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var V=Symbol.for("react.client.reference");function Ke(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===V?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case Q:return"Profiler";case j:return"StrictMode";case ve:return"Suspense";case he:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case oe:return n.displayName||"Context";case re:return(n._context.displayName||"Context")+".Consumer";case _e:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return s=n.displayName||null,s!==null?s:Ke(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return Ke(n(s))}catch{}}return null}var $e=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Ve=[],Ue=-1;function k(n){return{current:n}}function ee(n){0>Ue||(n.current=Ve[Ue],Ve[Ue]=null,Ue--)}function Y(n,s){Ue++,Ve[Ue]=n.current,n.current=s}var ae=k(null),me=k(null),ie=k(null),pe=k(null);function Re(n,s){switch(Y(ie,s),Y(me,n),Y(ae,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?YE(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=YE(s),n=QE(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ee(ae),Y(ae,n)}function Pe(){ee(ae),ee(me),ee(ie)}function le(n){n.memoizedState!==null&&Y(pe,n);var s=ae.current,o=QE(s,n.type);s!==o&&(Y(me,n),Y(ae,o))}function Ne(n){me.current===n&&(ee(ae),ee(me)),pe.current===n&&(ee(pe),Ru._currentValue=Ee)}var Ye,Et;function dt(n){if(Ye===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ye=s&&s[1]||"",Et=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+n+Et}var ai=!1;function Dn(n,s){if(!n||ai)return"";ai=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var K=X}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(X){K=X}n.call(ne.prototype)}}else{try{throw Error()}catch(X){K=X}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],b=m[1];if(_&&b){var O=_.split(`
`),H=b.split(`
`);for(f=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===O.length||f===H.length)for(u=O.length-1,f=H.length-1;1<=u&&0<=f&&O[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(O[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||O[u]!==H[f]){var Z=`
`+O[u].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=u&&0<=f);break}}}finally{ai=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?dt(o):""}function Br(n,s){switch(n.tag){case 26:case 27:case 5:return dt(n.type);case 16:return dt("Lazy");case 13:return n.child!==s&&s!==null?dt("Suspense Fallback"):dt("Suspense");case 19:return dt("SuspenseList");case 0:case 15:return Dn(n.type,!1);case 11:return Dn(n.type.render,!1);case 1:return Dn(n.type,!0);case 31:return dt("Activity");default:return""}}function Ps(n){try{var s="",o=null;do s+=Br(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var bt=Object.prototype.hasOwnProperty,Tt=r.unstable_scheduleCallback,Ai=r.unstable_cancelCallback,Ya=r.unstable_shouldYield,Qa=r.unstable_requestPaint,tn=r.unstable_now,Hn=r.unstable_getCurrentPriorityLevel,Ii=r.unstable_ImmediatePriority,qr=r.unstable_UserBlockingPriority,ke=r.unstable_NormalPriority,At=r.unstable_LowPriority,wi=r.unstable_IdlePriority,zc=r.log,Bc=r.unstable_setDisableYieldValue,oi=null,nn=null;function Gn(n){if(typeof zc=="function"&&Bc(n),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(oi,n)}catch{}}var Ct=Math.clz32?Math.clz32:Fc,qc=Math.log,$a=Math.LN2;function Fc(n){return n>>>=0,n===0?32:31-(qc(n)/$a|0)|0}var Ri=256,Fr=262144,kt=4194304;function Ci(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Di(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~m,u!==0?f=Ci(u):(_&=b,_!==0?f=Ci(_):o||(o=b&~n,o!==0&&(f=Ci(o))))):(b=u&~m,b!==0?f=Ci(b):_!==0?f=Ci(_):o||(o=u&~n,o!==0&&(f=Ci(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function li(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function jd(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hc(){var n=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),n}function Ni(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Hr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function zd(n,s,o,u,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var b=n.entanglements,O=n.expirationTimes,H=n.hiddenUpdates;for(o=_&~o;0<o;){var Z=31-Ct(o),ne=1<<Z;b[Z]=0,O[Z]=-1;var K=H[Z];if(K!==null)for(H[Z]=null,Z=0;Z<K.length;Z++){var X=K[Z];X!==null&&(X.lane&=-536870913)}o&=~ne}u!==0&&Gr(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~s))}function Gr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Ct(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Vl(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-Ct(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Ml(n,s){var o=s&-s;return o=(o&42)!==0?1:Kr(o),(o&(n.suspendedLanes|s))!==0?0:o}function Kr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function is(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Gc(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:yT(n.type))}function ui(n,s){var o=ue.p;try{return ue.p=n,s()}finally{ue.p=o}}var ci=Math.random().toString(36).slice(2),Lt="__reactFiber$"+ci,Xt="__reactProps$"+ci,xi="__reactContainer$"+ci,Xa="__reactEvents$"+ci,Bd="__reactListeners$"+ci,Kc="__reactHandles$"+ci,Yc="__reactResources$"+ci,Vi="__reactMarker$"+ci;function Ja(n){delete n[Lt],delete n[Xt],delete n[Xa],delete n[Bd],delete n[Kc]}function Mi(n){var s=n[Lt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[xi]||o[Lt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=tT(n);n!==null;){if(o=n[Lt])return o;n=tT(n)}return s}n=o,o=n.parentNode}return null}function Kn(n){if(n=n[Lt]||n[xi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Nn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Oi(n){var s=n[Yc];return s||(s=n[Yc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ut(n){n[Vi]=!0}var Ol=new Set,Pl={};function Pi(n,s){ki(n,s),ki(n+"Capture",s)}function ki(n,s){for(Pl[n]=s,n=0;n<s.length;n++)Ol.add(s[n])}var kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ll={},Ul={};function Qc(n){return bt.call(Ul,n)?!0:bt.call(Ll,n)?!1:kl.test(n)?Ul[n]=!0:(Ll[n]=!0,!1)}function Wa(n,s,o){if(Qc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function xn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function jt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Jt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ks(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function jl(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function nt(n){if(!n._valueTracker){var s=ks(n)?"checked":"value";n._valueTracker=jl(n,s,""+n[s])}}function Yr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=ks(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Li(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Qr=/[\n"\\]/g;function En(n){return n.replace(Qr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Za(n,s,o,u,f,m,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Jt(s)):n.value!==""+Jt(s)&&(n.value=""+Jt(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?zl(n,_,Jt(s)):o!=null?zl(n,_,Jt(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Jt(b):n.removeAttribute("name")}function $c(n,s,o,u,f,m,_,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){nt(n);return}o=o!=null?""+Jt(o):"",s=s!=null?""+Jt(s):o,b||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),nt(n)}function zl(n,s,o){s==="number"&&Li(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ls(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Jt(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Xc(n,s,o){if(s!=null&&(s=""+Jt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Jt(o):""}function Us(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if($e(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Jt(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),nt(n)}function Tn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Jc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bl(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||Jc.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function ql(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Bl(n,f,u)}else for(var m in s)s.hasOwnProperty(m)&&Bl(n,m,s[m])}function eo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(n){return js.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function hi(){}var Fl=null;function Yn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zs=null,Ui=null;function $r(n){var s=Kn(n);if(s&&(n=s.stateNode)){var o=n[Xt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Za(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+En(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Xt]||null;if(!f)throw Error(i(90));Za(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Yr(u)}break e;case"textarea":Xc(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ls(n,!!o.multiple,s,!1)}}}var no=!1;function Bs(n,s,o){if(no)return n(s,o);no=!0;try{var u=n(s);return u}finally{if(no=!1,(zs!==null||Ui!==null)&&(Gh(),zs&&(s=zs,n=Ui,Ui=zs=null,$r(s),n)))for(s=0;s<n.length;s++)$r(n[s])}}function fi(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Xt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xr=!1;if(Qn)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{Xr=!1}var ji=null,Hl=null,Jr=null;function Gl(){if(Jr)return Jr;var n,s=Hl,o=s.length,u,f="value"in ji?ji.value:ji.textContent,m=f.length;for(n=0;n<o&&s[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&s[o-u]===f[m-u];u++);return Jr=f.slice(n,1<u?1-u:void 0)}function Wr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ss(){return!0}function di(){return!1}function sn(n){function s(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(o=n[b],this[b]=o?o(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ss:di,this.isPropagationStopped=di,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),s}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zi=sn(rs),qs=T({},rs,{view:0,detail:0}),Kl=sn(qs),Fs,io,Bi,so=T({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bi&&(Bi&&n.type==="mousemove"?(Fs=n.screenX-Bi.screenX,io=n.screenY-Bi.screenY):io=Fs=0,Bi=n),Fs)},movementY:function(n){return"movementY"in n?n.movementY:io}}),Yl=sn(so),Zr=T({},so,{dataTransfer:0}),Zc=sn(Zr),eh=T({},qs,{relatedTarget:0}),ea=sn(eh),Ql=T({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),th=sn(Ql),ro=T({},rs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),nh=sn(ro),ih=T({},rs,{data:0}),qi=sn(ih),sh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=ah[n])?!!s[n]:!1}function Hs(){return oh}var gn=T({},qs,{key:function(n){if(n.key){var s=sh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Wr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hs,charCode:function(n){return n.type==="keypress"?Wr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),lh=sn(gn),uh=T({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),as=sn(uh),h=T({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hs}),y=sn(h),E=T({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=sn(E),q=T({},so,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$=sn(q),fe=T({},rs,{newState:0,oldState:0}),Me=sn(fe),Dt=[9,13,27,32],Ze=Qn&&"CompositionEvent"in window,yt=null;Qn&&"documentMode"in document&&(yt=document.documentMode);var $n=Qn&&"TextEvent"in window&&!yt,Fi=Qn&&(!Ze||yt&&8<yt&&11>=yt),mi=" ",pi=!1;function ta(n,s){switch(n){case"keyup":return Dt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var oo=!1;function Rw(n,s){switch(n){case"compositionend":return ao(s);case"keypress":return s.which!==32?null:(pi=!0,mi);case"textInput":return n=s.data,n===mi&&pi?null:n;default:return null}}function Cw(n,s){if(oo)return n==="compositionend"||!Ze&&ta(n,s)?(n=Gl(),Jr=Hl=ji=null,oo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Fi&&s.locale!=="ko"?null:s.data;default:return null}}var Dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Dw[n.type]:s==="textarea"}function r_(n,s,o,u){zs?Ui?Ui.push(u):Ui=[u]:zs=u,s=Wh(s,"onChange"),0<s.length&&(o=new zi("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var $l=null,Xl=null;function Nw(n){BE(n,0)}function ch(n){var s=Nn(n);if(Yr(s))return n}function a_(n,s){if(n==="change")return s}var o_=!1;if(Qn){var qd;if(Qn){var Fd="oninput"in document;if(!Fd){var l_=document.createElement("div");l_.setAttribute("oninput","return;"),Fd=typeof l_.oninput=="function"}qd=Fd}else qd=!1;o_=qd&&(!document.documentMode||9<document.documentMode)}function u_(){$l&&($l.detachEvent("onpropertychange",c_),Xl=$l=null)}function c_(n){if(n.propertyName==="value"&&ch(Xl)){var s=[];r_(s,Xl,n,Yn(n)),Bs(Nw,s)}}function xw(n,s,o){n==="focusin"?(u_(),$l=s,Xl=o,$l.attachEvent("onpropertychange",c_)):n==="focusout"&&u_()}function Vw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ch(Xl)}function Mw(n,s){if(n==="click")return ch(s)}function Ow(n,s){if(n==="input"||n==="change")return ch(s)}function Pw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Vn=typeof Object.is=="function"?Object.is:Pw;function Jl(n,s){if(Vn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!bt.call(s,f)||!Vn(n[f],s[f]))return!1}return!0}function h_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function f_(n,s){var o=h_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=h_(o)}}function d_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?d_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function m_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Li(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Li(n.document)}return s}function Hd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var kw=Qn&&"documentMode"in document&&11>=document.documentMode,lo=null,Gd=null,Wl=null,Kd=!1;function p_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Kd||lo==null||lo!==Li(u)||(u=lo,"selectionStart"in u&&Hd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wl&&Jl(Wl,u)||(Wl=u,u=Wh(Gd,"onSelect"),0<u.length&&(s=new zi("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=lo)))}function na(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var uo={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},Yd={},g_={};Qn&&(g_=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function ia(n){if(Yd[n])return Yd[n];if(!uo[n])return n;var s=uo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in g_)return Yd[n]=s[o];return n}var y_=ia("animationend"),__=ia("animationiteration"),v_=ia("animationstart"),Lw=ia("transitionrun"),Uw=ia("transitionstart"),jw=ia("transitioncancel"),E_=ia("transitionend"),T_=new Map,Qd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qd.push("scrollEnd");function gi(n,s){T_.set(n,s),Pi(s,[n])}var hh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Xn=[],co=0,$d=0;function fh(){for(var n=co,s=$d=co=0;s<n;){var o=Xn[s];Xn[s++]=null;var u=Xn[s];Xn[s++]=null;var f=Xn[s];Xn[s++]=null;var m=Xn[s];if(Xn[s++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&S_(o,f,m)}}function dh(n,s,o,u){Xn[co++]=n,Xn[co++]=s,Xn[co++]=o,Xn[co++]=u,$d|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Xd(n,s,o,u){return dh(n,s,o,u),mh(n)}function sa(n,s){return dh(n,null,null,s),mh(n)}function S_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-Ct(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function mh(n){if(50<Eu)throw Eu=0,rp=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ho={};function zw(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(n,s,o,u){return new zw(n,s,o,u)}function Jd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function os(n,s){var o=n.alternate;return o===null?(o=Mn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function b_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ph(n,s,o,u,f,m){var _=0;if(u=n,typeof n=="function")Jd(n)&&(_=1);else if(typeof n=="string")_=G1(n,o,ae.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=Mn(31,o,s,f),n.elementType=N,n.lanes=m,n;case C:return ra(o.children,f,m,s);case j:_=8,f|=24;break;case Q:return n=Mn(12,o,s,f|2),n.elementType=Q,n.lanes=m,n;case ve:return n=Mn(13,o,s,f),n.elementType=ve,n.lanes=m,n;case he:return n=Mn(19,o,s,f),n.elementType=he,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case oe:_=10;break e;case re:_=9;break e;case _e:_=11;break e;case D:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Mn(_,o,s,f),s.elementType=n,s.type=u,s.lanes=m,s}function ra(n,s,o,u){return n=Mn(7,n,u,s),n.lanes=o,n}function Wd(n,s,o){return n=Mn(6,n,null,s),n.lanes=o,n}function A_(n){var s=Mn(18,null,null,0);return s.stateNode=n,s}function Zd(n,s,o){return s=Mn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var I_=new WeakMap;function Jn(n,s){if(typeof n=="object"&&n!==null){var o=I_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Ps(s)},I_.set(n,s),s)}return{value:n,source:s,stack:Ps(s)}}var fo=[],mo=0,gh=null,Zl=0,Wn=[],Zn=0,Gs=null,Hi=1,Gi="";function ls(n,s){fo[mo++]=Zl,fo[mo++]=gh,gh=n,Zl=s}function w_(n,s,o){Wn[Zn++]=Hi,Wn[Zn++]=Gi,Wn[Zn++]=Gs,Gs=n;var u=Hi;n=Gi;var f=32-Ct(u)-1;u&=~(1<<f),o+=1;var m=32-Ct(s)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Hi=1<<32-Ct(s)+f|o<<f|u,Gi=m+n}else Hi=1<<m|o<<f|u,Gi=n}function em(n){n.return!==null&&(ls(n,1),w_(n,1,0))}function tm(n){for(;n===gh;)gh=fo[--mo],fo[mo]=null,Zl=fo[--mo],fo[mo]=null;for(;n===Gs;)Gs=Wn[--Zn],Wn[Zn]=null,Gi=Wn[--Zn],Wn[Zn]=null,Hi=Wn[--Zn],Wn[Zn]=null}function R_(n,s){Wn[Zn++]=Hi,Wn[Zn++]=Gi,Wn[Zn++]=Gs,Hi=s.id,Gi=s.overflow,Gs=n}var rn=null,pt=null,Qe=!1,Ks=null,ei=!1,nm=Error(i(519));function Ys(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw eu(Jn(s,n)),nm}function C_(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Lt]=n,s[Xt]=u,o){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(o=0;o<Su.length;o++)Be(Su[o],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),$c(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),Us(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||GE(s.textContent,o)?(u.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),u.onScroll!=null&&Be("scroll",s),u.onScrollEnd!=null&&Be("scrollend",s),u.onClick!=null&&(s.onclick=hi),s=!0):s=!1,s||Ys(n,!0)}function D_(n){for(rn=n.return;rn;)switch(rn.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:rn=rn.return}}function po(n){if(n!==rn)return!1;if(!Qe)return D_(n),Qe=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ep(n.type,n.memoizedProps)),o=!o),o&&pt&&Ys(n),D_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));pt=eT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));pt=eT(n)}else s===27?(s=pt,or(n.type)?(n=Ip,Ip=null,pt=n):pt=s):pt=rn?ni(n.stateNode.nextSibling):null;return!0}function aa(){pt=rn=null,Qe=!1}function im(){var n=Ks;return n!==null&&(In===null?In=n:In.push.apply(In,n),Ks=null),n}function eu(n){Ks===null?Ks=[n]:Ks.push(n)}var sm=k(null),oa=null,us=null;function Qs(n,s,o){Y(sm,s._currentValue),s._currentValue=o}function cs(n){n._currentValue=sm.current,ee(sm)}function rm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function am(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var b=m;m=f;for(var O=0;O<s.length;O++)if(b.context===s[O]){m.lanes|=o,b=m.alternate,b!==null&&(b.lanes|=o),rm(m.return,o,n),u||(_=null);break e}m=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),rm(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function go(n,s,o,u){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var b=f.type;Vn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===pe.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Ru):n=[Ru])}f=f.return}n!==null&&am(s,n,o,u),s.flags|=262144}function yh(n){for(n=n.firstContext;n!==null;){if(!Vn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function la(n){oa=n,us=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function an(n){return N_(oa,n)}function _h(n,s){return oa===null&&la(n),N_(n,s)}function N_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},us===null){if(n===null)throw Error(i(308));us=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else us=us.next=s;return o}var Bw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},qw=r.unstable_scheduleCallback,Fw=r.unstable_NormalPriority,zt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function om(){return{controller:new Bw,data:new Map,refCount:0}}function tu(n){n.refCount--,n.refCount===0&&qw(Fw,function(){n.controller.abort()})}var nu=null,lm=0,yo=0,_o=null;function Hw(n,s){if(nu===null){var o=nu=[];lm=0,yo=hp(),_o={status:"pending",value:void 0,then:function(u){o.push(u)}}}return lm++,s.then(x_,x_),s}function x_(){if(--lm===0&&nu!==null){_o!==null&&(_o.status="fulfilled");var n=nu;nu=null,yo=0,_o=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Gw(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var V_=J.S;J.S=function(n,s){pE=tn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Hw(n,s),V_!==null&&V_(n,s)};var ua=k(null);function um(){var n=ua.current;return n!==null?n:ft.pooledCache}function vh(n,s){s===null?Y(ua,ua.current):Y(ua,s.pool)}function M_(){var n=um();return n===null?null:{parent:zt._currentValue,pool:n}}var vo=Error(i(460)),cm=Error(i(474)),Eh=Error(i(542)),Th={then:function(){}};function O_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function P_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(hi,hi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,L_(n),n;default:if(typeof s.status=="string")s.then(hi,hi);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,L_(n),n}throw ha=s,vo}}function ca(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ha=o,vo):o}}var ha=null;function k_(){if(ha===null)throw Error(i(459));var n=ha;return ha=null,n}function L_(n){if(n===vo||n===Eh)throw Error(i(483))}var Eo=null,iu=0;function Sh(n){var s=iu;return iu+=1,Eo===null&&(Eo=[]),P_(Eo,n,s)}function su(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function bh(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function U_(n){function s(z,L){if(n){var F=z.deletions;F===null?(z.deletions=[L],z.flags|=16):F.push(L)}}function o(z,L){if(!n)return null;for(;L!==null;)s(z,L),L=L.sibling;return null}function u(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=os(z,L),z.index=0,z.sibling=null,z}function m(z,L,F){return z.index=F,n?(F=z.alternate,F!==null?(F=F.index,F<L?(z.flags|=67108866,L):F):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function b(z,L,F,te){return L===null||L.tag!==6?(L=Wd(F,z.mode,te),L.return=z,L):(L=f(L,F),L.return=z,L)}function O(z,L,F,te){var Ae=F.type;return Ae===C?Z(z,L,F.props.children,te,F.key):L!==null&&(L.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===A&&ca(Ae)===L.type)?(L=f(L,F.props),su(L,F),L.return=z,L):(L=ph(F.type,F.key,F.props,null,z.mode,te),su(L,F),L.return=z,L)}function H(z,L,F,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=Zd(F,z.mode,te),L.return=z,L):(L=f(L,F.children||[]),L.return=z,L)}function Z(z,L,F,te,Ae){return L===null||L.tag!==7?(L=ra(F,z.mode,te,Ae),L.return=z,L):(L=f(L,F),L.return=z,L)}function ne(z,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Wd(""+L,z.mode,F),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case R:return F=ph(L.type,L.key,L.props,null,z.mode,F),su(F,L),F.return=z,F;case x:return L=Zd(L,z.mode,F),L.return=z,L;case A:return L=ca(L),ne(z,L,F)}if($e(L)||U(L))return L=ra(L,z.mode,F,null),L.return=z,L;if(typeof L.then=="function")return ne(z,Sh(L),F);if(L.$$typeof===oe)return ne(z,_h(z,L),F);bh(z,L)}return null}function K(z,L,F,te){var Ae=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ae!==null?null:b(z,L,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return F.key===Ae?O(z,L,F,te):null;case x:return F.key===Ae?H(z,L,F,te):null;case A:return F=ca(F),K(z,L,F,te)}if($e(F)||U(F))return Ae!==null?null:Z(z,L,F,te,null);if(typeof F.then=="function")return K(z,L,Sh(F),te);if(F.$$typeof===oe)return K(z,L,_h(z,F),te);bh(z,F)}return null}function X(z,L,F,te,Ae){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return z=z.get(F)||null,b(L,z,""+te,Ae);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return z=z.get(te.key===null?F:te.key)||null,O(L,z,te,Ae);case x:return z=z.get(te.key===null?F:te.key)||null,H(L,z,te,Ae);case A:return te=ca(te),X(z,L,F,te,Ae)}if($e(te)||U(te))return z=z.get(F)||null,Z(L,z,te,Ae,null);if(typeof te.then=="function")return X(z,L,F,Sh(te),Ae);if(te.$$typeof===oe)return X(z,L,F,_h(L,te),Ae);bh(L,te)}return null}function ye(z,L,F,te){for(var Ae=null,Je=null,Se=L,Le=L=0,Fe=null;Se!==null&&Le<F.length;Le++){Se.index>Le?(Fe=Se,Se=null):Fe=Se.sibling;var We=K(z,Se,F[Le],te);if(We===null){Se===null&&(Se=Fe);break}n&&Se&&We.alternate===null&&s(z,Se),L=m(We,L,Le),Je===null?Ae=We:Je.sibling=We,Je=We,Se=Fe}if(Le===F.length)return o(z,Se),Qe&&ls(z,Le),Ae;if(Se===null){for(;Le<F.length;Le++)Se=ne(z,F[Le],te),Se!==null&&(L=m(Se,L,Le),Je===null?Ae=Se:Je.sibling=Se,Je=Se);return Qe&&ls(z,Le),Ae}for(Se=u(Se);Le<F.length;Le++)Fe=X(Se,z,Le,F[Le],te),Fe!==null&&(n&&Fe.alternate!==null&&Se.delete(Fe.key===null?Le:Fe.key),L=m(Fe,L,Le),Je===null?Ae=Fe:Je.sibling=Fe,Je=Fe);return n&&Se.forEach(function(fr){return s(z,fr)}),Qe&&ls(z,Le),Ae}function we(z,L,F,te){if(F==null)throw Error(i(151));for(var Ae=null,Je=null,Se=L,Le=L=0,Fe=null,We=F.next();Se!==null&&!We.done;Le++,We=F.next()){Se.index>Le?(Fe=Se,Se=null):Fe=Se.sibling;var fr=K(z,Se,We.value,te);if(fr===null){Se===null&&(Se=Fe);break}n&&Se&&fr.alternate===null&&s(z,Se),L=m(fr,L,Le),Je===null?Ae=fr:Je.sibling=fr,Je=fr,Se=Fe}if(We.done)return o(z,Se),Qe&&ls(z,Le),Ae;if(Se===null){for(;!We.done;Le++,We=F.next())We=ne(z,We.value,te),We!==null&&(L=m(We,L,Le),Je===null?Ae=We:Je.sibling=We,Je=We);return Qe&&ls(z,Le),Ae}for(Se=u(Se);!We.done;Le++,We=F.next())We=X(Se,z,Le,We.value,te),We!==null&&(n&&We.alternate!==null&&Se.delete(We.key===null?Le:We.key),L=m(We,L,Le),Je===null?Ae=We:Je.sibling=We,Je=We);return n&&Se.forEach(function(nR){return s(z,nR)}),Qe&&ls(z,Le),Ae}function ht(z,L,F,te){if(typeof F=="object"&&F!==null&&F.type===C&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case R:e:{for(var Ae=F.key;L!==null;){if(L.key===Ae){if(Ae=F.type,Ae===C){if(L.tag===7){o(z,L.sibling),te=f(L,F.props.children),te.return=z,z=te;break e}}else if(L.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===A&&ca(Ae)===L.type){o(z,L.sibling),te=f(L,F.props),su(te,F),te.return=z,z=te;break e}o(z,L);break}else s(z,L);L=L.sibling}F.type===C?(te=ra(F.props.children,z.mode,te,F.key),te.return=z,z=te):(te=ph(F.type,F.key,F.props,null,z.mode,te),su(te,F),te.return=z,z=te)}return _(z);case x:e:{for(Ae=F.key;L!==null;){if(L.key===Ae)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){o(z,L.sibling),te=f(L,F.children||[]),te.return=z,z=te;break e}else{o(z,L);break}else s(z,L);L=L.sibling}te=Zd(F,z.mode,te),te.return=z,z=te}return _(z);case A:return F=ca(F),ht(z,L,F,te)}if($e(F))return ye(z,L,F,te);if(U(F)){if(Ae=U(F),typeof Ae!="function")throw Error(i(150));return F=Ae.call(F),we(z,L,F,te)}if(typeof F.then=="function")return ht(z,L,Sh(F),te);if(F.$$typeof===oe)return ht(z,L,_h(z,F),te);bh(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(o(z,L.sibling),te=f(L,F),te.return=z,z=te):(o(z,L),te=Wd(F,z.mode,te),te.return=z,z=te),_(z)):o(z,L)}return function(z,L,F,te){try{iu=0;var Ae=ht(z,L,F,te);return Eo=null,Ae}catch(Se){if(Se===vo||Se===Eh)throw Se;var Je=Mn(29,Se,null,z.mode);return Je.lanes=te,Je.return=z,Je}finally{}}}var fa=U_(!0),j_=U_(!1),$s=!1;function hm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Xs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Js(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(et&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=mh(n),S_(n,null,o),s}return dh(n,u,s,o),mh(n)}function ru(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Vl(n,o)}}function dm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var mm=!1;function au(){if(mm){var n=_o;if(n!==null)throw n}}function ou(n,s,o,u){mm=!1;var f=n.updateQueue;$s=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var O=b,H=O.next;O.next=null,_===null?m=H:_.next=H,_=O;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==_&&(b===null?Z.firstBaseUpdate=H:b.next=H,Z.lastBaseUpdate=O))}if(m!==null){var ne=f.baseState;_=0,Z=H=O=null,b=m;do{var K=b.lane&-536870913,X=K!==b.lane;if(X?(qe&K)===K:(u&K)===K){K!==0&&K===yo&&(mm=!0),Z!==null&&(Z=Z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ye=n,we=b;K=s;var ht=o;switch(we.tag){case 1:if(ye=we.payload,typeof ye=="function"){ne=ye.call(ht,ne,K);break e}ne=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=we.payload,K=typeof ye=="function"?ye.call(ht,ne,K):ye,K==null)break e;ne=T({},ne,K);break e;case 2:$s=!0}}K=b.callback,K!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[K]:X.push(K))}else X={lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?(H=Z=X,O=ne):Z=Z.next=X,_|=K;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;X=b,b=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);Z===null&&(O=ne),f.baseState=O,f.firstBaseUpdate=H,f.lastBaseUpdate=Z,m===null&&(f.shared.lanes=0),nr|=_,n.lanes=_,n.memoizedState=ne}}function z_(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function B_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)z_(o[n],s)}var To=k(null),Ah=k(0);function q_(n,s){n=vs,Y(Ah,n),Y(To,s),vs=n|s.baseLanes}function pm(){Y(Ah,vs),Y(To,To.current)}function gm(){vs=Ah.current,ee(To),ee(Ah)}var On=k(null),ti=null;function Ws(n){var s=n.alternate;Y(Nt,Nt.current&1),Y(On,n),ti===null&&(s===null||To.current!==null||s.memoizedState!==null)&&(ti=n)}function ym(n){Y(Nt,Nt.current),Y(On,n),ti===null&&(ti=n)}function F_(n){n.tag===22?(Y(Nt,Nt.current),Y(On,n),ti===null&&(ti=n)):Zs()}function Zs(){Y(Nt,Nt.current),Y(On,On.current)}function Pn(n){ee(On),ti===n&&(ti=null),ee(Nt)}var Nt=k(0);function Ih(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||bp(o)||Ap(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var hs=0,Oe=null,ut=null,Bt=null,wh=!1,So=!1,da=!1,Rh=0,lu=0,bo=null,Kw=0;function It(){throw Error(i(321))}function _m(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Vn(n[o],s[o]))return!1;return!0}function vm(n,s,o,u,f,m){return hs=m,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=n===null||n.memoizedState===null?wv:Om,da=!1,m=o(u,f),da=!1,So&&(m=G_(s,o,u,f)),H_(n),m}function H_(n){J.H=hu;var s=ut!==null&&ut.next!==null;if(hs=0,Bt=ut=Oe=null,wh=!1,lu=0,bo=null,s)throw Error(i(300));n===null||qt||(n=n.dependencies,n!==null&&yh(n)&&(qt=!0))}function G_(n,s,o,u){Oe=n;var f=0;do{if(So&&(bo=null),lu=0,So=!1,25<=f)throw Error(i(301));if(f+=1,Bt=ut=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=Rv,m=s(o,u)}while(So);return m}function Yw(){var n=J.H,s=n.useState()[0];return s=typeof s.then=="function"?uu(s):s,n=n.useState()[0],(ut!==null?ut.memoizedState:null)!==n&&(Oe.flags|=1024),s}function Em(){var n=Rh!==0;return Rh=0,n}function Tm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Sm(n){if(wh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}wh=!1}hs=0,Bt=ut=Oe=null,So=!1,lu=Rh=0,bo=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Oe.memoizedState=Bt=n:Bt=Bt.next=n,Bt}function xt(){if(ut===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=ut.next;var s=Bt===null?Oe.memoizedState:Bt.next;if(s!==null)Bt=s,ut=n;else{if(n===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));ut=n,n={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Bt===null?Oe.memoizedState=Bt=n:Bt=Bt.next=n}return Bt}function Ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uu(n){var s=lu;return lu+=1,bo===null&&(bo=[]),n=P_(bo,n,s),s=Oe,(Bt===null?s.memoizedState:Bt.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?wv:Om),n}function Dh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return uu(n);if(n.$$typeof===oe)return an(n)}throw Error(i(438,String(n)))}function bm(n){var s=null,o=Oe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Ch(),Oe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=P;return s.index++,o}function fs(n,s){return typeof s=="function"?s(n):s}function Nh(n){var s=xt();return Am(s,ut,n)}function Am(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}s.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var b=_=null,O=null,H=s,Z=!1;do{var ne=H.lane&-536870913;if(ne!==H.lane?(qe&ne)===ne:(hs&ne)===ne){var K=H.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ne===yo&&(Z=!0);else if((hs&K)===K){H=H.next,K===yo&&(Z=!0);continue}else ne={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(b=O=ne,_=m):O=O.next=ne,Oe.lanes|=K,nr|=K;ne=H.action,da&&o(m,ne),m=H.hasEagerState?H.eagerState:o(m,ne)}else K={lane:ne,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(b=O=K,_=m):O=O.next=K,Oe.lanes|=ne,nr|=ne;H=H.next}while(H!==null&&H!==s);if(O===null?_=m:O.next=b,!Vn(m,n.memoizedState)&&(qt=!0,Z&&(o=_o,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=O,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Im(n){var s=xt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);Vn(m,s.memoizedState)||(qt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function K_(n,s,o){var u=Oe,f=xt(),m=Qe;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var _=!Vn((ut||f).memoizedState,o);if(_&&(f.memoizedState=o,qt=!0),f=f.queue,Cm($_.bind(null,u,f,n),[n]),f.getSnapshot!==s||_||Bt!==null&&Bt.memoizedState.tag&1){if(u.flags|=2048,Ao(9,{destroy:void 0},Q_.bind(null,u,f,o,s),null),ft===null)throw Error(i(349));m||(hs&127)!==0||Y_(u,s,o)}return o}function Y_(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Oe.updateQueue,s===null?(s=Ch(),Oe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Q_(n,s,o,u){s.value=o,s.getSnapshot=u,X_(s)&&J_(n)}function $_(n,s,o){return o(function(){X_(s)&&J_(n)})}function X_(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Vn(n,o)}catch{return!0}}function J_(n){var s=sa(n,2);s!==null&&wn(s,n,2)}function wm(n){var s=yn();if(typeof n=="function"){var o=n;if(n=o(),da){Gn(!0);try{o()}finally{Gn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:n},s}function W_(n,s,o,u){return n.baseState=o,Am(n,ut,typeof u=="function"?u:fs)}function Qw(n,s,o,u,f){if(Mh(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};J.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Z_(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Z_(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var m=J.T,_={};J.T=_;try{var b=o(f,u),O=J.S;O!==null&&O(_,b),ev(n,s,b)}catch(H){Rm(n,s,H)}finally{m!==null&&_.types!==null&&(m.types=_.types),J.T=m}}else try{m=o(f,u),ev(n,s,m)}catch(H){Rm(n,s,H)}}function ev(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){tv(n,s,u)},function(u){return Rm(n,s,u)}):tv(n,s,o)}function tv(n,s,o){s.status="fulfilled",s.value=o,nv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Z_(n,o)))}function Rm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,nv(s),s=s.next;while(s!==u)}n.action=null}function nv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function iv(n,s){return s}function sv(n,s){if(Qe){var o=ft.formState;if(o!==null){e:{var u=Oe;if(Qe){if(pt){t:{for(var f=pt,m=ei;f.nodeType!==8;){if(!m){f=null;break t}if(f=ni(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){pt=ni(f.nextSibling),u=f.data==="F!";break e}}Ys(u)}u=!1}u&&(s=o[0])}}return o=yn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iv,lastRenderedState:s},o.queue=u,o=bv.bind(null,Oe,u),u.dispatch=o,u=wm(!1),m=Mm.bind(null,Oe,!1,u.queue),u=yn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=Qw.bind(null,Oe,f,m,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function rv(n){var s=xt();return av(s,ut,n)}function av(n,s,o){if(s=Am(n,s,iv)[0],n=Nh(fs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=uu(s)}catch(_){throw _===vo?Eh:_}else u=s;s=xt();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Oe.flags|=2048,Ao(9,{destroy:void 0},$w.bind(null,f,o),null)),[u,m,n]}function $w(n,s){n.action=s}function ov(n){var s=xt(),o=ut;if(o!==null)return av(s,o,n);xt(),s=s.memoizedState,o=xt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Ao(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=Ch(),Oe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function lv(){return xt().memoizedState}function xh(n,s,o,u){var f=yn();Oe.flags|=n,f.memoizedState=Ao(1|s,{destroy:void 0},o,u===void 0?null:u)}function Vh(n,s,o,u){var f=xt();u=u===void 0?null:u;var m=f.memoizedState.inst;ut!==null&&u!==null&&_m(u,ut.memoizedState.deps)?f.memoizedState=Ao(s,m,o,u):(Oe.flags|=n,f.memoizedState=Ao(1|s,m,o,u))}function uv(n,s){xh(8390656,8,n,s)}function Cm(n,s){Vh(2048,8,n,s)}function Xw(n){Oe.flags|=4;var s=Oe.updateQueue;if(s===null)s=Ch(),Oe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function cv(n){var s=xt().memoizedState;return Xw({ref:s,nextImpl:n}),function(){if((et&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function hv(n,s){return Vh(4,2,n,s)}function fv(n,s){return Vh(4,4,n,s)}function dv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function mv(n,s,o){o=o!=null?o.concat([n]):null,Vh(4,4,dv.bind(null,s,n),o)}function Dm(){}function pv(n,s){var o=xt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&_m(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function gv(n,s){var o=xt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&_m(s,u[1]))return u[0];if(u=n(),da){Gn(!0);try{n()}finally{Gn(!1)}}return o.memoizedState=[u,s],u}function Nm(n,s,o){return o===void 0||(hs&1073741824)!==0&&(qe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=yE(),Oe.lanes|=n,nr|=n,o)}function yv(n,s,o,u){return Vn(o,s)?o:To.current!==null?(n=Nm(n,o,u),Vn(n,s)||(qt=!0),n):(hs&42)===0||(hs&1073741824)!==0&&(qe&261930)===0?(qt=!0,n.memoizedState=o):(n=yE(),Oe.lanes|=n,nr|=n,s)}function _v(n,s,o,u,f){var m=ue.p;ue.p=m!==0&&8>m?m:8;var _=J.T,b={};J.T=b,Mm(n,!1,s,o);try{var O=f(),H=J.S;if(H!==null&&H(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=Gw(O,u);cu(n,s,Z,Un(n))}else cu(n,s,u,Un(n))}catch(ne){cu(n,s,{then:function(){},status:"rejected",reason:ne},Un())}finally{ue.p=m,_!==null&&b.types!==null&&(_.types=b.types),J.T=_}}function Jw(){}function xm(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=vv(n).queue;_v(n,f,s,Ee,o===null?Jw:function(){return Ev(n),o(u)})}function vv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:Ee},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Ev(n){var s=vv(n);s.next===null&&(s=n.alternate.memoizedState),cu(n,s.next.queue,{},Un())}function Vm(){return an(Ru)}function Tv(){return xt().memoizedState}function Sv(){return xt().memoizedState}function Ww(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Un();n=Xs(o);var u=Js(s,n,o);u!==null&&(wn(u,s,o),ru(u,s,o)),s={cache:om()},n.payload=s;return}s=s.return}}function Zw(n,s,o){var u=Un();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Mh(n)?Av(s,o):(o=Xd(n,s,o,u),o!==null&&(wn(o,n,u),Iv(o,s,u)))}function bv(n,s,o){var u=Un();cu(n,s,o,u)}function cu(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Mh(n))Av(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,b=m(_,o);if(f.hasEagerState=!0,f.eagerState=b,Vn(b,_))return dh(n,s,f,0),ft===null&&fh(),!1}catch{}finally{}if(o=Xd(n,s,f,u),o!==null)return wn(o,n,u),Iv(o,s,u),!0}return!1}function Mm(n,s,o,u){if(u={lane:2,revertLane:hp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Mh(n)){if(s)throw Error(i(479))}else s=Xd(n,o,u,2),s!==null&&wn(s,n,2)}function Mh(n){var s=n.alternate;return n===Oe||s!==null&&s===Oe}function Av(n,s){So=wh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Iv(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Vl(n,o)}}var hu={readContext:an,use:Dh,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};hu.useEffectEvent=It;var wv={readContext:an,use:Dh,useCallback:function(n,s){return yn().memoizedState=[n,s===void 0?null:s],n},useContext:an,useEffect:uv,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,xh(4194308,4,dv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return xh(4194308,4,n,s)},useInsertionEffect:function(n,s){xh(4,2,n,s)},useMemo:function(n,s){var o=yn();s=s===void 0?null:s;var u=n();if(da){Gn(!0);try{n()}finally{Gn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=yn();if(o!==void 0){var f=o(s);if(da){Gn(!0);try{o(s)}finally{Gn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=Zw.bind(null,Oe,n),[u.memoizedState,n]},useRef:function(n){var s=yn();return n={current:n},s.memoizedState=n},useState:function(n){n=wm(n);var s=n.queue,o=bv.bind(null,Oe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Dm,useDeferredValue:function(n,s){var o=yn();return Nm(o,n,s)},useTransition:function(){var n=wm(!1);return n=_v.bind(null,Oe,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Oe,f=yn();if(Qe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ft===null)throw Error(i(349));(qe&127)!==0||Y_(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,uv($_.bind(null,u,m,n),[n]),u.flags|=2048,Ao(9,{destroy:void 0},Q_.bind(null,u,m,o,s),null),o},useId:function(){var n=yn(),s=ft.identifierPrefix;if(Qe){var o=Gi,u=Hi;o=(u&~(1<<32-Ct(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Rh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=Kw++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Vm,useFormState:sv,useActionState:sv,useOptimistic:function(n){var s=yn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Mm.bind(null,Oe,!0,o),o.dispatch=s,[n,s]},useMemoCache:bm,useCacheRefresh:function(){return yn().memoizedState=Ww.bind(null,Oe)},useEffectEvent:function(n){var s=yn(),o={impl:n};return s.memoizedState=o,function(){if((et&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Om={readContext:an,use:Dh,useCallback:pv,useContext:an,useEffect:Cm,useImperativeHandle:mv,useInsertionEffect:hv,useLayoutEffect:fv,useMemo:gv,useReducer:Nh,useRef:lv,useState:function(){return Nh(fs)},useDebugValue:Dm,useDeferredValue:function(n,s){var o=xt();return yv(o,ut.memoizedState,n,s)},useTransition:function(){var n=Nh(fs)[0],s=xt().memoizedState;return[typeof n=="boolean"?n:uu(n),s]},useSyncExternalStore:K_,useId:Tv,useHostTransitionStatus:Vm,useFormState:rv,useActionState:rv,useOptimistic:function(n,s){var o=xt();return W_(o,ut,n,s)},useMemoCache:bm,useCacheRefresh:Sv};Om.useEffectEvent=cv;var Rv={readContext:an,use:Dh,useCallback:pv,useContext:an,useEffect:Cm,useImperativeHandle:mv,useInsertionEffect:hv,useLayoutEffect:fv,useMemo:gv,useReducer:Im,useRef:lv,useState:function(){return Im(fs)},useDebugValue:Dm,useDeferredValue:function(n,s){var o=xt();return ut===null?Nm(o,n,s):yv(o,ut.memoizedState,n,s)},useTransition:function(){var n=Im(fs)[0],s=xt().memoizedState;return[typeof n=="boolean"?n:uu(n),s]},useSyncExternalStore:K_,useId:Tv,useHostTransitionStatus:Vm,useFormState:ov,useActionState:ov,useOptimistic:function(n,s){var o=xt();return ut!==null?W_(o,ut,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:bm,useCacheRefresh:Sv};Rv.useEffectEvent=cv;function Pm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:T({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var km={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Un(),f=Xs(u);f.payload=s,o!=null&&(f.callback=o),s=Js(n,f,u),s!==null&&(wn(s,n,u),ru(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Un(),f=Xs(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Js(n,f,u),s!==null&&(wn(s,n,u),ru(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Un(),u=Xs(o);u.tag=2,s!=null&&(u.callback=s),s=Js(n,u,o),s!==null&&(wn(s,n,o),ru(s,n,o))}};function Cv(n,s,o,u,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):s.prototype&&s.prototype.isPureReactComponent?!Jl(o,u)||!Jl(f,m):!0}function Dv(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&km.enqueueReplaceState(s,s.state,null)}function ma(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=T({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Nv(n){hh(n)}function xv(n){console.error(n)}function Vv(n){hh(n)}function Oh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Mv(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Lm(n,s,o){return o=Xs(o),o.tag=3,o.payload={element:null},o.callback=function(){Oh(n,s)},o}function Ov(n){return n=Xs(n),n.tag=3,n}function Pv(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){Mv(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Mv(s,o,u),typeof f!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function e1(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&go(s,o,f,!0),o=On.current,o!==null){switch(o.tag){case 31:case 13:return ti===null?Kh():o.alternate===null&&wt===0&&(wt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Th?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),lp(n,u,f)),!1;case 22:return o.flags|=65536,u===Th?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),lp(n,u,f)),!1}throw Error(i(435,o.tag))}return lp(n,u,f),Kh(),!1}if(Qe)return s=On.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==nm&&(n=Error(i(422),{cause:u}),eu(Jn(n,o)))):(u!==nm&&(s=Error(i(423),{cause:u}),eu(Jn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Jn(u,o),f=Lm(n.stateNode,u,f),dm(n,f),wt!==4&&(wt=2)),!1;var m=Error(i(520),{cause:u});if(m=Jn(m,o),vu===null?vu=[m]:vu.push(m),wt!==4&&(wt=2),s===null)return!0;u=Jn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Lm(o.stateNode,u,n),dm(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ir===null||!ir.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Ov(f),Pv(f,n,o,u),dm(o,f),!1}o=o.return}while(o!==null);return!1}var Um=Error(i(461)),qt=!1;function on(n,s,o,u){s.child=n===null?j_(s,null,o,u):fa(s,n.child,o,u)}function kv(n,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var _={};for(var b in u)b!=="ref"&&(_[b]=u[b])}else _=u;return la(s),u=vm(n,s,o,_,m,f),b=Em(),n!==null&&!qt?(Tm(n,s,f),ds(n,s,f)):(Qe&&b&&em(s),s.flags|=1,on(n,s,u,f),s.child)}function Lv(n,s,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!Jd(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,Uv(n,s,m,u,f)):(n=ph(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Km(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Jl,o(_,u)&&n.ref===s.ref)return ds(n,s,f)}return s.flags|=1,n=os(m,u),n.ref=s.ref,n.return=s,s.child=n}function Uv(n,s,o,u,f){if(n!==null){var m=n.memoizedProps;if(Jl(m,u)&&n.ref===s.ref)if(qt=!1,s.pendingProps=u=m,Km(n,f))(n.flags&131072)!==0&&(qt=!0);else return s.lanes=n.lanes,ds(n,s,f)}return jm(n,s,o,u,f)}function jv(n,s,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,s.child=null;return zv(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&vh(s,m!==null?m.cachePool:null),m!==null?q_(s,m):pm(),F_(s);else return u=s.lanes=536870912,zv(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(vh(s,m.cachePool),q_(s,m),Zs(),s.memoizedState=null):(n!==null&&vh(s,null),pm(),Zs());return on(n,s,f,o),s.child}function fu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function zv(n,s,o,u,f){var m=um();return m=m===null?null:{parent:zt._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&vh(s,null),pm(),F_(s),n!==null&&go(n,s,u,!0),s.childLanes=f,null}function Ph(n,s){return s=Lh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Bv(n,s,o){return fa(s,n.child,null,o),n=Ph(s,s.pendingProps),n.flags|=2,Pn(s),s.memoizedState=null,n}function t1(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Qe){if(u.mode==="hidden")return n=Ph(s,u),s.lanes=536870912,fu(null,n);if(ym(s),(n=pt)?(n=ZE(n,ei),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Gs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},o=A_(n),o.return=s,s.child=o,rn=s,pt=null)):n=null,n===null)throw Ys(s);return s.lanes=536870912,null}return Ph(s,u)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(ym(s),f)if(s.flags&256)s.flags&=-257,s=Bv(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(qt||go(n,s,o,!1),f=(o&n.childLanes)!==0,qt||f){if(u=ft,u!==null&&(_=Ml(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,sa(n,_),wn(u,n,_),Um;Kh(),s=Bv(n,s,o)}else n=m.treeContext,pt=ni(_.nextSibling),rn=s,Qe=!0,Ks=null,ei=!1,n!==null&&R_(s,n),s=Ph(s,u),s.flags|=4096;return s}return n=os(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function kh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function jm(n,s,o,u,f){return la(s),o=vm(n,s,o,u,void 0,f),u=Em(),n!==null&&!qt?(Tm(n,s,f),ds(n,s,f)):(Qe&&u&&em(s),s.flags|=1,on(n,s,o,f),s.child)}function qv(n,s,o,u,f,m){return la(s),s.updateQueue=null,o=G_(s,u,o,f),H_(n),u=Em(),n!==null&&!qt?(Tm(n,s,m),ds(n,s,m)):(Qe&&u&&em(s),s.flags|=1,on(n,s,o,m),s.child)}function Fv(n,s,o,u,f){if(la(s),s.stateNode===null){var m=ho,_=o.contextType;typeof _=="object"&&_!==null&&(m=an(_)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=km,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},hm(s),_=o.contextType,m.context=typeof _=="object"&&_!==null?an(_):ho,m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Pm(s,o,_,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&km.enqueueReplaceState(m,m.state,null),ou(s,u,m,f),au(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var b=s.memoizedProps,O=ma(o,b);m.props=O;var H=m.context,Z=o.contextType;_=ho,typeof Z=="object"&&Z!==null&&(_=an(Z));var ne=o.getDerivedStateFromProps;Z=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||H!==_)&&Dv(s,m,u,_),$s=!1;var K=s.memoizedState;m.state=K,ou(s,u,m,f),au(),H=s.memoizedState,b||K!==H||$s?(typeof ne=="function"&&(Pm(s,o,ne,u),H=s.memoizedState),(O=$s||Cv(s,o,O,u,K,H,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),m.props=u,m.state=H,m.context=_,u=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,fm(n,s),_=s.memoizedProps,Z=ma(o,_),m.props=Z,ne=s.pendingProps,K=m.context,H=o.contextType,O=ho,typeof H=="object"&&H!==null&&(O=an(H)),b=o.getDerivedStateFromProps,(H=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ne||K!==O)&&Dv(s,m,u,O),$s=!1,K=s.memoizedState,m.state=K,ou(s,u,m,f),au();var X=s.memoizedState;_!==ne||K!==X||$s||n!==null&&n.dependencies!==null&&yh(n.dependencies)?(typeof b=="function"&&(Pm(s,o,b,u),X=s.memoizedState),(Z=$s||Cv(s,o,Z,u,K,X,O)||n!==null&&n.dependencies!==null&&yh(n.dependencies))?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,X,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,X,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=X),m.props=u,m.state=X,m.context=O,u=Z):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,kh(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=fa(s,n.child,null,f),s.child=fa(s,null,o,f)):on(n,s,o,f),s.memoizedState=m.state,n=s.child):n=ds(n,s,f),n}function Hv(n,s,o,u){return aa(),s.flags|=256,on(n,s,o,u),s.child}var zm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(n){return{baseLanes:n,cachePool:M_()}}function qm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Ln),n}function Gv(n,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Nt.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Qe){if(f?Ws(s):Zs(),(n=pt)?(n=ZE(n,ei),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Gs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},o=A_(n),o.return=s,s.child=o,rn=s,pt=null)):n=null,n===null)throw Ys(s);return Ap(n)?s.lanes=32:s.lanes=536870912,null}var b=u.children;return u=u.fallback,f?(Zs(),f=s.mode,b=Lh({mode:"hidden",children:b},f),u=ra(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,u=s.child,u.memoizedState=Bm(o),u.childLanes=qm(n,_,o),s.memoizedState=zm,fu(null,u)):(Ws(s),Fm(s,b))}var O=n.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(m)s.flags&256?(Ws(s),s.flags&=-257,s=Hm(n,s,o)):s.memoizedState!==null?(Zs(),s.child=n.child,s.flags|=128,s=null):(Zs(),b=u.fallback,f=s.mode,u=Lh({mode:"visible",children:u.children},f),b=ra(b,f,o,null),b.flags|=2,u.return=s,b.return=s,u.sibling=b,s.child=u,fa(s,n.child,null,o),u=s.child,u.memoizedState=Bm(o),u.childLanes=qm(n,_,o),s.memoizedState=zm,s=fu(null,u));else if(Ws(s),Ap(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var H=_.dgst;_=H,u=Error(i(419)),u.stack="",u.digest=_,eu({value:u,source:null,stack:null}),s=Hm(n,s,o)}else if(qt||go(n,s,o,!1),_=(o&n.childLanes)!==0,qt||_){if(_=ft,_!==null&&(u=Ml(_,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,sa(n,u),wn(_,n,u),Um;bp(b)||Kh(),s=Hm(n,s,o)}else bp(b)?(s.flags|=192,s.child=n.child,s=null):(n=O.treeContext,pt=ni(b.nextSibling),rn=s,Qe=!0,Ks=null,ei=!1,n!==null&&R_(s,n),s=Fm(s,u.children),s.flags|=4096);return s}return f?(Zs(),b=u.fallback,f=s.mode,O=n.child,H=O.sibling,u=os(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,H!==null?b=os(H,b):(b=ra(b,f,o,null),b.flags|=2),b.return=s,u.return=s,u.sibling=b,s.child=u,fu(null,u),u=s.child,b=n.child.memoizedState,b===null?b=Bm(o):(f=b.cachePool,f!==null?(O=zt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=M_(),b={baseLanes:b.baseLanes|o,cachePool:f}),u.memoizedState=b,u.childLanes=qm(n,_,o),s.memoizedState=zm,fu(n.child,u)):(Ws(s),o=n.child,n=o.sibling,o=os(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function Fm(n,s){return s=Lh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Lh(n,s){return n=Mn(22,n,null,s),n.lanes=0,n}function Hm(n,s,o){return fa(s,n.child,null,o),n=Fm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Kv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),rm(n.return,s,o)}function Gm(n,s,o,u,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function Yv(n,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=Nt.current,b=(_&2)!==0;if(b?(_=_&1|2,s.flags|=128):_&=1,Y(Nt,_),on(n,s,u,o),u=Qe?Zl:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Kv(n,o,s);else if(n.tag===19)Kv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&Ih(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Gm(s,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Ih(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Gm(s,!0,o,null,m,u);break;case"together":Gm(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ds(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),nr|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(go(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=os(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=os(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Km(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&yh(n)))}function n1(n,s,o){switch(s.tag){case 3:Re(s,s.stateNode.containerInfo),Qs(s,zt,n.memoizedState.cache),aa();break;case 27:case 5:le(s);break;case 4:Re(s,s.stateNode.containerInfo);break;case 10:Qs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ym(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ws(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Gv(n,s,o):(Ws(s),n=ds(n,s,o),n!==null?n.sibling:null);Ws(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(go(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Yv(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Y(Nt,Nt.current),u)break;return null;case 22:return s.lanes=0,jv(n,s,o,s.pendingProps);case 24:Qs(s,zt,n.memoizedState.cache)}return ds(n,s,o)}function Qv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)qt=!0;else{if(!Km(n,o)&&(s.flags&128)===0)return qt=!1,n1(n,s,o);qt=(n.flags&131072)!==0}else qt=!1,Qe&&(s.flags&1048576)!==0&&w_(s,Zl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=ca(s.elementType),s.type=n,typeof n=="function")Jd(n)?(u=ma(n,u),s.tag=1,s=Fv(null,s,n,u,o)):(s.tag=0,s=jm(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===_e){s.tag=11,s=kv(null,s,n,u,o);break e}else if(f===D){s.tag=14,s=Lv(null,s,n,u,o);break e}}throw s=Ke(n)||n,Error(i(306,s,""))}}return s;case 0:return jm(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=ma(u,s.pendingProps),Fv(n,s,u,f,o);case 3:e:{if(Re(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,fm(n,s),ou(s,u,null,o);var _=s.memoizedState;if(u=_.cache,Qs(s,zt,u),u!==m.cache&&am(s,[zt],o,!0),au(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Hv(n,s,u,o);break e}else if(u!==f){f=Jn(Error(i(424)),s),eu(f),s=Hv(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(pt=ni(n.firstChild),rn=s,Qe=!0,Ks=null,ei=!0,o=j_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(aa(),u===f){s=ds(n,s,o);break e}on(n,s,u,o)}s=s.child}return s;case 26:return kh(n,s),n===null?(o=rT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Qe||(o=s.type,n=s.pendingProps,u=Zh(ie.current).createElement(o),u[Lt]=s,u[Xt]=n,ln(u,o,n),Ut(u),s.stateNode=u):s.memoizedState=rT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return le(s),n===null&&Qe&&(u=s.stateNode=nT(s.type,s.pendingProps,ie.current),rn=s,ei=!0,f=pt,or(s.type)?(Ip=f,pt=ni(u.firstChild)):pt=f),on(n,s,s.pendingProps.children,o),kh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Qe&&((f=u=pt)&&(u=V1(u,s.type,s.pendingProps,ei),u!==null?(s.stateNode=u,rn=s,pt=ni(u.firstChild),ei=!1,f=!0):f=!1),f||Ys(s)),le(s),f=s.type,m=s.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,Ep(f,m)?u=null:_!==null&&Ep(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=vm(n,s,Yw,null,null,o),Ru._currentValue=f),kh(n,s),on(n,s,u,o),s.child;case 6:return n===null&&Qe&&((n=o=pt)&&(o=M1(o,s.pendingProps,ei),o!==null?(s.stateNode=o,rn=s,pt=null,n=!0):n=!1),n||Ys(s)),null;case 13:return Gv(n,s,o);case 4:return Re(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=fa(s,null,u,o):on(n,s,u,o),s.child;case 11:return kv(n,s,s.type,s.pendingProps,o);case 7:return on(n,s,s.pendingProps,o),s.child;case 8:return on(n,s,s.pendingProps.children,o),s.child;case 12:return on(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Qs(s,s.type,u.value),on(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,la(s),f=an(f),u=u(f),s.flags|=1,on(n,s,u,o),s.child;case 14:return Lv(n,s,s.type,s.pendingProps,o);case 15:return Uv(n,s,s.type,s.pendingProps,o);case 19:return Yv(n,s,o);case 31:return t1(n,s,o);case 22:return jv(n,s,o,s.pendingProps);case 24:return la(s),u=an(zt),n===null?(f=um(),f===null&&(f=ft,m=om(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},hm(s),Qs(s,zt,f)):((n.lanes&o)!==0&&(fm(n,s),ou(s,null,null,o),au()),f=n.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Qs(s,zt,u)):(u=m.cache,Qs(s,zt,u),u!==f.cache&&am(s,[zt],o,!0))),on(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ms(n){n.flags|=4}function Ym(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(TE())n.flags|=8192;else throw ha=Th,cm}else n.flags&=-16777217}function $v(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!cT(s))if(TE())n.flags|=8192;else throw ha=Th,cm}function Uh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Hc():536870912,n.lanes|=s,Co|=s)}function du(n,s){if(!Qe)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function gt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function i1(n,s,o){var u=s.pendingProps;switch(tm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(s),null;case 1:return gt(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),cs(zt),Pe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(po(s)?ms(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,im())),gt(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(ms(s),m!==null?(gt(s),$v(s,m)):(gt(s),Ym(s,f,null,u,o))):m?m!==n.memoizedState?(ms(s),gt(s),$v(s,m)):(gt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&ms(s),gt(s),Ym(s,f,n,u,o)),null;case 27:if(Ne(s),o=ie.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ms(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return gt(s),null}n=ae.current,po(s)?C_(s):(n=nT(f,u,o),s.stateNode=n,ms(s))}return gt(s),null;case 5:if(Ne(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ms(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return gt(s),null}if(m=ae.current,po(s))C_(s);else{var _=Zh(ie.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[Lt]=s,m[Xt]=u;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(ln(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ms(s)}}return gt(s),Ym(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ms(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=ie.current,po(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=rn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Lt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||GE(n.nodeValue,o)),n||Ys(s,!0)}else n=Zh(n).createTextNode(u),n[Lt]=s,s.stateNode=n}return gt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=po(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Lt]=s}else aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;gt(s),n=!1}else o=im(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Pn(s),s):(Pn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return gt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=po(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Lt]=s}else aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;gt(s),f=!1}else f=im(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Pn(s),s):(Pn(s),null)}return Pn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Uh(s,s.updateQueue),gt(s),null);case 4:return Pe(),n===null&&pp(s.stateNode.containerInfo),gt(s),null;case 10:return cs(s.type),gt(s),null;case 19:if(ee(Nt),u=s.memoizedState,u===null)return gt(s),null;if(f=(s.flags&128)!==0,m=u.rendering,m===null)if(f)du(u,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Ih(n),m!==null){for(s.flags|=128,du(u,!1),n=m.updateQueue,s.updateQueue=n,Uh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)b_(o,n),o=o.sibling;return Y(Nt,Nt.current&1|2),Qe&&ls(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&tn()>Fh&&(s.flags|=128,f=!0,du(u,!1),s.lanes=4194304)}else{if(!f)if(n=Ih(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Uh(s,n),du(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Qe)return gt(s),null}else 2*tn()-u.renderingStartTime>Fh&&o!==536870912&&(s.flags|=128,f=!0,du(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=tn(),n.sibling=null,o=Nt.current,Y(Nt,f?o&1|2:o&1),Qe&&ls(s,u.treeForkCount),n):(gt(s),null);case 22:case 23:return Pn(s),gm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(gt(s),s.subtreeFlags&6&&(s.flags|=8192)):gt(s),o=s.updateQueue,o!==null&&Uh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&ee(ua),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),cs(zt),gt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function s1(n,s){switch(tm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return cs(zt),Pe(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ne(s),null;case 31:if(s.memoizedState!==null){if(Pn(s),s.alternate===null)throw Error(i(340));aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Pn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ee(Nt),null;case 4:return Pe(),null;case 10:return cs(s.type),null;case 22:case 23:return Pn(s),gm(),n!==null&&ee(ua),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return cs(zt),null;case 25:return null;default:return null}}function Xv(n,s){switch(tm(s),s.tag){case 3:cs(zt),Pe();break;case 26:case 27:case 5:Ne(s);break;case 4:Pe();break;case 31:s.memoizedState!==null&&Pn(s);break;case 13:Pn(s);break;case 19:ee(Nt);break;case 10:cs(s.type);break;case 22:case 23:Pn(s),gm(),n!==null&&ee(ua);break;case 24:cs(zt)}}function mu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(b){st(s,s.return,b)}}function er(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var _=u.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=s;var O=o,H=b;try{H()}catch(Z){st(f,O,Z)}}}u=u.next}while(u!==m)}}catch(Z){st(s,s.return,Z)}}function Jv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{B_(s,o)}catch(u){st(n,n.return,u)}}}function Wv(n,s,o){o.props=ma(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){st(n,s,u)}}function pu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){st(n,s,f)}}function Ki(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){st(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){st(n,s,f)}else o.current=null}function Zv(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){st(n,n.return,f)}}function Qm(n,s,o){try{var u=n.stateNode;w1(u,n.type,o,s),u[Xt]=s}catch(f){st(n,n.return,f)}}function eE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&or(n.type)||n.tag===4}function $m(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||eE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&or(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Xm(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=hi));else if(u!==4&&(u===27&&or(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Xm(n,s,o),n=n.sibling;n!==null;)Xm(n,s,o),n=n.sibling}function jh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&or(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(jh(n,s,o),n=n.sibling;n!==null;)jh(n,s,o),n=n.sibling}function tE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);ln(s,u,o),s[Lt]=n,s[Xt]=o}catch(m){st(n,n.return,m)}}var ps=!1,Ft=!1,Jm=!1,nE=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function r1(n,s){if(n=n.containerInfo,_p=of,n=m_(n),Hd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,b=-1,O=-1,H=0,Z=0,ne=n,K=null;t:for(;;){for(var X;ne!==o||f!==0&&ne.nodeType!==3||(b=_+f),ne!==m||u!==0&&ne.nodeType!==3||(O=_+u),ne.nodeType===3&&(_+=ne.nodeValue.length),(X=ne.firstChild)!==null;)K=ne,ne=X;for(;;){if(ne===n)break t;if(K===o&&++H===f&&(b=_),K===m&&++Z===u&&(O=_),(X=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=X}o=b===-1||O===-1?null:{start:b,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(vp={focusedElem:n,selectionRange:o},of=!1,Wt=s;Wt!==null;)if(s=Wt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Wt=n;else for(;Wt!==null;){switch(s=Wt,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var ye=ma(o.type,f);n=u.getSnapshotBeforeUpdate(ye,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(we){st(o,o.return,we)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Sp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Sp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Wt=n;break}Wt=s.return}}function iE(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ys(n,o),u&4&&mu(5,o);break;case 1:if(ys(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){st(o,o.return,_)}else{var f=ma(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){st(o,o.return,_)}}u&64&&Jv(o),u&512&&pu(o,o.return);break;case 3:if(ys(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{B_(n,s)}catch(_){st(o,o.return,_)}}break;case 27:s===null&&u&4&&tE(o);case 26:case 5:ys(n,o),s===null&&u&4&&Zv(o),u&512&&pu(o,o.return);break;case 12:ys(n,o);break;case 31:ys(n,o),u&4&&aE(n,o);break;case 13:ys(n,o),u&4&&oE(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=m1.bind(null,o),O1(n,o))));break;case 22:if(u=o.memoizedState!==null||ps,!u){s=s!==null&&s.memoizedState!==null||Ft,f=ps;var m=Ft;ps=u,(Ft=s)&&!m?_s(n,o,(o.subtreeFlags&8772)!==0):ys(n,o),ps=f,Ft=m}break;case 30:break;default:ys(n,o)}}function sE(n){var s=n.alternate;s!==null&&(n.alternate=null,sE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ja(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var _t=null,Sn=!1;function gs(n,s,o){for(o=o.child;o!==null;)rE(n,s,o),o=o.sibling}function rE(n,s,o){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(oi,o)}catch{}switch(o.tag){case 26:Ft||Ki(o,s),gs(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ft||Ki(o,s);var u=_t,f=Sn;or(o.type)&&(_t=o.stateNode,Sn=!1),gs(n,s,o),Au(o.stateNode),_t=u,Sn=f;break;case 5:Ft||Ki(o,s);case 6:if(u=_t,f=Sn,_t=null,gs(n,s,o),_t=u,Sn=f,_t!==null)if(Sn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(o.stateNode)}catch(m){st(o,s,m)}else try{_t.removeChild(o.stateNode)}catch(m){st(o,s,m)}break;case 18:_t!==null&&(Sn?(n=_t,JE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),ko(n)):JE(_t,o.stateNode));break;case 4:u=_t,f=Sn,_t=o.stateNode.containerInfo,Sn=!0,gs(n,s,o),_t=u,Sn=f;break;case 0:case 11:case 14:case 15:er(2,o,s),Ft||er(4,o,s),gs(n,s,o);break;case 1:Ft||(Ki(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Wv(o,s,u)),gs(n,s,o);break;case 21:gs(n,s,o);break;case 22:Ft=(u=Ft)||o.memoizedState!==null,gs(n,s,o),Ft=u;break;default:gs(n,s,o)}}function aE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ko(n)}catch(o){st(s,s.return,o)}}}function oE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ko(n)}catch(o){st(s,s.return,o)}}function a1(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new nE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new nE),s;default:throw Error(i(435,n.tag))}}function zh(n,s){var o=a1(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=p1.bind(null,n,u);u.then(f,f)}})}function bn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,_=s,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(or(b.type)){_t=b.stateNode,Sn=!1;break e}break;case 5:_t=b.stateNode,Sn=!1;break e;case 3:case 4:_t=b.stateNode.containerInfo,Sn=!0;break e}b=b.return}if(_t===null)throw Error(i(160));rE(m,_,f),_t=null,Sn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)lE(s,n),s=s.sibling}var yi=null;function lE(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:bn(s,n),An(n),u&4&&(er(3,n,n.return),mu(3,n),er(5,n,n.return));break;case 1:bn(s,n),An(n),u&512&&(Ft||o===null||Ki(o,o.return)),u&64&&ps&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=yi;if(bn(s,n),An(n),u&512&&(Ft||o===null||Ki(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Vi]||m[Lt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),ln(m,u,o),m[Lt]=n,Ut(m),u=m;break e;case"link":var _=lT("link","href",f).get(u+(o.href||""));if(_){for(var b=0;b<_.length;b++)if(m=_[b],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(b,1);break t}}m=f.createElement(u),ln(m,u,o),f.head.appendChild(m);break;case"meta":if(_=lT("meta","content",f).get(u+(o.content||""))){for(b=0;b<_.length;b++)if(m=_[b],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(b,1);break t}}m=f.createElement(u),ln(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[Lt]=n,Ut(m),u=m}n.stateNode=u}else uT(f,n.type,n.stateNode);else n.stateNode=oT(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?uT(f,n.type,n.stateNode):oT(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Qm(n,n.memoizedProps,o.memoizedProps)}break;case 27:bn(s,n),An(n),u&512&&(Ft||o===null||Ki(o,o.return)),o!==null&&u&4&&Qm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(bn(s,n),An(n),u&512&&(Ft||o===null||Ki(o,o.return)),n.flags&32){f=n.stateNode;try{Tn(f,"")}catch(ye){st(n,n.return,ye)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Qm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Jm=!0);break;case 6:if(bn(s,n),An(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ye){st(n,n.return,ye)}}break;case 3:if(nf=null,f=yi,yi=ef(s.containerInfo),bn(s,n),yi=f,An(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ko(s.containerInfo)}catch(ye){st(n,n.return,ye)}Jm&&(Jm=!1,uE(n));break;case 4:u=yi,yi=ef(n.stateNode.containerInfo),bn(s,n),An(n),yi=u;break;case 12:bn(s,n),An(n);break;case 31:bn(s,n),An(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zh(n,u)));break;case 13:bn(s,n),An(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(qh=tn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zh(n,u)));break;case 22:f=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,H=ps,Z=Ft;if(ps=H||f,Ft=Z||O,bn(s,n),Ft=Z,ps=H,An(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||O||ps||Ft||pa(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){O=o=s;try{if(m=O.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=O.stateNode;var ne=O.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;b.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ye){st(O,O.return,ye)}}}else if(s.tag===6){if(o===null){O=s;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(ye){st(O,O.return,ye)}}}else if(s.tag===18){if(o===null){O=s;try{var X=O.stateNode;f?WE(X,!0):WE(O.stateNode,!1)}catch(ye){st(O,O.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,zh(n,o))));break;case 19:bn(s,n),An(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zh(n,u)));break;case 30:break;case 21:break;default:bn(s,n),An(n)}}function An(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(eE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=$m(n);jh(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(Tn(_,""),o.flags&=-33);var b=$m(n);jh(n,b,_);break;case 3:case 4:var O=o.stateNode.containerInfo,H=$m(n);Xm(n,H,O);break;default:throw Error(i(161))}}catch(Z){st(n,n.return,Z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function uE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;uE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ys(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)iE(n,s.alternate,s),s=s.sibling}function pa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:er(4,s,s.return),pa(s);break;case 1:Ki(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Wv(s,s.return,o),pa(s);break;case 27:Au(s.stateNode);case 26:case 5:Ki(s,s.return),pa(s);break;case 22:s.memoizedState===null&&pa(s);break;case 30:pa(s);break;default:pa(s)}n=n.sibling}}function _s(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:_s(f,m,o),mu(4,m);break;case 1:if(_s(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){st(u,u.return,H)}if(u=m,f=u.updateQueue,f!==null){var b=u.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)z_(O[f],b)}catch(H){st(u,u.return,H)}}o&&_&64&&Jv(m),pu(m,m.return);break;case 27:tE(m);case 26:case 5:_s(f,m,o),o&&u===null&&_&4&&Zv(m),pu(m,m.return);break;case 12:_s(f,m,o);break;case 31:_s(f,m,o),o&&_&4&&aE(f,m);break;case 13:_s(f,m,o),o&&_&4&&oE(f,m);break;case 22:m.memoizedState===null&&_s(f,m,o),pu(m,m.return);break;case 30:break;default:_s(f,m,o)}s=s.sibling}}function Wm(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&tu(o))}function Zm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&tu(n))}function _i(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)cE(n,s,o,u),s=s.sibling}function cE(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:_i(n,s,o,u),f&2048&&mu(9,s);break;case 1:_i(n,s,o,u);break;case 3:_i(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&tu(n)));break;case 12:if(f&2048){_i(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,_=m.id,b=m.onPostCommit;typeof b=="function"&&b(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){st(s,s.return,O)}}else _i(n,s,o,u);break;case 31:_i(n,s,o,u);break;case 13:_i(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?_i(n,s,o,u):gu(n,s):m._visibility&2?_i(n,s,o,u):(m._visibility|=2,Io(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Wm(_,s);break;case 24:_i(n,s,o,u),f&2048&&Zm(s.alternate,s);break;default:_i(n,s,o,u)}}function Io(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,_=s,b=o,O=u,H=_.flags;switch(_.tag){case 0:case 11:case 15:Io(m,_,b,O,f),mu(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?Io(m,_,b,O,f):gu(m,_):(Z._visibility|=2,Io(m,_,b,O,f)),f&&H&2048&&Wm(_.alternate,_);break;case 24:Io(m,_,b,O,f),f&&H&2048&&Zm(_.alternate,_);break;default:Io(m,_,b,O,f)}s=s.sibling}}function gu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:gu(o,u),f&2048&&Wm(u.alternate,u);break;case 24:gu(o,u),f&2048&&Zm(u.alternate,u);break;default:gu(o,u)}s=s.sibling}}var yu=8192;function wo(n,s,o){if(n.subtreeFlags&yu)for(n=n.child;n!==null;)hE(n,s,o),n=n.sibling}function hE(n,s,o){switch(n.tag){case 26:wo(n,s,o),n.flags&yu&&n.memoizedState!==null&&K1(o,yi,n.memoizedState,n.memoizedProps);break;case 5:wo(n,s,o);break;case 3:case 4:var u=yi;yi=ef(n.stateNode.containerInfo),wo(n,s,o),yi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=yu,yu=16777216,wo(n,s,o),yu=u):wo(n,s,o));break;default:wo(n,s,o)}}function fE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function _u(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Wt=u,mE(u,n)}fE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)dE(n),n=n.sibling}function dE(n){switch(n.tag){case 0:case 11:case 15:_u(n),n.flags&2048&&er(9,n,n.return);break;case 3:_u(n);break;case 12:_u(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Bh(n)):_u(n);break;default:_u(n)}}function Bh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Wt=u,mE(u,n)}fE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:er(8,s,s.return),Bh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Bh(s));break;default:Bh(s)}n=n.sibling}}function mE(n,s){for(;Wt!==null;){var o=Wt;switch(o.tag){case 0:case 11:case 15:er(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:tu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Wt=u;else e:for(o=n;Wt!==null;){u=Wt;var f=u.sibling,m=u.return;if(sE(u),u===o){Wt=null;break e}if(f!==null){f.return=m,Wt=f;break e}Wt=m}}}var o1={getCacheForType:function(n){var s=an(zt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return an(zt).controller.signal}},l1=typeof WeakMap=="function"?WeakMap:Map,et=0,ft=null,ze=null,qe=0,it=0,kn=null,tr=!1,Ro=!1,ep=!1,vs=0,wt=0,nr=0,ga=0,tp=0,Ln=0,Co=0,vu=null,In=null,np=!1,qh=0,pE=0,Fh=1/0,Hh=null,ir=null,Yt=0,sr=null,Do=null,Es=0,ip=0,sp=null,gE=null,Eu=0,rp=null;function Un(){return(et&2)!==0&&qe!==0?qe&-qe:J.T!==null?hp():Gc()}function yE(){if(Ln===0)if((qe&536870912)===0||Qe){var n=Fr;Fr<<=1,(Fr&3932160)===0&&(Fr=262144),Ln=n}else Ln=536870912;return n=On.current,n!==null&&(n.flags|=32),Ln}function wn(n,s,o){(n===ft&&(it===2||it===9)||n.cancelPendingCommit!==null)&&(No(n,0),rr(n,qe,Ln,!1)),Hr(n,o),((et&2)===0||n!==ft)&&(n===ft&&((et&2)===0&&(ga|=o),wt===4&&rr(n,qe,Ln,!1)),Yi(n))}function _E(n,s,o){if((et&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||li(n,s),f=u?h1(n,s):op(n,s,!0),m=u;do{if(f===0){Ro&&!u&&rr(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!u1(o)){f=op(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var b=n;f=vu;var O=b.current.memoizedState.isDehydrated;if(O&&(No(b,_).flags|=256),_=op(b,_,!1),_!==2){if(ep&&!O){b.errorRecoveryDisabledLanes|=m,ga|=m,f=4;break e}m=In,In=f,m!==null&&(In===null?In=m:In.push.apply(In,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){No(n,0),rr(n,s,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:rr(u,s,Ln,!tr);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=qh+300-tn(),10<f)){if(rr(u,s,Ln,!tr),Di(u,0,!0)!==0)break e;Es=s,u.timeoutHandle=$E(vE.bind(null,u,o,In,Hh,np,s,Ln,ga,Co,tr,m,"Throttled",-0,0),f);break e}vE(u,o,In,Hh,np,s,Ln,ga,Co,tr,m,null,-0,0)}}break}while(!0);Yi(n)}function vE(n,s,o,u,f,m,_,b,O,H,Z,ne,K,X){if(n.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},hE(s,m,ne);var ye=(m&62914560)===m?qh-tn():(m&4194048)===m?pE-tn():0;if(ye=Y1(ne,ye),ye!==null){Es=m,n.cancelPendingCommit=ye(RE.bind(null,n,s,m,o,u,f,_,b,O,Z,ne,null,K,X)),rr(n,m,_,!H);return}}RE(n,s,m,o,u,f,_,b,O)}function u1(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Vn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rr(n,s,o,u){s&=~tp,s&=~ga,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var m=31-Ct(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&Gr(n,o,s)}function Gh(){return(et&6)===0?(Tu(0),!1):!0}function ap(){if(ze!==null){if(it===0)var n=ze.return;else n=ze,us=oa=null,Sm(n),Eo=null,iu=0,n=ze;for(;n!==null;)Xv(n.alternate,n),n=n.return;ze=null}}function No(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,D1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Es=0,ap(),ft=n,ze=o=os(n.current,null),qe=s,it=0,kn=null,tr=!1,Ro=li(n,s),ep=!1,Co=Ln=tp=ga=nr=wt=0,In=vu=null,np=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-Ct(u),m=1<<f;s|=n[f],u&=~m}return vs=s,fh(),o}function EE(n,s){Oe=null,J.H=hu,s===vo||s===Eh?(s=k_(),it=3):s===cm?(s=k_(),it=4):it=s===Um?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,kn=s,ze===null&&(wt=1,Oh(n,Jn(s,n.current)))}function TE(){var n=On.current;return n===null?!0:(qe&4194048)===qe?ti===null:(qe&62914560)===qe||(qe&536870912)!==0?n===ti:!1}function SE(){var n=J.H;return J.H=hu,n===null?hu:n}function bE(){var n=J.A;return J.A=o1,n}function Kh(){wt=4,tr||(qe&4194048)!==qe&&On.current!==null||(Ro=!0),(nr&134217727)===0&&(ga&134217727)===0||ft===null||rr(ft,qe,Ln,!1)}function op(n,s,o){var u=et;et|=2;var f=SE(),m=bE();(ft!==n||qe!==s)&&(Hh=null,No(n,s)),s=!1;var _=wt;e:do try{if(it!==0&&ze!==null){var b=ze,O=kn;switch(it){case 8:ap(),_=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(s=!0);var H=it;if(it=0,kn=null,xo(n,b,O,H),o&&Ro){_=0;break e}break;default:H=it,it=0,kn=null,xo(n,b,O,H)}}c1(),_=wt;break}catch(Z){EE(n,Z)}while(!0);return s&&n.shellSuspendCounter++,us=oa=null,et=u,J.H=f,J.A=m,ze===null&&(ft=null,qe=0,fh()),_}function c1(){for(;ze!==null;)AE(ze)}function h1(n,s){var o=et;et|=2;var u=SE(),f=bE();ft!==n||qe!==s?(Hh=null,Fh=tn()+500,No(n,s)):Ro=li(n,s);e:do try{if(it!==0&&ze!==null){s=ze;var m=kn;t:switch(it){case 1:it=0,kn=null,xo(n,s,m,1);break;case 2:case 9:if(O_(m)){it=0,kn=null,IE(s);break}s=function(){it!==2&&it!==9||ft!==n||(it=7),Yi(n)},m.then(s,s);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:O_(m)?(it=0,kn=null,IE(s)):(it=0,kn=null,xo(n,s,m,7));break;case 5:var _=null;switch(ze.tag){case 26:_=ze.memoizedState;case 5:case 27:var b=ze;if(_?cT(_):b.stateNode.complete){it=0,kn=null;var O=b.sibling;if(O!==null)ze=O;else{var H=b.return;H!==null?(ze=H,Yh(H)):ze=null}break t}}it=0,kn=null,xo(n,s,m,5);break;case 6:it=0,kn=null,xo(n,s,m,6);break;case 8:ap(),wt=6;break e;default:throw Error(i(462))}}f1();break}catch(Z){EE(n,Z)}while(!0);return us=oa=null,J.H=u,J.A=f,et=o,ze!==null?0:(ft=null,qe=0,fh(),wt)}function f1(){for(;ze!==null&&!Ya();)AE(ze)}function AE(n){var s=Qv(n.alternate,n,vs);n.memoizedProps=n.pendingProps,s===null?Yh(n):ze=s}function IE(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=qv(o,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=qv(o,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:Sm(s);default:Xv(o,s),s=ze=b_(s,vs),s=Qv(o,s,vs)}n.memoizedProps=n.pendingProps,s===null?Yh(n):ze=s}function xo(n,s,o,u){us=oa=null,Sm(s),Eo=null,iu=0;var f=s.return;try{if(e1(n,f,s,o,qe)){wt=1,Oh(n,Jn(o,n.current)),ze=null;return}}catch(m){if(f!==null)throw ze=f,m;wt=1,Oh(n,Jn(o,n.current)),ze=null;return}s.flags&32768?(Qe||u===1?n=!0:Ro||(qe&536870912)!==0?n=!1:(tr=n=!0,(u===2||u===9||u===3||u===6)&&(u=On.current,u!==null&&u.tag===13&&(u.flags|=16384))),wE(s,n)):Yh(s)}function Yh(n){var s=n;do{if((s.flags&32768)!==0){wE(s,tr);return}n=s.return;var o=i1(s.alternate,s,vs);if(o!==null){ze=o;return}if(s=s.sibling,s!==null){ze=s;return}ze=s=n}while(s!==null);wt===0&&(wt=5)}function wE(n,s){do{var o=s1(n.alternate,n);if(o!==null){o.flags&=32767,ze=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){ze=n;return}ze=n=o}while(n!==null);wt=6,ze=null}function RE(n,s,o,u,f,m,_,b,O){n.cancelPendingCommit=null;do Qh();while(Yt!==0);if((et&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=$d,zd(n,o,m,_,b,O),n===ft&&(ze=ft=null,qe=0),Do=s,sr=n,Es=o,ip=m,sp=f,gE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,g1(ke,function(){return VE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=ue.p,ue.p=2,_=et,et|=4;try{r1(n,s,o)}finally{et=_,ue.p=f,J.T=u}}Yt=1,CE(),DE(),NE()}}function CE(){if(Yt===1){Yt=0;var n=sr,s=Do,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=ue.p;ue.p=2;var f=et;et|=4;try{lE(s,n);var m=vp,_=m_(n.containerInfo),b=m.focusedElem,O=m.selectionRange;if(_!==b&&b&&b.ownerDocument&&d_(b.ownerDocument.documentElement,b)){if(O!==null&&Hd(b)){var H=O.start,Z=O.end;if(Z===void 0&&(Z=H),"selectionStart"in b)b.selectionStart=H,b.selectionEnd=Math.min(Z,b.value.length);else{var ne=b.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var X=K.getSelection(),ye=b.textContent.length,we=Math.min(O.start,ye),ht=O.end===void 0?we:Math.min(O.end,ye);!X.extend&&we>ht&&(_=ht,ht=we,we=_);var z=f_(b,we),L=f_(b,ht);if(z&&L&&(X.rangeCount!==1||X.anchorNode!==z.node||X.anchorOffset!==z.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var F=ne.createRange();F.setStart(z.node,z.offset),X.removeAllRanges(),we>ht?(X.addRange(F),X.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),X.addRange(F))}}}}for(ne=[],X=b;X=X.parentNode;)X.nodeType===1&&ne.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ne.length;b++){var te=ne[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}of=!!_p,vp=_p=null}finally{et=f,ue.p=u,J.T=o}}n.current=s,Yt=2}}function DE(){if(Yt===2){Yt=0;var n=sr,s=Do,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=ue.p;ue.p=2;var f=et;et|=4;try{iE(n,s.alternate,s)}finally{et=f,ue.p=u,J.T=o}}Yt=3}}function NE(){if(Yt===4||Yt===3){Yt=0,Qa();var n=sr,s=Do,o=Es,u=gE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Yt=5:(Yt=0,Do=sr=null,xE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ir=null),is(o),s=s.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(oi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=J.T,f=ue.p,ue.p=2,J.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var b=u[_];m(b.value,{componentStack:b.stack})}}finally{J.T=s,ue.p=f}}(Es&3)!==0&&Qh(),Yi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===rp?Eu++:(Eu=0,rp=n):Eu=0,Tu(0)}}function xE(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,tu(s)))}function Qh(){return CE(),DE(),NE(),VE()}function VE(){if(Yt!==5)return!1;var n=sr,s=ip;ip=0;var o=is(Es),u=J.T,f=ue.p;try{ue.p=32>o?32:o,J.T=null,o=sp,sp=null;var m=sr,_=Es;if(Yt=0,Do=sr=null,Es=0,(et&6)!==0)throw Error(i(331));var b=et;if(et|=4,dE(m.current),cE(m,m.current,_,o),et=b,Tu(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(oi,m)}catch{}return!0}finally{ue.p=f,J.T=u,xE(n,s)}}function ME(n,s,o){s=Jn(o,s),s=Lm(n.stateNode,s,2),n=Js(n,s,2),n!==null&&(Hr(n,2),Yi(n))}function st(n,s,o){if(n.tag===3)ME(n,n,o);else for(;s!==null;){if(s.tag===3){ME(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ir===null||!ir.has(u))){n=Jn(o,n),o=Ov(2),u=Js(s,o,2),u!==null&&(Pv(o,u,s,n),Hr(u,2),Yi(u));break}}s=s.return}}function lp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new l1;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(ep=!0,f.add(o),n=d1.bind(null,n,s,o),s.then(n,n))}function d1(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ft===n&&(qe&o)===o&&(wt===4||wt===3&&(qe&62914560)===qe&&300>tn()-qh?(et&2)===0&&No(n,0):tp|=o,Co===qe&&(Co=0)),Yi(n)}function OE(n,s){s===0&&(s=Hc()),n=sa(n,s),n!==null&&(Hr(n,s),Yi(n))}function m1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),OE(n,o)}function p1(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),OE(n,o)}function g1(n,s){return Tt(n,s)}var $h=null,Vo=null,up=!1,Xh=!1,cp=!1,ar=0;function Yi(n){n!==Vo&&n.next===null&&(Vo===null?$h=Vo=n:Vo=Vo.next=n),Xh=!0,up||(up=!0,_1())}function Tu(n,s){if(!cp&&Xh){cp=!0;do for(var o=!1,u=$h;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,b=u.pingedLanes;m=(1<<31-Ct(42|n)+1)-1,m&=f&~(_&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,UE(u,m))}else m=qe,m=Di(u,u===ft?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||li(u,m)||(o=!0,UE(u,m));u=u.next}while(o);cp=!1}}function y1(){PE()}function PE(){Xh=up=!1;var n=0;ar!==0&&C1()&&(n=ar);for(var s=tn(),o=null,u=$h;u!==null;){var f=u.next,m=kE(u,s);m===0?(u.next=null,o===null?$h=f:o.next=f,f===null&&(Vo=o)):(o=u,(n!==0||(m&3)!==0)&&(Xh=!0)),u=f}Yt!==0&&Yt!==5||Tu(n),ar!==0&&(ar=0)}function kE(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-Ct(m),b=1<<_,O=f[_];O===-1?((b&o)===0||(b&u)!==0)&&(f[_]=jd(b,s)):O<=s&&(n.expiredLanes|=b),m&=~b}if(s=ft,o=qe,o=Di(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(it===2||it===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ai(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||li(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Ai(u),is(o)){case 2:case 8:o=qr;break;case 32:o=ke;break;case 268435456:o=wi;break;default:o=ke}return u=LE.bind(null,n),o=Tt(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Ai(u),n.callbackPriority=2,n.callbackNode=null,2}function LE(n,s){if(Yt!==0&&Yt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Qh()&&n.callbackNode!==o)return null;var u=qe;return u=Di(n,n===ft?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(_E(n,u,s),kE(n,tn()),n.callbackNode!=null&&n.callbackNode===o?LE.bind(null,n):null)}function UE(n,s){if(Qh())return null;_E(n,s,!0)}function _1(){N1(function(){(et&6)!==0?Tt(Ii,y1):PE()})}function hp(){if(ar===0){var n=yo;n===0&&(n=Ri,Ri<<=1,(Ri&261888)===0&&(Ri=256)),ar=n}return ar}function jE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:to(""+n)}function zE(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function v1(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=jE((f[Xt]||null).action),_=u.submitter;_&&(s=(s=_[Xt]||null)?jE(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var b=new zi("action","action",null,u,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ar!==0){var O=_?zE(f,_):new FormData(f);xm(o,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(b.preventDefault(),O=_?zE(f,_):new FormData(f),xm(o,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var fp=0;fp<Qd.length;fp++){var dp=Qd[fp],E1=dp.toLowerCase(),T1=dp[0].toUpperCase()+dp.slice(1);gi(E1,"on"+T1)}gi(y_,"onAnimationEnd"),gi(__,"onAnimationIteration"),gi(v_,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(Lw,"onTransitionRun"),gi(Uw,"onTransitionStart"),gi(jw,"onTransitionCancel"),gi(E_,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function BE(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var _=u.length-1;0<=_;_--){var b=u[_],O=b.instance,H=b.currentTarget;if(b=b.listener,O!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=H;try{m(f)}catch(Z){hh(Z)}f.currentTarget=null,m=O}else for(_=0;_<u.length;_++){if(b=u[_],O=b.instance,H=b.currentTarget,b=b.listener,O!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=H;try{m(f)}catch(Z){hh(Z)}f.currentTarget=null,m=O}}}}function Be(n,s){var o=s[Xa];o===void 0&&(o=s[Xa]=new Set);var u=n+"__bubble";o.has(u)||(qE(s,n,2,!1),o.add(u))}function mp(n,s,o){var u=0;s&&(u|=4),qE(o,n,u,s)}var Jh="_reactListening"+Math.random().toString(36).slice(2);function pp(n){if(!n[Jh]){n[Jh]=!0,Ol.forEach(function(o){o!=="selectionchange"&&(S1.has(o)||mp(o,!1,n),mp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Jh]||(s[Jh]=!0,mp("selectionchange",!1,s))}}function qE(n,s,o,u){switch(yT(s)){case 2:var f=X1;break;case 8:f=J1;break;default:f=Np}o=f.bind(null,s,o,n),f=void 0,!Xr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function gp(n,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var b=u.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=u.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Mi(b),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){u=m=_;continue e}b=b.parentNode}}u=u.return}Bs(function(){var H=m,Z=Yn(o),ne=[];e:{var K=T_.get(n);if(K!==void 0){var X=zi,ye=n;switch(n){case"keypress":if(Wr(o)===0)break e;case"keydown":case"keyup":X=lh;break;case"focusin":ye="focus",X=ea;break;case"focusout":ye="blur",X=ea;break;case"beforeblur":case"afterblur":X=ea;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case y_:case __:case v_:X=th;break;case E_:X=w;break;case"scroll":case"scrollend":X=Kl;break;case"wheel":X=$;break;case"copy":case"cut":case"paste":X=nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=as;break;case"toggle":case"beforetoggle":X=Me}var we=(s&4)!==0,ht=!we&&(n==="scroll"||n==="scrollend"),z=we?K!==null?K+"Capture":null:K;we=[];for(var L=H,F;L!==null;){var te=L;if(F=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||F===null||z===null||(te=fi(L,z),te!=null&&we.push(bu(L,te,F))),ht)break;L=L.return}0<we.length&&(K=new X(K,ye,null,o,Z),ne.push({event:K,listeners:we}))}}if((s&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",K&&o!==Fl&&(ye=o.relatedTarget||o.fromElement)&&(Mi(ye)||ye[xi]))break e;if((X||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,X?(ye=o.relatedTarget||o.toElement,X=H,ye=ye?Mi(ye):null,ye!==null&&(ht=l(ye),we=ye.tag,ye!==ht||we!==5&&we!==27&&we!==6)&&(ye=null)):(X=null,ye=H),X!==ye)){if(we=Yl,te="onMouseLeave",z="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(we=as,te="onPointerLeave",z="onPointerEnter",L="pointer"),ht=X==null?K:Nn(X),F=ye==null?K:Nn(ye),K=new we(te,L+"leave",X,o,Z),K.target=ht,K.relatedTarget=F,te=null,Mi(Z)===H&&(we=new we(z,L+"enter",ye,o,Z),we.target=F,we.relatedTarget=ht,te=we),ht=te,X&&ye)t:{for(we=b1,z=X,L=ye,F=0,te=z;te;te=we(te))F++;te=0;for(var Ae=L;Ae;Ae=we(Ae))te++;for(;0<F-te;)z=we(z),F--;for(;0<te-F;)L=we(L),te--;for(;F--;){if(z===L||L!==null&&z===L.alternate){we=z;break t}z=we(z),L=we(L)}we=null}else we=null;X!==null&&FE(ne,K,X,we,!1),ye!==null&&ht!==null&&FE(ne,ht,ye,we,!0)}}e:{if(K=H?Nn(H):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var Je=a_;else if(s_(K))if(o_)Je=Ow;else{Je=Vw;var Se=xw}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?H&&eo(H.elementType)&&(Je=a_):Je=Mw;if(Je&&(Je=Je(n,H))){r_(ne,Je,o,Z);break e}Se&&Se(n,K,H),n==="focusout"&&H&&K.type==="number"&&H.memoizedProps.value!=null&&zl(K,"number",K.value)}switch(Se=H?Nn(H):window,n){case"focusin":(s_(Se)||Se.contentEditable==="true")&&(lo=Se,Gd=H,Wl=null);break;case"focusout":Wl=Gd=lo=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,p_(ne,o,Z);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":p_(ne,o,Z)}var Le;if(Ze)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else oo?ta(n,o)&&(Fe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Fe="onCompositionStart");Fe&&(Fi&&o.locale!=="ko"&&(oo||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&oo&&(Le=Gl()):(ji=Z,Hl="value"in ji?ji.value:ji.textContent,oo=!0)),Se=Wh(H,Fe),0<Se.length&&(Fe=new qi(Fe,n,null,o,Z),ne.push({event:Fe,listeners:Se}),Le?Fe.data=Le:(Le=ao(o),Le!==null&&(Fe.data=Le)))),(Le=$n?Rw(n,o):Cw(n,o))&&(Fe=Wh(H,"onBeforeInput"),0<Fe.length&&(Se=new qi("onBeforeInput","beforeinput",null,o,Z),ne.push({event:Se,listeners:Fe}),Se.data=Le)),v1(ne,n,H,o,Z)}BE(ne,s)})}function bu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Wh(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=fi(n,o),f!=null&&u.unshift(bu(n,f,m)),f=fi(n,s),f!=null&&u.push(bu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function b1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function FE(n,s,o,u,f){for(var m=s._reactName,_=[];o!==null&&o!==u;){var b=o,O=b.alternate,H=b.stateNode;if(b=b.tag,O!==null&&O===u)break;b!==5&&b!==26&&b!==27||H===null||(O=H,f?(H=fi(o,m),H!=null&&_.unshift(bu(o,H,O))):f||(H=fi(o,m),H!=null&&_.push(bu(o,H,O)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var A1=/\r\n?/g,I1=/\u0000|\uFFFD/g;function HE(n){return(typeof n=="string"?n:""+n).replace(A1,`
`).replace(I1,"")}function GE(n,s){return s=HE(s),HE(n)===s}function ct(n,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Tn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Tn(n,""+u);break;case"className":xn(n,"class",u);break;case"tabIndex":xn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(n,o,u);break;case"style":ql(n,u,m);break;case"data":if(s!=="object"){xn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=to(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&ct(n,s,"name",f.name,f,null),ct(n,s,"formEncType",f.formEncType,f,null),ct(n,s,"formMethod",f.formMethod,f,null),ct(n,s,"formTarget",f.formTarget,f,null)):(ct(n,s,"encType",f.encType,f,null),ct(n,s,"method",f.method,f,null),ct(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=to(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=hi);break;case"onScroll":u!=null&&Be("scroll",n);break;case"onScrollEnd":u!=null&&Be("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=to(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Be("beforetoggle",n),Be("toggle",n),Wa(n,"popover",u);break;case"xlinkActuate":jt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":jt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":jt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":jt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":jt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":jt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":jt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":jt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":jt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Wa(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Wc.get(o)||o,Wa(n,o,u))}}function yp(n,s,o,u,f,m){switch(o){case"style":ql(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Tn(n,u):(typeof u=="number"||typeof u=="bigint")&&Tn(n,""+u);break;case"onScroll":u!=null&&Be("scroll",n);break;case"onScrollEnd":u!=null&&Be("scrollend",n);break;case"onClick":u!=null&&(n.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=n[Xt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Wa(n,o,u)}}}function ln(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",n),Be("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(n,s,m,_,o,null)}}f&&ct(n,s,"srcSet",o.srcSet,o,null),u&&ct(n,s,"src",o.src,o,null);return;case"input":Be("invalid",n);var b=m=_=f=null,O=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":_=Z;break;case"checked":O=Z;break;case"defaultChecked":H=Z;break;case"value":m=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:ct(n,s,u,Z,o,null)}}$c(n,m,b,O,H,_,f,!1);return;case"select":Be("invalid",n),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":_=b;break;case"multiple":u=b;default:ct(n,s,f,b,o,null)}s=m,o=_,n.multiple=!!u,s!=null?Ls(n,!!u,s,!1):o!=null&&Ls(n,!!u,o,!0);return;case"textarea":Be("invalid",n),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(b=o[_],b!=null))switch(_){case"value":u=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ct(n,s,_,b,o,null)}Us(n,u,f,m);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ct(n,s,O,u,o,null)}return;case"dialog":Be("beforetoggle",n),Be("toggle",n),Be("cancel",n),Be("close",n);break;case"iframe":case"object":Be("load",n);break;case"video":case"audio":for(u=0;u<Su.length;u++)Be(Su[u],n);break;case"image":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"embed":case"source":case"link":Be("error",n),Be("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(n,s,H,u,o,null)}return;default:if(eo(s)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&yp(n,s,Z,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&ct(n,s,b,u,o,null))}function w1(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,b=null,O=null,H=null,Z=null;for(X in o){var ne=o[X];if(o.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=ne;default:u.hasOwnProperty(X)||ct(n,s,X,null,u,ne)}}for(var K in u){var X=u[K];if(ne=o[K],u.hasOwnProperty(K)&&(X!=null||ne!=null))switch(K){case"type":m=X;break;case"name":f=X;break;case"checked":H=X;break;case"defaultChecked":Z=X;break;case"value":_=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==ne&&ct(n,s,K,X,u,ne)}}Za(n,_,b,O,H,Z,m,f);return;case"select":X=_=b=K=null;for(m in o)if(O=o[m],o.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":X=O;default:u.hasOwnProperty(m)||ct(n,s,m,null,u,O)}for(f in u)if(m=u[f],O=o[f],u.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":K=m;break;case"defaultValue":b=m;break;case"multiple":_=m;default:m!==O&&ct(n,s,f,m,u,O)}s=b,o=_,u=X,K!=null?Ls(n,!!o,K,!1):!!u!=!!o&&(s!=null?Ls(n,!!o,s,!0):Ls(n,!!o,o?[]:"",!1));return;case"textarea":X=K=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ct(n,s,b,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":K=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&ct(n,s,_,f,u,m)}Xc(n,K,X);return;case"option":for(var ye in o)if(K=o[ye],o.hasOwnProperty(ye)&&K!=null&&!u.hasOwnProperty(ye))switch(ye){case"selected":n.selected=!1;break;default:ct(n,s,ye,null,u,K)}for(O in u)if(K=u[O],X=o[O],u.hasOwnProperty(O)&&K!==X&&(K!=null||X!=null))switch(O){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ct(n,s,O,K,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)K=o[we],o.hasOwnProperty(we)&&K!=null&&!u.hasOwnProperty(we)&&ct(n,s,we,null,u,K);for(H in u)if(K=u[H],X=o[H],u.hasOwnProperty(H)&&K!==X&&(K!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:ct(n,s,H,K,u,X)}return;default:if(eo(s)){for(var ht in o)K=o[ht],o.hasOwnProperty(ht)&&K!==void 0&&!u.hasOwnProperty(ht)&&yp(n,s,ht,void 0,u,K);for(Z in u)K=u[Z],X=o[Z],!u.hasOwnProperty(Z)||K===X||K===void 0&&X===void 0||yp(n,s,Z,K,u,X);return}}for(var z in o)K=o[z],o.hasOwnProperty(z)&&K!=null&&!u.hasOwnProperty(z)&&ct(n,s,z,null,u,K);for(ne in u)K=u[ne],X=o[ne],!u.hasOwnProperty(ne)||K===X||K==null&&X==null||ct(n,s,ne,K,u,X)}function KE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,b=f.duration;if(m&&b&&KE(_)){for(_=0,b=f.responseEnd,u+=1;u<o.length;u++){var O=o[u],H=O.startTime;if(H>b)break;var Z=O.transferSize,ne=O.initiatorType;Z&&KE(ne)&&(O=O.responseEnd,_+=Z*(O<b?1:(b-H)/(O-H)))}if(--u,s+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var _p=null,vp=null;function Zh(n){return n.nodeType===9?n:n.ownerDocument}function YE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function QE(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ep(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Tp=null;function C1(){var n=window.event;return n&&n.type==="popstate"?n===Tp?!1:(Tp=n,!0):(Tp=null,!1)}var $E=typeof setTimeout=="function"?setTimeout:void 0,D1=typeof clearTimeout=="function"?clearTimeout:void 0,XE=typeof Promise=="function"?Promise:void 0,N1=typeof queueMicrotask=="function"?queueMicrotask:typeof XE<"u"?function(n){return XE.resolve(null).then(n).catch(x1)}:$E;function x1(n){setTimeout(function(){throw n})}function or(n){return n==="head"}function JE(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),ko(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Au(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Au(o);for(var m=o.firstChild;m;){var _=m.nextSibling,b=m.nodeName;m[Vi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Au(n.ownerDocument.body);o=f}while(o);ko(s)}function WE(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Sp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Sp(o),Ja(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function V1(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Vi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ni(n.nextSibling),n===null)break}return null}function M1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ni(n.nextSibling),n===null))return null;return n}function ZE(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=ni(n.nextSibling),n===null))return null;return n}function bp(n){return n.data==="$?"||n.data==="$~"}function Ap(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function O1(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ni(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Ip=null;function eT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return ni(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function tT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function nT(n,s,o){switch(s=Zh(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Au(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ja(n)}var ii=new Map,iT=new Set;function ef(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ts=ue.d;ue.d={f:P1,r:k1,D:L1,C:U1,L:j1,m:z1,X:q1,S:B1,M:F1};function P1(){var n=Ts.f(),s=Gh();return n||s}function k1(n){var s=Kn(n);s!==null&&s.tag===5&&s.type==="form"?Ev(s):Ts.r(n)}var Mo=typeof document>"u"?null:document;function sT(n,s,o){var u=Mo;if(u&&typeof s=="string"&&s){var f=En(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),iT.has(f)||(iT.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),ln(s,"link",n),Ut(s),u.head.appendChild(s)))}}function L1(n){Ts.D(n),sT("dns-prefetch",n,null)}function U1(n,s){Ts.C(n,s),sT("preconnect",n,s)}function j1(n,s,o){Ts.L(n,s,o);var u=Mo;if(u&&n&&s){var f='link[rel="preload"][as="'+En(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+En(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+En(o.imageSizes)+'"]')):f+='[href="'+En(n)+'"]';var m=f;switch(s){case"style":m=Oo(n);break;case"script":m=Po(n)}ii.has(m)||(n=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),ii.set(m,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Iu(m))||s==="script"&&u.querySelector(wu(m))||(s=u.createElement("link"),ln(s,"link",n),Ut(s),u.head.appendChild(s)))}}function z1(n,s){Ts.m(n,s);var o=Mo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+En(u)+'"][href="'+En(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Po(n)}if(!ii.has(m)&&(n=T({rel:"modulepreload",href:n},s),ii.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(wu(m)))return}u=o.createElement("link"),ln(u,"link",n),Ut(u),o.head.appendChild(u)}}}function B1(n,s,o){Ts.S(n,s,o);var u=Mo;if(u&&n){var f=Oi(u).hoistableStyles,m=Oo(n);s=s||"default";var _=f.get(m);if(!_){var b={loading:0,preload:null};if(_=u.querySelector(Iu(m)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},o),(o=ii.get(m))&&wp(n,o);var O=_=u.createElement("link");Ut(O),ln(O,"link",n),O._p=new Promise(function(H,Z){O.onload=H,O.onerror=Z}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,tf(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(m,_)}}}function q1(n,s){Ts.X(n,s);var o=Mo;if(o&&n){var u=Oi(o).hoistableScripts,f=Po(n),m=u.get(f);m||(m=o.querySelector(wu(f)),m||(n=T({src:n,async:!0},s),(s=ii.get(f))&&Rp(n,s),m=o.createElement("script"),Ut(m),ln(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function F1(n,s){Ts.M(n,s);var o=Mo;if(o&&n){var u=Oi(o).hoistableScripts,f=Po(n),m=u.get(f);m||(m=o.querySelector(wu(f)),m||(n=T({src:n,async:!0,type:"module"},s),(s=ii.get(f))&&Rp(n,s),m=o.createElement("script"),Ut(m),ln(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function rT(n,s,o,u){var f=(f=ie.current)?ef(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Oo(o.href),o=Oi(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Oo(o.href);var m=Oi(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(Iu(n)))&&!m._p&&(_.instance=m,_.state.loading=5),ii.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ii.set(n,o),m||H1(f,n,o,_.state))),s&&u===null)throw Error(i(528,""));return _}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Po(o),o=Oi(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Oo(n){return'href="'+En(n)+'"'}function Iu(n){return'link[rel="stylesheet"]['+n+"]"}function aT(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function H1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),ln(s,"link",o),Ut(s),n.head.appendChild(s))}function Po(n){return'[src="'+En(n)+'"]'}function wu(n){return"script[async]"+n}function oT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+En(o.href)+'"]');if(u)return s.instance=u,Ut(u),u;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ut(u),ln(u,"style",f),tf(u,o.precedence,n),s.instance=u;case"stylesheet":f=Oo(o.href);var m=n.querySelector(Iu(f));if(m)return s.state.loading|=4,s.instance=m,Ut(m),m;u=aT(o),(f=ii.get(f))&&wp(u,f),m=(n.ownerDocument||n).createElement("link"),Ut(m);var _=m;return _._p=new Promise(function(b,O){_.onload=b,_.onerror=O}),ln(m,"link",u),s.state.loading|=4,tf(m,o.precedence,n),s.instance=m;case"script":return m=Po(o.src),(f=n.querySelector(wu(m)))?(s.instance=f,Ut(f),f):(u=o,(f=ii.get(m))&&(u=T({},o),Rp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ut(f),ln(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,tf(u,o.precedence,n));return s.instance}function tf(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var b=u[_];if(b.dataset.precedence===s)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function wp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Rp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var nf=null;function lT(n,s,o){if(nf===null){var u=new Map,f=nf=new Map;f.set(o,u)}else f=nf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Vi]||m[Lt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=n+_;var b=u.get(_);b?b.push(m):u.set(_,[m])}}return u}function uT(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function G1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function cT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function K1(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Oo(u.href),m=s.querySelector(Iu(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=sf.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,Ut(m);return}m=s.ownerDocument||s,u=aT(u),(f=ii.get(f))&&wp(u,f),m=m.createElement("link"),Ut(m);var _=m;_._p=new Promise(function(b,O){_.onload=b,_.onerror=O}),ln(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=sf.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Cp=0;function Y1(n,s){return n.stylesheets&&n.count===0&&af(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&af(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Cp===0&&(Cp=62500*R1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&af(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Cp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var rf=null;function af(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,rf=new Map,s.forEach(Q1,n),rf=null,sf.call(n))}function Q1(n,s){if(!(s.state.loading&4)){var o=rf.get(n);if(o)var u=o.get(null);else{o=new Map,rf.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=s.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=sf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Ru={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function $1(n,s,o,u,f,m,_,b,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function hT(n,s,o,u,f,m,_,b,O,H,Z,ne){return n=new $1(n,s,o,_,O,H,Z,ne,b),s=1,m===!0&&(s|=24),m=Mn(3,null,null,s),n.current=m,m.stateNode=n,s=om(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},hm(m),n}function fT(n){return n?(n=ho,n):ho}function dT(n,s,o,u,f,m){f=fT(f),u.context===null?u.context=f:u.pendingContext=f,u=Xs(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Js(n,u,s),o!==null&&(wn(o,n,s),ru(o,n,s))}function mT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Dp(n,s){mT(n,s),(n=n.alternate)&&mT(n,s)}function pT(n){if(n.tag===13||n.tag===31){var s=sa(n,67108864);s!==null&&wn(s,n,67108864),Dp(n,67108864)}}function gT(n){if(n.tag===13||n.tag===31){var s=Un();s=Kr(s);var o=sa(n,s);o!==null&&wn(o,n,s),Dp(n,s)}}var of=!0;function X1(n,s,o,u){var f=J.T;J.T=null;var m=ue.p;try{ue.p=2,Np(n,s,o,u)}finally{ue.p=m,J.T=f}}function J1(n,s,o,u){var f=J.T;J.T=null;var m=ue.p;try{ue.p=8,Np(n,s,o,u)}finally{ue.p=m,J.T=f}}function Np(n,s,o,u){if(of){var f=xp(u);if(f===null)gp(n,s,u,lf,o),_T(n,u);else if(Z1(f,n,s,o,u))u.stopPropagation();else if(_T(n,u),s&4&&-1<W1.indexOf(n)){for(;f!==null;){var m=Kn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Ci(m.pendingLanes);if(_!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var O=1<<31-Ct(_);b.entanglements[1]|=O,_&=~O}Yi(m),(et&6)===0&&(Fh=tn()+500,Tu(0))}}break;case 31:case 13:b=sa(m,2),b!==null&&wn(b,m,2),Gh(),Dp(m,2)}if(m=xp(u),m===null&&gp(n,s,u,lf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else gp(n,s,u,null,o)}}function xp(n){return n=Yn(n),Vp(n)}var lf=null;function Vp(n){if(lf=null,n=Mi(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=d(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return lf=n,null}function yT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hn()){case Ii:return 2;case qr:return 8;case ke:case At:return 32;case wi:return 268435456;default:return 32}default:return 32}}var Mp=!1,lr=null,ur=null,cr=null,Cu=new Map,Du=new Map,hr=[],W1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _T(n,s){switch(n){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Cu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(s.pointerId)}}function Nu(n,s,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Kn(s),s!==null&&pT(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Z1(n,s,o,u,f){switch(s){case"focusin":return lr=Nu(lr,n,s,o,u,f),!0;case"dragenter":return ur=Nu(ur,n,s,o,u,f),!0;case"mouseover":return cr=Nu(cr,n,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return Cu.set(m,Nu(Cu.get(m)||null,n,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Du.set(m,Nu(Du.get(m)||null,n,s,o,u,f)),!0}return!1}function vT(n){var s=Mi(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,ui(n.priority,function(){gT(o)});return}}else if(s===31){if(s=d(o),s!==null){n.blockedOn=s,ui(n.priority,function(){gT(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function uf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=xp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Fl=u,o.target.dispatchEvent(u),Fl=null}else return s=Kn(o),s!==null&&pT(s),n.blockedOn=o,!1;s.shift()}return!0}function ET(n,s,o){uf(n)&&o.delete(s)}function eR(){Mp=!1,lr!==null&&uf(lr)&&(lr=null),ur!==null&&uf(ur)&&(ur=null),cr!==null&&uf(cr)&&(cr=null),Cu.forEach(ET),Du.forEach(ET)}function cf(n,s){n.blockedOn===s&&(n.blockedOn=null,Mp||(Mp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,eR)))}var hf=null;function TT(n){hf!==n&&(hf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){hf===n&&(hf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Vp(u||o)===null)continue;break}var m=Kn(o);m!==null&&(n.splice(s,3),s-=3,xm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function ko(n){function s(O){return cf(O,n)}lr!==null&&cf(lr,n),ur!==null&&cf(ur,n),cr!==null&&cf(cr,n),Cu.forEach(s),Du.forEach(s);for(var o=0;o<hr.length;o++){var u=hr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<hr.length&&(o=hr[0],o.blockedOn===null);)vT(o),o.blockedOn===null&&hr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[Xt]||null;if(typeof m=="function")_||TT(o);else if(_){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Xt]||null)b=_.formAction;else if(Vp(f)!==null)continue}else b=_.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),TT(o)}}}function ST(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Op(n){this._internalRoot=n}ff.prototype.render=Op.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Un();dT(o,u,n,s,null,null)},ff.prototype.unmount=Op.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;dT(n.current,2,null,n,null,null),Gh(),s[xi]=null}};function ff(n){this._internalRoot=n}ff.prototype.unstable_scheduleHydration=function(n){if(n){var s=Gc();n={blockedOn:null,target:n,priority:s};for(var o=0;o<hr.length&&s!==0&&s<hr[o].priority;o++);hr.splice(o,0,n),o===0&&vT(n)}};var bT=e.version;if(bT!=="19.2.4")throw Error(i(527,bT,"19.2.4"));ue.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var tR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{oi=df.inject(tR),nn=df}catch{}}return Vu.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=Nv,m=xv,_=Vv;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=hT(n,1,!1,null,null,o,u,null,f,m,_,ST),n[xi]=s.current,pp(n),new Op(s)},Vu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=Nv,_=xv,b=Vv,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),s=hT(n,1,!0,s,o??null,u,f,O,m,_,b,ST),s.context=fT(null),o=s.current,u=Un(),u=Kr(u),f=Xs(u),f.callback=null,Js(o,f,u),o=u,s.current.lanes=o,Hr(s,o),Yi(s),n[xi]=s.current,pp(n),new ff(s)},Vu.version="19.2.4",Vu}var MT;function hR(){if(MT)return Lp.exports;MT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lp.exports=cR(),Lp.exports}var fR=hR();const dR=()=>{};var OT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},mR=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],d=r[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},G0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,d=c?r[a+1]:0,p=a+2<r.length,g=p?r[a+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,R=g&63;p||(R=64,c||(S=64)),i.push(t[v],t[T],t[S],t[R])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(H0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):mR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],d=a<r.length?t[r.charAt(a)]:0;++a;const g=a<r.length?t[r.charAt(a)]:64;++a;const T=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new pR;const S=l<<2|d>>4;if(i.push(S),g!==64){const R=d<<4&240|g>>2;if(i.push(R),T!==64){const x=g<<6&192|T;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class pR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gR=function(r){const e=H0(r);return G0.encodeByteArray(e,!0)},K0=function(r){return gR(r).replace(/\./g,"")},Y0=function(r){try{return G0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=()=>Q0().__FIREBASE_DEFAULTS__,_R=()=>{if(typeof process>"u"||typeof OT>"u")return;const r=OT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},vR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Y0(r[1]);return e&&JSON.parse(e)},fd=()=>{try{return dR()||yR()||_R()||vR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ER=r=>{var e,t;return(t=(e=fd())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},$0=()=>{var r;return(r=fd())==null?void 0:r.config},X0=r=>{var e;return(e=fd())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J0(r){return(await fetch(r,{credentials:"include"})).ok}const Xu={};function SR(){const r={prod:[],emulator:[]};for(const e of Object.keys(Xu))Xu[e]?r.emulator.push(e):r.prod.push(e);return r}function bR(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let PT=!1;function AR(r,e){if(typeof window>"u"||typeof document>"u"||!bl(window.location.host)||Xu[r]===e||Xu[r]||PT)return;Xu[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=SR().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{PT=!0,c()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=bR(i),R=t("text"),x=document.getElementById(R)||document.createElement("span"),C=t("learnmore"),j=document.getElementById(C)||document.createElement("a"),Q=t("preprendIcon"),re=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const oe=S.element;d(oe),v(j,C);const _e=g();p(re,Q),oe.append(re,x,j,_e),document.body.appendChild(oe)}l?(x.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function W0(){var e;const r=(e=fd())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function CR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DR(){const r=Qt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Z0(){return!W0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eb(){return!W0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function tb(){try{return typeof indexedDB=="object"}catch{return!1}}function NR(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="FirebaseError";class Vs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=xR,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ic.prototype.create)}}class Ic{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?VR(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Vs(a,d,i)}}function VR(r,e){return r.replace(MR,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const MR=/\{\$([^}]+)}/g;function OR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ma(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(kT(l)&&kT(c)){if(!Ma(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function kT(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Fu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Hu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function PR(r,e){const t=new kR(r,e);return t.subscribe.bind(t)}class kR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");LR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Bp),a.error===void 0&&(a.error=Bp),a.complete===void 0&&(a.complete=Bp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LR(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Bp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(r){return r&&r._delegate?r._delegate:r}class Oa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new TR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zR(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jR(r){return r===_a?void 0:r}function zR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new UR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(He||(He={}));const qR={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},FR=He.INFO,HR={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},GR=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=HR[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qg{constructor(e){this.name=e,this._logLevel=FR,this._logHandler=GR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const KR=(r,e)=>e.some(t=>r instanceof t);let LT,UT;function YR(){return LT||(LT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QR(){return UT||(UT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nb=new WeakMap,og=new WeakMap,ib=new WeakMap,qp=new WeakMap,$g=new WeakMap;function $R(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(br(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&nb.set(t,r)}).catch(()=>{}),$g.set(e,r),e}function XR(r){if(og.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});og.set(r,e)}let lg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return og.get(r);if(e==="objectStoreNames")return r.objectStoreNames||ib.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return br(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function JR(r){lg=r(lg)}function WR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Fp(this),e,...t);return ib.set(i,e.sort?e.sort():[e]),br(i)}:QR().includes(r)?function(...e){return r.apply(Fp(this),e),br(nb.get(this))}:function(...e){return br(r.apply(Fp(this),e))}}function ZR(r){return typeof r=="function"?WR(r):(r instanceof IDBTransaction&&XR(r),KR(r,YR())?new Proxy(r,lg):r)}function br(r){if(r instanceof IDBRequest)return $R(r);if(qp.has(r))return qp.get(r);const e=ZR(r);return e!==r&&(qp.set(r,e),$g.set(e,r)),e}const Fp=r=>$g.get(r);function eC(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),d=br(c);return i&&c.addEventListener("upgradeneeded",p=>{i(br(c.result),p.oldVersion,p.newVersion,br(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const tC=["get","getKey","getAll","getAllKeys","count"],nC=["put","add","delete","clear"],Hp=new Map;function jT(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Hp.get(e))return Hp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=nC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||tC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return Hp.set(e,l),l}JR(r=>({...r,get:(e,t,i)=>jT(e,t)||r.get(e,t,i),has:(e,t)=>!!jT(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function sC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ug="@firebase/app",zT="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new Qg("@firebase/app"),rC="@firebase/app-compat",aC="@firebase/analytics-compat",oC="@firebase/analytics",lC="@firebase/app-check-compat",uC="@firebase/app-check",cC="@firebase/auth",hC="@firebase/auth-compat",fC="@firebase/database",dC="@firebase/data-connect",mC="@firebase/database-compat",pC="@firebase/functions",gC="@firebase/functions-compat",yC="@firebase/installations",_C="@firebase/installations-compat",vC="@firebase/messaging",EC="@firebase/messaging-compat",TC="@firebase/performance",SC="@firebase/performance-compat",bC="@firebase/remote-config",AC="@firebase/remote-config-compat",IC="@firebase/storage",wC="@firebase/storage-compat",RC="@firebase/firestore",CC="@firebase/ai",DC="@firebase/firestore-compat",NC="firebase",xC="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",VC={[ug]:"fire-core",[rC]:"fire-core-compat",[oC]:"fire-analytics",[aC]:"fire-analytics-compat",[uC]:"fire-app-check",[lC]:"fire-app-check-compat",[cC]:"fire-auth",[hC]:"fire-auth-compat",[fC]:"fire-rtdb",[dC]:"fire-data-connect",[mC]:"fire-rtdb-compat",[pC]:"fire-fn",[gC]:"fire-fn-compat",[yC]:"fire-iid",[_C]:"fire-iid-compat",[vC]:"fire-fcm",[EC]:"fire-fcm-compat",[TC]:"fire-perf",[SC]:"fire-perf-compat",[bC]:"fire-rc",[AC]:"fire-rc-compat",[IC]:"fire-gcs",[wC]:"fire-gcs-compat",[RC]:"fire-fst",[DC]:"fire-fst-compat",[CC]:"fire-vertex","fire-js":"fire-js",[NC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map,MC=new Map,hg=new Map;function BT(r,e){try{r.container.addComponent(e)}catch(t){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function tl(r){const e=r.name;if(hg.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;hg.set(e,r);for(const t of Uf.values())BT(t,r);for(const t of MC.values())BT(t,r);return!0}function Xg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function zn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Ic("app","Firebase",OC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=xC;function sb(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:cg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Ar.create("bad-app-name",{appName:String(a)});if(t||(t=$0()),!t)throw Ar.create("no-options");const l=Uf.get(a);if(l){if(Ma(t,l.options)&&Ma(i,l.config))return l;throw Ar.create("duplicate-app",{appName:a})}const c=new BR(a);for(const p of hg.values())c.addComponent(p);const d=new PC(t,i,c);return Uf.set(a,d),d}function kC(r=cg){const e=Uf.get(r);if(!e&&r===cg&&$0())return sb();if(!e)throw Ar.create("no-app",{appName:r});return e}function Ir(r,e,t){let i=VC[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(c.join(" "));return}tl(new Oa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="firebase-heartbeat-database",UC=1,lc="firebase-heartbeat-store";let Gp=null;function rb(){return Gp||(Gp=eC(LC,UC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(lc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ar.create("idb-open",{originalErrorMessage:r.message})})),Gp}async function jC(r){try{const t=(await rb()).transaction(lc),i=await t.objectStore(lc).get(ab(r));return await t.done,i}catch(e){if(e instanceof Vs)Cs.warn(e.message);else{const t=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(t.message)}}}async function qT(r,e){try{const i=(await rb()).transaction(lc,"readwrite");await i.objectStore(lc).put(e,ab(r)),await i.done}catch(t){if(t instanceof Vs)Cs.warn(t.message);else{const i=Ar.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cs.warn(i.message)}}}function ab(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=1024,BC=30;class qC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=FT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>BC){const c=GC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Cs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=FT(),{heartbeatsToSend:i,unsentEntries:a}=FC(this._heartbeatsCache.heartbeats),l=K0(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Cs.warn(t),""}}}function FT(){return new Date().toISOString().substring(0,10)}function FC(r,e=zC){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),HT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),HT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class HC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tb()?NR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function HT(r){return K0(JSON.stringify({version:2,heartbeats:r})).length}function GC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(r){tl(new Oa("platform-logger",e=>new iC(e),"PRIVATE")),tl(new Oa("heartbeat",e=>new qC(e),"PRIVATE")),Ir(ug,zT,r),Ir(ug,zT,"esm2020"),Ir("fire-js","")}KC("");var YC="firebase",QC="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(YC,QC,"app");function ob(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $C=ob,lb=new Ic("auth","Firebase",ob());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Qg("@firebase/auth");function XC(r,...e){jf.logLevel<=He.WARN&&jf.warn(`Auth (${Al}): ${r}`,...e)}function Sf(r,...e){jf.logLevel<=He.ERROR&&jf.error(`Auth (${Al}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(r,...e){throw Wg(r,...e)}function Si(r,...e){return Wg(r,...e)}function Jg(r,e,t){const i={...$C(),[e]:t};return new Ic("auth","Firebase",i).create(e,{appName:r.name})}function ws(r){return Jg(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JC(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ri(r,"argument-error"),Jg(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wg(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return lb.create(r,...e)}function Ce(r,e,...t){if(!r)throw Wg(e,...t)}function bs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Sf(e),new Error(e)}function Ds(r,e){r||bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function WC(){return GT()==="http:"||GT()==="https:"}function GT(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WC()||RR()||"connection"in navigator)?navigator.onLine:!0}function eD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ds(t>e,"Short delay should be less than long delay!"),this.isMobile=IR()||CR()}get(){return ZC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(r,e){Ds(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iD=new Rc(3e4,6e4);function Or(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Pr(r,e,t,i,a={}){return cb(r,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=wc({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...l};return wR()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&bl(r.emulatorConfig.host)&&(g.credentials="include"),ub.fetch()(await hb(r,r.config.apiHost,t,d),g)})}async function cb(r,e,t){r._canInitEmulator=!1;const i={...tD,...e};try{const a=new rD(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw mf(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw mf(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw mf(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw mf(r,"user-disabled",c);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Jg(r,v,g);ri(r,v)}}catch(a){if(a instanceof Vs)throw a;ri(r,"network-request-failed",{message:String(a)})}}async function Cc(r,e,t,i,a={}){const l=await Pr(r,e,t,i,a);return"mfaPendingCredential"in l&&ri(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function hb(r,e,t,i){const a=`${e}${t}?${i}`,l=r,c=l.config.emulator?Zg(r.config,a):`${r.config.apiScheme}://${a}`;return nD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function sD(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Si(this.auth,"network-request-failed")),iD.get())})}}function mf(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Si(r,e,i);return a.customData._tokenResponse=t,a}function KT(r){return r!==void 0&&r.enterprise!==void 0}class aD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oD(r,e){return Pr(r,"GET","/v2/recaptchaConfig",Or(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(r,e){return Pr(r,"POST","/v1/accounts:delete",e)}async function zf(r,e){return Pr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uD(r,e=!1){const t=Ot(r),i=await t.getIdToken(e),a=ey(i);Ce(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Ju(Kp(a.auth_time)),issuedAtTime:Ju(Kp(a.iat)),expirationTime:Ju(Kp(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Kp(r){return Number(r)*1e3}function ey(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Sf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Y0(t);return a?JSON.parse(a):(Sf("Failed to decode base64 JWT payload"),null)}catch(a){return Sf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function YT(r){const e=ey(r);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Vs&&cD(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function cD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ju(this.lastLoginAt),this.creationTime=Ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(r){var T;const e=r.auth,t=await r.getIdToken(),i=await uc(r,zf(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=(T=a.providerUserInfo)!=null&&T.length?fb(a.providerUserInfo):[],c=dD(r.providerData,l),d=r.isAnonymous,p=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new dg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,v)}async function fD(r){const e=Ot(r);await Bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dD(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function fb(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(r,e){const t=await cb(r,{},async()=>{const i=wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await hb(r,a,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return r.emulatorConfig&&bl(r.emulatorConfig.host)&&(p.credentials="include"),ub.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pD(r,e){return Pr(r,"POST","/v2/accounts:revokeToken",Or(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=YT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await mD(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new $o;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Ce(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ce(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(r,e){Ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ti{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new hD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new dg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await uc(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uD(this,e)}reload(){return fD(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Bf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(ws(this.auth));const e=await this.getIdToken();return await uc(this,lD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:R,providerData:x,stsTokenManager:C}=t;Ce(T&&C,e,"internal-error");const j=$o.fromJSON(this.name,C);Ce(typeof T=="string",e,"internal-error"),dr(i,e.name),dr(a,e.name),Ce(typeof S=="boolean",e,"internal-error"),Ce(typeof R=="boolean",e,"internal-error"),dr(l,e.name),dr(c,e.name),dr(d,e.name),dr(p,e.name),dr(g,e.name),dr(v,e.name);const Q=new Ti({uid:T,auth:e,email:a,emailVerified:S,displayName:i,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:j,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(Q.providerData=x.map(re=>({...re}))),p&&(Q._redirectEventId=p),Q}static async _fromIdTokenResponse(e,t,i=!1){const a=new $o;a.updateFromServerResponse(t);const l=new Ti({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Bf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ce(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?fb(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new $o;d.updateFromIdToken(i);const p=new Ti({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new dg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new Map;function As(r){Ds(r instanceof Function,"Expected a class definition");let e=QT.get(r);return e?(Ds(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,QT.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}db.type="NONE";const $T=db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(r,e,t){return`firebase:${r}:${e}:${t}`}class Xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=bf(this.userKey,a.apiKey,l),this.fullPersistenceKey=bf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await zf(this.auth,{idToken:e}).catch(()=>{});return t?Ti._fromGetAccountInfoResponse(this.auth,t,e):null}return Ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Xo(As($T),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||As($T);const c=bf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let T;if(typeof v=="string"){const S=await zf(e,{idToken:v}).catch(()=>{});if(!S)break;T=await Ti._fromGetAccountInfoResponse(e,S,v)}else T=Ti._fromJSON(e,v);g!==l&&(d=T),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Xo(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Xo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vb(e))return"Blackberry";if(Eb(e))return"Webos";if(pb(e))return"Safari";if((e.includes("chrome/")||gb(e))&&!e.includes("edge/"))return"Chrome";if(_b(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function mb(r=Qt()){return/firefox\//i.test(r)}function pb(r=Qt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gb(r=Qt()){return/crios\//i.test(r)}function yb(r=Qt()){return/iemobile/i.test(r)}function _b(r=Qt()){return/android/i.test(r)}function vb(r=Qt()){return/blackberry/i.test(r)}function Eb(r=Qt()){return/webos/i.test(r)}function ty(r=Qt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function gD(r=Qt()){var e;return ty(r)&&!!((e=window.navigator)!=null&&e.standalone)}function yD(){return DR()&&document.documentMode===10}function Tb(r=Qt()){return ty(r)||_b(r)||Eb(r)||vb(r)||/windows phone/i.test(r)||yb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(r,e=[]){let t;switch(r){case"Browser":t=XT(Qt());break;case"Worker":t=`${XT(Qt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Al}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(r,e={}){return Pr(r,"GET","/v2/passwordPolicy",Or(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=6;class TD{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ED,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JT(this),this.idTokenSubscription=new JT(this),this.beforeStateQueue=new _D(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=As(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await zf(this,{idToken:e}),i=await Ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(zn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(i=p.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(ws(this));const t=e?Ot(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vD(this),t=new TD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ic("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await pD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&As(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[As(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&XC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function kr(r){return Ot(r)}class JT{constructor(e){this.auth=e,this.observer=null,this.addObserver=PR(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bD(r){dd=r}function bb(r){return dd.loadJS(r)}function AD(){return dd.recaptchaEnterpriseScript}function ID(){return dd.gapiScript}function wD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class RD{constructor(){this.enterprise=new CD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class CD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const DD="recaptcha-enterprise",Ab="NO_RECAPTCHA";class ND{constructor(e){this.type=DD,this.auth=kr(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{oD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new aD(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;KT(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(Ab)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RD().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&KT(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=AD();p.length!==0&&(p+=d),bb(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function WT(r,e,t,i=!1,a=!1){const l=new ND(r);let c;if(a)c=Ab;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function mg(r,e,t,i,a){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await WT(r,e,t,t==="getOobCode");return i(r,c)}else return i(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await WT(r,e,t,t==="getOobCode");return i(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(r,e){const t=Xg(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ma(l,e??{}))return a;ri(a,"already-initialized")}return t.initialize({options:e})}function VD(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(As);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function MD(r,e,t){const i=kr(r);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=Ib(e),{host:c,port:d}=OD(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Ma(g,i.config.emulator)&&Ma(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,bl(c)?(J0(`${l}//${c}${p}`),AR("Auth",!0)):PD()}function Ib(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function OD(r){const e=Ib(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:ZT(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:ZT(c)}}}function ZT(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function PD(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,t){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}async function kD(r,e){return Pr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(r,e){return Cc(r,"POST","/v1/accounts:signInWithPassword",Or(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(r,e){return Cc(r,"POST","/v1/accounts:signInWithEmailLink",Or(r,e))}async function jD(r,e){return Cc(r,"POST","/v1/accounts:signInWithEmailLink",Or(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends ny{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new cc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new cc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,t,"signInWithPassword",LD);case"emailLink":return UD(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,i,"signUpPassword",kD);case"emailLink":return jD(e,{idToken:t,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(r,e){return Cc(r,"POST","/v1/accounts:signInWithIdp",Or(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="http://localhost";class Pa extends ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Pa(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Jo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Jo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}buildRequest(){const e={requestUri:zD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qD(r){const e=Fu(Hu(r)).link,t=e?Fu(Hu(e)).deep_link_id:null,i=Fu(Hu(r)).deep_link_id;return(i?Fu(Hu(i)).link:null)||i||t||e||r}class iy{constructor(e){const t=Fu(Hu(e)),i=t.apiKey??null,a=t.oobCode??null,l=BD(t.mode??null);Ce(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=qD(e);try{return new iy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.providerId=Il.PROVIDER_ID}static credential(e,t){return cc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=iy.parseLink(t);return Ce(i,"argument-error"),cc._fromEmailAndCode(e,i.code,i.tenantId)}}Il.PROVIDER_ID="password";Il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends sy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Dc{constructor(){super("facebook.com")}static credential(e){return Pa._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.FACEBOOK_SIGN_IN_METHOD="facebook.com";_r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pa._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ss.credential(t,i)}catch{return null}}}Ss.GOOGLE_SIGN_IN_METHOD="google.com";Ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Dc{constructor(){super("github.com")}static credential(e){return Pa._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Dc{constructor(){super("twitter.com")}static credential(e,t){return Pa._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Er.credential(t,i)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(r,e){return Cc(r,"POST","/v1/accounts:signUp",Or(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Ti._fromIdTokenResponse(e,i,a),c=eS(i);return new ka({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=eS(i);return new ka({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function eS(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends Vs{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,qf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new qf(e,t,i,a)}}function wb(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?qf._fromErrorAndOperation(r,l,e,i):l})}async function HD(r,e,t=!1){const i=await uc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ka._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(r,e,t=!1){const{auth:i}=r;if(zn(i.app))return Promise.reject(ws(i));const a="reauthenticate";try{const l=await uc(r,wb(i,a,e,r),t);Ce(l.idToken,i,"internal-error");const c=ey(l.idToken);Ce(c,i,"internal-error");const{sub:d}=c;return Ce(r.uid===d,i,"user-mismatch"),ka._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ri(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(r,e,t=!1){if(zn(r.app))return Promise.reject(ws(r));const i="signIn",a=await wb(r,i,e),l=await ka._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}async function KD(r,e){return Rb(kr(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(r){const e=kr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YD(r,e,t){if(zn(r.app))return Promise.reject(ws(r));const i=kr(r),c=await mg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Cb(r),p}),d=await ka._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function QD(r,e,t){return zn(r.app)?Promise.reject(ws(r)):KD(Ot(r),Il.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Cb(r),i})}function $D(r,e,t,i){return Ot(r).onIdTokenChanged(e,t,i)}function XD(r,e,t){return Ot(r).beforeAuthStateChanged(e,t)}function JD(r,e,t,i){return Ot(r).onAuthStateChanged(e,t,i)}function WD(r){return Ot(r).signOut()}const Ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=1e3,eN=10;class Nb extends Db{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);yD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,eN):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},ZD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nb.type="LOCAL";const tN=Nb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends Db{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xb.type="SESSION";const Vb=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new md(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await nN(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=ry("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const S=T;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function sN(r){es().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function rN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function oN(){return Mb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="firebaseLocalStorageDb",lN=1,Hf="firebaseLocalStorage",Pb="fbase_key";class Nc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pd(r,e){return r.transaction([Hf],e?"readwrite":"readonly").objectStore(Hf)}function uN(){const r=indexedDB.deleteDatabase(Ob);return new Nc(r).toPromise()}function pg(){const r=indexedDB.open(Ob,lN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Hf,{keyPath:Pb})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Hf)?e(i):(i.close(),await uN(),e(await pg()))})})}async function tS(r,e,t){const i=pd(r,!0).put({[Pb]:e,value:t});return new Nc(i).toPromise()}async function cN(r,e){const t=pd(r,!1).get(e),i=await new Nc(t).toPromise();return i===void 0?null:i.value}function nS(r,e){const t=pd(r,!0).delete(e);return new Nc(t).toPromise()}const hN=800,fN=3;class kb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>fN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=md._getInstance(oN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await rN(),!this.activeServiceWorker)return;this.sender=new iN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pg();return await tS(e,Ff,"1"),await nS(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>tS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>cN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=pd(a,!1).getAll();return new Nc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kb.type="LOCAL";const dN=kb;new Rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(r,e){return e?As(e):(Ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay extends ny{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mN(r){return Rb(r.auth,new ay(r),r.bypassAuthState)}function pN(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),GD(t,new ay(r),r.bypassAuthState)}async function gN(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),HD(t,new ay(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mN;case"linkViaPopup":case"linkViaRedirect":return gN;case"reauthViaPopup":case"reauthViaRedirect":return pN;default:ri(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=new Rc(2e3,1e4);async function _N(r,e,t){if(zn(r.app))return Promise.reject(Si(r,"operation-not-supported-in-this-environment"));const i=kr(r);JC(r,e,sy);const a=Lb(i,t);return new wa(i,"signInViaPopup",e,a).executeNotNull()}class wa extends Ub{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,wa.currentPopupAction&&wa.currentPopupAction.cancel(),wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=ry();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yN.get())};e()}}wa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="pendingRedirect",Af=new Map;class EN extends Ub{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Af.get(this.auth._key());if(!e){try{const i=await TN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Af.set(this.auth._key(),e)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TN(r,e){const t=AN(e),i=bN(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function SN(r,e){Af.set(r._key(),e)}function bN(r){return As(r._redirectPersistence)}function AN(r){return bf(vN,r.config.apiKey,r.name)}async function IN(r,e,t=!1){if(zn(r.app))return Promise.reject(ws(r));const i=kr(r),a=Lb(i,e),c=await new EN(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=600*1e3;class RN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!jb(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Si(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wN&&this.cachedEventUids.clear(),this.cachedEventUids.has(iS(e))}saveEventToCache(e){this.cachedEventUids.add(iS(e)),this.lastProcessedEventTime=Date.now()}}function iS(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function jb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(r,e={}){return Pr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xN=/^https?/;async function VN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await DN(r);for(const t of e)try{if(MN(t))return}catch{}ri(r,"unauthorized-domain")}function MN(r){const e=fg(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!xN.test(t))return!1;if(NN.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=new Rc(3e4,6e4);function sS(){const r=es().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function PN(r){return new Promise((e,t)=>{var a,l,c;function i(){sS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sS(),t(Si(r,"network-request-failed"))},timeout:ON.get()})}if((l=(a=es().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=es().gapi)!=null&&c.load)i();else{const d=wD("iframefcb");return es()[d]=()=>{gapi.load?i():t(Si(r,"network-request-failed"))},bb(`${ID()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw If=null,e})}let If=null;function kN(r){return If=If||PN(r),If}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new Rc(5e3,15e3),UN="__/auth/iframe",jN="emulator/auth/iframe",zN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qN(r){const e=r.config;Ce(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Zg(e,jN):`https://${r.config.authDomain}/${UN}`,i={apiKey:e.apiKey,appName:r.name,v:Al},a=BN.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${wc(i).slice(1)}`}async function FN(r){const e=await kN(r),t=es().gapi;return Ce(t,r,"internal-error"),e.open({where:document.body,url:qN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zN,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Si(r,"network-request-failed"),d=es().setTimeout(()=>{l(c)},LN.get());function p(){es().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GN=500,KN=600,YN="_blank",QN="http://localhost";class rS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $N(r,e,t,i=GN,a=KN){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...HN,width:i.toString(),height:a.toString(),top:l,left:c},g=Qt().toLowerCase();t&&(d=gb(g)?YN:t),mb(g)&&(e=e||QN,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[R,x])=>`${S}${R}=${x},`,"");if(gD(g)&&d!=="_self")return XN(e||"",d),new rS(null);const T=window.open(e||"",d,v);Ce(T,r,"popup-blocked");try{T.focus()}catch{}return new rS(T)}function XN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="__/auth/handler",WN="emulator/auth/handler",ZN=encodeURIComponent("fac");async function aS(r,e,t,i,a,l){Ce(r.config.authDomain,r,"auth-domain-config-required"),Ce(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Al,eventId:a};if(e instanceof sy){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",OR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))c[v]=T}if(e instanceof Dc){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(c.scopes=v.join(","))}r.tenantId&&(c.tid=r.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await r._getAppCheckToken(),g=p?`#${ZN}=${encodeURIComponent(p)}`:"";return`${ex(r)}?${wc(d).slice(1)}${g}`}function ex({config:r}){return r.emulator?Zg(r,WN):`https://${r.authDomain}/${JN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="webStorageSupport";class tx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vb,this._completeRedirectFn=IN,this._overrideRedirectResult=SN}async _openPopup(e,t,i,a){var c;Ds((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await aS(e,t,i,fg(),a);return $N(e,l,ry())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await aS(e,t,i,fg(),a);return sN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ds(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await FN(e),i=new RN(e);return t.register("authEvent",a=>(Ce(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yp,{type:Yp},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[Yp];l!==void 0&&t(!!l),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tb()||pb()||ty()}}const nx=tx;var oS="@firebase/auth",lS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rx(r){tl(new Oa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ce(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sb(r)},g=new SD(i,a,l,p);return VD(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),tl(new Oa("auth-internal",e=>{const t=kr(e.getProvider("auth").getImmediate());return(i=>new ix(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(oS,lS,sx(r)),Ir(oS,lS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=300,ox=X0("authIdTokenMaxAge")||ax;let uS=null;const lx=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ox)return;const a=t==null?void 0:t.token;uS!==a&&(uS=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function ux(r=kC()){const e=Xg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=xD(r,{popupRedirectResolver:nx,persistence:[dN,tN,Vb]}),i=X0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=lx(l.toString());XD(t,c,()=>c(t.currentUser)),$D(t,d=>c(d))}}const a=ER("auth");return a&&MD(t,`http://${a}`),t}function cx(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}bD({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=Si("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",cx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rx("Browser");var cS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,zb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function N(){}N.prototype=A.prototype,D.F=A.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(P,M,U){for(var V=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)V[Ke-2]=arguments[Ke];return A.prototype[M].apply(P,V)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,A,N){N||(N=0);const P=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)P[M]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(M=0;M<16;++M)P[M]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=D.g[0],N=D.g[1],M=D.g[2];let U=D.g[3],V;V=A+(U^N&(M^U))+P[0]+3614090360&4294967295,A=N+(V<<7&4294967295|V>>>25),V=U+(M^A&(N^M))+P[1]+3905402710&4294967295,U=A+(V<<12&4294967295|V>>>20),V=M+(N^U&(A^N))+P[2]+606105819&4294967295,M=U+(V<<17&4294967295|V>>>15),V=N+(A^M&(U^A))+P[3]+3250441966&4294967295,N=M+(V<<22&4294967295|V>>>10),V=A+(U^N&(M^U))+P[4]+4118548399&4294967295,A=N+(V<<7&4294967295|V>>>25),V=U+(M^A&(N^M))+P[5]+1200080426&4294967295,U=A+(V<<12&4294967295|V>>>20),V=M+(N^U&(A^N))+P[6]+2821735955&4294967295,M=U+(V<<17&4294967295|V>>>15),V=N+(A^M&(U^A))+P[7]+4249261313&4294967295,N=M+(V<<22&4294967295|V>>>10),V=A+(U^N&(M^U))+P[8]+1770035416&4294967295,A=N+(V<<7&4294967295|V>>>25),V=U+(M^A&(N^M))+P[9]+2336552879&4294967295,U=A+(V<<12&4294967295|V>>>20),V=M+(N^U&(A^N))+P[10]+4294925233&4294967295,M=U+(V<<17&4294967295|V>>>15),V=N+(A^M&(U^A))+P[11]+2304563134&4294967295,N=M+(V<<22&4294967295|V>>>10),V=A+(U^N&(M^U))+P[12]+1804603682&4294967295,A=N+(V<<7&4294967295|V>>>25),V=U+(M^A&(N^M))+P[13]+4254626195&4294967295,U=A+(V<<12&4294967295|V>>>20),V=M+(N^U&(A^N))+P[14]+2792965006&4294967295,M=U+(V<<17&4294967295|V>>>15),V=N+(A^M&(U^A))+P[15]+1236535329&4294967295,N=M+(V<<22&4294967295|V>>>10),V=A+(M^U&(N^M))+P[1]+4129170786&4294967295,A=N+(V<<5&4294967295|V>>>27),V=U+(N^M&(A^N))+P[6]+3225465664&4294967295,U=A+(V<<9&4294967295|V>>>23),V=M+(A^N&(U^A))+P[11]+643717713&4294967295,M=U+(V<<14&4294967295|V>>>18),V=N+(U^A&(M^U))+P[0]+3921069994&4294967295,N=M+(V<<20&4294967295|V>>>12),V=A+(M^U&(N^M))+P[5]+3593408605&4294967295,A=N+(V<<5&4294967295|V>>>27),V=U+(N^M&(A^N))+P[10]+38016083&4294967295,U=A+(V<<9&4294967295|V>>>23),V=M+(A^N&(U^A))+P[15]+3634488961&4294967295,M=U+(V<<14&4294967295|V>>>18),V=N+(U^A&(M^U))+P[4]+3889429448&4294967295,N=M+(V<<20&4294967295|V>>>12),V=A+(M^U&(N^M))+P[9]+568446438&4294967295,A=N+(V<<5&4294967295|V>>>27),V=U+(N^M&(A^N))+P[14]+3275163606&4294967295,U=A+(V<<9&4294967295|V>>>23),V=M+(A^N&(U^A))+P[3]+4107603335&4294967295,M=U+(V<<14&4294967295|V>>>18),V=N+(U^A&(M^U))+P[8]+1163531501&4294967295,N=M+(V<<20&4294967295|V>>>12),V=A+(M^U&(N^M))+P[13]+2850285829&4294967295,A=N+(V<<5&4294967295|V>>>27),V=U+(N^M&(A^N))+P[2]+4243563512&4294967295,U=A+(V<<9&4294967295|V>>>23),V=M+(A^N&(U^A))+P[7]+1735328473&4294967295,M=U+(V<<14&4294967295|V>>>18),V=N+(U^A&(M^U))+P[12]+2368359562&4294967295,N=M+(V<<20&4294967295|V>>>12),V=A+(N^M^U)+P[5]+4294588738&4294967295,A=N+(V<<4&4294967295|V>>>28),V=U+(A^N^M)+P[8]+2272392833&4294967295,U=A+(V<<11&4294967295|V>>>21),V=M+(U^A^N)+P[11]+1839030562&4294967295,M=U+(V<<16&4294967295|V>>>16),V=N+(M^U^A)+P[14]+4259657740&4294967295,N=M+(V<<23&4294967295|V>>>9),V=A+(N^M^U)+P[1]+2763975236&4294967295,A=N+(V<<4&4294967295|V>>>28),V=U+(A^N^M)+P[4]+1272893353&4294967295,U=A+(V<<11&4294967295|V>>>21),V=M+(U^A^N)+P[7]+4139469664&4294967295,M=U+(V<<16&4294967295|V>>>16),V=N+(M^U^A)+P[10]+3200236656&4294967295,N=M+(V<<23&4294967295|V>>>9),V=A+(N^M^U)+P[13]+681279174&4294967295,A=N+(V<<4&4294967295|V>>>28),V=U+(A^N^M)+P[0]+3936430074&4294967295,U=A+(V<<11&4294967295|V>>>21),V=M+(U^A^N)+P[3]+3572445317&4294967295,M=U+(V<<16&4294967295|V>>>16),V=N+(M^U^A)+P[6]+76029189&4294967295,N=M+(V<<23&4294967295|V>>>9),V=A+(N^M^U)+P[9]+3654602809&4294967295,A=N+(V<<4&4294967295|V>>>28),V=U+(A^N^M)+P[12]+3873151461&4294967295,U=A+(V<<11&4294967295|V>>>21),V=M+(U^A^N)+P[15]+530742520&4294967295,M=U+(V<<16&4294967295|V>>>16),V=N+(M^U^A)+P[2]+3299628645&4294967295,N=M+(V<<23&4294967295|V>>>9),V=A+(M^(N|~U))+P[0]+4096336452&4294967295,A=N+(V<<6&4294967295|V>>>26),V=U+(N^(A|~M))+P[7]+1126891415&4294967295,U=A+(V<<10&4294967295|V>>>22),V=M+(A^(U|~N))+P[14]+2878612391&4294967295,M=U+(V<<15&4294967295|V>>>17),V=N+(U^(M|~A))+P[5]+4237533241&4294967295,N=M+(V<<21&4294967295|V>>>11),V=A+(M^(N|~U))+P[12]+1700485571&4294967295,A=N+(V<<6&4294967295|V>>>26),V=U+(N^(A|~M))+P[3]+2399980690&4294967295,U=A+(V<<10&4294967295|V>>>22),V=M+(A^(U|~N))+P[10]+4293915773&4294967295,M=U+(V<<15&4294967295|V>>>17),V=N+(U^(M|~A))+P[1]+2240044497&4294967295,N=M+(V<<21&4294967295|V>>>11),V=A+(M^(N|~U))+P[8]+1873313359&4294967295,A=N+(V<<6&4294967295|V>>>26),V=U+(N^(A|~M))+P[15]+4264355552&4294967295,U=A+(V<<10&4294967295|V>>>22),V=M+(A^(U|~N))+P[6]+2734768916&4294967295,M=U+(V<<15&4294967295|V>>>17),V=N+(U^(M|~A))+P[13]+1309151649&4294967295,N=M+(V<<21&4294967295|V>>>11),V=A+(M^(N|~U))+P[4]+4149444226&4294967295,A=N+(V<<6&4294967295|V>>>26),V=U+(N^(A|~M))+P[11]+3174756917&4294967295,U=A+(V<<10&4294967295|V>>>22),V=M+(A^(U|~N))+P[2]+718787259&4294967295,M=U+(V<<15&4294967295|V>>>17),V=N+(U^(M|~A))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(M+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+U&4294967295}i.prototype.v=function(D,A){A===void 0&&(A=D.length);const N=A-this.blockSize,P=this.C;let M=this.h,U=0;for(;U<A;){if(M==0)for(;U<=N;)a(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<A;)if(P[M++]=D.charCodeAt(U++),M==this.blockSize){a(this,P),M=0;break}}else for(;U<A;)if(P[M++]=D[U++],M==this.blockSize){a(this,P),M=0;break}}this.h=M,this.o+=A},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)D[A++]=this.g[N]>>>P&255;return D};function l(D,A){var N=d;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=A(D)}function c(D,A){this.h=A;const N=[];let P=!0;for(let M=D.length-1;M>=0;M--){const U=D[M]|0;P&&U==A||(N[M]=U,P=!1)}this.g=N}var d={};function p(D){return-128<=D&&D<128?l(D,function(A){return new c([A|0],A<0?-1:0)}):new c([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return j(g(-D));const A=[];let N=1;for(let P=0;D>=N;P++)A[P]=D/N|0,N*=4294967296;return new c(A,0)}function v(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return j(v(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(A,8));let P=T;for(let U=0;U<D.length;U+=8){var M=Math.min(8,D.length-U);const V=parseInt(D.substring(U,U+M),A);M<8?(M=g(Math.pow(A,M)),P=P.j(M).add(g(V))):(P=P.j(N),P=P.add(g(V)))}return P}var T=p(0),S=p(1),R=p(16777216);r=c.prototype,r.m=function(){if(C(this))return-j(this).m();let D=0,A=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);D+=(P>=0?P:4294967296+P)*A,A*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(x(this))return"0";if(C(this))return"-"+j(this).toString(D);const A=g(Math.pow(D,6));var N=this;let P="";for(;;){const M=_e(N,A).g;N=Q(N,M.j(A));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=M,x(N))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function x(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function C(D){return D.h==-1}r.l=function(D){return D=Q(this,D),C(D)?-1:x(D)?0:1};function j(D){const A=D.g.length,N=[];for(let P=0;P<A;P++)N[P]=~D.g[P];return new c(N,~D.h).add(S)}r.abs=function(){return C(this)?j(this):this},r.add=function(D){const A=Math.max(this.g.length,D.g.length),N=[];let P=0;for(let M=0;M<=A;M++){let U=P+(this.i(M)&65535)+(D.i(M)&65535),V=(U>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);P=V>>>16,U&=65535,V&=65535,N[M]=V<<16|U}return new c(N,N[N.length-1]&-2147483648?-1:0)};function Q(D,A){return D.add(j(A))}r.j=function(D){if(x(this)||x(D))return T;if(C(this))return C(D)?j(this).j(j(D)):j(j(this).j(D));if(C(D))return j(this.j(j(D)));if(this.l(R)<0&&D.l(R)<0)return g(this.m()*D.m());const A=this.g.length+D.g.length,N=[];for(var P=0;P<2*A;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let M=0;M<D.g.length;M++){const U=this.i(P)>>>16,V=this.i(P)&65535,Ke=D.i(M)>>>16,$e=D.i(M)&65535;N[2*P+2*M]+=V*$e,re(N,2*P+2*M),N[2*P+2*M+1]+=U*$e,re(N,2*P+2*M+1),N[2*P+2*M+1]+=V*Ke,re(N,2*P+2*M+1),N[2*P+2*M+2]+=U*Ke,re(N,2*P+2*M+2)}for(D=0;D<A;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=A;D<2*A;D++)N[D]=0;return new c(N,0)};function re(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function oe(D,A){this.g=D,this.h=A}function _e(D,A){if(x(A))throw Error("division by zero");if(x(D))return new oe(T,T);if(C(D))return A=_e(j(D),A),new oe(j(A.g),j(A.h));if(C(A))return A=_e(D,j(A)),new oe(j(A.g),A.h);if(D.g.length>30){if(C(D)||C(A))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=A;P.l(D)<=0;)N=ve(N),P=ve(P);var M=he(N,1),U=he(P,1);for(P=he(P,2),N=he(N,2);!x(P);){var V=U.add(P);V.l(D)<=0&&(M=M.add(N),U=V),P=he(P,1),N=he(N,1)}return A=Q(D,M.j(A)),new oe(M,A)}for(M=T;D.l(A)>=0;){for(N=Math.max(1,Math.floor(D.m()/A.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=g(N),V=U.j(A);C(V)||V.l(D)>0;)N-=P,U=g(N),V=U.j(A);x(U)&&(U=S),M=M.add(U),D=Q(D,V)}return new oe(M,D)}r.B=function(D){return _e(this,D).h},r.and=function(D){const A=Math.max(this.g.length,D.g.length),N=[];for(let P=0;P<A;P++)N[P]=this.i(P)&D.i(P);return new c(N,this.h&D.h)},r.or=function(D){const A=Math.max(this.g.length,D.g.length),N=[];for(let P=0;P<A;P++)N[P]=this.i(P)|D.i(P);return new c(N,this.h|D.h)},r.xor=function(D){const A=Math.max(this.g.length,D.g.length),N=[];for(let P=0;P<A;P++)N[P]=this.i(P)^D.i(P);return new c(N,this.h^D.h)};function ve(D){const A=D.g.length+1,N=[];for(let P=0;P<A;P++)N[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(N,D.h)}function he(D,A){const N=A>>5;A%=32;const P=D.g.length-N,M=[];for(let U=0;U<P;U++)M[U]=A>0?D.i(U+N)>>>A|D.i(U+N+1)<<32-A:D.i(U+N);return new c(M,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,zb=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,wr=c}).apply(typeof cS<"u"?cS:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bb,Gu,qb,wf,gg,Fb,Hb,Gb;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var q=h[w];if(!(q in E))break e;E=E[q]}h=h[h.length-1],w=E[h],y=y(w),y!=w&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&E.push([w,y[w]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function v(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function T(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(w,q,$){for(var fe=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)fe[Me-2]=arguments[Me];return y.prototype[q].apply(w,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const E=Array(y);for(let w=0;w<y;w++)E[w]=h[w];return E}return[]}function x(h,y){for(let w=1;w<arguments.length;w++){const q=arguments[w];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=h.length||0;const $=q.length||0;h.length=E+$;for(let fe=0;fe<$;fe++)h[E+fe]=q[fe]}else h.push(q)}}class C{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function j(h){c.setTimeout(()=>{throw h},0)}function Q(){var h=D;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class re{constructor(){this.h=this.g=null}add(y,E){const w=oe.get();w.set(y,E),this.h?this.h.next=w:this.g=w,this.h=w}}var oe=new C(()=>new _e,h=>h.reset());class _e{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,he=!1,D=new re,A=()=>{const h=Promise.resolve(void 0);ve=()=>{h.then(N)}};function N(){for(var h;h=Q();){try{h.h.call(h.g)}catch(E){j(E)}var y=oe;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}he=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function V(h){return/^[\s\xa0]*$/.test(h)}function Ke(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(Ke,M),Ke.prototype.init=function(h,y){const E=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ke.Z.h.call(this)},Ke.prototype.h=function(){Ke.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),J=0;function ue(h,y,E,w,q){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!w,this.ha=q,this.key=++J,this.da=this.fa=!1}function Ee(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ve(h,y,E){for(const w in h)y.call(E,h[w],w,h)}function Ue(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function k(h){const y={};for(const E in h)y[E]=h[E];return y}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(h,y){let E,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(E in w)h[E]=w[E];for(let $=0;$<ee.length;$++)E=ee[$],Object.prototype.hasOwnProperty.call(w,E)&&(h[E]=w[E])}}function ae(h){this.src=h,this.g={},this.h=0}ae.prototype.add=function(h,y,E,w,q){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const fe=ie(h,y,w,q);return fe>-1?(y=h[fe],E||(y.fa=!1)):(y=new ue(y,this.src,$,!!w,q),y.fa=E,h.push(y)),y};function me(h,y){const E=y.type;if(E in h.g){var w=h.g[E],q=Array.prototype.indexOf.call(w,y,void 0),$;($=q>=0)&&Array.prototype.splice.call(w,q,1),$&&(Ee(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ie(h,y,E,w){for(let q=0;q<h.length;++q){const $=h[q];if(!$.da&&$.listener==y&&$.capture==!!E&&$.ha==w)return q}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),Re={};function Pe(h,y,E,w,q){if(Array.isArray(y)){for(let $=0;$<y.length;$++)Pe(h,y[$],E,w,q);return null}return E=Ps(E),h&&h[$e]?h.J(y,E,d(w)?!!w.capture:!1,q):le(h,y,E,!1,w,q)}function le(h,y,E,w,q,$){if(!y)throw Error("Invalid event type");const fe=d(q)?!!q.capture:!!q;let Me=Dn(h);if(Me||(h[pe]=Me=new ae(h)),E=Me.add(y,E,w,fe,$),E.proxy)return E;if(w=Ne(),E.proxy=w,w.src=h,w.listener=E,h.addEventListener)U||(q=fe),q===void 0&&(q=!1),h.addEventListener(y.toString(),w,q);else if(h.attachEvent)h.attachEvent(dt(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ne(){function h(E){return y.call(h.src,h.listener,E)}const y=ai;return h}function Ye(h,y,E,w,q){if(Array.isArray(y))for(var $=0;$<y.length;$++)Ye(h,y[$],E,w,q);else w=d(w)?!!w.capture:!!w,E=Ps(E),h&&h[$e]?(h=h.i,$=String(y).toString(),$ in h.g&&(y=h.g[$],E=ie(y,E,w,q),E>-1&&(Ee(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[$],h.h--)))):h&&(h=Dn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ie(y,E,w,q)),(E=h>-1?y[h]:null)&&Et(E))}function Et(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[$e])me(y.i,h);else{var E=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(E,w,h.capture):y.detachEvent?y.detachEvent(dt(E),w):y.addListener&&y.removeListener&&y.removeListener(w),(E=Dn(y))?(me(E,h),E.h==0&&(E.src=null,y[pe]=null)):Ee(h)}}}function dt(h){return h in Re?Re[h]:Re[h]="on"+h}function ai(h,y){if(h.da)h=!0;else{y=new Ke(y,this);const E=h.listener,w=h.ha||h.src;h.fa&&Et(h),h=E.call(w,y)}return h}function Dn(h){return h=h[pe],h instanceof ae?h:null}var Br="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ps(h){return typeof h=="function"?h:(h[Br]||(h[Br]=function(y){return h.handleEvent(y)}),h[Br])}function bt(){P.call(this),this.i=new ae(this),this.M=this,this.G=null}T(bt,P),bt.prototype[$e]=!0,bt.prototype.removeEventListener=function(h,y,E,w){Ye(this,h,y,E,w)};function Tt(h,y){var E,w=h.G;if(w)for(E=[];w;w=w.G)E.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var q=y;y=new M(w,h),Y(y,q)}q=!0;let $,fe;if(E)for(fe=E.length-1;fe>=0;fe--)$=y.g=E[fe],q=Ai($,w,!0,y)&&q;if($=y.g=h,q=Ai($,w,!0,y)&&q,q=Ai($,w,!1,y)&&q,E)for(fe=0;fe<E.length;fe++)$=y.g=E[fe],q=Ai($,w,!1,y)&&q}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let w=0;w<E.length;w++)Ee(E[w]);delete h.g[y],h.h--}}this.G=null},bt.prototype.J=function(h,y,E,w){return this.i.add(String(h),y,!1,E,w)},bt.prototype.K=function(h,y,E,w){return this.i.add(String(h),y,!0,E,w)};function Ai(h,y,E,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let $=0;$<y.length;++$){const fe=y[$];if(fe&&!fe.da&&fe.capture==E){const Me=fe.listener,Dt=fe.ha||fe.src;fe.fa&&me(h.i,fe),q=Me.call(Dt,w)!==!1&&q}}return q&&!w.defaultPrevented}function Ya(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Qa(h){h.g=Ya(()=>{h.g=null,h.i&&(h.i=!1,Qa(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class tn extends P{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Qa(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hn(h){P.call(this),this.h=h,this.g={}}T(Hn,P);var Ii=[];function qr(h){Ve(h.g,function(y,E){this.g.hasOwnProperty(E)&&Et(y)},h),h.g={}}Hn.prototype.N=function(){Hn.Z.N.call(this),qr(this)},Hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=c.JSON.stringify,At=c.JSON.parse,wi=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function zc(){}function Bc(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nn(){M.call(this,"d")}T(nn,M);function Gn(){M.call(this,"c")}T(Gn,M);var Ct={},qc=null;function $a(){return qc=qc||new bt}Ct.Ia="serverreachability";function Fc(h){M.call(this,Ct.Ia,h)}T(Fc,M);function Ri(h){const y=$a();Tt(y,new Fc(y))}Ct.STAT_EVENT="statevent";function Fr(h,y){M.call(this,Ct.STAT_EVENT,h),this.stat=y}T(Fr,M);function kt(h){const y=$a();Tt(y,new Fr(y,h))}Ct.Ja="timingevent";function Ci(h,y){M.call(this,Ct.Ja,h),this.size=y}T(Ci,M);function Di(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function li(){this.g=!0}li.prototype.ua=function(){this.g=!1};function jd(h,y,E,w,q,$){h.info(function(){if(h.g)if($){var fe="",Me=$.split("&");for(let Ze=0;Ze<Me.length;Ze++){var Dt=Me[Ze].split("=");if(Dt.length>1){const yt=Dt[0];Dt=Dt[1];const $n=yt.split("_");fe=$n.length>=2&&$n[1]=="type"?fe+(yt+"="+Dt+"&"):fe+(yt+"=redacted&")}}}else fe=null;else fe=$;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+y+`
`+E+`
`+fe})}function Hc(h,y,E,w,q,$,fe){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+y+`
`+E+`
`+$+" "+fe})}function Ni(h,y,E,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+zd(h,E)+(w?" "+w:"")})}function Hr(h,y){h.info(function(){return"TIMEOUT: "+y})}li.prototype.info=function(){};function zd(h,y){if(!h.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var E=$[h];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var q=w[0];if(q!="noop"&&q!="stop"&&q!="close")for(let fe=1;fe<w.length;fe++)w[fe]=""}}}}return ke($)}catch{return y}}var Gr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ml;function Kr(){}T(Kr,zc),Kr.prototype.g=function(){return new XMLHttpRequest},Ml=new Kr;function is(h){return encodeURIComponent(String(h))}function Gc(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function ui(h,y,E,w){this.j=h,this.i=y,this.l=E,this.S=w||1,this.V=new Hn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ci}function ci(){this.i=null,this.g="",this.h=!1}var Lt={},Xt={};function xi(h,y,E){h.M=1,h.A=Yr(jt(y)),h.u=E,h.R=!0,Xa(h,null)}function Xa(h,y){h.F=Date.now(),Vi(h),h.B=jt(h.A);var E=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),eo(E.i,"t",w),h.C=0,E=h.j.L,h.h=new ci,h.g=ah(h.j,E?y:null,!h.u),h.P>0&&(h.O=new tn(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,w=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Ii[0]=q.toString()),q=Ii);for(let $=0;$<q.length;$++){const fe=Pe(E,q[$],w||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ri(),jd(h.i,h.v,h.B,h.l,h.S,h.u)}ui.prototype.ba=function(h){h=h.target;const y=this.O;y&&di(h)==3?y.j():this.Y(h)},ui.prototype.Y=function(h){try{if(h==this.g)e:{const Me=di(this.g),Dt=this.g.ya(),Ze=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||Me!=4||Dt==7||(Dt==8||Ze<=0?Ri(3):Ri(2)),Mi(this);var y=this.g.ca();this.X=y;var E=Bd(this);if(this.o=y==200,Hc(this.i,this.v,this.B,this.l,this.S,Me,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,q=this.g;if((w=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(w)){var $=w;break t}}$=null}if(h=$)Ni(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oi(this,h);else{this.o=!1,this.m=3,kt(12),Nn(this),Kn(this);break e}}if(this.R){h=!0;let yt;for(;!this.K&&this.C<E.length;)if(yt=Yc(this,E),yt==Xt){Me==4&&(this.m=4,kt(14),h=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==Lt){this.m=4,kt(15),Ni(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Ni(this.i,this.l,yt,null),Oi(this,yt);if(Kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||E.length!=0||this.h.h||(this.m=1,kt(16),h=!1),this.o=this.o&&h,!h)Ni(this.i,this.l,E,"[Invalid Chunked Response]"),Nn(this),Kn(this);else if(E.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ql(fe),fe.P=!0,kt(11))}}else Ni(this.i,this.l,E,null),Oi(this,E);Me==4&&Nn(this),this.o&&!this.K&&(Me==4?nh(this.j,this):(this.o=!1,Vi(this)))}else rs(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),Nn(this),Kn(this)}}}catch{}finally{}};function Bd(h){if(!Kc(h))return h.g.la();const y=sn(h.g);if(y==="")return"";let E="";const w=y.length,q=di(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Nn(h),Kn(h),"";h.h.i=new c.TextDecoder}for(let $=0;$<w;$++)h.h.h=!0,E+=h.h.i.decode(y[$],{stream:!(q&&$==w-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Kc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Yc(h,y){var E=h.C,w=y.indexOf(`
`,E);return w==-1?Xt:(E=Number(y.substring(E,w)),isNaN(E)?Lt:(w+=1,w+E>y.length?Xt:(y=y.slice(w,w+E),h.C=w+E,y)))}ui.prototype.cancel=function(){this.K=!0,Nn(this)};function Vi(h){h.T=Date.now()+h.H,Ja(h,h.H)}function Ja(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Di(g(h.aa,h),y)}function Mi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ui.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Hr(this.i,this.B),this.M!=2&&(Ri(),kt(17)),Nn(this),this.m=2,Kn(this)):Ja(this,this.T-h)};function Kn(h){h.j.I==0||h.K||nh(h.j,h)}function Nn(h){Mi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,qr(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Oi(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||ki(E.h,h))){if(!h.L&&ki(E.h,h)&&E.I==3){try{var w=E.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)ro(E),Fs(E);else break e;ea(E),kt(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Di(g(E.Va,E),6e3));Pi(E.h)<=1&&E.ta&&(E.ta=void 0)}else qi(E,11)}else if((h.L||E.g==h)&&ro(E),!V(y))for(q=E.Ba.g.parse(y),y=0;y<q.length;y++){let Ze=q[y];const yt=Ze[0];if(!(yt<=E.K))if(E.K=yt,Ze=Ze[1],E.I==2)if(Ze[0]=="c"){E.M=Ze[1],E.ba=Ze[2];const $n=Ze[3];$n!=null&&(E.ka=$n,E.j.info("VER="+E.ka));const Fi=Ze[4];Fi!=null&&(E.za=Fi,E.j.info("SVER="+E.za));const mi=Ze[5];mi!=null&&typeof mi=="number"&&mi>0&&(w=1.5*mi,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const pi=h.g;if(pi){const ta=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ta){var $=w.h;$.g||ta.indexOf("spdy")==-1&&ta.indexOf("quic")==-1&&ta.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(kl($,$.h),$.h=null))}if(w.G){const ao=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(w.wa=ao,nt(w.J,w.G,ao))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var fe=h;if(w.na=rh(w,w.L?w.ba:null,w.W),fe.L){Ll(w.h,fe);var Me=fe,Dt=w.O;Dt&&(Me.H=Dt),Me.D&&(Mi(Me),Vi(Me)),w.g=fe}else eh(w);E.i.length>0&&Bi(E)}else Ze[0]!="stop"&&Ze[0]!="close"||qi(E,7);else E.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?qi(E,7):Kl(E):Ze[0]!="noop"&&E.l&&E.l.qa(Ze),E.A=0)}}Ri(4)}catch{}}var Ut=class{constructor(h,y){this.g=h,this.map=y}};function Ol(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Pi(h){return h.h?1:h.g?h.g.size:0}function ki(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function kl(h,y){h.g?h.g.add(y):h.h=y}function Ll(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ol.prototype.cancel=function(){if(this.i=Ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ul(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return R(h.i)}var Qc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wa(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const w=h[E].indexOf("=");let q,$=null;w>=0?(q=h[E].substring(0,w),$=h[E].substring(w+1)):q=h[E],y(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function xn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof xn?(this.l=h.l,Jt(this,h.j),this.o=h.o,this.g=h.g,ks(this,h.u),this.h=h.h,jl(this,Wc(h.i)),this.m=h.m):h&&(y=String(h).match(Qc))?(this.l=!1,Jt(this,y[1]||"",!0),this.o=Li(y[2]||""),this.g=Li(y[3]||"",!0),ks(this,y[4]),this.h=Li(y[5]||"",!0),jl(this,y[6]||"",!0),this.m=Li(y[7]||"")):(this.l=!1,this.i=new Us(null,this.l))}xn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Qr(y,Za,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Qr(y,Za,!0),"@"),h.push(is(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Qr(E,E.charAt(0)=="/"?zl:$c,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Qr(E,Xc)),h.join("")},xn.prototype.resolve=function(h){const y=jt(this);let E=!!h.j;E?Jt(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var w=h.h;if(E)ks(y,h.u);else if(E=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var q=y.h.lastIndexOf("/");q!=-1&&(w=y.h.slice(0,q+1)+w)}if(q=w,q==".."||q==".")w="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){w=q.lastIndexOf("/",0)==0,q=q.split("/");const $=[];for(let fe=0;fe<q.length;){const Me=q[fe++];Me=="."?w&&fe==q.length&&$.push(""):Me==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),w&&fe==q.length&&$.push("")):($.push(Me),w=!0)}w=$.join("/")}else w=q}return E?y.h=w:E=h.i.toString()!=="",E?jl(y,Wc(h.i)):E=!!h.m,E&&(y.m=h.m),y};function jt(h){return new xn(h)}function Jt(h,y,E){h.j=E?Li(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ks(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function jl(h,y,E){y instanceof Us?(h.i=y,to(h.i,h.l)):(E||(y=Qr(y,Ls)),h.i=new Us(y,h.l))}function nt(h,y,E){h.i.set(y,E)}function Yr(h){return nt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Li(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qr(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,En),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function En(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Za=/[#\/\?@]/g,$c=/[#\?:]/g,zl=/[#\?]/g,Ls=/[#\?@]/g,Xc=/#/g;function Us(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Tn(h){h.g||(h.g=new Map,h.h=0,h.i&&Wa(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}r=Us.prototype,r.add=function(h,y){Tn(this),this.i=null,h=js(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Jc(h,y){Tn(h),y=js(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Bl(h,y){return Tn(h),y=js(h,y),h.g.has(y)}r.forEach=function(h,y){Tn(this),this.g.forEach(function(E,w){E.forEach(function(q){h.call(y,q,w,this)},this)},this)};function ql(h,y){Tn(h);let E=[];if(typeof y=="string")Bl(h,y)&&(E=E.concat(h.g.get(js(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}r.set=function(h,y){return Tn(this),this.i=null,h=js(this,h),Bl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=ql(this,h),h.length>0?String(h[0]):y):y};function eo(h,y,E){Jc(h,y),E.length>0&&(h.i=null,h.g.set(js(h,y),R(E)),h.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var E=y[w];const q=is(E);E=ql(this,E);for(let $=0;$<E.length;$++){let fe=q;E[$]!==""&&(fe+="="+is(E[$])),h.push(fe)}}return this.i=h.join("&")};function Wc(h){const y=new Us;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function js(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function to(h,y){y&&!h.j&&(Tn(h),h.i=null,h.g.forEach(function(E,w){const q=w.toLowerCase();w!=q&&(Jc(this,w),eo(this,q,E))},h)),h.j=y}function hi(h,y){const E=new li;if(c.Image){const w=new Image;w.onload=v(Yn,E,"TestLoadImage: loaded",!0,y,w),w.onerror=v(Yn,E,"TestLoadImage: error",!1,y,w),w.onabort=v(Yn,E,"TestLoadImage: abort",!1,y,w),w.ontimeout=v(Yn,E,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function Fl(h,y){const E=new li,w=new AbortController,q=setTimeout(()=>{w.abort(),Yn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then($=>{clearTimeout(q),$.ok?Yn(E,"TestPingServer: ok",!0,y):Yn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Yn(E,"TestPingServer: error",!1,y)})}function Yn(h,y,E,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(E)}catch{}}function zs(){this.g=new wi}function Ui(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Ui,zc),Ui.prototype.g=function(){return new $r(this.i,this.h)};function $r(h,y){bt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T($r,bt),r=$r.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,fi(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Bs(this):fi(this),this.readyState==3&&no(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Bs(this))},r.Na=function(h){this.g&&(this.response=h,Bs(this))},r.ga=function(){this.g&&Bs(this)};function Bs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,fi(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function fi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($r.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Qn(h){let y="";return Ve(h,function(E,w){y+=w,y+=":",y+=E,y+=`\r
`}),y}function Xr(h,y,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=Qn(E),typeof h=="string"?E!=null&&is(E):nt(h,y,E))}function lt(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(lt,bt);var ji=/^https?$/i,Hl=["POST","PUT"];r=lt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ml.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch($){Jr(this,$);return}if(h=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)E.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())E.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Hl,y,void 0)>=0)||w||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,fe]of E)this.g.setRequestHeader($,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Jr(this,$)}};function Jr(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Gl(h),ss(h)}function Gl(h){h.A||(h.A=!0,Tt(h,"complete"),Tt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Tt(this,"complete"),Tt(this,"abort"),ss(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),lt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Wr(this):this.Xa())},r.Xa=function(){Wr(this)};function Wr(h){if(h.h&&typeof l<"u"){if(h.v&&di(h)==4)setTimeout(h.Ca.bind(h),0);else if(Tt(h,"readystatechange"),di(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var w;if(w=$===0){let fe=String(h.D).match(Qc)[1]||null;!fe&&c.self&&c.self.location&&(fe=c.self.location.protocol.slice(0,-1)),w=!ji.test(fe?fe.toLowerCase():"")}E=w}if(E)Tt(h,"complete"),Tt(h,"success");else{h.o=6;try{var q=di(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Gl(h)}}finally{ss(h)}}}}function ss(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||Tt(h,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function di(h){return h.g?h.g.readyState:0}r.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),At(y)}};function sn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(h){const y={};h=(h.g&&di(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(V(h[w]))continue;var E=Gc(h[w]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=y[q]||[];y[q]=$,$.push(E)}Ue(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zi(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function qs(h){this.za=0,this.i=[],this.j=new li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zi("baseRetryDelayMs",5e3,h),this.Za=zi("retryDelaySeedMs",1e4,h),this.Ta=zi("forwardChannelMaxRetries",2,h),this.va=zi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ol(h&&h.concurrentRequestLimit),this.Ba=new zs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=qs.prototype,r.ka=8,r.I=1,r.connect=function(h,y,E,w){kt(0),this.W=h,this.H=y||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=rh(this,null,this.W),Bi(this)};function Kl(h){if(io(h),h.I==3){var y=h.V++,E=jt(h.J);if(nt(E,"SID",h.M),nt(E,"RID",y),nt(E,"TYPE","terminate"),Zr(h,E),y=new ui(h,h.j,y),y.M=2,y.A=Yr(jt(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=ah(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Vi(y)}sh(h)}function Fs(h){h.g&&(Ql(h),h.g.cancel(),h.g=null)}function io(h){Fs(h),h.v&&(c.clearTimeout(h.v),h.v=null),ro(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Bi(h){if(!Pl(h.h)&&!h.m){h.m=!0;var y=h.Ea;ve||A(),he||(ve(),he=!0),D.add(y,h),h.D=0}}function so(h,y){return Pi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Di(g(h.Ea,h,y),ih(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new ui(this,this.j,h);let $=this.o;if(this.U&&($?($=k($),Y($,this.U)):$=this.U),this.u!==null||this.R||(q.J=$,$=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Zc(this,q,y),E=jt(this.J),nt(E,"RID",h),nt(E,"CVER",22),this.G&&nt(E,"X-HTTP-Session-Id",this.G),Zr(this,E),$&&(this.R?y="headers="+is(Qn($))+"&"+y:this.u&&Xr(E,this.u,$)),kl(this.h,q),this.Ra&&nt(E,"TYPE","init"),this.S?(nt(E,"$req",y),nt(E,"SID","null"),q.U=!0,xi(q,E,null)):xi(q,E,y),this.I=2}}else this.I==3&&(h?Yl(this,h):this.i.length==0||Pl(this.h)||Yl(this))};function Yl(h,y){var E;y?E=y.l:E=h.V++;const w=jt(h.J);nt(w,"SID",h.M),nt(w,"RID",E),nt(w,"AID",h.K),Zr(h,w),h.u&&h.o&&Xr(w,h.u,h.o),E=new ui(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Zc(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),kl(h.h,E),xi(E,w,y)}function Zr(h,y){h.H&&Ve(h.H,function(E,w){nt(y,w,E)}),h.l&&Ve({},function(E,w){nt(y,w,E)})}function Zc(h,y,E){E=Math.min(h.i.length,E);const w=h.l?g(h.l.Ka,h.l,h):null;e:{var q=h.i;let Me=-1;for(;;){const Dt=["count="+E];Me==-1?E>0?(Me=q[0].g,Dt.push("ofs="+Me)):Me=0:Dt.push("ofs="+Me);let Ze=!0;for(let yt=0;yt<E;yt++){var $=q[yt].g;const $n=q[yt].map;if($-=Me,$<0)Me=Math.max(0,q[yt].g-100),Ze=!1;else try{$="req"+$+"_"||"";try{var fe=$n instanceof Map?$n:Object.entries($n);for(const[Fi,mi]of fe){let pi=mi;d(mi)&&(pi=ke(mi)),Dt.push($+Fi+"="+encodeURIComponent(pi))}}catch(Fi){throw Dt.push($+"type="+encodeURIComponent("_badmap")),Fi}}catch{w&&w($n)}}if(Ze){fe=Dt.join("&");break e}}fe=void 0}return h=h.i.splice(0,E),y.G=h,fe}function eh(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ve||A(),he||(ve(),he=!0),D.add(y,h),h.A=0}}function ea(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Di(g(h.Da,h),ih(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,th(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Di(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),Fs(this),th(this))};function Ql(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function th(h){h.g=new ui(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=jt(h.na);nt(y,"RID","rpc"),nt(y,"SID",h.M),nt(y,"AID",h.K),nt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&nt(y,"TO",h.ia),nt(y,"TYPE","xmlhttp"),Zr(h,y),h.u&&h.o&&Xr(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Yr(jt(y)),E.u=null,E.R=!0,Xa(E,h)}r.Va=function(){this.C!=null&&(this.C=null,Fs(this),ea(this),kt(19))};function ro(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function nh(h,y){var E=null;if(h.g==y){ro(h),Ql(h),h.g=null;var w=2}else if(ki(h.h,y))E=y.G,Ll(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;w=$a(),Tt(w,new Ci(w,E)),Bi(h)}else eh(h);else if(q=y.m,q==3||q==0&&y.X>0||!(w==1&&so(h,y)||w==2&&ea(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),q){case 1:qi(h,5);break;case 4:qi(h,10);break;case 3:qi(h,6);break;default:qi(h,2)}}}function ih(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function qi(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),w=h.Ua;const q=!w;w=new xn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jt(w,"https"),Yr(w),q?hi(w.toString(),E):Fl(w.toString(),E)}else kt(2);h.I=0,h.l&&h.l.pa(y),sh(h),io(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function sh(h){if(h.I=0,h.ja=[],h.l){const y=Ul(h.h);(y.length!=0||h.i.length!=0)&&(x(h.ja,y),x(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function rh(h,y,E){var w=E instanceof xn?jt(E):new xn(E);if(w.g!="")y&&(w.g=y+"."+w.g),ks(w,w.u);else{var q=c.location;w=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const $=new xn(null);w&&Jt($,w),y&&($.g=y),q&&ks($,q),E&&($.h=E),w=$}return E=h.G,y=h.wa,E&&y&&nt(w,E,y),nt(w,"VER",h.ka),Zr(h,w),w}function ah(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new lt(new Ui({ab:E})):new lt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function oh(){}r=oh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Hs(){}Hs.prototype.g=function(h,y){return new gn(h,y)};function gn(h,y){bt.call(this),this.g=new qs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!V(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!V(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new as(this)}T(gn,bt),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Kl(this.g)},gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=ke(h),h=E);y.i.push(new Ut(y.Ya++,h)),y.I==3&&Bi(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,Kl(this.g),delete this.g,gn.Z.N.call(this)};function lh(h){nn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(lh,nn);function uh(){Gn.call(this),this.status=1}T(uh,Gn);function as(h){this.g=h}T(as,oh),as.prototype.ra=function(){Tt(this.g,"a")},as.prototype.qa=function(h){Tt(this.g,new lh(h))},as.prototype.pa=function(h){Tt(this.g,new uh)},as.prototype.oa=function(){Tt(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Gb=function(){return new Hs},Hb=function(){return $a()},Fb=Ct,gg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gr.NO_ERROR=0,Gr.TIMEOUT=8,Gr.HTTP_ERROR=6,wf=Gr,Vl.COMPLETE="complete",qb=Vl,Bc.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Gu=Bc,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,Bb=lt}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl="12.9.0";function hx(r){wl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=new Qg("@firebase/firestore");function Ho(){return La.logLevel}function se(r,...e){if(La.logLevel<=He.DEBUG){const t=e.map(oy);La.debug(`Firestore (${wl}): ${r}`,...t)}}function Vt(r,...e){if(La.logLevel<=He.ERROR){const t=e.map(oy);La.error(`Firestore (${wl}): ${r}`,...t)}}function nl(r,...e){if(La.logLevel<=He.WARN){const t=e.map(oy);La.warn(`Firestore (${wl}): ${r}`,...t)}}function oy(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Kb(r,i,t)}function Kb(r,e,t){let i=`FIRESTORE (${wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Vt(i),new Error(i)}function be(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||Kb(e,a,i)}function Te(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Vs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class mx{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(be(typeof i.accessToken=="string",31837,{l:i}),new fx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class px{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class gx{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new px(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){be(this.o===void 0,3512);const i=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=_x(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function De(r,e){return r<e?-1:r>e?1:0}function yg(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return Qp(a)===Qp(l)?De(a,l):Qp(a)?1:-1}return De(r.length,e.length)}const vx=55296,Ex=57343;function Qp(r){const e=r.charCodeAt(0);return e>=vx&&e<=Ex}function il(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function Yb(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="__name__";class Xi{constructor(e,t,i){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ge(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Xi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const i=Xi.isNumericId(e),a=Xi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Xi.extractNumericId(e).compare(Xi.extractNumericId(t)):yg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class tt extends Xi{construct(e,t,i){return new tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const Tx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Xi{construct(e,t,i){return new St(e,t,i)}static isValidIdentifier(e){return Tx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fS}static keyField(){return new St([fS])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ce(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ce(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new ce(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(t)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(tt.fromString(e))}static fromName(e){return new de(tt.fromString(e).popFirst(5))}static empty(){return new de(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(r,e,t){if(!t)throw new ce(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Sx(r,e,t,i){if(e===!0&&i===!0)throw new ce(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function dS(r){if(!de.isDocumentKey(r))throw new ce(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function mS(r){if(de.isDocumentKey(r))throw new ce(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $b(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function gd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ge(12329,{type:typeof r})}function Rs(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gd(r);throw new ce(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function xc(r,e){if(!$b(r))throw new ce(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ce(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=-62135596800,gS=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*gS);return new rt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pS)throw new ce(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gS}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xc(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Kt("string",rt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new rt(0,0))}static max(){return new Ie(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=-1;class Gf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function _g(r){return r.fields.find((e=>e.kind===2))}function va(r){return r.fields.filter((e=>e.kind!==2))}Gf.UNKNOWN_ID=-1;class Rf{constructor(e,t){this.fieldPath=e,this.kind=t}}class hc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hc(0,Fn.min())}}function Xb(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Ie.fromTimestamp(i===1e9?new rt(t+1,0):new rt(t,i));return new Fn(a,de.empty(),e)}function Jb(r){return new Fn(r.readTime,r.key,sl)}class Fn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Fn(Ie.min(),de.empty(),sl)}static max(){return new Fn(Ie.max(),de.empty(),sl)}}function uy(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(r.documentKey,e.documentKey),t!==0?t:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lr(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==Wb)throw r;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,i)=>{t(e)}))}static reject(e){return new B(((t,i)=>{i(e)}))}static waitFor(e){return new B(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=B.resolve(!1);for(const i of e)t=t.next((a=>a?B.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new B(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&i(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new B(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="SimpleDb";class yd{static open(e,t,i,a){try{return new yd(t,e.transaction(a,i))}catch(l){throw new Wu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Rr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Wu(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=cy(i.target.error);this.S.reject(new Wu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(se(jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ax(t)}}class Cr{static delete(e){return se(jn,"Removing database:",e),Sa(Q0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!tb())return!1;if(Cr.F())return!0;const e=Qt(),t=Cr.M(e),i=0<t&&t<10,a=eA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Cr.M(Qt())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(se(jn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new Wu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new ce(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new ce(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Wu(e,c))},a.onupgradeneeded=l=>{se(jn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{se(jn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=yd.open(this.db,e,l?"readonly":"readwrite",i),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),B.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(se(jn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function eA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class bx{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Sa(this.U.delete())}}class Wu extends ce{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ur(r){return r.name==="IndexedDbTransactionError"}class Ax{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(se(jn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(se(jn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Sa(i)}add(e){return se(jn,"ADD",this.store.name,e,e),Sa(this.store.add(e))}get(e){return Sa(this.store.get(e)).next((t=>(t===void 0&&(t=null),se(jn,"GET",this.store.name,e,t),t)))}delete(e){return se(jn,"DELETE",this.store.name,e),Sa(this.store.delete(e))}count(){return se(jn,"COUNT",this.store.name),Sa(this.store.count())}H(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new B(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new B(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}X(e,t){se(jn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const a=this.cursor(i);return this.J(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.J(a,t)}te(e){const t=this.cursor({});return new B(((i,a)=>{t.onerror=l=>{const c=cy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}J(e,t){const i=[];return new B(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new bx(d),g=t(d.primaryKey,d.value,p);if(g instanceof B){const v=g.catch((T=>(p.done(),B.reject(T))));i.push(v)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>B.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Sa(r){return new B(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=cy(i.target.error);t(a)}}))}let yS=!1;function cy(r){const e=Cr.M(Qt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yS||(yS=!0,setTimeout((()=>{throw i}),0)),i}}return r}const Zu="IndexBackfiller";class Ix{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){se(Zu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();se(Zu,`Documents written: ${t}`)}catch(t){Ur(t)?se(Zu,"Ignoring IndexedDB error during index backfill: ",t):await Lr(t)}await this.re(6e4)}))}}class wx{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return B.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return se(Zu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(se(Zu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=Jb(l);uy(c,i)>0&&(i=c)})),new Fn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=-1;function _d(r){return r==null}function fc(r){return r===0&&1/r==-1/0}function tA(r){return typeof r=="number"&&Number.isInteger(r)&&!fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="";function pn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=_S(e)),e=Rx(r.get(t),e);return _S(e)}function Rx(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Kf:t+="";break;default:t+=l}}return t}function _S(r){return r+Kf+""}function Wi(r){const e=r.length;if(be(e>=2,64408,{path:r}),e===2)return be(r.charAt(0)===Kf&&r.charAt(1)==="",56145,{path:r}),tt.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf(Kf,l);switch((c<0||c>t)&&ge(50515,{path:r}),r.charAt(c+1)){case"":const d=r.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),i.push(p);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:ge(61167,{path:r})}l=c+2}return new tt(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="remoteDocuments",Vc="owner",Lo="owner",dc="mutationQueues",Cx="userId",Ei="mutations",vS="batchId",Ra="userMutationsIndex",ES=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(r,e){return[r,pn(e)]}function nA(r,e,t){return[r,pn(e),t]}const Dx={},rl="documentMutations",Yf="remoteDocumentsV14",Nx=["prefixPath","collectionGroup","readTime","documentId"],Df="documentKeyIndex",xx=["prefixPath","collectionGroup","documentId"],iA="collectionGroupIndex",Vx=["collectionGroup","readTime","prefixPath","documentId"],mc="remoteDocumentGlobal",vg="remoteDocumentGlobalKey",al="targets",sA="queryTargetsIndex",Mx=["canonicalId","targetId"],ol="targetDocuments",Ox=["targetId","path"],hy="documentTargetsIndex",Px=["path","targetId"],Qf="targetGlobalKey",Da="targetGlobal",pc="collectionParents",kx=["collectionId","parent"],ll="clientMetadata",Lx="clientId",vd="bundles",Ux="bundleId",Ed="namedQueries",jx="name",fy="indexConfiguration",zx="indexId",Eg="collectionGroupIndex",Bx="collectionGroup",ec="indexState",qx=["indexId","uid"],rA="sequenceNumberIndex",Fx=["uid","sequenceNumber"],tc="indexEntries",Hx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],aA="documentKeyIndex",Gx=["indexId","uid","orderedDocumentKey"],Td="documentOverlays",Kx=["userId","collectionPath","documentId"],Tg="collectionPathOverlayIndex",Yx=["userId","collectionPath","largestBatchId"],oA="collectionGroupOverlayIndex",Qx=["userId","collectionGroup","largestBatchId"],dy="globals",$x="name",lA=[dc,Ei,rl,Ea,al,Vc,Da,ol,ll,mc,pc,vd,Ed],Xx=[...lA,Td],uA=[dc,Ei,rl,Yf,al,Vc,Da,ol,ll,mc,pc,vd,Ed,Td],cA=uA,my=[...cA,fy,ec,tc],Jx=my,hA=[...my,dy],Wx=hA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends Zb{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function $t(r,e){const t=Te(r);return Cr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function jr(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function fA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gf(this.root,e,this.comparator,!0)}}class gf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??un.RED,this.left=a??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new un(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return un.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SS(this.data.getIterator())}getIteratorFrom(e){return new SS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class SS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Uo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new ot(St.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return il(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new dA("Invalid base64 string: "+l):l}})(e);return new Pt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const Zx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(r){if(be(!!r,39018),typeof r=="string"){let e=0;const t=Zx.exec(r);if(be(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vt(r.seconds),nanos:vt(r.nanos)}}function vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function xs(r){return typeof r=="string"?Pt.fromBase64String(r):Pt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="server_timestamp",pA="__type__",gA="__previous_value__",yA="__local_write_time__";function py(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[pA])==null?void 0:i.stringValue)===mA}function Sd(r){const e=r.mapValue.fields[gA];return py(e)?Sd(e):e}function gc(r){const e=Ns(r.mapValue.fields[yA].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t,i,a,l,c,d,p,g,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=T}}const $f="(default)";class Ua{constructor(e,t){this.projectId=e,this.database=t||$f}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database===$f}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}function t2(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ce(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="__type__",_A="__max__",Sr={mapValue:{fields:{__type__:{stringValue:_A}}}},yy="__vector__",ul="value",Nf={nullValue:"NULL_VALUE"};function Nr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?py(r)?4:vA(r)?9007199254740991:bd(r)?10:11:ge(28295,{value:r})}function ns(r,e){if(r===e)return!0;const t=Nr(r);if(t!==Nr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return gc(r).isEqual(gc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ns(a.timestampValue),d=Ns(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return xs(a.bytesValue).isEqual(xs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return vt(a.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(a.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return vt(a.integerValue)===vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=vt(a.doubleValue),d=vt(l.doubleValue);return c===d?fc(c)===fc(d):isNaN(c)&&isNaN(d)}return!1})(r,e);case 9:return il(r.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(TS(c)!==TS(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!ns(c[p],d[p])))return!1;return!0})(r,e);default:return ge(52216,{left:r})}}function yc(r,e){return(r.values||[]).find((t=>ns(t,e)))!==void 0}function xr(r,e){if(r===e)return 0;const t=Nr(r),i=Nr(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=vt(l.integerValue||l.doubleValue),p=vt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(r,e);case 3:return bS(r.timestampValue,e.timestampValue);case 4:return bS(gc(r),gc(e));case 5:return yg(r.stringValue,e.stringValue);case 6:return(function(l,c){const d=xs(l),p=xs(c);return d.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=De(d[g],p[g]);if(v!==0)return v}return De(d.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=De(vt(l.latitude),vt(c.latitude));return d!==0?d:De(vt(l.longitude),vt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return AS(r.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,R,x,C;const d=l.fields||{},p=c.fields||{},g=(S=d[ul])==null?void 0:S.arrayValue,v=(R=p[ul])==null?void 0:R.arrayValue,T=De(((x=g==null?void 0:g.values)==null?void 0:x.length)||0,((C=v==null?void 0:v.values)==null?void 0:C.length)||0);return T!==0?T:AS(g,v)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Sr.mapValue&&c===Sr.mapValue)return 0;if(l===Sr.mapValue)return 1;if(c===Sr.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=yg(p[T],v[T]);if(S!==0)return S;const R=xr(d[p[T]],g[v[T]]);if(R!==0)return R}return De(p.length,v.length)})(r.mapValue,e.mapValue);default:throw ge(23264,{he:t})}}function bS(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const t=Ns(r),i=Ns(e),a=De(t.seconds,i.seconds);return a!==0?a:De(t.nanos,i.nanos)}function AS(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=xr(t[a],i[a]);if(l)return l}return De(t.length,i.length)}function cl(r){return bg(r)}function bg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ns(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return xs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return de.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=bg(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${bg(t.fields[c])}`;return a+"}"})(r.mapValue):ge(61005,{value:r})}function xf(r){switch(Nr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sd(r);return e?16+xf(e):16;case 5:return 2*r.stringValue.length;case 6:return xs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+xf(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return jr(i.fields,((l,c)=>{a+=l.length+xf(c)})),a})(r.mapValue);default:throw ge(13486,{value:r})}}function _c(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ag(r){return!!r&&"integerValue"in r}function vc(r){return!!r&&"arrayValue"in r}function IS(r){return!!r&&"nullValue"in r}function wS(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Vf(r){return!!r&&"mapValue"in r}function bd(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[gy])==null?void 0:i.stringValue)===yy}function nc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return jr(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=nc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nc(r.arrayValue.values[t]);return e}return{...r}}function vA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===_A}const EA={mapValue:{fields:{[gy]:{stringValue:yy},[ul]:{arrayValue:{}}}}};function n2(r){return"nullValue"in r?Nf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?_c(Ua.empty(),de.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?bd(r)?EA:{mapValue:{}}:ge(35942,{value:r})}function i2(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?_c(Ua.empty(),de.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?EA:"mapValue"in r?bd(r)?{mapValue:{}}:Sr:ge(61959,{value:r})}function RS(r,e){const t=xr(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function CS(r,e){const t=xr(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(t)}setAll(e){let t=St.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=nc(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Vf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){jr(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new mn(nc(this.value))}}function TA(r){const e=[];return jr(r.fields,((t,i)=>{const a=new St([t]);if(Vf(i)){const l=TA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Rt(e,0,Ie.min(),Ie.min(),Ie.min(),mn.empty(),0)}static newFoundDocument(e,t,i,a){return new Rt(e,1,t,Ie.min(),i,a,0)}static newNoDocument(e,t){return new Rt(e,2,t,Ie.min(),Ie.min(),mn.empty(),0)}static newUnknownDocument(e,t){return new Rt(e,3,t,Ie.min(),Ie.min(),mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t){this.position=e,this.inclusive=t}}function DS(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=de.comparator(de.fromName(c.referenceValue),t.key):i=xr(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function NS(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ns(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t="asc"){this.field=e,this.dir=t}}function s2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{}class Ge extends SA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new r2(e,t,i):t==="array-contains"?new l2(e,i):t==="in"?new CA(e,i):t==="not-in"?new u2(e,i):t==="array-contains-any"?new c2(e,i):new Ge(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new a2(e,i):new o2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xr(t,this.value)):t!==null&&Nr(this.value)===Nr(t)&&this.matchesComparison(xr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class at extends SA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new at(e,t)}matches(e){return fl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fl(r){return r.op==="and"}function Ig(r){return r.op==="or"}function _y(r){return bA(r)&&fl(r)}function bA(r){for(const e of r.filters)if(e instanceof at)return!1;return!0}function wg(r){if(r instanceof Ge)return r.field.canonicalString()+r.op.toString()+cl(r.value);if(_y(r))return r.filters.map((e=>wg(e))).join(",");{const e=r.filters.map((t=>wg(t))).join(",");return`${r.op}(${e})`}}function AA(r,e){return r instanceof Ge?(function(i,a){return a instanceof Ge&&i.op===a.op&&i.field.isEqual(a.field)&&ns(i.value,a.value)})(r,e):r instanceof at?(function(i,a){return a instanceof at&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&AA(c,a.filters[d])),!0):!1})(r,e):void ge(19439)}function IA(r,e){const t=r.filters.concat(e);return at.create(t,r.op)}function wA(r){return r instanceof Ge?(function(t){return`${t.field.canonicalString()} ${t.op} ${cl(t.value)}`})(r):r instanceof at?(function(t){return t.op.toString()+" {"+t.getFilters().map(wA).join(" ,")+"}"})(r):"Filter"}class r2 extends Ge{constructor(e,t,i){super(e,t,i),this.key=de.fromName(i.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class a2 extends Ge{constructor(e,t){super(e,"in",t),this.keys=RA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class o2 extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=RA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function RA(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>de.fromName(i.referenceValue)))}class l2 extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vc(t)&&yc(t.arrayValue,this.value)}}class CA extends Ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yc(this.value.arrayValue,t)}}class u2 extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yc(this.value.arrayValue,t)}}class c2 extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>yc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Rg(r,e=null,t=[],i=[],a=null,l=null,c=null){return new h2(r,e,t,i,a,l,c)}function ja(r){const e=Te(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>wg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),_d(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>cl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>cl(i))).join(",")),e.Te=t}return e.Te}function Mc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!s2(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!AA(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!NS(r.startAt,e.startAt)&&NS(r.endAt,e.endAt)}function Xf(r){return de.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Jf(r,e){return r.filters.filter((t=>t instanceof Ge&&t.field.isEqual(e)))}function xS(r,e,t){let i=Nf,a=!0;for(const l of Jf(r,e)){let c=Nf,d=!0;switch(l.op){case"<":case"<=":c=n2(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Nf}RS({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];RS({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function VS(r,e,t){let i=Sr,a=!0;for(const l of Jf(r,e)){let c=Sr,d=!0;switch(l.op){case">=":case">":c=i2(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Sr}CS({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];CS({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function DA(r,e,t,i,a,l,c,d){return new Rl(r,e,t,i,a,l,c,d)}function Ad(r){return new Rl(r)}function MS(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function f2(r){return de.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function NA(r){return r.collectionGroup!==null}function ic(r){const e=Te(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new ot(St.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ec(l,i))})),t.has(St.keyField().canonicalString())||e.Ie.push(new Ec(St.keyField(),i))}return e.Ie}function qn(r){const e=Te(r);return e.Ee||(e.Ee=d2(e,ic(r))),e.Ee}function d2(r,e){if(r.limitType==="F")return Rg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Ec(a.field,l)}));const t=r.endAt?new hl(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new hl(r.startAt.position,r.startAt.inclusive):null;return Rg(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Cg(r,e){const t=r.filters.concat([e]);return new Rl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function m2(r,e){const t=r.explicitOrderBy.concat([e]);return new Rl(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Dg(r,e,t){return new Rl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Id(r,e){return Mc(qn(r),qn(e))&&r.limitType===e.limitType}function xA(r){return`${ja(qn(r))}|lt:${r.limitType}`}function Go(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>wA(a))).join(", ")}]`),_d(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>cl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>cl(a))).join(",")),`Target(${i})`})(qn(r))}; limitType=${r.limitType})`}function Oc(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):de.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of ic(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=DS(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,ic(i),a)||i.endAt&&!(function(c,d,p){const g=DS(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,ic(i),a))})(r,e)}function VA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function MA(r){return(e,t)=>{let i=!1;for(const a of ic(r)){const l=p2(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function p2(r,e,t){const i=r.field.isKeyField()?de.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?xr(p,g):ge(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return fA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=new mt(de.comparator);function Bn(){return g2}const OA=new mt(de.comparator);function Ku(...r){let e=OA;for(const t of r)e=e.insert(t.key,t);return e}function PA(r){let e=OA;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Zi(){return sc()}function kA(){return sc()}function sc(){return new Ms((r=>r.toString()),((r,e)=>r.isEqual(e)))}const y2=new mt(de.comparator),_2=new ot(de.comparator);function je(...r){let e=_2;for(const t of r)e=e.add(t);return e}const v2=new ot(De);function vy(){return v2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function LA(r){return{integerValue:""+r}}function E2(r,e){return tA(e)?LA(e):Ey(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function T2(r,e,t){return r instanceof Tc?(function(a,l){const c={fields:{[pA]:{stringValue:mA},[yA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&py(l)&&(l=Sd(l)),l&&(c.fields[gA]=l),{mapValue:c}})(t,e):r instanceof dl?jA(r,e):r instanceof ml?zA(r,e):(function(a,l){const c=UA(a,l),d=OS(c)+OS(a.Ae);return Ag(c)&&Ag(a.Ae)?LA(d):Ey(a.serializer,d)})(r,e)}function S2(r,e,t){return r instanceof dl?jA(r,e):r instanceof ml?zA(r,e):t}function UA(r,e){return r instanceof Sc?(function(i){return Ag(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Tc extends wd{}class dl extends wd{constructor(e){super(),this.elements=e}}function jA(r,e){const t=BA(e);for(const i of r.elements)t.some((a=>ns(a,i)))||t.push(i);return{arrayValue:{values:t}}}class ml extends wd{constructor(e){super(),this.elements=e}}function zA(r,e){let t=BA(e);for(const i of r.elements)t=t.filter((a=>!ns(a,i)));return{arrayValue:{values:t}}}class Sc extends wd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function OS(r){return vt(r.integerValue||r.doubleValue)}function BA(r){return vc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.field=e,this.transform=t}}function A2(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof dl&&a instanceof dl||i instanceof ml&&a instanceof ml?il(i.elements,a.elements,ns):i instanceof Sc&&a instanceof Sc?ns(i.Ae,a.Ae):i instanceof Tc&&a instanceof Tc})(r.transform,e.transform)}class I2{constructor(e,t){this.version=e,this.transformResults=t}}class en{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Rd{}function qA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Pc(r.key,en.none()):new Cl(r.key,r.data,en.none());{const t=r.data,i=mn.empty();let a=new ot(St.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Os(r.key,i,new Cn(a.toArray()),en.none())}}function w2(r,e,t){r instanceof Cl?(function(a,l,c){const d=a.value.clone(),p=kS(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):r instanceof Os?(function(a,l,c){if(!Mf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=kS(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(FA(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function rc(r,e,t,i){return r instanceof Cl?(function(l,c,d,p){if(!Mf(l.precondition,c))return d;const g=l.value.clone(),v=LS(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(r,e,t,i):r instanceof Os?(function(l,c,d,p){if(!Mf(l.precondition,c))return d;const g=LS(l.fieldTransforms,p,c),v=c.data;return v.setAll(FA(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,c,d){return Mf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(r,e,t)}function R2(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=UA(i.transform,a||null);l!=null&&(t===null&&(t=mn.empty()),t.set(i.field,l))}return t||null}function PS(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&il(i,a,((l,c)=>A2(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Cl extends Rd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Os extends Rd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function FA(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function kS(r,e,t){const i=new Map;be(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,S2(c,d,t[a]))}return i}function LS(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,T2(l,c,e))}return i}class Pc extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HA extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&w2(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=rc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=rc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=kA();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=qA(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&il(this.mutations,e.mutations,((t,i)=>PS(t,i)))&&il(this.baseMutations,e.baseMutations,((t,i)=>PS(t,i)))}}class Sy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){be(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return y2})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Sy(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Xe;function D2(r){switch(r){case W.OK:return ge(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return ge(15467,{code:r})}}function GA(r){if(r===void 0)return Vt("GRPC error has no .code"),W.UNKNOWN;switch(r){case Ht.OK:return W.OK;case Ht.CANCELLED:return W.CANCELLED;case Ht.UNKNOWN:return W.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return W.INTERNAL;case Ht.UNAVAILABLE:return W.UNAVAILABLE;case Ht.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Ht.NOT_FOUND:return W.NOT_FOUND;case Ht.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Ht.ABORTED:return W.ABORTED;case Ht.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Ht.DATA_LOSS:return W.DATA_LOSS;default:return ge(39323,{code:r})}}(Xe=Ht||(Ht={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new wr([4294967295,4294967295],0);function US(r){const e=N2().encode(r),t=new zb;return t.update(e),new Uint8Array(t.digest())}function jS(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wr([t,i],0),new wr([a,l],0)]}class Ay{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Yu(`Invalid padding: ${t}`);if(i<0)throw new Yu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Yu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wr.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(wr.fromNumber(i)));return a.compare(x2)===1&&(a=new wr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=US(e),[i,a]=jS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ay(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=US(e),[i,a]=jS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new kc(Ie.min(),a,new mt(De),Bn(),je())}}class Lc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Lc(i,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class KA{constructor(e,t){this.targetId=e,this.Ce=t}}class YA{constructor(e,t,i=Pt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class zS{constructor(){this.ve=0,this.Fe=BS(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),i=je();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:ge(38017,{changeType:l})}})),new Lc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=BS()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class V2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bn(),this.He=yf(),this.Je=yf(),this.Ze=new mt(De)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Xf(l))if(i===0){const c=new de(l.path);this.et(t,c,Rt.newNoDocument(c,Ie.min()))}else be(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=xs(i).toUint8Array()}catch(p){if(p instanceof dA)return nl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Ay(c,a,l)}catch(p){return nl(p instanceof Yu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Xf(d.target)){const p=new de(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Rt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=je();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new kc(e,t,this.Ze,this.je,i);return this.je=Bn(),this.He=yf(),this.Je=yf(),this.Ze=new mt(De),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new zS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ot(De),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ot(De),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yf(){return new mt(de.comparator)}function BS(){return new mt(de.comparator)}const M2={asc:"ASCENDING",desc:"DESCENDING"},O2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P2={and:"AND",or:"OR"};class k2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ng(r,e){return r.useProto3Json||_d(e)?e:{value:e}}function pl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function L2(r,e){return pl(r,e.toTimestamp())}function vn(r){return be(!!r,49232),Ie.fromTimestamp((function(t){const i=Ns(t);return new rt(i.seconds,i.nanos)})(r))}function Iy(r,e){return xg(r,e).canonicalString()}function xg(r,e){const t=(function(a){return new tt(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function $A(r){const e=tt.fromString(r);return be(sI(e),10190,{key:e.toString()}),e}function Wf(r,e){return Iy(r.databaseId,e.path)}function Na(r,e){const t=$A(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new de(WA(t))}function XA(r,e){return Iy(r.databaseId,e)}function JA(r){const e=$A(r);return e.length===4?tt.emptyPath():WA(e)}function Vg(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function WA(r){return be(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function qS(r,e,t){return{name:Wf(r,e),fields:t.value.mapValue.fields}}function U2(r,e,t){const i=Na(r,e.name),a=vn(e.updateTime),l=e.createTime?vn(e.createTime):Ie.min(),c=new mn({mapValue:{fields:e.fields}}),d=Rt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function j2(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(be(v===void 0||typeof v=="string",58123),Pt.fromBase64String(v||"")):(be(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Pt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?W.UNKNOWN:GA(g.code);return new ce(v,g.message||"")})(c);t=new YA(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Na(r,i.document.name),l=vn(i.document.updateTime),c=i.document.createTime?vn(i.document.createTime):Ie.min(),d=new mn({mapValue:{fields:i.document.fields}}),p=Rt.newFoundDocument(a,l,c,d),g=i.targetIds||[],v=i.removedTargetIds||[];t=new Of(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Na(r,i.document),l=i.readTime?vn(i.readTime):Ie.min(),c=Rt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Of([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Na(r,i.document),l=i.removedTargetIds||[];t=new Of([],l,a,null)}else{if(!("filter"in e))return ge(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new C2(a,l),d=i.targetId;t=new KA(d,c)}}return t}function Zf(r,e){let t;if(e instanceof Cl)t={update:qS(r,e.key,e.value)};else if(e instanceof Pc)t={delete:Wf(r,e.key)};else if(e instanceof Os)t={update:qS(r,e.key,e.data),updateMask:G2(e.fieldMask)};else{if(!(e instanceof HA))return ge(16599,{dt:e.type});t={verify:Wf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof Tc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof dl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ml)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Sc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw ge(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:L2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge(27497)})(r,e.precondition)),t}function Mg(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?en.updateTime(vn(l.updateTime)):l.exists!==void 0?en.exists(l.exists):en.none()})(e.currentDocument):en.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)be(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new Tc;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];p=new dl(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];p=new ml(v)}else"increment"in d?p=new Sc(c,d.increment):ge(16584,{proto:d});const g=St.fromServerFormat(d.fieldPath);return new b2(g,p)})(r,a))):[];if(e.update){e.update.name;const a=Na(r,e.update.name),l=new mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new Cn(g.map((v=>St.fromServerFormat(v))))})(e.updateMask);return new Os(a,l,c,t,i)}return new Cl(a,l,t,i)}if(e.delete){const a=Na(r,e.delete);return new Pc(a,t)}if(e.verify){const a=Na(r,e.verify);return new HA(a,t)}return ge(1463,{proto:e})}function z2(r,e){return r&&r.length>0?(be(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?vn(a.updateTime):vn(l);return c.isEqual(Ie.min())&&(c=vn(l)),new I2(c,a.transformResults||[])})(t,e)))):[]}function ZA(r,e){return{documents:[XA(r,e.path)]}}function eI(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=XA(r,a);const l=(function(g){if(g.length!==0)return iI(at.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:Ko(S.field),direction:q2(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ng(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function tI(r){let e=JA(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){be(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=nI(T);return S instanceof at&&_y(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(x){return new Ec(Yo(x.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,_d(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,R=T.values||[];return new hl(R,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const S=!T.before,R=T.values||[];return new hl(R,S)})(t.endAt)),DA(e,a,c,l,d,"F",p,g)}function B2(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nI(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Yo(t.unaryFilter.field);return Ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Yo(t.unaryFilter.field);return Ge.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Yo(t.unaryFilter.field);return Ge.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yo(t.unaryFilter.field);return Ge.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ge.create(Yo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return at.create(t.compositeFilter.filters.map((i=>nI(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(r):ge(30097,{filter:r})}function q2(r){return M2[r]}function F2(r){return O2[r]}function H2(r){return P2[r]}function Ko(r){return{fieldPath:r.canonicalString()}}function Yo(r){return St.fromServerFormat(r.fieldPath)}function iI(r){return r instanceof Ge?(function(t){if(t.op==="=="){if(wS(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NAN"}};if(IS(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wS(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NOT_NAN"}};if(IS(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ko(t.field),op:F2(t.op),value:t.value}}})(r):r instanceof at?(function(t){const i=t.getFilters().map((a=>iI(a)));return i.length===1?i[0]:{compositeFilter:{op:H2(t.op),filters:i}}})(r):ge(54877,{filter:r})}function G2(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sI(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function rI(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,i,a,l=Ie.min(),c=Ie.min(),d=Pt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.yt=e}}function K2(r,e){let t;if(e.document)t=U2(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=de.fromSegments(e.noDocument.path),a=Ba(e.noDocument.readTime);t=Rt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge(56709);{const i=de.fromSegments(e.unknownDocument.path),a=Ba(e.unknownDocument.version);t=Rt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new rt(a[0],a[1]);return Ie.fromTimestamp(l)})(e.readTime)),t}function FS(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ed(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:Wf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:pl(l,c.version.toTimestamp()),createTime:pl(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:za(e.version)};else{if(!e.isUnknownDocument())return ge(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:za(e.version)}}return i}function ed(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function za(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ba(r){const e=new rt(r.seconds,r.nanoseconds);return Ie.fromTimestamp(e)}function ba(r,e){const t=(e.baseMutations||[]).map((l=>Mg(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>Mg(r.yt,l))),a=rt.fromMillis(e.localWriteTimeMs);return new Ty(e.batchId,a,t,i)}function Qu(r){const e=Ba(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Ba(r.lastLimboFreeSnapshotVersion):Ie.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return be(c===1,1966,{count:c}),qn(Ad(JA(l.documents[0])))})(r.query):(function(l){return qn(tI(l))})(r.query),new Is(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Pt.fromBase64String(r.resumeToken))}function oI(r,e){const t=za(e.snapshotVersion),i=za(e.lastLimboFreeSnapshotVersion);let a;a=Xf(e.target)?ZA(r.yt,e.target):eI(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ja(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function lI(r){const e=tI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Dg(e,e.limit,"L"):e}function $p(r,e){return new by(e.largestBatchId,Mg(r.yt,e.overlayMutation))}function HS(r,e){const t=e.path.lastSegment();return[r,pn(e.path.popLast()),t]}function GS(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:za(i.readTime),documentKey:pn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{getBundleMetadata(e,t){return KS(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Ba(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return KS(e).put((function(a){return{bundleId:a.id,createTime:za(vn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return YS(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:lI(l.bundledQuery),readTime:Ba(l.readTime)}})(i)}))}saveNamedQuery(e,t){return YS(e).put((function(a){return{name:a.name,readTime:za(vn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function KS(r){return $t(r,vd)}function YS(r){return $t(r,Ed)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Cd(e,i)}getOverlay(e,t){return Mu(e).get(HS(this.userId,t)).next((i=>i?$p(this.serializer,i):null))}getOverlays(e,t){const i=Zi();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new by(t,c);a.push(this.bt(e,d))})),B.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(pn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Mu(e).X(Tg,d))})),B.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Zi(),l=pn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Mu(e).H(Tg,c).next((d=>{for(const p of d){const g=$p(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Zi();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Mu(e).ee({index:oA,range:d},((p,g,v)=>{const T=$p(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return Mu(e).put((function(a,l,c){const[d,p,g]=HS(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Zf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Mu(r){return $t(r,Td)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{St(e){return $t(e,dy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?Pt.fromUint8Array(i):Pt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(vt(e.integerValue));else if("doubleValue"in e){const i=vt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),fc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Ns(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?vA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):bd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ge(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){var c,d;const i=e.fields||{};this.Ft(t,53);const a=ul,l=((d=(c=i[a].arrayValue)==null?void 0:c.values)==null?void 0:d.length)||0;this.Ft(t,15),t.Mt(vt(l)),this.Ot(a,t),this.Ct(i[a],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),de.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Aa.Wt=new Aa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=255;function $2(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function QS(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=$2(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(e/8)}class X2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),i=QS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=QS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(jo),this.sn(255)}_n(){this.an(jo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===jo?(this.sn(jo),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===jo?(this.an(jo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class J2{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class W2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ou{constructor(){this.cn=new X2,this.ascending=new J2(this.cn),this.descending=new W2(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,i,a){this.hn=e,this.Pn=t,this.Tn=i,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new Ia(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:Pf(this.Tn),directionalValue:Pf(this.In),orderedDocumentKey:Pf(t),documentKey:i.path.toArray()}}An(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function mr(r,e){let t=r.hn-e.hn;return t!==0?t:(t=$S(r.Tn,e.Tn),t!==0?t:(t=$S(r.In,e.In),t!==0?t:de.comparator(r.Pn,e.Pn)))}function $S(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function Pf(r){return eb()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function XS(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class JS{constructor(e){this.Vn=new ot(((t,i)=>St.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(be(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=_g(e);if(t!==void 0&&!this.pn(t))return!1;const i=va(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.pn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=i[l];if(!this.yn(d,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.dn.length||!this.wn(this.dn[c++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new ot(St.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Rf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Rf(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Rf(i.field,i.dir==="asc"?0:1)));return new Gf(Gf.UNKNOWN_ID,this.collectionId,t,hc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(r){var t,i;if(be(r instanceof Ge||r instanceof at,20012),r instanceof Ge){if(r instanceof CA){const a=((i=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((l=>Ge.create(r.field,"==",l))))||[];return at.create(a,"or")}return r}const e=r.filters.map((a=>uI(a)));return at.create(e,r.op)}function Z2(r){if(r.getFilters().length===0)return[];const e=kg(uI(r));return be(cI(e),7391),Og(e)||Pg(e)?[e]:e.getFilters()}function Og(r){return r instanceof Ge}function Pg(r){return r instanceof at&&_y(r)}function cI(r){return Og(r)||Pg(r)||(function(t){if(t instanceof at&&Ig(t)){for(const i of t.getFilters())if(!Og(i)&&!Pg(i))return!1;return!0}return!1})(r)}function kg(r){if(be(r instanceof Ge||r instanceof at,34018),r instanceof Ge)return r;if(r.filters.length===1)return kg(r.filters[0]);const e=r.filters.map((i=>kg(i)));let t=at.create(e,r.op);return t=td(t),cI(t)?t:(be(t instanceof at,64498),be(fl(t),40251),be(t.filters.length>1,57927),t.filters.reduce(((i,a)=>wy(i,a))))}function wy(r,e){let t;return be(r instanceof Ge||r instanceof at,38388),be(e instanceof Ge||e instanceof at,25473),t=r instanceof Ge?e instanceof Ge?(function(a,l){return at.create([a,l],"and")})(r,e):WS(r,e):e instanceof Ge?WS(e,r):(function(a,l){if(be(a.filters.length>0&&l.filters.length>0,48005),fl(a)&&fl(l))return IA(a,l.getFilters());const c=Ig(a)?a:l,d=Ig(a)?l:a,p=c.filters.map((g=>wy(g,d)));return at.create(p,"or")})(r,e),td(t)}function WS(r,e){if(fl(e))return IA(e,r.getFilters());{const t=e.filters.map((i=>wy(r,i)));return at.create(t,"or")}}function td(r){if(be(r instanceof Ge||r instanceof at,11850),r instanceof Ge)return r;const e=r.getFilters();if(e.length===1)return td(e[0]);if(bA(r))return r;const t=e.map((a=>td(a))),i=[];return t.forEach((a=>{a instanceof Ge?i.push(a):a instanceof at&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:at.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.Sn=new Ry}addToCollectionParentIndex(e,t){return this.Sn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Fn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Fn.min())}updateCollectionGroup(e,t,i){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class Ry{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new ot(tt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new ot(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="IndexedDbIndexManager",_f=new Uint8Array(0);class tV{constructor(e,t){this.databaseId=t,this.Dn=new Ry,this.Cn=new Ms((i=>ja(i)),((i,a)=>Mc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:i,parent:pn(a)};return e0(e).put(l)}return B.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Yb(t),""],!1,!0);return e0(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Wi(c.parent))}return i}))}addFieldIndex(e,t){const i=Pu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=Bo(e);return l.next((d=>{c.put(GS(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Pu(e),a=Bo(e),l=zo(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Pu(e),i=zo(e),a=Bo(e);return t.X().next((()=>i.X())).next((()=>a.X()))}createTargetIndexes(e,t){return B.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new JS(i).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=zo(e);let a=!0;const l=new Map;return B.forEach(this.vn(t),(c=>this.Fn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=je();const d=[];return B.forEach(l,((p,g)=>{se(ZS,`Using index ${(function(oe){return`id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map((_e=>`${_e.fieldPath}:${_e.kind}`)).join(",")}`})(p)} to execute ${ja(t)}`);const v=(function(oe,_e){const ve=_g(_e);if(ve===void 0)return null;for(const he of Jf(oe,ve.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null})(g,p),T=(function(oe,_e){const ve=new Map;for(const he of va(_e))for(const D of Jf(oe,he.fieldPath))switch(D.op){case"==":case"in":ve.set(he.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return ve.set(he.fieldPath.canonicalString(),D.value),Array.from(ve.values())}return null})(g,p),S=(function(oe,_e){const ve=[];let he=!0;for(const D of va(_e)){const A=D.kind===0?xS(oe,D.fieldPath,oe.startAt):VS(oe,D.fieldPath,oe.startAt);ve.push(A.value),he&&(he=A.inclusive)}return new hl(ve,he)})(g,p),R=(function(oe,_e){const ve=[];let he=!0;for(const D of va(_e)){const A=D.kind===0?VS(oe,D.fieldPath,oe.endAt):xS(oe,D.fieldPath,oe.endAt);ve.push(A.value),he&&(he=A.inclusive)}return new hl(ve,he)})(g,p),x=this.Mn(p,g,S),C=this.Mn(p,g,R),j=this.xn(p,g,T),Q=this.On(p.indexId,v,x,S.inclusive,C,R.inclusive,j);return B.forEach(Q,(re=>i.Z(re,t.limit).next((oe=>{oe.forEach((_e=>{const ve=de.fromSegments(_e.documentKey);c.has(ve)||(c=c.add(ve),d.push(ve))}))}))))})).next((()=>d))}return B.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=Z2(at.create(e.filters,"and")).map((i=>Rg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),v=[];for(let T=0;T<p;++T){const S=t?this.Nn(t[T/g]):_f,R=this.Bn(e,S,i[T%g],a),x=this.Ln(e,S,l[T%g],c),C=d.map((j=>this.Bn(e,S,j,!0)));v.push(...this.createRange(R,x,C))}return v}Bn(e,t,i,a){const l=new Ia(e,de.empty(),t,i);return a?l:l.En()}Ln(e,t,i,a){const l=new Ia(e,de.empty(),t,i);return a?l.En():l}Fn(e,t){const i=new JS(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.gn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.vn(t);return B.forEach(a,(l=>this.Fn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new ot(St.comparator),v=!1;for(const T of p.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?v=!0:g=g.add(S.field));for(const T of p.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(v?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}kn(e,t){const i=new Ou;for(const a of va(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.ln(a.kind);Aa.Wt.Dt(l,c)}return i.un()}Nn(e){const t=new Ou;return Aa.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new Ou;return Aa.Wt.Dt(_c(this.databaseId,t),i.ln((function(l){const c=va(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let a=[];a.push(new Ou);let l=0;for(const c of va(e)){const d=i[l++];for(const p of a)if(this.qn(t,c.fieldPath)&&vc(d))a=this.Un(a,c,d);else{const g=p.ln(c.kind);Aa.Wt.Dt(d,g)}}return this.$n(a)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const p=new Ou;p.seed(d.un()),Aa.Wt.Dt(c,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((i=>i instanceof Ge&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Pu(e),a=Bo(e);return(t?i.H(Eg,IDBKeyRange.bound(t,t)):i.H()).next((l=>{const c=[];return B.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(v,T){const S=T?new hc(T.sequenceNumber,new Fn(Ba(T.readTime),new de(Wi(T.documentKey)),T.largestBatchId)):hc.empty(),R=v.fields.map((([x,C])=>new Rf(St.fromServerFormat(x),C)));return new Gf(v.indexId,v.collectionGroup,R,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:De(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Pu(e),l=Bo(e);return this.Wn(e).next((c=>a.H(Eg,IDBKeyRange.bound(t,t)).next((d=>B.forEach(d,(p=>l.put(GS(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return B.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),B.forEach(d,(p=>this.Qn(e,a,p).next((g=>{const v=this.Gn(l,p);return g.isEqual(v)?B.resolve():this.zn(e,l,p,g,v)})))))))}))}jn(e,t,i,a){return zo(e).put(a.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,a){return zo(e).delete(a.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const a=zo(e);let l=new ot(mr);return a.ee({index:aA,range:IDBKeyRange.only([i.indexId,this.uid,Pf(this.Kn(i,t))])},((c,d)=>{l=l.add(new Ia(i.indexId,t,XS(d.arrayValue),XS(d.directionalValue)))})).next((()=>l))}Gn(e,t){let i=new ot(mr);const a=this.kn(t,e);if(a==null)return i;const l=_g(t);if(l!=null){const c=e.data.field(l.fieldPath);if(vc(c))for(const d of c.arrayValue.values||[])i=i.add(new Ia(t.indexId,e.key,this.Nn(d),a))}else i=i.add(new Ia(t.indexId,e.key,_f,a));return i}zn(e,t,i,a,l){se(ZS,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,v,T,S){const R=p.getIterator(),x=g.getIterator();let C=Uo(R),j=Uo(x);for(;C||j;){let Q=!1,re=!1;if(C&&j){const oe=v(C,j);oe<0?re=!0:oe>0&&(Q=!0)}else C!=null?re=!0:Q=!0;Q?(T(j),j=Uo(x)):re?(S(C),C=Uo(R)):(C=Uo(R),j=Uo(x))}})(a,l,mr,(d=>{c.push(this.jn(e,t,i,d))}),(d=>{c.push(this.Hn(e,t,i,d))})),B.waitFor(c)}Wn(e){let t=1;return Bo(e).ee({index:rA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>mr(c,d))).filter(((c,d,p)=>!d||mr(c,p[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=mr(c,e),p=mr(c,t);if(d===0)a[0]=e.En();else if(d>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const d=a[c].An(this.uid,_f,de.empty()),p=a[c+1].An(this.uid,_f,de.empty());l.push(IDBKeyRange.bound(d,p))}return l}Jn(e,t){return mr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(t0)}getMinOffset(e,t){return B.mapArray(this.vn(t),(i=>this.Fn(e,i).next((a=>a||ge(44426))))).next(t0)}}function e0(r){return $t(r,pc)}function zo(r){return $t(r,tc)}function Pu(r){return $t(r,fy)}function Bo(r){return $t(r,ec)}function t0(r){be(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;uy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Fn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hI=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(r,e,t){const i=r.store(Ei),a=r.store(rl),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.ee({range:c},((v,T,S)=>(d++,S.delete())));l.push(p.next((()=>{be(d===1,47070,{batchId:t.batchId})})));const g=[];for(const v of t.mutations){const T=nA(e,v.key.path,t.batchId);l.push(a.delete(T)),g.push(v.key)}return B.waitFor(l).next((()=>g))}function nd(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ge(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(hI,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);class Dd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static wt(e,t,i,a){be(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Dd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pr(e).ee({index:Ra,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=Qo(e),c=pr(e);return c.add({}).next((d=>{be(typeof d=="number",49019);const p=new Ty(d,t,i,a),g=(function(R,x,C){const j=C.baseMutations.map((re=>Zf(R.yt,re))),Q=C.mutations.map((re=>Zf(R.yt,re)));return{userId:x,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:j,mutations:Q}})(this.serializer,this.userId,p),v=[];let T=new ot(((S,R)=>De(S.canonicalString(),R.canonicalString())));for(const S of a){const R=nA(this.userId,S.key.path,d);T=T.add(S.key.path.popLast()),v.push(c.put(g)),v.push(l.put(R,Dx))}return T.forEach((S=>{v.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),B.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return pr(e).get(t).next((i=>i?(be(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),ba(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?B.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return pr(e).ee({index:Ra,range:a},((c,d,p)=>{d.userId===this.userId&&(be(d.batchId>=i,47524,{Yn:i}),l=ba(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ca;return pr(e).ee({index:Ra,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ca],[this.userId,Number.POSITIVE_INFINITY]);return pr(e).H(Ra,t).next((i=>i.map((a=>ba(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Cf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Qo(e).ee({range:a},((c,d,p)=>{const[g,v,T]=c,S=Wi(v);if(g===this.userId&&t.path.isEqual(S))return pr(e).get(T).next((R=>{if(!R)throw ge(61480,{er:c,batchId:T});be(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:T}),l.push(ba(this.serializer,R))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(De);const a=[];return t.forEach((l=>{const c=Cf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Qo(e).ee({range:d},((g,v,T)=>{const[S,R,x]=g,C=Wi(R);S===this.userId&&l.path.isEqual(C)?i=i.add(x):T.done()}));a.push(p)})),B.waitFor(a).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Cf(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new ot(De);return Qo(e).ee({range:c},((p,g,v)=>{const[T,S,R]=p,x=Wi(S);T===this.userId&&i.isPrefixOf(x)?x.length===a&&(d=d.add(R)):v.done()})).next((()=>this.tr(e,d)))}tr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(pr(e).get(l).next((c=>{if(c===null)throw ge(35274,{batchId:l});be(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(ba(this.serializer,c))})))})),B.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return fI(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),B.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Qo(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const p=Wi(l[1]);a.push(p)}else d.done()})).next((()=>{be(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return dI(e,this.userId,t)}ir(e){return mI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ca,lastStreamToken:""}))}}function dI(r,e,t){const i=Cf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Qo(r).ee({range:l,Y:!0},((d,p,g)=>{const[v,T,S]=d;v===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function pr(r){return $t(r,Ei)}function Qo(r){return $t(r,rl)}function mI(r){return $t(r,dc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new qa(0)}static ar(){return new qa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new qa(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ie.fromTimestamp(new rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>qo(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(be(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return qo(e).ee(((c,d)=>{const p=Qu(d);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>B.waitFor(l))).next((()=>a))}forEachTarget(e,t){return qo(e).ee(((i,a)=>{const l=Qu(a);t(l)}))}ur(e){return i0(e).get(Qf).next((t=>(be(t!==null,2888),t)))}cr(e,t){return i0(e).put(Qf,t)}lr(e,t){return qo(e).put(oI(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=ja(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return qo(e).ee({range:a,index:sA},((c,d,p)=>{const g=Qu(d);Mc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=Tr(e);return t.forEach((c=>{const d=pn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),B.waitFor(a)}removeMatchingKeys(e,t,i){const a=Tr(e);return B.forEach(t,(l=>{const c=pn(l.path);return B.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=Tr(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Tr(e);let l=je();return a.ee({range:i,Y:!0},((c,d,p)=>{const g=Wi(c[1]),v=new de(g);l=l.add(v)})).next((()=>l))}containsKey(e,t){const i=pn(t.path),a=IDBKeyRange.bound([i],[Yb(i)],!1,!0);let l=0;return Tr(e).ee({index:hy,Y:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return qo(e).get(t).next((i=>i?Qu(i):null))}}function qo(r){return $t(r,al)}function i0(r){return $t(r,Da)}function Tr(r){return $t(r,ol)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="LruGarbageCollector",pI=1048576;function r0([r,e],[t,i]){const a=De(r,t);return a===0?De(e,i):a}class iV{constructor(e){this.Pr=e,this.buffer=new ot(r0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();r0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){se(s0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ur(t)?se(s0,"Ignoring IndexedDB error during garbage collection: ",t):await Lr(t)}await this.Ar(3e5)}))}}class sV{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(Rn.ce);const i=new iV(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(n0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),Ho()<=He.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function yI(r,e){return new sV(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t){this.db=e,this.garbageCollector=yI(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,a)=>t(a)))}addReference(e,t,i){return vf(e,i)}removeReference(e,t,i){return vf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return vf(e,t)}wr(e,t){return(function(a,l){let c=!1;return mI(a).te((d=>dI(a,d,l).next((p=>(p&&(c=!0),B.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,d)=>{if(d<=t){const p=this.wr(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Ie.min()),Tr(e).delete((function(T){return[0,pn(T.path)]})(c)))))}));a.push(p)}})).next((()=>B.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return vf(e,t)}yr(e,t){const i=Tr(e);let a,l=Rn.ce;return i.ee({index:hy},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==Rn.ce&&t(new de(Wi(a)),l),l=g,a=p):l=Rn.ce})).next((()=>{l!==Rn.ce&&t(new de(Wi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vf(r,e){return Tr(r).put((function(i,a){return{targetId:0,path:pn(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.changes=new Ms((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?B.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ya(e).put(i)}removeEntry(e,t,i){return ya(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],ed(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=Rt.newInvalidDocument(t);return ya(e).ee({index:Df,range:IDBKeyRange.only(ku(t))},((a,l)=>{i=this.Sr(t,l)})).next((()=>i))}Dr(e,t){let i={size:0,document:Rt.newInvalidDocument(t)};return ya(e).ee({index:Df,range:IDBKeyRange.only(ku(t))},((a,l)=>{i={document:this.Sr(t,l),size:nd(l)}})).next((()=>i))}getEntries(e,t){let i=Bn();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c)})).next((()=>i))}vr(e,t){let i=Bn(),a=new mt(de.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Sr(l,c);i=i.insert(l,d),a=a.insert(l,nd(c))})).next((()=>({documents:i,Fr:a})))}Cr(e,t,i){if(t.isEmpty())return B.resolve();let a=new ot(l0);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(ku(a.first()),ku(a.last())),c=a.getIterator();let d=c.getNext();return ya(e).ee({index:Df,range:l},((p,g,v)=>{const T=de.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&l0(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?v.j(ku(d)):v.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),ed(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ya(e).H(IDBKeyRange.bound(d,p,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let v=Bn();for(const T of g){const S=this.Sr(de.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(Oc(t,S)||a.has(S.key))&&(v=v.insert(S.key,S))}return v}))}getAllFromCollectionGroup(e,t,i,a){let l=Bn();const c=o0(t,i),d=o0(t,Fn.max());return ya(e).ee({index:iA,range:IDBKeyRange.bound(c,d,!0)},((p,g,v)=>{const T=this.Sr(de.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new oV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return a0(e).get(vg).next((t=>(be(!!t,20021),t)))}br(e,t){return a0(e).put(vg,t)}Sr(e,t){if(t){const i=K2(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ie.min())))return i}return Rt.newInvalidDocument(e)}}function vI(r){return new aV(r)}class oV extends _I{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Ms((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new ot(((l,c)=>De(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=FS(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=nd(p);i+=g-d.size,t.push(this.Mr.addEntry(e,l,p))}else if(i-=d.size,this.trackRemovals){const p=FS(this.Mr.serializer,c.convertToNoDocument(Ie.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,i)),B.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function a0(r){return $t(r,mc)}function ya(r){return $t(r,Yf)}function ku(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function o0(r,e){const t=e.documentKey.path.toArray();return[r,ed(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function l0(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=De(t[l],i[l]),a)return a;return a=De(t.length,i.length),a||(a=De(t[t.length-2],i[i.length-2]),a||De(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&rc(i.mutation,a,Cn.empty(),rt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=je()){const a=Zi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Ku();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Zi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,je())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=Bn();const c=sc(),d=(function(){return sc()})();return t.forEach(((p,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Os)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),rc(v.mutation,g,v.mutation.getFieldMask(),rt.now())):c.set(g.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new lV(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=sc();let a=new mt(((c,d)=>c-d)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=i.get(p)||Cn.empty();v=d.applyToLocalView(g,v),i.set(p,v);const T=(a.get(d.batchId)||je()).add(p);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,T=kA();v.forEach((S=>{if(!l.has(S)){const R=qA(t.get(S),i.get(S));R!==null&&T.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return B.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return f2(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):B.resolve(Zi());let d=sl,p=l;return c.next((g=>B.forEach(g,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?B.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,je()))).next((v=>({batchId:d,changes:PA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next((i=>{let a=Ku();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Ku();return this.indexManager.getCollectionParents(e,l).next((d=>B.forEach(d,(p=>{const g=(function(T,S){return new Rl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((v=>{v.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,Rt.newInvalidDocument(v)))}));let d=Ku();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&rc(v.mutation,g,Cn.empty(),rt.now()),Oc(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return B.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:vn(a.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:lI(a.bundledQuery),readTime:vn(a.readTime)}})(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.overlays=new mt(de.comparator),this.Lr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Zi();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),B.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),B.resolve()}getOverlaysForCollection(e,t,i){const a=Zi(),l=t.length+1,c=new de(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return B.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new mt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=Zi(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Zi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return B.resolve(d)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new by(t,i));let l=this.Lr.get(t);l===void 0&&(l=je(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.kr=new ot(Zt.Kr),this.qr=new ot(Zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Zt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Zt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new de(new tt([])),i=new Zt(t,e),a=new Zt(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new de(new tt([])),i=new Zt(t,e),a=new Zt(t,e+1);let l=je();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Zt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Zt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return de.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||de.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ot(Zt.Kr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ty(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new Zt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return B.resolve(c)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ca:this.Yn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Zt(t,0),a=new Zt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(De);return t.forEach((a=>{const l=new Zt(a,0),c=new Zt(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{i=i.add(d.Hr)}))})),B.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;de.isDocumentKey(l)||(l=l.child(""));const c=new Zt(new de(l),0);let d=new ot(De);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),B.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){be(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return B.forEach(t.mutations,(a=>{const l=new Zt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Zt(t,0),a=this.Jr.firstAfterOrEqual(i);return B.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.ti=e,this.docs=(function(){return new mt(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return B.resolve(i?i.document.mutableCopy():Rt.newInvalidDocument(t))}getEntries(e,t){let i=Bn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Rt.newInvalidDocument(a))})),B.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Bn();const c=t.path,d=new de(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||uy(Jb(v),i)<=0||(a.has(v.key)||Oc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(e,t,i,a){ge(9500)}ni(e,t){return B.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new mV(this)}getSize(e){return B.resolve(this.size)}}class mV extends _I{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),B.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.persistence=e,this.ri=new Ms((t=>ja(t)),Mc),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new Cy,this.targetCount=0,this.oi=qa._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),B.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new qa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.lr(t),B.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),B.waitFor(l).next((()=>a))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return B.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),B.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),B.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return B.resolve(i)}containsKey(e,t){return B.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,t){this._i={},this.overlays={},this.ai=new Rn(0),this.ui=!1,this.ui=!0,this.ci=new hV,this.referenceDelegate=e(this),this.li=new pV(this),this.indexManager=new eV,this.remoteDocumentCache=(function(a){return new dV(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new aI(t),this.Pi=new uV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new fV(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);const a=new gV(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return B.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class gV extends Zb{constructor(e){super(),this.currentSequenceNumber=e}}class Nd{constructor(e){this.persistence=e,this.Ri=new Cy,this.Ai=null}static Vi(e){return new Nd(e)}get di(){if(this.Ai)return this.Ai;throw ge(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),B.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,(i=>{const a=de.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class id{constructor(e,t){this.persistence=e,this.fi=new Ms((i=>pn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=yI(this,t)}static Vi(e,t){return new id(e,t)}Ti(){}Ii(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return B.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?B.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Ie.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),B.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xf(e.data.value)),t}wr(e,t,i){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return B.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.serializer=e}k(e,t,i,a){const l=new yd("createOrUpgrade",t);i<1&&a>=1&&((function(p){p.createObjectStore(Vc)})(e),(function(p){p.createObjectStore(dc,{keyPath:Cx}),p.createObjectStore(Ei,{keyPath:vS,autoIncrement:!0}).createIndex(Ra,ES,{unique:!0}),p.createObjectStore(rl)})(e),u0(e),(function(p){p.createObjectStore(Ea)})(e));let c=B.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(ol),p.deleteObjectStore(al),p.deleteObjectStore(Da)})(e),u0(e)),c=c.next((()=>(function(p){const g=p.store(Da),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ie.min().toTimestamp(),targetCount:0};return g.put(Qf,v)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(Ei).H().next((T=>{p.deleteObjectStore(Ei),p.createObjectStore(Ei,{keyPath:vS,autoIncrement:!0}).createIndex(Ra,ES,{unique:!0});const S=g.store(Ei),R=T.map((x=>S.put(x)));return B.waitFor(R)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(ll,{keyPath:Lx})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.gi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(mc)})(e),this.pi(l))))),i<7&&a>=7&&(c=c.next((()=>this.yi(l)))),i<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.bi(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(vd,{keyPath:Ux})})(e),(function(p){p.createObjectStore(Ed,{keyPath:jx})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(Td,{keyPath:Kx});g.createIndex(Tg,Yx,{unique:!1}),g.createIndex(oA,Qx,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(Yf,{keyPath:Nx});g.createIndex(Df,xx),g.createIndex(iA,Vx)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(Ea)))),i<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(fy,{keyPath:zx,autoIncrement:!0}).createIndex(Eg,Bx,{unique:!1}),p.createObjectStore(ec,{keyPath:qx}).createIndex(rA,Fx,{unique:!1}),p.createObjectStore(tc,{keyPath:Hx}).createIndex(aA,Gx,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(ec).clear()})).next((()=>{t.objectStore(tc).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(dy,{keyPath:$x})})(e)}))),i<18&&a>=18&&eb()&&(c=c.next((()=>{t.objectStore(ec).clear()})).next((()=>{t.objectStore(tc).clear()}))),c}pi(e){let t=0;return e.store(Ea).ee(((i,a)=>{t+=nd(a)})).next((()=>{const i={byteSize:t};return e.store(mc).put(vg,i)}))}gi(e){const t=e.store(dc),i=e.store(Ei);return t.H().next((a=>B.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Ca],[l.userId,l.lastAcknowledgedBatchId]);return i.H(Ra,c).next((d=>B.forEach(d,(p=>{be(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=ba(this.serializer,p);return fI(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(ol),i=e.store(Ea);return e.store(Da).get(Qf).next((a=>{const l=[];return i.ee(((c,d)=>{const p=new tt(c),g=(function(T){return[0,pn(T)]})(p);l.push(t.get(g).next((v=>v?B.resolve():(T=>t.put({targetId:0,path:pn(T),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>B.waitFor(l)))}))}wi(e,t){e.createObjectStore(pc,{keyPath:kx});const i=t.store(pc),a=new Ry,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:pn(p)})}};return t.store(Ea).ee({Y:!0},((c,d)=>{const p=new tt(c);return l(p.popLast())})).next((()=>t.store(rl).ee({Y:!0},(([c,d,p],g)=>{const v=Wi(d);return l(v.popLast())}))))}bi(e){const t=e.store(al);return t.ee(((i,a)=>{const l=Qu(a),c=oI(this.serializer,l);return t.put(c)}))}Si(e,t){const i=t.store(Ea),a=[];return i.ee(((l,c)=>{const d=t.store(Yf),p=(function(T){return T.document?new de(tt.fromString(T.document.name).popFirst(5)):T.noDocument?de.fromSegments(T.noDocument.path):T.unknownDocument?de.fromSegments(T.unknownDocument.path):ge(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>B.waitFor(a)))}Di(e,t){const i=t.store(Ei),a=vI(this.serializer),l=new Dy(Nd.Vi,this.serializer.yt);return i.H().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??je();ba(this.serializer,p).keys().forEach((v=>g=g.add(v))),d.set(p.userId,g)})),B.forEach(d,((p,g)=>{const v=new fn(g),T=Cd.wt(this.serializer,v),S=l.getIndexManager(v),R=Dd.wt(v,this.serializer,S,l.referenceDelegate);return new EI(a,R,T,S).recalculateAndSaveOverlaysForDocumentKeys(new Sg(t,Rn.ce),p).next()}))}))}}function u0(r){r.createObjectStore(ol,{keyPath:Ox}).createIndex(hy,Px,{unique:!0}),r.createObjectStore(al,{keyPath:"targetId"}).createIndex(sA,Mx,{unique:!0}),r.createObjectStore(Da)}const gr="IndexedDbPersistence",Xp=18e5,Jp=5e3,Wp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_V="main";class Ny{constructor(e,t,i,a,l,c,d,p,g,v,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=l,this.window=c,this.document=d,this.Fi=g,this.Mi=v,this.xi=T,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!Ny.v())throw new ce(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rV(this,a),this.Ki=t+_V,this.serializer=new aI(p),this.qi=new Cr(this.Ki,this.xi,new yV(this.serializer)),this.ci=new Q2,this.li=new nV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vI(this.serializer),this.Pi=new Y2,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Vt(gr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(W.FAILED_PRECONDITION,Wp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Rn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Ur(e))return se(gr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(gr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Lu(e).get(Lo).next((t=>B.resolve(this.Xi(t))))}Yi(e){return Ef(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Xp)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=$t(t,ll);return i.H().next((a=>{const l=this.ns(a,Xp),c=a.filter((d=>l.indexOf(d)===-1));return B.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?B.resolve(!0):Lu(e).get(Lo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Jp)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ce(W.FAILED_PRECONDITION,Wp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ef(e).H().next((i=>this.ns(i,Jp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&se(gr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Vc,ll],(e=>{const t=new Sg(e,Rn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Ef(e).H().next((t=>this.ns(t,Xp).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Dd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Cd.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){se(gr,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?Wx:p===17?hA:p===16?Jx:p===15?my:p===14?cA:p===13?uA:p===12?Xx:p===11?lA:void ge(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(d=>(c=new Sg(d,this.ai?this.ai.next():Rn.ce),t==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ce(W.FAILED_PRECONDITION,Wb);return i(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ps(e){return Lu(e).get(Lo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Jp)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(W.FAILED_PRECONDITION,Wp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lu(e).put(Lo,t)}static v(){return Cr.v()}Ji(e){const t=Lu(e);return t.get(Lo).next((i=>this.Xi(i)?(se(gr,"Releasing primary lease."),t.delete(Lo)):B.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Vt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;Z0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const i=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return se(gr,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Vt(gr,"Failed to get zombied client id.",i),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lu(r){return $t(r,Vc)}function Ef(r){return $t(r,ll)}function TI(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=je(),a=je();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new xy(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Z0()?8:eA(Qt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new vV;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Ho()<=He.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Ho()<=He.DEBUG&&se("QueryEngine","Query:",Go(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Ho()<=He.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(t))):B.resolve())}gs(e,t){if(MS(t))return B.resolve(null);let i=qn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Dg(t,null,"F"),i=qn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=je(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,Dg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,i,a){return MS(t)||a.isEqual(Ie.min())?B.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?B.resolve(null):(Ho()<=He.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Go(t)),this.Ds(e,c,t,Xb(a,sl)).next((d=>d)))}))}bs(e,t){let i=new ot(MA(e));return t.forEach(((a,l)=>{Oc(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return Ho()<=He.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Go(t)),this.fs.getDocumentsMatchingQuery(e,t,Fn.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="LocalStore",EV=3e8;class TV{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new mt(De),this.Fs=new Ms((l=>ja(l)),Mc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function bI(r,e,t,i){return new TV(r,e,t,i)}async function AI(r,e){const t=Te(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=je();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function SV(r,e){const t=Te(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const T=g.batch,S=T.keys();let R=B.resolve();return S.forEach((x=>{R=R.next((()=>v.getEntry(p,x))).next((C=>{const j=g.docVersions.get(x);be(j!==null,48541),C.version.compareTo(j)<0&&(T.applyToRemoteDocument(C,g),C.isValidDocument()&&(C.setReadTime(g.commitVersion),v.addEntry(C)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=je();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function II(r){const e=Te(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function bV(r,e){const t=Te(r),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=a.get(T);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,T))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(Pt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),a=a.insert(T,R),(function(C,j,Q){return C.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=EV?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,R,v)&&d.push(t.li.updateTargetData(l,R))}));let p=Bn(),g=je();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(AV(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!i.isEqual(Ie.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(v)}return B.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function AV(r,e,t){let i=je(),a=je();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Bn();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):se(Vy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function IV(r,e){const t=Te(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ca),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function sd(r,e){const t=Te(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,B.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new Is(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function gl(r,e,t){const i=Te(r),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ur(c))throw c;se(Vy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function Lg(r,e,t){const i=Te(r);let a=Ie.min(),l=je();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const T=Te(p),S=T.Fs.get(v);return S!==void 0?B.resolve(T.vs.get(S)):T.li.getTargetData(g,v)})(i,c,qn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Ie.min(),t?l:je()))).next((d=>(CI(i,VA(e),d),{documents:d,ks:l})))))}function wI(r,e){const t=Te(r),i=Te(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,e).next((c=>c?c.target:null))))}function RI(r,e){const t=Te(r),i=t.Ms.get(e)||Ie.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,Xb(i,sl),Number.MAX_SAFE_INTEGER))).then((a=>(CI(t,e,a),a)))}function CI(r,e,t){let i=r.Ms.get(e)||Ie.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="firestore_clients";function c0(r,e){return`${DI}_${r}_${e}`}const NI="firestore_mutations";function h0(r,e,t){let i=`${NI}_${r}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const xI="firestore_targets";function Zp(r,e){return`${xI}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="SharedClientState";class rd{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static $s(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ce(a.error.code,a.error.message))),c?new rd(e,t,a.state,l):(Vt(Ji,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ac{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static $s(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new ce(i.error.code,i.error.message))),l?new ac(e,i.state,a):(Vt(Ji,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ad{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=vy();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=tA(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new ad(e,l):(Vt(Ji,`Failed to parse client data for instance '${e}': ${t}`),null)}}class My{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new My(t.clientId,t.onlineState):(Vt(Ji,`Failed to parse online state: ${e}`),null)}}class Ug{constructor(){this.activeTargetIds=vy()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eg{constructor(e,t,i,a,l){this.window=e,this.Ci=t,this.persistenceKey=i,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new mt(De),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=c0(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Ug),this.eo=new RegExp(`^${DI}_${c}_([^_]*)$`),this.no=new RegExp(`^${NI}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${xI}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const i of e){if(i===this.zs)continue;const a=this.getItem(c0(this.persistenceKey,i));if(a){const l=ad.$s(i,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const i=this._o(t);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,i){this.co(e,t,i),this.lo(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Zp(this.persistenceKey,e));if(a){const l=ac.$s(e,a);l&&(i=l.state)}}return t&&this.ho.Qs(e),this.oo(),i}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zp(this.persistenceKey,e))}updateQueryState(e,t,i){this.Po(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.lo(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se(Ji,"READ",e,t),t}setItem(e,t){se(Ji,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){se(Ji,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(se(Ji,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const i=this.Eo(t.key);return this.Ro(i,null)}{const i=this.Ao(t.key,t.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(t.key)){if(t.newValue!==null){const i=this.Vo(t.key,t.newValue);if(i)return this.mo(i)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(t.key===this.io){if(t.newValue!==null){const i=this._o(t.newValue);if(i)return this.ao(i)}}else if(t.key===this.Ys){const i=(function(l){let c=Rn.ce;if(l!=null)try{const d=JSON.parse(l);be(typeof d=="number",30636,{yo:l}),c=d}catch(d){Vt(Ji,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);i!==Rn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this.so){const i=this.wo(t.newValue);await Promise.all(i.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,i){const a=new rd(this.currentUser,e,t,i),l=h0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=h0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,i){const a=Zp(this.persistenceKey,e),l=new ac(e,t,i);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const i=this.Eo(e);return ad.$s(i,t)}Vo(e,t){const i=this.no.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return rd.$s(new fn(l),a,t)}fo(e,t){const i=this.ro.exec(e),a=Number(i[1]);return ac.$s(a,t)}_o(e){return My.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);se(Ji,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const i=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(i),c=[],d=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||d.push(p)})),this.syncEngine.Co(c,d).then((()=>{this.Js=i}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=vy();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class VI{constructor(){this.vo=new Ug,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ug,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="ConnectivityMonitor";class d0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){se(f0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){se(f0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf=null;function jg(){return Tf===null?Tf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Tf++,"0x"+Tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="RestConnection",RV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class CV{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===$f?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=jg(),d=this.Qo(e,t.toUriEncodedString());se(tg,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(d),v=bl(g);return this.zo(e,d,p,i,v).then((T=>(se(tg,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw nl(tg,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=RV[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection",Uu=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Wo extends CV{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Wo.c_){const e=Hb();Uu(e,Fb.STAT_EVENT,(t=>{t.stat===gg.PROXY?se(hn,"STAT_EVENT: detected buffering proxy"):t.stat===gg.NOPROXY&&se(hn,"STAT_EVENT: detected no buffering proxy")})),Wo.c_=!0}}zo(e,t,i,a,l){const c=jg();return new Promise(((d,p)=>{const g=new Bb;g.setWithCredentials(!0),g.listenOnce(qb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case wf.NO_ERROR:const T=g.getResponseJson();se(hn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case wf.TIMEOUT:se(hn,`RPC '${e}' ${c} timed out`),p(new ce(W.DEADLINE_EXCEEDED,"Request time out"));break;case wf.HTTP_ERROR:const S=g.getStatus();if(se(hn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const x=R==null?void 0:R.error;if(x&&x.status&&x.message){const C=(function(Q){const re=Q.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(re)>=0?re:W.UNKNOWN})(x.status);p(new ce(C,x.message))}else p(new ce(W.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ce(W.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{se(hn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);se(hn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=jg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=l.join("");se(hn,`Creating RPC '${e}' stream ${a}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let T=!1,S=!1;const R=new DV({Ho:x=>{S?se(hn,`Not sending because RPC '${e}' stream ${a} is closed:`,x):(T||(se(hn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),T=!0),se(hn,`RPC '${e}' stream ${a} sending:`,x),v.send(x))},Jo:()=>v.close()});return Uu(v,Gu.EventType.OPEN,(()=>{S||(se(hn,`RPC '${e}' stream ${a} transport opened.`),R.i_())})),Uu(v,Gu.EventType.CLOSE,(()=>{S||(S=!0,se(hn,`RPC '${e}' stream ${a} transport closed`),R.o_(),this.E_(v))})),Uu(v,Gu.EventType.ERROR,(x=>{S||(S=!0,nl(hn,`RPC '${e}' stream ${a} transport errored. Name:`,x.name,"Message:",x.message),R.o_(new ce(W.UNAVAILABLE,"The operation could not be completed")))})),Uu(v,Gu.EventType.MESSAGE,(x=>{var C;if(!S){const j=x.data[0];be(!!j,16349);const Q=j,re=(Q==null?void 0:Q.error)||((C=Q[0])==null?void 0:C.error);if(re){se(hn,`RPC '${e}' stream ${a} received error:`,re);const oe=re.status;let _e=(function(D){const A=Ht[D];if(A!==void 0)return GA(A)})(oe),ve=re.message;oe==="NOT_FOUND"&&ve.includes("database")&&ve.includes("does not exist")&&ve.includes(this.databaseId.database)&&nl(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),_e===void 0&&(_e=W.INTERNAL,ve="Unknown error status: "+oe+" with message "+re.message),S=!0,R.o_(new ce(_e,ve)),v.close()}else se(hn,`RPC '${e}' stream ${a} received:`,j),R.__(j)}})),Wo.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Gb()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(r){return new Wo(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(){return typeof window<"u"?window:null}function kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(r){return new k2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wo.c_=!1;class OI{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="PersistentStream";class PI{constructor(e,t,i,a,l,c,d,p){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Vt(t.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new ce(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(m0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(se(m0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xV extends PI{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=j2(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?vn(c.readTime):Ie.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Vg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Xf(p)?{documents:ZA(l,p)}:{query:eI(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=QA(l,c.resumeToken);const g=Ng(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ie.min())>0){d.readTime=pl(l,c.snapshotVersion.toTimestamp());const g=Ng(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=B2(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Vg(this.serializer),t.removeTarget=e,this.K_(t)}}class VV extends PI{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=z2(e.writeResults,e.commitTime),i=vn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Vg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Zf(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{}class OV extends MV{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ce(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,xg(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(W.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,xg(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(W.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function PV(r,e,t,i){return new OV(r,e,t,i)}class kV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vt(t),this.aa=!1):se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="RemoteStore";class LV{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{Ga(this)&&(se(Fa,"Restarting streams for network reachability change."),await(async function(p){const g=Te(p);g.Ea.add(4),await Uc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Vd(g)})(this))}))})),this.Va=new kV(i,a)}}async function Vd(r){if(Ga(r))for(const e of r.Ra)await e(!0)}async function Uc(r){for(const e of r.Ra)await e(!1)}function Md(r,e){const t=Te(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ky(t)?Py(t):Nl(t).O_()&&Oy(t,e))}function yl(r,e){const t=Te(r),i=Nl(t);t.Ia.delete(e),i.O_()&&kI(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ga(t)&&t.Va.set("Unknown"))}function Oy(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nl(r).Z_(e)}function kI(r,e){r.da.$e(e),Nl(r).X_(e)}function Py(r){r.da=new V2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Nl(r).start(),r.Va.ua()}function ky(r){return Ga(r)&&!Nl(r).x_()&&r.Ia.size>0}function Ga(r){return Te(r).Ea.size===0}function LI(r){r.da=void 0}async function UV(r){r.Va.set("Online")}async function jV(r){r.Ia.forEach(((e,t)=>{Oy(r,e)}))}async function zV(r,e){LI(r),ky(r)?(r.Va.ha(e),Py(r)):r.Va.set("Unknown")}async function BV(r,e,t){if(r.Va.set("Online"),e instanceof YA&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(r,e)}catch(i){se(Fa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await od(r,i)}else if(e instanceof Of?r.da.Xe(e):e instanceof KA?r.da.st(e):r.da.tt(e),!t.isEqual(Ie.min()))try{const i=await II(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Pt.EMPTY_BYTE_STRING,v.snapshotVersion)),kI(l,p);const T=new Is(v.target,p,g,v.sequenceNumber);Oy(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(i){se(Fa,"Failed to raise snapshot:",i),await od(r,i)}}async function od(r,e,t){if(!Ur(e))throw e;r.Ea.add(1),await Uc(r),r.Va.set("Offline"),t||(t=()=>II(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{se(Fa,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Vd(r)}))}function UI(r,e){return e().catch((t=>od(r,t,e)))}async function Dl(r){const e=Te(r),t=Vr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ca;for(;qV(e);)try{const a=await IV(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,FV(e,a)}catch(a){await od(e,a)}jI(e)&&zI(e)}function qV(r){return Ga(r)&&r.Ta.length<10}function FV(r,e){r.Ta.push(e);const t=Vr(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function jI(r){return Ga(r)&&!Vr(r).x_()&&r.Ta.length>0}function zI(r){Vr(r).start()}async function HV(r){Vr(r).ra()}async function GV(r){const e=Vr(r);for(const t of r.Ta)e.ea(t.mutations)}async function KV(r,e,t){const i=r.Ta.shift(),a=Sy.from(i,e,t);await UI(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Dl(r)}async function YV(r,e){e&&Vr(r).Y_&&await(async function(i,a){if((function(c){return D2(c)&&c!==W.ABORTED})(a.code)){const l=i.Ta.shift();Vr(i).B_(),await UI(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Dl(i)}})(r,e),jI(r)&&zI(r)}async function p0(r,e){const t=Te(r);t.asyncQueue.verifyOperationInProgress(),se(Fa,"RemoteStore received new credentials");const i=Ga(t);t.Ea.add(3),await Uc(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vd(t)}async function zg(r,e){const t=Te(r);e?(t.Ea.delete(2),await Vd(t)):e||(t.Ea.add(2),await Uc(t),t.Va.set("Unknown"))}function Nl(r){return r.ma||(r.ma=(function(t,i,a){const l=Te(t);return l.sa(),new xV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:UV.bind(null,r),Yo:jV.bind(null,r),t_:zV.bind(null,r),J_:BV.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),ky(r)?Py(r):r.Va.set("Unknown")):(await r.ma.stop(),LI(r))}))),r.ma}function Vr(r){return r.fa||(r.fa=(function(t,i,a){const l=Te(t);return l.sa(),new VV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:HV.bind(null,r),t_:YV.bind(null,r),ta:GV.bind(null,r),na:KV.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Dl(r)):(await r.fa.stop(),r.Ta.length>0&&(se(Fa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new Ly(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uy(r,e){if(Vt("AsyncQueue",`${e}: ${r}`),Ur(r))return new ce(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||de.comparator(t.key,i.key):(t,i)=>de.comparator(t.key,i.key),this.keyedMap=Ku(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Zo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.ga=new mt(de.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ge(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class _l{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new _l(e,t,Zo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class $V{constructor(){this.queries=y0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Te(t),l=a.queries;a.queries=y0(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(i)}))})(this,new ce(W.ABORTED,"Firestore shutting down"))}}function y0(){return new Ms((r=>xA(r)),Id)}async function XV(r,e){const t=Te(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new QV,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Uy(c,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&jy(t)}async function JV(r,e){const t=Te(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function WV(r,e){const t=Te(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(i=!0);c.wa=a}}i&&jy(t)}function ZV(r,e,t){const i=Te(r),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function jy(r){r.Ca.forEach((e=>{e.next()}))}var Bg,_0;(_0=Bg||(Bg={})).Ma="default",_0.Cache="cache";class eM{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new _l(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=_l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.key=e}}class qI{constructor(e){this.key=e}}class tM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=je(),this.mutatedKeys=je(),this.eu=MA(e),this.tu=new Zo(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new g0,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,T)=>{const S=a.get(v),R=Oc(this.query,T)?T:null,x=!!S&&this.mutatedKeys.has(S.key),C=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let j=!1;S&&R?S.data.isEqual(R.data)?x!==C&&(i.track({type:3,doc:R}),j=!0):this.su(S,R)||(i.track({type:2,doc:R}),j=!0,(p&&this.eu(R,p)>0||g&&this.eu(R,g)<0)&&(d=!0)):!S&&R?(i.track({type:0,doc:R}),j=!0):S&&!R&&(i.track({type:1,doc:S}),j=!0,(p||g)&&(d=!0)),j&&(R?(c=c.add(R),l=C?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:c,iu:i,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,T)=>(function(R,x){const C=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Vt:j})}};return C(R)-C(x)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new _l(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new g0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new qI(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new BI(i))})),t}cu(e){this.Za=e.ks,this.Ya=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const xl="SyncEngine";class nM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class iM{constructor(e){this.key=e,this.hu=!1}}class sM{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ms((d=>xA(d)),Id),this.Iu=new Map,this.Eu=new Set,this.Ru=new mt(de.comparator),this.Au=new Map,this.Vu=new Cy,this.du={},this.mu=new Map,this.fu=qa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rM(r,e,t=!0){const i=Od(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await FI(i,e,t,!0),a}async function aM(r,e){const t=Od(r);await FI(t,e,!0,!1)}async function FI(r,e,t,i){const a=await sd(r.localStore,qn(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await zy(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&Md(r.remoteStore,a),d}async function zy(r,e,t,i,a){r.pu=(T,S,R)=>(async function(C,j,Q,re){let oe=j.view.ru(Q);oe.Ss&&(oe=await Lg(C.localStore,j.query,!1).then((({documents:D})=>j.view.ru(D,oe))));const _e=re&&re.targetChanges.get(j.targetId),ve=re&&re.targetMismatches.get(j.targetId)!=null,he=j.view.applyChanges(oe,C.isPrimaryClient,_e,ve);return qg(C,j.targetId,he.au),he.snapshot})(r,T,S,R);const l=await Lg(r.localStore,e,!0),c=new tM(e,l.ks),d=c.ru(l.documents),p=Lc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),g=c.applyChanges(d,r.isPrimaryClient,p);qg(r,t,g.au);const v=new nM(e,t,c);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function oM(r,e,t){const i=Te(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Id(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await gl(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&yl(i.remoteStore,a.targetId),vl(i,a.targetId)})).catch(Lr)):(vl(i,a.targetId),await gl(i.localStore,a.targetId,!0))}async function lM(r,e){const t=Te(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),yl(t.remoteStore,i.targetId))}async function uM(r,e,t){const i=Hy(r);try{const a=await(function(c,d){const p=Te(c),g=rt.now(),v=d.reduce(((R,x)=>R.add(x.key)),je());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let x=Bn(),C=je();return p.xs.getEntries(R,v).next((j=>{x=j,x.forEach(((Q,re)=>{re.isValidDocument()||(C=C.add(Q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,x))).next((j=>{T=j;const Q=[];for(const re of d){const oe=R2(re,T.get(re.key).overlayedDocument);oe!=null&&Q.push(new Os(re.key,oe,TA(oe.value.mapValue),en.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,Q,d)})).next((j=>{S=j;const Q=j.applyToLocalDocumentSet(T,C);return p.documentOverlayCache.saveOverlays(R,j.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:PA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new mt(De)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(i,a.batchId,t),await zr(i,a.changes),await Dl(i.remoteStore)}catch(a){const l=Uy(a,"Failed to persist write");t.reject(l)}}async function HI(r,e){const t=Te(r);try{const i=await bV(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?be(c.hu,14607):a.removedDocuments.size>0&&(be(c.hu,42227),c.hu=!1))})),await zr(t,i,e)}catch(i){await Lr(i)}}function v0(r,e,t){const i=Te(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=Te(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,T)=>{for(const S of T.ba)S.va(d)&&(g=!0)})),g&&jy(p)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function cM(r,e,t){const i=Te(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new mt(de.comparator);c=c.insert(l,Rt.newNoDocument(l,Ie.min()));const d=je().add(l),p=new kc(Ie.min(),new Map,new mt(De),c,d);await HI(i,p),i.Ru=i.Ru.remove(l),i.Au.delete(e),Fy(i)}else await gl(i.localStore,e,!1).then((()=>vl(i,e,t))).catch(Lr)}async function hM(r,e){const t=Te(r),i=e.batch.batchId;try{const a=await SV(t.localStore,e);qy(t,i,null),By(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await zr(t,a)}catch(a){await Lr(a)}}async function fM(r,e,t){const i=Te(r);try{const a=await(function(c,d){const p=Te(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((T=>(be(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);qy(i,e,t),By(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await zr(i,a)}catch(a){await Lr(a)}}function By(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function qy(r,e,t){const i=Te(r);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function vl(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||GI(r,i)}))}function GI(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(yl(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Fy(r))}function qg(r,e,t){for(const i of t)i instanceof BI?(r.Vu.addReference(i.key,e),dM(r,i)):i instanceof qI?(se(xl,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||GI(r,i.key)):ge(19791,{wu:i})}function dM(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(se(xl,"New document in limbo: "+t),r.Eu.add(i),Fy(r))}function Fy(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new de(tt.fromString(e)),i=r.fu.next();r.Au.set(i,new iM(t)),r.Ru=r.Ru.insert(t,i),Md(r.remoteStore,new Is(qn(Ad(t.path)),i,"TargetPurposeLimboResolution",Rn.ce))}}async function zr(r,e,t){const i=Te(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{var v;if((g||t)&&i.isPrimaryClient){const T=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(g){a.push(g);const T=xy.Es(p.targetId,g);l.push(T)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(p,g){const v=Te(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>B.forEach(g,(S=>B.forEach(S.Ts,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>B.forEach(S.Is,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!Ur(T))throw T;se(Vy,"Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const R=v.vs.get(S),x=R.snapshotVersion,C=R.withLastLimboFreeSnapshotVersion(x);v.vs=v.vs.insert(S,C)}}})(i.localStore,l))}async function mM(r,e){const t=Te(r);if(!t.currentUser.isEqual(e)){se(xl,"User change. New user:",e.toKey());const i=await AI(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new ce(W.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await zr(t,i.Ns)}}function pM(r,e){const t=Te(r),i=t.Au.get(e);if(i&&i.hu)return je().add(i.key);{let a=je();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function gM(r,e){const t=Te(r),i=await Lg(t.localStore,e.query,!0),a=e.view.cu(i);return t.isPrimaryClient&&qg(t,e.targetId,a.au),a}async function yM(r,e){const t=Te(r);return RI(t.localStore,e).then((i=>zr(t,i)))}async function _M(r,e,t,i){const a=Te(r),l=await(function(d,p){const g=Te(d),v=Te(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(T=>v.Xn(T,p).next((S=>S?g.localDocuments.getDocuments(T,S):B.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Dl(a.remoteStore):t==="acknowledged"||t==="rejected"?(qy(a,e,i||null),By(a,e),(function(d,p){Te(Te(d).mutationQueue).nr(p)})(a.localStore,e)):ge(6720,"Unknown batchState",{bu:t}),await zr(a,l)):se(xl,"Cannot apply mutation batch with id: "+e)}async function vM(r,e){const t=Te(r);if(Od(t),Hy(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await E0(t,i.toArray());t.gu=!0,await zg(t.remoteStore,!0);for(const l of a)Md(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const i=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(vl(t,c),gl(t.localStore,c,!0)))),yl(t.remoteStore,c)})),await a,await E0(t,i),(function(c){const d=Te(c);d.Au.forEach(((p,g)=>{yl(d.remoteStore,g)})),d.Vu.zr(),d.Au=new Map,d.Ru=new mt(de.comparator)})(t),t.gu=!1,await zg(t.remoteStore,!1)}}async function E0(r,e,t){const i=Te(r),a=[],l=[];for(const c of e){let d;const p=i.Iu.get(c);if(p&&p.length!==0){d=await sd(i.localStore,qn(p[0]));for(const g of p){const v=i.Tu.get(g),T=await gM(i,v);T.snapshot&&l.push(T.snapshot)}}else{const g=await wI(i.localStore,c);d=await sd(i.localStore,g),await zy(i,KI(g),c,!1,d.resumeToken)}a.push(d)}return i.Pu.J_(l),a}function KI(r){return DA(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function EM(r){return(function(t){return Te(Te(t).persistence).hs()})(Te(r).localStore)}async function TM(r,e,t,i){const a=Te(r);if(a.gu)return void se(xl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await RI(a.localStore,VA(l[0])),d=kc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Pt.EMPTY_BYTE_STRING);await zr(a,c,d);break}case"rejected":await gl(a.localStore,e,!0),vl(a,e,i);break;default:ge(64155,t)}}async function SM(r,e,t){const i=Od(r);if(i.gu){for(const a of e){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){se(xl,"Adding an already active target "+a);continue}const l=await wI(i.localStore,a),c=await sd(i.localStore,l);await zy(i,KI(l),c.targetId,!1,c.resumeToken),Md(i.remoteStore,c)}for(const a of t)i.Iu.has(a)&&await gl(i.localStore,a,!1).then((()=>{yl(i.remoteStore,a),vl(i,a)})).catch(Lr)}}function Od(r){const e=Te(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=HI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cM.bind(null,e),e.Pu.J_=WV.bind(null,e.eventManager),e.Pu.yu=ZV.bind(null,e.eventManager),e}function Hy(r){const e=Te(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fM.bind(null,e),e}class bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return bI(this.persistence,new SI,e.initialUser,this.serializer)}Cu(e){return new Dy(Nd.Vi,this.serializer)}Du(e){return new VI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bc.provider={build:()=>new bc};class bM extends bc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){be(this.persistence.referenceDelegate instanceof id,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new gI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Dy((i=>id.Vi(i,t)),this.serializer)}}class YI extends bc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Hy(this.xu.syncEngine),await Dl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return bI(this.persistence,new SI,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new gI(i,e.asyncQueue,t)}Mu(e,t){const i=new wx(t,this.persistence);return new Ix(e.asyncQueue,i)}Cu(e){const t=TI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Ny(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,MI(),kf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new VI}}class AM extends YI{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof eg&&(this.sharedClientState.syncEngine={So:_M.bind(null,t),Do:TM.bind(null,t),Co:SM.bind(null,t),hs:EM.bind(null,t),bo:yM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await vM(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=MI();if(!eg.v(t))throw new ce(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=TI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eg(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Ac{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>v0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mM.bind(null,this.syncEngine),await zg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $V})()}createDatastore(e){const t=xd(e.databaseInfo.databaseId),i=NV(e.databaseInfo);return PV(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new LV(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>v0(this.syncEngine,t,0)),(function(){return d0.v()?new d0:new wV})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,v){const T=new sM(a,l,c,d,p,g);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Te(a);se(Fa,"RemoteStore shutting down."),l.Ea.add(5),await Uc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ac.provider={build:()=>new Ac};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="FirestoreClient";class wM{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=fn.UNAUTHENTICATED,this.clientId=ly.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{se(Mr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(se(Mr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Uy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ng(r,e){r.asyncQueue.verifyOperationInProgress(),se(Mr,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await AI(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function T0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await RM(r);se(Mr,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>p0(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>p0(e.remoteStore,a))),r._onlineComponents=e}async function RM(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){se(Mr,"Using user provided OfflineComponentProvider");try{await ng(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;nl("Error using user provided cache. Falling back to memory cache: "+t),await ng(r,new bc)}}else se(Mr,"Using default OfflineComponentProvider"),await ng(r,new bM(void 0));return r._offlineComponents}async function QI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(se(Mr,"Using user provided OnlineComponentProvider"),await T0(r,r._uninitializedComponentsProvider._online)):(se(Mr,"Using default OnlineComponentProvider"),await T0(r,new Ac))),r._onlineComponents}function CM(r){return QI(r).then((e=>e.syncEngine))}async function S0(r){const e=await QI(r),t=e.eventManager;return t.onListen=rM.bind(null,e.syncEngine),t.onUnlisten=oM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=aM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lM.bind(null,e.syncEngine),t}function DM(r,e,t,i){const a=new IM(i),l=new eM(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>XV(await S0(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>JV(await S0(r),l)))}}function NM(r,e){const t=new Rr;return r.asyncQueue.enqueueAndForget((async()=>uM(await CM(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="ComponentProvider",b0=new Map;function VM(r,e,t,i,a){return new e2(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,$I(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="firestore.googleapis.com",A0=!0;class I0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MM,this.ssl=A0}else this.host=e.host,this.ssl=e.ssl??A0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pI)throw new ce(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Sx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$I(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ce(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ce(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ce(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gy{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new dx;switch(i.type){case"firstParty":return new gx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=b0.get(t);i&&(se(xM,"Removing Datastore"),b0.delete(t),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ka(this.firestore,e,this._query)}}class Mt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(xc(t,Mt._jsonSchema))return new Mt(e,i||null,new de(tt.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Kt("string",Mt._jsonSchemaVersion),referencePath:Kt("string")};class Dr extends Ka{constructor(e,t,i){super(e,t,Ad(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new de(e))}withConverter(e){return new Dr(this.firestore,e,this._path)}}function XI(r,e,...t){if(r=Ot(r),Qb("collection","path",e),r instanceof Gy){const i=tt.fromString(e,...t);return mS(i),new Dr(r,null,i)}{if(!(r instanceof Mt||r instanceof Dr))throw new ce(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(tt.fromString(e,...t));return mS(i),new Dr(r.firestore,null,i)}}function _n(r,e,...t){if(r=Ot(r),arguments.length===1&&(e=ly.newId()),Qb("doc","path",e),r instanceof Gy){const i=tt.fromString(e,...t);return dS(i),new Mt(r,null,new de(i))}{if(!(r instanceof Mt||r instanceof Dr))throw new ce(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(tt.fromString(e,...t));return dS(i),new Mt(r.firestore,r instanceof Dr?r.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="AsyncQueue";class R0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OI(this,"async_queue_retry"),this._c=()=>{const i=kf();i&&se(w0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=kf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Rr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ur(e))throw e;se(w0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Vt("INTERNAL UNHANDLED ERROR: ",C0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Ly.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ge(47125,{Pc:C0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function C0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ha extends Gy{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new R0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function OM(r,e,t){t||(t=$f);const i=Xg(r,"firestore");if(i.isInitialized(t)){const a=i.getImmediate({identifier:t}),l=i.getOptions(t);if(Ma(l,e))return a;throw new ce(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ce(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pI)throw new ce(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&bl(e.host)&&J0(e.host),i.initialize({options:e,instanceIdentifier:t})}function Ky(r){if(r._terminated)throw new ce(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||PM(r),r._firestoreClient}function PM(r){var i,a,l,c;const e=r._freezeSettings(),t=VM(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new wM(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new si(Pt.fromBase64String(e))}catch(t){throw new ce(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new si(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xc(e,si._jsonSchema))return si.fromBase64String(e.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:Kt("string",si._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ts._jsonSchemaVersion}}static fromJSON(e){if(xc(e,ts._jsonSchema))return new ts(e.latitude,e.longitude)}}ts._jsonSchemaVersion="firestore/geoPoint/1.0",ts._jsonSchema={type:Kt("string",ts._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xc(e,bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new bi(e.vectorValues);throw new ce(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:Kt("string",bi._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=/^__.*__$/;class LM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cl(e,this.data,t,this.fieldTransforms)}}class JI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function WI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{dataSource:r})}}class Qy{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Qy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ld(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(WI(this.dataSource)&&kM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class UM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||xd(e)}createContext(e,t,i,a=!1){return new Qy({dataSource:e,methodName:t,targetDoc:i,path:St.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kd(r){const e=r._freezeSettings(),t=xd(r._databaseId);return new UM(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ZI(r,e,t,i,a,l={}){const c=r.createContext(l.merge||l.mergeFields?2:0,e,t,a);$y("Data must be an object, but it was:",c,i);const d=nw(i,c);let p,g;if(l.merge)p=new Cn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const S=El(e,T,t);if(!c.contains(S))throw new ce(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);rw(v,S)||v.push(S)}p=new Cn(v),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new LM(new mn(d),p,g)}class Ld extends Yy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ld}}function ew(r,e,t,i){const a=r.createContext(1,e,t);$y("Data must be an object, but it was:",a,i);const l=[],c=mn.empty();jr(i,((p,g)=>{const v=sw(e,p,t);g=Ot(g);const T=a.childContextForFieldPath(v);if(g instanceof Ld)l.push(v);else{const S=jc(g,T);S!=null&&(l.push(v),c.set(v,S))}}));const d=new Cn(l);return new JI(c,d,a.fieldTransforms)}function tw(r,e,t,i,a,l){const c=r.createContext(1,e,t),d=[El(e,i,t)],p=[a];if(l.length%2!=0)throw new ce(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(El(e,l[S])),p.push(l[S+1]);const g=[],v=mn.empty();for(let S=d.length-1;S>=0;--S)if(!rw(g,d[S])){const R=d[S];let x=p[S];x=Ot(x);const C=c.childContextForFieldPath(R);if(x instanceof Ld)g.push(R);else{const j=jc(x,C);j!=null&&(g.push(R),v.set(R,j))}}const T=new Cn(g);return new JI(v,T,c.fieldTransforms)}function jM(r,e,t,i=!1){return jc(t,r.createContext(i?4:3,e))}function jc(r,e){if(iw(r=Ot(r)))return $y("Unsupported field value:",e,r),nw(r,e);if(r instanceof Yy)return(function(i,a){if(!WI(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=jc(d,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=Ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return E2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=rt.fromDate(i);return{timestampValue:pl(a.serializer,l)}}if(i instanceof rt){const l=new rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:pl(a.serializer,l)}}if(i instanceof ts)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof si)return{bytesValue:QA(a.serializer,i._byteString)};if(i instanceof Mt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Iy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof bi)return(function(c,d){const p=c instanceof bi?c.toArray():c;return{mapValue:{fields:{[gy]:{stringValue:yy},[ul]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Ey(d.serializer,v)}))}}}}}})(i,a);if(rI(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${gd(i)}`)})(r,e)}function nw(r,e){const t={};return fA(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(r,((i,a)=>{const l=jc(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function iw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof rt||r instanceof ts||r instanceof si||r instanceof Mt||r instanceof Yy||r instanceof bi||rI(r))}function $y(r,e,t){if(!iw(t)||!$b(t)){const i=gd(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function El(r,e,t){if((e=Ot(e))instanceof Pd)return e._internalPath;if(typeof e=="string")return sw(r,e);throw ld("Field path arguments must be of type string or ",r,!1,void 0,t)}const zM=new RegExp("[~\\*/\\[\\]]");function sw(r,e,t){if(e.search(zM)>=0)throw ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Pd(...e.split("."))._internalPath}catch{throw ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function ld(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new ce(W.INVALID_ARGUMENT,d+r+p)}function rw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{convertValue(e,t="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return jr(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[ul].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>vt(c.doubleValue)));return new bi(t)}convertGeoPoint(e){return new ts(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Sd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){const t=Ns(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tt.fromString(e);be(sI(i),9688,{name:e});const a=new Ua(i.get(1),i.get(3)),l=new de(i.popFirst(5));return a.isEqual(t)||Vt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends BM{constructor(e){super(),this.firestore=e}convertBytes(e){return new si(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}const D0="@firebase/firestore",N0="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(El("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class qM extends ow{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}class lw extends Xy{}function uw(r,e,...t){let i=[];e instanceof Xy&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof Wy)).length,d=l.filter((p=>p instanceof Jy)).length;if(c>1||c>0&&d>0)throw new ce(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class Jy extends lw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Jy(e,t,i)}_apply(e){const t=this._parse(e);return hw(e._query,t),new Ka(e.firestore,e.converter,Cg(e._query,t))}_parse(e){const t=kd(e.firestore);return(function(l,c,d,p,g,v,T){let S;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ce(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){M0(T,v);const x=[];for(const C of T)x.push(V0(p,l,C));S={arrayValue:{values:x}}}else S=V0(p,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||M0(T,v),S=jM(d,c,T,v==="in"||v==="not-in");return Ge.create(g,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wy extends Xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:at.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)hw(c,p),c=Cg(c,p)})(e._query,t),new Ka(e.firestore,e.converter,Cg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zy extends lw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zy(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new ce(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ce(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ec(l,c)})(e._query,this._field,this._direction);return new Ka(e.firestore,e.converter,m2(e._query,t))}}function cw(r,e="asc"){const t=e,i=El("orderBy",r);return Zy._create(i,t)}function V0(r,e,t){if(typeof(t=Ot(t))=="string"){if(t==="")throw new ce(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NA(e)&&t.indexOf("/")!==-1)throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(tt.fromString(t));if(!de.isDocumentKey(i))throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return _c(r,new de(i))}if(t instanceof Mt)return _c(r,t._key);throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(t)}.`)}function M0(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hw(r,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function fw(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class HM{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=QM(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function GM(r){return new HM(r)}class KM{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ac.provider,this._offlineComponentProvider={build:t=>new YI(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class YM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ac.provider,this._offlineComponentProvider={build:t=>new AM(t,e==null?void 0:e.cacheSizeBytes)}}}function QM(r){return new KM(r==null?void 0:r.forceOwnership)}function $M(){return new YM}class $u{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends ow{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(El("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",xa._jsonSchema={type:Kt("string",xa._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Lf extends xa{data(e={}){return super.data(e)}}class el{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new $u(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Lf(this._firestore,this._userDataWriter,i.key,i,new $u(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new Lf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new $u(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Lf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new $u(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:XM(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=el._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ly.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */el._jsonSchemaVersion="firestore/querySnapshot/1.0",el._jsonSchema={type:Kt("string",el._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kd(e)}set(e,t,i){this._verifyNotCommitted();const a=ig(e,this._firestore),l=fw(a.converter,t,i),c=ZI(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,en.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=ig(e,this._firestore);let c;return c=typeof(t=Ot(t))=="string"||t instanceof Pd?tw(this._dataReader,"WriteBatch.update",l._key,t,i,a):ew(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,en.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ig(e,this._firestore);return this._mutations=this._mutations.concat(new Pc(t._key,en.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ig(r,e){if((r=Ot(r)).firestore!==e)throw new ce(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Fg(r,e,t){r=Rs(r,Mt);const i=Rs(r.firestore,Ha),a=fw(r.converter,e,t),l=kd(i);return Ud(i,[ZI(l,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,en.none())])}function yr(r,e,t,...i){r=Rs(r,Mt);const a=Rs(r.firestore,Ha),l=kd(a);let c;return c=typeof(e=Ot(e))=="string"||e instanceof Pd?tw(l,"updateDoc",r._key,e,t,i):ew(l,"updateDoc",r._key,e),Ud(a,[c.toMutation(r._key,en.exists(!0))])}function dw(r){return Ud(Rs(r.firestore,Ha),[new Pc(r._key,en.none())])}function mw(r,...e){var g,v,T;r=Ot(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||x0(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(x0(e[i])){const S=e[i];e[i]=(g=S.next)==null?void 0:g.bind(S),e[i+1]=(v=S.error)==null?void 0:v.bind(S),e[i+2]=(T=S.complete)==null?void 0:T.bind(S)}let l,c,d;if(r instanceof Mt)c=Rs(r.firestore,Ha),d=Ad(r._key.path),l={next:S=>{e[i]&&e[i](WM(c,r,S))},error:e[i+1],complete:e[i+2]};else{const S=Rs(r,Ka);c=Rs(S.firestore,Ha),d=S._query;const R=new aw(c);l={next:x=>{e[i]&&e[i](new el(c,R,S,x))},error:e[i+1],complete:e[i+2]},FM(r._query)}const p=Ky(c);return DM(p,d,a,l)}function Ud(r,e){const t=Ky(r);return NM(t,e)}function WM(r,e,t){const i=t.docs.get(e._key),a=new aw(r);return new xa(r,a,e._key,i,new $u(t.hasPendingWrites,t.fromCache),e.converter)}function pw(r){return r=Rs(r,Ha),Ky(r),new JM(r,(e=>Ud(r,e)))}(function(e,t=!0){hx(Al),tl(new Oa("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Ha(new mx(i.getProvider("auth-internal")),new yx(c,i.getProvider("app-check-internal")),t2(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Ir(D0,N0,e),Ir(D0,N0,"esm2020")})();const Hg={apiKey:"AIzaSyCMQRCfBaVdJWgqMkaWrBHgHlMX51K7tbM",authDomain:"entrypoint-v2.firebaseapp.com",projectId:"entrypoint-v2",storageBucket:"entrypoint-v2.firebasestorage.app",messagingSenderId:"240107297798",appId:"1:240107297798:web:9e4a6c13a2751aead9b787"},Tl=!!Hg.apiKey&&!!Hg.projectId;let Ta=null,Gt=null;if(Tl){const r=sb(Hg);Ta=ux(r),Gt=OM(r,{localCache:GM({tabManager:$M()})})}const gw=G.createContext(null);function ZM({children:r}){const[e,t]=G.useState(null),[i,a]=G.useState(Tl);G.useEffect(()=>!Tl||!Ta?void 0:JD(Ta,v=>{t(v),a(!1)}),[]);const l=(g,v)=>QD(Ta,g,v),c=(g,v)=>YD(Ta,g,v),d=()=>_N(Ta,new Ss),p=()=>WD(Ta);return I.jsx(gw.Provider,{value:{user:e,loading:i,signin:l,signup:c,signinGoogle:d,logout:p},children:r})}function e_(){return G.useContext(gw)}function eO(){const{signin:r,signup:e,signinGoogle:t}=e_(),[i,a]=G.useState(!1),[l,c]=G.useState(""),[d,p]=G.useState(""),[g,v]=G.useState(""),[T,S]=G.useState(!1),R=async C=>{C.preventDefault(),v(""),S(!0);try{i?await e(l,d):await r(l,d)}catch(j){v(j.message.replace("Firebase: ",""))}finally{S(!1)}},x=async()=>{v(""),S(!0);try{await t()}catch(C){v(C.message.replace("Firebase: ",""))}finally{S(!1)}};return I.jsxs("div",{className:"auth-container",children:[I.jsxs("div",{className:"auth-header",children:[I.jsx("div",{className:"auth-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"auth-title",children:"Lock-In"})]}),I.jsx("button",{className:"auth-google-btn",onClick:x,disabled:T,children:"Sign in with Google"}),I.jsx("div",{className:"auth-divider",children:I.jsx("span",{children:"or"})}),I.jsxs("form",{onSubmit:R,className:"auth-form",children:[I.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:C=>c(C.target.value),className:"auth-input",required:!0}),I.jsx("input",{type:"password",placeholder:"Password",value:d,onChange:C=>p(C.target.value),className:"auth-input",minLength:6,required:!0}),g&&I.jsx("div",{className:"auth-error",children:g}),I.jsx("button",{type:"submit",className:"auth-btn",disabled:T,children:T?"...":i?"Create Account":"Sign In"})]}),I.jsx("button",{className:"auth-toggle",onClick:()=>{a(!i),v("")},children:i?"Already have an account? Sign in":"Need an account? Sign up"})]})}function tO({children:r}){const{user:e,loading:t}=e_();return t?I.jsx("div",{className:"loading",children:"loading..."}):e?r:I.jsx(eO,{})}const Va={prayer:{bg:"rgba(34, 139, 34, 0.12)",border:"#22a845",text:"#22a845"},spiritual:{bg:"rgba(234, 179, 8, 0.10)",border:"#ca8a04",text:"#ca8a04"},course:{bg:"rgba(37, 99, 235, 0.10)",border:"#2563eb",text:"#2563eb"},study:{bg:"rgba(8, 145, 178, 0.10)",border:"#0891b2",text:"#0891b2"},work:{bg:"rgba(180, 83, 9, 0.10)",border:"#b45309",text:"#b45309"},project:{bg:"rgba(124, 58, 237, 0.10)",border:"#7c3aed",text:"#7c3aed"},sport:{bg:"rgba(220, 38, 38, 0.10)",border:"#dc2626",text:"#dc2626"},therapy:{bg:"rgba(219, 39, 119, 0.10)",border:"#db2777",text:"#db2777"},rest:{bg:"rgba(100, 116, 139, 0.08)",border:"#64748b",text:"#64748b"},neutral:{bg:"rgba(163, 163, 163, 0.06)",border:"#a3a3a3",text:"#a3a3a3"}},yw=Object.keys(Va),nO=yw,iO=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function sO(r){const e=Math.floor(r/60)%24,t=Math.round(r%60),i=e>=12?"PM":"AM";return`${e%12||12}:${String(t).padStart(2,"0")} ${i}`}const Sl=["#2d8a4e","#0055a4","#7c3aed","#b45309","#dc2626","#db2777","#0891b2","#64748b"],_w=()=>{const r={};return iO.forEach(e=>{r[e]={blocks:[]}}),r},t_=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function n_(r){const[e,t,i]=r.split("-").map(Number);return new Date(e,t-1,i)}function i_(r){const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0");return`${e}-${t}-${i}`}function oc(){return i_(new Date)}function rO(r){const e=(r.getDay()+6)%7;return t_[e]}function vw(r,e,t){return r>=e&&r<=t}function ud(r){return n_(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function aO(r,e){return`${ud(r)}  ${ud(e)}`}function oO(r){const[e,t,i]=r.split("-");return`${i}-${t}-${e}`}function lO(r,e){const t=n_(r),i=(t.getDay()+6)%7,l=t_.indexOf(e)-i,c=new Date(t);return c.setDate(c.getDate()+l),i_(c)}function uO(r,e){const t=[],i=new Date(r,e,1);for(;i.getMonth()===e;)t.push({iso:i_(i),date:new Date(i)}),i.setDate(i.getDate()+1);return t}const cO=new Date().getFullYear(),hO={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};function O0(r){const e=r.trim().match(/^(\w{3})\s+(\d{1,2})$/);if(!e)return null;const t=hO[e[1]],i=parseInt(e[2],10);if(t==null||isNaN(i))return null;const a=new Date(cO,t,i),l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${l}-${c}-${d}`}function fO(r){if(!r)return{startDate:"",endDate:""};const e=r.split(/\u2192|->||/).map(a=>a.trim()),t=O0(e[0]),i=e[1]?O0(e[1]):t;return{startDate:t||"",endDate:i||""}}function dO(r){return{id:r.id||crypto.randomUUID(),activity:r.activity||"",type:r.type||"neutral",icon:r.icon||"",duration:r.duration||60,segment:null,offsetMinutes:0,time:r.time||"08:00",tasks:[]}}function mO(r,e){var c;const{startDate:t,endDate:i}=fO(r.dates),a={},l=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const d of l){const p=(c=r.days)==null?void 0:c[d];a[d]={blocks:((p==null?void 0:p.blocks)||[]).map(dO)}}return{id:r.id||crypto.randomUUID(),label:r.label||`Plan ${e+1}`,color:Sl[e%Sl.length],startDate:t,endDate:i,order:r.order??e,routine:a}}function pO(){const e=localStorage.getItem("entrypoint-v2-tabs");if(!e)return null;try{const t=JSON.parse(e);return!Array.isArray(t)||t.length===0?null:t.map(mO)}catch{return null}}function gO(){const r=!!localStorage.getItem("entrypoint-v2-tabs"),e=!!localStorage.getItem("entrypoint-v2-plans");return r&&!e}const cd="entrypoint-v2-plans",yO="entrypoint-v2-tabs";function P0(){if(gO()){const r=pO();if(r)return Ew(r),r}try{const r=localStorage.getItem(cd);if(r){const e=JSON.parse(r);if(Array.isArray(e)&&e.length>0)return e}}catch{}return[]}function Ew(r){localStorage.setItem(cd,JSON.stringify(r))}async function _O(r){const e=`entrypoint-v2-migrated-${r}`;if(localStorage.getItem(e))return;let t=null;try{const i=localStorage.getItem(cd);if(i){const a=JSON.parse(i);Array.isArray(a)&&a.length>0&&(t=a)}}catch{}if(t&&t.length>0){const i=pw(Gt);for(const a of t)i.set(_n(Gt,"users",r,"plans",a.id),{...a});await i.commit()}localStorage.setItem(e,"1"),localStorage.removeItem(cd),localStorage.removeItem(yO)}function vO(){const[r,e]=G.useState(()=>P0()),[t,i]=G.useState(()=>{var S;return((S=P0()[0])==null?void 0:S.id)||null}),a=r.find(S=>S.id===t)||r[0]||null;a&&t!==a.id&&i(a.id);const l=G.useCallback(S=>{e(R=>{const x=typeof S=="function"?S(R):S;return Ew(x),x})},[]),c=G.useCallback(S=>{const R=crypto.randomUUID(),x={id:R,label:S.label||"New Plan",color:S.color||Sl[0],startDate:S.startDate||"",endDate:S.endDate||"",order:S.order??r.length,routine:S.routine||_w()};return l(C=>[...C,x]),i(R),R},[l,r.length]),d=G.useCallback((S,R)=>{l(x=>x.map(C=>C.id===S?{...C,...R}:C))},[l]),p=G.useCallback(S=>{l(R=>R.filter(x=>x.id!==S)),t===S&&i(null)},[t,l]),g=G.useCallback((S,R,x)=>{const C=S||(a==null?void 0:a.id);C&&l(j=>j.map(Q=>Q.id===C?{...Q,routine:{...Q.routine,[R]:{...Q.routine[R],blocks:x}}}:Q))},[a,l]),v=G.useCallback(S=>r.find(R=>R.startDate&&R.endDate&&vw(S,R.startDate,R.endDate))||null,[r]),T=G.useCallback(S=>{const R=new Set(r.map(C=>C.id)),x=S.filter(C=>!R.has(C.id));x.length!==0&&l(C=>[...C,...x.map((j,Q)=>({...j,order:C.length+Q}))])},[r,l]);return{plans:r,loading:!1,activePlan:a,activePlanId:t,setActivePlanId:i,createPlan:c,updatePlan:d,deletePlan:p,updateRoutineBlocks:g,getPlanForDate:v,mergePlans:T}}function EO(r){const[e,t]=G.useState([]),[i,a]=G.useState(!0),[l,c]=G.useState(null),d=e.find(x=>x.id===l)||e[0]||null;d&&l!==d.id&&c(d.id),G.useEffect(()=>{if(!r){a(!1);return}_O(r).catch(()=>{});const x=uw(XI(Gt,"users",r,"plans"),cw("order"));return mw(x,j=>{t(j.docs.map(Q=>({id:Q.id,...Q.data()}))),a(!1)},()=>a(!1))},[r]),G.useEffect(()=>{e.length>0&&!l&&c(e[0].id)},[e,l]);const p=G.useCallback(async x=>{const C=crypto.randomUUID(),j={id:C,label:x.label||"New Plan",color:x.color||Sl[0],startDate:x.startDate||"",endDate:x.endDate||"",order:x.order??e.length,routine:x.routine||_w()};return await Fg(_n(Gt,"users",r,"plans",C),j),c(C),C},[r,e.length]),g=G.useCallback(async(x,C)=>{await yr(_n(Gt,"users",r,"plans",x),C)},[r]),v=G.useCallback(async x=>{await dw(_n(Gt,"users",r,"plans",x)),l===x&&c(null)},[r,l]),T=G.useCallback(async(x,C,j)=>{const Q=x||(d==null?void 0:d.id);Q&&await yr(_n(Gt,"users",r,"plans",Q),{[`routine.${C}.blocks`]:j})},[r,d]),S=G.useCallback(x=>e.find(C=>C.startDate&&C.endDate&&x>=C.startDate&&x<=C.endDate)||null,[e]),R=G.useCallback(async x=>{const C=new Set(e.map(re=>re.id)),j=x.filter(re=>!C.has(re.id));if(j.length===0)return;const Q=pw(Gt);j.forEach((re,oe)=>{const _e={...re,order:e.length+oe};Q.set(_n(Gt,"users",r,"plans",_e.id),_e)}),await Q.commit()},[r,e]);return{plans:e,loading:i,activePlan:d,activePlanId:l,setActivePlanId:c,createPlan:p,updatePlan:g,deletePlan:v,updateRoutineBlocks:T,getPlanForDate:S,mergePlans:R}}function TO(r){return Tl&&r?EO(r):vO()}const Tw="entrypoint-v2-pipelines";function SO(){try{const r=localStorage.getItem(Tw);if(r){const e=JSON.parse(r);if(Array.isArray(e))return e}}catch{}return[]}function bO(r){localStorage.setItem(Tw,JSON.stringify(r))}function AO(){const[r,e]=G.useState(()=>SO()),t=G.useCallback(S=>{e(R=>{const x=typeof S=="function"?S(R):S;return bO(x),x})},[]),i=G.useCallback(S=>{const R=crypto.randomUUID(),x={id:R,title:S||"New Section",order:r.length,collapsed:!1,items:[]};return t(C=>[...C,x]),R},[t,r.length]),a=G.useCallback((S,R)=>{t(x=>x.map(C=>C.id===S?{...C,...R}:C))},[t]),l=G.useCallback(S=>{t(R=>R.filter(x=>x.id!==S))},[t]),c=G.useCallback(S=>{t(S.map((R,x)=>({...R,order:x})))},[t]),d=G.useCallback(S=>{t(R=>R.map(x=>x.id===S?{...x,collapsed:!x.collapsed}:x))},[t]),p=G.useCallback((S,R)=>{const x={id:crypto.randomUUID(),icon:"",title:"",description:"",...R};t(C=>C.map(j=>j.id===S?{...j,items:[...j.items||[],x]}:j))},[t]),g=G.useCallback((S,R,x)=>{t(C=>C.map(j=>j.id===S?{...j,items:(j.items||[]).map(Q=>Q.id===R?{...Q,...x}:Q)}:j))},[t]),v=G.useCallback((S,R)=>{t(x=>x.map(C=>C.id===S?{...C,items:(C.items||[]).filter(j=>j.id!==R)}:C))},[t]),T=G.useCallback(S=>{const R=new Set(r.map(C=>C.id)),x=S.filter(C=>!R.has(C.id));x.length!==0&&t(C=>[...C,...x.map((j,Q)=>({...j,order:C.length+Q}))])},[r,t]);return{sections:r,loading:!1,addSection:i,updateSection:a,deleteSection:l,reorderSections:c,toggleCollapse:d,addItem:p,updateItem:g,deleteItem:v,mergeSections:T}}function IO(r){const[e,t]=G.useState([]),[i,a]=G.useState(!0);G.useEffect(()=>{if(!r){a(!1);return}const x=uw(XI(Gt,"users",r,"pipelines"),cw("order"));return mw(x,j=>{t(j.docs.map(Q=>({id:Q.id,...Q.data()}))),a(!1)},()=>a(!1))},[r]);const l=G.useCallback(async x=>{const C=crypto.randomUUID(),j={id:C,title:x||"New Section",order:e.length,collapsed:!1,items:[]};return await Fg(_n(Gt,"users",r,"pipelines",C),j),C},[r,e.length]),c=G.useCallback(async(x,C)=>{await yr(_n(Gt,"users",r,"pipelines",x),C)},[r]),d=G.useCallback(async x=>{await dw(_n(Gt,"users",r,"pipelines",x))},[r]),p=G.useCallback(async x=>{for(let C=0;C<x.length;C++)await yr(_n(Gt,"users",r,"pipelines",x[C].id),{order:C})},[r]),g=G.useCallback(async x=>{const C=e.find(j=>j.id===x);C&&await yr(_n(Gt,"users",r,"pipelines",x),{collapsed:!C.collapsed})},[r,e]),v=G.useCallback(async(x,C)=>{const j=e.find(re=>re.id===x);if(!j)return;const Q={id:crypto.randomUUID(),icon:"",title:"",description:"",...C};await yr(_n(Gt,"users",r,"pipelines",x),{items:[...j.items||[],Q]})},[r,e]),T=G.useCallback(async(x,C,j)=>{const Q=e.find(re=>re.id===x);Q&&await yr(_n(Gt,"users",r,"pipelines",x),{items:(Q.items||[]).map(re=>re.id===C?{...re,...j}:re)})},[r,e]),S=G.useCallback(async(x,C)=>{const j=e.find(Q=>Q.id===x);j&&await yr(_n(Gt,"users",r,"pipelines",x),{items:(j.items||[]).filter(Q=>Q.id!==C)})},[r,e]),R=G.useCallback(async x=>{const C=new Set(e.map(Q=>Q.id)),j=x.filter(Q=>!C.has(Q.id));if(j.length!==0)for(let Q=0;Q<j.length;Q++){const re={...j[Q],order:e.length+Q};await Fg(_n(Gt,"users",r,"pipelines",re.id),re)}},[r,e]);return{sections:e,loading:i,addSection:l,updateSection:c,deleteSection:d,reorderSections:p,toggleCollapse:g,addItem:v,updateItem:T,deleteItem:S,mergeSections:R}}function wO(r){return Tl&&r?IO(r):AO()}function RO(){const[r,e]=G.useState(oc()),t=oc(),[i,a]=G.useState(()=>new Date().getFullYear()),[l,c]=G.useState(()=>new Date().getMonth()),d=G.useCallback(()=>{c(T=>T===0?(a(S=>S-1),11):T-1)},[]),p=G.useCallback(()=>{c(T=>T===11?(a(S=>S+1),0):T+1)},[]),g=G.useCallback(()=>{const T=new Date;a(T.getFullYear()),c(T.getMonth()),e(oc())},[]),v=G.useCallback((T,S)=>{a(T),c(S)},[]);return{selectedDate:r,setSelectedDate:e,today:t,viewYear:i,setViewYear:a,viewMonth:l,setViewMonth:c,prevMonth:d,nextMonth:p,goToday:g,setViewYearMonth:v}}const Sw="entrypoint-v2-custom-types",CO=["#0d9488","#84cc16","#e11d48","#6366f1","#f97316","#06b6d4","#a21caf","#65a30d","#be185d","#1d4ed8","#c026d3","#ea580c","#0f766e","#4f46e5","#15803d","#9333ea"],DO=new Set(Object.values(Va).map(r=>r.border.toLowerCase())),sg=CO.filter(r=>!DO.has(r.toLowerCase()));function NO(r){if(r.startsWith("hsl"))return{bg:r.replace(")",", 0.10)").replace("hsl(","hsla("),border:r,text:r};const e=parseInt(r.slice(1,3),16),t=parseInt(r.slice(3,5),16),i=parseInt(r.slice(5,7),16);return{bg:`rgba(${e}, ${t}, ${i}, 0.10)`,border:r,text:r}}function xO(r){if(r<sg.length)return sg[r];const e=((r-sg.length)*137.5+30)%360;return`hsl(${Math.round(e)}, 65%, 50%)`}function VO(){try{const r=localStorage.getItem(Sw);return r?JSON.parse(r).map(t=>({key:t.key,name:t.name})):[]}catch{return[]}}function rg(r){localStorage.setItem(Sw,JSON.stringify(r.map(e=>({key:e.key,name:e.name}))))}function MO(){const[r,e]=G.useState(VO),t=G.useMemo(()=>r.map((d,p)=>{const g=xO(p);return{...d,color:g,colors:NO(g)}}),[r]),i=G.useCallback(d=>{const p=d.toLowerCase().replace(/\s+/g,"-");return e(g=>{if(g.find(T=>T.key===p))return g;const v=[...g,{key:p,name:d}];return rg(v),v}),p},[]),a=G.useCallback(d=>{e(p=>{const g=p.filter(v=>v.key!==d);return rg(g),g})},[]),l=G.useCallback(d=>{e(p=>{const g=new Set(p.map(S=>S.key)),v=d.filter(S=>!g.has(S.key));if(v.length===0)return p;const T=[...p,...v.map(S=>({key:S.key,name:S.name}))];return rg(T),T})},[]),c=G.useMemo(()=>t.reduce((d,p)=>(d[p.key]=p.colors,d),{}),[t]);return{customTypes:t,customTypeColors:c,addCustomType:i,removeCustomType:a,mergeCustomTypes:l}}const bw="entrypoint-v2-location";function OO(){try{const r=localStorage.getItem(bw);return r?JSON.parse(r):null}catch{return null}}function PO(r){localStorage.setItem(bw,JSON.stringify(r))}function kO(){const[r,e]=G.useState(OO),t=G.useCallback(({city:i,country:a})=>{const l={city:i,country:a};PO(l),e(l)},[]);return{location:r,setLocation:t,hasLocation:!!r}}function Aw({title:r,message:e,confirmLabel:t="Delete",onConfirm:i,onClose:a}){return G.useEffect(()=>{const l=c=>{c.key==="Escape"&&a()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[a]),I.jsx("div",{className:"modal-overlay",onClick:a,children:I.jsxs("div",{className:"modal",onClick:l=>l.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:r}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 20px",lineHeight:1.5},children:e}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{className:"btn-secondary",onClick:a,children:"Cancel"}),I.jsx("button",{className:"btn-danger",onClick:i,children:t})]})]})})}function LO({plans:r,activePlanId:e,onSelect:t,onCreate:i,onEdit:a,onDelete:l}){const[c,d]=G.useState(null),[p,g]=G.useState(null),v=G.useRef(null);G.useEffect(()=>{if(!c)return;const R=x=>{x.key==="Escape"&&d(null)};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[c]);const T=(R,x)=>{R.preventDefault(),d({x:R.clientX,y:R.clientY,plan:x})},S=R=>{const x=v.current;x&&x.scrollWidth>x.clientWidth&&(R.preventDefault(),x.scrollLeft+=R.deltaY)};return I.jsxs("div",{className:"plan-sidebar",children:[I.jsxs("div",{className:"plan-list",ref:v,onWheel:S,children:[r.map(R=>I.jsxs("button",{className:`plan-item ${R.id===e?"active":""}`,onClick:()=>t(R.id),onContextMenu:x=>T(x,R),children:[I.jsx("span",{className:"plan-dot",style:{background:R.color}}),I.jsxs("div",{className:"plan-info",children:[I.jsx("span",{className:"plan-label",children:R.label}),R.startDate&&R.endDate&&I.jsx("span",{className:"plan-dates",children:aO(R.startDate,R.endDate)})]})]},R.id)),I.jsx("button",{className:"plan-item plan-add",onClick:i,children:"+ New Plan"})]}),c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:()=>d(null)}),I.jsxs("div",{className:"context-menu",style:{top:c.y,left:c.x},children:[I.jsx("button",{onClick:()=>{a(c.plan),d(null)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{g(c.plan),d(null)},children:"Delete"})]})]}),p&&I.jsx(Aw,{title:"Delete Plan",message:`Delete "${p.label}"? This cannot be undone.`,onConfirm:()=>{l(p.id),g(null)},onClose:()=>g(null)})]})}function UO(r,e,t,i){if(!r||!e)return null;for(const a of t)if(a.id!==i&&!(!a.startDate||!a.endDate)&&r<=a.endDate&&e>=a.startDate)return a;return null}function k0({plan:r,plans:e=[],onSave:t,onClose:i}){const a=!!r,[l,c]=G.useState((r==null?void 0:r.label)||""),[d,p]=G.useState((r==null?void 0:r.color)||Sl[0]),[g,v]=G.useState((r==null?void 0:r.startDate)||""),[T,S]=G.useState((r==null?void 0:r.endDate)||""),[R,x]=G.useState(""),C=j=>{if(j.preventDefault(),x(""),T<g){x("End date must be after start date.");return}const Q=UO(g,T,e,r==null?void 0:r.id);if(Q){x(`Overlaps with "${Q.label}" (${Q.startDate}  ${Q.endDate}).`);return}t({label:l.trim(),color:d,startDate:g,endDate:T})};return I.jsx("div",{className:"modal-overlay",onClick:i,onKeyDown:j=>{j.key==="Escape"&&i()},children:I.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),children:[I.jsx("h3",{className:"modal-title",children:a?"Edit Plan":"New Plan"}),I.jsxs("form",{onSubmit:C,className:"modal-form",children:[I.jsxs("label",{className:"modal-label",children:["Label",I.jsx("input",{className:"modal-input",value:l,onChange:j=>c(j.target.value),placeholder:"e.g. Ramadan",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start Date",I.jsx("input",{className:"modal-input",type:"date",value:g,onChange:j=>v(j.target.value),required:!0})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End Date",I.jsx("input",{className:"modal-input",type:"date",value:T,onChange:j=>S(j.target.value),required:!0})]})]}),R&&I.jsx("div",{className:"plan-error",children:R}),I.jsxs("div",{className:"modal-label",children:["Color",I.jsx("div",{className:"color-grid",children:Sl.map(j=>I.jsx("button",{type:"button",className:`color-btn ${d===j?"active":""}`,style:{background:j},onClick:()=>p(j)},j))})]}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const jO=["January","February","March","April","May","June","July","August","September","October","November","December"],zO=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function BO({viewYear:r,viewMonth:e,selectedDate:t,today:i,plans:a,highlightDate:l,onPrevMonth:c,onNextMonth:d,onGoToday:p,onSelectDate:g,onPlanClick:v}){const T=G.useMemo(()=>{const R=uO(r,e),x=(R[0].date.getDay()+6)%7;return[...Array.from({length:x},()=>null),...R]},[r,e]),S=G.useMemo(()=>{const R={};for(const x of T){if(!x)continue;const C=a.find(j=>j.startDate&&j.endDate&&vw(x.iso,j.startDate,j.endDate));C&&(R[x.iso]=C)}return R},[T,a]);return I.jsxs("div",{className:"calendar-view",children:[I.jsxs("div",{className:"cal-header",children:[I.jsx("button",{className:"cal-nav",onClick:c,children:""}),I.jsxs("div",{className:"cal-title",children:[I.jsx("span",{className:"cal-month",children:jO[e]}),I.jsx("span",{className:"cal-year",children:r})]}),I.jsx("button",{className:"cal-nav",onClick:d,children:""}),I.jsx("button",{className:"cal-today-btn",onClick:p,children:"Today"})]}),I.jsxs("div",{className:"cal-grid",children:[zO.map(R=>I.jsx("div",{className:"cal-dow",children:R},R)),T.map((R,x)=>{if(!R)return I.jsx("div",{className:"cal-cell cal-blank"},`blank-${x}`);const C=S[R.iso],j=R.iso===i,Q=R.iso===t,re=R.iso===l;return I.jsxs("button",{className:`cal-cell ${j?"cal-today":""} ${Q?"cal-selected":""} ${C?"cal-has-plan":""} ${re?"cal-highlight":""}`,style:C?{"--plan-color":C.color}:void 0,onClick:()=>g(R.iso),children:[I.jsx("span",{className:"cal-day-num",children:R.date.getDate()}),C&&I.jsx("span",{className:"cal-plan-dot",style:{background:C.color}})]},R.iso)})]}),a.length>0&&I.jsx("div",{className:"cal-plan-legend",children:a.filter(R=>R.startDate&&R.endDate).map(R=>I.jsxs("button",{className:"cal-plan-chip",onClick:()=>v==null?void 0:v(R),children:[I.jsx("span",{className:"cal-plan-chip-dot",style:{background:R.color}}),I.jsx("span",{children:R.label})]},R.id))})]})}const Qi=60,hd=5,ju=15,zu=52,L0=8;function Fo(r){return Math.max(0,Math.min(1435,Math.round(r/hd)*hd))}function $i(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function U0({block:r,top:e,height:t,col:i=0,totalCols:a=1,isNew:l,isPrayer:c,extraTypeColors:d={},onEdit:p,onDelete:g,onTimeChange:v,onResize:T,onToggleTask:S}){var me;const R=G.useRef(null),x=G.useRef(null),C=G.useRef(null),j=G.useRef(null),[Q,re]=G.useState(null),oe=Va[r.type]||d[r.type]||Va.neutral,_e=c?"#2d8a4e":oe.text==="#94a3b8"?"#b0b0ba":oe.text,ve=r.type==="prayer"||c?600:400,he=e/Qi*60,D=t/Qi*60,A=$i(Math.min(he+D,1440)),N=r.time,P=`calc(100% - ${zu}px - ${L0}px)`,M=c?P:`calc((${P}) / ${a})`,U=c?`${zu}px`:`calc(${zu}px + (${P}) * ${i} / ${a})`,V=G.useCallback((ie,pe)=>{const Re=R.current,Pe=x.current;if(Re){if(pe==="move"){const le=e+ie;Re.style.top=`${le}px`,Re.style.left=`${zu}px`,Re.style.width=`calc(100% - ${zu}px - ${L0}px)`,Re.style.zIndex="100",Re.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Re.style.opacity="0.85",Re.style.cursor="grabbing";const Ne=Fo((e+ie)/Qi*60);Pe&&(Pe.textContent=`${$i(Ne)}  ${$i(Math.min(Ne+D,1440))}`)}else if(pe==="top"){const le=e+ie,Ne=Math.max(t-ie,ju/60*Qi);Re.style.top=`${le}px`,Re.style.height=`${Math.max(Ne,24)}px`,Re.style.zIndex="100",Re.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Re.style.opacity="0.85";const Ye=Fo(he+ie/Qi*60);Pe&&(Pe.textContent=`${$i(Ye)}  ${$i(Math.min(he+D,1440))}`)}else if(pe==="bottom"){const le=Math.max(t+ie,ju/60*Qi);Re.style.height=`${Math.max(le,24)}px`,Re.style.zIndex="100",Re.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Re.style.opacity="0.85";const Ne=he+Math.max(ju,Fo(D+ie/Qi*60));Pe&&(Pe.textContent=`${$i(he)}  ${$i(Math.min(Ne,1440))}`)}}},[e,t,he,D]),Ke=G.useCallback(()=>{const ie=R.current;ie&&(ie.style.top=`${e}px`,ie.style.height=`${Math.max(t,24)}px`,ie.style.left=U,ie.style.width=M,ie.style.zIndex=c?"10":"1",ie.style.boxShadow="none",ie.style.opacity="1",ie.style.cursor=c?"default":"pointer",x.current&&(x.current.textContent=`${N}  ${A}`))},[e,t,U,M,N,A,c]);G.useEffect(()=>{x.current&&(x.current.textContent=`${N}  ${A}`)},[N,A]);const $e=ie=>{c||ie.button!==0||(C.current={y:ie.clientY,mode:"move",moved:!1},R.current.setPointerCapture(ie.pointerId))},J=ie=>{if(!C.current)return;const pe=ie.clientY-C.current.y;!C.current.moved&&Math.abs(pe)>4&&(C.current.moved=!0),C.current.moved&&(j.current&&cancelAnimationFrame(j.current),j.current=requestAnimationFrame(()=>V(pe,C.current.mode)))},ue=ie=>{if(!C.current)return;const pe=ie.clientY-C.current.y,{mode:Re,moved:Pe}=C.current;if(C.current=null,j.current&&cancelAnimationFrame(j.current),Ke(),!Pe){c||p(r);return}if(Re==="move"){const le=Fo((e+pe)/Qi*60);v(r.id,$i(le))}else if(Re==="top"){const le=Fo(he+pe/Qi*60),Ne=Math.max(ju,Math.round((he+D-le)/hd)*hd);T(r.id,$i(le),Ne)}else if(Re==="bottom"){const le=Math.max(ju,Fo(D+pe/Qi*60));T(r.id,$i(he),le)}},Ee=ie=>pe=>{c||(pe.stopPropagation(),pe.button===0&&(C.current={y:pe.clientY,mode:ie,moved:!0},pe.target.setPointerCapture(pe.pointerId)))},Ve=ie=>{c||(ie.preventDefault(),ie.stopPropagation(),re({x:ie.clientX,y:ie.clientY}))},Ue=()=>re(null);G.useEffect(()=>{if(!Q)return;const ie=pe=>{pe.key==="Escape"&&Ue()};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[Q]);const k=!c&&((me=r.tasks)==null?void 0:me.length)>0,ee=k?r.tasks.filter(ie=>ie.done).length:0,Y=t<36,ae=k&&t>=60;return I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:R,className:`timeline-block ${l?"new-block":""} ${c?"prayer-block":""}`,style:{top:e,height:Math.max(t,24),left:U,width:M,right:"auto",background:c?"rgba(34, 139, 34, 0.10)":oe.bg,borderLeft:`3px solid ${c?"#2d8a4e":oe.border}`,zIndex:c?10:1,cursor:c?"default":"pointer",transition:"box-shadow 0.15s"},onPointerDown:$e,onPointerMove:J,onPointerUp:ue,onContextMenu:Ve,children:[!c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"resize-handle resize-handle-top",onPointerDown:Ee("top"),onPointerMove:J,onPointerUp:ue}),I.jsx("div",{className:"resize-handle resize-handle-bottom",onPointerDown:Ee("bottom"),onPointerMove:J,onPointerUp:ue})]}),Y?I.jsxs("div",{className:"block-compact",children:[I.jsxs("span",{ref:x,className:"block-time-sm",children:[N,"  ",A]}),I.jsx("span",{className:"block-icon-sm",children:r.icon}),I.jsx("span",{className:"block-act-sm",style:{color:_e,fontWeight:ve},children:r.activity}),k&&I.jsxs("span",{className:"block-task-badge",children:[ee,"/",r.tasks.length]})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:x,className:"block-time-sm",children:[N,"  ",A]}),I.jsxs("div",{className:"block-row",children:[I.jsx("span",{className:"block-icon-sm",children:r.icon}),I.jsx("span",{className:"block-act",style:{color:_e,fontWeight:ve},children:r.activity}),k&&!ae&&I.jsxs("span",{className:"block-task-badge",children:[ee,"/",r.tasks.length]})]}),ae&&I.jsx("div",{className:"block-tasks",onWheel:ie=>{const pe=ie.currentTarget;pe.scrollHeight>pe.clientHeight&&ie.stopPropagation()},children:r.tasks.map(ie=>I.jsxs("label",{className:`block-task-item ${ie.done?"done":""}`,onPointerDown:pe=>pe.stopPropagation(),onClick:pe=>pe.stopPropagation(),children:[I.jsx("input",{type:"checkbox",checked:ie.done,onChange:()=>S==null?void 0:S(r.id,ie.id)}),I.jsx("span",{children:ie.text})]},ie.id))})]})]}),Q&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:ie=>{ie.stopPropagation(),Ue()}}),I.jsxs("div",{className:"context-menu",style:{top:Q.y,left:Q.x},onClick:ie=>ie.stopPropagation(),children:[I.jsx("button",{onClick:()=>{Ue(),p(r)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{Ue(),g(r.id)},children:"Delete"})]})]})]})}const qO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function j0(r){return`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function FO({block:r,defaultTime:e,segments:t,onSave:i,onDelete:a,onClose:l,customTypes:c=[],customTypeColors:d={},onAddCustomType:p,onRemoveCustomType:g}){G.useEffect(()=>{if(!r)return;const Y=ae=>{ae.key==="Delete"&&(ae.preventDefault(),a(r.id))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[r,a]);const v=!!r,T=(r==null?void 0:r.time)||e||"08:00",S=(r==null?void 0:r.duration)||60,[R,x]=G.useState(T),[C,j]=G.useState(()=>{const[Y,ae]=T.split(":").map(Number),me=Y*60+ae+S;return j0(me)}),[Q,re]=G.useState((r==null?void 0:r.activity)||""),[oe,_e]=G.useState((r==null?void 0:r.type)||"neutral"),[ve,he]=G.useState((r==null?void 0:r.icon)||""),[D,A]=G.useState((r==null?void 0:r.tasks)||[]),[N,P]=G.useState(""),[M,U]=G.useState(!1),[V,Ke]=G.useState(!1),[$e,J]=G.useState(""),ue=new Set(c.map(Y=>Y.key)),Ee=[...nO,...c.map(Y=>Y.key)],Ve={...Va,...d},Ue=Ve[oe]||Va.neutral,k=()=>{const[Y,ae]=R.split(":").map(Number),[me,ie]=C.split(":").map(Number);return Math.max(15,me*60+ie-(Y*60+ae))},ee=Y=>{Y.preventDefault(),i({id:(r==null?void 0:r.id)||crypto.randomUUID(),time:R,activity:Q.trim(),type:oe,icon:ve,duration:k(),segment:null,offsetMinutes:0,tasks:D})};return I.jsx("div",{className:"modal-overlay",onClick:l,onKeyDown:Y=>{Y.key==="Escape"&&l()},children:I.jsxs("div",{className:"modal",onClick:Y=>{Y.stopPropagation(),M&&U(!1)},children:[I.jsx("h3",{className:"modal-title",children:v?"Edit Block":"Add Block"}),I.jsxs("form",{onSubmit:ee,className:"modal-form",children:[I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start",I.jsx("input",{className:"modal-input",value:R,onChange:Y=>{const ae=Y.target.value;x(ae);const[me,ie]=R.split(":").map(Number),[pe,Re]=C.split(":").map(Number),Pe=pe*60+Re-(me*60+ie);if(Pe>0&&/^\d{2}:\d{2}$/.test(ae)){const[le,Ne]=ae.split(":").map(Number);j(j0(le*60+Ne+Pe))}},placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End",I.jsx("input",{className:"modal-input",value:C,onChange:Y=>j(Y.target.value),placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]})]}),I.jsxs("label",{className:"modal-label",children:["Activity",I.jsx("input",{className:"modal-input",value:Q,onChange:Y=>re(Y.target.value),placeholder:"e.g. Quran revision",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-label",children:["Type",I.jsxs("div",{className:"modal-row",style:{gap:6,alignItems:"center"},children:[I.jsxs("div",{className:"type-picker",style:{flex:1},onClick:Y=>Y.stopPropagation(),children:[I.jsxs("button",{type:"button",className:"type-picker-btn",onClick:()=>U(Y=>!Y),children:[I.jsx("span",{className:"type-color-dot",style:{background:Ue.border}}),I.jsx("span",{children:oe.charAt(0).toUpperCase()+oe.slice(1).replace(/-/g," ")}),I.jsx("span",{className:"type-picker-arrow",children:M?"":""})]}),M&&I.jsx("div",{className:"type-dropdown",children:Ee.map(Y=>{const ae=Ve[Y]||Va.neutral,me=ue.has(Y);return I.jsxs("div",{className:`type-dropdown-item${Y===oe?" active":""}`,children:[I.jsxs("button",{type:"button",className:"type-dropdown-select",onClick:()=>{_e(Y),U(!1)},children:[I.jsx("span",{className:"type-color-dot",style:{background:ae.border}}),I.jsx("span",{children:Y.charAt(0).toUpperCase()+Y.slice(1).replace(/-/g," ")})]}),me&&g&&I.jsx("button",{type:"button",className:"type-delete-btn",onClick:()=>{g(Y),oe===Y&&_e("neutral")},children:""})]},Y)})})]}),I.jsx("button",{type:"button",className:"btn-add-type",onClick:()=>Ke(Y=>!Y),title:"Add custom type",children:"+"})]})]}),V&&I.jsxs("div",{className:"new-type-form",children:[I.jsx("input",{className:"modal-input",placeholder:"Type name",value:$e,onChange:Y=>J(Y.target.value),onKeyDown:Y=>{if(Y.key==="Enter"&&$e.trim()&&p){Y.preventDefault();const ae=p($e.trim());_e(ae),J(""),Ke(!1)}}}),I.jsx("button",{type:"button",className:"btn-primary btn-sm",disabled:!$e.trim(),onClick:()=>{if(!$e.trim()||!p)return;const Y=p($e.trim());_e(Y),J(""),Ke(!1)},children:"Add"})]}),I.jsxs("div",{className:"modal-label",children:["Icon",I.jsx("div",{className:"icon-grid",children:qO.map(Y=>I.jsx("button",{type:"button",className:`icon-btn ${ve===Y?"active":""}`,onClick:()=>he(Y),children:Y},Y))})]}),I.jsxs("div",{className:"modal-label",children:["Tasks",I.jsxs("div",{className:"task-list-editor",children:[D.map((Y,ae)=>I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{type:"checkbox",checked:Y.done,onChange:()=>{const me=[...D];me[ae]={...Y,done:!Y.done},A(me)}}),I.jsx("input",{className:`modal-input task-edit-input${Y.done?" task-done":""}`,value:Y.text,onChange:me=>{const ie=[...D];ie[ae]={...Y,text:me.target.value},A(ie)}}),I.jsx("button",{type:"button",className:"task-remove-btn",onClick:()=>A(D.filter((me,ie)=>ie!==ae)),children:""})]},Y.id)),I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{className:"modal-input task-edit-input",placeholder:"Add task...",value:N,onChange:Y=>P(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&N.trim()&&(Y.preventDefault(),A([...D,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),P(""))}}),I.jsx("button",{type:"button",className:"task-add-btn",disabled:!N.trim(),onClick:()=>{N.trim()&&(A([...D,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),P(""))},children:"+"})]})]})]}),I.jsxs("div",{className:"modal-actions",children:[v&&I.jsx("button",{type:"button",className:"btn-danger",onClick:()=>a(r.id),children:"Delete"}),I.jsx("div",{style:{flex:1}}),I.jsx("button",{type:"button",className:"btn-secondary",onClick:l,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const HO=["","","","","","","","","","","","","","","",""];function GO({value:r,onChange:e}){const[t,i]=G.useState(!1),a=G.useRef(null);return G.useEffect(()=>{if(!t)return;const l=c=>{a.current&&!a.current.contains(c.target)&&i(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[t]),I.jsxs("div",{className:"pipeline-emoji-picker",ref:a,children:[I.jsx("button",{className:"pipeline-emoji-btn",onClick:()=>i(!t),children:r||""}),t&&I.jsx("div",{className:"pipeline-emoji-grid",children:HO.map(l=>I.jsx("button",{className:"pipeline-emoji-option",onClick:()=>{e(l),i(!1)},children:l},l))})]})}function Gg({value:r,onChange:e,className:t,placeholder:i,singleClick:a}){const[l,c]=G.useState(!1),[d,p]=G.useState(r),g=G.useRef(null);G.useEffect(()=>{l&&g.current&&g.current.focus()},[l]);const v=()=>{c(!1),d.trim()!==r&&e(d.trim())},T=R=>{R.stopPropagation(),p(r),c(!0)};if(l)return I.jsx("input",{ref:g,className:`pipeline-inline-input ${t||""}`,value:d,placeholder:i,onClick:R=>R.stopPropagation(),onChange:R=>p(R.target.value),onBlur:v,onKeyDown:R=>{R.key==="Enter"&&v(),R.key==="Escape"&&(p(r),c(!1))}});const S=a?{onClick:T}:{onDoubleClick:T};return I.jsx("span",{className:`pipeline-inline-text ${t||""} ${r?"":"pipeline-placeholder"}`,...S,children:r||i})}function KO({item:r,sectionId:e,onUpdate:t,onDelete:i}){return I.jsxs("div",{className:"pipeline-item",children:[I.jsx(GO,{value:r.icon,onChange:a=>t(e,r.id,{icon:a})}),I.jsxs("div",{className:"pipeline-item-content",children:[I.jsx(Gg,{value:r.title,onChange:a=>t(e,r.id,{title:a}),className:"pipeline-item-title",placeholder:"Item title"}),I.jsx(Gg,{value:r.description,onChange:a=>t(e,r.id,{description:a}),className:"pipeline-item-desc",placeholder:"Description"})]}),I.jsx("button",{className:"pipeline-item-delete",onClick:()=>i(e,r.id),children:""})]})}function YO({sections:r,addSection:e,updateSection:t,deleteSection:i,toggleCollapse:a,addItem:l,updateItem:c,deleteItem:d}){const[p,g]=G.useState(null);return I.jsxs("div",{className:"pipeline-sections",children:[r.map(v=>I.jsxs("div",{className:"pipeline-section",children:[I.jsxs("div",{className:"pipeline-section-header",onClick:()=>a(v.id),children:[I.jsx("span",{className:"pipeline-collapse-btn",children:v.collapsed?"":""}),I.jsx(Gg,{value:v.title,onChange:T=>t(v.id,{title:T}),className:"pipeline-section-title",placeholder:"Section title",singleClick:!0}),I.jsx("button",{className:"pipeline-section-delete",onClick:T=>{T.stopPropagation(),g(v.id)},children:""})]}),!v.collapsed&&I.jsxs("div",{className:"pipeline-section-body",children:[(v.items||[]).map(T=>I.jsx(KO,{item:T,sectionId:v.id,onUpdate:c,onDelete:d},T.id)),I.jsx("button",{className:"pipeline-add-item",onClick:()=>l(v.id,{}),children:"+ Add"})]})]},v.id)),I.jsx("button",{className:"pipeline-add-section",onClick:()=>e("New Section"),children:"+ New Section"}),p&&I.jsx(Aw,{title:"Delete Section",message:"This will delete the section and all its items.",onConfirm:()=>{i(p),g(null)},onClose:()=>g(null)})]})}const Kg="prayerTimesCache";function Iw(r,e,t){return`${r}|${e}|${t}`}function ag(r,e,t){try{const i=localStorage.getItem(Kg);return i&&JSON.parse(i)[Iw(r,e,t)]||null}catch{return null}}function QO(r,e,t,i){try{const a=localStorage.getItem(Kg),l=a?JSON.parse(a):{};l[Iw(r,e,t)]=i;const c=Object.keys(l);c.length>30&&(c.sort(),delete l[c[0]]),localStorage.setItem(Kg,JSON.stringify(l))}catch{}}function $O({date:r,city:e="Lyon",country:t="France",method:i=12}={}){const a=r||oc(),[l,c]=G.useState(()=>ag(a,e,t)),[d,p]=G.useState(!ag(a,e,t)),[g,v]=G.useState(null);return G.useEffect(()=>{const T=ag(a,e,t);if(T){c(T),p(!1);return}let S=!1;p(!0);async function R(){try{const x=oO(a),j=await(await fetch(`https://api.aladhan.com/v1/timingsByCity/${x}?city=${encodeURIComponent(e)}&country=${encodeURIComponent(t)}&method=${i}`)).json();if(!S&&j.data){const Q=j.data.timings,re={Fajr:Q.Fajr,Dhuhr:Q.Dhuhr,Asr:Q.Asr,Maghrib:Q.Maghrib,Isha:Q.Isha};c(re),QO(a,e,t,re)}}catch(x){S||v(x.message)}finally{S||p(!1)}}return R(),()=>{S=!0}},[a,e,t,i]),{times:l,loading:d,error:g}}const XO=["pre-fajr","fajr-dhuhr","dhuhr-asr","asr-maghrib","maghrib-isha","post-isha"],JO={"pre-fajr":"Pre-Fajr","fajr-dhuhr":"Fajr  Dhuhr","dhuhr-asr":"Dhuhr  Asr","asr-maghrib":"Asr  Maghrib","maghrib-isha":"Maghrib  Isha","post-isha":"Post-Isha"};function Bu(r){const[e,t]=r.split(":").map(Number);return e*60+t}function WO(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function ZO(r){if(!r)return null;const e=Bu(r.Fajr),t=Bu(r.Dhuhr),i=Bu(r.Asr),a=Bu(r.Maghrib),l=Bu(r.Isha);return{"pre-fajr":{start:"00:00",end:r.Fajr,startMin:0,endMin:e},"fajr-dhuhr":{start:r.Fajr,end:r.Dhuhr,startMin:e,endMin:t},"dhuhr-asr":{start:r.Dhuhr,end:r.Asr,startMin:t,endMin:i},"asr-maghrib":{start:r.Asr,end:r.Maghrib,startMin:i,endMin:a},"maghrib-isha":{start:r.Maghrib,end:r.Isha,startMin:a,endMin:l},"post-isha":{start:r.Isha,end:"23:59",startMin:l,endMin:1439}}}function eP(r,e){if(!r.segment||!e||!e[r.segment])return r.time||"08:00";const i=e[r.segment].startMin+(r.offsetMinutes||0);return WO(Math.max(0,Math.min(1435,i)))}const qu=25;function tP(r){return r?[{id:"prayer-fajr",time:r.Fajr,activity:"Fajr",type:"prayer",icon:"",duration:qu,isPrayer:!0},{id:"prayer-dhuhr",time:r.Dhuhr,activity:"Dhuhr",type:"prayer",icon:"",duration:qu,isPrayer:!0},{id:"prayer-asr",time:r.Asr,activity:"Asr",type:"prayer",icon:"",duration:qu,isPrayer:!0},{id:"prayer-maghrib",time:r.Maghrib,activity:"Maghrib",type:"prayer",icon:"",duration:qu,isPrayer:!0},{id:"prayer-isha",time:r.Isha,activity:"Isha",type:"prayer",icon:"",duration:qu,isPrayer:!0}]:[]}const nP=60;function ww(r){const[e,t]=r.split(":").map(Number);return e*60+t}function iP(r){return r=Math.round(r),`${String(Math.floor(r/60)%24).padStart(2,"0")}:${String(r%60).padStart(2,"0")}`}function sP(r,e=5){return Math.max(0,Math.min(1435,Math.round(r/e)*e))}function rP(r){if(!r.length)return[];const e=r.map(p=>{const g=ww(p.time),v=p.duration||nP;return{...p,startMin:g,endMin:g+v}});e.sort((p,g)=>p.startMin-g.startMin||g.endMin-g.startMin-(p.endMin-p.startMin));const t=[],i=[];for(const p of e){let g=-1;for(let v=0;v<t.length;v++)if(t[v]<=p.startMin){g=v;break}g===-1&&(g=t.length,t.push(0)),t[g]=p.endMin,i.push({...p,col:g})}const a=[];let l=[],c=0;for(const p of i)l.length===0||p.startMin<c?(l.push(p),c=Math.max(c,p.endMin)):(a.push(l),l=[p],c=p.endMin);l.length&&a.push(l);const d=[];for(const p of a){const g=Math.max(...p.map(v=>v.col))+1;for(const v of p)d.push({...v,totalCols:g})}return d}const vi=60,z0=24,B0=60,aP=Array.from({length:24},(r,e)=>e),oP=["rgba(34, 139, 34, 0.03)","rgba(34, 139, 34, 0.06)"],q0={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},lP=["M","T","W","T","F","S","S"];function uP({date:r,plan:e,location:t,onOpenLocation:i,onUpdateBlocks:a,onMonth:l,onSelectDate:c,customTypes:d=[],customTypeColors:p={},onAddCustomType:g,onRemoveCustomType:v,pipelineSections:T=[],onAddSection:S,onUpdateSection:R,onDeleteSection:x,onToggleCollapse:C,onAddItem:j,onUpdateItem:Q,onDeleteItem:re}){var Re,Pe;const[oe,_e]=G.useState(null),[ve,he]=G.useState(null),D=G.useRef(null),A=rO(n_(r)),N=r===oc(),{times:P}=$O({date:r,city:t==null?void 0:t.city,country:t==null?void 0:t.country}),M=G.useMemo(()=>ZO(P),[P]),U=G.useMemo(()=>tP(P),[P]),V=((Pe=(Re=e==null?void 0:e.routine)==null?void 0:Re[A])==null?void 0:Pe.blocks)||[],Ke=G.useMemo(()=>V.map(le=>le.segment&&M?{...le,time:eP(le,M)}:le),[V,M]),$e=G.useMemo(()=>{const le=Ke.map(Ye=>({...Ye,duration:Ye.duration||B0}));return rP(le).map(Ye=>({...Ye,top:Ye.startMin/60*vi,height:Math.max(Ye.duration/60*vi,z0)}))},[Ke]),J=G.useMemo(()=>U.map(le=>{const Ne=ww(le.time);return{...le,startMin:Ne,top:Ne/60*vi,height:Math.max(le.duration/60*vi,z0)}}),[U]),ue=G.useMemo(()=>M?XO.map((le,Ne)=>{const Ye=M[le],Et=Ye.startMin/60*vi,dt=(Ye.endMin-Ye.startMin)/60*vi;return{id:le,top:Et,height:dt,color:oP[Ne%2],label:JO[le]}}):[],[M]),Ee=le=>{if(!e||le.target.closest(".timeline-block")||le.target.closest(".segment-label"))return;const Ne=D.current.getBoundingClientRect(),Ye=le.clientY-Ne.top,Et=sP(Ye/vi*60),dt=iP(Et),ai=crypto.randomUUID(),Dn={id:ai,time:dt,activity:"(New)",type:"neutral",icon:"",duration:B0,segment:null,offsetMinutes:0,tasks:[]};a(A,[...V,Dn]),he(ai)},Ve=(le,Ne)=>{const Ye=V.map(Et=>Et.id===le?{...Et,time:Ne,segment:null,offsetMinutes:0}:Et);a(A,Ye)},Ue=(le,Ne,Ye)=>{const Et=V.map(dt=>dt.id===le?{...dt,time:Ne,duration:Ye,segment:null,offsetMinutes:0}:dt);a(A,Et)},k=le=>{let Ne=V.map(Ye=>Ye.id===le.id?le:Ye);V.find(Ye=>Ye.id===le.id)||Ne.push(le),a(A,Ne),_e(null),he(null)},ee=le=>{a(A,V.filter(Ne=>Ne.id!==le)),_e(null),he(null)},Y=(le,Ne)=>{const Ye=V.map(Et=>Et.id!==le?Et:{...Et,tasks:(Et.tasks||[]).map(dt=>dt.id===Ne?{...dt,done:!dt.done}:dt)});a(A,Ye)},ae=()=>{ve&&(a(A,V.filter(le=>le.id!==ve)),he(null)),_e(null)},me=new Date,pe=(me.getHours()*60+me.getMinutes())/60*vi;return I.jsxs("div",{className:"daily-view",children:[I.jsxs("div",{className:"daily-header",children:[I.jsx("button",{className:"daily-back",onClick:l,children:" Month"}),I.jsxs("div",{className:"daily-date-info",children:[I.jsx("span",{className:"daily-day-name",children:q0[A]}),I.jsxs("span",{className:"daily-date-str",children:[ud(r),N?" (today)":""]})]}),e&&I.jsx("span",{className:"daily-plan-badge",style:{borderColor:e.color,color:e.color},children:e.label})]}),I.jsx("div",{className:"day-selector",children:t_.map((le,Ne)=>I.jsx("button",{className:`day-btn${le===A?" active":""}`,onClick:()=>c(lO(r,le)),children:lP[Ne]},le))}),P&&I.jsxs("div",{className:"prayer-banner",children:[I.jsxs("div",{className:"prayer-banner-title",onClick:i,style:{cursor:"pointer"},children:["PRAYER TIMES",t!=null&&t.city?`  ${t.city.toUpperCase()}`:""]}),I.jsx("div",{className:"prayer-times-row",children:Object.entries(P).map(([le,Ne])=>I.jsxs("div",{className:"prayer-time-item",children:[I.jsx("span",{className:"prayer-name",children:le}),I.jsx("span",{className:"prayer-time",children:Ne})]},le))})]}),!e&&I.jsxs("div",{className:"daily-empty",children:["No plan covers this date. Create a plan that includes ",ud(r),"."]}),e&&V.length===0&&I.jsxs("div",{className:"daily-hint",children:["Tap the timeline to add your first block for ",q0[A],"."]}),I.jsx("div",{className:"timeline-scroll",children:I.jsxs("div",{className:"timeline",ref:D,style:{height:24*vi},onClick:Ee,children:[ue.map(le=>I.jsx("div",{className:"segment-band",style:{top:le.top,height:le.height,background:le.color},children:I.jsx("span",{className:"segment-label",children:le.label})},le.id)),aP.map(le=>I.jsxs("div",{className:"hour-row",style:{top:le*vi,height:vi},children:[I.jsx("span",{className:"hour-label",children:sO(le*60)}),I.jsx("div",{className:"hour-line"})]},le)),N&&I.jsx("div",{className:"now-line",style:{top:pe},children:I.jsx("div",{className:"now-dot"})}),J.map(le=>I.jsx(U0,{block:le,top:le.top,height:le.height,isPrayer:!0,onEdit:()=>{},onDelete:()=>{},onTimeChange:()=>{},onResize:()=>{}},le.id)),$e.map(le=>I.jsx(U0,{block:le,top:le.top,height:le.height,col:le.col,totalCols:le.totalCols,isNew:le.id===ve,extraTypeColors:p,onEdit:Ne=>{he(null),_e(Ne)},onDelete:ee,onTimeChange:Ve,onResize:Ue,onToggleTask:Y},le.id))]})}),I.jsx(YO,{sections:T,addSection:S,updateSection:R,deleteSection:x,toggleCollapse:C,addItem:j,updateItem:Q,deleteItem:re}),oe&&I.jsx(FO,{block:oe,segments:M,customTypes:d,customTypeColors:p,onAddCustomType:g,onRemoveCustomType:v,onSave:k,onDelete:ee,onClose:ae},oe.id+oe.time+(oe.duration||0))]})}function cP(r){const e=JSON.parse(r);if(Array.isArray(e))return{plans:e.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:[],pipelines:[]};if(e&&Array.isArray(e.plans))return{plans:e.plans.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:Array.isArray(e.customTypes)?e.customTypes:[],pipelines:Array.isArray(e.pipelines)?e.pipelines:[]};throw new Error("Unrecognized format")}function hP(r,e,t,i=[]){const a=new Set(e.map(d=>d.id)),l=new Set([...yw,...t.map(d=>d.key)]),c=new Set(i.map(d=>d.id));return{newPlans:r.plans.filter(d=>!a.has(d.id)),skippedPlans:r.plans.filter(d=>a.has(d.id)),newTypes:r.customTypes.filter(d=>!l.has(d.key)),skippedTypes:r.customTypes.filter(d=>l.has(d.key)),newPipelines:(r.pipelines||[]).filter(d=>!c.has(d.id)),skippedPipelines:(r.pipelines||[]).filter(d=>c.has(d.id))}}function fP({file:r,existingPlans:e,existingCustomTypes:t,existingPipelines:i=[],onConfirm:a,onClose:l}){const[c,d]=G.useState(null),[p,g]=G.useState(null),[v,T]=G.useState(null),[S,R]=G.useState(new Set),[x,C]=G.useState(new Set),[j,Q]=G.useState(new Set);G.useState(()=>{const A=new FileReader;A.onload=N=>{try{const P=cP(N.target.result);if(P.plans.length===0&&P.customTypes.length===0){d("File contains no data to import.");return}const M=hP(P,e,t,i);g(P),T(M),R(new Set(M.newPlans.map(U=>U.id))),C(new Set(M.newTypes.map(U=>U.key))),Q(new Set(M.newPipelines.map(U=>U.id)))}catch(P){d("Invalid file: "+P.message)}},A.readAsText(r)});const re=G.useCallback(A=>{R(N=>{const P=new Set(N);return P.has(A)?P.delete(A):P.add(A),P})},[]),oe=G.useCallback(A=>{C(N=>{const P=new Set(N);return P.has(A)?P.delete(A):P.add(A),P})},[]),_e=G.useCallback(A=>{Q(N=>{const P=new Set(N);return P.has(A)?P.delete(A):P.add(A),P})},[]),ve=G.useCallback(()=>{if(!v)return;const A=v.newPlans.filter(M=>S.has(M.id)),N=v.newTypes.filter(M=>x.has(M.key)),P=v.newPipelines.filter(M=>j.has(M.id));a(A,N,P)},[v,S,x,j,a]),he=S.size+x.size+j.size,D=v&&v.newPlans.length===0&&v.newTypes.length===0&&v.newPipelines.length===0;return I.jsx("div",{className:"modal-overlay",onClick:l,children:I.jsxs("div",{className:"modal",onClick:A=>A.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Import Data"}),c&&I.jsxs(I.Fragment,{children:[I.jsx("p",{style:{color:"#ef4444",fontSize:13,margin:"0 0 16px"},children:c}),I.jsx("div",{className:"modal-actions",children:I.jsx("button",{className:"btn-secondary",onClick:l,children:"Close"})})]}),!c&&!v&&I.jsx("p",{style:{color:"#94a3b8",fontSize:13},children:"Reading file..."}),v&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),v.newPlans.length>0&&I.jsx("div",{className:"import-items",children:v.newPlans.map(A=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:S.has(A.id),onChange:()=>re(A.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:A.label}),A.startDate&&I.jsxs("span",{className:"import-item-date",children:[A.startDate,"  ",A.endDate]})]},A.id))}),v.skippedPlans.length>0&&I.jsx("div",{className:"import-items",children:v.skippedPlans.map(A=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:A.label})]},A.id))}),p.plans.length===0&&I.jsx("p",{className:"import-empty",children:"No plans in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),v.newTypes.length>0&&I.jsx("div",{className:"import-items",children:v.newTypes.map(A=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:x.has(A.key),onChange:()=>oe(A.key)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:A.name})]},A.key))}),v.skippedTypes.length>0&&I.jsx("div",{className:"import-items",children:v.skippedTypes.map(A=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:A.name||A.key})]},A.key))}),p.customTypes.length===0&&I.jsx("p",{className:"import-empty",children:"No custom types in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),v.newPipelines.length>0&&I.jsx("div",{className:"import-items",children:v.newPipelines.map(A=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:j.has(A.id),onChange:()=>_e(A.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:A.title}),I.jsxs("span",{className:"import-item-date",children:[(A.items||[]).length," items"]})]},A.id))}),v.skippedPipelines.length>0&&I.jsx("div",{className:"import-items",children:v.skippedPipelines.map(A=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:A.title})]},A.id))}),(p.pipelines||[]).length===0&&I.jsx("p",{className:"import-empty",children:"No pipeline sections in file"})]}),D&&I.jsx("p",{style:{color:"#f59e0b",fontSize:13,marginTop:8},children:"Everything already exists. Nothing to import."}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:l,children:"Cancel"}),!D&&I.jsxs("button",{className:"btn-primary",onClick:ve,disabled:he===0,children:["Import",he>0?` ${he} item${he!==1?"s":""}`:""]})]})]})]})})}function dP({plans:r,customTypes:e,pipelineSections:t=[],onClose:i}){const[a,l]=G.useState(()=>new Set(r.map(C=>C.id))),[c,d]=G.useState(()=>new Set(e.map(C=>C.key))),[p,g]=G.useState(()=>new Set(t.map(C=>C.id))),v=G.useCallback(C=>{l(j=>{const Q=new Set(j);return Q.has(C)?Q.delete(C):Q.add(C),Q})},[]),T=G.useCallback(C=>{d(j=>{const Q=new Set(j);return Q.has(C)?Q.delete(C):Q.add(C),Q})},[]),S=G.useCallback(C=>{g(j=>{const Q=new Set(j);return Q.has(C)?Q.delete(C):Q.add(C),Q})},[]),R=a.size+c.size+p.size,x=G.useCallback(()=>{const C=r.filter(he=>a.has(he.id)),j=e.filter(he=>c.has(he.key)).map(he=>({key:he.key,name:he.name})),Q=t.filter(he=>p.has(he.id)),re={version:2,plans:C,customTypes:j,pipelines:Q},oe=new Blob([JSON.stringify(re,null,2)],{type:"application/json"}),_e=URL.createObjectURL(oe),ve=document.createElement("a");ve.href=_e,ve.download="entrypoint-v2-plans.json",ve.click(),URL.revokeObjectURL(_e),i()},[r,e,t,a,c,p,i]);return I.jsx("div",{className:"modal-overlay",onClick:i,children:I.jsxs("div",{className:"modal",onClick:C=>C.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Export Data"}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),r.length>0?I.jsx("div",{className:"import-items",children:r.map(C=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:a.has(C.id),onChange:()=>v(C.id)}),I.jsx("span",{className:"import-item-label",children:C.label}),C.startDate&&I.jsxs("span",{className:"import-item-date",children:[C.startDate,"  ",C.endDate]})]},C.id))}):I.jsx("p",{className:"import-empty",children:"No plans to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),e.length>0?I.jsx("div",{className:"import-items",children:e.map(C=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:c.has(C.key),onChange:()=>T(C.key)}),I.jsx("span",{className:"import-item-label",children:C.name})]},C.key))}):I.jsx("p",{className:"import-empty",children:"No custom types to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),t.length>0?I.jsx("div",{className:"import-items",children:t.map(C=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:p.has(C.id),onChange:()=>S(C.id)}),I.jsx("span",{className:"import-item-label",children:C.title}),I.jsxs("span",{className:"import-item-date",children:[(C.items||[]).length," items"]})]},C.id))}):I.jsx("p",{className:"import-empty",children:"No pipeline sections to export"})]}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:i,children:"Cancel"}),I.jsxs("button",{className:"btn-primary",onClick:x,disabled:R===0,children:["Export",R>0?` ${R} item${R!==1?"s":""}`:""]})]})]})})}function mP({onSave:r,onClose:e}){const[t,i]=G.useState(""),[a,l]=G.useState("");G.useEffect(()=>{const p=g=>{g.key==="Escape"&&e&&e()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e]);const c=()=>{const p=t.trim(),g=a.trim();!p||!g||r({city:p,country:g})},d=p=>{p.key==="Enter"&&c()};return I.jsx("div",{className:"modal-overlay",onClick:e||void 0,children:I.jsxs("div",{className:"modal",onClick:p=>p.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:"Set Your Location"}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 16px",lineHeight:1.5},children:"Used to calculate prayer times."}),I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[I.jsx("input",{className:"modal-input",placeholder:"City (e.g. Lyon)",value:t,onChange:p=>i(p.target.value),onKeyDown:d,autoFocus:!0}),I.jsx("input",{className:"modal-input",placeholder:"Country (e.g. France)",value:a,onChange:p=>l(p.target.value),onKeyDown:d})]}),I.jsxs("div",{className:"modal-actions",children:[e&&I.jsx("button",{className:"btn-secondary",onClick:e,children:"Cancel"}),I.jsx("button",{className:"btn-primary",onClick:c,disabled:!t.trim()||!a.trim(),children:"Save"})]})]})})}function F0(){const r=e_(),e=(r==null?void 0:r.user)||null,t=(r==null?void 0:r.logout)||null,{plans:i,loading:a,activePlan:l,activePlanId:c,setActivePlanId:d,createPlan:p,updatePlan:g,deletePlan:v,updateRoutineBlocks:T,getPlanForDate:S,mergePlans:R}=TO((e==null?void 0:e.uid)||null),{selectedDate:x,setSelectedDate:C,today:j,viewYear:Q,viewMonth:re,prevMonth:oe,nextMonth:_e,setViewYearMonth:ve}=RO(),{customTypes:he,customTypeColors:D,addCustomType:A,removeCustomType:N,mergeCustomTypes:P}=MO(),{location:M,setLocation:U,hasLocation:V}=kO(),[Ke,$e]=G.useState(!1),{sections:J,addSection:ue,updateSection:Ee,deleteSection:Ve,reorderSections:Ue,toggleCollapse:k,addItem:ee,updateItem:Y,deleteItem:ae,mergeSections:me}=wO((e==null?void 0:e.uid)||null),ie=G.useRef(null),[pe,Re]=G.useState(null),[Pe,le]=G.useState(!1),[Ne,Ye]=G.useState("daily"),[Et,dt]=G.useState(null),[ai,Dn]=G.useState(null),[Br,Ps]=G.useState(!1),bt=G.useCallback((ke,At,wi)=>{ke.length>0&&R(ke),At.length>0&&P(At),wi&&wi.length>0&&me(wi),Dn(null)},[R,P,me]),Tt=G.useCallback(ke=>{if(!ke.startDate)return;d(ke.id),C(ke.startDate);const At=new Date(ke.startDate+"T00:00:00");ve(At.getFullYear(),At.getMonth()),dt(ke.startDate),setTimeout(()=>dt(null),1500)},[ve,C,d]),Ai=G.useCallback(ke=>{const At=i.find(wi=>wi.id===ke);At!=null&&At.startDate?Tt(At):d(ke)},[i,Tt,d]),Ya=G.useCallback(ke=>{C(ke);const At=S(ke);At&&d(At.id),Ye("daily")},[C,S,d]),Qa=G.useCallback(ke=>{C(ke);const At=S(ke);At&&d(At.id)},[C,S,d]),tn=G.useCallback(()=>{Ye("calendar")},[]),Hn=S(x),Ii=l&&(Hn==null?void 0:Hn.id)===l.id?l:Hn,qr=G.useCallback((ke,At)=>{Ii&&T(Ii.id,ke,At)},[Ii,T]);return a?I.jsx("div",{className:"loading",children:"loading plans..."}):I.jsxs("div",{className:"app",children:[I.jsxs("header",{className:"app-header",children:[I.jsxs("div",{children:[I.jsx("div",{className:"header-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"header-title",children:"Lock-In"}),I.jsx("div",{className:"header-quote",children:'"While enjoying every single day on the way."'})]}),I.jsxs("div",{className:"header-actions",children:[I.jsx("button",{className:"header-btn",onClick:()=>Ps(!0),title:"Export",children:"Export"}),I.jsx("button",{className:"header-btn",onClick:()=>{var ke;return(ke=ie.current)==null?void 0:ke.click()},title:"Import",children:"Import"}),I.jsx("input",{ref:ie,type:"file",accept:".json",hidden:!0,onChange:ke=>{ke.target.files[0]&&Dn(ke.target.files[0]),ke.target.value=""}}),t&&I.jsx("button",{className:"logout-btn",onClick:t,children:"Logout"})]})]}),I.jsx(LO,{plans:i,activePlanId:l==null?void 0:l.id,onSelect:Ai,onCreate:()=>le(!0),onEdit:Re,onDelete:v}),Ne==="calendar"?I.jsx(BO,{viewYear:Q,viewMonth:re,selectedDate:x,today:j,plans:i,highlightDate:Et,onPrevMonth:oe,onNextMonth:_e,onGoToday:()=>Ya(j),onSelectDate:Ya,onPlanClick:Tt}):I.jsx(uP,{date:x,plan:Ii,location:M,onOpenLocation:()=>$e(!0),onUpdateBlocks:qr,onSelectDate:Qa,onMonth:tn,customTypes:he,customTypeColors:D,onAddCustomType:A,onRemoveCustomType:N,pipelineSections:J,onAddSection:ue,onUpdateSection:Ee,onDeleteSection:Ve,onToggleCollapse:k,onAddItem:ee,onUpdateItem:Y,onDeleteItem:ae}),Pe&&I.jsx(k0,{plan:null,plans:i,onSave:ke=>{p(ke),le(!1)},onClose:()=>le(!1)}),pe&&I.jsx(k0,{plan:pe,plans:i,onSave:ke=>{g(pe.id,ke),Re(null)},onClose:()=>Re(null)}),Br&&I.jsx(dP,{plans:i,customTypes:he,pipelineSections:J,onClose:()=>Ps(!1)}),ai&&I.jsx(fP,{file:ai,existingPlans:i,existingCustomTypes:he,existingPipelines:J,onConfirm:bt,onClose:()=>Dn(null)}),(!V||Ke)&&I.jsx(mP,{onSave:ke=>{U(ke),$e(!1)},onClose:V?()=>$e(!1):void 0})]})}fR.createRoot(document.getElementById("root")).render(I.jsx(G.StrictMode,{children:Tl?I.jsx(ZM,{children:I.jsx(tO,{children:I.jsx(F0,{})})}):I.jsx(F0,{})}));
