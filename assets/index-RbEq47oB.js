(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function NC(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var fg={exports:{}},$u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb;function MC(){if(gb)return $u;gb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:l}}return $u.Fragment=e,$u.jsx=t,$u.jsxs=t,$u}var yb;function OC(){return yb||(yb=1,fg.exports=MC()),fg.exports}var I=OC(),dg={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b;function VC(){if(_b)return ze;_b=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=b&&j[b]||j["@@iterator"],typeof j=="function"?j:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,M={};function U(j,te,$){this.props=j,this.context=te,this.refs=M,this.updater=$||P}U.prototype.isReactComponent={},U.prototype.setState=function(j,te){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,te,"setState")},U.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function G(){}G.prototype=U.prototype;function H(j,te,$){this.props=j,this.context=te,this.refs=M,this.updater=$||P}var re=H.prototype=new G;re.constructor=H,D(re,U.prototype),re.isPureReactComponent=!0;var se=Array.isArray;function W(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(j,te,$){var ce=$.ref;return{$$typeof:i,type:j,key:te,ref:ce!==void 0?ce:null,props:$}}function O(j,te){return N(j.type,te,j.props)}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function z(j){var te={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function($){return te[$]})}var V=/\/+/g;function we(j,te){return typeof j=="object"&&j!==null&&j.key!=null?z(""+j.key):te.toString(36)}function Ne(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(W,W):(j.status="pending",j.then(function(te){j.status==="pending"&&(j.status="fulfilled",j.value=te)},function(te){j.status==="pending"&&(j.status="rejected",j.reason=te)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function X(j,te,$,ce,ge){var ye=typeof j;(ye==="undefined"||ye==="boolean")&&(j=null);var Oe=!1;if(j===null)Oe=!0;else switch(ye){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(j.$$typeof){case i:case e:Oe=!0;break;case _:return Oe=j._init,X(Oe(j._payload),te,$,ce,ge)}}if(Oe)return ge=ge(j),Oe=ce===""?"."+we(j,0):ce,se(ge)?($="",Oe!=null&&($=Oe.replace(V,"$&/")+"/"),X(ge,te,$,"",function(he){return he})):ge!=null&&(k(ge)&&(ge=O(ge,$+(ge.key==null||j&&j.key===ge.key?"":(""+ge.key).replace(V,"$&/")+"/")+Oe)),te.push(ge)),1;Oe=0;var Ke=ce===""?".":ce+":";if(se(j))for(var Le=0;Le<j.length;Le++)ce=j[Le],ye=Ke+we(ce,Le),Oe+=X(ce,te,$,ye,ge);else if(Le=w(j),typeof Le=="function")for(j=Le.call(j),Le=0;!(ce=j.next()).done;)ce=ce.value,ye=Ke+we(ce,Le++),Oe+=X(ce,te,$,ye,ge);else if(ye==="object"){if(typeof j.then=="function")return X(Ne(j),te,$,ce,ge);throw te=String(j),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function ue(j,te,$){if(j==null)return j;var ce=[],ge=0;return X(j,ce,"","",function(ye){return te.call($,ye,ge++)}),ce}function _e(j){if(j._status===-1){var te=j._result;te=te(),te.then(function($){(j._status===0||j._status===-1)&&(j._status=1,j._result=$)},function($){(j._status===0||j._status===-1)&&(j._status=2,j._result=$)}),j._status===-1&&(j._status=0,j._result=te)}if(j._status===1)return j._result.default;throw j._result}var Ce=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},ke={map:ue,forEach:function(j,te,$){ue(j,function(){te.apply(this,arguments)},$)},count:function(j){var te=0;return ue(j,function(){te++}),te},toArray:function(j){return ue(j,function(te){return te})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ze.Activity=E,ze.Children=ke,ze.Component=U,ze.Fragment=t,ze.Profiler=a,ze.PureComponent=H,ze.StrictMode=r,ze.Suspense=m,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ze.__COMPILER_RUNTIME={__proto__:null,c:function(j){return R.H.useMemoCache(j)}},ze.cache=function(j){return function(){return j.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(j,te,$){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ce=D({},j.props),ge=j.key;if(te!=null)for(ye in te.key!==void 0&&(ge=""+te.key),te)!S.call(te,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&te.ref===void 0||(ce[ye]=te[ye]);var ye=arguments.length-2;if(ye===1)ce.children=$;else if(1<ye){for(var Oe=Array(ye),Ke=0;Ke<ye;Ke++)Oe[Ke]=arguments[Ke+2];ce.children=Oe}return N(j.type,ge,ce)},ze.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},ze.createElement=function(j,te,$){var ce,ge={},ye=null;if(te!=null)for(ce in te.key!==void 0&&(ye=""+te.key),te)S.call(te,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ge[ce]=te[ce]);var Oe=arguments.length-2;if(Oe===1)ge.children=$;else if(1<Oe){for(var Ke=Array(Oe),Le=0;Le<Oe;Le++)Ke[Le]=arguments[Le+2];ge.children=Ke}if(j&&j.defaultProps)for(ce in Oe=j.defaultProps,Oe)ge[ce]===void 0&&(ge[ce]=Oe[ce]);return N(j,ye,ge)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(j){return{$$typeof:f,render:j}},ze.isValidElement=k,ze.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:_e}},ze.memo=function(j,te){return{$$typeof:g,type:j,compare:te===void 0?null:te}},ze.startTransition=function(j){var te=R.T,$={};R.T=$;try{var ce=j(),ge=R.S;ge!==null&&ge($,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(W,Ce)}catch(ye){Ce(ye)}finally{te!==null&&$.types!==null&&(te.types=$.types),R.T=te}},ze.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ze.use=function(j){return R.H.use(j)},ze.useActionState=function(j,te,$){return R.H.useActionState(j,te,$)},ze.useCallback=function(j,te){return R.H.useCallback(j,te)},ze.useContext=function(j){return R.H.useContext(j)},ze.useDebugValue=function(){},ze.useDeferredValue=function(j,te){return R.H.useDeferredValue(j,te)},ze.useEffect=function(j,te){return R.H.useEffect(j,te)},ze.useEffectEvent=function(j){return R.H.useEffectEvent(j)},ze.useId=function(){return R.H.useId()},ze.useImperativeHandle=function(j,te,$){return R.H.useImperativeHandle(j,te,$)},ze.useInsertionEffect=function(j,te){return R.H.useInsertionEffect(j,te)},ze.useLayoutEffect=function(j,te){return R.H.useLayoutEffect(j,te)},ze.useMemo=function(j,te){return R.H.useMemo(j,te)},ze.useOptimistic=function(j,te){return R.H.useOptimistic(j,te)},ze.useReducer=function(j,te,$){return R.H.useReducer(j,te,$)},ze.useRef=function(j){return R.H.useRef(j)},ze.useState=function(j){return R.H.useState(j)},ze.useSyncExternalStore=function(j,te,$){return R.H.useSyncExternalStore(j,te,$)},ze.useTransition=function(){return R.H.useTransition()},ze.version="19.2.4",ze}var vb;function Ny(){return vb||(vb=1,dg.exports=VC()),dg.exports}var x=Ny();const Vt=NC(x);var mg={exports:{}},Xu={},pg={exports:{}},gg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb;function PC(){return Eb||(Eb=1,(function(i){function e(X,ue){var _e=X.length;X.push(ue);e:for(;0<_e;){var Ce=_e-1>>>1,ke=X[Ce];if(0<a(ke,ue))X[Ce]=ue,X[_e]=ke,_e=Ce;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ue=X[0],_e=X.pop();if(_e!==ue){X[0]=_e;e:for(var Ce=0,ke=X.length,j=ke>>>1;Ce<j;){var te=2*(Ce+1)-1,$=X[te],ce=te+1,ge=X[ce];if(0>a($,_e))ce<ke&&0>a(ge,$)?(X[Ce]=ge,X[ce]=_e,Ce=ce):(X[Ce]=$,X[te]=_e,Ce=te);else if(ce<ke&&0>a(ge,_e))X[Ce]=ge,X[ce]=_e,Ce=ce;else break e}}return ue}function a(X,ue){var _e=X.sortIndex-ue.sortIndex;return _e!==0?_e:X.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var m=[],g=[],_=1,E=null,b=3,w=!1,P=!1,D=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function re(X){for(var ue=t(g);ue!==null;){if(ue.callback===null)r(g);else if(ue.startTime<=X)r(g),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(g)}}function se(X){if(D=!1,re(X),!P)if(t(m)!==null)P=!0,W||(W=!0,z());else{var ue=t(g);ue!==null&&Ne(se,ue.startTime-X)}}var W=!1,R=-1,S=5,N=-1;function O(){return M?!0:!(i.unstable_now()-N<S)}function k(){if(M=!1,W){var X=i.unstable_now();N=X;var ue=!0;try{e:{P=!1,D&&(D=!1,G(R),R=-1),w=!0;var _e=b;try{t:{for(re(X),E=t(m);E!==null&&!(E.expirationTime>X&&O());){var Ce=E.callback;if(typeof Ce=="function"){E.callback=null,b=E.priorityLevel;var ke=Ce(E.expirationTime<=X);if(X=i.unstable_now(),typeof ke=="function"){E.callback=ke,re(X),ue=!0;break t}E===t(m)&&r(m),re(X)}else r(m);E=t(m)}if(E!==null)ue=!0;else{var j=t(g);j!==null&&Ne(se,j.startTime-X),ue=!1}}break e}finally{E=null,b=_e,w=!1}ue=void 0}}finally{ue?z():W=!1}}}var z;if(typeof H=="function")z=function(){H(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,we=V.port2;V.port1.onmessage=k,z=function(){we.postMessage(null)}}else z=function(){U(k,0)};function Ne(X,ue){R=U(function(){X(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(X){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var _e=b;b=ue;try{return X()}finally{b=_e}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(X,ue){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _e=b;b=X;try{return ue()}finally{b=_e}},i.unstable_scheduleCallback=function(X,ue,_e){var Ce=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ce+_e:Ce):_e=Ce,X){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=_e+ke,X={id:_++,callback:ue,priorityLevel:X,startTime:_e,expirationTime:ke,sortIndex:-1},_e>Ce?(X.sortIndex=_e,e(g,X),t(m)===null&&X===t(g)&&(D?(G(R),R=-1):D=!0,Ne(se,_e-Ce))):(X.sortIndex=ke,e(m,X),P||w||(P=!0,W||(W=!0,z()))),X},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(X){var ue=b;return function(){var _e=b;b=ue;try{return X.apply(this,arguments)}finally{b=_e}}}})(gg)),gg}var Tb;function kC(){return Tb||(Tb=1,pg.exports=PC()),pg.exports}var yg={exports:{}},On={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb;function LC(){if(bb)return On;bb=1;var i=Ny();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,On.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},On.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},On.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},On.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},On.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:w}):_==="script"&&r.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},On.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=f(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},On.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},On.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=f(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},On.requestFormReset=function(m){r.d.r(m)},On.unstable_batchedUpdates=function(m,g){return m(g)},On.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},On.useFormStatus=function(){return c.H.useHostTransitionStatus()},On.version="19.2.4",On}var Sb;function $S(){if(Sb)return yg.exports;Sb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),yg.exports=LC(),yg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function UC(){if(Ab)return Xu;Ab=1;var i=kC(),e=Ny(),t=$S();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,u=s;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return m(d),n;if(p===u)return m(d),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=d,u=p;else{for(var v=!1,A=d.child;A;){if(A===o){v=!0,o=d,u=p;break}if(A===u){v=!0,u=d,o=p;break}A=A.sibling}if(!v){for(A=p.child;A;){if(A===o){v=!0,o=p,u=d;break}if(A===u){v=!0,u=p,o=d;break}A=A.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),H=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var V=Symbol.for("react.client.reference");function we(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===V?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case U:return"Profiler";case M:return"StrictMode";case se:return"Suspense";case W:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case H:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case re:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return s=n.displayName||null,s!==null?s:we(n.type)||"Memo";case S:s=n._payload,n=n._init;try{return we(n(s))}catch{}}return null}var Ne=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ce=[],ke=-1;function j(n){return{current:n}}function te(n){0>ke||(n.current=Ce[ke],Ce[ke]=null,ke--)}function $(n,s){ke++,Ce[ke]=n.current,n.current=s}var ce=j(null),ge=j(null),ye=j(null),Oe=j(null);function Ke(n,s){switch($(ye,s),$(ge,n),$(ce,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?jT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=jT(s),n=zT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}te(ce),$(ce,n)}function Le(){te(ce),te(ge),te(ye)}function he(n){n.memoizedState!==null&&$(Oe,n);var s=ce.current,o=zT(s,n.type);s!==o&&($(ge,n),$(ce,o))}function De(n){ge.current===n&&(te(ce),te(ge)),Oe.current===n&&(te(Oe),Gu._currentValue=_e)}var Ve,nt;function oe(n){if(Ve===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ve=s&&s[1]||"",nt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+n+nt}var Se=!1;function Me(n,s){if(!n||Se)return"";Se=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var J=ee}Reflect.construct(n,[],le)}else{try{le.call()}catch(ee){J=ee}n.call(le.prototype)}}else{try{throw Error()}catch(ee){J=ee}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],A=p[1];if(v&&A){var L=v.split(`
`),Q=A.split(`
`);for(d=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;d<Q.length&&!Q[d].includes("DetermineComponentFrameRoot");)d++;if(u===L.length||d===Q.length)for(u=L.length-1,d=Q.length-1;1<=u&&0<=d&&L[u]!==Q[d];)d--;for(;1<=u&&0<=d;u--,d--)if(L[u]!==Q[d]){if(u!==1||d!==1)do if(u--,d--,0>d||L[u]!==Q[d]){var ie=`
`+L[u].replace(" at new "," at ");return n.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",n.displayName)),ie}while(1<=u&&0<=d);break}}}finally{Se=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?oe(o):""}function rt(n,s){switch(n.tag){case 26:case 27:case 5:return oe(n.type);case 16:return oe("Lazy");case 13:return n.child!==s&&s!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return Me(n.type,!1);case 11:return Me(n.type.render,!1);case 1:return Me(n.type,!0);case 31:return oe("Activity");default:return""}}function ht(n){try{var s="",o=null;do s+=rt(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var He=Object.prototype.hasOwnProperty,et=i.unstable_scheduleCallback,Cn=i.unstable_cancelCallback,Wi=i.unstable_shouldYield,ki=i.unstable_requestPaint,Yt=i.unstable_now,vi=i.unstable_getCurrentPriorityLevel,Rr=i.unstable_ImmediatePriority,Kn=i.unstable_UserBlockingPriority,Qt=i.unstable_NormalPriority,Yn=i.unstable_LowPriority,Cr=i.unstable_IdlePriority,Ue=i.log,St=i.unstable_setDisableYieldValue,on=null,ln=null;function Dn(n){if(typeof Ue=="function"&&St(n),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(on,n)}catch{}}var Rt=Math.clz32?Math.clz32:co,uo=Math.log,Dr=Math.LN2;function co(n){return n>>>=0,n===0?32:31-(uo(n)/Dr|0)|0}var Ei=256,xr=262144,Ye=4194304;function Ct(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Dt(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,p=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?d=Ct(u):(v&=A,v!==0?d=Ct(v):o||(o=A&~n,o!==0&&(d=Ct(o))))):(A=u&~p,A!==0?d=Ct(A):v!==0?d=Ct(v):o||(o=u&~n,o!==0&&(d=Ct(o)))),d===0?0:s!==0&&s!==d&&(s&p)===0&&(p=d&-d,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:d}function $t(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function xn(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mn(){var n=Ye;return Ye<<=1,(Ye&62914560)===0&&(Ye=4194304),n}function jt(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Qn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function zt(n,s,o,u,d,p){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,L=n.expirationTimes,Q=n.hiddenUpdates;for(o=v&~o;0<o;){var ie=31-Rt(o),le=1<<ie;A[ie]=0,L[ie]=-1;var J=Q[ie];if(J!==null)for(Q[ie]=null,ie=0;ie<J.length;ie++){var ee=J[ie];ee!==null&&(ee.lane&=-536870913)}o&=~le}u!==0&&Nn(n,u,0),p!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=p&~(v&~s))}function Nn(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Rt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Mn(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-Rt(o),d=1<<u;d&s|n[u]&s&&(n[u]|=s),o&=~d}}function jn(n,s){var o=s&-s;return o=(o&42)!==0?1:ri(o),(o&(n.suspendedLanes|s))!==0?0:o}function ri(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function si(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:ub(n.type))}function Tn(n,s){var o=ue.p;try{return ue.p=n,s()}finally{ue.p=o}}var Bn=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Bn,pn="__reactProps$"+Bn,Zi="__reactContainer$"+Bn,ho="__reactEvents$"+Bn,_m="__reactListeners$"+Bn,ch="__reactHandles$"+Bn,hh="__reactResources$"+Bn,er="__reactMarker$"+Bn;function fo(n){delete n[Xt],delete n[pn],delete n[ho],delete n[_m],delete n[ch]}function tr(n){var s=n[Xt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Zi]||o[Xt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=YT(n);n!==null;){if(o=n[Xt])return o;n=YT(n)}return s}n=o,o=n.parentNode}return null}function Ti(n){if(n=n[Xt]||n[Zi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function ai(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function nr(n){var s=n[hh];return s||(s=n[hh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Jt(n){n[er]=!0}var Wl=new Set,Zl={};function ir(n,s){rr(n,s),rr(n+"Capture",s)}function rr(n,s){for(Zl[n]=s,n=0;n<s.length;n++)Wl.add(s[n])}var eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tu={},nu={};function fh(n){return He.call(nu,n)?!0:He.call(tu,n)?!1:eu.test(n)?nu[n]=!0:(tu[n]=!0,!1)}function mo(n,s,o){if(fh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function oi(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Wt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function gn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ls(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function iu(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,p=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ft(n){if(!n._valueTracker){var s=ls(n)?"checked":"value";n._valueTracker=iu(n,s,""+n[s])}}function ha(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=ls(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function sr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var fa=/[\n"\\]/g;function $n(n){return n.replace(fa,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function po(n,s,o,u,d,p,v,A){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+gn(s)):n.value!==""+gn(s)&&(n.value=""+gn(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?ru(n,v,gn(s)):o!=null?ru(n,v,gn(o)):u!=null&&n.removeAttribute("value"),d==null&&p!=null&&(n.defaultChecked=!!p),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+gn(A):n.removeAttribute("name")}function dh(n,s,o,u,d,p,v,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){ft(n);return}o=o!=null?""+gn(o):"",s=s!=null?""+gn(s):o,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),ft(n)}function ru(n,s,o){s==="number"&&sr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function us(n,s,o,u){if(n=n.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=s.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+gn(o),s=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function mh(n,s,o){if(s!=null&&(s=""+gn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+gn(o):""}function cs(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ne(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=gn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),ft(n)}function Xn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var ph=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||ph.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function au(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&su(n,d,u)}else for(var p in s)s.hasOwnProperty(p)&&su(n,p,s[p])}function go(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yo(n){return hs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Li(){}var ou=null;function bi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fs=null,ar=null;function da(n){var s=Ti(n);if(s&&(n=s.stateNode)){var o=n[pn]||null;e:switch(n=s.stateNode,s.type){case"input":if(po(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+$n(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var d=u[pn]||null;if(!d)throw Error(r(90));po(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&ha(u)}break e;case"textarea":mh(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&us(n,!!o.multiple,s,!1)}}}var _o=!1;function ds(n,s,o){if(_o)return n(s,o);_o=!0;try{var u=n(s);return u}finally{if(_o=!1,(fs!==null||ar!==null)&&(cf(),fs&&(s=fs,n=ar,ar=fs=null,da(s),n)))for(s=0;s<n.length;s++)da(n[s])}}function Ui(n,s){var o=n.stateNode;if(o===null)return null;var u=o[pn]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ma=!1;if(Si)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){ma=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{ma=!1}var or=null,lu=null,pa=null;function uu(){if(pa)return pa;var n,s=lu,o=s.length,u,d="value"in or?or.value:or.textContent,p=d.length;for(n=0;n<o&&s[n]===d[n];n++);var v=o-n;for(u=1;u<=v&&s[o-u]===d[p-u];u++);return pa=d.slice(n,1<u?1-u:void 0)}function ga(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Nr(){return!0}function ji(){return!1}function bn(n){function s(o,u,d,p,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Nr:ji,this.isPropagationStopped=ji,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),s}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=bn(Mr),ms=E({},Mr,{view:0,detail:0}),cu=bn(ms),ps,vo,ur,Eo=E({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ur&&(ur&&n.type==="mousemove"?(ps=n.screenX-ur.screenX,vo=n.screenY-ur.screenY):vo=ps=0,ur=n),ps)},movementY:function(n){return"movementY"in n?n.movementY:vo}}),hu=bn(Eo),ya=E({},Eo,{dataTransfer:0}),yh=bn(ya),_h=E({},ms,{relatedTarget:0}),_a=bn(_h),fu=E({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),vh=bn(fu),To=E({},Mr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Eh=bn(To),Th=E({},Mr,{data:0}),cr=bn(Th),bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ah[n])?!!s[n]:!1}function gs(){return wh}var qn=E({},ms,{key:function(n){if(n.key){var s=bh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ga(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Sh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(n){return n.type==="keypress"?ga(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ga(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ih=bn(qn),Rh=E({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Or=bn(Rh),h=E({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),y=bn(h),T=E({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=bn(T),K=E({},Eo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=bn(K),me=E({},Mr,{newState:0,oldState:0}),Be=bn(me),Bt=[9,13,27,32],ot=Si&&"CompositionEvent"in window,xt=null;Si&&"documentMode"in document&&(xt=document.documentMode);var Ai=Si&&"TextEvent"in window&&!xt,hr=Si&&(!ot||xt&&8<xt&&11>=xt),zi=" ",Bi=!1;function va(n,s){switch(n){case"keyup":return Bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var So=!1;function tR(n,s){switch(n){case"compositionend":return bo(s);case"keypress":return s.which!==32?null:(Bi=!0,zi);case"textInput":return n=s.data,n===zi&&Bi?null:n;default:return null}}function nR(n,s){if(So)return n==="compositionend"||!ot&&va(n,s)?(n=uu(),pa=lu=or=null,So=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return hr&&s.locale!=="ko"?null:s.data;default:return null}}var iR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!iR[n.type]:s==="textarea"}function J_(n,s,o,u){fs?ar?ar.push(u):ar=[u]:fs=u,s=yf(s,"onChange"),0<s.length&&(o=new lr("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var du=null,mu=null;function rR(n){OT(n,0)}function Ch(n){var s=ai(n);if(ha(s))return n}function W_(n,s){if(n==="change")return s}var Z_=!1;if(Si){var vm;if(Si){var Em="oninput"in document;if(!Em){var ev=document.createElement("div");ev.setAttribute("oninput","return;"),Em=typeof ev.oninput=="function"}vm=Em}else vm=!1;Z_=vm&&(!document.documentMode||9<document.documentMode)}function tv(){du&&(du.detachEvent("onpropertychange",nv),mu=du=null)}function nv(n){if(n.propertyName==="value"&&Ch(mu)){var s=[];J_(s,mu,n,bi(n)),ds(rR,s)}}function sR(n,s,o){n==="focusin"?(tv(),du=s,mu=o,du.attachEvent("onpropertychange",nv)):n==="focusout"&&tv()}function aR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ch(mu)}function oR(n,s){if(n==="click")return Ch(s)}function lR(n,s){if(n==="input"||n==="change")return Ch(s)}function uR(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var li=typeof Object.is=="function"?Object.is:uR;function pu(n,s){if(li(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!He.call(s,d)||!li(n[d],s[d]))return!1}return!0}function iv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rv(n,s){var o=iv(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=iv(o)}}function sv(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?sv(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function av(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=sr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=sr(n.document)}return s}function Tm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var cR=Si&&"documentMode"in document&&11>=document.documentMode,Ao=null,bm=null,gu=null,Sm=!1;function ov(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Sm||Ao==null||Ao!==sr(u)||(u=Ao,"selectionStart"in u&&Tm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),gu&&pu(gu,u)||(gu=u,u=yf(bm,"onSelect"),0<u.length&&(s=new lr("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ao)))}function Ea(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var wo={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},Am={},lv={};Si&&(lv=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function Ta(n){if(Am[n])return Am[n];if(!wo[n])return n;var s=wo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in lv)return Am[n]=s[o];return n}var uv=Ta("animationend"),cv=Ta("animationiteration"),hv=Ta("animationstart"),hR=Ta("transitionrun"),fR=Ta("transitionstart"),dR=Ta("transitioncancel"),fv=Ta("transitionend"),dv=new Map,wm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wm.push("scrollEnd");function qi(n,s){dv.set(n,s),ir(s,[n])}var Dh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},wi=[],Io=0,Im=0;function xh(){for(var n=Io,s=Im=Io=0;s<n;){var o=wi[s];wi[s++]=null;var u=wi[s];wi[s++]=null;var d=wi[s];wi[s++]=null;var p=wi[s];if(wi[s++]=null,u!==null&&d!==null){var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}p!==0&&mv(o,d,p)}}function Nh(n,s,o,u){wi[Io++]=n,wi[Io++]=s,wi[Io++]=o,wi[Io++]=u,Im|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Rm(n,s,o,u){return Nh(n,s,o,u),Mh(n)}function ba(n,s){return Nh(n,null,null,s),Mh(n)}function mv(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(d=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,d&&s!==null&&(d=31-Rt(o),n=p.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=o|536870912),p):null}function Mh(n){if(50<Uu)throw Uu=0,kp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ro={};function mR(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(n,s,o,u){return new mR(n,s,o,u)}function Cm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Vr(n,s){var o=n.alternate;return o===null?(o=ui(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function pv(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Oh(n,s,o,u,d,p){var v=0;if(u=n,typeof n=="function")Cm(n)&&(v=1);else if(typeof n=="string")v=vC(n,o,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=ui(31,o,s,d),n.elementType=N,n.lanes=p,n;case D:return Sa(o.children,d,p,s);case M:v=8,d|=24;break;case U:return n=ui(12,o,s,d|2),n.elementType=U,n.lanes=p,n;case se:return n=ui(13,o,s,d),n.elementType=se,n.lanes=p,n;case W:return n=ui(19,o,s,d),n.elementType=W,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:v=10;break e;case G:v=9;break e;case re:v=11;break e;case R:v=14;break e;case S:v=16,u=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=ui(v,o,s,d),s.elementType=n,s.type=u,s.lanes=p,s}function Sa(n,s,o,u){return n=ui(7,n,u,s),n.lanes=o,n}function Dm(n,s,o){return n=ui(6,n,null,s),n.lanes=o,n}function gv(n){var s=ui(18,null,null,0);return s.stateNode=n,s}function xm(n,s,o){return s=ui(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var yv=new WeakMap;function Ii(n,s){if(typeof n=="object"&&n!==null){var o=yv.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ht(s)},yv.set(n,s),s)}return{value:n,source:s,stack:ht(s)}}var Co=[],Do=0,Vh=null,yu=0,Ri=[],Ci=0,ys=null,fr=1,dr="";function Pr(n,s){Co[Do++]=yu,Co[Do++]=Vh,Vh=n,yu=s}function _v(n,s,o){Ri[Ci++]=fr,Ri[Ci++]=dr,Ri[Ci++]=ys,ys=n;var u=fr;n=dr;var d=32-Rt(u)-1;u&=~(1<<d),o+=1;var p=32-Rt(s)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,fr=1<<32-Rt(s)+d|o<<d|u,dr=p+n}else fr=1<<p|o<<d|u,dr=n}function Nm(n){n.return!==null&&(Pr(n,1),_v(n,1,0))}function Mm(n){for(;n===Vh;)Vh=Co[--Do],Co[Do]=null,yu=Co[--Do],Co[Do]=null;for(;n===ys;)ys=Ri[--Ci],Ri[Ci]=null,dr=Ri[--Ci],Ri[Ci]=null,fr=Ri[--Ci],Ri[Ci]=null}function vv(n,s){Ri[Ci++]=fr,Ri[Ci++]=dr,Ri[Ci++]=ys,fr=s.id,dr=s.overflow,ys=n}var Sn=null,wt=null,tt=!1,_s=null,Di=!1,Om=Error(r(519));function vs(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _u(Ii(s,n)),Om}function Ev(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Xt]=n,s[pn]=u,o){case"dialog":$e("cancel",s),$e("close",s);break;case"iframe":case"object":case"embed":$e("load",s);break;case"video":case"audio":for(o=0;o<zu.length;o++)$e(zu[o],s);break;case"source":$e("error",s);break;case"img":case"image":case"link":$e("error",s),$e("load",s);break;case"details":$e("toggle",s);break;case"input":$e("invalid",s),dh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":$e("invalid",s);break;case"textarea":$e("invalid",s),cs(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||LT(s.textContent,o)?(u.popover!=null&&($e("beforetoggle",s),$e("toggle",s)),u.onScroll!=null&&$e("scroll",s),u.onScrollEnd!=null&&$e("scrollend",s),u.onClick!=null&&(s.onclick=Li),s=!0):s=!1,s||vs(n,!0)}function Tv(n){for(Sn=n.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:Sn=Sn.return}}function xo(n){if(n!==Sn)return!1;if(!tt)return Tv(n),tt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Jp(n.type,n.memoizedProps)),o=!o),o&&wt&&vs(n),Tv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));wt=KT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));wt=KT(n)}else s===27?(s=wt,Os(n.type)?(n=ng,ng=null,wt=n):wt=s):wt=Sn?Ni(n.stateNode.nextSibling):null;return!0}function Aa(){wt=Sn=null,tt=!1}function Vm(){var n=_s;return n!==null&&(ei===null?ei=n:ei.push.apply(ei,n),_s=null),n}function _u(n){_s===null?_s=[n]:_s.push(n)}var Pm=j(null),wa=null,kr=null;function Es(n,s,o){$(Pm,s._currentValue),s._currentValue=o}function Lr(n){n._currentValue=Pm.current,te(Pm)}function km(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Lm(n,s,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var p=d.dependencies;if(p!==null){var v=d.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=d;for(var L=0;L<s.length;L++)if(A.context===s[L]){p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),km(p.return,o,n),u||(v=null);break e}p=A.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(r(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),km(v,o,n),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===n){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function No(n,s,o,u){n=null;for(var d=s,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var A=d.type;li(d.pendingProps.value,v.value)||(n!==null?n.push(A):n=[A])}}else if(d===Oe.current){if(v=d.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Gu):n=[Gu])}d=d.return}n!==null&&Lm(s,n,o,u),s.flags|=262144}function Ph(n){for(n=n.firstContext;n!==null;){if(!li(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ia(n){wa=n,kr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function An(n){return bv(wa,n)}function kh(n,s){return wa===null&&Ia(n),bv(n,s)}function bv(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},kr===null){if(n===null)throw Error(r(308));kr=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else kr=kr.next=s;return o}var pR=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},gR=i.unstable_scheduleCallback,yR=i.unstable_NormalPriority,Zt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Um(){return{controller:new pR,data:new Map,refCount:0}}function vu(n){n.refCount--,n.refCount===0&&gR(yR,function(){n.controller.abort()})}var Eu=null,jm=0,Mo=0,Oo=null;function _R(n,s){if(Eu===null){var o=Eu=[];jm=0,Mo=qp(),Oo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return jm++,s.then(Sv,Sv),s}function Sv(){if(--jm===0&&Eu!==null){Oo!==null&&(Oo.status="fulfilled");var n=Eu;Eu=null,Mo=0,Oo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function vR(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Av=X.S;X.S=function(n,s){oT=Yt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&_R(n,s),Av!==null&&Av(n,s)};var Ra=j(null);function zm(){var n=Ra.current;return n!==null?n:bt.pooledCache}function Lh(n,s){s===null?$(Ra,Ra.current):$(Ra,s.pool)}function wv(){var n=zm();return n===null?null:{parent:Zt._currentValue,pool:n}}var Vo=Error(r(460)),Bm=Error(r(474)),Uh=Error(r(542)),jh={then:function(){}};function Iv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Rv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Li,Li),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Dv(n),n;default:if(typeof s.status=="string")s.then(Li,Li);else{if(n=bt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Dv(n),n}throw Da=s,Vo}}function Ca(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Da=o,Vo):o}}var Da=null;function Cv(){if(Da===null)throw Error(r(459));var n=Da;return Da=null,n}function Dv(n){if(n===Vo||n===Uh)throw Error(r(483))}var Po=null,Tu=0;function zh(n){var s=Tu;return Tu+=1,Po===null&&(Po=[]),Rv(Po,n,s)}function bu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Bh(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function xv(n){function s(q,B){if(n){var Y=q.deletions;Y===null?(q.deletions=[B],q.flags|=16):Y.push(B)}}function o(q,B){if(!n)return null;for(;B!==null;)s(q,B),B=B.sibling;return null}function u(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function d(q,B){return q=Vr(q,B),q.index=0,q.sibling=null,q}function p(q,B,Y){return q.index=Y,n?(Y=q.alternate,Y!==null?(Y=Y.index,Y<B?(q.flags|=67108866,B):Y):(q.flags|=67108866,B)):(q.flags|=1048576,B)}function v(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function A(q,B,Y,ae){return B===null||B.tag!==6?(B=Dm(Y,q.mode,ae),B.return=q,B):(B=d(B,Y),B.return=q,B)}function L(q,B,Y,ae){var Ie=Y.type;return Ie===D?ie(q,B,Y.props.children,ae,Y.key):B!==null&&(B.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&Ca(Ie)===B.type)?(B=d(B,Y.props),bu(B,Y),B.return=q,B):(B=Oh(Y.type,Y.key,Y.props,null,q.mode,ae),bu(B,Y),B.return=q,B)}function Q(q,B,Y,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=xm(Y,q.mode,ae),B.return=q,B):(B=d(B,Y.children||[]),B.return=q,B)}function ie(q,B,Y,ae,Ie){return B===null||B.tag!==7?(B=Sa(Y,q.mode,ae,Ie),B.return=q,B):(B=d(B,Y),B.return=q,B)}function le(q,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Dm(""+B,q.mode,Y),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return Y=Oh(B.type,B.key,B.props,null,q.mode,Y),bu(Y,B),Y.return=q,Y;case P:return B=xm(B,q.mode,Y),B.return=q,B;case S:return B=Ca(B),le(q,B,Y)}if(Ne(B)||z(B))return B=Sa(B,q.mode,Y,null),B.return=q,B;if(typeof B.then=="function")return le(q,zh(B),Y);if(B.$$typeof===H)return le(q,kh(q,B),Y);Bh(q,B)}return null}function J(q,B,Y,ae){var Ie=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ie!==null?null:A(q,B,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===Ie?L(q,B,Y,ae):null;case P:return Y.key===Ie?Q(q,B,Y,ae):null;case S:return Y=Ca(Y),J(q,B,Y,ae)}if(Ne(Y)||z(Y))return Ie!==null?null:ie(q,B,Y,ae,null);if(typeof Y.then=="function")return J(q,B,zh(Y),ae);if(Y.$$typeof===H)return J(q,B,kh(q,Y),ae);Bh(q,Y)}return null}function ee(q,B,Y,ae,Ie){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return q=q.get(Y)||null,A(B,q,""+ae,Ie);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return q=q.get(ae.key===null?Y:ae.key)||null,L(B,q,ae,Ie);case P:return q=q.get(ae.key===null?Y:ae.key)||null,Q(B,q,ae,Ie);case S:return ae=Ca(ae),ee(q,B,Y,ae,Ie)}if(Ne(ae)||z(ae))return q=q.get(Y)||null,ie(B,q,ae,Ie,null);if(typeof ae.then=="function")return ee(q,B,Y,zh(ae),Ie);if(ae.$$typeof===H)return ee(q,B,Y,kh(B,ae),Ie);Bh(B,ae)}return null}function Ee(q,B,Y,ae){for(var Ie=null,st=null,be=B,Fe=B=0,Je=null;be!==null&&Fe<Y.length;Fe++){be.index>Fe?(Je=be,be=null):Je=be.sibling;var at=J(q,be,Y[Fe],ae);if(at===null){be===null&&(be=Je);break}n&&be&&at.alternate===null&&s(q,be),B=p(at,B,Fe),st===null?Ie=at:st.sibling=at,st=at,be=Je}if(Fe===Y.length)return o(q,be),tt&&Pr(q,Fe),Ie;if(be===null){for(;Fe<Y.length;Fe++)be=le(q,Y[Fe],ae),be!==null&&(B=p(be,B,Fe),st===null?Ie=be:st.sibling=be,st=be);return tt&&Pr(q,Fe),Ie}for(be=u(be);Fe<Y.length;Fe++)Je=ee(be,q,Fe,Y[Fe],ae),Je!==null&&(n&&Je.alternate!==null&&be.delete(Je.key===null?Fe:Je.key),B=p(Je,B,Fe),st===null?Ie=Je:st.sibling=Je,st=Je);return n&&be.forEach(function(Us){return s(q,Us)}),tt&&Pr(q,Fe),Ie}function xe(q,B,Y,ae){if(Y==null)throw Error(r(151));for(var Ie=null,st=null,be=B,Fe=B=0,Je=null,at=Y.next();be!==null&&!at.done;Fe++,at=Y.next()){be.index>Fe?(Je=be,be=null):Je=be.sibling;var Us=J(q,be,at.value,ae);if(Us===null){be===null&&(be=Je);break}n&&be&&Us.alternate===null&&s(q,be),B=p(Us,B,Fe),st===null?Ie=Us:st.sibling=Us,st=Us,be=Je}if(at.done)return o(q,be),tt&&Pr(q,Fe),Ie;if(be===null){for(;!at.done;Fe++,at=Y.next())at=le(q,at.value,ae),at!==null&&(B=p(at,B,Fe),st===null?Ie=at:st.sibling=at,st=at);return tt&&Pr(q,Fe),Ie}for(be=u(be);!at.done;Fe++,at=Y.next())at=ee(be,q,Fe,at.value,ae),at!==null&&(n&&at.alternate!==null&&be.delete(at.key===null?Fe:at.key),B=p(at,B,Fe),st===null?Ie=at:st.sibling=at,st=at);return n&&be.forEach(function(xC){return s(q,xC)}),tt&&Pr(q,Fe),Ie}function Tt(q,B,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===D&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var Ie=Y.key;B!==null;){if(B.key===Ie){if(Ie=Y.type,Ie===D){if(B.tag===7){o(q,B.sibling),ae=d(B,Y.props.children),ae.return=q,q=ae;break e}}else if(B.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&Ca(Ie)===B.type){o(q,B.sibling),ae=d(B,Y.props),bu(ae,Y),ae.return=q,q=ae;break e}o(q,B);break}else s(q,B);B=B.sibling}Y.type===D?(ae=Sa(Y.props.children,q.mode,ae,Y.key),ae.return=q,q=ae):(ae=Oh(Y.type,Y.key,Y.props,null,q.mode,ae),bu(ae,Y),ae.return=q,q=ae)}return v(q);case P:e:{for(Ie=Y.key;B!==null;){if(B.key===Ie)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){o(q,B.sibling),ae=d(B,Y.children||[]),ae.return=q,q=ae;break e}else{o(q,B);break}else s(q,B);B=B.sibling}ae=xm(Y,q.mode,ae),ae.return=q,q=ae}return v(q);case S:return Y=Ca(Y),Tt(q,B,Y,ae)}if(Ne(Y))return Ee(q,B,Y,ae);if(z(Y)){if(Ie=z(Y),typeof Ie!="function")throw Error(r(150));return Y=Ie.call(Y),xe(q,B,Y,ae)}if(typeof Y.then=="function")return Tt(q,B,zh(Y),ae);if(Y.$$typeof===H)return Tt(q,B,kh(q,Y),ae);Bh(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(o(q,B.sibling),ae=d(B,Y),ae.return=q,q=ae):(o(q,B),ae=Dm(Y,q.mode,ae),ae.return=q,q=ae),v(q)):o(q,B)}return function(q,B,Y,ae){try{Tu=0;var Ie=Tt(q,B,Y,ae);return Po=null,Ie}catch(be){if(be===Vo||be===Uh)throw be;var st=ui(29,be,null,q.mode);return st.lanes=ae,st.return=q,st}finally{}}}var xa=xv(!0),Nv=xv(!1),Ts=!1;function qm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function bs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ss(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(lt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Mh(n),mv(n,null,o),s}return Nh(n,u,s,o),Mh(n)}function Su(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Mn(n,o)}}function Hm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?d=p=s:p=p.next=s}else d=p=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Gm=!1;function Au(){if(Gm){var n=Oo;if(n!==null)throw n}}function wu(n,s,o,u){Gm=!1;var d=n.updateQueue;Ts=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var L=A,Q=L.next;L.next=null,v===null?p=Q:v.next=Q,v=L;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==v&&(A===null?ie.firstBaseUpdate=Q:A.next=Q,ie.lastBaseUpdate=L))}if(p!==null){var le=d.baseState;v=0,ie=Q=L=null,A=p;do{var J=A.lane&-536870913,ee=J!==A.lane;if(ee?(Xe&J)===J:(u&J)===J){J!==0&&J===Mo&&(Gm=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ee=n,xe=A;J=s;var Tt=o;switch(xe.tag){case 1:if(Ee=xe.payload,typeof Ee=="function"){le=Ee.call(Tt,le,J);break e}le=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=xe.payload,J=typeof Ee=="function"?Ee.call(Tt,le,J):Ee,J==null)break e;le=E({},le,J);break e;case 2:Ts=!0}}J=A.callback,J!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=d.callbacks,ee===null?d.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(Q=ie=ee,L=le):ie=ie.next=ee,v|=J;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);ie===null&&(L=le),d.baseState=L,d.firstBaseUpdate=Q,d.lastBaseUpdate=ie,p===null&&(d.shared.lanes=0),Cs|=v,n.lanes=v,n.memoizedState=le}}function Mv(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Ov(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Mv(o[n],s)}var ko=j(null),qh=j(0);function Vv(n,s){n=Kr,$(qh,n),$(ko,s),Kr=n|s.baseLanes}function Km(){$(qh,Kr),$(ko,ko.current)}function Ym(){Kr=qh.current,te(ko),te(qh)}var ci=j(null),xi=null;function As(n){var s=n.alternate;$(qt,qt.current&1),$(ci,n),xi===null&&(s===null||ko.current!==null||s.memoizedState!==null)&&(xi=n)}function Qm(n){$(qt,qt.current),$(ci,n),xi===null&&(xi=n)}function Pv(n){n.tag===22?($(qt,qt.current),$(ci,n),xi===null&&(xi=n)):ws()}function ws(){$(qt,qt.current),$(ci,ci.current)}function hi(n){te(ci),xi===n&&(xi=null),te(qt)}var qt=j(0);function Fh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||eg(o)||tg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ur=0,qe=null,vt=null,en=null,Hh=!1,Lo=!1,Na=!1,Gh=0,Iu=0,Uo=null,ER=0;function kt(){throw Error(r(321))}function $m(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!li(n[o],s[o]))return!1;return!0}function Xm(n,s,o,u,d,p){return Ur=p,qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=n===null||n.memoizedState===null?_E:hp,Na=!1,p=o(u,d),Na=!1,Lo&&(p=Lv(s,o,u,d)),kv(n),p}function kv(n){X.H=Du;var s=vt!==null&&vt.next!==null;if(Ur=0,en=vt=qe=null,Hh=!1,Iu=0,Uo=null,s)throw Error(r(300));n===null||tn||(n=n.dependencies,n!==null&&Ph(n)&&(tn=!0))}function Lv(n,s,o,u){qe=n;var d=0;do{if(Lo&&(Uo=null),Iu=0,Lo=!1,25<=d)throw Error(r(301));if(d+=1,en=vt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=vE,p=s(o,u)}while(Lo);return p}function TR(){var n=X.H,s=n.useState()[0];return s=typeof s.then=="function"?Ru(s):s,n=n.useState()[0],(vt!==null?vt.memoizedState:null)!==n&&(qe.flags|=1024),s}function Jm(){var n=Gh!==0;return Gh=0,n}function Wm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Zm(n){if(Hh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Hh=!1}Ur=0,en=vt=qe=null,Lo=!1,Iu=Gh=0,Uo=null}function Fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?qe.memoizedState=en=n:en=en.next=n,en}function Ft(){if(vt===null){var n=qe.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var s=en===null?qe.memoizedState:en.next;if(s!==null)en=s,vt=n;else{if(n===null)throw qe.alternate===null?Error(r(467)):Error(r(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},en===null?qe.memoizedState=en=n:en=en.next=n}return en}function Kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(n){var s=Iu;return Iu+=1,Uo===null&&(Uo=[]),n=Rv(Uo,n,s),s=qe,(en===null?s.memoizedState:en.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?_E:hp),n}function Yh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ru(n);if(n.$$typeof===H)return An(n)}throw Error(r(438,String(n)))}function ep(n){var s=null,o=qe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Kh(),qe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=O;return s.index++,o}function jr(n,s){return typeof s=="function"?s(n):s}function Qh(n){var s=Ft();return tp(s,vt,n)}function tp(n,s,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var d=n.baseQueue,p=u.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}s.baseQueue=d=p,u.pending=null}if(p=n.baseState,d===null)n.memoizedState=p;else{s=d.next;var A=v=null,L=null,Q=s,ie=!1;do{var le=Q.lane&-536870913;if(le!==Q.lane?(Xe&le)===le:(Ur&le)===le){var J=Q.revertLane;if(J===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),le===Mo&&(ie=!0);else if((Ur&J)===J){Q=Q.next,J===Mo&&(ie=!0);continue}else le={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(A=L=le,v=p):L=L.next=le,qe.lanes|=J,Cs|=J;le=Q.action,Na&&o(p,le),p=Q.hasEagerState?Q.eagerState:o(p,le)}else J={lane:le,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(A=L=J,v=p):L=L.next=J,qe.lanes|=le,Cs|=le;Q=Q.next}while(Q!==null&&Q!==s);if(L===null?v=p:L.next=A,!li(p,n.memoizedState)&&(tn=!0,ie&&(o=Oo,o!==null)))throw o;n.memoizedState=p,n.baseState=v,n.baseQueue=L,u.lastRenderedState=p}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function np(n){var s=Ft(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,p=s.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);li(p,s.memoizedState)||(tn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function Uv(n,s,o){var u=qe,d=Ft(),p=tt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var v=!li((vt||d).memoizedState,o);if(v&&(d.memoizedState=o,tn=!0),d=d.queue,sp(Bv.bind(null,u,d,n),[n]),d.getSnapshot!==s||v||en!==null&&en.memoizedState.tag&1){if(u.flags|=2048,jo(9,{destroy:void 0},zv.bind(null,u,d,o,s),null),bt===null)throw Error(r(349));p||(Ur&127)!==0||jv(u,s,o)}return o}function jv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=qe.updateQueue,s===null?(s=Kh(),qe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function zv(n,s,o,u){s.value=o,s.getSnapshot=u,qv(s)&&Fv(n)}function Bv(n,s,o){return o(function(){qv(s)&&Fv(n)})}function qv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!li(n,o)}catch{return!0}}function Fv(n){var s=ba(n,2);s!==null&&ti(s,n,2)}function ip(n){var s=Fn();if(typeof n=="function"){var o=n;if(n=o(),Na){Dn(!0);try{o()}finally{Dn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:n},s}function Hv(n,s,o,u){return n.baseState=o,tp(n,vt,typeof u=="function"?u:jr)}function bR(n,s,o,u,d){if(Jh(n))throw Error(r(485));if(n=s.action,n!==null){var p={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};X.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,Gv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function Gv(n,s){var o=s.action,u=s.payload,d=n.state;if(s.isTransition){var p=X.T,v={};X.T=v;try{var A=o(d,u),L=X.S;L!==null&&L(v,A),Kv(n,s,A)}catch(Q){rp(n,s,Q)}finally{p!==null&&v.types!==null&&(p.types=v.types),X.T=p}}else try{p=o(d,u),Kv(n,s,p)}catch(Q){rp(n,s,Q)}}function Kv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Yv(n,s,u)},function(u){return rp(n,s,u)}):Yv(n,s,o)}function Yv(n,s,o){s.status="fulfilled",s.value=o,Qv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Gv(n,o)))}function rp(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Qv(s),s=s.next;while(s!==u)}n.action=null}function Qv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function $v(n,s){return s}function Xv(n,s){if(tt){var o=bt.formState;if(o!==null){e:{var u=qe;if(tt){if(wt){t:{for(var d=wt,p=Di;d.nodeType!==8;){if(!p){d=null;break t}if(d=Ni(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){wt=Ni(d.nextSibling),u=d.data==="F!";break e}}vs(u)}u=!1}u&&(s=o[0])}}return o=Fn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$v,lastRenderedState:s},o.queue=u,o=pE.bind(null,qe,u),u.dispatch=o,u=ip(!1),p=cp.bind(null,qe,!1,u.queue),u=Fn(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,o=bR.bind(null,qe,d,p,o),d.dispatch=o,u.memoizedState=n,[s,o,!1]}function Jv(n){var s=Ft();return Wv(s,vt,n)}function Wv(n,s,o){if(s=tp(n,s,$v)[0],n=Qh(jr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ru(s)}catch(v){throw v===Vo?Uh:v}else u=s;s=Ft();var d=s.queue,p=d.dispatch;return o!==s.memoizedState&&(qe.flags|=2048,jo(9,{destroy:void 0},SR.bind(null,d,o),null)),[u,p,n]}function SR(n,s){n.action=s}function Zv(n){var s=Ft(),o=vt;if(o!==null)return Wv(s,o,n);Ft(),s=s.memoizedState,o=Ft();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function jo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=qe.updateQueue,s===null&&(s=Kh(),qe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function eE(){return Ft().memoizedState}function $h(n,s,o,u){var d=Fn();qe.flags|=n,d.memoizedState=jo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Xh(n,s,o,u){var d=Ft();u=u===void 0?null:u;var p=d.memoizedState.inst;vt!==null&&u!==null&&$m(u,vt.memoizedState.deps)?d.memoizedState=jo(s,p,o,u):(qe.flags|=n,d.memoizedState=jo(1|s,p,o,u))}function tE(n,s){$h(8390656,8,n,s)}function sp(n,s){Xh(2048,8,n,s)}function AR(n){qe.flags|=4;var s=qe.updateQueue;if(s===null)s=Kh(),qe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function nE(n){var s=Ft().memoizedState;return AR({ref:s,nextImpl:n}),function(){if((lt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function iE(n,s){return Xh(4,2,n,s)}function rE(n,s){return Xh(4,4,n,s)}function sE(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function aE(n,s,o){o=o!=null?o.concat([n]):null,Xh(4,4,sE.bind(null,s,n),o)}function ap(){}function oE(n,s){var o=Ft();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&$m(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function lE(n,s){var o=Ft();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&$m(s,u[1]))return u[0];if(u=n(),Na){Dn(!0);try{n()}finally{Dn(!1)}}return o.memoizedState=[u,s],u}function op(n,s,o){return o===void 0||(Ur&1073741824)!==0&&(Xe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=uT(),qe.lanes|=n,Cs|=n,o)}function uE(n,s,o,u){return li(o,s)?o:ko.current!==null?(n=op(n,o,u),li(n,s)||(tn=!0),n):(Ur&42)===0||(Ur&1073741824)!==0&&(Xe&261930)===0?(tn=!0,n.memoizedState=o):(n=uT(),qe.lanes|=n,Cs|=n,s)}function cE(n,s,o,u,d){var p=ue.p;ue.p=p!==0&&8>p?p:8;var v=X.T,A={};X.T=A,cp(n,!1,s,o);try{var L=d(),Q=X.S;if(Q!==null&&Q(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ie=vR(L,u);Cu(n,s,ie,mi(n))}else Cu(n,s,u,mi(n))}catch(le){Cu(n,s,{then:function(){},status:"rejected",reason:le},mi())}finally{ue.p=p,v!==null&&A.types!==null&&(v.types=A.types),X.T=v}}function wR(){}function lp(n,s,o,u){if(n.tag!==5)throw Error(r(476));var d=hE(n).queue;cE(n,d,s,_e,o===null?wR:function(){return fE(n),o(u)})}function hE(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function fE(n){var s=hE(n);s.next===null&&(s=n.alternate.memoizedState),Cu(n,s.next.queue,{},mi())}function up(){return An(Gu)}function dE(){return Ft().memoizedState}function mE(){return Ft().memoizedState}function IR(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=mi();n=bs(o);var u=Ss(s,n,o);u!==null&&(ti(u,s,o),Su(u,s,o)),s={cache:Um()},n.payload=s;return}s=s.return}}function RR(n,s,o){var u=mi();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jh(n)?gE(s,o):(o=Rm(n,s,o,u),o!==null&&(ti(o,n,u),yE(o,s,u)))}function pE(n,s,o){var u=mi();Cu(n,s,o,u)}function Cu(n,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jh(n))gE(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,A=p(v,o);if(d.hasEagerState=!0,d.eagerState=A,li(A,v))return Nh(n,s,d,0),bt===null&&xh(),!1}catch{}finally{}if(o=Rm(n,s,d,u),o!==null)return ti(o,n,u),yE(o,s,u),!0}return!1}function cp(n,s,o,u){if(u={lane:2,revertLane:qp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Jh(n)){if(s)throw Error(r(479))}else s=Rm(n,o,u,2),s!==null&&ti(s,n,2)}function Jh(n){var s=n.alternate;return n===qe||s!==null&&s===qe}function gE(n,s){Lo=Hh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function yE(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Mn(n,o)}}var Du={readContext:An,use:Yh,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};Du.useEffectEvent=kt;var _E={readContext:An,use:Yh,useCallback:function(n,s){return Fn().memoizedState=[n,s===void 0?null:s],n},useContext:An,useEffect:tE,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,$h(4194308,4,sE.bind(null,s,n),o)},useLayoutEffect:function(n,s){return $h(4194308,4,n,s)},useInsertionEffect:function(n,s){$h(4,2,n,s)},useMemo:function(n,s){var o=Fn();s=s===void 0?null:s;var u=n();if(Na){Dn(!0);try{n()}finally{Dn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=Fn();if(o!==void 0){var d=o(s);if(Na){Dn(!0);try{o(s)}finally{Dn(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=RR.bind(null,qe,n),[u.memoizedState,n]},useRef:function(n){var s=Fn();return n={current:n},s.memoizedState=n},useState:function(n){n=ip(n);var s=n.queue,o=pE.bind(null,qe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:ap,useDeferredValue:function(n,s){var o=Fn();return op(o,n,s)},useTransition:function(){var n=ip(!1);return n=cE.bind(null,qe,n.queue,!0,!1),Fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=qe,d=Fn();if(tt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),bt===null)throw Error(r(349));(Xe&127)!==0||jv(u,s,o)}d.memoizedState=o;var p={value:o,getSnapshot:s};return d.queue=p,tE(Bv.bind(null,u,p,n),[n]),u.flags|=2048,jo(9,{destroy:void 0},zv.bind(null,u,p,o,s),null),o},useId:function(){var n=Fn(),s=bt.identifierPrefix;if(tt){var o=dr,u=fr;o=(u&~(1<<32-Rt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Gh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=ER++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:up,useFormState:Xv,useActionState:Xv,useOptimistic:function(n){var s=Fn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=cp.bind(null,qe,!0,o),o.dispatch=s,[n,s]},useMemoCache:ep,useCacheRefresh:function(){return Fn().memoizedState=IR.bind(null,qe)},useEffectEvent:function(n){var s=Fn(),o={impl:n};return s.memoizedState=o,function(){if((lt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},hp={readContext:An,use:Yh,useCallback:oE,useContext:An,useEffect:sp,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:rE,useMemo:lE,useReducer:Qh,useRef:eE,useState:function(){return Qh(jr)},useDebugValue:ap,useDeferredValue:function(n,s){var o=Ft();return uE(o,vt.memoizedState,n,s)},useTransition:function(){var n=Qh(jr)[0],s=Ft().memoizedState;return[typeof n=="boolean"?n:Ru(n),s]},useSyncExternalStore:Uv,useId:dE,useHostTransitionStatus:up,useFormState:Jv,useActionState:Jv,useOptimistic:function(n,s){var o=Ft();return Hv(o,vt,n,s)},useMemoCache:ep,useCacheRefresh:mE};hp.useEffectEvent=nE;var vE={readContext:An,use:Yh,useCallback:oE,useContext:An,useEffect:sp,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:rE,useMemo:lE,useReducer:np,useRef:eE,useState:function(){return np(jr)},useDebugValue:ap,useDeferredValue:function(n,s){var o=Ft();return vt===null?op(o,n,s):uE(o,vt.memoizedState,n,s)},useTransition:function(){var n=np(jr)[0],s=Ft().memoizedState;return[typeof n=="boolean"?n:Ru(n),s]},useSyncExternalStore:Uv,useId:dE,useHostTransitionStatus:up,useFormState:Zv,useActionState:Zv,useOptimistic:function(n,s){var o=Ft();return vt!==null?Hv(o,vt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:ep,useCacheRefresh:mE};vE.useEffectEvent=nE;function fp(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var dp={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=mi(),d=bs(u);d.payload=s,o!=null&&(d.callback=o),s=Ss(n,d,u),s!==null&&(ti(s,n,u),Su(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=mi(),d=bs(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Ss(n,d,u),s!==null&&(ti(s,n,u),Su(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=mi(),u=bs(o);u.tag=2,s!=null&&(u.callback=s),s=Ss(n,u,o),s!==null&&(ti(s,n,o),Su(s,n,o))}};function EE(n,s,o,u,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):s.prototype&&s.prototype.isPureReactComponent?!pu(o,u)||!pu(d,p):!0}function TE(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&dp.enqueueReplaceState(s,s.state,null)}function Ma(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function bE(n){Dh(n)}function SE(n){console.error(n)}function AE(n){Dh(n)}function Wh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function wE(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function mp(n,s,o){return o=bs(o),o.tag=3,o.payload={element:null},o.callback=function(){Wh(n,s)},o}function IE(n){return n=bs(n),n.tag=3,n}function RE(n,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;n.payload=function(){return d(p)},n.callback=function(){wE(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){wE(s,o,u),typeof d!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function CR(n,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&No(s,o,d,!0),o=ci.current,o!==null){switch(o.tag){case 31:case 13:return xi===null?hf():o.alternate===null&&Lt===0&&(Lt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===jh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),jp(n,u,d)),!1;case 22:return o.flags|=65536,u===jh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),jp(n,u,d)),!1}throw Error(r(435,o.tag))}return jp(n,u,d),hf(),!1}if(tt)return s=ci.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Om&&(n=Error(r(422),{cause:u}),_u(Ii(n,o)))):(u!==Om&&(s=Error(r(423),{cause:u}),_u(Ii(s,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Ii(u,o),d=mp(n.stateNode,u,d),Hm(n,d),Lt!==4&&(Lt=2)),!1;var p=Error(r(520),{cause:u});if(p=Ii(p,o),Lu===null?Lu=[p]:Lu.push(p),Lt!==4&&(Lt=2),s===null)return!0;u=Ii(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=mp(o.stateNode,u,n),Hm(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ds===null||!Ds.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=IE(d),RE(d,n,o,u),Hm(o,d),!1}o=o.return}while(o!==null);return!1}var pp=Error(r(461)),tn=!1;function wn(n,s,o,u){s.child=n===null?Nv(s,null,o,u):xa(s,n.child,o,u)}function CE(n,s,o,u,d){o=o.render;var p=s.ref;if("ref"in u){var v={};for(var A in u)A!=="ref"&&(v[A]=u[A])}else v=u;return Ia(s),u=Xm(n,s,o,v,p,d),A=Jm(),n!==null&&!tn?(Wm(n,s,d),zr(n,s,d)):(tt&&A&&Nm(s),s.flags|=1,wn(n,s,u,d),s.child)}function DE(n,s,o,u,d){if(n===null){var p=o.type;return typeof p=="function"&&!Cm(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,xE(n,s,p,u,d)):(n=Oh(o.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!Sp(n,d)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:pu,o(v,u)&&n.ref===s.ref)return zr(n,s,d)}return s.flags|=1,n=Vr(p,u),n.ref=s.ref,n.return=s,s.child=n}function xE(n,s,o,u,d){if(n!==null){var p=n.memoizedProps;if(pu(p,u)&&n.ref===s.ref)if(tn=!1,s.pendingProps=u=p,Sp(n,d))(n.flags&131072)!==0&&(tn=!0);else return s.lanes=n.lanes,zr(n,s,d)}return gp(n,s,o,u,d)}function NE(n,s,o,u){var d=u.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=s.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~p}else u=0,s.child=null;return ME(n,s,p,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Lh(s,p!==null?p.cachePool:null),p!==null?Vv(s,p):Km(),Pv(s);else return u=s.lanes=536870912,ME(n,s,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Lh(s,p.cachePool),Vv(s,p),ws(),s.memoizedState=null):(n!==null&&Lh(s,null),Km(),ws());return wn(n,s,d,o),s.child}function xu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ME(n,s,o,u,d){var p=zm();return p=p===null?null:{parent:Zt._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},n!==null&&Lh(s,null),Km(),Pv(s),n!==null&&No(n,s,u,!0),s.childLanes=d,null}function Zh(n,s){return s=tf({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function OE(n,s,o){return xa(s,n.child,null,o),n=Zh(s,s.pendingProps),n.flags|=2,hi(s),s.memoizedState=null,n}function DR(n,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(tt){if(u.mode==="hidden")return n=Zh(s,u),s.lanes=536870912,xu(null,n);if(Qm(s),(n=wt)?(n=GT(n,Di),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ys!==null?{id:fr,overflow:dr}:null,retryLane:536870912,hydrationErrors:null},o=gv(n),o.return=s,s.child=o,Sn=s,wt=null)):n=null,n===null)throw vs(s);return s.lanes=536870912,null}return Zh(s,u)}var p=n.memoizedState;if(p!==null){var v=p.dehydrated;if(Qm(s),d)if(s.flags&256)s.flags&=-257,s=OE(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(tn||No(n,s,o,!1),d=(o&n.childLanes)!==0,tn||d){if(u=bt,u!==null&&(v=jn(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,ba(n,v),ti(u,n,v),pp;hf(),s=OE(n,s,o)}else n=p.treeContext,wt=Ni(v.nextSibling),Sn=s,tt=!0,_s=null,Di=!1,n!==null&&vv(s,n),s=Zh(s,u),s.flags|=4096;return s}return n=Vr(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function ef(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function gp(n,s,o,u,d){return Ia(s),o=Xm(n,s,o,u,void 0,d),u=Jm(),n!==null&&!tn?(Wm(n,s,d),zr(n,s,d)):(tt&&u&&Nm(s),s.flags|=1,wn(n,s,o,d),s.child)}function VE(n,s,o,u,d,p){return Ia(s),s.updateQueue=null,o=Lv(s,u,o,d),kv(n),u=Jm(),n!==null&&!tn?(Wm(n,s,p),zr(n,s,p)):(tt&&u&&Nm(s),s.flags|=1,wn(n,s,o,p),s.child)}function PE(n,s,o,u,d){if(Ia(s),s.stateNode===null){var p=Ro,v=o.contextType;typeof v=="object"&&v!==null&&(p=An(v)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=dp,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},qm(s),v=o.contextType,p.context=typeof v=="object"&&v!==null?An(v):Ro,p.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(fp(s,o,v,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&dp.enqueueReplaceState(p,p.state,null),wu(s,u,p,d),Au(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){p=s.stateNode;var A=s.memoizedProps,L=Ma(o,A);p.props=L;var Q=p.context,ie=o.contextType;v=Ro,typeof ie=="object"&&ie!==null&&(v=An(ie));var le=o.getDerivedStateFromProps;ie=typeof le=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,ie||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||Q!==v)&&TE(s,p,u,v),Ts=!1;var J=s.memoizedState;p.state=J,wu(s,u,p,d),Au(),Q=s.memoizedState,A||J!==Q||Ts?(typeof le=="function"&&(fp(s,o,le,u),Q=s.memoizedState),(L=Ts||EE(s,o,L,u,J,Q,v))?(ie||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=Q),p.props=u,p.state=Q,p.context=v,u=L):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Fm(n,s),v=s.memoizedProps,ie=Ma(o,v),p.props=ie,le=s.pendingProps,J=p.context,Q=o.contextType,L=Ro,typeof Q=="object"&&Q!==null&&(L=An(Q)),A=o.getDerivedStateFromProps,(Q=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==le||J!==L)&&TE(s,p,u,L),Ts=!1,J=s.memoizedState,p.state=J,wu(s,u,p,d),Au();var ee=s.memoizedState;v!==le||J!==ee||Ts||n!==null&&n.dependencies!==null&&Ph(n.dependencies)?(typeof A=="function"&&(fp(s,o,A,u),ee=s.memoizedState),(ie=Ts||EE(s,o,ie,u,J,ee,L)||n!==null&&n.dependencies!==null&&Ph(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ee,L),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ee,L)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ee),p.props=u,p.state=ee,p.context=L,u=ie):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),u=!1)}return p=u,ef(n,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&u?(s.child=xa(s,n.child,null,d),s.child=xa(s,null,o,d)):wn(n,s,o,d),s.memoizedState=p.state,n=s.child):n=zr(n,s,d),n}function kE(n,s,o,u){return Aa(),s.flags|=256,wn(n,s,o,u),s.child}var yp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _p(n){return{baseLanes:n,cachePool:wv()}}function vp(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=di),n}function LE(n,s,o){var u=s.pendingProps,d=!1,p=(s.flags&128)!==0,v;if((v=p)||(v=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(tt){if(d?As(s):ws(),(n=wt)?(n=GT(n,Di),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ys!==null?{id:fr,overflow:dr}:null,retryLane:536870912,hydrationErrors:null},o=gv(n),o.return=s,s.child=o,Sn=s,wt=null)):n=null,n===null)throw vs(s);return tg(n)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,d?(ws(),d=s.mode,A=tf({mode:"hidden",children:A},d),u=Sa(u,d,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=_p(o),u.childLanes=vp(n,v,o),s.memoizedState=yp,xu(null,u)):(As(s),Ep(s,A))}var L=n.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(p)s.flags&256?(As(s),s.flags&=-257,s=Tp(n,s,o)):s.memoizedState!==null?(ws(),s.child=n.child,s.flags|=128,s=null):(ws(),A=u.fallback,d=s.mode,u=tf({mode:"visible",children:u.children},d),A=Sa(A,d,o,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,xa(s,n.child,null,o),u=s.child,u.memoizedState=_p(o),u.childLanes=vp(n,v,o),s.memoizedState=yp,s=xu(null,u));else if(As(s),tg(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var Q=v.dgst;v=Q,u=Error(r(419)),u.stack="",u.digest=v,_u({value:u,source:null,stack:null}),s=Tp(n,s,o)}else if(tn||No(n,s,o,!1),v=(o&n.childLanes)!==0,tn||v){if(v=bt,v!==null&&(u=jn(v,o),u!==0&&u!==L.retryLane))throw L.retryLane=u,ba(n,u),ti(v,n,u),pp;eg(A)||hf(),s=Tp(n,s,o)}else eg(A)?(s.flags|=192,s.child=n.child,s=null):(n=L.treeContext,wt=Ni(A.nextSibling),Sn=s,tt=!0,_s=null,Di=!1,n!==null&&vv(s,n),s=Ep(s,u.children),s.flags|=4096);return s}return d?(ws(),A=u.fallback,d=s.mode,L=n.child,Q=L.sibling,u=Vr(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,Q!==null?A=Vr(Q,A):(A=Sa(A,d,o,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,xu(null,u),u=s.child,A=n.child.memoizedState,A===null?A=_p(o):(d=A.cachePool,d!==null?(L=Zt._currentValue,d=d.parent!==L?{parent:L,pool:L}:d):d=wv(),A={baseLanes:A.baseLanes|o,cachePool:d}),u.memoizedState=A,u.childLanes=vp(n,v,o),s.memoizedState=yp,xu(n.child,u)):(As(s),o=n.child,n=o.sibling,o=Vr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=o,s.memoizedState=null,o)}function Ep(n,s){return s=tf({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function tf(n,s){return n=ui(22,n,null,s),n.lanes=0,n}function Tp(n,s,o){return xa(s,n.child,null,o),n=Ep(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function UE(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),km(n.return,s,o)}function bp(n,s,o,u,d,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=d,v.treeForkCount=p)}function jE(n,s,o){var u=s.pendingProps,d=u.revealOrder,p=u.tail;u=u.children;var v=qt.current,A=(v&2)!==0;if(A?(v=v&1|2,s.flags|=128):v&=1,$(qt,v),wn(n,s,u,o),u=tt?yu:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&UE(n,o,s);else if(n.tag===19)UE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)n=o.alternate,n!==null&&Fh(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),bp(s,!1,d,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Fh(n)===null){s.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}bp(s,!0,o,null,p,u);break;case"together":bp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function zr(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Cs|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(No(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=Vr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Vr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Sp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ph(n)))}function xR(n,s,o){switch(s.tag){case 3:Ke(s,s.stateNode.containerInfo),Es(s,Zt,n.memoizedState.cache),Aa();break;case 27:case 5:he(s);break;case 4:Ke(s,s.stateNode.containerInfo);break;case 10:Es(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Qm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(As(s),s.flags|=128,null):(o&s.child.childLanes)!==0?LE(n,s,o):(As(s),n=zr(n,s,o),n!==null?n.sibling:null);As(s);break;case 19:var d=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(No(n,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return jE(n,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),$(qt,qt.current),u)break;return null;case 22:return s.lanes=0,NE(n,s,o,s.pendingProps);case 24:Es(s,Zt,n.memoizedState.cache)}return zr(n,s,o)}function zE(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)tn=!0;else{if(!Sp(n,o)&&(s.flags&128)===0)return tn=!1,xR(n,s,o);tn=(n.flags&131072)!==0}else tn=!1,tt&&(s.flags&1048576)!==0&&_v(s,yu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Ca(s.elementType),s.type=n,typeof n=="function")Cm(n)?(u=Ma(n,u),s.tag=1,s=PE(null,s,n,u,o)):(s.tag=0,s=gp(null,s,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===re){s.tag=11,s=CE(null,s,n,u,o);break e}else if(d===R){s.tag=14,s=DE(null,s,n,u,o);break e}}throw s=we(n)||n,Error(r(306,s,""))}}return s;case 0:return gp(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=Ma(u,s.pendingProps),PE(n,s,u,d,o);case 3:e:{if(Ke(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;d=p.element,Fm(n,s),wu(s,u,null,o);var v=s.memoizedState;if(u=v.cache,Es(s,Zt,u),u!==p.cache&&Lm(s,[Zt],o,!0),Au(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=kE(n,s,u,o);break e}else if(u!==d){d=Ii(Error(r(424)),s),_u(d),s=kE(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(wt=Ni(n.firstChild),Sn=s,tt=!0,_s=null,Di=!0,o=Nv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Aa(),u===d){s=zr(n,s,o);break e}wn(n,s,u,o)}s=s.child}return s;case 26:return ef(n,s),n===null?(o=JT(s.type,null,s.pendingProps,null))?s.memoizedState=o:tt||(o=s.type,n=s.pendingProps,u=_f(ye.current).createElement(o),u[Xt]=s,u[pn]=n,In(u,o,n),Jt(u),s.stateNode=u):s.memoizedState=JT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return he(s),n===null&&tt&&(u=s.stateNode=QT(s.type,s.pendingProps,ye.current),Sn=s,Di=!0,d=wt,Os(s.type)?(ng=d,wt=Ni(u.firstChild)):wt=d),wn(n,s,s.pendingProps.children,o),ef(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&tt&&((d=u=wt)&&(u=aC(u,s.type,s.pendingProps,Di),u!==null?(s.stateNode=u,Sn=s,wt=Ni(u.firstChild),Di=!1,d=!0):d=!1),d||vs(s)),he(s),d=s.type,p=s.pendingProps,v=n!==null?n.memoizedProps:null,u=p.children,Jp(d,p)?u=null:v!==null&&Jp(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=Xm(n,s,TR,null,null,o),Gu._currentValue=d),ef(n,s),wn(n,s,u,o),s.child;case 6:return n===null&&tt&&((n=o=wt)&&(o=oC(o,s.pendingProps,Di),o!==null?(s.stateNode=o,Sn=s,wt=null,n=!0):n=!1),n||vs(s)),null;case 13:return LE(n,s,o);case 4:return Ke(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=xa(s,null,u,o):wn(n,s,u,o),s.child;case 11:return CE(n,s,s.type,s.pendingProps,o);case 7:return wn(n,s,s.pendingProps,o),s.child;case 8:return wn(n,s,s.pendingProps.children,o),s.child;case 12:return wn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Es(s,s.type,u.value),wn(n,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Ia(s),d=An(d),u=u(d),s.flags|=1,wn(n,s,u,o),s.child;case 14:return DE(n,s,s.type,s.pendingProps,o);case 15:return xE(n,s,s.type,s.pendingProps,o);case 19:return jE(n,s,o);case 31:return DR(n,s,o);case 22:return NE(n,s,o,s.pendingProps);case 24:return Ia(s),u=An(Zt),n===null?(d=zm(),d===null&&(d=bt,p=Um(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),s.memoizedState={parent:u,cache:d},qm(s),Es(s,Zt,d)):((n.lanes&o)!==0&&(Fm(n,s),wu(s,null,null,o),Au()),d=n.memoizedState,p=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Es(s,Zt,u)):(u=p.cache,Es(s,Zt,u),u!==d.cache&&Lm(s,[Zt],o,!0))),wn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Br(n){n.flags|=4}function Ap(n,s,o,u,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(dT())n.flags|=8192;else throw Da=jh,Bm}else n.flags&=-16777217}function BE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!nb(s))if(dT())n.flags|=8192;else throw Da=jh,Bm}function nf(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?mn():536870912,n.lanes|=s,Fo|=s)}function Nu(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function It(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function NR(n,s,o){var u=s.pendingProps;switch(Mm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(s),null;case 1:return It(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Lr(Zt),Le(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(xo(s)?Br(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Vm())),It(s),null;case 26:var d=s.type,p=s.memoizedState;return n===null?(Br(s),p!==null?(It(s),BE(s,p)):(It(s),Ap(s,d,null,u,o))):p?p!==n.memoizedState?(Br(s),It(s),BE(s,p)):(It(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Br(s),It(s),Ap(s,d,n,u,o)),null;case 27:if(De(s),o=ye.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Br(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return It(s),null}n=ce.current,xo(s)?Ev(s):(n=QT(d,u,o),s.stateNode=n,Br(s))}return It(s),null;case 5:if(De(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Br(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return It(s),null}if(p=ce.current,xo(s))Ev(s);else{var v=_f(ye.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(d,{is:u.is}):v.createElement(d)}}p[Xt]=s,p[pn]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=p;e:switch(In(p,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Br(s)}}return It(s),Ap(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Br(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=ye.current,xo(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,d=Sn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Xt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||LT(n.nodeValue,o)),n||vs(s,!0)}else n=_f(n).createTextNode(u),n[Xt]=s,s.stateNode=n}return It(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=xo(s),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Xt]=s}else Aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;It(s),n=!1}else o=Vm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(hi(s),s):(hi(s),null);if((s.flags&128)!==0)throw Error(r(558))}return It(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=xo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Xt]=s}else Aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;It(s),d=!1}else d=Vm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(hi(s),s):(hi(s),null)}return hi(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),nf(s,s.updateQueue),It(s),null);case 4:return Le(),n===null&&Kp(s.stateNode.containerInfo),It(s),null;case 10:return Lr(s.type),It(s),null;case 19:if(te(qt),u=s.memoizedState,u===null)return It(s),null;if(d=(s.flags&128)!==0,p=u.rendering,p===null)if(d)Nu(u,!1);else{if(Lt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=Fh(n),p!==null){for(s.flags|=128,Nu(u,!1),n=p.updateQueue,s.updateQueue=n,nf(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)pv(o,n),o=o.sibling;return $(qt,qt.current&1|2),tt&&Pr(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Yt()>lf&&(s.flags|=128,d=!0,Nu(u,!1),s.lanes=4194304)}else{if(!d)if(n=Fh(p),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,nf(s,n),Nu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!tt)return It(s),null}else 2*Yt()-u.renderingStartTime>lf&&o!==536870912&&(s.flags|=128,d=!0,Nu(u,!1),s.lanes=4194304);u.isBackwards?(p.sibling=s.child,s.child=p):(n=u.last,n!==null?n.sibling=p:s.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Yt(),n.sibling=null,o=qt.current,$(qt,d?o&1|2:o&1),tt&&Pr(s,u.treeForkCount),n):(It(s),null);case 22:case 23:return hi(s),Ym(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(It(s),s.subtreeFlags&6&&(s.flags|=8192)):It(s),o=s.updateQueue,o!==null&&nf(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&te(Ra),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Lr(Zt),It(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function MR(n,s){switch(Mm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Lr(Zt),Le(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return De(s),null;case 31:if(s.memoizedState!==null){if(hi(s),s.alternate===null)throw Error(r(340));Aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(hi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return te(qt),null;case 4:return Le(),null;case 10:return Lr(s.type),null;case 22:case 23:return hi(s),Ym(),n!==null&&te(Ra),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Lr(Zt),null;case 25:return null;default:return null}}function qE(n,s){switch(Mm(s),s.tag){case 3:Lr(Zt),Le();break;case 26:case 27:case 5:De(s);break;case 4:Le();break;case 31:s.memoizedState!==null&&hi(s);break;case 13:hi(s);break;case 19:te(qt);break;case 10:Lr(s.type);break;case 22:case 23:hi(s),Ym(),n!==null&&te(Ra);break;case 24:Lr(Zt)}}function Mu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==d)}}catch(A){mt(s,s.return,A)}}function Is(n,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&n)===n){var v=u.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,d=s;var L=o,Q=A;try{Q()}catch(ie){mt(d,L,ie)}}}u=u.next}while(u!==p)}}catch(ie){mt(s,s.return,ie)}}function FE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Ov(s,o)}catch(u){mt(n,n.return,u)}}}function HE(n,s,o){o.props=Ma(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){mt(n,s,u)}}function Ou(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){mt(n,s,d)}}function mr(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){mt(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){mt(n,s,d)}else o.current=null}function GE(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){mt(n,n.return,d)}}function wp(n,s,o){try{var u=n.stateNode;eC(u,n.type,o,s),u[pn]=s}catch(d){mt(n,n.return,d)}}function KE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Os(n.type)||n.tag===4}function Ip(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||KE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Os(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rp(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Li));else if(u!==4&&(u===27&&Os(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Rp(n,s,o),n=n.sibling;n!==null;)Rp(n,s,o),n=n.sibling}function rf(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Os(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(rf(n,s,o),n=n.sibling;n!==null;)rf(n,s,o),n=n.sibling}function YE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);In(s,u,o),s[Xt]=n,s[pn]=o}catch(p){mt(n,n.return,p)}}var qr=!1,nn=!1,Cp=!1,QE=typeof WeakSet=="function"?WeakSet:Set,yn=null;function OR(n,s){if(n=n.containerInfo,$p=wf,n=av(n),Tm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,A=-1,L=-1,Q=0,ie=0,le=n,J=null;t:for(;;){for(var ee;le!==o||d!==0&&le.nodeType!==3||(A=v+d),le!==p||u!==0&&le.nodeType!==3||(L=v+u),le.nodeType===3&&(v+=le.nodeValue.length),(ee=le.firstChild)!==null;)J=le,le=ee;for(;;){if(le===n)break t;if(J===o&&++Q===d&&(A=v),J===p&&++ie===u&&(L=v),(ee=le.nextSibling)!==null)break;le=J,J=le.parentNode}le=ee}o=A===-1||L===-1?null:{start:A,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(Xp={focusedElem:n,selectionRange:o},wf=!1,yn=s;yn!==null;)if(s=yn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,yn=n;else for(;yn!==null;){switch(s=yn,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,d=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ee=Ma(o.type,d);n=u.getSnapshotBeforeUpdate(Ee,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(xe){mt(o,o.return,xe)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Zp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Zp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,yn=n;break}yn=s.return}}function $E(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Hr(n,o),u&4&&Mu(5,o);break;case 1:if(Hr(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(v){mt(o,o.return,v)}else{var d=Ma(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){mt(o,o.return,v)}}u&64&&FE(o),u&512&&Ou(o,o.return);break;case 3:if(Hr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Ov(n,s)}catch(v){mt(o,o.return,v)}}break;case 27:s===null&&u&4&&YE(o);case 26:case 5:Hr(n,o),s===null&&u&4&&GE(o),u&512&&Ou(o,o.return);break;case 12:Hr(n,o);break;case 31:Hr(n,o),u&4&&WE(n,o);break;case 13:Hr(n,o),u&4&&ZE(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=qR.bind(null,o),lC(n,o))));break;case 22:if(u=o.memoizedState!==null||qr,!u){s=s!==null&&s.memoizedState!==null||nn,d=qr;var p=nn;qr=u,(nn=s)&&!p?Gr(n,o,(o.subtreeFlags&8772)!==0):Hr(n,o),qr=d,nn=p}break;case 30:break;default:Hr(n,o)}}function XE(n){var s=n.alternate;s!==null&&(n.alternate=null,XE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&fo(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Nt=null,Jn=!1;function Fr(n,s,o){for(o=o.child;o!==null;)JE(n,s,o),o=o.sibling}function JE(n,s,o){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(on,o)}catch{}switch(o.tag){case 26:nn||mr(o,s),Fr(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:nn||mr(o,s);var u=Nt,d=Jn;Os(o.type)&&(Nt=o.stateNode,Jn=!1),Fr(n,s,o),qu(o.stateNode),Nt=u,Jn=d;break;case 5:nn||mr(o,s);case 6:if(u=Nt,d=Jn,Nt=null,Fr(n,s,o),Nt=u,Jn=d,Nt!==null)if(Jn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(o.stateNode)}catch(p){mt(o,s,p)}else try{Nt.removeChild(o.stateNode)}catch(p){mt(o,s,p)}break;case 18:Nt!==null&&(Jn?(n=Nt,FT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Jo(n)):FT(Nt,o.stateNode));break;case 4:u=Nt,d=Jn,Nt=o.stateNode.containerInfo,Jn=!0,Fr(n,s,o),Nt=u,Jn=d;break;case 0:case 11:case 14:case 15:Is(2,o,s),nn||Is(4,o,s),Fr(n,s,o);break;case 1:nn||(mr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&HE(o,s,u)),Fr(n,s,o);break;case 21:Fr(n,s,o);break;case 22:nn=(u=nn)||o.memoizedState!==null,Fr(n,s,o),nn=u;break;default:Fr(n,s,o)}}function WE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Jo(n)}catch(o){mt(s,s.return,o)}}}function ZE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Jo(n)}catch(o){mt(s,s.return,o)}}function VR(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new QE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new QE),s;default:throw Error(r(435,n.tag))}}function sf(n,s){var o=VR(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=FR.bind(null,n,u);u.then(d,d)}})}function Wn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],p=n,v=s,A=v;e:for(;A!==null;){switch(A.tag){case 27:if(Os(A.type)){Nt=A.stateNode,Jn=!1;break e}break;case 5:Nt=A.stateNode,Jn=!1;break e;case 3:case 4:Nt=A.stateNode.containerInfo,Jn=!0;break e}A=A.return}if(Nt===null)throw Error(r(160));JE(p,v,d),Nt=null,Jn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)eT(s,n),s=s.sibling}var Fi=null;function eT(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Wn(s,n),Zn(n),u&4&&(Is(3,n,n.return),Mu(3,n),Is(5,n,n.return));break;case 1:Wn(s,n),Zn(n),u&512&&(nn||o===null||mr(o,o.return)),u&64&&qr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=Fi;if(Wn(s,n),Zn(n),u&512&&(nn||o===null||mr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[er]||p[Xt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),In(p,u,o),p[Xt]=n,Jt(p),u=p;break e;case"link":var v=eb("link","href",d).get(u+(o.href||""));if(v){for(var A=0;A<v.length;A++)if(p=v[A],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(A,1);break t}}p=d.createElement(u),In(p,u,o),d.head.appendChild(p);break;case"meta":if(v=eb("meta","content",d).get(u+(o.content||""))){for(A=0;A<v.length;A++)if(p=v[A],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(A,1);break t}}p=d.createElement(u),In(p,u,o),d.head.appendChild(p);break;default:throw Error(r(468,u))}p[Xt]=n,Jt(p),u=p}n.stateNode=u}else tb(d,n.type,n.stateNode);else n.stateNode=ZT(d,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?tb(d,n.type,n.stateNode):ZT(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&wp(n,n.memoizedProps,o.memoizedProps)}break;case 27:Wn(s,n),Zn(n),u&512&&(nn||o===null||mr(o,o.return)),o!==null&&u&4&&wp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Wn(s,n),Zn(n),u&512&&(nn||o===null||mr(o,o.return)),n.flags&32){d=n.stateNode;try{Xn(d,"")}catch(Ee){mt(n,n.return,Ee)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,wp(n,d,o!==null?o.memoizedProps:d)),u&1024&&(Cp=!0);break;case 6:if(Wn(s,n),Zn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Ee){mt(n,n.return,Ee)}}break;case 3:if(Tf=null,d=Fi,Fi=vf(s.containerInfo),Wn(s,n),Fi=d,Zn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Jo(s.containerInfo)}catch(Ee){mt(n,n.return,Ee)}Cp&&(Cp=!1,tT(n));break;case 4:u=Fi,Fi=vf(n.stateNode.containerInfo),Wn(s,n),Zn(n),Fi=u;break;case 12:Wn(s,n),Zn(n);break;case 31:Wn(s,n),Zn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,sf(n,u)));break;case 13:Wn(s,n),Zn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(of=Yt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,sf(n,u)));break;case 22:d=n.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,Q=qr,ie=nn;if(qr=Q||d,nn=ie||L,Wn(s,n),nn=ie,qr=Q,Zn(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||L||qr||nn||Oa(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){L=o=s;try{if(p=L.stateNode,d)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=L.stateNode;var le=L.memoizedProps.style,J=le!=null&&le.hasOwnProperty("display")?le.display:null;A.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ee){mt(L,L.return,Ee)}}}else if(s.tag===6){if(o===null){L=s;try{L.stateNode.nodeValue=d?"":L.memoizedProps}catch(Ee){mt(L,L.return,Ee)}}}else if(s.tag===18){if(o===null){L=s;try{var ee=L.stateNode;d?HT(ee,!0):HT(L.stateNode,!1)}catch(Ee){mt(L,L.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,sf(n,o))));break;case 19:Wn(s,n),Zn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,sf(n,u)));break;case 30:break;case 21:break;default:Wn(s,n),Zn(n)}}function Zn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(KE(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var d=o.stateNode,p=Ip(n);rf(n,p,d);break;case 5:var v=o.stateNode;o.flags&32&&(Xn(v,""),o.flags&=-33);var A=Ip(n);rf(n,A,v);break;case 3:case 4:var L=o.stateNode.containerInfo,Q=Ip(n);Rp(n,Q,L);break;default:throw Error(r(161))}}catch(ie){mt(n,n.return,ie)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function tT(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;tT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Hr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)$E(n,s.alternate,s),s=s.sibling}function Oa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Is(4,s,s.return),Oa(s);break;case 1:mr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&HE(s,s.return,o),Oa(s);break;case 27:qu(s.stateNode);case 26:case 5:mr(s,s.return),Oa(s);break;case 22:s.memoizedState===null&&Oa(s);break;case 30:Oa(s);break;default:Oa(s)}n=n.sibling}}function Gr(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,p=s,v=p.flags;switch(p.tag){case 0:case 11:case 15:Gr(d,p,o),Mu(4,p);break;case 1:if(Gr(d,p,o),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Q){mt(u,u.return,Q)}if(u=p,d=u.updateQueue,d!==null){var A=u.stateNode;try{var L=d.shared.hiddenCallbacks;if(L!==null)for(d.shared.hiddenCallbacks=null,d=0;d<L.length;d++)Mv(L[d],A)}catch(Q){mt(u,u.return,Q)}}o&&v&64&&FE(p),Ou(p,p.return);break;case 27:YE(p);case 26:case 5:Gr(d,p,o),o&&u===null&&v&4&&GE(p),Ou(p,p.return);break;case 12:Gr(d,p,o);break;case 31:Gr(d,p,o),o&&v&4&&WE(d,p);break;case 13:Gr(d,p,o),o&&v&4&&ZE(d,p);break;case 22:p.memoizedState===null&&Gr(d,p,o),Ou(p,p.return);break;case 30:break;default:Gr(d,p,o)}s=s.sibling}}function Dp(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&vu(o))}function xp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vu(n))}function Hi(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nT(n,s,o,u),s=s.sibling}function nT(n,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Hi(n,s,o,u),d&2048&&Mu(9,s);break;case 1:Hi(n,s,o,u);break;case 3:Hi(n,s,o,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vu(n)));break;case 12:if(d&2048){Hi(n,s,o,u),n=s.stateNode;try{var p=s.memoizedProps,v=p.id,A=p.onPostCommit;typeof A=="function"&&A(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){mt(s,s.return,L)}}else Hi(n,s,o,u);break;case 31:Hi(n,s,o,u);break;case 13:Hi(n,s,o,u);break;case 23:break;case 22:p=s.stateNode,v=s.alternate,s.memoizedState!==null?p._visibility&2?Hi(n,s,o,u):Vu(n,s):p._visibility&2?Hi(n,s,o,u):(p._visibility|=2,zo(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Dp(v,s);break;case 24:Hi(n,s,o,u),d&2048&&xp(s.alternate,s);break;default:Hi(n,s,o,u)}}function zo(n,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,v=s,A=o,L=u,Q=v.flags;switch(v.tag){case 0:case 11:case 15:zo(p,v,A,L,d),Mu(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?zo(p,v,A,L,d):Vu(p,v):(ie._visibility|=2,zo(p,v,A,L,d)),d&&Q&2048&&Dp(v.alternate,v);break;case 24:zo(p,v,A,L,d),d&&Q&2048&&xp(v.alternate,v);break;default:zo(p,v,A,L,d)}s=s.sibling}}function Vu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,d=u.flags;switch(u.tag){case 22:Vu(o,u),d&2048&&Dp(u.alternate,u);break;case 24:Vu(o,u),d&2048&&xp(u.alternate,u);break;default:Vu(o,u)}s=s.sibling}}var Pu=8192;function Bo(n,s,o){if(n.subtreeFlags&Pu)for(n=n.child;n!==null;)iT(n,s,o),n=n.sibling}function iT(n,s,o){switch(n.tag){case 26:Bo(n,s,o),n.flags&Pu&&n.memoizedState!==null&&EC(o,Fi,n.memoizedState,n.memoizedProps);break;case 5:Bo(n,s,o);break;case 3:case 4:var u=Fi;Fi=vf(n.stateNode.containerInfo),Bo(n,s,o),Fi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Pu,Pu=16777216,Bo(n,s,o),Pu=u):Bo(n,s,o));break;default:Bo(n,s,o)}}function rT(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function ku(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];yn=u,aT(u,n)}rT(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)sT(n),n=n.sibling}function sT(n){switch(n.tag){case 0:case 11:case 15:ku(n),n.flags&2048&&Is(9,n,n.return);break;case 3:ku(n);break;case 12:ku(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,af(n)):ku(n);break;default:ku(n)}}function af(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];yn=u,aT(u,n)}rT(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Is(8,s,s.return),af(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,af(s));break;default:af(s)}n=n.sibling}}function aT(n,s){for(;yn!==null;){var o=yn;switch(o.tag){case 0:case 11:case 15:Is(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,yn=u;else e:for(o=n;yn!==null;){u=yn;var d=u.sibling,p=u.return;if(XE(u),u===o){yn=null;break e}if(d!==null){d.return=p,yn=d;break e}yn=p}}}var PR={getCacheForType:function(n){var s=An(Zt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return An(Zt).controller.signal}},kR=typeof WeakMap=="function"?WeakMap:Map,lt=0,bt=null,Qe=null,Xe=0,dt=0,fi=null,Rs=!1,qo=!1,Np=!1,Kr=0,Lt=0,Cs=0,Va=0,Mp=0,di=0,Fo=0,Lu=null,ei=null,Op=!1,of=0,oT=0,lf=1/0,uf=null,Ds=null,un=0,xs=null,Ho=null,Yr=0,Vp=0,Pp=null,lT=null,Uu=0,kp=null;function mi(){return(lt&2)!==0&&Xe!==0?Xe&-Xe:X.T!==null?qp():si()}function uT(){if(di===0)if((Xe&536870912)===0||tt){var n=xr;xr<<=1,(xr&3932160)===0&&(xr=262144),di=n}else di=536870912;return n=ci.current,n!==null&&(n.flags|=32),di}function ti(n,s,o){(n===bt&&(dt===2||dt===9)||n.cancelPendingCommit!==null)&&(Go(n,0),Ns(n,Xe,di,!1)),Qn(n,o),((lt&2)===0||n!==bt)&&(n===bt&&((lt&2)===0&&(Va|=o),Lt===4&&Ns(n,Xe,di,!1)),pr(n))}function cT(n,s,o){if((lt&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||$t(n,s),d=u?jR(n,s):Up(n,s,!0),p=u;do{if(d===0){qo&&!u&&Ns(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!LR(o)){d=Up(n,s,!1),p=!1;continue}if(d===2){if(p=s,n.errorRecoveryDisabledLanes&p)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var A=n;d=Lu;var L=A.current.memoizedState.isDehydrated;if(L&&(Go(A,v).flags|=256),v=Up(A,v,!1),v!==2){if(Np&&!L){A.errorRecoveryDisabledLanes|=p,Va|=p,d=4;break e}p=ei,ei=d,p!==null&&(ei===null?ei=p:ei.push.apply(ei,p))}d=v}if(p=!1,d!==2)continue}}if(d===1){Go(n,0),Ns(n,s,0,!0);break}e:{switch(u=n,p=d,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ns(u,s,di,!Rs);break e;case 2:ei=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=of+300-Yt(),10<d)){if(Ns(u,s,di,!Rs),Dt(u,0,!0)!==0)break e;Yr=s,u.timeoutHandle=BT(hT.bind(null,u,o,ei,uf,Op,s,di,Va,Fo,Rs,p,"Throttled",-0,0),d);break e}hT(u,o,ei,uf,Op,s,di,Va,Fo,Rs,p,null,-0,0)}}break}while(!0);pr(n)}function hT(n,s,o,u,d,p,v,A,L,Q,ie,le,J,ee){if(n.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Li},iT(s,p,le);var Ee=(p&62914560)===p?of-Yt():(p&4194048)===p?oT-Yt():0;if(Ee=TC(le,Ee),Ee!==null){Yr=p,n.cancelPendingCommit=Ee(vT.bind(null,n,s,p,o,u,d,v,A,L,ie,le,null,J,ee)),Ns(n,p,v,!Q);return}}vT(n,s,p,o,u,d,v,A,L)}function LR(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!li(p(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ns(n,s,o,u){s&=~Mp,s&=~Va,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var p=31-Rt(d),v=1<<p;u[p]=-1,d&=~v}o!==0&&Nn(n,o,s)}function cf(){return(lt&6)===0?(ju(0),!1):!0}function Lp(){if(Qe!==null){if(dt===0)var n=Qe.return;else n=Qe,kr=wa=null,Zm(n),Po=null,Tu=0,n=Qe;for(;n!==null;)qE(n.alternate,n),n=n.return;Qe=null}}function Go(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,iC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Yr=0,Lp(),bt=n,Qe=o=Vr(n.current,null),Xe=s,dt=0,fi=null,Rs=!1,qo=$t(n,s),Np=!1,Fo=di=Mp=Va=Cs=Lt=0,ei=Lu=null,Op=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-Rt(u),p=1<<d;s|=n[d],u&=~p}return Kr=s,xh(),o}function fT(n,s){qe=null,X.H=Du,s===Vo||s===Uh?(s=Cv(),dt=3):s===Bm?(s=Cv(),dt=4):dt=s===pp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fi=s,Qe===null&&(Lt=1,Wh(n,Ii(s,n.current)))}function dT(){var n=ci.current;return n===null?!0:(Xe&4194048)===Xe?xi===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?n===xi:!1}function mT(){var n=X.H;return X.H=Du,n===null?Du:n}function pT(){var n=X.A;return X.A=PR,n}function hf(){Lt=4,Rs||(Xe&4194048)!==Xe&&ci.current!==null||(qo=!0),(Cs&134217727)===0&&(Va&134217727)===0||bt===null||Ns(bt,Xe,di,!1)}function Up(n,s,o){var u=lt;lt|=2;var d=mT(),p=pT();(bt!==n||Xe!==s)&&(uf=null,Go(n,s)),s=!1;var v=Lt;e:do try{if(dt!==0&&Qe!==null){var A=Qe,L=fi;switch(dt){case 8:Lp(),v=6;break e;case 3:case 2:case 9:case 6:ci.current===null&&(s=!0);var Q=dt;if(dt=0,fi=null,Ko(n,A,L,Q),o&&qo){v=0;break e}break;default:Q=dt,dt=0,fi=null,Ko(n,A,L,Q)}}UR(),v=Lt;break}catch(ie){fT(n,ie)}while(!0);return s&&n.shellSuspendCounter++,kr=wa=null,lt=u,X.H=d,X.A=p,Qe===null&&(bt=null,Xe=0,xh()),v}function UR(){for(;Qe!==null;)gT(Qe)}function jR(n,s){var o=lt;lt|=2;var u=mT(),d=pT();bt!==n||Xe!==s?(uf=null,lf=Yt()+500,Go(n,s)):qo=$t(n,s);e:do try{if(dt!==0&&Qe!==null){s=Qe;var p=fi;t:switch(dt){case 1:dt=0,fi=null,Ko(n,s,p,1);break;case 2:case 9:if(Iv(p)){dt=0,fi=null,yT(s);break}s=function(){dt!==2&&dt!==9||bt!==n||(dt=7),pr(n)},p.then(s,s);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Iv(p)?(dt=0,fi=null,yT(s)):(dt=0,fi=null,Ko(n,s,p,7));break;case 5:var v=null;switch(Qe.tag){case 26:v=Qe.memoizedState;case 5:case 27:var A=Qe;if(v?nb(v):A.stateNode.complete){dt=0,fi=null;var L=A.sibling;if(L!==null)Qe=L;else{var Q=A.return;Q!==null?(Qe=Q,ff(Q)):Qe=null}break t}}dt=0,fi=null,Ko(n,s,p,5);break;case 6:dt=0,fi=null,Ko(n,s,p,6);break;case 8:Lp(),Lt=6;break e;default:throw Error(r(462))}}zR();break}catch(ie){fT(n,ie)}while(!0);return kr=wa=null,X.H=u,X.A=d,lt=o,Qe!==null?0:(bt=null,Xe=0,xh(),Lt)}function zR(){for(;Qe!==null&&!Wi();)gT(Qe)}function gT(n){var s=zE(n.alternate,n,Kr);n.memoizedProps=n.pendingProps,s===null?ff(n):Qe=s}function yT(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=VE(o,s,s.pendingProps,s.type,void 0,Xe);break;case 11:s=VE(o,s,s.pendingProps,s.type.render,s.ref,Xe);break;case 5:Zm(s);default:qE(o,s),s=Qe=pv(s,Kr),s=zE(o,s,Kr)}n.memoizedProps=n.pendingProps,s===null?ff(n):Qe=s}function Ko(n,s,o,u){kr=wa=null,Zm(s),Po=null,Tu=0;var d=s.return;try{if(CR(n,d,s,o,Xe)){Lt=1,Wh(n,Ii(o,n.current)),Qe=null;return}}catch(p){if(d!==null)throw Qe=d,p;Lt=1,Wh(n,Ii(o,n.current)),Qe=null;return}s.flags&32768?(tt||u===1?n=!0:qo||(Xe&536870912)!==0?n=!1:(Rs=n=!0,(u===2||u===9||u===3||u===6)&&(u=ci.current,u!==null&&u.tag===13&&(u.flags|=16384))),_T(s,n)):ff(s)}function ff(n){var s=n;do{if((s.flags&32768)!==0){_T(s,Rs);return}n=s.return;var o=NR(s.alternate,s,Kr);if(o!==null){Qe=o;return}if(s=s.sibling,s!==null){Qe=s;return}Qe=s=n}while(s!==null);Lt===0&&(Lt=5)}function _T(n,s){do{var o=MR(n.alternate,n);if(o!==null){o.flags&=32767,Qe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Qe=n;return}Qe=n=o}while(n!==null);Lt=6,Qe=null}function vT(n,s,o,u,d,p,v,A,L){n.cancelPendingCommit=null;do df();while(un!==0);if((lt&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=Im,zt(n,o,p,v,A,L),n===bt&&(Qe=bt=null,Xe=0),Ho=s,xs=n,Yr=o,Vp=p,Pp=d,lT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,HR(Qt,function(){return AT(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,d=ue.p,ue.p=2,v=lt,lt|=4;try{OR(n,s,o)}finally{lt=v,ue.p=d,X.T=u}}un=1,ET(),TT(),bT()}}function ET(){if(un===1){un=0;var n=xs,s=Ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=ue.p;ue.p=2;var d=lt;lt|=4;try{eT(s,n);var p=Xp,v=av(n.containerInfo),A=p.focusedElem,L=p.selectionRange;if(v!==A&&A&&A.ownerDocument&&sv(A.ownerDocument.documentElement,A)){if(L!==null&&Tm(A)){var Q=L.start,ie=L.end;if(ie===void 0&&(ie=Q),"selectionStart"in A)A.selectionStart=Q,A.selectionEnd=Math.min(ie,A.value.length);else{var le=A.ownerDocument||document,J=le&&le.defaultView||window;if(J.getSelection){var ee=J.getSelection(),Ee=A.textContent.length,xe=Math.min(L.start,Ee),Tt=L.end===void 0?xe:Math.min(L.end,Ee);!ee.extend&&xe>Tt&&(v=Tt,Tt=xe,xe=v);var q=rv(A,xe),B=rv(A,Tt);if(q&&B&&(ee.rangeCount!==1||ee.anchorNode!==q.node||ee.anchorOffset!==q.offset||ee.focusNode!==B.node||ee.focusOffset!==B.offset)){var Y=le.createRange();Y.setStart(q.node,q.offset),ee.removeAllRanges(),xe>Tt?(ee.addRange(Y),ee.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),ee.addRange(Y))}}}}for(le=[],ee=A;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<le.length;A++){var ae=le[A];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}wf=!!$p,Xp=$p=null}finally{lt=d,ue.p=u,X.T=o}}n.current=s,un=2}}function TT(){if(un===2){un=0;var n=xs,s=Ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=ue.p;ue.p=2;var d=lt;lt|=4;try{$E(n,s.alternate,s)}finally{lt=d,ue.p=u,X.T=o}}un=3}}function bT(){if(un===4||un===3){un=0,ki();var n=xs,s=Ho,o=Yr,u=lT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,Ho=xs=null,ST(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Ds=null),zn(o),s=s.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(on,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,d=ue.p,ue.p=2,X.T=null;try{for(var p=n.onRecoverableError,v=0;v<u.length;v++){var A=u[v];p(A.value,{componentStack:A.stack})}}finally{X.T=s,ue.p=d}}(Yr&3)!==0&&df(),pr(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===kp?Uu++:(Uu=0,kp=n):Uu=0,ju(0)}}function ST(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,vu(s)))}function df(){return ET(),TT(),bT(),AT()}function AT(){if(un!==5)return!1;var n=xs,s=Vp;Vp=0;var o=zn(Yr),u=X.T,d=ue.p;try{ue.p=32>o?32:o,X.T=null,o=Pp,Pp=null;var p=xs,v=Yr;if(un=0,Ho=xs=null,Yr=0,(lt&6)!==0)throw Error(r(331));var A=lt;if(lt|=4,sT(p.current),nT(p,p.current,v,o),lt=A,ju(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(on,p)}catch{}return!0}finally{ue.p=d,X.T=u,ST(n,s)}}function wT(n,s,o){s=Ii(o,s),s=mp(n.stateNode,s,2),n=Ss(n,s,2),n!==null&&(Qn(n,2),pr(n))}function mt(n,s,o){if(n.tag===3)wT(n,n,o);else for(;s!==null;){if(s.tag===3){wT(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ds===null||!Ds.has(u))){n=Ii(o,n),o=IE(2),u=Ss(s,o,2),u!==null&&(RE(o,u,s,n),Qn(u,2),pr(u));break}}s=s.return}}function jp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new kR;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(Np=!0,d.add(o),n=BR.bind(null,n,s,o),s.then(n,n))}function BR(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,bt===n&&(Xe&o)===o&&(Lt===4||Lt===3&&(Xe&62914560)===Xe&&300>Yt()-of?(lt&2)===0&&Go(n,0):Mp|=o,Fo===Xe&&(Fo=0)),pr(n)}function IT(n,s){s===0&&(s=mn()),n=ba(n,s),n!==null&&(Qn(n,s),pr(n))}function qR(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),IT(n,o)}function FR(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),IT(n,o)}function HR(n,s){return et(n,s)}var mf=null,Yo=null,zp=!1,pf=!1,Bp=!1,Ms=0;function pr(n){n!==Yo&&n.next===null&&(Yo===null?mf=Yo=n:Yo=Yo.next=n),pf=!0,zp||(zp=!0,KR())}function ju(n,s){if(!Bp&&pf){Bp=!0;do for(var o=!1,u=mf;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var v=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-Rt(42|n)+1)-1,p&=d&~(v&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,xT(u,p))}else p=Xe,p=Dt(u,u===bt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||$t(u,p)||(o=!0,xT(u,p));u=u.next}while(o);Bp=!1}}function GR(){RT()}function RT(){pf=zp=!1;var n=0;Ms!==0&&nC()&&(n=Ms);for(var s=Yt(),o=null,u=mf;u!==null;){var d=u.next,p=CT(u,s);p===0?(u.next=null,o===null?mf=d:o.next=d,d===null&&(Yo=o)):(o=u,(n!==0||(p&3)!==0)&&(pf=!0)),u=d}un!==0&&un!==5||ju(n),Ms!==0&&(Ms=0)}function CT(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var v=31-Rt(p),A=1<<v,L=d[v];L===-1?((A&o)===0||(A&u)!==0)&&(d[v]=xn(A,s)):L<=s&&(n.expiredLanes|=A),p&=~A}if(s=bt,o=Xe,o=Dt(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(dt===2||dt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Cn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||$t(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Cn(u),zn(o)){case 2:case 8:o=Kn;break;case 32:o=Qt;break;case 268435456:o=Cr;break;default:o=Qt}return u=DT.bind(null,n),o=et(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Cn(u),n.callbackPriority=2,n.callbackNode=null,2}function DT(n,s){if(un!==0&&un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(df()&&n.callbackNode!==o)return null;var u=Xe;return u=Dt(n,n===bt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(cT(n,u,s),CT(n,Yt()),n.callbackNode!=null&&n.callbackNode===o?DT.bind(null,n):null)}function xT(n,s){if(df())return null;cT(n,s,!0)}function KR(){rC(function(){(lt&6)!==0?et(Rr,GR):RT()})}function qp(){if(Ms===0){var n=Mo;n===0&&(n=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),Ms=n}return Ms}function NT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yo(""+n)}function MT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function YR(n,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var p=NT((d[pn]||null).action),v=u.submitter;v&&(s=(s=v[pn]||null)?NT(s.formAction):v.getAttribute("formAction"),s!==null&&(p=s,v=null));var A=new lr("action","action",null,u,d);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ms!==0){var L=v?MT(d,v):new FormData(d);lp(o,{pending:!0,data:L,method:d.method,action:p},null,L)}}else typeof p=="function"&&(A.preventDefault(),L=v?MT(d,v):new FormData(d),lp(o,{pending:!0,data:L,method:d.method,action:p},p,L))},currentTarget:d}]})}}for(var Fp=0;Fp<wm.length;Fp++){var Hp=wm[Fp],QR=Hp.toLowerCase(),$R=Hp[0].toUpperCase()+Hp.slice(1);qi(QR,"on"+$R)}qi(uv,"onAnimationEnd"),qi(cv,"onAnimationIteration"),qi(hv,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(hR,"onTransitionRun"),qi(fR,"onTransitionStart"),qi(dR,"onTransitionCancel"),qi(fv,"onTransitionEnd"),rr("onMouseEnter",["mouseout","mouseover"]),rr("onMouseLeave",["mouseout","mouseover"]),rr("onPointerEnter",["pointerout","pointerover"]),rr("onPointerLeave",["pointerout","pointerover"]),ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zu));function OT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var v=u.length-1;0<=v;v--){var A=u[v],L=A.instance,Q=A.currentTarget;if(A=A.listener,L!==p&&d.isPropagationStopped())break e;p=A,d.currentTarget=Q;try{p(d)}catch(ie){Dh(ie)}d.currentTarget=null,p=L}else for(v=0;v<u.length;v++){if(A=u[v],L=A.instance,Q=A.currentTarget,A=A.listener,L!==p&&d.isPropagationStopped())break e;p=A,d.currentTarget=Q;try{p(d)}catch(ie){Dh(ie)}d.currentTarget=null,p=L}}}}function $e(n,s){var o=s[ho];o===void 0&&(o=s[ho]=new Set);var u=n+"__bubble";o.has(u)||(VT(s,n,2,!1),o.add(u))}function Gp(n,s,o){var u=0;s&&(u|=4),VT(o,n,u,s)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Kp(n){if(!n[gf]){n[gf]=!0,Wl.forEach(function(o){o!=="selectionchange"&&(XR.has(o)||Gp(o,!1,n),Gp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[gf]||(s[gf]=!0,Gp("selectionchange",!1,s))}}function VT(n,s,o,u){switch(ub(s)){case 2:var d=AC;break;case 8:d=wC;break;default:d=og}o=d.bind(null,s,o,n),d=void 0,!ma||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,o,{capture:!0,passive:d}):n.addEventListener(s,o,!0):d!==void 0?n.addEventListener(s,o,{passive:d}):n.addEventListener(s,o,!1)}function Yp(n,s,o,u,d){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var A=u.stateNode.containerInfo;if(A===d)break;if(v===4)for(v=u.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;A!==null;){if(v=tr(A),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){u=p=v;continue e}A=A.parentNode}}u=u.return}ds(function(){var Q=p,ie=bi(o),le=[];e:{var J=dv.get(n);if(J!==void 0){var ee=lr,Ee=n;switch(n){case"keypress":if(ga(o)===0)break e;case"keydown":case"keyup":ee=Ih;break;case"focusin":Ee="focus",ee=_a;break;case"focusout":Ee="blur",ee=_a;break;case"beforeblur":case"afterblur":ee=_a;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case uv:case cv:case hv:ee=vh;break;case fv:ee=C;break;case"scroll":case"scrollend":ee=cu;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=Eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Or;break;case"toggle":case"beforetoggle":ee=Be}var xe=(s&4)!==0,Tt=!xe&&(n==="scroll"||n==="scrollend"),q=xe?J!==null?J+"Capture":null:J;xe=[];for(var B=Q,Y;B!==null;){var ae=B;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||q===null||(ae=Ui(B,q),ae!=null&&xe.push(Bu(B,ae,Y))),Tt)break;B=B.return}0<xe.length&&(J=new ee(J,Ee,null,o,ie),le.push({event:J,listeners:xe}))}}if((s&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",J&&o!==ou&&(Ee=o.relatedTarget||o.fromElement)&&(tr(Ee)||Ee[Zi]))break e;if((ee||J)&&(J=ie.window===ie?ie:(J=ie.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(Ee=o.relatedTarget||o.toElement,ee=Q,Ee=Ee?tr(Ee):null,Ee!==null&&(Tt=l(Ee),xe=Ee.tag,Ee!==Tt||xe!==5&&xe!==27&&xe!==6)&&(Ee=null)):(ee=null,Ee=Q),ee!==Ee)){if(xe=hu,ae="onMouseLeave",q="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(xe=Or,ae="onPointerLeave",q="onPointerEnter",B="pointer"),Tt=ee==null?J:ai(ee),Y=Ee==null?J:ai(Ee),J=new xe(ae,B+"leave",ee,o,ie),J.target=Tt,J.relatedTarget=Y,ae=null,tr(ie)===Q&&(xe=new xe(q,B+"enter",Ee,o,ie),xe.target=Y,xe.relatedTarget=Tt,ae=xe),Tt=ae,ee&&Ee)t:{for(xe=JR,q=ee,B=Ee,Y=0,ae=q;ae;ae=xe(ae))Y++;ae=0;for(var Ie=B;Ie;Ie=xe(Ie))ae++;for(;0<Y-ae;)q=xe(q),Y--;for(;0<ae-Y;)B=xe(B),ae--;for(;Y--;){if(q===B||B!==null&&q===B.alternate){xe=q;break t}q=xe(q),B=xe(B)}xe=null}else xe=null;ee!==null&&PT(le,J,ee,xe,!1),Ee!==null&&Tt!==null&&PT(le,Tt,Ee,xe,!0)}}e:{if(J=Q?ai(Q):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var st=W_;else if(X_(J))if(Z_)st=lR;else{st=aR;var be=sR}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Q&&go(Q.elementType)&&(st=W_):st=oR;if(st&&(st=st(n,Q))){J_(le,st,o,ie);break e}be&&be(n,J,Q),n==="focusout"&&Q&&J.type==="number"&&Q.memoizedProps.value!=null&&ru(J,"number",J.value)}switch(be=Q?ai(Q):window,n){case"focusin":(X_(be)||be.contentEditable==="true")&&(Ao=be,bm=Q,gu=null);break;case"focusout":gu=bm=Ao=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,ov(le,o,ie);break;case"selectionchange":if(cR)break;case"keydown":case"keyup":ov(le,o,ie)}var Fe;if(ot)e:{switch(n){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else So?va(n,o)&&(Je="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Je="onCompositionStart");Je&&(hr&&o.locale!=="ko"&&(So||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&So&&(Fe=uu()):(or=ie,lu="value"in or?or.value:or.textContent,So=!0)),be=yf(Q,Je),0<be.length&&(Je=new cr(Je,n,null,o,ie),le.push({event:Je,listeners:be}),Fe?Je.data=Fe:(Fe=bo(o),Fe!==null&&(Je.data=Fe)))),(Fe=Ai?tR(n,o):nR(n,o))&&(Je=yf(Q,"onBeforeInput"),0<Je.length&&(be=new cr("onBeforeInput","beforeinput",null,o,ie),le.push({event:be,listeners:Je}),be.data=Fe)),YR(le,n,Q,o,ie)}OT(le,s)})}function Bu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function yf(n,s){for(var o=s+"Capture",u=[];n!==null;){var d=n,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Ui(n,o),d!=null&&u.unshift(Bu(n,d,p)),d=Ui(n,s),d!=null&&u.push(Bu(n,d,p))),n.tag===3)return u;n=n.return}return[]}function JR(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function PT(n,s,o,u,d){for(var p=s._reactName,v=[];o!==null&&o!==u;){var A=o,L=A.alternate,Q=A.stateNode;if(A=A.tag,L!==null&&L===u)break;A!==5&&A!==26&&A!==27||Q===null||(L=Q,d?(Q=Ui(o,p),Q!=null&&v.unshift(Bu(o,Q,L))):d||(Q=Ui(o,p),Q!=null&&v.push(Bu(o,Q,L)))),o=o.return}v.length!==0&&n.push({event:s,listeners:v})}var WR=/\r\n?/g,ZR=/\u0000|\uFFFD/g;function kT(n){return(typeof n=="string"?n:""+n).replace(WR,`
`).replace(ZR,"")}function LT(n,s){return s=kT(s),kT(n)===s}function Et(n,s,o,u,d,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Xn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Xn(n,""+u);break;case"className":oi(n,"class",u);break;case"tabIndex":oi(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(n,o,u);break;case"style":au(n,u,p);break;case"data":if(s!=="object"){oi(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=yo(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&Et(n,s,"name",d.name,d,null),Et(n,s,"formEncType",d.formEncType,d,null),Et(n,s,"formMethod",d.formMethod,d,null),Et(n,s,"formTarget",d.formTarget,d,null)):(Et(n,s,"encType",d.encType,d,null),Et(n,s,"method",d.method,d,null),Et(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=yo(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Li);break;case"onScroll":u!=null&&$e("scroll",n);break;case"onScrollEnd":u!=null&&$e("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=yo(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":$e("beforetoggle",n),$e("toggle",n),mo(n,"popover",u);break;case"xlinkActuate":Wt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Wt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Wt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Wt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Wt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Wt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":mo(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gh.get(o)||o,mo(n,o,u))}}function Qp(n,s,o,u,d,p){switch(o){case"style":au(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Xn(n,u):(typeof u=="number"||typeof u=="bigint")&&Xn(n,""+u);break;case"onScroll":u!=null&&$e("scroll",n);break;case"onScrollEnd":u!=null&&$e("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),p=n[pn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):mo(n,o,u)}}}function In(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",n),$e("load",n);var u=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Et(n,s,p,v,o,null)}}d&&Et(n,s,"srcSet",o.srcSet,o,null),u&&Et(n,s,"src",o.src,o,null);return;case"input":$e("invalid",n);var A=p=v=d=null,L=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var ie=o[u];if(ie!=null)switch(u){case"name":d=ie;break;case"type":v=ie;break;case"checked":L=ie;break;case"defaultChecked":Q=ie;break;case"value":p=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,s));break;default:Et(n,s,u,ie,o,null)}}dh(n,p,A,L,Q,v,d,!1);return;case"select":$e("invalid",n),u=v=p=null;for(d in o)if(o.hasOwnProperty(d)&&(A=o[d],A!=null))switch(d){case"value":p=A;break;case"defaultValue":v=A;break;case"multiple":u=A;default:Et(n,s,d,A,o,null)}s=p,o=v,n.multiple=!!u,s!=null?us(n,!!u,s,!1):o!=null&&us(n,!!u,o,!0);return;case"textarea":$e("invalid",n),p=d=u=null;for(v in o)if(o.hasOwnProperty(v)&&(A=o[v],A!=null))switch(v){case"value":u=A;break;case"defaultValue":d=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Et(n,s,v,A,o,null)}cs(n,u,d,p);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(u=o[L],u!=null))switch(L){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Et(n,s,L,u,o,null)}return;case"dialog":$e("beforetoggle",n),$e("toggle",n),$e("cancel",n),$e("close",n);break;case"iframe":case"object":$e("load",n);break;case"video":case"audio":for(u=0;u<zu.length;u++)$e(zu[u],n);break;case"image":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"embed":case"source":case"link":$e("error",n),$e("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Et(n,s,Q,u,o,null)}return;default:if(go(s)){for(ie in o)o.hasOwnProperty(ie)&&(u=o[ie],u!==void 0&&Qp(n,s,ie,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&Et(n,s,A,u,o,null))}function eC(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,v=null,A=null,L=null,Q=null,ie=null;for(ee in o){var le=o[ee];if(o.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":L=le;default:u.hasOwnProperty(ee)||Et(n,s,ee,null,u,le)}}for(var J in u){var ee=u[J];if(le=o[J],u.hasOwnProperty(J)&&(ee!=null||le!=null))switch(J){case"type":p=ee;break;case"name":d=ee;break;case"checked":Q=ee;break;case"defaultChecked":ie=ee;break;case"value":v=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:ee!==le&&Et(n,s,J,ee,u,le)}}po(n,v,A,L,Q,ie,p,d);return;case"select":ee=v=A=J=null;for(p in o)if(L=o[p],o.hasOwnProperty(p)&&L!=null)switch(p){case"value":break;case"multiple":ee=L;default:u.hasOwnProperty(p)||Et(n,s,p,null,u,L)}for(d in u)if(p=u[d],L=o[d],u.hasOwnProperty(d)&&(p!=null||L!=null))switch(d){case"value":J=p;break;case"defaultValue":A=p;break;case"multiple":v=p;default:p!==L&&Et(n,s,d,p,u,L)}s=A,o=v,u=ee,J!=null?us(n,!!o,J,!1):!!u!=!!o&&(s!=null?us(n,!!o,s,!0):us(n,!!o,o?[]:"",!1));return;case"textarea":ee=J=null;for(A in o)if(d=o[A],o.hasOwnProperty(A)&&d!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Et(n,s,A,null,u,d)}for(v in u)if(d=u[v],p=o[v],u.hasOwnProperty(v)&&(d!=null||p!=null))switch(v){case"value":J=d;break;case"defaultValue":ee=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==p&&Et(n,s,v,d,u,p)}mh(n,J,ee);return;case"option":for(var Ee in o)if(J=o[Ee],o.hasOwnProperty(Ee)&&J!=null&&!u.hasOwnProperty(Ee))switch(Ee){case"selected":n.selected=!1;break;default:Et(n,s,Ee,null,u,J)}for(L in u)if(J=u[L],ee=o[L],u.hasOwnProperty(L)&&J!==ee&&(J!=null||ee!=null))switch(L){case"selected":n.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:Et(n,s,L,J,u,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in o)J=o[xe],o.hasOwnProperty(xe)&&J!=null&&!u.hasOwnProperty(xe)&&Et(n,s,xe,null,u,J);for(Q in u)if(J=u[Q],ee=o[Q],u.hasOwnProperty(Q)&&J!==ee&&(J!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:Et(n,s,Q,J,u,ee)}return;default:if(go(s)){for(var Tt in o)J=o[Tt],o.hasOwnProperty(Tt)&&J!==void 0&&!u.hasOwnProperty(Tt)&&Qp(n,s,Tt,void 0,u,J);for(ie in u)J=u[ie],ee=o[ie],!u.hasOwnProperty(ie)||J===ee||J===void 0&&ee===void 0||Qp(n,s,ie,J,u,ee);return}}for(var q in o)J=o[q],o.hasOwnProperty(q)&&J!=null&&!u.hasOwnProperty(q)&&Et(n,s,q,null,u,J);for(le in u)J=u[le],ee=o[le],!u.hasOwnProperty(le)||J===ee||J==null&&ee==null||Et(n,s,le,J,u,ee)}function UT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tC(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],p=d.transferSize,v=d.initiatorType,A=d.duration;if(p&&A&&UT(v)){for(v=0,A=d.responseEnd,u+=1;u<o.length;u++){var L=o[u],Q=L.startTime;if(Q>A)break;var ie=L.transferSize,le=L.initiatorType;ie&&UT(le)&&(L=L.responseEnd,v+=ie*(L<A?1:(A-Q)/(L-Q)))}if(--u,s+=8*(p+v)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var $p=null,Xp=null;function _f(n){return n.nodeType===9?n:n.ownerDocument}function jT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Jp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wp=null;function nC(){var n=window.event;return n&&n.type==="popstate"?n===Wp?!1:(Wp=n,!0):(Wp=null,!1)}var BT=typeof setTimeout=="function"?setTimeout:void 0,iC=typeof clearTimeout=="function"?clearTimeout:void 0,qT=typeof Promise=="function"?Promise:void 0,rC=typeof queueMicrotask=="function"?queueMicrotask:typeof qT<"u"?function(n){return qT.resolve(null).then(n).catch(sC)}:BT;function sC(n){setTimeout(function(){throw n})}function Os(n){return n==="head"}function FT(n,s){var o=s,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),Jo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")qu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,qu(o);for(var p=o.firstChild;p;){var v=p.nextSibling,A=p.nodeName;p[er]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&qu(n.ownerDocument.body);o=d}while(o);Jo(s)}function HT(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Zp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zp(o),fo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function aC(n,s,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[er])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Ni(n.nextSibling),n===null)break}return null}function oC(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ni(n.nextSibling),n===null))return null;return n}function GT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ni(n.nextSibling),n===null))return null;return n}function eg(n){return n.data==="$?"||n.data==="$~"}function tg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function lC(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ni(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var ng=null;function KT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Ni(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function YT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function QT(n,s,o){switch(s=_f(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function qu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);fo(n)}var Mi=new Map,$T=new Set;function vf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qr=ue.d;ue.d={f:uC,r:cC,D:hC,C:fC,L:dC,m:mC,X:gC,S:pC,M:yC};function uC(){var n=Qr.f(),s=cf();return n||s}function cC(n){var s=Ti(n);s!==null&&s.tag===5&&s.type==="form"?fE(s):Qr.r(n)}var Qo=typeof document>"u"?null:document;function XT(n,s,o){var u=Qo;if(u&&typeof s=="string"&&s){var d=$n(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),$T.has(d)||($T.add(d),n={rel:n,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),In(s,"link",n),Jt(s),u.head.appendChild(s)))}}function hC(n){Qr.D(n),XT("dns-prefetch",n,null)}function fC(n,s){Qr.C(n,s),XT("preconnect",n,s)}function dC(n,s,o){Qr.L(n,s,o);var u=Qo;if(u&&n&&s){var d='link[rel="preload"][as="'+$n(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+$n(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+$n(o.imageSizes)+'"]')):d+='[href="'+$n(n)+'"]';var p=d;switch(s){case"style":p=$o(n);break;case"script":p=Xo(n)}Mi.has(p)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Mi.set(p,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(Fu(p))||s==="script"&&u.querySelector(Hu(p))||(s=u.createElement("link"),In(s,"link",n),Jt(s),u.head.appendChild(s)))}}function mC(n,s){Qr.m(n,s);var o=Qo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+$n(u)+'"][href="'+$n(n)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Xo(n)}if(!Mi.has(p)&&(n=E({rel:"modulepreload",href:n},s),Mi.set(p,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Hu(p)))return}u=o.createElement("link"),In(u,"link",n),Jt(u),o.head.appendChild(u)}}}function pC(n,s,o){Qr.S(n,s,o);var u=Qo;if(u&&n){var d=nr(u).hoistableStyles,p=$o(n);s=s||"default";var v=d.get(p);if(!v){var A={loading:0,preload:null};if(v=u.querySelector(Fu(p)))A.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Mi.get(p))&&ig(n,o);var L=v=u.createElement("link");Jt(L),In(L,"link",n),L._p=new Promise(function(Q,ie){L.onload=Q,L.onerror=ie}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ef(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:A},d.set(p,v)}}}function gC(n,s){Qr.X(n,s);var o=Qo;if(o&&n){var u=nr(o).hoistableScripts,d=Xo(n),p=u.get(d);p||(p=o.querySelector(Hu(d)),p||(n=E({src:n,async:!0},s),(s=Mi.get(d))&&rg(n,s),p=o.createElement("script"),Jt(p),In(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function yC(n,s){Qr.M(n,s);var o=Qo;if(o&&n){var u=nr(o).hoistableScripts,d=Xo(n),p=u.get(d);p||(p=o.querySelector(Hu(d)),p||(n=E({src:n,async:!0,type:"module"},s),(s=Mi.get(d))&&rg(n,s),p=o.createElement("script"),Jt(p),In(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function JT(n,s,o,u){var d=(d=ye.current)?vf(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=$o(o.href),o=nr(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=$o(o.href);var p=nr(d).hoistableStyles,v=p.get(n);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,v),(p=d.querySelector(Fu(n)))&&!p._p&&(v.instance=p,v.state.loading=5),Mi.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Mi.set(n,o),p||_C(d,n,o,v.state))),s&&u===null)throw Error(r(528,""));return v}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xo(o),o=nr(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function $o(n){return'href="'+$n(n)+'"'}function Fu(n){return'link[rel="stylesheet"]['+n+"]"}function WT(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function _C(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),In(s,"link",o),Jt(s),n.head.appendChild(s))}function Xo(n){return'[src="'+$n(n)+'"]'}function Hu(n){return"script[async]"+n}function ZT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+$n(o.href)+'"]');if(u)return s.instance=u,Jt(u),u;var d=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Jt(u),In(u,"style",d),Ef(u,o.precedence,n),s.instance=u;case"stylesheet":d=$o(o.href);var p=n.querySelector(Fu(d));if(p)return s.state.loading|=4,s.instance=p,Jt(p),p;u=WT(o),(d=Mi.get(d))&&ig(u,d),p=(n.ownerDocument||n).createElement("link"),Jt(p);var v=p;return v._p=new Promise(function(A,L){v.onload=A,v.onerror=L}),In(p,"link",u),s.state.loading|=4,Ef(p,o.precedence,n),s.instance=p;case"script":return p=Xo(o.src),(d=n.querySelector(Hu(p)))?(s.instance=d,Jt(d),d):(u=o,(d=Mi.get(p))&&(u=E({},o),rg(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Jt(d),In(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ef(u,o.precedence,n));return s.instance}function Ef(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,v=0;v<u.length;v++){var A=u[v];if(A.dataset.precedence===s)p=A;else if(p!==d)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function ig(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function rg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Tf=null;function eb(n,s,o){if(Tf===null){var u=new Map,d=Tf=new Map;d.set(o,u)}else d=Tf,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var p=o[d];if(!(p[er]||p[Xt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(s)||"";v=n+v;var A=u.get(v);A?A.push(p):u.set(v,[p])}}return u}function tb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function vC(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function nb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function EC(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=$o(u.href),p=s.querySelector(Fu(d));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=bf.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=p,Jt(p);return}p=s.ownerDocument||s,u=WT(u),(d=Mi.get(d))&&ig(u,d),p=p.createElement("link"),Jt(p);var v=p;v._p=new Promise(function(A,L){v.onload=A,v.onerror=L}),In(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=bf.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var sg=0;function TC(n,s){return n.stylesheets&&n.count===0&&Af(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Af(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&sg===0&&(sg=62500*tC());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Af(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>sg?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function bf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Af(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Sf=null;function Af(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Sf=new Map,s.forEach(bC,n),Sf=null,bf.call(n))}function bC(n,s){if(!(s.state.loading&4)){var o=Sf.get(n);if(o)var u=o.get(null);else{o=new Map,Sf.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var v=d[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}d=s.instance,v=d.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,d),o.set(v,d),this.count++,u=bf.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var Gu={$$typeof:H,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function SC(n,s,o,u,d,p,v,A,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.hiddenUpdates=jt(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function ib(n,s,o,u,d,p,v,A,L,Q,ie,le){return n=new SC(n,s,o,v,L,Q,ie,le,A),s=1,p===!0&&(s|=24),p=ui(3,null,null,s),n.current=p,p.stateNode=n,s=Um(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},qm(p),n}function rb(n){return n?(n=Ro,n):Ro}function sb(n,s,o,u,d,p){d=rb(d),u.context===null?u.context=d:u.pendingContext=d,u=bs(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ss(n,u,s),o!==null&&(ti(o,n,s),Su(o,n,s))}function ab(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function ag(n,s){ab(n,s),(n=n.alternate)&&ab(n,s)}function ob(n){if(n.tag===13||n.tag===31){var s=ba(n,67108864);s!==null&&ti(s,n,67108864),ag(n,67108864)}}function lb(n){if(n.tag===13||n.tag===31){var s=mi();s=ri(s);var o=ba(n,s);o!==null&&ti(o,n,s),ag(n,s)}}var wf=!0;function AC(n,s,o,u){var d=X.T;X.T=null;var p=ue.p;try{ue.p=2,og(n,s,o,u)}finally{ue.p=p,X.T=d}}function wC(n,s,o,u){var d=X.T;X.T=null;var p=ue.p;try{ue.p=8,og(n,s,o,u)}finally{ue.p=p,X.T=d}}function og(n,s,o,u){if(wf){var d=lg(u);if(d===null)Yp(n,s,u,If,o),cb(n,u);else if(RC(d,n,s,o,u))u.stopPropagation();else if(cb(n,u),s&4&&-1<IC.indexOf(n)){for(;d!==null;){var p=Ti(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Ct(p.pendingLanes);if(v!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var L=1<<31-Rt(v);A.entanglements[1]|=L,v&=~L}pr(p),(lt&6)===0&&(lf=Yt()+500,ju(0))}}break;case 31:case 13:A=ba(p,2),A!==null&&ti(A,p,2),cf(),ag(p,2)}if(p=lg(u),p===null&&Yp(n,s,u,If,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else Yp(n,s,u,null,o)}}function lg(n){return n=bi(n),ug(n)}var If=null;function ug(n){if(If=null,n=tr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=f(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return If=n,null}function ub(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vi()){case Rr:return 2;case Kn:return 8;case Qt:case Yn:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var cg=!1,Vs=null,Ps=null,ks=null,Ku=new Map,Yu=new Map,Ls=[],IC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cb(n,s){switch(n){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":Ku.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(s.pointerId)}}function Qu(n,s,o,u,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},s!==null&&(s=Ti(s),s!==null&&ob(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function RC(n,s,o,u,d){switch(s){case"focusin":return Vs=Qu(Vs,n,s,o,u,d),!0;case"dragenter":return Ps=Qu(Ps,n,s,o,u,d),!0;case"mouseover":return ks=Qu(ks,n,s,o,u,d),!0;case"pointerover":var p=d.pointerId;return Ku.set(p,Qu(Ku.get(p)||null,n,s,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Yu.set(p,Qu(Yu.get(p)||null,n,s,o,u,d)),!0}return!1}function hb(n){var s=tr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Tn(n.priority,function(){lb(o)});return}}else if(s===31){if(s=f(o),s!==null){n.blockedOn=s,Tn(n.priority,function(){lb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=lg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);ou=u,o.target.dispatchEvent(u),ou=null}else return s=Ti(o),s!==null&&ob(s),n.blockedOn=o,!1;s.shift()}return!0}function fb(n,s,o){Rf(n)&&o.delete(s)}function CC(){cg=!1,Vs!==null&&Rf(Vs)&&(Vs=null),Ps!==null&&Rf(Ps)&&(Ps=null),ks!==null&&Rf(ks)&&(ks=null),Ku.forEach(fb),Yu.forEach(fb)}function Cf(n,s){n.blockedOn===s&&(n.blockedOn=null,cg||(cg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,CC)))}var Df=null;function db(n){Df!==n&&(Df=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Df===n&&(Df=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(ug(u||o)===null)continue;break}var p=Ti(o);p!==null&&(n.splice(s,3),s-=3,lp(p,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Jo(n){function s(L){return Cf(L,n)}Vs!==null&&Cf(Vs,n),Ps!==null&&Cf(Ps,n),ks!==null&&Cf(ks,n),Ku.forEach(s),Yu.forEach(s);for(var o=0;o<Ls.length;o++){var u=Ls[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ls.length&&(o=Ls[0],o.blockedOn===null);)hb(o),o.blockedOn===null&&Ls.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],p=o[u+1],v=d[pn]||null;if(typeof p=="function")v||db(o);else if(v){var A=null;if(p&&p.hasAttribute("formAction")){if(d=p,v=p[pn]||null)A=v.formAction;else if(ug(d)!==null)continue}else A=v.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),db(o)}}}function mb(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function hg(n){this._internalRoot=n}xf.prototype.render=hg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=mi();sb(o,u,n,s,null,null)},xf.prototype.unmount=hg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;sb(n.current,2,null,n,null,null),cf(),s[Zi]=null}};function xf(n){this._internalRoot=n}xf.prototype.unstable_scheduleHydration=function(n){if(n){var s=si();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Ls.length&&s!==0&&s<Ls[o].priority;o++);Ls.splice(o,0,n),o===0&&hb(n)}};var pb=e.version;if(pb!=="19.2.4")throw Error(r(527,pb,"19.2.4"));ue.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var DC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{on=Nf.inject(DC),ln=Nf}catch{}}return Xu.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,u="",d=bE,p=SE,v=AE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=ib(n,1,!1,null,null,o,u,null,d,p,v,mb),n[Zi]=s.current,Kp(n),new hg(s)},Xu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var u=!1,d="",p=bE,v=SE,A=AE,L=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(L=o.formState)),s=ib(n,1,!0,s,o??null,u,d,L,p,v,A,mb),s.context=rb(null),o=s.current,u=mi(),u=ri(u),d=bs(u),d.callback=null,Ss(o,d,u),o=u,s.current.lanes=o,Qn(s,o),pr(s),n[Zi]=s.current,Kp(n),new xf(s)},Xu.version="19.2.4",Xu}var wb;function jC(){if(wb)return mg.exports;wb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),mg.exports=UC(),mg.exports}var zC=jC();const BC=()=>{};var Ib={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},qC=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],f=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},JS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,f=c?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let b=(f&15)<<2|g>>6,w=g&63;m||(w=64,c||(b=64)),r.push(t[_],t[E],t[b],t[w])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(XS(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):qC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const E=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||g==null||E==null)throw new FC;const b=l<<2|f>>4;if(r.push(b),g!==64){const w=f<<4&240|g>>2;if(r.push(w),E!==64){const P=g<<6&192|E;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class FC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HC=function(i){const e=XS(i);return JS.encodeByteArray(e,!0)},WS=function(i){return HC(i).replace(/\./g,"")},ZS=function(i){try{return JS.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=()=>eA().__FIREBASE_DEFAULTS__,KC=()=>{if(typeof process>"u"||typeof Ib>"u")return;const i=Ib.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},YC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ZS(i[1]);return e&&JSON.parse(e)},zd=()=>{try{return BC()||GC()||KC()||YC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},QC=i=>{var e,t;return(t=(e=zd())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},tA=()=>{var i;return(i=zd())==null?void 0:i.config},nA=i=>{var e;return(e=zd())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iA(i){return(await fetch(i,{credentials:"include"})).ok}const dc={};function XC(){const i={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?i.emulator.push(e):i.prod.push(e);return i}function JC(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Rb=!1;function WC(i,e){if(typeof window>"u"||typeof document>"u"||!zl(window.location.host)||dc[i]===e||dc[i]||Rb)return;dc[i]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=XC().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Rb=!0,c()},b}function _(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=JC(r),w=t("text"),P=document.getElementById(w)||document.createElement("span"),D=t("learnmore"),M=document.getElementById(D)||document.createElement("a"),U=t("preprendIcon"),G=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const H=b.element;f(H),_(M,D);const re=g();m(G,U),H.append(G,P,M,re),document.body.appendChild(H)}l?(P.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function rA(){var e;const i=(e=zd())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tD(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function nD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iD(){const i=fn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function sA(){return!rA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aA(){return!rA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function oA(){try{return typeof indexedDB=="object"}catch{return!1}}function rD(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="FirebaseError";class ss extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=sD,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kc.prototype.create)}}class Kc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?aD(l,r):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new ss(a,f,r)}}function aD(i,e){return i.replace(oD,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const oD=/\{\$([^}]+)}/g;function lD(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Xa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],c=e[a];if(Cb(l)&&Cb(c)){if(!Xa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Cb(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uD(i,e){const t=new cD(i,e);return t.subscribe.bind(t)}class cD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");hD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=_g),a.error===void 0&&(a.error=_g),a.complete===void 0&&(a.complete=_g);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hD(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function _g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(i){return i&&i._delegate?i._delegate:i}class Ja{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new $C;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mD(e))try{this.getOrInitializeService({instanceIdentifier:ka})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ka){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ka){return this.instances.has(e)}getOptions(e=ka){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ka){return this.component?this.component.multipleInstances?e:ka:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dD(i){return i===ka?void 0:i}function mD(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(We||(We={}));const gD={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},yD=We.INFO,_D={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},vD=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=_D[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class My{constructor(e){this.name=e,this._logLevel=yD,this._logHandler=vD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const ED=(i,e)=>e.some(t=>i instanceof t);let Db,xb;function TD(){return Db||(Db=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bD(){return xb||(xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lA=new WeakMap,Fg=new WeakMap,uA=new WeakMap,vg=new WeakMap,Oy=new WeakMap;function SD(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t($s(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&lA.set(t,i)}).catch(()=>{}),Oy.set(e,i),e}function AD(i){if(Fg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});Fg.set(i,e)}let Hg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Fg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||uA.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $s(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function wD(i){Hg=i(Hg)}function ID(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Eg(this),e,...t);return uA.set(r,e.sort?e.sort():[e]),$s(r)}:bD().includes(i)?function(...e){return i.apply(Eg(this),e),$s(lA.get(this))}:function(...e){return $s(i.apply(Eg(this),e))}}function RD(i){return typeof i=="function"?ID(i):(i instanceof IDBTransaction&&AD(i),ED(i,TD())?new Proxy(i,Hg):i)}function $s(i){if(i instanceof IDBRequest)return SD(i);if(vg.has(i))return vg.get(i);const e=RD(i);return e!==i&&(vg.set(i,e),Oy.set(e,i)),e}const Eg=i=>Oy.get(i);function CD(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),f=$s(c);return r&&c.addEventListener("upgradeneeded",m=>{r($s(c.result),m.oldVersion,m.newVersion,$s(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const DD=["get","getKey","getAll","getAllKeys","count"],xD=["put","add","delete","clear"],Tg=new Map;function Nb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Tg.get(e))return Tg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=xD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||DD.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return Tg.set(e,l),l}wD(i=>({...i,get:(e,t,r)=>Nb(e,t)||i.get(e,t,r),has:(e,t)=>!!Nb(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(MD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function MD(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gg="@firebase/app",Mb="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new My("@firebase/app"),OD="@firebase/app-compat",VD="@firebase/analytics-compat",PD="@firebase/analytics",kD="@firebase/app-check-compat",LD="@firebase/app-check",UD="@firebase/auth",jD="@firebase/auth-compat",zD="@firebase/database",BD="@firebase/data-connect",qD="@firebase/database-compat",FD="@firebase/functions",HD="@firebase/functions-compat",GD="@firebase/installations",KD="@firebase/installations-compat",YD="@firebase/messaging",QD="@firebase/messaging-compat",$D="@firebase/performance",XD="@firebase/performance-compat",JD="@firebase/remote-config",WD="@firebase/remote-config-compat",ZD="@firebase/storage",ex="@firebase/storage-compat",tx="@firebase/firestore",nx="@firebase/ai",ix="@firebase/firestore-compat",rx="firebase",sx="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="[DEFAULT]",ax={[Gg]:"fire-core",[OD]:"fire-core-compat",[PD]:"fire-analytics",[VD]:"fire-analytics-compat",[LD]:"fire-app-check",[kD]:"fire-app-check-compat",[UD]:"fire-auth",[jD]:"fire-auth-compat",[zD]:"fire-rtdb",[BD]:"fire-data-connect",[qD]:"fire-rtdb-compat",[FD]:"fire-fn",[HD]:"fire-fn-compat",[GD]:"fire-iid",[KD]:"fire-iid-compat",[YD]:"fire-fcm",[QD]:"fire-fcm-compat",[$D]:"fire-perf",[XD]:"fire-perf-compat",[JD]:"fire-rc",[WD]:"fire-rc-compat",[ZD]:"fire-gcs",[ex]:"fire-gcs-compat",[tx]:"fire-fst",[ix]:"fire-fst-compat",[nx]:"fire-vertex","fire-js":"fire-js",[rx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Map,ox=new Map,Yg=new Map;function Ob(i,e){try{i.container.addComponent(e)}catch(t){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function yl(i){const e=i.name;if(Yg.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;Yg.set(e,i);for(const t of ad.values())Ob(t,i);for(const t of ox.values())Ob(t,i);return!0}function Vy(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ki(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xs=new Kc("app","Firebase",lx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=sx;function cA(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Kg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Xs.create("bad-app-name",{appName:String(a)});if(t||(t=tA()),!t)throw Xs.create("no-options");const l=ad.get(a);if(l){if(Xa(t,l.options)&&Xa(r,l.config))return l;throw Xs.create("duplicate-app",{appName:a})}const c=new pD(a);for(const m of Yg.values())c.addComponent(m);const f=new ux(t,r,c);return ad.set(a,f),f}function cx(i=Kg){const e=ad.get(i);if(!e&&i===Kg&&tA())return cA();if(!e)throw Xs.create("no-app",{appName:i});return e}function Js(i,e,t){let r=ax[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(c.join(" "));return}yl(new Ja(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="firebase-heartbeat-database",fx=1,Cc="firebase-heartbeat-store";let bg=null;function hA(){return bg||(bg=CD(hx,fx,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Cc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Xs.create("idb-open",{originalErrorMessage:i.message})})),bg}async function dx(i){try{const t=(await hA()).transaction(Cc),r=await t.objectStore(Cc).get(fA(i));return await t.done,r}catch(e){if(e instanceof ss)ts.warn(e.message);else{const t=Xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ts.warn(t.message)}}}async function Vb(i,e){try{const r=(await hA()).transaction(Cc,"readwrite");await r.objectStore(Cc).put(e,fA(i)),await r.done}catch(t){if(t instanceof ss)ts.warn(t.message);else{const r=Xs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ts.warn(r.message)}}}function fA(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=1024,px=30;class gx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _x(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Pb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>px){const c=vx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ts.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Pb(),{heartbeatsToSend:r,unsentEntries:a}=yx(this._heartbeatsCache.heartbeats),l=WS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ts.warn(t),""}}}function Pb(){return new Date().toISOString().substring(0,10)}function yx(i,e=mx){const t=[];let r=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),kb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),kb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _x{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oA()?rD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function kb(i){return WS(JSON.stringify({version:2,heartbeats:i})).length}function vx(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(i){yl(new Ja("platform-logger",e=>new ND(e),"PRIVATE")),yl(new Ja("heartbeat",e=>new gx(e),"PRIVATE")),Js(Gg,Mb,i),Js(Gg,Mb,"esm2020"),Js("fire-js","")}Ex("");var Tx="firebase",bx="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Js(Tx,bx,"app");function dA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sx=dA,mA=new Kc("auth","Firebase",dA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=new My("@firebase/auth");function Ax(i,...e){od.logLevel<=We.WARN&&od.warn(`Auth (${Bl}): ${i}`,...e)}function Ff(i,...e){od.logLevel<=We.ERROR&&od.error(`Auth (${Bl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(i,...e){throw ky(i,...e)}function Qi(i,...e){return ky(i,...e)}function Py(i,e,t){const r={...Sx(),[e]:t};return new Kc("auth","Firebase",r).create(e,{appName:i.name})}function Ga(i){return Py(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wx(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&wr(i,"argument-error"),Py(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ky(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return mA.create(i,...e)}function Pe(i,e,...t){if(!i)throw ky(e,...t)}function Xr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ff(e),new Error(e)}function ns(i,e){i||Xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function Ix(){return Lb()==="http:"||Lb()==="https:"}function Lb(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ix()||tD()||"connection"in navigator)?navigator.onLine:!0}function Cx(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ns(t>e,"Short delay should be less than long delay!"),this.isMobile=ZC()||nD()}get(){return Rx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(i,e){ns(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Nx=new Qc(3e4,6e4);function Uy(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ql(i,e,t,r,a={}){return gA(i,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const f=Yc({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...l};return eD()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&zl(i.emulatorConfig.host)&&(g.credentials="include"),pA.fetch()(await yA(i,i.config.apiHost,t,f),g)})}async function gA(i,e,t){i._canInitEmulator=!1;const r={...Dx,...e};try{const a=new Ox(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Mf(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mf(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Mf(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw Mf(i,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Py(i,_,g);wr(i,_)}}catch(a){if(a instanceof ss)throw a;wr(i,"network-request-failed",{message:String(a)})}}async function Mx(i,e,t,r,a={}){const l=await ql(i,e,t,r,a);return"mfaPendingCredential"in l&&wr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function yA(i,e,t,r){const a=`${e}${t}?${r}`,l=i,c=l.config.emulator?Ly(i.config,a):`${i.config.apiScheme}://${a}`;return xx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class Ox{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),Nx.get())})}}function Mf(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Qi(i,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(i,e){return ql(i,"POST","/v1/accounts:delete",e)}async function ld(i,e){return ql(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Px(i,e=!1){const t=an(i),r=await t.getIdToken(e),a=jy(r);Pe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:mc(Sg(a.auth_time)),issuedAtTime:mc(Sg(a.iat)),expirationTime:mc(Sg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sg(i){return Number(i)*1e3}function jy(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Ff("JWT malformed, contained fewer than 3 sections"),null;try{const a=ZS(t);return a?JSON.parse(a):(Ff("Failed to decode base64 JWT payload"),null)}catch(a){return Ff("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Ub(i){const e=jy(i);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ss&&kx(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function kx({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(i){var E;const e=i.auth,t=await i.getIdToken(),r=await Dc(i,ld(e,{idToken:t}));Pe(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?_A(a.providerUserInfo):[],c=jx(i.providerData,l),f=i.isAnonymous,m=!(i.email&&a.passwordHash)&&!(c!=null&&c.length),g=f?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new $g(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function Ux(i){const e=an(i);await ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jx(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function _A(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(i,e){const t=await gA(i,{},async()=>{const r=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await yA(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return i.emulatorConfig&&zl(i.emulatorConfig.host)&&(m.credentials="include"),pA.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Bx(i,e){return ql(i,"POST","/v2/accounts:revokeToken",Uy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ub(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Ub(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await zx(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new cl;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Pe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Pe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(i,e){Pe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Yi{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new Lx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new $g(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Px(this,e)}reload(){return Ux(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ud(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ki(this.auth.app))return Promise.reject(Ga(this.auth));const e=await this.getIdToken();return await Dc(this,Vx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:w,providerData:P,stsTokenManager:D}=t;Pe(E&&D,e,"internal-error");const M=cl.fromJSON(this.name,D);Pe(typeof E=="string",e,"internal-error"),js(r,e.name),js(a,e.name),Pe(typeof b=="boolean",e,"internal-error"),Pe(typeof w=="boolean",e,"internal-error"),js(l,e.name),js(c,e.name),js(f,e.name),js(m,e.name),js(g,e.name),js(_,e.name);const U=new Yi({uid:E,auth:e,email:a,emailVerified:b,displayName:r,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:M,createdAt:g,lastLoginAt:_});return P&&Array.isArray(P)&&(U.providerData=P.map(G=>({...G}))),m&&(U._redirectEventId=m),U}static async _fromIdTokenResponse(e,t,r=!1){const a=new cl;a.updateFromServerResponse(t);const l=new Yi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await ud(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Pe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?_A(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new cl;f.updateFromIdToken(r);const m=new Yi({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new $g(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=new Map;function Jr(i){ns(i instanceof Function,"Expected a class definition");let e=jb.get(i);return e?(ns(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,jb.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vA.type="NONE";const zb=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(i,e,t){return`firebase:${i}:${e}:${t}`}class hl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Hf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Hf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ld(this.auth,{idToken:e}).catch(()=>{});return t?Yi._fromGetAccountInfoResponse(this.auth,t,e):null}return Yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new hl(Jr(zb),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Jr(zb);const c=Hf(r,e.config.apiKey,e.name);let f=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const b=await ld(e,{idToken:_}).catch(()=>{});if(!b)break;E=await Yi._fromGetAccountInfoResponse(e,b,_)}else E=Yi._fromJSON(e,_);g!==l&&(f=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new hl(l,e,r):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new hl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wA(e))return"Blackberry";if(IA(e))return"Webos";if(TA(e))return"Safari";if((e.includes("chrome/")||bA(e))&&!e.includes("edge/"))return"Chrome";if(AA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EA(i=fn()){return/firefox\//i.test(i)}function TA(i=fn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bA(i=fn()){return/crios\//i.test(i)}function SA(i=fn()){return/iemobile/i.test(i)}function AA(i=fn()){return/android/i.test(i)}function wA(i=fn()){return/blackberry/i.test(i)}function IA(i=fn()){return/webos/i.test(i)}function zy(i=fn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function qx(i=fn()){var e;return zy(i)&&!!((e=window.navigator)!=null&&e.standalone)}function Fx(){return iD()&&document.documentMode===10}function RA(i=fn()){return zy(i)||AA(i)||IA(i)||wA(i)||/windows phone/i.test(i)||SA(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(i,e=[]){let t;switch(i){case"Browser":t=Bb(fn());break;case"Worker":t=`${Bb(fn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(i,e={}){return ql(i,"GET","/v2/passwordPolicy",Uy(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=6;class Yx{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Kx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qb(this),this.idTokenSubscription=new qb(this),this.beforeStateQueue=new Hx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ld(this,{idToken:e}),r=await Yi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ki(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ud(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Cx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ki(this.app))return Promise.reject(Ga(this));const t=e?an(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ki(this.app)?Promise.reject(Ga(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ki(this.app)?Promise.reject(Ga(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Gx(this),t=new Yx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Bx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Jr(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[Jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Ki(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Ax(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bd(i){return an(i)}class qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=uD(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let By={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $x(i){By=i}function Xx(i){return By.loadJS(i)}function Jx(){return By.gapiScript}function Wx(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(i,e){const t=Vy(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Xa(l,e??{}))return a;wr(a,"already-initialized")}return t.initialize({options:e})}function eN(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Jr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tN(i,e,t){const r=Bd(i);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=DA(e),{host:c,port:f}=nN(e),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(Xa(g,r.config.emulator)&&Xa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,zl(c)?(iA(`${l}//${c}${m}`),WC("Auth",!0)):iN()}function DA(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function nN(i){const e=DA(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Fb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Fb(c)}}}function Fb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function iN(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,t){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(i,e){return Mx(i,"POST","/v1/accounts:signInWithIdp",Uy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="http://localhost";class Wa extends xA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Wa(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return fl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,fl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fl(e,t)}buildRequest(){const e={requestUri:rN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends qy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends $c{constructor(){super("facebook.com")}static credential(e){return Wa._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends $c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wa._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $r.credential(t,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends $c{constructor(){super("github.com")}static credential(e){return Wa._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends $c{constructor(){super("twitter.com")}static credential(e,t){return Wa._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ks.credential(t,r)}catch{return null}}}Ks.TWITTER_SIGN_IN_METHOD="twitter.com";Ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Yi._fromIdTokenResponse(e,r,a),c=Hb(r);return new _l({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=Hb(r);return new _l({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function Hb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends ss{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new cd(e,t,r,a)}}function NA(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?cd._fromErrorAndOperation(i,l,e,r):l})}async function sN(i,e,t=!1){const r=await Dc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return _l._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(i,e,t=!1){const{auth:r}=i;if(Ki(r.app))return Promise.reject(Ga(r));const a="reauthenticate";try{const l=await Dc(i,NA(r,a,e,i),t);Pe(l.idToken,r,"internal-error");const c=jy(l.idToken);Pe(c,r,"internal-error");const{sub:f}=c;return Pe(i.uid===f,r,"user-mismatch"),_l._forOperation(i,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&wr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(i,e,t=!1){if(Ki(i.app))return Promise.reject(Ga(i));const r="signIn",a=await NA(i,r,e),l=await _l._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}function lN(i,e,t,r){return an(i).onIdTokenChanged(e,t,r)}function uN(i,e,t){return an(i).beforeAuthStateChanged(e,t)}function cN(i,e,t,r){return an(i).onAuthStateChanged(e,t,r)}function hN(i){return an(i).signOut()}const hd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hd,"1"),this.storage.removeItem(hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=1e3,dN=10;class OA extends MA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Fx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,dN):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},fN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}OA.type="LOCAL";const mN=OA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA extends MA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}VA.type="SESSION";const PA=VA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new qd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(c).map(async g=>g(t.origin,l)),m=await pN(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=Fy("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function yN(i){Sr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function _N(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vN(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function EN(){return kA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebaseLocalStorageDb",TN=1,fd="firebaseLocalStorage",UA="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fd(i,e){return i.transaction([fd],e?"readwrite":"readonly").objectStore(fd)}function bN(){const i=indexedDB.deleteDatabase(LA);return new Xc(i).toPromise()}function Xg(){const i=indexedDB.open(LA,TN);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(fd,{keyPath:UA})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(fd)?e(r):(r.close(),await bN(),e(await Xg()))})})}async function Gb(i,e,t){const r=Fd(i,!0).put({[UA]:e,value:t});return new Xc(r).toPromise()}async function SN(i,e){const t=Fd(i,!1).get(e),r=await new Xc(t).toPromise();return r===void 0?null:r.value}function Kb(i,e){const t=Fd(i,!0).delete(e);return new Xc(t).toPromise()}const AN=800,wN=3;class jA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>wN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qd._getInstance(EN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await _N(),!this.activeServiceWorker)return;this.sender=new gN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xg();return await Gb(e,hd,"1"),await Kb(e,hd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>SN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Fd(a,!1).getAll();return new Xc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jA.type="LOCAL";const IN=jA;new Qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(i,e){return e?Jr(e):(Pe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends xA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RN(i){return oN(i.auth,new Hy(i),i.bypassAuthState)}function CN(i){const{auth:e,user:t}=i;return Pe(t,e,"internal-error"),aN(t,new Hy(i),i.bypassAuthState)}async function DN(i){const{auth:e,user:t}=i;return Pe(t,e,"internal-error"),sN(t,new Hy(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RN;case"linkViaPopup":case"linkViaRedirect":return DN;case"reauthViaPopup":case"reauthViaRedirect":return CN;default:wr(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new Qc(2e3,1e4);async function NN(i,e,t){if(Ki(i.app))return Promise.reject(Qi(i,"operation-not-supported-in-this-environment"));const r=Bd(i);wx(i,e,qy);const a=zA(r,t);return new Fa(r,"signInViaPopup",e,a).executeNotNull()}class Fa extends BA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=Fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xN.get())};e()}}Fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="pendingRedirect",Gf=new Map;class ON extends BA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Gf.get(this.auth._key());if(!e){try{const r=await VN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gf.set(this.auth._key(),e)}return this.bypassAuthState||Gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VN(i,e){const t=LN(e),r=kN(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function PN(i,e){Gf.set(i._key(),e)}function kN(i){return Jr(i._redirectPersistence)}function LN(i){return Hf(MN,i.config.apiKey,i.name)}async function UN(i,e,t=!1){if(Ki(i.app))return Promise.reject(Ga(i));const r=Bd(i),a=zA(r,e),c=await new ON(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=600*1e3;class zN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!qA(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}}function Yb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function qA({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qA(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(i,e={}){return ql(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HN=/^https?/;async function GN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await qN(i);for(const t of e)try{if(KN(t))return}catch{}wr(i,"unauthorized-domain")}function KN(i){const e=Qg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!HN.test(t))return!1;if(FN.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=new Qc(3e4,6e4);function Qb(){const i=Sr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function QN(i){return new Promise((e,t)=>{var a,l,c;function r(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),t(Qi(i,"network-request-failed"))},timeout:YN.get()})}if((l=(a=Sr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Sr().gapi)!=null&&c.load)r();else{const f=Wx("iframefcb");return Sr()[f]=()=>{gapi.load?r():t(Qi(i,"network-request-failed"))},Xx(`${Jx()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Kf=null,e})}let Kf=null;function $N(i){return Kf=Kf||QN(i),Kf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Qc(5e3,15e3),JN="__/auth/iframe",WN="emulator/auth/iframe",ZN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t2(i){const e=i.config;Pe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Ly(e,WN):`https://${i.config.authDomain}/${JN}`,r={apiKey:e.apiKey,appName:i.name,v:Bl},a=e2.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Yc(r).slice(1)}`}async function n2(i){const e=await $N(i),t=Sr().gapi;return Pe(t,i,"internal-error"),e.open({where:document.body,url:t2(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZN,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Qi(i,"network-request-failed"),f=Sr().setTimeout(()=>{l(c)},XN.get());function m(){Sr().clearTimeout(f),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r2=500,s2=600,a2="_blank",o2="http://localhost";class $b{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l2(i,e,t,r=r2,a=s2){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m={...i2,width:r.toString(),height:a.toString(),top:l,left:c},g=fn().toLowerCase();t&&(f=bA(g)?a2:t),EA(g)&&(e=e||o2,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[w,P])=>`${b}${w}=${P},`,"");if(qx(g)&&f!=="_self")return u2(e||"",f),new $b(null);const E=window.open(e||"",f,_);Pe(E,i,"popup-blocked");try{E.focus()}catch{}return new $b(E)}function u2(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="__/auth/handler",h2="emulator/auth/handler",f2=encodeURIComponent("fac");async function Xb(i,e,t,r,a,l){Pe(i.config.authDomain,i,"auth-domain-config-required"),Pe(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Bl,eventId:a};if(e instanceof qy){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",lD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof $c){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}i.tenantId&&(c.tid=i.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await i._getAppCheckToken(),g=m?`#${f2}=${encodeURIComponent(m)}`:"";return`${d2(i)}?${Yc(f).slice(1)}${g}`}function d2({config:i}){return i.emulator?Ly(i,h2):`https://${i.authDomain}/${c2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="webStorageSupport";class m2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PA,this._completeRedirectFn=UN,this._overrideRedirectResult=PN}async _openPopup(e,t,r,a){var c;ns((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Xb(e,t,r,Qg(),a);return l2(e,l,Fy())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Xb(e,t,r,Qg(),a);return yN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ns(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await n2(e),r=new zN(e);return t.register("authEvent",a=>(Pe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ag,{type:Ag},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[Ag];l!==void 0&&t(!!l),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RA()||TA()||zy()}}const p2=m2;var Jb="@firebase/auth",Wb="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _2(i){yl(new Ja("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;Pe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CA(i)},g=new Qx(r,a,l,m);return eN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),yl(new Ja("auth-internal",e=>{const t=Bd(e.getProvider("auth").getImmediate());return(r=>new g2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Js(Jb,Wb,y2(i)),Js(Jb,Wb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=300,E2=nA("authIdTokenMaxAge")||v2;let Zb=null;const T2=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>E2)return;const a=t==null?void 0:t.token;Zb!==a&&(Zb=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function b2(i=cx()){const e=Vy(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Zx(i,{popupRedirectResolver:p2,persistence:[IN,mN,PA]}),r=nA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=T2(l.toString());uN(t,c,()=>c(t.currentUser)),lN(t,f=>c(f))}}const a=QC("auth");return a&&tN(t,`http://${a}`),t}function S2(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}$x({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=Qi("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",S2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_2("Browser");var e0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ws,FA;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function N(){}N.prototype=S.prototype,R.F=S.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(O,k,z){for(var V=Array(arguments.length-2),we=2;we<arguments.length;we++)V[we-2]=arguments[we];return S.prototype[k].apply(O,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,S,N){N||(N=0);const O=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)O[k]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(k=0;k<16;++k)O[k]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=R.g[0],N=R.g[1],k=R.g[2];let z=R.g[3],V;V=S+(z^N&(k^z))+O[0]+3614090360&4294967295,S=N+(V<<7&4294967295|V>>>25),V=z+(k^S&(N^k))+O[1]+3905402710&4294967295,z=S+(V<<12&4294967295|V>>>20),V=k+(N^z&(S^N))+O[2]+606105819&4294967295,k=z+(V<<17&4294967295|V>>>15),V=N+(S^k&(z^S))+O[3]+3250441966&4294967295,N=k+(V<<22&4294967295|V>>>10),V=S+(z^N&(k^z))+O[4]+4118548399&4294967295,S=N+(V<<7&4294967295|V>>>25),V=z+(k^S&(N^k))+O[5]+1200080426&4294967295,z=S+(V<<12&4294967295|V>>>20),V=k+(N^z&(S^N))+O[6]+2821735955&4294967295,k=z+(V<<17&4294967295|V>>>15),V=N+(S^k&(z^S))+O[7]+4249261313&4294967295,N=k+(V<<22&4294967295|V>>>10),V=S+(z^N&(k^z))+O[8]+1770035416&4294967295,S=N+(V<<7&4294967295|V>>>25),V=z+(k^S&(N^k))+O[9]+2336552879&4294967295,z=S+(V<<12&4294967295|V>>>20),V=k+(N^z&(S^N))+O[10]+4294925233&4294967295,k=z+(V<<17&4294967295|V>>>15),V=N+(S^k&(z^S))+O[11]+2304563134&4294967295,N=k+(V<<22&4294967295|V>>>10),V=S+(z^N&(k^z))+O[12]+1804603682&4294967295,S=N+(V<<7&4294967295|V>>>25),V=z+(k^S&(N^k))+O[13]+4254626195&4294967295,z=S+(V<<12&4294967295|V>>>20),V=k+(N^z&(S^N))+O[14]+2792965006&4294967295,k=z+(V<<17&4294967295|V>>>15),V=N+(S^k&(z^S))+O[15]+1236535329&4294967295,N=k+(V<<22&4294967295|V>>>10),V=S+(k^z&(N^k))+O[1]+4129170786&4294967295,S=N+(V<<5&4294967295|V>>>27),V=z+(N^k&(S^N))+O[6]+3225465664&4294967295,z=S+(V<<9&4294967295|V>>>23),V=k+(S^N&(z^S))+O[11]+643717713&4294967295,k=z+(V<<14&4294967295|V>>>18),V=N+(z^S&(k^z))+O[0]+3921069994&4294967295,N=k+(V<<20&4294967295|V>>>12),V=S+(k^z&(N^k))+O[5]+3593408605&4294967295,S=N+(V<<5&4294967295|V>>>27),V=z+(N^k&(S^N))+O[10]+38016083&4294967295,z=S+(V<<9&4294967295|V>>>23),V=k+(S^N&(z^S))+O[15]+3634488961&4294967295,k=z+(V<<14&4294967295|V>>>18),V=N+(z^S&(k^z))+O[4]+3889429448&4294967295,N=k+(V<<20&4294967295|V>>>12),V=S+(k^z&(N^k))+O[9]+568446438&4294967295,S=N+(V<<5&4294967295|V>>>27),V=z+(N^k&(S^N))+O[14]+3275163606&4294967295,z=S+(V<<9&4294967295|V>>>23),V=k+(S^N&(z^S))+O[3]+4107603335&4294967295,k=z+(V<<14&4294967295|V>>>18),V=N+(z^S&(k^z))+O[8]+1163531501&4294967295,N=k+(V<<20&4294967295|V>>>12),V=S+(k^z&(N^k))+O[13]+2850285829&4294967295,S=N+(V<<5&4294967295|V>>>27),V=z+(N^k&(S^N))+O[2]+4243563512&4294967295,z=S+(V<<9&4294967295|V>>>23),V=k+(S^N&(z^S))+O[7]+1735328473&4294967295,k=z+(V<<14&4294967295|V>>>18),V=N+(z^S&(k^z))+O[12]+2368359562&4294967295,N=k+(V<<20&4294967295|V>>>12),V=S+(N^k^z)+O[5]+4294588738&4294967295,S=N+(V<<4&4294967295|V>>>28),V=z+(S^N^k)+O[8]+2272392833&4294967295,z=S+(V<<11&4294967295|V>>>21),V=k+(z^S^N)+O[11]+1839030562&4294967295,k=z+(V<<16&4294967295|V>>>16),V=N+(k^z^S)+O[14]+4259657740&4294967295,N=k+(V<<23&4294967295|V>>>9),V=S+(N^k^z)+O[1]+2763975236&4294967295,S=N+(V<<4&4294967295|V>>>28),V=z+(S^N^k)+O[4]+1272893353&4294967295,z=S+(V<<11&4294967295|V>>>21),V=k+(z^S^N)+O[7]+4139469664&4294967295,k=z+(V<<16&4294967295|V>>>16),V=N+(k^z^S)+O[10]+3200236656&4294967295,N=k+(V<<23&4294967295|V>>>9),V=S+(N^k^z)+O[13]+681279174&4294967295,S=N+(V<<4&4294967295|V>>>28),V=z+(S^N^k)+O[0]+3936430074&4294967295,z=S+(V<<11&4294967295|V>>>21),V=k+(z^S^N)+O[3]+3572445317&4294967295,k=z+(V<<16&4294967295|V>>>16),V=N+(k^z^S)+O[6]+76029189&4294967295,N=k+(V<<23&4294967295|V>>>9),V=S+(N^k^z)+O[9]+3654602809&4294967295,S=N+(V<<4&4294967295|V>>>28),V=z+(S^N^k)+O[12]+3873151461&4294967295,z=S+(V<<11&4294967295|V>>>21),V=k+(z^S^N)+O[15]+530742520&4294967295,k=z+(V<<16&4294967295|V>>>16),V=N+(k^z^S)+O[2]+3299628645&4294967295,N=k+(V<<23&4294967295|V>>>9),V=S+(k^(N|~z))+O[0]+4096336452&4294967295,S=N+(V<<6&4294967295|V>>>26),V=z+(N^(S|~k))+O[7]+1126891415&4294967295,z=S+(V<<10&4294967295|V>>>22),V=k+(S^(z|~N))+O[14]+2878612391&4294967295,k=z+(V<<15&4294967295|V>>>17),V=N+(z^(k|~S))+O[5]+4237533241&4294967295,N=k+(V<<21&4294967295|V>>>11),V=S+(k^(N|~z))+O[12]+1700485571&4294967295,S=N+(V<<6&4294967295|V>>>26),V=z+(N^(S|~k))+O[3]+2399980690&4294967295,z=S+(V<<10&4294967295|V>>>22),V=k+(S^(z|~N))+O[10]+4293915773&4294967295,k=z+(V<<15&4294967295|V>>>17),V=N+(z^(k|~S))+O[1]+2240044497&4294967295,N=k+(V<<21&4294967295|V>>>11),V=S+(k^(N|~z))+O[8]+1873313359&4294967295,S=N+(V<<6&4294967295|V>>>26),V=z+(N^(S|~k))+O[15]+4264355552&4294967295,z=S+(V<<10&4294967295|V>>>22),V=k+(S^(z|~N))+O[6]+2734768916&4294967295,k=z+(V<<15&4294967295|V>>>17),V=N+(z^(k|~S))+O[13]+1309151649&4294967295,N=k+(V<<21&4294967295|V>>>11),V=S+(k^(N|~z))+O[4]+4149444226&4294967295,S=N+(V<<6&4294967295|V>>>26),V=z+(N^(S|~k))+O[11]+3174756917&4294967295,z=S+(V<<10&4294967295|V>>>22),V=k+(S^(z|~N))+O[2]+718787259&4294967295,k=z+(V<<15&4294967295|V>>>17),V=N+(z^(k|~S))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+z&4294967295}r.prototype.v=function(R,S){S===void 0&&(S=R.length);const N=S-this.blockSize,O=this.C;let k=this.h,z=0;for(;z<S;){if(k==0)for(;z<=N;)a(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<S;)if(O[k++]=R.charCodeAt(z++),k==this.blockSize){a(this,O),k=0;break}}else for(;z<S;)if(O[k++]=R[z++],k==this.blockSize){a(this,O),k=0;break}}this.h=k,this.o+=S},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)R[S++]=this.g[N]>>>O&255;return R};function l(R,S){var N=f;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=S(R)}function c(R,S){this.h=S;const N=[];let O=!0;for(let k=R.length-1;k>=0;k--){const z=R[k]|0;O&&z==S||(N[k]=z,O=!1)}this.g=N}var f={};function m(R){return-128<=R&&R<128?l(R,function(S){return new c([S|0],S<0?-1:0)}):new c([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return M(g(-R));const S=[];let N=1;for(let O=0;R>=N;O++)S[O]=R/N|0,N*=4294967296;return new c(S,0)}function _(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return M(_(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(S,8));let O=E;for(let z=0;z<R.length;z+=8){var k=Math.min(8,R.length-z);const V=parseInt(R.substring(z,z+k),S);k<8?(k=g(Math.pow(S,k)),O=O.j(k).add(g(V))):(O=O.j(N),O=O.add(g(V)))}return O}var E=m(0),b=m(1),w=m(16777216);i=c.prototype,i.m=function(){if(D(this))return-M(this).m();let R=0,S=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);R+=(O>=0?O:4294967296+O)*S,S*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(P(this))return"0";if(D(this))return"-"+M(this).toString(R);const S=g(Math.pow(R,6));var N=this;let O="";for(;;){const k=re(N,S).g;N=U(N,k.j(S));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=k,P(N))return z+O;for(;z.length<6;)z="0"+z;O=z+O}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function P(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function D(R){return R.h==-1}i.l=function(R){return R=U(this,R),D(R)?-1:P(R)?0:1};function M(R){const S=R.g.length,N=[];for(let O=0;O<S;O++)N[O]=~R.g[O];return new c(N,~R.h).add(b)}i.abs=function(){return D(this)?M(this):this},i.add=function(R){const S=Math.max(this.g.length,R.g.length),N=[];let O=0;for(let k=0;k<=S;k++){let z=O+(this.i(k)&65535)+(R.i(k)&65535),V=(z>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);O=V>>>16,z&=65535,V&=65535,N[k]=V<<16|z}return new c(N,N[N.length-1]&-2147483648?-1:0)};function U(R,S){return R.add(M(S))}i.j=function(R){if(P(this)||P(R))return E;if(D(this))return D(R)?M(this).j(M(R)):M(M(this).j(R));if(D(R))return M(this.j(M(R)));if(this.l(w)<0&&R.l(w)<0)return g(this.m()*R.m());const S=this.g.length+R.g.length,N=[];for(var O=0;O<2*S;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let k=0;k<R.g.length;k++){const z=this.i(O)>>>16,V=this.i(O)&65535,we=R.i(k)>>>16,Ne=R.i(k)&65535;N[2*O+2*k]+=V*Ne,G(N,2*O+2*k),N[2*O+2*k+1]+=z*Ne,G(N,2*O+2*k+1),N[2*O+2*k+1]+=V*we,G(N,2*O+2*k+1),N[2*O+2*k+2]+=z*we,G(N,2*O+2*k+2)}for(R=0;R<S;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=S;R<2*S;R++)N[R]=0;return new c(N,0)};function G(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function H(R,S){this.g=R,this.h=S}function re(R,S){if(P(S))throw Error("division by zero");if(P(R))return new H(E,E);if(D(R))return S=re(M(R),S),new H(M(S.g),M(S.h));if(D(S))return S=re(R,M(S)),new H(M(S.g),S.h);if(R.g.length>30){if(D(R)||D(S))throw Error("slowDivide_ only works with positive integers.");for(var N=b,O=S;O.l(R)<=0;)N=se(N),O=se(O);var k=W(N,1),z=W(O,1);for(O=W(O,2),N=W(N,2);!P(O);){var V=z.add(O);V.l(R)<=0&&(k=k.add(N),z=V),O=W(O,1),N=W(N,1)}return S=U(R,k.j(S)),new H(k,S)}for(k=E;R.l(S)>=0;){for(N=Math.max(1,Math.floor(R.m()/S.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),z=g(N),V=z.j(S);D(V)||V.l(R)>0;)N-=O,z=g(N),V=z.j(S);P(z)&&(z=b),k=k.add(z),R=U(R,V)}return new H(k,R)}i.B=function(R){return re(this,R).h},i.and=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<S;O++)N[O]=this.i(O)&R.i(O);return new c(N,this.h&R.h)},i.or=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<S;O++)N[O]=this.i(O)|R.i(O);return new c(N,this.h|R.h)},i.xor=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<S;O++)N[O]=this.i(O)^R.i(O);return new c(N,this.h^R.h)};function se(R){const S=R.g.length+1,N=[];for(let O=0;O<S;O++)N[O]=R.i(O)<<1|R.i(O-1)>>>31;return new c(N,R.h)}function W(R,S){const N=S>>5;S%=32;const O=R.g.length-N,k=[];for(let z=0;z<O;z++)k[z]=S>0?R.i(z+N)>>>S|R.i(z+N+1)<<32-S:R.i(z+N);return new c(k,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,FA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,Ws=c}).apply(typeof e0<"u"?e0:typeof self<"u"?self:typeof window<"u"?window:{});var Of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HA,ac,GA,Yf,Jg,KA,YA,QA;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Of=="object"&&Of];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var T=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var K=h[C];if(!(K in T))break e;T=T[K]}h=h[h.length-1],C=T[h],y=y(C),y!=C&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&T.push([C,y[C]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=m,g.apply(null,arguments)}function _(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(C,K,Z){for(var me=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)me[Be-2]=arguments[Be];return y.prototype[K].apply(C,me)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const y=h.length;if(y>0){const T=Array(y);for(let C=0;C<y;C++)T[C]=h[C];return T}return[]}function P(h,y){for(let C=1;C<arguments.length;C++){const K=arguments[C];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=h.length||0;const Z=K.length||0;h.length=T+Z;for(let me=0;me<Z;me++)h[T+me]=K[me]}else h.push(K)}}class D{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function M(h){c.setTimeout(()=>{throw h},0)}function U(){var h=R;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class G{constructor(){this.h=this.g=null}add(y,T){const C=H.get();C.set(y,T),this.h?this.h.next=C:this.g=C,this.h=C}}var H=new D(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let se,W=!1,R=new G,S=()=>{const h=Promise.resolve(void 0);se=()=>{h.then(N)}};function N(){for(var h;h=U();){try{h.h.call(h.g)}catch(T){M(T)}var y=H;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}W=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function V(h){return/^[\s\xa0]*$/.test(h)}function we(h,y){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(we,k),we.prototype.init=function(h,y){const T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),X=0;function ue(h,y,T,C,K){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!C,this.ha=K,this.key=++X,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ce(h,y,T){for(const C in h)y.call(T,h[C],C,h)}function ke(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function j(h){const y={};for(const T in h)y[T]=h[T];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(h,y){let T,C;for(let K=1;K<arguments.length;K++){C=arguments[K];for(T in C)h[T]=C[T];for(let Z=0;Z<te.length;Z++)T=te[Z],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,T,C,K){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const me=ye(h,y,C,K);return me>-1?(y=h[me],T||(y.fa=!1)):(y=new ue(y,this.src,Z,!!C,K),y.fa=T,h.push(y)),y};function ge(h,y){const T=y.type;if(T in h.g){var C=h.g[T],K=Array.prototype.indexOf.call(C,y,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(C,K,1),Z&&(_e(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ye(h,y,T,C){for(let K=0;K<h.length;++K){const Z=h[K];if(!Z.da&&Z.listener==y&&Z.capture==!!T&&Z.ha==C)return K}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),Ke={};function Le(h,y,T,C,K){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)Le(h,y[Z],T,C,K);return null}return T=ht(T),h&&h[Ne]?h.J(y,T,f(C)?!!C.capture:!1,K):he(h,y,T,!1,C,K)}function he(h,y,T,C,K,Z){if(!y)throw Error("Invalid event type");const me=f(K)?!!K.capture:!!K;let Be=Me(h);if(Be||(h[Oe]=Be=new ce(h)),T=Be.add(y,T,C,me,Z),T.proxy)return T;if(C=De(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)z||(K=me),K===void 0&&(K=!1),h.addEventListener(y.toString(),C,K);else if(h.attachEvent)h.attachEvent(oe(y.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function De(){function h(T){return y.call(h.src,h.listener,T)}const y=Se;return h}function Ve(h,y,T,C,K){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Ve(h,y[Z],T,C,K);else C=f(C)?!!C.capture:!!C,T=ht(T),h&&h[Ne]?(h=h.i,Z=String(y).toString(),Z in h.g&&(y=h.g[Z],T=ye(y,T,C,K),T>-1&&(_e(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[Z],h.h--)))):h&&(h=Me(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ye(y,T,C,K)),(T=h>-1?y[h]:null)&&nt(T))}function nt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ne])ge(y.i,h);else{var T=h.type,C=h.proxy;y.removeEventListener?y.removeEventListener(T,C,h.capture):y.detachEvent?y.detachEvent(oe(T),C):y.addListener&&y.removeListener&&y.removeListener(C),(T=Me(y))?(ge(T,h),T.h==0&&(T.src=null,y[Oe]=null)):_e(h)}}}function oe(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function Se(h,y){if(h.da)h=!0;else{y=new we(y,this);const T=h.listener,C=h.ha||h.src;h.fa&&nt(h),h=T.call(C,y)}return h}function Me(h){return h=h[Oe],h instanceof ce?h:null}var rt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ht(h){return typeof h=="function"?h:(h[rt]||(h[rt]=function(y){return h.handleEvent(y)}),h[rt])}function He(){O.call(this),this.i=new ce(this),this.M=this,this.G=null}E(He,O),He.prototype[Ne]=!0,He.prototype.removeEventListener=function(h,y,T,C){Ve(this,h,y,T,C)};function et(h,y){var T,C=h.G;if(C)for(T=[];C;C=C.G)T.push(C);if(h=h.M,C=y.type||y,typeof y=="string")y=new k(y,h);else if(y instanceof k)y.target=y.target||h;else{var K=y;y=new k(C,h),$(y,K)}K=!0;let Z,me;if(T)for(me=T.length-1;me>=0;me--)Z=y.g=T[me],K=Cn(Z,C,!0,y)&&K;if(Z=y.g=h,K=Cn(Z,C,!0,y)&&K,K=Cn(Z,C,!1,y)&&K,T)for(me=0;me<T.length;me++)Z=y.g=T[me],K=Cn(Z,C,!1,y)&&K}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let C=0;C<T.length;C++)_e(T[C]);delete h.g[y],h.h--}}this.G=null},He.prototype.J=function(h,y,T,C){return this.i.add(String(h),y,!1,T,C)},He.prototype.K=function(h,y,T,C){return this.i.add(String(h),y,!0,T,C)};function Cn(h,y,T,C){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let K=!0;for(let Z=0;Z<y.length;++Z){const me=y[Z];if(me&&!me.da&&me.capture==T){const Be=me.listener,Bt=me.ha||me.src;me.fa&&ge(h.i,me),K=Be.call(Bt,C)!==!1&&K}}return K&&!C.defaultPrevented}function Wi(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ki(h){h.g=Wi(()=>{h.g=null,h.i&&(h.i=!1,ki(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Yt extends O{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ki(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(h){O.call(this),this.h=h,this.g={}}E(vi,O);var Rr=[];function Kn(h){Ce(h.g,function(y,T){this.g.hasOwnProperty(T)&&nt(y)},h),h.g={}}vi.prototype.N=function(){vi.Z.N.call(this),Kn(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qt=c.JSON.stringify,Yn=c.JSON.parse,Cr=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ue(){}function St(){}var on={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ln(){k.call(this,"d")}E(ln,k);function Dn(){k.call(this,"c")}E(Dn,k);var Rt={},uo=null;function Dr(){return uo=uo||new He}Rt.Ia="serverreachability";function co(h){k.call(this,Rt.Ia,h)}E(co,k);function Ei(h){const y=Dr();et(y,new co(y))}Rt.STAT_EVENT="statevent";function xr(h,y){k.call(this,Rt.STAT_EVENT,h),this.stat=y}E(xr,k);function Ye(h){const y=Dr();et(y,new xr(y,h))}Rt.Ja="timingevent";function Ct(h,y){k.call(this,Rt.Ja,h),this.size=y}E(Ct,k);function Dt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function $t(){this.g=!0}$t.prototype.ua=function(){this.g=!1};function xn(h,y,T,C,K,Z){h.info(function(){if(h.g)if(Z){var me="",Be=Z.split("&");for(let ot=0;ot<Be.length;ot++){var Bt=Be[ot].split("=");if(Bt.length>1){const xt=Bt[0];Bt=Bt[1];const Ai=xt.split("_");me=Ai.length>=2&&Ai[1]=="type"?me+(xt+"="+Bt+"&"):me+(xt+"=redacted&")}}}else me=null;else me=Z;return"XMLHTTP REQ ("+C+") [attempt "+K+"]: "+y+`
`+T+`
`+me})}function mn(h,y,T,C,K,Z,me){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+K+"]: "+y+`
`+T+`
`+Z+" "+me})}function jt(h,y,T,C){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+zt(h,T)+(C?" "+C:"")})}function Qn(h,y){h.info(function(){return"TIMEOUT: "+y})}$t.prototype.info=function(){};function zt(h,y){if(!h.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var T=Z[h];if(!(T.length<2)){var C=T[1];if(Array.isArray(C)&&!(C.length<1)){var K=C[0];if(K!="noop"&&K!="stop"&&K!="close")for(let me=1;me<C.length;me++)C[me]=""}}}}return Qt(Z)}catch{return y}}var Nn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jn;function ri(){}E(ri,Ue),ri.prototype.g=function(){return new XMLHttpRequest},jn=new ri;function zn(h){return encodeURIComponent(String(h))}function si(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Tn(h,y,T,C){this.j=h,this.i=y,this.l=T,this.S=C||1,this.V=new vi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}var Xt={},pn={};function Zi(h,y,T){h.M=1,h.A=ha(Wt(y)),h.u=T,h.R=!0,ho(h,null)}function ho(h,y){h.F=Date.now(),er(h),h.B=Wt(h.A);var T=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),go(T.i,"t",C),h.C=0,T=h.j.L,h.h=new Bn,h.g=Ah(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Yt(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,C=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(Rr[0]=K.toString()),K=Rr);for(let Z=0;Z<K.length;Z++){const me=Le(T,K[Z],C||y.handleEvent,!1,y.h||y);if(!me)break;y.g[me.key]=me}y=h.J?j(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ei(),xn(h.i,h.v,h.B,h.l,h.S,h.u)}Tn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ji(h)==3?y.j():this.Y(h)},Tn.prototype.Y=function(h){try{if(h==this.g)e:{const Be=ji(this.g),Bt=this.g.ya(),ot=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||bn(this.g)))){this.K||Be!=4||Bt==7||(Bt==8||ot<=0?Ei(3):Ei(2)),tr(this);var y=this.g.ca();this.X=y;var T=_m(this);if(this.o=y==200,mn(this.i,this.v,this.B,this.l,this.S,Be,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,K=this.g;if((C=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(C)){var Z=C;break t}}Z=null}if(h=Z)jt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nr(this,h);else{this.o=!1,this.m=3,Ye(12),ai(this),Ti(this);break e}}if(this.R){h=!0;let xt;for(;!this.K&&this.C<T.length;)if(xt=hh(this,T),xt==pn){Be==4&&(this.m=4,Ye(14),h=!1),jt(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==Xt){this.m=4,Ye(15),jt(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else jt(this.i,this.l,xt,null),nr(this,xt);if(ch(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||T.length!=0||this.h.h||(this.m=1,Ye(16),h=!1),this.o=this.o&&h,!h)jt(this.i,this.l,T,"[Invalid Chunked Response]"),ai(this),Ti(this);else if(T.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),fu(me),me.P=!0,Ye(11))}}else jt(this.i,this.l,T,null),nr(this,T);Be==4&&ai(this),this.o&&!this.K&&(Be==4?Eh(this.j,this):(this.o=!1,er(this)))}else Mr(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ye(12)):(this.m=0,Ye(13)),ai(this),Ti(this)}}}catch{}finally{}};function _m(h){if(!ch(h))return h.g.la();const y=bn(h.g);if(y==="")return"";let T="";const C=y.length,K=ji(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ai(h),Ti(h),"";h.h.i=new c.TextDecoder}for(let Z=0;Z<C;Z++)h.h.h=!0,T+=h.h.i.decode(y[Z],{stream:!(K&&Z==C-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function ch(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function hh(h,y){var T=h.C,C=y.indexOf(`
`,T);return C==-1?pn:(T=Number(y.substring(T,C)),isNaN(T)?Xt:(C+=1,C+T>y.length?pn:(y=y.slice(C,C+T),h.C=C+T,y)))}Tn.prototype.cancel=function(){this.K=!0,ai(this)};function er(h){h.T=Date.now()+h.H,fo(h,h.H)}function fo(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Dt(g(h.aa,h),y)}function tr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Tn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Qn(this.i,this.B),this.M!=2&&(Ei(),Ye(17)),ai(this),this.m=2,Ti(this)):fo(this,this.T-h)};function Ti(h){h.j.I==0||h.K||Eh(h.j,h)}function ai(h){tr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Kn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function nr(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||rr(T.h,h))){if(!h.L&&rr(T.h,h)&&T.I==3){try{var C=T.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var K=C;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)To(T),ps(T);else break e;_a(T),Ye(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Dt(g(T.Va,T),6e3));ir(T.h)<=1&&T.ta&&(T.ta=void 0)}else cr(T,11)}else if((h.L||T.g==h)&&To(T),!V(y))for(K=T.Ba.g.parse(y),y=0;y<K.length;y++){let ot=K[y];const xt=ot[0];if(!(xt<=T.K))if(T.K=xt,ot=ot[1],T.I==2)if(ot[0]=="c"){T.M=ot[1],T.ba=ot[2];const Ai=ot[3];Ai!=null&&(T.ka=Ai,T.j.info("VER="+T.ka));const hr=ot[4];hr!=null&&(T.za=hr,T.j.info("SVER="+T.za));const zi=ot[5];zi!=null&&typeof zi=="number"&&zi>0&&(C=1.5*zi,T.O=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const Bi=h.g;if(Bi){const va=Bi.g?Bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var Z=C.h;Z.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(eu(Z,Z.h),Z.h=null))}if(C.G){const bo=Bi.g?Bi.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(C.wa=bo,ft(C.J,C.G,bo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),C=T;var me=h;if(C.na=Sh(C,C.L?C.ba:null,C.W),me.L){tu(C.h,me);var Be=me,Bt=C.O;Bt&&(Be.H=Bt),Be.D&&(tr(Be),er(Be)),C.g=me}else _h(C);T.i.length>0&&ur(T)}else ot[0]!="stop"&&ot[0]!="close"||cr(T,7);else T.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?cr(T,7):cu(T):ot[0]!="noop"&&T.l&&T.l.qa(ot),T.A=0)}}Ei(4)}catch{}}var Jt=class{constructor(h,y){this.g=h,this.map=y}};function Wl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ir(h){return h.h?1:h.g?h.g.size:0}function rr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function eu(h,y){h.g?h.g.add(y):h.h=y}function tu(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Wl.prototype.cancel=function(){if(this.i=nu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function nu(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return w(h.i)}var fh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mo(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const C=h[T].indexOf("=");let K,Z=null;C>=0?(K=h[T].substring(0,C),Z=h[T].substring(C+1)):K=h[T],y(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function oi(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof oi?(this.l=h.l,gn(this,h.j),this.o=h.o,this.g=h.g,ls(this,h.u),this.h=h.h,iu(this,gh(h.i)),this.m=h.m):h&&(y=String(h).match(fh))?(this.l=!1,gn(this,y[1]||"",!0),this.o=sr(y[2]||""),this.g=sr(y[3]||"",!0),ls(this,y[4]),this.h=sr(y[5]||"",!0),iu(this,y[6]||"",!0),this.m=sr(y[7]||"")):(this.l=!1,this.i=new cs(null,this.l))}oi.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(fa(y,po,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(fa(y,po,!0),"@"),h.push(zn(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(fa(T,T.charAt(0)=="/"?ru:dh,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",fa(T,mh)),h.join("")},oi.prototype.resolve=function(h){const y=Wt(this);let T=!!h.j;T?gn(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var C=h.h;if(T)ls(y,h.u);else if(T=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var K=y.h.lastIndexOf("/");K!=-1&&(C=y.h.slice(0,K+1)+C)}if(K=C,K==".."||K==".")C="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){C=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let me=0;me<K.length;){const Be=K[me++];Be=="."?C&&me==K.length&&Z.push(""):Be==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),C&&me==K.length&&Z.push("")):(Z.push(Be),C=!0)}C=Z.join("/")}else C=K}return T?y.h=C:T=h.i.toString()!=="",T?iu(y,gh(h.i)):T=!!h.m,T&&(y.m=h.m),y};function Wt(h){return new oi(h)}function gn(h,y,T){h.j=T?sr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ls(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function iu(h,y,T){y instanceof cs?(h.i=y,yo(h.i,h.l)):(T||(y=fa(y,us)),h.i=new cs(y,h.l))}function ft(h,y,T){h.i.set(y,T)}function ha(h){return ft(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function sr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function fa(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,$n),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $n(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var po=/[#\/\?@]/g,dh=/[#\?:]/g,ru=/[#\?]/g,us=/[#\?@]/g,mh=/#/g;function cs(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Xn(h){h.g||(h.g=new Map,h.h=0,h.i&&mo(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}i=cs.prototype,i.add=function(h,y){Xn(this),this.i=null,h=hs(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function ph(h,y){Xn(h),y=hs(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function su(h,y){return Xn(h),y=hs(h,y),h.g.has(y)}i.forEach=function(h,y){Xn(this),this.g.forEach(function(T,C){T.forEach(function(K){h.call(y,K,C,this)},this)},this)};function au(h,y){Xn(h);let T=[];if(typeof y=="string")su(h,y)&&(T=T.concat(h.g.get(hs(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}i.set=function(h,y){return Xn(this),this.i=null,h=hs(this,h),su(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=au(this,h),h.length>0?String(h[0]):y):y};function go(h,y,T){ph(h,y),T.length>0&&(h.i=null,h.g.set(hs(h,y),w(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var T=y[C];const K=zn(T);T=au(this,T);for(let Z=0;Z<T.length;Z++){let me=K;T[Z]!==""&&(me+="="+zn(T[Z])),h.push(me)}}return this.i=h.join("&")};function gh(h){const y=new cs;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function hs(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function yo(h,y){y&&!h.j&&(Xn(h),h.i=null,h.g.forEach(function(T,C){const K=C.toLowerCase();C!=K&&(ph(this,C),go(this,K,T))},h)),h.j=y}function Li(h,y){const T=new $t;if(c.Image){const C=new Image;C.onload=_(bi,T,"TestLoadImage: loaded",!0,y,C),C.onerror=_(bi,T,"TestLoadImage: error",!1,y,C),C.onabort=_(bi,T,"TestLoadImage: abort",!1,y,C),C.ontimeout=_(bi,T,"TestLoadImage: timeout",!1,y,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else y(!1)}function ou(h,y){const T=new $t,C=new AbortController,K=setTimeout(()=>{C.abort(),bi(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:C.signal}).then(Z=>{clearTimeout(K),Z.ok?bi(T,"TestPingServer: ok",!0,y):bi(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(K),bi(T,"TestPingServer: error",!1,y)})}function bi(h,y,T,C,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),C(T)}catch{}}function fs(){this.g=new Cr}function ar(h){this.i=h.Sb||null,this.h=h.ab||!1}E(ar,Ue),ar.prototype.g=function(){return new da(this.i,this.h)};function da(h,y){He.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(da,He),i=da.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Ui(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_o(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _o(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ds(this):Ui(this),this.readyState==3&&_o(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,ds(this))},i.Na=function(h){this.g&&(this.response=h,ds(this))},i.ga=function(){this.g&&ds(this)};function ds(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ui(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Ui(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Si(h){let y="";return Ce(h,function(T,C){y+=C,y+=":",y+=T,y+=`\r
`}),y}function ma(h,y,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=Si(T),typeof h=="string"?T!=null&&zn(T):ft(h,y,T))}function _t(h){He.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(_t,He);var or=/^https?$/i,lu=["POST","PUT"];i=_t.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jn.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){pa(this,Z);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var K in C)T.set(K,C[K]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Z of C.keys())T.set(Z,C.get(Z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(lu,y,void 0)>=0)||C||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,me]of T)this.g.setRequestHeader(Z,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){pa(this,Z)}};function pa(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,uu(h),Nr(h)}function uu(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,et(this,"complete"),et(this,"abort"),Nr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nr(this,!0)),_t.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ga(this):this.Xa())},i.Xa=function(){ga(this)};function ga(h){if(h.h&&typeof l<"u"){if(h.v&&ji(h)==4)setTimeout(h.Ca.bind(h),0);else if(et(h,"readystatechange"),ji(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var C;if(C=Z===0){let me=String(h.D).match(fh)[1]||null;!me&&c.self&&c.self.location&&(me=c.self.location.protocol.slice(0,-1)),C=!or.test(me?me.toLowerCase():"")}T=C}if(T)et(h,"complete"),et(h,"success");else{h.o=6;try{var K=ji(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",uu(h)}}finally{Nr(h)}}}}function Nr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||et(h,"ready");try{T.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ji(h){return h.g?h.g.readyState:0}i.ca=function(){try{return ji(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Yn(y)}};function bn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Mr(h){const y={};h=(h.g&&ji(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(V(h[C]))continue;var T=si(h[C]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=y[K]||[];y[K]=Z,Z.push(T)}ke(y,function(C){return C.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function lr(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function ms(h){this.za=0,this.i=[],this.j=new $t,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=lr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=lr("baseRetryDelayMs",5e3,h),this.Za=lr("retryDelaySeedMs",1e4,h),this.Ta=lr("forwardChannelMaxRetries",2,h),this.va=lr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Wl(h&&h.concurrentRequestLimit),this.Ba=new fs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ms.prototype,i.ka=8,i.I=1,i.connect=function(h,y,T,C){Ye(0),this.W=h,this.H=y||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.J=Sh(this,null,this.W),ur(this)};function cu(h){if(vo(h),h.I==3){var y=h.V++,T=Wt(h.J);if(ft(T,"SID",h.M),ft(T,"RID",y),ft(T,"TYPE","terminate"),ya(h,T),y=new Tn(h,h.j,y),y.M=2,y.A=ha(Wt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Ah(y.j,null),y.g.ea(y.A)),y.F=Date.now(),er(y)}bh(h)}function ps(h){h.g&&(fu(h),h.g.cancel(),h.g=null)}function vo(h){ps(h),h.v&&(c.clearTimeout(h.v),h.v=null),To(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ur(h){if(!Zl(h.h)&&!h.m){h.m=!0;var y=h.Ea;se||S(),W||(se(),W=!0),R.add(y,h),h.D=0}}function Eo(h,y){return ir(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Dt(g(h.Ea,h,y),Th(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new Tn(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=j(Z),$(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=yh(this,K,y),T=Wt(this.J),ft(T,"RID",h),ft(T,"CVER",22),this.G&&ft(T,"X-HTTP-Session-Id",this.G),ya(this,T),Z&&(this.R?y="headers="+zn(Si(Z))+"&"+y:this.u&&ma(T,this.u,Z)),eu(this.h,K),this.Ra&&ft(T,"TYPE","init"),this.S?(ft(T,"$req",y),ft(T,"SID","null"),K.U=!0,Zi(K,T,null)):Zi(K,T,y),this.I=2}}else this.I==3&&(h?hu(this,h):this.i.length==0||Zl(this.h)||hu(this))};function hu(h,y){var T;y?T=y.l:T=h.V++;const C=Wt(h.J);ft(C,"SID",h.M),ft(C,"RID",T),ft(C,"AID",h.K),ya(h,C),h.u&&h.o&&ma(C,h.u,h.o),T=new Tn(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=yh(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),eu(h.h,T),Zi(T,C,y)}function ya(h,y){h.H&&Ce(h.H,function(T,C){ft(y,C,T)}),h.l&&Ce({},function(T,C){ft(y,C,T)})}function yh(h,y,T){T=Math.min(h.i.length,T);const C=h.l?g(h.l.Ka,h.l,h):null;e:{var K=h.i;let Be=-1;for(;;){const Bt=["count="+T];Be==-1?T>0?(Be=K[0].g,Bt.push("ofs="+Be)):Be=0:Bt.push("ofs="+Be);let ot=!0;for(let xt=0;xt<T;xt++){var Z=K[xt].g;const Ai=K[xt].map;if(Z-=Be,Z<0)Be=Math.max(0,K[xt].g-100),ot=!1;else try{Z="req"+Z+"_"||"";try{var me=Ai instanceof Map?Ai:Object.entries(Ai);for(const[hr,zi]of me){let Bi=zi;f(zi)&&(Bi=Qt(zi)),Bt.push(Z+hr+"="+encodeURIComponent(Bi))}}catch(hr){throw Bt.push(Z+"type="+encodeURIComponent("_badmap")),hr}}catch{C&&C(Ai)}}if(ot){me=Bt.join("&");break e}}me=void 0}return h=h.i.splice(0,T),y.G=h,me}function _h(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;se||S(),W||(se(),W=!0),R.add(y,h),h.A=0}}function _a(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Dt(g(h.Da,h),Th(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,vh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Dt(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ye(10),ps(this),vh(this))};function fu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function vh(h){h.g=new Tn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Wt(h.na);ft(y,"RID","rpc"),ft(y,"SID",h.M),ft(y,"AID",h.K),ft(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&ft(y,"TO",h.ia),ft(y,"TYPE","xmlhttp"),ya(h,y),h.u&&h.o&&ma(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=ha(Wt(y)),T.u=null,T.R=!0,ho(T,h)}i.Va=function(){this.C!=null&&(this.C=null,ps(this),_a(this),Ye(19))};function To(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Eh(h,y){var T=null;if(h.g==y){To(h),fu(h),h.g=null;var C=2}else if(rr(h.h,y))T=y.G,tu(h.h,y),C=1;else return;if(h.I!=0){if(y.o)if(C==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var K=h.D;C=Dr(),et(C,new Ct(C,T)),ur(h)}else _h(h);else if(K=y.m,K==3||K==0&&y.X>0||!(C==1&&Eo(h,y)||C==2&&_a(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),K){case 1:cr(h,5);break;case 4:cr(h,10);break;case 3:cr(h,6);break;default:cr(h,2)}}}function Th(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function cr(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),C=h.Ua;const K=!C;C=new oi(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gn(C,"https"),ha(C),K?Li(C.toString(),T):ou(C.toString(),T)}else Ye(2);h.I=0,h.l&&h.l.pa(y),bh(h),vo(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function bh(h){if(h.I=0,h.ja=[],h.l){const y=nu(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ja,y),P(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function Sh(h,y,T){var C=T instanceof oi?Wt(T):new oi(T);if(C.g!="")y&&(C.g=y+"."+C.g),ls(C,C.u);else{var K=c.location;C=K.protocol,y=y?y+"."+K.hostname:K.hostname,K=+K.port;const Z=new oi(null);C&&gn(Z,C),y&&(Z.g=y),K&&ls(Z,K),T&&(Z.h=T),C=Z}return T=h.G,y=h.wa,T&&y&&ft(C,T,y),ft(C,"VER",h.ka),ya(h,C),C}function Ah(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new _t(new ar({ab:T})):new _t(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function wh(){}i=wh.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function gs(){}gs.prototype.g=function(h,y){return new qn(h,y)};function qn(h,y){He.call(this),this.g=new ms(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!V(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!V(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Or(this)}E(qn,He),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){cu(this.g)},qn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Qt(h),h=T);y.i.push(new Jt(y.Ya++,h)),y.I==3&&ur(y)},qn.prototype.N=function(){this.g.l=null,delete this.j,cu(this.g),delete this.g,qn.Z.N.call(this)};function Ih(h){ln.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Ih,ln);function Rh(){Dn.call(this),this.status=1}E(Rh,Dn);function Or(h){this.g=h}E(Or,wh),Or.prototype.ra=function(){et(this.g,"a")},Or.prototype.qa=function(h){et(this.g,new Ih(h))},Or.prototype.pa=function(h){et(this.g,new Rh)},Or.prototype.oa=function(){et(this.g,"b")},gs.prototype.createWebChannel=gs.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,QA=function(){return new gs},YA=function(){return Dr()},KA=Rt,Jg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nn.NO_ERROR=0,Nn.TIMEOUT=8,Nn.HTTP_ERROR=6,Yf=Nn,Mn.COMPLETE="complete",GA=Mn,St.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",He.prototype.listen=He.prototype.J,ac=St,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,HA=_t}).apply(typeof Of<"u"?Of:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="12.9.0";function A2(i){Fl=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new My("@firebase/firestore");function sl(){return Za.logLevel}function fe(i,...e){if(Za.logLevel<=We.DEBUG){const t=e.map(Gy);Za.debug(`Firestore (${Fl}): ${i}`,...t)}}function Ht(i,...e){if(Za.logLevel<=We.ERROR){const t=e.map(Gy);Za.error(`Firestore (${Fl}): ${i}`,...t)}}function vl(i,...e){if(Za.logLevel<=We.WARN){const t=e.map(Gy);Za.warn(`Firestore (${Fl}): ${i}`,...t)}}function Gy(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$A(i,r,t)}function $A(i,e,t){let r=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ht(r),new Error(r)}function Ae(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||$A(e,a,r)}function Te(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pn.UNAUTHENTICATED)))}shutdown(){}}class R2{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Zs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Zs,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Zs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new w2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new Pn(e)}}class C2{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class D2{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new C2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class t0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ki(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const r=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new t0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new t0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=N2(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function je(i,e){return i<e?-1:i>e?1:0}function Wg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return wg(a)===wg(l)?je(a,l):wg(a)?1:-1}return je(i.length,e.length)}const M2=55296,O2=57343;function wg(i){const e=i.charCodeAt(0);return e>=M2&&e<=O2}function El(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}function XA(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="__name__";class vr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=vr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const r=vr.isNumericId(e),a=vr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?vr.extractNumericId(e).compare(vr.extractNumericId(t)):Wg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}}class ct extends vr{construct(e,t,r){return new ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new ct(t)}static emptyPath(){return new ct([])}}const V2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends vr{construct(e,t,r){return new Pt(e,t,r)}static isValidIdentifier(e){return V2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n0}static keyField(){return new Pt([n0])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new de(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new de(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(r+=f,a++):(l(),a++)}if(l(),c)throw new de(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(t)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(ct.fromString(e))}static fromName(e){return new pe(ct.fromString(e).popFirst(5))}static empty(){return new pe(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(i,e,t){if(!t)throw new de(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function P2(i,e,t,r){if(e===!0&&r===!0)throw new de(ne.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function i0(i){if(!pe.isDocumentKey(i))throw new de(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function r0(i){if(pe.isDocumentKey(i))throw new de(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function WA(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Hd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ve(12329,{type:typeof i})}function Zr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new de(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hd(i);throw new de(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Jc(i,e){if(!WA(i))throw new de(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new de(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=-62135596800,a0=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*a0);return new pt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<s0)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a0}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jc(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-s0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:sn("string",pt._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new pt(0,0))}static max(){return new Re(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=-1;class dd{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Zg(i){return i.fields.find((e=>e.kind===2))}function La(i){return i.fields.filter((e=>e.kind!==2))}dd.UNKNOWN_ID=-1;class Qf{constructor(e,t){this.fieldPath=e,this.kind=t}}class xc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xc(0,_i.min())}}function ZA(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(r===1e9?new pt(t+1,0):new pt(t,r));return new _i(a,pe.empty(),e)}function ew(i){return new _i(i.readTime,i.key,Tl)}class _i{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _i(Re.min(),pe.empty(),Tl)}static max(){return new _i(Re.max(),pe.empty(),Tl)}}function Yy(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(i.documentKey,e.documentKey),t!==0?t:je(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==tw)throw i;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,r)=>{t(e)}))}static reject(e){return new F(((t,r)=>{r(e)}))}static waitFor(e){return new F(((t,r)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=F.resolve(!1);for(const r of e)t=t.next((a=>a?F.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new F(((r,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++f,f===l&&r(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new F(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="SimpleDb";class Gd{static open(e,t,r,a){try{return new Gd(t,e.transaction(a,r))}catch(l){throw new pc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Zs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new pc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Qy(r.target.error);this.S.reject(new pc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(fe(pi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new L2(t)}}class ea{static delete(e){return fe(pi,"Removing database:",e),ja(eA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!oA())return!1;if(ea.F())return!0;const e=fn(),t=ea.M(e),r=0<t&&t<10,a=iw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ea.M(fn())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(fe(pi,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new pc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new de(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new de(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new pc(e,c))},a.onupgradeneeded=l=>{fe(pi,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{fe(pi,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const f=Gd.open(this.db,e,l?"readonly":"readwrite",r),m=a(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),F.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(fe(pi,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function iw(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class k2{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return ja(this.U.delete())}}class pc extends de{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function la(i){return i.name==="IndexedDbTransactionError"}class L2{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(fe(pi,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(fe(pi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ja(r)}add(e){return fe(pi,"ADD",this.store.name,e,e),ja(this.store.add(e))}get(e){return ja(this.store.get(e)).next((t=>(t===void 0&&(t=null),fe(pi,"GET",this.store.name,e,t),t)))}delete(e){return fe(pi,"DELETE",this.store.name,e),ja(this.store.delete(e))}count(){return fe(pi,"COUNT",this.store.name),ja(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new F(((c,f)=>{l.onerror=m=>{f(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(r),c=[];return this.J(l,((f,m)=>{c.push(m)})).next((()=>c))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new F(((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}X(e,t){fe(pi,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,c,f)=>f.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new F(((r,a)=>{t.onerror=l=>{const c=Qy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((f=>{f?c.continue():r()})):r()}}))}J(e,t){const r=[];return new F(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void a();const m=new k2(f),g=t(f.primaryKey,f.value,m);if(g instanceof F){const _=g.catch((E=>(m.done(),F.reject(E))));r.push(_)}m.isDone?a():m.G===null?f.continue():f.continue(m.G)}})).next((()=>F.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ja(i){return new F(((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=Qy(r.target.error);t(a)}}))}let o0=!1;function Qy(i){const e=ea.M(fn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return o0||(o0=!0,setTimeout((()=>{throw r}),0)),r}}return i}const gc="IndexBackfiller";class U2{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){fe(gc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();fe(gc,`Documents written: ${t}`)}catch(t){la(t)?fe(gc,"Ignoring IndexedDB error during index backfill: ",t):await oa(t)}await this.re(6e4)}))}}class j2{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return F.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return fe(gc,`Processing collection: ${c}`),this.oe(e,c,a).next((f=>{a-=f,r.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((f=>(fe(gc,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const c=ew(l);Yy(c,r)>0&&(r=c)})),new _i(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ni.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=-1;function Kd(i){return i==null}function Nc(i){return i===0&&1/i==-1/0}function rw(i){return typeof i=="number"&&Number.isInteger(i)&&!Nc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="";function Un(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=l0(e)),e=z2(i.get(t),e);return l0(e)}function z2(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case md:t+="";break;default:t+=l}}return t}function l0(i){return i+md+""}function Tr(i){const e=i.length;if(Ae(e>=2,64408,{path:i}),e===2)return Ae(i.charAt(0)===md&&i.charAt(1)==="",56145,{path:i}),ct.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=i.indexOf(md,l);switch((c<0||c>t)&&ve(50515,{path:i}),i.charAt(c+1)){case"":const f=i.substring(l,c);let m;a.length===0?m=f:(a+=f,m=a,a=""),r.push(m);break;case"":a+=i.substring(l,c),a+="\0";break;case"":a+=i.substring(l,c+1);break;default:ve(61167,{path:i})}l=c+2}return new ct(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="remoteDocuments",Wc="owner",Wo="owner",Mc="mutationQueues",B2="userId",Gi="mutations",u0="batchId",Ha="userMutationsIndex",c0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(i,e){return[i,Un(e)]}function sw(i,e,t){return[i,Un(e),t]}const q2={},bl="documentMutations",pd="remoteDocumentsV14",F2=["prefixPath","collectionGroup","readTime","documentId"],Xf="documentKeyIndex",H2=["prefixPath","collectionGroup","documentId"],aw="collectionGroupIndex",G2=["collectionGroup","readTime","prefixPath","documentId"],Oc="remoteDocumentGlobal",ey="remoteDocumentGlobalKey",Sl="targets",ow="queryTargetsIndex",K2=["canonicalId","targetId"],Al="targetDocuments",Y2=["targetId","path"],$y="documentTargetsIndex",Q2=["path","targetId"],gd="targetGlobalKey",Ya="targetGlobal",Vc="collectionParents",$2=["collectionId","parent"],wl="clientMetadata",X2="clientId",Yd="bundles",J2="bundleId",Qd="namedQueries",W2="name",Xy="indexConfiguration",Z2="indexId",ty="collectionGroupIndex",eM="collectionGroup",yc="indexState",tM=["indexId","uid"],lw="sequenceNumberIndex",nM=["uid","sequenceNumber"],_c="indexEntries",iM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uw="documentKeyIndex",rM=["indexId","uid","orderedDocumentKey"],$d="documentOverlays",sM=["userId","collectionPath","documentId"],ny="collectionPathOverlayIndex",aM=["userId","collectionPath","largestBatchId"],cw="collectionGroupOverlayIndex",oM=["userId","collectionGroup","largestBatchId"],Jy="globals",lM="name",hw=[Mc,Gi,bl,Ua,Sl,Wc,Ya,Al,wl,Oc,Vc,Yd,Qd],uM=[...hw,$d],fw=[Mc,Gi,bl,pd,Sl,Wc,Ya,Al,wl,Oc,Vc,Yd,Qd,$d],dw=fw,Wy=[...dw,Xy,yc,_c],cM=Wy,mw=[...Wy,Jy],hM=mw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends nw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function dn(i,e){const t=Te(i);return ea.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ua(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function pw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||Rn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Rn.RED,this.left=a??Rn.EMPTY,this.right=l??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Rn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Rn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new f0(this.data.getIterator())}getIteratorFrom(e){return new f0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yt(this.comparator);return t.data=e,t}}class f0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zo(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new ii([])}unionWith(e){let t=new yt(Pt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new gw("Invalid base64 string: "+l):l}})(e);return new Kt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const fM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(i){if(Ae(!!i,39018),typeof i=="string"){let e=0;const t=fM.exec(i);if(Ae(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ot(i.seconds),nanos:Ot(i.nanos)}}function Ot(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function rs(i){return typeof i=="string"?Kt.fromBase64String(i):Kt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="server_timestamp",_w="__type__",vw="__previous_value__",Ew="__local_write_time__";function Zy(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[_w])==null?void 0:r.stringValue)===yw}function Xd(i){const e=i.mapValue.fields[vw];return Zy(e)?Xd(e):e}function Pc(i){const e=is(i.mapValue.fields[Ew].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t,r,a,l,c,f,m,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_,this.apiKey=E}}const yd="(default)";class eo{constructor(e,t){this.projectId=e,this.database=t||yd}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database===yd}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}function mM(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new de(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(i.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="__type__",Tw="__max__",Qs={mapValue:{fields:{__type__:{stringValue:Tw}}}},t_="__vector__",Il="value",Jf={nullValue:"NULL_VALUE"};function na(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Zy(i)?4:bw(i)?9007199254740991:Jd(i)?10:11:ve(28295,{value:i})}function Ir(i,e){if(i===e)return!0;const t=na(i);if(t!==na(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Pc(i).isEqual(Pc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=is(a.timestampValue),f=is(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return rs(a.bytesValue).isEqual(rs(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return Ot(a.geoPointValue.latitude)===Ot(l.geoPointValue.latitude)&&Ot(a.geoPointValue.longitude)===Ot(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Ot(a.integerValue)===Ot(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ot(a.doubleValue),f=Ot(l.doubleValue);return c===f?Nc(c)===Nc(f):isNaN(c)&&isNaN(f)}return!1})(i,e);case 9:return El(i.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(h0(c)!==h0(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Ir(c[m],f[m])))return!1;return!0})(i,e);default:return ve(52216,{left:i})}}function kc(i,e){return(i.values||[]).find((t=>Ir(t,e)))!==void 0}function ia(i,e){if(i===e)return 0;const t=na(i),r=na(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Ot(l.integerValue||l.doubleValue),m=Ot(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(i,e);case 3:return d0(i.timestampValue,e.timestampValue);case 4:return d0(Pc(i),Pc(e));case 5:return Wg(i.stringValue,e.stringValue);case 6:return(function(l,c){const f=rs(l),m=rs(c);return f.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const _=je(f[g],m[g]);if(_!==0)return _}return je(f.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=je(Ot(l.latitude),Ot(c.latitude));return f!==0?f:je(Ot(l.longitude),Ot(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return m0(i.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,w,P,D;const f=l.fields||{},m=c.fields||{},g=(b=f[Il])==null?void 0:b.arrayValue,_=(w=m[Il])==null?void 0:w.arrayValue,E=je(((P=g==null?void 0:g.values)==null?void 0:P.length)||0,((D=_==null?void 0:_.values)==null?void 0:D.length)||0);return E!==0?E:m0(g,_)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Qs.mapValue&&c===Qs.mapValue)return 0;if(l===Qs.mapValue)return 1;if(c===Qs.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const b=Wg(m[E],_[E]);if(b!==0)return b;const w=ia(f[m[E]],g[_[E]]);if(w!==0)return w}return je(m.length,_.length)})(i.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function d0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return je(i,e);const t=is(i),r=is(e),a=je(t.seconds,r.seconds);return a!==0?a:je(t.nanos,r.nanos)}function m0(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ia(t[a],r[a]);if(l)return l}return je(t.length,r.length)}function Rl(i){return ry(i)}function ry(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=is(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return rs(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return pe.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=ry(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${ry(t.fields[c])}`;return a+"}"})(i.mapValue):ve(61005,{value:i})}function Wf(i){switch(na(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xd(i);return e?16+Wf(e):16;case 5:return 2*i.stringValue.length;case 6:return rs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Wf(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return ua(r.fields,((l,c)=>{a+=l.length+Wf(c)})),a})(i.mapValue);default:throw ve(13486,{value:i})}}function Lc(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function sy(i){return!!i&&"integerValue"in i}function Uc(i){return!!i&&"arrayValue"in i}function p0(i){return!!i&&"nullValue"in i}function g0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Zf(i){return!!i&&"mapValue"in i}function Jd(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[e_])==null?void 0:r.stringValue)===t_}function vc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ua(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=vc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vc(i.arrayValue.values[t]);return e}return{...i}}function bw(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Tw}const Sw={mapValue:{fields:{[e_]:{stringValue:t_},[Il]:{arrayValue:{}}}}};function pM(i){return"nullValue"in i?Jf:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Lc(eo.empty(),pe.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Jd(i)?Sw:{mapValue:{}}:ve(35942,{value:i})}function gM(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Lc(eo.empty(),pe.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?Sw:"mapValue"in i?Jd(i)?{mapValue:{}}:Qs:ve(61959,{value:i})}function y0(i,e){const t=ia(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function _0(i,e){const t=ia(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(t)}setAll(e){let t=Pt.emptyPath(),r={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=f.popLast()}c?r[f.lastSegment()]=vc(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Zf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ua(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Ln(vc(this.value))}}function Aw(i){const e=[];return ua(i.fields,((t,r)=>{const a=new Pt([t]);if(Zf(r)){const l=Aw(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,r,a,l,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Ut(e,0,Re.min(),Re.min(),Re.min(),Ln.empty(),0)}static newFoundDocument(e,t,r,a){return new Ut(e,1,t,Re.min(),r,a,0)}static newNoDocument(e,t){return new Ut(e,2,t,Re.min(),Re.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Re.min(),Re.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.position=e,this.inclusive=t}}function v0(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?r=pe.comparator(pe.fromName(c.referenceValue),t.key):r=ia(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function E0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ir(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t="asc"){this.field=e,this.dir=t}}function yM(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Ze extends ww{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _M(e,t,r):t==="array-contains"?new TM(e,r):t==="in"?new Nw(e,r):t==="not-in"?new bM(e,r):t==="array-contains-any"?new SM(e,r):new Ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vM(e,r):new EM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ia(t,this.value)):t!==null&&na(this.value)===na(t)&&this.matchesComparison(ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gt extends ww{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gt(e,t)}matches(e){return Dl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Dl(i){return i.op==="and"}function ay(i){return i.op==="or"}function n_(i){return Iw(i)&&Dl(i)}function Iw(i){for(const e of i.filters)if(e instanceof gt)return!1;return!0}function oy(i){if(i instanceof Ze)return i.field.canonicalString()+i.op.toString()+Rl(i.value);if(n_(i))return i.filters.map((e=>oy(e))).join(",");{const e=i.filters.map((t=>oy(t))).join(",");return`${i.op}(${e})`}}function Rw(i,e){return i instanceof Ze?(function(r,a){return a instanceof Ze&&r.op===a.op&&r.field.isEqual(a.field)&&Ir(r.value,a.value)})(i,e):i instanceof gt?(function(r,a){return a instanceof gt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,f)=>l&&Rw(c,a.filters[f])),!0):!1})(i,e):void ve(19439)}function Cw(i,e){const t=i.filters.concat(e);return gt.create(t,i.op)}function Dw(i){return i instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${Rl(t.value)}`})(i):i instanceof gt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Dw).join(" ,")+"}"})(i):"Filter"}class _M extends Ze{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class vM extends Ze{constructor(e,t){super(e,"in",t),this.keys=xw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class EM extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=xw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xw(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>pe.fromName(r.referenceValue)))}class TM extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uc(t)&&kc(t.arrayValue,this.value)}}class Nw extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}}class bM extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kc(this.value.arrayValue,t)}}class SM extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>kc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,t=null,r=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function ly(i,e=null,t=[],r=[],a=null,l=null,c=null){return new AM(i,e,t,r,a,l,c)}function to(i){const e=Te(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>oy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Kd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Rl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Rl(r))).join(",")),e.Te=t}return e.Te}function Zc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!yM(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Rw(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!E0(i.startAt,e.startAt)&&E0(i.endAt,e.endAt)}function _d(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function vd(i,e){return i.filters.filter((t=>t instanceof Ze&&t.field.isEqual(e)))}function T0(i,e,t){let r=Jf,a=!0;for(const l of vd(i,e)){let c=Jf,f=!0;switch(l.op){case"<":case"<=":c=pM(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=Jf}y0({value:r,inclusive:a},{value:c,inclusive:f})<0&&(r=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];y0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function b0(i,e,t){let r=Qs,a=!0;for(const l of vd(i,e)){let c=Qs,f=!0;switch(l.op){case">=":case">":c=gM(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=Qs}_0({value:r,inclusive:a},{value:c,inclusive:f})>0&&(r=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];_0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t=null,r=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Mw(i,e,t,r,a,l,c,f){return new Hl(i,e,t,r,a,l,c,f)}function Wd(i){return new Hl(i)}function S0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function wM(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Ow(i){return i.collectionGroup!==null}function Ec(i){const e=Te(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new yt(Pt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new jc(l,r))})),t.has(Pt.keyField().canonicalString())||e.Ie.push(new jc(Pt.keyField(),r))}return e.Ie}function yi(i){const e=Te(i);return e.Ee||(e.Ee=IM(e,Ec(i))),e.Ee}function IM(i,e){if(i.limitType==="F")return ly(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new jc(a.field,l)}));const t=i.endAt?new Cl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Cl(i.startAt.position,i.startAt.inclusive):null;return ly(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function uy(i,e){const t=i.filters.concat([e]);return new Hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function RM(i,e){const t=i.explicitOrderBy.concat([e]);return new Hl(i.path,i.collectionGroup,t,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function cy(i,e,t){return new Hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Zd(i,e){return Zc(yi(i),yi(e))&&i.limitType===e.limitType}function Vw(i){return`${to(yi(i))}|lt:${i.limitType}`}function al(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Dw(a))).join(", ")}]`),Kd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Rl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Rl(a))).join(",")),`Target(${r})`})(yi(i))}; limitType=${i.limitType})`}function eh(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):pe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of Ec(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(c,f,m){const g=v0(c,f,m);return c.inclusive?g<=0:g<0})(r.startAt,Ec(r),a)||r.endAt&&!(function(c,f,m){const g=v0(c,f,m);return c.inclusive?g>=0:g>0})(r.endAt,Ec(r),a))})(i,e)}function Pw(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function kw(i){return(e,t)=>{let r=!1;for(const a of Ec(i)){const l=CM(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function CM(i,e,t){const r=i.field.isKeyField()?pe.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?ia(m,g):ve(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ua(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return pw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new At(pe.comparator);function gi(){return DM}const Lw=new At(pe.comparator);function oc(...i){let e=Lw;for(const t of i)e=e.insert(t.key,t);return e}function Uw(i){let e=Lw;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function br(){return Tc()}function jw(){return Tc()}function Tc(){return new as((i=>i.toString()),((i,e)=>i.isEqual(e)))}const xM=new At(pe.comparator),NM=new yt(pe.comparator);function Ge(...i){let e=NM;for(const t of i)e=e.add(t);return e}const MM=new yt(je);function i_(){return MM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function zw(i){return{integerValue:""+i}}function OM(i,e){return rw(e)?zw(e):r_(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this._=void 0}}function VM(i,e,t){return i instanceof zc?(function(a,l){const c={fields:{[_w]:{stringValue:yw},[Ew]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Zy(l)&&(l=Xd(l)),l&&(c.fields[vw]=l),{mapValue:c}})(t,e):i instanceof xl?qw(i,e):i instanceof Nl?Fw(i,e):(function(a,l){const c=Bw(a,l),f=A0(c)+A0(a.Ae);return sy(c)&&sy(a.Ae)?zw(f):r_(a.serializer,f)})(i,e)}function PM(i,e,t){return i instanceof xl?qw(i,e):i instanceof Nl?Fw(i,e):t}function Bw(i,e){return i instanceof Bc?(function(r){return sy(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class zc extends em{}class xl extends em{constructor(e){super(),this.elements=e}}function qw(i,e){const t=Hw(e);for(const r of i.elements)t.some((a=>Ir(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Nl extends em{constructor(e){super(),this.elements=e}}function Fw(i,e){let t=Hw(e);for(const r of i.elements)t=t.filter((a=>!Ir(a,r)));return{arrayValue:{values:t}}}class Bc extends em{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function A0(i){return Ot(i.integerValue||i.doubleValue)}function Hw(i){return Uc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t){this.field=e,this.transform=t}}function LM(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof xl&&a instanceof xl||r instanceof Nl&&a instanceof Nl?El(r.elements,a.elements,Ir):r instanceof Bc&&a instanceof Bc?Ir(r.Ae,a.Ae):r instanceof zc&&a instanceof zc})(i.transform,e.transform)}class UM{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ed(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class tm{}function Gw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new th(i.key,En.none()):new Gl(i.key,i.data,En.none());{const t=i.data,r=Ln.empty();let a=new yt(Pt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new os(i.key,r,new ii(a.toArray()),En.none())}}function jM(i,e,t){i instanceof Gl?(function(a,l,c){const f=a.value.clone(),m=I0(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(i,e,t):i instanceof os?(function(a,l,c){if(!ed(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=I0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Kw(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function bc(i,e,t,r){return i instanceof Gl?(function(l,c,f,m){if(!ed(l.precondition,c))return f;const g=l.value.clone(),_=R0(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,t,r):i instanceof os?(function(l,c,f,m){if(!ed(l.precondition,c))return f;const g=R0(l.fieldTransforms,m,c),_=c.data;return _.setAll(Kw(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(l,c,f){return ed(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(i,e,t)}function zM(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=Bw(r.transform,a||null);l!=null&&(t===null&&(t=Ln.empty()),t.set(r.field,l))}return t||null}function w0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&El(r,a,((l,c)=>LM(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Gl extends tm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class os extends tm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Kw(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function I0(i,e,t){const r=new Map;Ae(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,f=e.data.field(l.field);r.set(l.field,PM(c,f,t[a]))}return r}function R0(i,e,t){const r=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);r.set(a.field,VM(l,c,e))}return r}class th extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yw extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&jM(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jw();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=Gw(c,f);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((t,r)=>w0(t,r)))&&El(this.baseMutations,e.baseMutations,((t,r)=>w0(t,r)))}}class a_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return xM})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new a_(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,it;function qM(i){switch(i){case ne.OK:return ve(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return ve(15467,{code:i})}}function Qw(i){if(i===void 0)return Ht("GRPC error has no .code"),ne.UNKNOWN;switch(i){case rn.OK:return ne.OK;case rn.CANCELLED:return ne.CANCELLED;case rn.UNKNOWN:return ne.UNKNOWN;case rn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case rn.INTERNAL:return ne.INTERNAL;case rn.UNAVAILABLE:return ne.UNAVAILABLE;case rn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case rn.NOT_FOUND:return ne.NOT_FOUND;case rn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case rn.ABORTED:return ne.ABORTED;case rn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case rn.DATA_LOSS:return ne.DATA_LOSS;default:return ve(39323,{code:i})}}(it=rn||(rn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=new Ws([4294967295,4294967295],0);function C0(i){const e=FM().encode(i),t=new FA;return t.update(e),new Uint8Array(t.digest())}function D0(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ws([t,r],0),new Ws([a,l],0)]}class l_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lc(`Invalid padding: ${t}`);if(r<0)throw new lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new lc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ws.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(Ws.fromNumber(r)));return a.compare(HM)===1&&(a=new Ws([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=C0(e),[r,a]=D0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new l_(l,a,t);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=C0(e),[r,a]=D0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,ih.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nh(Re.min(),a,new At(je),gi(),Ge())}}class ih{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ih(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class $w{constructor(e,t){this.targetId=e,this.Ce=t}}class Xw{constructor(e,t,r=Kt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class x0{constructor(){this.ve=0,this.Fe=N0(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),r=Ge();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ve(38017,{changeType:l})}})),new ih(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=N0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class GM{constructor(e){this.Ge=e,this.ze=new Map,this.je=gi(),this.He=Pf(),this.Je=Pf(),this.Ze=new At(je)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(_d(l))if(r===0){const c=new pe(l.path);this.et(t,c,Ut.newNoDocument(c,Re.min()))}else Ae(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=rs(r).toUint8Array()}catch(m){if(m instanceof gw)return vl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new l_(c,a,l)}catch(m){return vl(m instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&_d(f.target)){const m=new pe(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Ut.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=Ge();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new nh(e,t,this.Ze,this.je,r);return this.je=gi(),this.He=Pf(),this.Je=Pf(),this.Ze=new At(je),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new x0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new yt(je),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new yt(je),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new x0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Pf(){return new At(pe.comparator)}function N0(){return new At(pe.comparator)}const KM={asc:"ASCENDING",desc:"DESCENDING"},YM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QM={and:"AND",or:"OR"};class $M{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hy(i,e){return i.useProto3Json||Kd(e)?e:{value:e}}function Ml(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function XM(i,e){return Ml(i,e.toTimestamp())}function Hn(i){return Ae(!!i,49232),Re.fromTimestamp((function(t){const r=is(t);return new pt(r.seconds,r.nanos)})(i))}function u_(i,e){return fy(i,e).canonicalString()}function fy(i,e){const t=(function(a){return new ct(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function Ww(i){const e=ct.fromString(i);return Ae(oI(e),10190,{key:e.toString()}),e}function Ed(i,e){return u_(i.databaseId,e.path)}function Qa(i,e){const t=Ww(e);if(t.get(1)!==i.databaseId.projectId)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new pe(tI(t))}function Zw(i,e){return u_(i.databaseId,e)}function eI(i){const e=Ww(i);return e.length===4?ct.emptyPath():tI(e)}function dy(i){return new ct(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function tI(i){return Ae(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function M0(i,e,t){return{name:Ed(i,e),fields:t.value.mapValue.fields}}function JM(i,e,t){const r=Qa(i,e.name),a=Hn(e.updateTime),l=e.createTime?Hn(e.createTime):Re.min(),c=new Ln({mapValue:{fields:e.fields}}),f=Ut.newFoundDocument(r,a,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function WM(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ve(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(Ae(_===void 0||typeof _=="string",58123),Kt.fromBase64String(_||"")):(Ae(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Kt.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(g){const _=g.code===void 0?ne.UNKNOWN:Qw(g.code);return new de(_,g.message||"")})(c);t=new Xw(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Qa(i,r.document.name),l=Hn(r.document.updateTime),c=r.document.createTime?Hn(r.document.createTime):Re.min(),f=new Ln({mapValue:{fields:r.document.fields}}),m=Ut.newFoundDocument(a,l,c,f),g=r.targetIds||[],_=r.removedTargetIds||[];t=new td(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Qa(i,r.document),l=r.readTime?Hn(r.readTime):Re.min(),c=Ut.newNoDocument(a,l),f=r.removedTargetIds||[];t=new td([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Qa(i,r.document),l=r.removedTargetIds||[];t=new td([],l,a,null)}else{if(!("filter"in e))return ve(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new BM(a,l),f=r.targetId;t=new $w(f,c)}}return t}function Td(i,e){let t;if(e instanceof Gl)t={update:M0(i,e.key,e.value)};else if(e instanceof th)t={delete:Ed(i,e.key)};else if(e instanceof os)t={update:M0(i,e.key,e.data),updateMask:rO(e.fieldMask)};else{if(!(e instanceof Yw))return ve(16599,{dt:e.type});t={verify:Ed(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const f=c.transform;if(f instanceof zc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof xl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Nl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Bc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw ve(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:XM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve(27497)})(i,e.precondition)),t}function my(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?En.updateTime(Hn(l.updateTime)):l.exists!==void 0?En.exists(l.exists):En.none()})(e.currentDocument):En.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,f){let m=null;if("setToServerValue"in f)Ae(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new zc;else if("appendMissingElements"in f){const _=f.appendMissingElements.values||[];m=new xl(_)}else if("removeAllFromArray"in f){const _=f.removeAllFromArray.values||[];m=new Nl(_)}else"increment"in f?m=new Bc(c,f.increment):ve(16584,{proto:f});const g=Pt.fromServerFormat(f.fieldPath);return new kM(g,m)})(i,a))):[];if(e.update){e.update.name;const a=Qa(i,e.update.name),l=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new ii(g.map((_=>Pt.fromServerFormat(_))))})(e.updateMask);return new os(a,l,c,t,r)}return new Gl(a,l,t,r)}if(e.delete){const a=Qa(i,e.delete);return new th(a,t)}if(e.verify){const a=Qa(i,e.verify);return new Yw(a,t)}return ve(1463,{proto:e})}function ZM(i,e){return i&&i.length>0?(Ae(e!==void 0,14353),i.map((t=>(function(a,l){let c=a.updateTime?Hn(a.updateTime):Hn(l);return c.isEqual(Re.min())&&(c=Hn(l)),new UM(c,a.transformResults||[])})(t,e)))):[]}function nI(i,e){return{documents:[Zw(i,e.path)]}}function iI(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Zw(i,a);const l=(function(g){if(g.length!==0)return aI(gt.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:ol(b.field),direction:tO(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=hy(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function rI(i){let e=eI(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ae(r===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const b=sI(E);return b instanceof gt&&n_(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(P){return new jc(ll(P.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let b;return b=typeof E=="object"?E.value:E,Kd(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(E){const b=!!E.before,w=E.values||[];return new Cl(w,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,w=E.values||[];return new Cl(w,b)})(t.endAt)),Mw(e,a,c,l,f,"F",m,g)}function eO(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sI(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ll(t.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=ll(t.unaryFilter.field);return Ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ll(t.unaryFilter.field);return Ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ll(t.unaryFilter.field);return Ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Ze.create(ll(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return gt.create(t.compositeFilter.filters.map((r=>sI(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(i):ve(30097,{filter:i})}function tO(i){return KM[i]}function nO(i){return YM[i]}function iO(i){return QM[i]}function ol(i){return{fieldPath:i.canonicalString()}}function ll(i){return Pt.fromServerFormat(i.fieldPath)}function aI(i){return i instanceof Ze?(function(t){if(t.op==="=="){if(g0(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NAN"}};if(p0(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(g0(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NAN"}};if(p0(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(t.field),op:nO(t.op),value:t.value}}})(i):i instanceof gt?(function(t){const r=t.getFilters().map((a=>aI(a)));return r.length===1?r[0]:{compositeFilter:{op:iO(t.op),filters:r}}})(i):ve(54877,{filter:i})}function rO(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function oI(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function lI(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t,r,a,l=Re.min(),c=Re.min(),f=Kt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.yt=e}}function sO(i,e){let t;if(e.document)t=JM(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),a=io(e.noDocument.readTime);t=Ut.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve(56709);{const r=pe.fromSegments(e.unknownDocument.path),a=io(e.unknownDocument.version);t=Ut.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new pt(a[0],a[1]);return Re.fromTimestamp(l)})(e.readTime)),t}function O0(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Ed(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Ml(l,c.version.toTimestamp()),createTime:Ml(l,c.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:no(e.version)};else{if(!e.isUnknownDocument())return ve(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:no(e.version)}}return r}function bd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function no(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function io(i){const e=new pt(i.seconds,i.nanoseconds);return Re.fromTimestamp(e)}function za(i,e){const t=(e.baseMutations||[]).map((l=>my(i.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];c.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>my(i.yt,l))),a=pt.fromMillis(e.localWriteTimeMs);return new s_(e.batchId,a,t,r)}function uc(i){const e=io(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?io(i.lastLimboFreeSnapshotVersion):Re.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const c=l.documents.length;return Ae(c===1,1966,{count:c}),yi(Wd(eI(l.documents[0])))})(i.query):(function(l){return yi(rI(l))})(i.query),new Wr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Kt.fromBase64String(i.resumeToken))}function cI(i,e){const t=no(e.snapshotVersion),r=no(e.lastLimboFreeSnapshotVersion);let a;a=_d(e.target)?nI(i.yt,e.target):iI(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:to(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function hI(i){const e=rI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?cy(e,e.limit,"L"):e}function Ig(i,e){return new o_(e.largestBatchId,my(i.yt,e.overlayMutation))}function V0(i,e){const t=e.path.lastSegment();return[i,Un(e.path.popLast()),t]}function P0(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:no(r.readTime),documentKey:Un(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{getBundleMetadata(e,t){return k0(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:io(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return k0(e).put((function(a){return{bundleId:a.id,createTime:no(Hn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return L0(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:hI(l.bundledQuery),readTime:io(l.readTime)}})(r)}))}saveNamedQuery(e,t){return L0(e).put((function(a){return{name:a.name,readTime:no(Hn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function k0(i){return dn(i,Yd)}function L0(i){return dn(i,Qd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new nm(e,r)}getOverlay(e,t){return Ju(e).get(V0(this.userId,t)).next((r=>r?Ig(this.serializer,r):null))}getOverlays(e,t){const r=br();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,c)=>{const f=new o_(t,c);a.push(this.bt(e,f))})),F.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(Un(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Ju(e).X(ny,f))})),F.waitFor(l)}getOverlaysForCollection(e,t,r){const a=br(),l=Un(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ju(e).H(ny,c).next((f=>{for(const m of f){const g=Ig(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=br();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ju(e).ee({index:cw,range:f},((m,g,_)=>{const E=Ig(this.serializer,g);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):_.done()})).next((()=>l))}bt(e,t){return Ju(e).put((function(a,l,c){const[f,m,g]=V0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Td(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Ju(i){return dn(i,$d)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{St(e){return dn(e,Jy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Kt.fromUint8Array(r):Kt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ot(e.integerValue));else if("doubleValue"in e){const r=Ot(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Nc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=is(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(rs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?bw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Jd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ve(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){var c,f;const r=e.fields||{};this.Ft(t,53);const a=Il,l=((f=(c=r[a].arrayValue)==null?void 0:c.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(Ot(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),pe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ba.Wt=new Ba;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=255;function lO(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function U0(i){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const c=lO(255&r[l]);if(a+=c,c!==8)break}return a})(i);return Math.ceil(e/8)}class uO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=U0(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=U0(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(el),this.sn(255)}_n(){this.an(el),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===el?(this.sn(el),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===el?(this.an(el),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class cO{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class hO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Wu{constructor(){this.cn=new uO,this.ascending=new cO(this.cn),this.descending=new hO(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new qa(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:nd(this.Tn),directionalValue:nd(this.In),orderedDocumentKey:nd(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function zs(i,e){let t=i.hn-e.hn;return t!==0?t:(t=j0(i.Tn,e.Tn),t!==0?t:(t=j0(i.In,e.In),t!==0?t:pe.comparator(i.Pn,e.Pn)))}function j0(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function nd(i){return aA()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(i):i}function z0(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(i)}class B0{constructor(e){this.Vn=new yt(((t,r)=>Pt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Zg(e);if(t!==void 0&&!this.pn(t))return!1;const r=La(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const m=r[l];if(!this.yn(f,m)||!this.wn(this.dn[c++],m))return!1}++l}for(;l<r.length;++l){const f=r[l];if(c>=this.dn.length||!this.wn(this.dn[c++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new yt(Pt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Qf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Qf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Qf(r.field,r.dir==="asc"?0:1)));return new dd(dd.UNKNOWN_ID,this.collectionId,t,xc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(i){var t,r;if(Ae(i instanceof Ze||i instanceof gt,20012),i instanceof Ze){if(i instanceof Nw){const a=((r=(t=i.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((l=>Ze.create(i.field,"==",l))))||[];return gt.create(a,"or")}return i}const e=i.filters.map((a=>fI(a)));return gt.create(e,i.op)}function fO(i){if(i.getFilters().length===0)return[];const e=yy(fI(i));return Ae(dI(e),7391),py(e)||gy(e)?[e]:e.getFilters()}function py(i){return i instanceof Ze}function gy(i){return i instanceof gt&&n_(i)}function dI(i){return py(i)||gy(i)||(function(t){if(t instanceof gt&&ay(t)){for(const r of t.getFilters())if(!py(r)&&!gy(r))return!1;return!0}return!1})(i)}function yy(i){if(Ae(i instanceof Ze||i instanceof gt,34018),i instanceof Ze)return i;if(i.filters.length===1)return yy(i.filters[0]);const e=i.filters.map((r=>yy(r)));let t=gt.create(e,i.op);return t=Sd(t),dI(t)?t:(Ae(t instanceof gt,64498),Ae(Dl(t),40251),Ae(t.filters.length>1,57927),t.filters.reduce(((r,a)=>c_(r,a))))}function c_(i,e){let t;return Ae(i instanceof Ze||i instanceof gt,38388),Ae(e instanceof Ze||e instanceof gt,25473),t=i instanceof Ze?e instanceof Ze?(function(a,l){return gt.create([a,l],"and")})(i,e):q0(i,e):e instanceof Ze?q0(e,i):(function(a,l){if(Ae(a.filters.length>0&&l.filters.length>0,48005),Dl(a)&&Dl(l))return Cw(a,l.getFilters());const c=ay(a)?a:l,f=ay(a)?l:a,m=c.filters.map((g=>c_(g,f)));return gt.create(m,"or")})(i,e),Sd(t)}function q0(i,e){if(Dl(e))return Cw(e,i.getFilters());{const t=e.filters.map((r=>c_(i,r)));return gt.create(t,"or")}}function Sd(i){if(Ae(i instanceof Ze||i instanceof gt,11850),i instanceof Ze)return i;const e=i.getFilters();if(e.length===1)return Sd(e[0]);if(Iw(i))return i;const t=e.map((a=>Sd(a))),r=[];return t.forEach((a=>{a instanceof Ze?r.push(a):a instanceof gt&&(a.op===i.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:gt.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.Sn=new h_}addToCollectionParentIndex(e,t){return this.Sn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(_i.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class h_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new yt(ct.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new yt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="IndexedDbIndexManager",kf=new Uint8Array(0);class mO{constructor(e,t){this.databaseId=t,this.Dn=new h_,this.Cn=new as((r=>to(r)),((r,a)=>Zc(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:Un(a)};return H0(e).put(l)}return F.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[XA(t),""],!1,!0);return H0(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Tr(c.parent))}return r}))}addFieldIndex(e,t){const r=Zu(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=nl(e);return l.next((f=>{c.put(P0(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Zu(e),a=nl(e),l=tl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Zu(e),r=tl(e),a=nl(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return F.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new B0(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=tl(e);let a=!0;const l=new Map;return F.forEach(this.vn(t),(c=>this.Fn(e,c).next((f=>{a&&(a=!!f),l.set(c,f)})))).next((()=>{if(a){let c=Ge();const f=[];return F.forEach(l,((m,g)=>{fe(F0,`Using index ${(function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map((re=>`${re.fieldPath}:${re.kind}`)).join(",")}`})(m)} to execute ${to(t)}`);const _=(function(H,re){const se=Zg(re);if(se===void 0)return null;for(const W of vd(H,se.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null})(g,m),E=(function(H,re){const se=new Map;for(const W of La(re))for(const R of vd(H,W.fieldPath))switch(R.op){case"==":case"in":se.set(W.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return se.set(W.fieldPath.canonicalString(),R.value),Array.from(se.values())}return null})(g,m),b=(function(H,re){const se=[];let W=!0;for(const R of La(re)){const S=R.kind===0?T0(H,R.fieldPath,H.startAt):b0(H,R.fieldPath,H.startAt);se.push(S.value),W&&(W=S.inclusive)}return new Cl(se,W)})(g,m),w=(function(H,re){const se=[];let W=!0;for(const R of La(re)){const S=R.kind===0?b0(H,R.fieldPath,H.endAt):T0(H,R.fieldPath,H.endAt);se.push(S.value),W&&(W=S.inclusive)}return new Cl(se,W)})(g,m),P=this.Mn(m,g,b),D=this.Mn(m,g,w),M=this.xn(m,g,E),U=this.On(m.indexId,_,P,b.inclusive,D,w.inclusive,M);return F.forEach(U,(G=>r.Z(G,t.limit).next((H=>{H.forEach((re=>{const se=pe.fromSegments(re.documentKey);c.has(se)||(c=c.add(se),f.push(se))}))}))))})).next((()=>f))}return F.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=fO(gt.create(e.filters,"and")).map((r=>ly(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,c,f){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let E=0;E<m;++E){const b=t?this.Nn(t[E/g]):kf,w=this.Bn(e,b,r[E%g],a),P=this.Ln(e,b,l[E%g],c),D=f.map((M=>this.Bn(e,b,M,!0)));_.push(...this.createRange(w,P,D))}return _}Bn(e,t,r,a){const l=new qa(e,pe.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new qa(e,pe.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new B0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const f of l)r.gn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(e,t){let r=2;const a=this.vn(t);return F.forEach(a,(l=>this.Fn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(m){let g=new yt(Pt.comparator),_=!1;for(const E of m.filters)for(const b of E.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:g=g.add(b.field));for(const E of m.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(_?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new Wu;for(const a of La(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.ln(a.kind);Ba.Wt.Dt(l,c)}return r.un()}Nn(e){const t=new Wu;return Ba.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Wu;return Ba.Wt.Dt(Lc(this.databaseId,t),r.ln((function(l){const c=La(l);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new Wu);let l=0;for(const c of La(e)){const f=r[l++];for(const m of a)if(this.qn(t,c.fieldPath)&&Uc(f))a=this.Un(a,c,f);else{const g=m.ln(c.kind);Ba.Wt.Dt(f,g)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const f of a){const m=new Wu;m.seed(f.un()),Ba.Wt.Dt(c,m.ln(t.kind)),l.push(m)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof Ze&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Zu(e),a=nl(e);return(t?r.H(ty,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const c=[];return F.forEach(l,(f=>a.get([f.indexId,this.uid]).next((m=>{c.push((function(_,E){const b=E?new xc(E.sequenceNumber,new _i(io(E.readTime),new pe(Tr(E.documentKey)),E.largestBatchId)):xc.empty(),w=_.fields.map((([P,D])=>new Qf(Pt.fromServerFormat(P),D)));return new dd(_.indexId,_.collectionGroup,w,b)})(f,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:je(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Zu(e),l=nl(e);return this.Wn(e).next((c=>a.H(ty,IDBKeyRange.bound(t,t)).next((f=>F.forEach(f,(m=>l.put(P0(m.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return F.forEach(t,((a,l)=>{const c=r.get(a.collectionGroup);return(c?F.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(r.set(a.collectionGroup,f),F.forEach(f,(m=>this.Qn(e,a,m).next((g=>{const _=this.Gn(l,m);return g.isEqual(_)?F.resolve():this.zn(e,l,m,g,_)})))))))}))}jn(e,t,r,a){return tl(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return tl(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=tl(e);let l=new yt(zs);return a.ee({index:uw,range:IDBKeyRange.only([r.indexId,this.uid,nd(this.Kn(r,t))])},((c,f)=>{l=l.add(new qa(r.indexId,t,z0(f.arrayValue),z0(f.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new yt(zs);const a=this.kn(t,e);if(a==null)return r;const l=Zg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Uc(c))for(const f of c.arrayValue.values||[])r=r.add(new qa(t.indexId,e.key,this.Nn(f),a))}else r=r.add(new qa(t.indexId,e.key,kf,a));return r}zn(e,t,r,a,l){fe(F0,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,_,E,b){const w=m.getIterator(),P=g.getIterator();let D=Zo(w),M=Zo(P);for(;D||M;){let U=!1,G=!1;if(D&&M){const H=_(D,M);H<0?G=!0:H>0&&(U=!0)}else D!=null?G=!0:U=!0;U?(E(M),M=Zo(P)):G?(b(D),D=Zo(w)):(D=Zo(w),M=Zo(P))}})(a,l,zs,(f=>{c.push(this.jn(e,t,r,f))}),(f=>{c.push(this.Hn(e,t,r,f))})),F.waitFor(c)}Wn(e){let t=1;return nl(e).ee({index:lw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,f)=>zs(c,f))).filter(((c,f,m)=>!f||zs(c,m[f-1])!==0));const a=[];a.push(e);for(const c of r){const f=zs(c,e),m=zs(c,t);if(f===0)a[0]=e.En();else if(f>0&&m<0)a.push(c),a.push(c.En());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const f=a[c].An(this.uid,kf,pe.empty()),m=a[c+1].An(this.uid,kf,pe.empty());l.push(IDBKeyRange.bound(f,m))}return l}Jn(e,t){return zs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(G0)}getMinOffset(e,t){return F.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||ve(44426))))).next(G0)}}function H0(i){return dn(i,Vc)}function tl(i){return dn(i,_c)}function Zu(i){return dn(i,Xy)}function nl(i){return dn(i,yc)}function G0(i){Ae(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;Yy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new _i(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mI=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(i,e,t){const r=i.store(Gi),a=i.store(bl),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=r.ee({range:c},((_,E,b)=>(f++,b.delete())));l.push(m.next((()=>{Ae(f===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const E=sw(e,_.key.path,t.batchId);l.push(a.delete(E)),g.push(_.key)}return F.waitFor(l).next((()=>g))}function Ad(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ve(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(mI,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);class im{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Ae(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new im(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).ee({index:Ha,range:r},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=ul(e),c=Bs(e);return c.add({}).next((f=>{Ae(typeof f=="number",49019);const m=new s_(f,t,r,a),g=(function(w,P,D){const M=D.baseMutations.map((G=>Td(w.yt,G))),U=D.mutations.map((G=>Td(w.yt,G)));return{userId:P,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:M,mutations:U}})(this.serializer,this.userId,m),_=[];let E=new yt(((b,w)=>je(b.canonicalString(),w.canonicalString())));for(const b of a){const w=sw(this.userId,b.key.path,f);E=E.add(b.key.path.popLast()),_.push(c.put(g)),_.push(l.put(w,q2))}return E.forEach((b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),F.waitFor(_).next((()=>m))}))}lookupMutationBatch(e,t){return Bs(e).get(t).next((r=>r?(Ae(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),za(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?F.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Bs(e).ee({index:Ha,range:a},((c,f,m)=>{f.userId===this.userId&&(Ae(f.batchId>=r,47524,{Yn:r}),l=za(this.serializer,f)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ka;return Bs(e).ee({index:Ha,range:t,reverse:!0},((a,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ka],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).H(Ha,t).next((r=>r.map((a=>za(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=$f(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return ul(e).ee({range:a},((c,f,m)=>{const[g,_,E]=c,b=Tr(_);if(g===this.userId&&t.path.isEqual(b))return Bs(e).get(E).next((w=>{if(!w)throw ve(61480,{er:c,batchId:E});Ae(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:E}),l.push(za(this.serializer,w))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yt(je);const a=[];return t.forEach((l=>{const c=$f(this.userId,l.path),f=IDBKeyRange.lowerBound(c),m=ul(e).ee({range:f},((g,_,E)=>{const[b,w,P]=g,D=Tr(w);b===this.userId&&l.path.isEqual(D)?r=r.add(P):E.done()}));a.push(m)})),F.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=$f(this.userId,r),c=IDBKeyRange.lowerBound(l);let f=new yt(je);return ul(e).ee({range:c},((m,g,_)=>{const[E,b,w]=m,P=Tr(b);E===this.userId&&r.isPrefixOf(P)?P.length===a&&(f=f.add(w)):_.done()})).next((()=>this.tr(e,f)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(Bs(e).get(l).next((c=>{if(c===null)throw ve(35274,{batchId:l});Ae(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(za(this.serializer,c))})))})),F.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return pI(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),F.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return F.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return ul(e).ee({range:r},((l,c,f)=>{if(l[0]===this.userId){const m=Tr(l[1]);a.push(m)}else f.done()})).next((()=>{Ae(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return gI(e,this.userId,t)}ir(e){return yI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ka,lastStreamToken:""}))}}function gI(i,e,t){const r=$f(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return ul(i).ee({range:l,Y:!0},((f,m,g)=>{const[_,E,b]=f;_===e&&E===a&&(c=!0),g.done()})).next((()=>c))}function Bs(i){return dn(i,Gi)}function ul(i){return dn(i,bl)}function yI(i){return dn(i,Mc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ro(0)}static ar(){return new ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new ro(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Re.fromTimestamp(new pt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>il(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Ae(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return il(e).ee(((c,f)=>{const m=uc(f);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>F.waitFor(l))).next((()=>a))}forEachTarget(e,t){return il(e).ee(((r,a)=>{const l=uc(a);t(l)}))}ur(e){return Y0(e).get(gd).next((t=>(Ae(t!==null,2888),t)))}cr(e,t){return Y0(e).put(gd,t)}lr(e,t){return il(e).put(cI(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=to(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return il(e).ee({range:a,index:ow},((c,f,m)=>{const g=uc(f);Zc(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Ys(e);return t.forEach((c=>{const f=Un(c.path);a.push(l.put({targetId:r,path:f})),a.push(this.referenceDelegate.addReference(e,r,c))})),F.waitFor(a)}removeMatchingKeys(e,t,r){const a=Ys(e);return F.forEach(t,(l=>{const c=Un(l.path);return F.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Ys(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Ys(e);let l=Ge();return a.ee({range:r,Y:!0},((c,f,m)=>{const g=Tr(c[1]),_=new pe(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const r=Un(t.path),a=IDBKeyRange.bound([r],[XA(r)],!1,!0);let l=0;return Ys(e).ee({index:$y,Y:!0,range:a},(([c,f],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return il(e).get(t).next((r=>r?uc(r):null))}}function il(i){return dn(i,Sl)}function Y0(i){return dn(i,Ya)}function Ys(i){return dn(i,Al)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="LruGarbageCollector",_I=1048576;function $0([i,e],[t,r]){const a=je(i,t);return a===0?je(e,r):a}class gO{constructor(e){this.Pr=e,this.buffer=new yt($0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){fe(Q0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){la(t)?fe(Q0,"Ignoring IndexedDB error during garbage collection: ",t):await oa(t)}await this.Ar(3e5)}))}}class yO{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(ni.ce);const r=new gO(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(K0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,c,f,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,f=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),sl()<=We.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function EI(i,e){return new yO(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t){this.db=e,this.garbageCollector=EI(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return Lf(e,r)}removeReference(e,t,r){return Lf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Lf(e,t)}wr(e,t){return(function(a,l){let c=!1;return yI(a).te((f=>gI(a,f,l).next((m=>(m&&(c=!0),F.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,f)=>{if(f<=t){const m=this.wr(e,c).next((g=>{if(!g)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Re.min()),Ys(e).delete((function(E){return[0,Un(E.path)]})(c)))))}));a.push(m)}})).next((()=>F.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Lf(e,t)}yr(e,t){const r=Ys(e);let a,l=ni.ce;return r.ee({index:$y},(([c,f],{path:m,sequenceNumber:g})=>{c===0?(l!==ni.ce&&t(new pe(Tr(a)),l),l=g,a=m):l=ni.ce})).next((()=>{l!==ni.ce&&t(new pe(Tr(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(i,e){return Ys(i).put((function(r,a){return{targetId:0,path:Un(r.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.changes=new as((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Pa(e).put(r)}removeEntry(e,t,r){return Pa(e).delete((function(l,c){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],bd(c),f[f.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Ut.newInvalidDocument(t);return Pa(e).ee({index:Xf,range:IDBKeyRange.only(ec(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:Ut.newInvalidDocument(t)};return Pa(e).ee({index:Xf,range:IDBKeyRange.only(ec(t))},((a,l)=>{r={document:this.Sr(t,l),size:Ad(l)}})).next((()=>r))}getEntries(e,t){let r=gi();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);r=r.insert(a,c)})).next((()=>r))}vr(e,t){let r=gi(),a=new At(pe.comparator);return this.Cr(e,t,((l,c)=>{const f=this.Sr(l,c);r=r.insert(l,f),a=a.insert(l,Ad(c))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return F.resolve();let a=new yt(W0);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(ec(a.first()),ec(a.last())),c=a.getIterator();let f=c.getNext();return Pa(e).ee({index:Xf,range:l},((m,g,_)=>{const E=pe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&W0(f,E)<0;)r(f,null),f=c.getNext();f&&f.isEqual(E)&&(r(f,g),f=c.hasNext()?c.getNext():null),f?_.j(ec(f)):_.done()})).next((()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),bd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pa(e).H(IDBKeyRange.bound(f,m,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let _=gi();for(const E of g){const b=this.Sr(pe.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);b.isFoundDocument()&&(eh(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _}))}getAllFromCollectionGroup(e,t,r,a){let l=gi();const c=J0(t,r),f=J0(t,_i.max());return Pa(e).ee({index:aw,range:IDBKeyRange.bound(c,f,!0)},((m,g,_)=>{const E=this.Sr(pe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new EO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return X0(e).get(ey).next((t=>(Ae(!!t,20021),t)))}br(e,t){return X0(e).put(ey,t)}Sr(e,t){if(t){const r=sO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Re.min())))return r}return Ut.newInvalidDocument(e)}}function bI(i){return new vO(i)}class EO extends TI{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new as((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new yt(((l,c)=>je(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const f=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,f.readTime)),c.isValidDocument()){const m=O0(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=Ad(m);r+=g-f.size,t.push(this.Mr.addEntry(e,l,m))}else if(r-=f.size,this.trackRemovals){const m=O0(this.Mr.serializer,c.convertToNoDocument(Re.min()));t.push(this.Mr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function X0(i){return dn(i,Oc)}function Pa(i){return dn(i,pd)}function ec(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function J0(i,e){const t=e.documentKey.path.toArray();return[i,bd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function W0(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=je(t[l],r[l]),a)return a;return a=je(t.length,r.length),a||(a=je(t[t.length-2],r[r.length-2]),a||je(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&bc(r.mutation,a,ii.empty(),pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const a=br();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=oc();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=br();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,r,a){let l=gi();const c=Tc(),f=(function(){return Tc()})();return t.forEach(((m,g)=>{const _=r.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof os)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),bc(_.mutation,g,_.mutation.getFieldMask(),pt.now())):c.set(g.key,ii.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>f.set(g,new TO(_,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Tc();let a=new At(((c,f)=>c-f)),l=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||ii.empty();_=f.applyToLocalView(g,_),r.set(m,_);const E=(a.get(f.batchId)||Ge()).add(m);a=a.insert(f.batchId,E)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,_=m.value,E=jw();_.forEach((b=>{if(!l.has(b)){const w=Gw(t.get(b),r.get(b));w!==null&&E.set(b,w),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return F.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return wM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):F.resolve(br());let f=Tl,m=l;return c.next((g=>F.forEach(g,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?F.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Ge()))).next((_=>({batchId:f,changes:Uw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((r=>{let a=oc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=oc();return this.indexManager.getCollectionParents(e,l).next((f=>F.forEach(f,(m=>{const g=(function(E,b){return new Hl(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((_=>{_.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Ut.newInvalidDocument(_)))}));let f=oc();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&bc(_.mutation,g,ii.empty(),pt.now()),eh(t,g)&&(f=f.insert(m,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return F.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Hn(a.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:hI(a.bundledQuery),readTime:Hn(a.readTime)}})(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.overlays=new At(pe.comparator),this.Lr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const r=br();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),F.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){const a=br(),l=t.length+1,c=new pe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return F.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new At(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=br(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const f=br(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>f.set(g,_))),!(f.size()>=a)););return F.resolve(f)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new o_(t,r));let l=this.Lr.get(t);l===void 0&&(l=Ge(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.kr=new yt(_n.Kr),this.qr=new yt(_n.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new _n(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new _n(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new pe(new ct([])),r=new _n(t,e),a=new _n(t,e+1),l=[];return this.qr.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new pe(new ct([])),r=new _n(t,e),a=new _n(t,e+1);let l=Ge();return this.qr.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new _n(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class _n{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return pe.comparator(e.key,t.key)||je(e.Hr,t.Hr)}static Ur(e,t){return je(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new yt(_n.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new s_(l,t,r,a);this.mutationQueue.push(c);for(const f of a)this.Jr=this.Jr.add(new _n(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return F.resolve(c)}lookupMutationBatch(e,t){return F.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return F.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Ka:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _n(t,0),a=new _n(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),F.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yt(je);return t.forEach((a=>{const l=new _n(a,0),c=new _n(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{r=r.add(f.Hr)}))})),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;pe.isDocumentKey(l)||(l=l.child(""));const c=new _n(new pe(l),0);let f=new yt(je);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Hr)),!0)}),c),F.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ae(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(t.mutations,(a=>{const l=new _n(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new _n(t,0),a=this.Jr.firstAfterOrEqual(r);return F.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.ti=e,this.docs=(function(){return new At(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Ut.newInvalidDocument(a))})),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=gi();const c=t.path,f=new pe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Yy(ew(_),r)<=0||(a.has(_.key)||eh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return F.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ve(9500)}ni(e,t){return F.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new RO(this)}getSize(e){return F.resolve(this.size)}}class RO extends TI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),F.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.persistence=e,this.ri=new as((t=>to(t)),Zc),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new f_,this.targetCount=0,this.oi=ro._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),F.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ro(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.lr(t),F.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),F.waitFor(l).next((()=>a))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),F.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,t){this._i={},this.overlays={},this.ai=new ni(0),this.ui=!1,this.ui=!0,this.ci=new AO,this.referenceDelegate=e(this),this.li=new CO(this),this.indexManager=new dO,this.remoteDocumentCache=(function(a){return new IO(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new uI(t),this.Pi=new bO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new wO(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const a=new DO(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return F.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class DO extends nw{constructor(e){super(),this.currentSequenceNumber=e}}class rm{constructor(e){this.persistence=e,this.Ri=new f_,this.Ai=null}static Vi(e){return new rm(e)}get di(){if(this.Ai)return this.Ai;throw ve(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,(r=>{const a=pe.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Re.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class wd{constructor(e,t){this.persistence=e,this.fi=new as((r=>Un(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=EI(this,t)}static Vi(e,t){return new wd(e,t)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return F.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?F.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(r++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wf(e.data.value)),t}wr(e,t,r){return F.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return F.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Gd("createOrUpgrade",t);r<1&&a>=1&&((function(m){m.createObjectStore(Wc)})(e),(function(m){m.createObjectStore(Mc,{keyPath:B2}),m.createObjectStore(Gi,{keyPath:u0,autoIncrement:!0}).createIndex(Ha,c0,{unique:!0}),m.createObjectStore(bl)})(e),Z0(e),(function(m){m.createObjectStore(Ua)})(e));let c=F.resolve();return r<3&&a>=3&&(r!==0&&((function(m){m.deleteObjectStore(Al),m.deleteObjectStore(Sl),m.deleteObjectStore(Ya)})(e),Z0(e)),c=c.next((()=>(function(m){const g=m.store(Ya),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Re.min().toTimestamp(),targetCount:0};return g.put(gd,_)})(l)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(m,g){return g.store(Gi).H().next((E=>{m.deleteObjectStore(Gi),m.createObjectStore(Gi,{keyPath:u0,autoIncrement:!0}).createIndex(Ha,c0,{unique:!0});const b=g.store(Gi),w=E.map((P=>b.put(P)));return F.waitFor(w)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(wl,{keyPath:X2})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.gi(l)))),r<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore(Oc)})(e),this.pi(l))))),r<7&&a>=7&&(c=c.next((()=>this.yi(l)))),r<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),r<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.bi(l)))),r<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Yd,{keyPath:J2})})(e),(function(m){m.createObjectStore(Qd,{keyPath:W2})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore($d,{keyPath:sM});g.createIndex(ny,aM,{unique:!1}),g.createIndex(cw,oM,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(pd,{keyPath:F2});g.createIndex(Xf,H2),g.createIndex(aw,G2)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(Ua)))),r<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),r<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore(Xy,{keyPath:Z2,autoIncrement:!0}).createIndex(ty,eM,{unique:!1}),m.createObjectStore(yc,{keyPath:tM}).createIndex(lw,nM,{unique:!1}),m.createObjectStore(_c,{keyPath:iM}).createIndex(uw,rM,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore(yc).clear()})).next((()=>{t.objectStore(_c).clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(Jy,{keyPath:lM})})(e)}))),r<18&&a>=18&&aA()&&(c=c.next((()=>{t.objectStore(yc).clear()})).next((()=>{t.objectStore(_c).clear()}))),c}pi(e){let t=0;return e.store(Ua).ee(((r,a)=>{t+=Ad(a)})).next((()=>{const r={byteSize:t};return e.store(Oc).put(ey,r)}))}gi(e){const t=e.store(Mc),r=e.store(Gi);return t.H().next((a=>F.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Ka],[l.userId,l.lastAcknowledgedBatchId]);return r.H(Ha,c).next((f=>F.forEach(f,(m=>{Ae(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=za(this.serializer,m);return pI(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(Al),r=e.store(Ua);return e.store(Ya).get(gd).next((a=>{const l=[];return r.ee(((c,f)=>{const m=new ct(c),g=(function(E){return[0,Un(E)]})(m);l.push(t.get(g).next((_=>_?F.resolve():(E=>t.put({targetId:0,path:Un(E),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>F.waitFor(l)))}))}wi(e,t){e.createObjectStore(Vc,{keyPath:$2});const r=t.store(Vc),a=new h_,l=c=>{if(a.add(c)){const f=c.lastSegment(),m=c.popLast();return r.put({collectionId:f,parent:Un(m)})}};return t.store(Ua).ee({Y:!0},((c,f)=>{const m=new ct(c);return l(m.popLast())})).next((()=>t.store(bl).ee({Y:!0},(([c,f,m],g)=>{const _=Tr(f);return l(_.popLast())}))))}bi(e){const t=e.store(Sl);return t.ee(((r,a)=>{const l=uc(a),c=cI(this.serializer,l);return t.put(c)}))}Si(e,t){const r=t.store(Ua),a=[];return r.ee(((l,c)=>{const f=t.store(pd),m=(function(E){return E.document?new pe(ct.fromString(E.document.name).popFirst(5)):E.noDocument?pe.fromSegments(E.noDocument.path):E.unknownDocument?pe.fromSegments(E.unknownDocument.path):ve(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(f.put(g))})).next((()=>F.waitFor(a)))}Di(e,t){const r=t.store(Gi),a=bI(this.serializer),l=new d_(rm.Vi,this.serializer.yt);return r.H().next((c=>{const f=new Map;return c.forEach((m=>{let g=f.get(m.userId)??Ge();za(this.serializer,m).keys().forEach((_=>g=g.add(_))),f.set(m.userId,g)})),F.forEach(f,((m,g)=>{const _=new Pn(g),E=nm.wt(this.serializer,_),b=l.getIndexManager(_),w=im.wt(_,this.serializer,b,l.referenceDelegate);return new SI(a,w,E,b).recalculateAndSaveOverlaysForDocumentKeys(new iy(t,ni.ce),m).next()}))}))}}function Z0(i){i.createObjectStore(Al,{keyPath:Y2}).createIndex($y,Q2,{unique:!0}),i.createObjectStore(Sl,{keyPath:"targetId"}).createIndex(ow,K2,{unique:!0}),i.createObjectStore(Ya)}const qs="IndexedDbPersistence",Rg=18e5,Cg=5e3,Dg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",NO="main";class m_{constructor(e,t,r,a,l,c,f,m,g,_,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=c,this.document=f,this.Fi=g,this.Mi=_,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=b=>Promise.resolve(),!m_.v())throw new de(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _O(this,a),this.Ki=t+NO,this.serializer=new uI(m),this.qi=new ea(this.Ki,this.xi,new xO(this.serializer)),this.ci=new oO,this.li=new pO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bI(this.serializer),this.Pi=new aO,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&Ht(qs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(ne.FAILED_PRECONDITION,Dg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new ni(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(la(e))return fe(qs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe(qs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return tc(e).get(Wo).next((t=>F.resolve(this.Xi(t))))}Yi(e){return Uf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Rg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=dn(t,wl);return r.H().next((a=>{const l=this.ns(a,Rg),c=a.filter((f=>l.indexOf(f)===-1));return F.forEach(c,(f=>r.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?F.resolve(!0):tc(e).get(Wo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cg)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new de(ne.FAILED_PRECONDITION,Dg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uf(e).H().next((r=>this.ns(r,Cg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||c&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&fe(qs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Wc,wl],(e=>{const t=new iy(e,ni.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Uf(e).H().next((t=>this.ns(t,Rg).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return im.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return nm.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){fe(qs,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?hM:m===17?mw:m===16?cM:m===15?Wy:m===14?dw:m===13?fw:m===12?uM:m===11?hw:void ve(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(f=>(c=new iy(f,this.ai?this.ai.next():ni.ce),t==="readwrite-primary"?this.ji(c).next((m=>!!m||this.Hi(c))).next((m=>{if(!m)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new de(ne.FAILED_PRECONDITION,tw);return r(c)})).next((m=>this.Zi(c).next((()=>m)))):this.Ps(c).next((()=>r(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Ps(e){return tc(e).get(Wo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cg)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(ne.FAILED_PRECONDITION,Dg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tc(e).put(Wo,t)}static v(){return ea.v()}Ji(e){const t=tc(e);return t.get(Wo).next((r=>this.Xi(r)?(fe(qs,"Releasing primary lease."),t.delete(Wo)):F.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;sA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const r=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return fe(qs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ht(qs,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tc(i){return dn(i,Wc)}function Uf(i){return dn(i,wl)}function AI(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Ge(),a=Ge();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new p_(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return sA()?8:iw(fn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new MO;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(sl()<=We.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(sl()<=We.DEBUG&&fe("QueryEngine","Query:",al(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(sl()<=We.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(t))):F.resolve())}gs(e,t){if(S0(t))return F.resolve(null);let r=yi(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=cy(t,null,"F"),r=yi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ge(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.bs(t,f);return this.Ss(t,g,c,m.readTime)?this.gs(e,cy(t,null,"F")):this.Ds(e,g,t,m)}))))})))))}ps(e,t,r,a){return S0(t)||a.isEqual(Re.min())?F.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,a)?F.resolve(null):(sl()<=We.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),al(t)),this.Ds(e,c,t,ZA(a,Tl)).next((f=>f)))}))}bs(e,t){let r=new yt(kw(e));return t.forEach(((a,l)=>{eh(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return sl()<=We.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",al(t)),this.fs.getDocumentsMatchingQuery(e,t,_i.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="LocalStore",OO=3e8;class VO{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new At(je),this.Fs=new as((l=>to(l)),Zc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function II(i,e,t,r){return new VO(i,e,t,r)}async function RI(i,e){const t=Te(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],f=[];let m=Ge();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){f.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function PO(i,e){const t=Te(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,_){const E=g.batch,b=E.keys();let w=F.resolve();return b.forEach((P=>{w=w.next((()=>_.getEntry(m,P))).next((D=>{const M=g.docVersions.get(P);Ae(M!==null,48541),D.version.compareTo(M)<0&&(E.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),_.addEntry(D)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=Ge();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function CI(i){const e=Te(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function kO(i,e){const t=Te(i),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((_,E)=>{const b=a.get(E);if(!b)return;f.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let w=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Kt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,r)),a=a.insert(E,w),(function(D,M,U){return D.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=OO?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(b,w,_)&&f.push(t.li.updateTargetData(l,w))}));let m=gi(),g=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(LO(l,c,e.documentUpdates).next((_=>{m=_.Bs,g=_.Ls}))),!r.isEqual(Re.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(_)}return F.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.vs=a,l)))}function LO(i,e,t){let r=Ge(),a=Ge();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=gi();return t.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Re.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):fe(g_,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:a}}))}function UO(i,e){const t=Te(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ka),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Id(i,e){const t=Te(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,F.resolve(a)):t.li.allocateTargetId(r).next((c=>(a=new Wr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Ol(i,e,t){const r=Te(i),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!la(c))throw c;fe(g_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function _y(i,e,t){const r=Te(i);let a=Re.min(),l=Ge();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const E=Te(m),b=E.Fs.get(_);return b!==void 0?F.resolve(E.vs.get(b)):E.li.getTargetData(g,_)})(r,c,yi(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?a:Re.min(),t?l:Ge()))).next((f=>(NI(r,Pw(e),f),{documents:f,ks:l})))))}function DI(i,e){const t=Te(i),r=Te(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((c=>c?c.target:null))))}function xI(i,e){const t=Te(i),r=t.Ms.get(e)||Re.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,ZA(r,Tl),Number.MAX_SAFE_INTEGER))).then((a=>(NI(t,e,a),a)))}function NI(i,e,t){let r=i.Ms.get(e)||Re.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.Ms.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="firestore_clients";function eS(i,e){return`${MI}_${i}_${e}`}const OI="firestore_mutations";function tS(i,e,t){let r=`${OI}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const VI="firestore_targets";function xg(i,e){return`${VI}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="SharedClientState";class Rd{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new de(a.error.code,a.error.message))),c?new Rd(e,t,a.state,l):(Ht(Er,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new de(r.error.code,r.error.message))),l?new Sc(e,r.state,a):(Ht(Er,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=i_();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=rw(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Cd(e,l):(Ht(Er,`Failed to parse client data for instance '${e}': ${t}`),null)}}class y_{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new y_(t.clientId,t.onlineState):(Ht(Er,`Failed to parse online state: ${e}`),null)}}class vy{constructor(){this.activeTargetIds=i_()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ng{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new At(je),this.started=!1,this.Zs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=eS(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new vy),this.eo=new RegExp(`^${MI}_${c}_([^_]*)$`),this.no=new RegExp(`^${OI}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${VI}_${c}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(eS(this.persistenceKey,r));if(a){const l=Cd.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(xg(this.persistenceKey,e));if(a){const l=Sc.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe(Er,"READ",e,t),t}setItem(e,t){fe(Er,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe(Er,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(fe(Er,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let c=ni.ce;if(l!=null)try{const f=JSON.parse(l);Ae(typeof f=="number",30636,{yo:l}),c=f}catch(f){Ht(Er,"Failed to read sequence number from WebStorage",f)}return c})(t.newValue);r!==ni.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new Rd(this.currentUser,e,t,r),l=tS(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=tS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=xg(this.persistenceKey,e),l=new Sc(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return Cd.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Rd.$s(new Pn(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return Sc.$s(a,t)}_o(e){return y_.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);fe(Er,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),c=[],f=[];return l.forEach((m=>{a.has(m)||c.push(m)})),a.forEach((m=>{l.has(m)||f.push(m)})),this.syncEngine.Co(c,f).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=i_();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class PI{constructor(){this.vo=new vy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new vy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="ConnectivityMonitor";class iS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){fe(nS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){fe(nS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf=null;function Ey(){return jf===null?jf=(function(){return 268435456+Math.round(2147483648*Math.random())})():jf++,"0x"+jf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="RestConnection",zO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class BO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===yd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const c=Ey(),f=this.Qo(e,t.toUriEncodedString());fe(Mg,`Sending RPC '${e}' ${c}:`,f,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:g}=new URL(f),_=zl(g);return this.zo(e,f,m,r,_).then((E=>(fe(Mg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw vl(Mg,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",r),E}))}jo(e,t,r,a,l,c){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=zO[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="WebChannelConnection",nc=(i,e,t)=>{i.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class dl extends BO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!dl.c_){const e=YA();nc(e,KA.STAT_EVENT,(t=>{t.stat===Jg.PROXY?fe(Vn,"STAT_EVENT: detected buffering proxy"):t.stat===Jg.NOPROXY&&fe(Vn,"STAT_EVENT: detected no buffering proxy")})),dl.c_=!0}}zo(e,t,r,a,l){const c=Ey();return new Promise(((f,m)=>{const g=new HA;g.setWithCredentials(!0),g.listenOnce(GA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Yf.NO_ERROR:const E=g.getResponseJson();fe(Vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case Yf.TIMEOUT:fe(Vn,`RPC '${e}' ${c} timed out`),m(new de(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const b=g.getStatus();if(fe(Vn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w==null?void 0:w.error;if(P&&P.status&&P.message){const D=(function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(G)>=0?G:ne.UNKNOWN})(P.status);m(new de(D,P.message))}else m(new de(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new de(ne.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{fe(Vn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);fe(Vn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,r,15)}))}T_(e,t,r){const a=Ey(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const g=l.join("");fe(Vn,`Creating RPC '${e}' stream ${a}: ${g}`,f);const _=c.createWebChannel(g,f);this.I_(_);let E=!1,b=!1;const w=new qO({Ho:P=>{b?fe(Vn,`Not sending because RPC '${e}' stream ${a} is closed:`,P):(E||(fe(Vn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),E=!0),fe(Vn,`RPC '${e}' stream ${a} sending:`,P),_.send(P))},Jo:()=>_.close()});return nc(_,ac.EventType.OPEN,(()=>{b||(fe(Vn,`RPC '${e}' stream ${a} transport opened.`),w.i_())})),nc(_,ac.EventType.CLOSE,(()=>{b||(b=!0,fe(Vn,`RPC '${e}' stream ${a} transport closed`),w.o_(),this.E_(_))})),nc(_,ac.EventType.ERROR,(P=>{b||(b=!0,vl(Vn,`RPC '${e}' stream ${a} transport errored. Name:`,P.name,"Message:",P.message),w.o_(new de(ne.UNAVAILABLE,"The operation could not be completed")))})),nc(_,ac.EventType.MESSAGE,(P=>{var D;if(!b){const M=P.data[0];Ae(!!M,16349);const U=M,G=(U==null?void 0:U.error)||((D=U[0])==null?void 0:D.error);if(G){fe(Vn,`RPC '${e}' stream ${a} received error:`,G);const H=G.status;let re=(function(R){const S=rn[R];if(S!==void 0)return Qw(S)})(H),se=G.message;H==="NOT_FOUND"&&se.includes("database")&&se.includes("does not exist")&&se.includes(this.databaseId.database)&&vl(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),re===void 0&&(re=ne.INTERNAL,se="Unknown error status: "+H+" with message "+G.message),b=!0,w.o_(new de(re,se)),_.close()}else fe(Vn,`RPC '${e}' stream ${a} received:`,M),w.__(M)}})),dl.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return QA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(i){return new dl(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(){return typeof window<"u"?window:null}function id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(i){return new $M(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dl.c_=!1;class LI{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="PersistentStream";class UI{constructor(e,t,r,a,l,c,f,m){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Ht(t.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new de(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(rS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(fe(rS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HO extends UI{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=WM(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?Hn(c.readTime):Re.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=dy(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=_d(m)?{documents:nI(l,m)}:{query:iI(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Jw(l,c.resumeToken);const g=hy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Re.min())>0){f.readTime=Ml(l,c.snapshotVersion.toTimestamp());const g=hy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const r=eO(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=dy(this.serializer),t.removeTarget=e,this.K_(t)}}class GO extends UI{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZM(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=dy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Td(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{}class YO extends KO{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,fy(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ne.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,fy(t,r),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function QO(i,e,t,r){return new YO(i,e,t,r)}class $O{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ht(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class XO{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{oo(this)&&(fe(so,"Restarting streams for network reachability change."),await(async function(m){const g=Te(m);g.Ea.add(4),await rh(g),g.Va.set("Unknown"),g.Ea.delete(4),await am(g)})(this))}))})),this.Va=new $O(r,a)}}async function am(i){if(oo(i))for(const e of i.Ra)await e(!0)}async function rh(i){for(const e of i.Ra)await e(!1)}function om(i,e){const t=Te(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),E_(t)?v_(t):Yl(t).O_()&&__(t,e))}function Vl(i,e){const t=Te(i),r=Yl(t);t.Ia.delete(e),r.O_()&&jI(t,e),t.Ia.size===0&&(r.O_()?r.L_():oo(t)&&t.Va.set("Unknown"))}function __(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yl(i).Z_(e)}function jI(i,e){i.da.$e(e),Yl(i).X_(e)}function v_(i){i.da=new GM({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Yl(i).start(),i.Va.ua()}function E_(i){return oo(i)&&!Yl(i).x_()&&i.Ia.size>0}function oo(i){return Te(i).Ea.size===0}function zI(i){i.da=void 0}async function JO(i){i.Va.set("Online")}async function WO(i){i.Ia.forEach(((e,t)=>{__(i,e)}))}async function ZO(i,e){zI(i),E_(i)?(i.Va.ha(e),v_(i)):i.Va.set("Unknown")}async function eV(i,e,t){if(i.Va.set("Online"),e instanceof Xw&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.da.removeTarget(f))})(i,e)}catch(r){fe(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dd(i,r)}else if(e instanceof td?i.da.Xe(e):e instanceof $w?i.da.st(e):i.da.tt(e),!t.isEqual(Re.min()))try{const r=await CI(i.localStore);t.compareTo(r)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Kt.EMPTY_BYTE_STRING,_.snapshotVersion)),jI(l,m);const E=new Wr(_.target,m,g,_.sequenceNumber);__(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(i,t)}catch(r){fe(so,"Failed to raise snapshot:",r),await Dd(i,r)}}async function Dd(i,e,t){if(!la(e))throw e;i.Ea.add(1),await rh(i),i.Va.set("Offline"),t||(t=()=>CI(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{fe(so,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await am(i)}))}function BI(i,e){return e().catch((t=>Dd(i,t,e)))}async function Kl(i){const e=Te(i),t=ra(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ka;for(;tV(e);)try{const a=await UO(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,nV(e,a)}catch(a){await Dd(e,a)}qI(e)&&FI(e)}function tV(i){return oo(i)&&i.Ta.length<10}function nV(i,e){i.Ta.push(e);const t=ra(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function qI(i){return oo(i)&&!ra(i).x_()&&i.Ta.length>0}function FI(i){ra(i).start()}async function iV(i){ra(i).ra()}async function rV(i){const e=ra(i);for(const t of i.Ta)e.ea(t.mutations)}async function sV(i,e,t){const r=i.Ta.shift(),a=a_.from(r,e,t);await BI(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Kl(i)}async function aV(i,e){e&&ra(i).Y_&&await(async function(r,a){if((function(c){return qM(c)&&c!==ne.ABORTED})(a.code)){const l=r.Ta.shift();ra(r).B_(),await BI(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Kl(r)}})(i,e),qI(i)&&FI(i)}async function sS(i,e){const t=Te(i);t.asyncQueue.verifyOperationInProgress(),fe(so,"RemoteStore received new credentials");const r=oo(t);t.Ea.add(3),await rh(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await am(t)}async function Ty(i,e){const t=Te(i);e?(t.Ea.delete(2),await am(t)):e||(t.Ea.add(2),await rh(t),t.Va.set("Unknown"))}function Yl(i){return i.ma||(i.ma=(function(t,r,a){const l=Te(t);return l.sa(),new HO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:JO.bind(null,i),Yo:WO.bind(null,i),t_:ZO.bind(null,i),J_:eV.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),E_(i)?v_(i):i.Va.set("Unknown")):(await i.ma.stop(),zI(i))}))),i.ma}function ra(i){return i.fa||(i.fa=(function(t,r,a){const l=Te(t);return l.sa(),new GO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:iV.bind(null,i),t_:aV.bind(null,i),ta:rV.bind(null,i),na:sV.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Kl(i)):(await i.fa.stop(),i.Ta.length>0&&(fe(so,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,f=new T_(e,t,c,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b_(i,e){if(Ht("AsyncQueue",`${e}: ${i}`),la(i))return new de(ne.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=oc(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.ga=new At(pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Pl{constructor(e,t,r,a,l,c,f,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Pl(e,t,ml.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class lV{constructor(){this.queries=oS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Te(t),l=a.queries;a.queries=oS(),l.forEach(((c,f)=>{for(const m of f.ba)m.onError(r)}))})(this,new de(ne.ABORTED,"Firestore shutting down"))}}function oS(){return new as((i=>Vw(i)),Zd)}async function uV(i,e){const t=Te(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new oV,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=b_(c,`Initialization of query '${al(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&S_(t)}async function cV(i,e){const t=Te(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function hV(i,e){const t=Te(i);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(a)&&(r=!0);c.wa=a}}r&&S_(t)}function fV(i,e,t){const r=Te(i),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function S_(i){i.Ca.forEach((e=>{e.next()}))}var by,lS;(lS=by||(by={})).Ma="default",lS.Cache="cache";class dV{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==by.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.key=e}}class GI{constructor(e){this.key=e}}class mV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ge(),this.mutatedKeys=Ge(),this.eu=kw(e),this.tu=new ml(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new aS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,E)=>{const b=a.get(_),w=eh(this.query,E)?E:null,P=!!b&&this.mutatedKeys.has(b.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;b&&w?b.data.isEqual(w.data)?P!==D&&(r.track({type:3,doc:w}),M=!0):this.su(b,w)||(r.track({type:2,doc:w}),M=!0,(m&&this.eu(w,m)>0||g&&this.eu(w,g)<0)&&(f=!0)):!b&&w?(r.track({type:0,doc:w}),M=!0):b&&!w&&(r.track({type:1,doc:b}),M=!0,(m||g)&&(f=!0)),M&&(w?(c=c.add(w),l=D?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:c,iu:r,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(w,P){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Vt:M})}};return D(w)-D(P)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),a=a??!1;const f=t&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new Pl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new GI(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new HI(r))})),t}cu(e){this.Za=e.ks,this.Ya=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ql="SyncEngine";class pV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gV{constructor(e){this.key=e,this.hu=!1}}class yV{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new as((f=>Vw(f)),Zd),this.Iu=new Map,this.Eu=new Set,this.Ru=new At(pe.comparator),this.Au=new Map,this.Vu=new f_,this.du={},this.mu=new Map,this.fu=ro.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _V(i,e,t=!0){const r=lm(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await KI(r,e,t,!0),a}async function vV(i,e){const t=lm(i);await KI(t,e,!0,!1)}async function KI(i,e,t,r){const a=await Id(i.localStore,yi(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await A_(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&om(i.remoteStore,a),f}async function A_(i,e,t,r,a){i.pu=(E,b,w)=>(async function(D,M,U,G){let H=M.view.ru(U);H.Ss&&(H=await _y(D.localStore,M.query,!1).then((({documents:R})=>M.view.ru(R,H))));const re=G&&G.targetChanges.get(M.targetId),se=G&&G.targetMismatches.get(M.targetId)!=null,W=M.view.applyChanges(H,D.isPrimaryClient,re,se);return Sy(D,M.targetId,W.au),W.snapshot})(i,E,b,w);const l=await _y(i.localStore,e,!0),c=new mV(e,l.ks),f=c.ru(l.documents),m=ih.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),g=c.applyChanges(f,i.isPrimaryClient,m);Sy(i,t,g.au);const _=new pV(e,t,c);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function EV(i,e,t){const r=Te(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!Zd(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ol(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Vl(r.remoteStore,a.targetId),kl(r,a.targetId)})).catch(oa)):(kl(r,a.targetId),await Ol(r.localStore,a.targetId,!0))}async function TV(i,e){const t=Te(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vl(t.remoteStore,r.targetId))}async function bV(i,e,t){const r=C_(i);try{const a=await(function(c,f){const m=Te(c),g=pt.now(),_=f.reduce(((w,P)=>w.add(P.key)),Ge());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let P=gi(),D=Ge();return m.xs.getEntries(w,_).next((M=>{P=M,P.forEach(((U,G)=>{G.isValidDocument()||(D=D.add(U))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,P))).next((M=>{E=M;const U=[];for(const G of f){const H=zM(G,E.get(G.key).overlayedDocument);H!=null&&U.push(new os(G.key,H,Aw(H.value.mapValue),En.exists(!0)))}return m.mutationQueue.addMutationBatch(w,g,U,f)})).next((M=>{b=M;const U=M.applyToLocalDocumentSet(E,D);return m.documentOverlayCache.saveOverlays(w,M.batchId,U)}))})).then((()=>({batchId:b.batchId,changes:Uw(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let g=c.du[c.currentUser.toKey()];g||(g=new At(je)),g=g.insert(f,m),c.du[c.currentUser.toKey()]=g})(r,a.batchId,t),await ca(r,a.changes),await Kl(r.remoteStore)}catch(a){const l=b_(a,"Failed to persist write");t.reject(l)}}async function YI(i,e){const t=Te(i);try{const r=await kO(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Ae(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ae(c.hu,14607):a.removedDocuments.size>0&&(Ae(c.hu,42227),c.hu=!1))})),await ca(t,r,e)}catch(r){await oa(r)}}function uS(i,e,t){const r=Te(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=Te(c);m.onlineState=f;let g=!1;m.queries.forEach(((_,E)=>{for(const b of E.ba)b.va(f)&&(g=!0)})),g&&S_(m)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SV(i,e,t){const r=Te(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new At(pe.comparator);c=c.insert(l,Ut.newNoDocument(l,Re.min()));const f=Ge().add(l),m=new nh(Re.min(),new Map,new At(je),c,f);await YI(r,m),r.Ru=r.Ru.remove(l),r.Au.delete(e),R_(r)}else await Ol(r.localStore,e,!1).then((()=>kl(r,e,t))).catch(oa)}async function AV(i,e){const t=Te(i),r=e.batch.batchId;try{const a=await PO(t.localStore,e);I_(t,r,null),w_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ca(t,a)}catch(a){await oa(a)}}async function wV(i,e,t){const r=Te(i);try{const a=await(function(c,f){const m=Te(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,f).next((E=>(Ae(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(r.localStore,e);I_(r,e,t),w_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ca(r,a)}catch(a){await oa(a)}}function w_(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function I_(i,e,t){const r=Te(i);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function kl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||QI(i,r)}))}function QI(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(Vl(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),R_(i))}function Sy(i,e,t){for(const r of t)r instanceof HI?(i.Vu.addReference(r.key,e),IV(i,r)):r instanceof GI?(fe(Ql,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||QI(i,r.key)):ve(19791,{wu:r})}function IV(i,e){const t=e.key,r=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(r)||(fe(Ql,"New document in limbo: "+t),i.Eu.add(r),R_(i))}function R_(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new pe(ct.fromString(e)),r=i.fu.next();i.Au.set(r,new gV(t)),i.Ru=i.Ru.insert(t,r),om(i.remoteStore,new Wr(yi(Wd(t.path)),r,"TargetPurposeLimboResolution",ni.ce))}}async function ca(i,e,t){const r=Te(i),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,m)=>{c.push(r.pu(m,e,t).then((g=>{var _;if((g||t)&&r.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){a.push(g);const E=p_.Es(m.targetId,g);l.push(E)}})))})),await Promise.all(c),r.Pu.J_(a),await(async function(m,g){const _=Te(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>F.forEach(g,(b=>F.forEach(b.Ts,(w=>_.persistence.referenceDelegate.addReference(E,b.targetId,w))).next((()=>F.forEach(b.Is,(w=>_.persistence.referenceDelegate.removeReference(E,b.targetId,w)))))))))}catch(E){if(!la(E))throw E;fe(g_,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const w=_.vs.get(b),P=w.snapshotVersion,D=w.withLastLimboFreeSnapshotVersion(P);_.vs=_.vs.insert(b,D)}}})(r.localStore,l))}async function RV(i,e){const t=Te(i);if(!t.currentUser.isEqual(e)){fe(Ql,"User change. New user:",e.toKey());const r=await RI(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new de(ne.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ca(t,r.Ns)}}function CV(i,e){const t=Te(i),r=t.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let a=Ge();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}async function DV(i,e){const t=Te(i),r=await _y(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&Sy(t,e.targetId,a.au),a}async function xV(i,e){const t=Te(i);return xI(t.localStore,e).then((r=>ca(t,r)))}async function NV(i,e,t,r){const a=Te(i),l=await(function(f,m){const g=Te(f),_=Te(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(E=>_.Xn(E,m).next((b=>b?g.localDocuments.getDocuments(E,b):F.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Kl(a.remoteStore):t==="acknowledged"||t==="rejected"?(I_(a,e,r||null),w_(a,e),(function(f,m){Te(Te(f).mutationQueue).nr(m)})(a.localStore,e)):ve(6720,"Unknown batchState",{bu:t}),await ca(a,l)):fe(Ql,"Cannot apply mutation batch with id: "+e)}async function MV(i,e){const t=Te(i);if(lm(t),C_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await cS(t,r.toArray());t.gu=!0,await Ty(t.remoteStore,!0);for(const l of a)om(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then((()=>(kl(t,c),Ol(t.localStore,c,!0)))),Vl(t.remoteStore,c)})),await a,await cS(t,r),(function(c){const f=Te(c);f.Au.forEach(((m,g)=>{Vl(f.remoteStore,g)})),f.Vu.zr(),f.Au=new Map,f.Ru=new At(pe.comparator)})(t),t.gu=!1,await Ty(t.remoteStore,!1)}}async function cS(i,e,t){const r=Te(i),a=[],l=[];for(const c of e){let f;const m=r.Iu.get(c);if(m&&m.length!==0){f=await Id(r.localStore,yi(m[0]));for(const g of m){const _=r.Tu.get(g),E=await DV(r,_);E.snapshot&&l.push(E.snapshot)}}else{const g=await DI(r.localStore,c);f=await Id(r.localStore,g),await A_(r,$I(g),c,!1,f.resumeToken)}a.push(f)}return r.Pu.J_(l),a}function $I(i){return Mw(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function OV(i){return(function(t){return Te(Te(t).persistence).hs()})(Te(i).localStore)}async function VV(i,e,t,r){const a=Te(i);if(a.gu)return void fe(Ql,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await xI(a.localStore,Pw(l[0])),f=nh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Kt.EMPTY_BYTE_STRING);await ca(a,c,f);break}case"rejected":await Ol(a.localStore,e,!0),kl(a,e,r);break;default:ve(64155,t)}}async function PV(i,e,t){const r=lm(i);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){fe(Ql,"Adding an already active target "+a);continue}const l=await DI(r.localStore,a),c=await Id(r.localStore,l);await A_(r,$I(l),c.targetId,!1,c.resumeToken),om(r.remoteStore,c)}for(const a of t)r.Iu.has(a)&&await Ol(r.localStore,a,!1).then((()=>{Vl(r.remoteStore,a),kl(r,a)})).catch(oa)}}function lm(i){const e=Te(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=YI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SV.bind(null,e),e.Pu.J_=hV.bind(null,e.eventManager),e.Pu.yu=fV.bind(null,e.eventManager),e}function C_(i){const e=Te(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wV.bind(null,e),e}class qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return II(this.persistence,new wI,e.initialUser,this.serializer)}Cu(e){return new d_(rm.Vi,this.serializer)}Du(e){return new PI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qc.provider={build:()=>new qc};class kV extends qc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof wd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vI(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new d_((r=>wd.Vi(r,t)),this.serializer)}}class XI extends qc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await C_(this.xu.syncEngine),await Kl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return II(this.persistence,new wI,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new vI(r,e.asyncQueue,t)}Mu(e,t){const r=new j2(t,this.persistence);return new U2(e.asyncQueue,r)}Cu(e){const t=AI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new m_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kI(),id(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new PI}}class LV extends XI{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Ng&&(this.sharedClientState.syncEngine={So:NV.bind(null,t),Do:VV.bind(null,t),Co:PV.bind(null,t),hs:OV.bind(null,t),bo:xV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await MV(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=kI();if(!Ng.v(t))throw new de(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=AI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ng(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RV.bind(null,this.syncEngine),await Ty(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new lV})()}createDatastore(e){const t=sm(e.databaseInfo.databaseId),r=FO(e.databaseInfo);return QO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,f){return new XO(r,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>uS(this.syncEngine,t,0)),(function(){return iS.v()?new iS:new jO})())}createSyncEngine(e,t){return(function(a,l,c,f,m,g,_){const E=new yV(a,l,c,f,m,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Te(a);fe(so,"RemoteStore shutting down."),l.Ea.add(5),await rh(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Fc.provider={build:()=>new Fc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="FirestoreClient";class jV{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=Pn.UNAUTHENTICATED,this.clientId=Ky.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{fe(sa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(fe(sa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=b_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Og(i,e){i.asyncQueue.verifyOperationInProgress(),fe(sa,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await RI(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function hS(i,e){i.asyncQueue.verifyOperationInProgress();const t=await zV(i);fe(sa,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>sS(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>sS(e.remoteStore,a))),i._onlineComponents=e}async function zV(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){fe(sa,"Using user provided OfflineComponentProvider");try{await Og(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ne.FAILED_PRECONDITION||a.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;vl("Error using user provided cache. Falling back to memory cache: "+t),await Og(i,new qc)}}else fe(sa,"Using default OfflineComponentProvider"),await Og(i,new kV(void 0));return i._offlineComponents}async function JI(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(fe(sa,"Using user provided OnlineComponentProvider"),await hS(i,i._uninitializedComponentsProvider._online)):(fe(sa,"Using default OnlineComponentProvider"),await hS(i,new Fc))),i._onlineComponents}function BV(i){return JI(i).then((e=>e.syncEngine))}async function fS(i){const e=await JI(i),t=e.eventManager;return t.onListen=_V.bind(null,e.syncEngine),t.onUnlisten=EV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TV.bind(null,e.syncEngine),t}function qV(i,e,t,r){const a=new UV(r),l=new dV(e,a,t);return i.asyncQueue.enqueueAndForget((async()=>uV(await fS(i),l))),()=>{a.Nu(),i.asyncQueue.enqueueAndForget((async()=>cV(await fS(i),l)))}}function FV(i,e){const t=new Zs;return i.asyncQueue.enqueueAndForget((async()=>bV(await BV(i),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV="ComponentProvider",dS=new Map;function GV(i,e,t,r,a){return new dM(i,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,WI(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV="firestore.googleapis.com",mS=!0;class pS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KV,this.ssl=mS}else this.host=e.host,this.ssl=e.ssl??mS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_I)throw new de(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class D_{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new I2;switch(r.type){case"firstParty":return new D2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=dS.get(t);r&&(fe(HV,"Removing Datastore"),dS.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lo(this.firestore,e,this._query)}}class Gt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Jc(t,Gt._jsonSchema))return new Gt(e,r||null,new pe(ct.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:sn("string",Gt._jsonSchemaVersion),referencePath:sn("string")};class ta extends lo{constructor(e,t,r){super(e,t,Wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new pe(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function ZI(i,e,...t){if(i=an(i),JA("collection","path",e),i instanceof D_){const r=ct.fromString(e,...t);return r0(r),new ta(i,null,r)}{if(!(i instanceof Gt||i instanceof ta))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ct.fromString(e,...t));return r0(r),new ta(i.firestore,null,r)}}function cn(i,e,...t){if(i=an(i),arguments.length===1&&(e=Ky.newId()),JA("doc","path",e),i instanceof D_){const r=ct.fromString(e,...t);return i0(r),new Gt(i,null,new pe(r))}{if(!(i instanceof Gt||i instanceof ta))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ct.fromString(e,...t));return i0(r),new Gt(i.firestore,i instanceof ta?i.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="AsyncQueue";class yS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LI(this,"async_queue_retry"),this._c=()=>{const r=id();r&&fe(gS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=id();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=id();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!la(e))throw e;fe(gS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ht("INTERNAL UNHANDLED ERROR: ",_S(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=T_.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ve(47125,{Pc:_S(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function _S(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ao extends D_{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new yS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yS(e),this._firestoreClient=void 0,await e}}}function YV(i,e,t){t||(t=yd);const r=Vy(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Xa(l,e))return a;throw new de(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new de(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_I)throw new de(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&zl(e.host)&&iA(e.host),r.initialize({options:e,instanceIdentifier:t})}function x_(i){if(i._terminated)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||QV(i),i._firestoreClient}function QV(i){var r,a,l,c;const e=i._freezeSettings(),t=GV(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,(a=i._app)==null?void 0:a.options.apiKey,e);i._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new jV(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pi(Kt.fromBase64String(e))}catch(t){throw new de(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pi(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jc(e,Pi._jsonSchema))return Pi.fromBase64String(e.bytes)}}Pi._jsonSchemaVersion="firestore/bytes/1.0",Pi._jsonSchema={type:sn("string",Pi._jsonSchemaVersion),bytes:sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ar._jsonSchemaVersion}}static fromJSON(e){if(Jc(e,Ar._jsonSchema))return new Ar(e.latitude,e.longitude)}}Ar._jsonSchemaVersion="firestore/geoPoint/1.0",Ar._jsonSchema={type:sn("string",Ar._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jc(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $i(e.vectorValues);throw new de(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:sn("string",$i._jsonSchemaVersion),vectorValues:sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=/^__.*__$/;class XV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gl(e,this.data,t,this.fieldTransforms)}}class e1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function t1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{dataSource:i})}}class M_{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new M_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return xd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(t1(this.dataSource)&&$V.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class JV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sm(e)}createContext(e,t,r,a=!1){return new M_({dataSource:e,methodName:t,targetDoc:r,path:Pt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cm(i){const e=i._freezeSettings(),t=sm(i._databaseId);return new JV(i._databaseId,!!e.ignoreUndefinedProperties,t)}function n1(i,e,t,r,a,l={}){const c=i.createContext(l.merge||l.mergeFields?2:0,e,t,a);O_("Data must be an object, but it was:",c,r);const f=s1(r,c);let m,g;if(l.merge)m=new ii(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const b=Ll(e,E,t);if(!c.contains(b))throw new de(ne.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);l1(_,b)||_.push(b)}m=new ii(_),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new XV(new Ln(f),m,g)}class hm extends N_{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hm}}function i1(i,e,t,r){const a=i.createContext(1,e,t);O_("Data must be an object, but it was:",a,r);const l=[],c=Ln.empty();ua(r,((m,g)=>{const _=o1(e,m,t);g=an(g);const E=a.childContextForFieldPath(_);if(g instanceof hm)l.push(_);else{const b=sh(g,E);b!=null&&(l.push(_),c.set(_,b))}}));const f=new ii(l);return new e1(c,f,a.fieldTransforms)}function r1(i,e,t,r,a,l){const c=i.createContext(1,e,t),f=[Ll(e,r,t)],m=[a];if(l.length%2!=0)throw new de(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(Ll(e,l[b])),m.push(l[b+1]);const g=[],_=Ln.empty();for(let b=f.length-1;b>=0;--b)if(!l1(g,f[b])){const w=f[b];let P=m[b];P=an(P);const D=c.childContextForFieldPath(w);if(P instanceof hm)g.push(w);else{const M=sh(P,D);M!=null&&(g.push(w),_.set(w,M))}}const E=new ii(g);return new e1(_,E,c.fieldTransforms)}function WV(i,e,t,r=!1){return sh(t,i.createContext(r?4:3,e))}function sh(i,e){if(a1(i=an(i)))return O_("Unsupported field value:",e,i),s1(i,e);if(i instanceof N_)return(function(r,a){if(!t1(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const f of r){let m=sh(f,a.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OM(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=pt.fromDate(r);return{timestampValue:Ml(a.serializer,l)}}if(r instanceof pt){const l=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ml(a.serializer,l)}}if(r instanceof Ar)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pi)return{bytesValue:Jw(a.serializer,r._byteString)};if(r instanceof Gt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:u_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof $i)return(function(c,f){const m=c instanceof $i?c.toArray():c;return{mapValue:{fields:{[e_]:{stringValue:t_},[Il]:{arrayValue:{values:m.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return r_(f.serializer,_)}))}}}}}})(r,a);if(lI(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Hd(r)}`)})(i,e)}function s1(i,e){const t={};return pw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ua(i,((r,a)=>{const l=sh(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function a1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof pt||i instanceof Ar||i instanceof Pi||i instanceof Gt||i instanceof N_||i instanceof $i||lI(i))}function O_(i,e,t){if(!a1(t)||!WA(t)){const r=Hd(t);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function Ll(i,e,t){if((e=an(e))instanceof um)return e._internalPath;if(typeof e=="string")return o1(i,e);throw xd("Field path arguments must be of type string or ",i,!1,void 0,t)}const ZV=new RegExp("[~\\*/\\[\\]]");function o1(i,e,t){if(e.search(ZV)>=0)throw xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new um(...e.split("."))._internalPath}catch{throw xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function xd(i,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new de(ne.INVALID_ARGUMENT,f+i+m)}function l1(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{convertValue(e,t="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ua(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,a,l;const t=(l=(a=(r=e.fields)==null?void 0:r[Il].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Ot(c.doubleValue)));return new $i(t)}convertGeoPoint(e){return new Ar(Ot(e.latitude),Ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const t=is(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ct.fromString(e);Ae(oI(r),9688,{name:e});const a=new eo(r.get(1),r.get(3)),l=new pe(r.popFirst(5));return a.isEqual(t)||Ht(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1 extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}const vS="@firebase/firestore",ES="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(i,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ll("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tP extends c1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new de(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V_{}class h1 extends V_{}function f1(i,e,...t){let r=[];e instanceof V_&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof k_)).length,f=l.filter((m=>m instanceof P_)).length;if(c>1||c>0&&f>0)throw new de(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)i=a._apply(i);return i}class P_ extends h1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new P_(e,t,r)}_apply(e){const t=this._parse(e);return m1(e._query,t),new lo(e.firestore,e.converter,uy(e._query,t))}_parse(e){const t=cm(e.firestore);return(function(l,c,f,m,g,_,E){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){SS(E,_);const P=[];for(const D of E)P.push(bS(m,l,D));b={arrayValue:{values:P}}}else b=bS(m,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||SS(E,_),b=WV(f,c,E,_==="in"||_==="not-in");return Ze.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class k_ extends V_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new k_(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:gt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)m1(c,m),c=uy(c,m)})(e._query,t),new lo(e.firestore,e.converter,uy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class L_ extends h1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new L_(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jc(l,c)})(e._query,this._field,this._direction);return new lo(e.firestore,e.converter,RM(e._query,t))}}function d1(i,e="asc"){const t=e,r=Ll("orderBy",i);return L_._create(r,t)}function bS(i,e,t){if(typeof(t=an(t))=="string"){if(t==="")throw new de(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ow(e)&&t.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ct.fromString(t));if(!pe.isDocumentKey(r))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lc(i,new pe(r))}if(t instanceof Gt)return Lc(i,t._key);throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(t)}.`)}function SS(i,e){if(!Array.isArray(i)||i.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m1(i,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function p1(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class iP{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=oP(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function rP(i){return new iP(i)}class sP{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fc.provider,this._offlineComponentProvider={build:t=>new XI(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class aP{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fc.provider,this._offlineComponentProvider={build:t=>new LV(t,e==null?void 0:e.cacheSizeBytes)}}}function oP(i){return new sP(i==null?void 0:i.forceOwnership)}function lP(){return new aP}class cc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $a extends c1{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ll("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$a._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$a._jsonSchemaVersion="firestore/documentSnapshot/1.0",$a._jsonSchema={type:sn("string",$a._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class rd extends $a{data(e={}){return super.data(e)}}class pl{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new cc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new rd(this._firestore,this._userDataWriter,r.key,r,new cc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new rd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new cc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new rd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new cc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:uP(f.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ky.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pl._jsonSchemaVersion="firestore/querySnapshot/1.0",pl._jsonSchema={type:sn("string",pl._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cm(e)}set(e,t,r){this._verifyNotCommitted();const a=Vg(e,this._firestore),l=p1(a.converter,t,r),c=n1(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,En.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=Vg(e,this._firestore);let c;return c=typeof(t=an(t))=="string"||t instanceof um?r1(this._dataReader,"WriteBatch.update",l._key,t,r,a):i1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vg(e,this._firestore);return this._mutations=this._mutations.concat(new th(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vg(i,e){if((i=an(i)).firestore!==e)throw new de(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function Ay(i,e,t){i=Zr(i,Gt);const r=Zr(i.firestore,ao),a=p1(i.converter,e,t),l=cm(r);return fm(r,[n1(l,"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,En.none())])}function Oi(i,e,t,...r){i=Zr(i,Gt);const a=Zr(i.firestore,ao),l=cm(a);let c;return c=typeof(e=an(e))=="string"||e instanceof um?r1(l,"updateDoc",i._key,e,t,r):i1(l,"updateDoc",i._key,e),fm(a,[c.toMutation(i._key,En.exists(!0))])}function g1(i){return fm(Zr(i.firestore,ao),[new th(i._key,En.none())])}function y1(i,...e){var g,_,E;i=an(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||TS(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(TS(e[r])){const b=e[r];e[r]=(g=b.next)==null?void 0:g.bind(b),e[r+1]=(_=b.error)==null?void 0:_.bind(b),e[r+2]=(E=b.complete)==null?void 0:E.bind(b)}let l,c,f;if(i instanceof Gt)c=Zr(i.firestore,ao),f=Wd(i._key.path),l={next:b=>{e[r]&&e[r](hP(c,i,b))},error:e[r+1],complete:e[r+2]};else{const b=Zr(i,lo);c=Zr(b.firestore,ao),f=b._query;const w=new u1(c);l={next:P=>{e[r]&&e[r](new pl(c,w,b,P))},error:e[r+1],complete:e[r+2]},nP(i._query)}const m=x_(c);return qV(m,f,a,l)}function fm(i,e){const t=x_(i);return FV(t,e)}function hP(i,e,t){const r=t.docs.get(e._key),a=new u1(i);return new $a(i,a,e._key,r,new cc(t.hasPendingWrites,t.fromCache),e.converter)}function _1(i){return i=Zr(i,ao),x_(i),new cP(i,(e=>fm(i,e)))}(function(e,t=!0){A2(Bl),yl(new Ja("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),f=new ao(new R2(r.getProvider("auth-internal")),new x2(c,r.getProvider("app-check-internal")),mM(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Js(vS,ES,e),Js(vS,ES,"esm2020")})();const wy={apiKey:"AIzaSyCMQRCfBaVdJWgqMkaWrBHgHlMX51K7tbM",authDomain:"entrypoint-v2.firebaseapp.com",projectId:"entrypoint-v2",storageBucket:"entrypoint-v2.firebasestorage.app",messagingSenderId:"240107297798",appId:"1:240107297798:web:9e4a6c13a2751aead9b787"},Ul=!!wy.apiKey&&!!wy.projectId;let hc=null,Mt=null;if(Ul){const i=cA(wy);hc=b2(i),Mt=YV(i,{localCache:rP({tabManager:lP()})})}const v1=x.createContext(null);function fP({children:i}){const[e,t]=x.useState(null),[r,a]=x.useState(Ul);x.useEffect(()=>!Ul||!hc?void 0:cN(hc,m=>{t(m),a(!1)}),[]);const l=()=>NN(hc,new $r),c=()=>hN(hc);return I.jsx(v1.Provider,{value:{user:e,loading:r,signinGoogle:l,logout:c},children:i})}function U_(){return x.useContext(v1)}function dP(){const{signinGoogle:i}=U_(),[e,t]=x.useState(""),[r,a]=x.useState(!1),l=async()=>{t(""),a(!0);try{await i()}catch(c){t(c.message.replace("Firebase: ",""))}finally{a(!1)}};return I.jsxs("div",{className:"auth-container",children:[I.jsxs("div",{className:"auth-header",children:[I.jsx("div",{className:"auth-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"auth-title",children:"Lock-In"})]}),I.jsx("button",{className:"auth-google-btn",onClick:l,disabled:r,children:r?"...":"Sign in with Google"}),e&&I.jsx("div",{className:"auth-error",children:e})]})}function mP({children:i}){const{user:e,loading:t}=U_();return t?I.jsx("div",{className:"loading",children:"loading..."}):e?i:I.jsx(dP,{})}const es={prayer:{bg:"rgba(34, 139, 34, 0.12)",border:"#22a845",text:"#22a845"},spiritual:{bg:"rgba(234, 179, 8, 0.10)",border:"#ca8a04",text:"#ca8a04"},course:{bg:"rgba(37, 99, 235, 0.10)",border:"#2563eb",text:"#2563eb"},study:{bg:"rgba(8, 145, 178, 0.10)",border:"#0891b2",text:"#0891b2"},work:{bg:"rgba(180, 83, 9, 0.10)",border:"#b45309",text:"#b45309"},project:{bg:"rgba(124, 58, 237, 0.10)",border:"#7c3aed",text:"#7c3aed"},sport:{bg:"rgba(220, 38, 38, 0.10)",border:"#dc2626",text:"#dc2626"},therapy:{bg:"rgba(219, 39, 119, 0.10)",border:"#db2777",text:"#db2777"},rest:{bg:"rgba(100, 116, 139, 0.08)",border:"#64748b",text:"#64748b"},neutral:{bg:"rgba(163, 163, 163, 0.06)",border:"#a3a3a3",text:"#a3a3a3"}},E1=Object.keys(es),pP=E1,gP=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function yP(i){const e=Math.floor(i/60)%24,t=Math.round(i%60),r=e>=12?"PM":"AM";return`${e%12||12}:${String(t).padStart(2,"0")} ${r}`}const jl=["#2d8a4e","#0055a4","#7c3aed","#b45309","#dc2626","#db2777","#0891b2","#64748b"],T1=()=>{const i={};return gP.forEach(e=>{i[e]={blocks:[]}}),i},j_=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function z_(i){const[e,t,r]=i.split("-").map(Number);return new Date(e,t-1,r)}function B_(i){const e=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0"),r=String(i.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function Ac(){return B_(new Date)}function AS(i){const e=(i.getDay()+6)%7;return j_[e]}function b1(i,e,t){return i>=e&&i<=t}function Nd(i){return z_(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function _P(i,e){return`${Nd(i)}  ${Nd(e)}`}function vP(i){const[e,t,r]=i.split("-");return`${r}-${t}-${e}`}function EP(i,e){const t=z_(i),r=(t.getDay()+6)%7,l=j_.indexOf(e)-r,c=new Date(t);return c.setDate(c.getDate()+l),B_(c)}function TP(i,e){const t=[],r=new Date(i,e,1);for(;r.getMonth()===e;)t.push({iso:B_(r),date:new Date(r)}),r.setDate(r.getDate()+1);return t}const bP=new Date().getFullYear(),SP={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};function wS(i){const e=i.trim().match(/^(\w{3})\s+(\d{1,2})$/);if(!e)return null;const t=SP[e[1]],r=parseInt(e[2],10);if(t==null||isNaN(r))return null;const a=new Date(bP,t,r),l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),f=String(a.getDate()).padStart(2,"0");return`${l}-${c}-${f}`}function AP(i){if(!i)return{startDate:"",endDate:""};const e=i.split(/\u2192|->||/).map(a=>a.trim()),t=wS(e[0]),r=e[1]?wS(e[1]):t;return{startDate:t||"",endDate:r||""}}function wP(i){return{id:i.id||crypto.randomUUID(),activity:i.activity||"",type:i.type||"neutral",icon:i.icon||"",duration:i.duration||60,segment:null,offsetMinutes:0,time:i.time||"08:00",tasks:[]}}function IP(i,e){var c;const{startDate:t,endDate:r}=AP(i.dates),a={},l=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const f of l){const m=(c=i.days)==null?void 0:c[f];a[f]={blocks:((m==null?void 0:m.blocks)||[]).map(wP)}}return{id:i.id||crypto.randomUUID(),label:i.label||`Plan ${e+1}`,color:jl[e%jl.length],startDate:t,endDate:r,order:i.order??e,routine:a}}function RP(){const e=localStorage.getItem("entrypoint-v2-tabs");if(!e)return null;try{const t=JSON.parse(e);return!Array.isArray(t)||t.length===0?null:t.map(IP)}catch{return null}}function CP(){const i=!!localStorage.getItem("entrypoint-v2-tabs"),e=!!localStorage.getItem("entrypoint-v2-plans");return i&&!e}const Md="entrypoint-v2-plans",DP="entrypoint-v2-tabs";function IS(){if(CP()){const i=RP();if(i)return S1(i),i}try{const i=localStorage.getItem(Md);if(i){const e=JSON.parse(i);if(Array.isArray(e)&&e.length>0)return e}}catch{}return[]}function S1(i){localStorage.setItem(Md,JSON.stringify(i))}async function xP(i){const e=`entrypoint-v2-migrated-${i}`;if(localStorage.getItem(e))return;let t=null;try{const r=localStorage.getItem(Md);if(r){const a=JSON.parse(r);Array.isArray(a)&&a.length>0&&(t=a)}}catch{}if(t&&t.length>0){const r=_1(Mt);for(const a of t)r.set(cn(Mt,"users",i,"plans",a.id),{...a});await r.commit()}localStorage.setItem(e,"1"),localStorage.removeItem(Md),localStorage.removeItem(DP)}function NP(){const[i,e]=x.useState(()=>IS()),[t,r]=x.useState(()=>{var b;return((b=IS()[0])==null?void 0:b.id)||null}),a=i.find(b=>b.id===t)||i[0]||null;a&&t!==a.id&&r(a.id);const l=x.useCallback(b=>{e(w=>{const P=typeof b=="function"?b(w):b;return S1(P),P})},[]),c=x.useCallback(b=>{const w=crypto.randomUUID(),P={id:w,label:b.label||"New Plan",color:b.color||jl[0],startDate:b.startDate||"",endDate:b.endDate||"",order:b.order??i.length,routine:b.routine||T1()};return l(D=>[...D,P]),r(w),w},[l,i.length]),f=x.useCallback((b,w)=>{l(P=>P.map(D=>D.id===b?{...D,...w}:D))},[l]),m=x.useCallback(b=>{l(w=>w.filter(P=>P.id!==b)),t===b&&r(null)},[t,l]),g=x.useCallback((b,w,P)=>{const D=b||(a==null?void 0:a.id);D&&l(M=>M.map(U=>U.id===D?{...U,routine:{...U.routine,[w]:{...U.routine[w],blocks:P}}}:U))},[a,l]),_=x.useCallback(b=>i.find(w=>w.startDate&&w.endDate&&b1(b,w.startDate,w.endDate))||null,[i]),E=x.useCallback(b=>{const w=new Set(i.map(D=>D.id)),P=b.filter(D=>!w.has(D.id));P.length!==0&&l(D=>[...D,...P.map((M,U)=>({...M,order:D.length+U}))])},[i,l]);return{plans:i,loading:!1,activePlan:a,activePlanId:t,setActivePlanId:r,createPlan:c,updatePlan:f,deletePlan:m,updateRoutineBlocks:g,getPlanForDate:_,mergePlans:E}}function MP(i){const[e,t]=x.useState([]),[r,a]=x.useState(!0),[l,c]=x.useState(null),f=e.find(P=>P.id===l)||e[0]||null;f&&l!==f.id&&c(f.id),x.useEffect(()=>{if(!i){a(!1);return}xP(i).catch(()=>{});const P=f1(ZI(Mt,"users",i,"plans"),d1("order"));return y1(P,M=>{t(M.docs.map(U=>({id:U.id,...U.data()}))),a(!1)},()=>a(!1))},[i]),x.useEffect(()=>{e.length>0&&!l&&c(e[0].id)},[e,l]);const m=x.useCallback(async P=>{const D=crypto.randomUUID(),M={id:D,label:P.label||"New Plan",color:P.color||jl[0],startDate:P.startDate||"",endDate:P.endDate||"",order:P.order??e.length,routine:P.routine||T1()};return await Ay(cn(Mt,"users",i,"plans",D),M),c(D),D},[i,e.length]),g=x.useCallback(async(P,D)=>{await Oi(cn(Mt,"users",i,"plans",P),D)},[i]),_=x.useCallback(async P=>{await g1(cn(Mt,"users",i,"plans",P)),l===P&&c(null)},[i,l]),E=x.useCallback(async(P,D,M)=>{const U=P||(f==null?void 0:f.id);U&&await Oi(cn(Mt,"users",i,"plans",U),{[`routine.${D}.blocks`]:M})},[i,f]),b=x.useCallback(P=>e.find(D=>D.startDate&&D.endDate&&P>=D.startDate&&P<=D.endDate)||null,[e]),w=x.useCallback(async P=>{const D=new Set(e.map(G=>G.id)),M=P.filter(G=>!D.has(G.id));if(M.length===0)return;const U=_1(Mt);M.forEach((G,H)=>{const re={...G,order:e.length+H};U.set(cn(Mt,"users",i,"plans",re.id),re)}),await U.commit()},[i,e]);return{plans:e,loading:r,activePlan:f,activePlanId:l,setActivePlanId:c,createPlan:m,updatePlan:g,deletePlan:_,updateRoutineBlocks:E,getPlanForDate:b,mergePlans:w}}function OP(i){return Ul&&i?MP(i):NP()}const A1="entrypoint-v2-pipelines";function VP(){try{const i=localStorage.getItem(A1);if(i){const e=JSON.parse(i);if(Array.isArray(e))return e}}catch{}return[]}function PP(i){localStorage.setItem(A1,JSON.stringify(i))}function kP(){const[i,e]=x.useState(()=>VP()),t=x.useCallback(P=>{e(D=>{const M=typeof P=="function"?P(D):P;return PP(M),M})},[]),r=x.useCallback(P=>{const D=crypto.randomUUID(),M={id:D,title:P||"New Section",order:i.length,collapsed:!1,items:[]};return t(U=>[...U,M]),D},[t,i.length]),a=x.useCallback((P,D)=>{t(M=>M.map(U=>U.id===P?{...U,...D}:U))},[t]),l=x.useCallback(P=>{t(D=>D.filter(M=>M.id!==P))},[t]),c=x.useCallback(P=>{t(P.map((D,M)=>({...D,order:M})))},[t]),f=x.useCallback(P=>{t(D=>D.map(M=>M.id===P?{...M,collapsed:!M.collapsed}:M))},[t]),m=x.useCallback((P,D)=>{const M={id:crypto.randomUUID(),icon:"",title:"",description:"",...D};t(U=>U.map(G=>G.id===P?{...G,items:[...G.items||[],M]}:G))},[t]),g=x.useCallback((P,D,M)=>{t(U=>U.map(G=>G.id===P?{...G,items:(G.items||[]).map(H=>H.id===D?{...H,...M}:H)}:G))},[t]),_=x.useCallback((P,D)=>{t(M=>M.map(U=>U.id===P?{...U,items:(U.items||[]).filter(G=>G.id!==D)}:U))},[t]),E=x.useCallback((P,D,M,U)=>{t(G=>{const H=G.find(se=>se.id===P);if(!H)return G;const re=(H.items||[]).find(se=>se.id===M);return re?G.map(se=>{if(se.id===P&&P===D){const W=(se.items||[]).filter(R=>R.id!==M);return W.splice(U,0,re),{...se,items:W}}if(se.id===P)return{...se,items:(se.items||[]).filter(W=>W.id!==M)};if(se.id===D){const W=[...se.items||[]];return W.splice(U,0,re),{...se,items:W}}return se}):G})},[t]),b=x.useCallback((P,D)=>{t(M=>M.map(U=>U.id===P?{...U,items:D}:U))},[t]),w=x.useCallback(P=>{const D=new Set(i.map(U=>U.id)),M=P.filter(U=>!D.has(U.id));M.length!==0&&t(U=>[...U,...M.map((G,H)=>({...G,order:U.length+H}))])},[i,t]);return{sections:i,loading:!1,addSection:r,updateSection:a,deleteSection:l,reorderSections:c,toggleCollapse:f,addItem:m,updateItem:g,deleteItem:_,moveItem:E,reorderItems:b,mergeSections:w}}function LP(i){const[e,t]=x.useState([]),[r,a]=x.useState(!0);x.useEffect(()=>{if(!i){a(!1);return}const M=f1(ZI(Mt,"users",i,"pipelines"),d1("order"));return y1(M,G=>{t(G.docs.map(H=>({id:H.id,...H.data()}))),a(!1)},()=>a(!1))},[i]);const l=x.useCallback(async M=>{const U=crypto.randomUUID(),G={id:U,title:M||"New Section",order:e.length,collapsed:!1,items:[]};return await Ay(cn(Mt,"users",i,"pipelines",U),G),U},[i,e.length]),c=x.useCallback(async(M,U)=>{await Oi(cn(Mt,"users",i,"pipelines",M),U)},[i]),f=x.useCallback(async M=>{await g1(cn(Mt,"users",i,"pipelines",M))},[i]),m=x.useCallback(async M=>{for(let U=0;U<M.length;U++)await Oi(cn(Mt,"users",i,"pipelines",M[U].id),{order:U})},[i]),g=x.useCallback(async M=>{const U=e.find(G=>G.id===M);U&&await Oi(cn(Mt,"users",i,"pipelines",M),{collapsed:!U.collapsed})},[i,e]),_=x.useCallback(async(M,U)=>{const G=e.find(re=>re.id===M);if(!G)return;const H={id:crypto.randomUUID(),icon:"",title:"",description:"",...U};await Oi(cn(Mt,"users",i,"pipelines",M),{items:[...G.items||[],H]})},[i,e]),E=x.useCallback(async(M,U,G)=>{const H=e.find(re=>re.id===M);H&&await Oi(cn(Mt,"users",i,"pipelines",M),{items:(H.items||[]).map(re=>re.id===U?{...re,...G}:re)})},[i,e]),b=x.useCallback(async(M,U)=>{const G=e.find(H=>H.id===M);G&&await Oi(cn(Mt,"users",i,"pipelines",M),{items:(G.items||[]).filter(H=>H.id!==U)})},[i,e]),w=x.useCallback(async(M,U,G,H)=>{const re=e.find(W=>W.id===M);if(!re)return;const se=(re.items||[]).find(W=>W.id===G);if(se)if(M===U){const W=(re.items||[]).filter(R=>R.id!==G);W.splice(H,0,se),await Oi(cn(Mt,"users",i,"pipelines",M),{items:W})}else{const W=e.find(N=>N.id===U);if(!W)return;const R=(re.items||[]).filter(N=>N.id!==G),S=[...W.items||[]];S.splice(H,0,se),await Oi(cn(Mt,"users",i,"pipelines",M),{items:R}),await Oi(cn(Mt,"users",i,"pipelines",U),{items:S})}},[i,e]),P=x.useCallback(async(M,U)=>{await Oi(cn(Mt,"users",i,"pipelines",M),{items:U})},[i]),D=x.useCallback(async M=>{const U=new Set(e.map(H=>H.id)),G=M.filter(H=>!U.has(H.id));if(G.length!==0)for(let H=0;H<G.length;H++){const re={...G[H],order:e.length+H};await Ay(cn(Mt,"users",i,"pipelines",re.id),re)}},[i,e]);return{sections:e,loading:r,addSection:l,updateSection:c,deleteSection:f,reorderSections:m,toggleCollapse:g,addItem:_,updateItem:E,deleteItem:b,moveItem:w,reorderItems:P,mergeSections:D}}function UP(i){return Ul&&i?LP(i):kP()}function jP(){const[i,e]=x.useState(Ac()),t=Ac(),[r,a]=x.useState(()=>new Date().getFullYear()),[l,c]=x.useState(()=>new Date().getMonth()),f=x.useCallback(()=>{c(E=>E===0?(a(b=>b-1),11):E-1)},[]),m=x.useCallback(()=>{c(E=>E===11?(a(b=>b+1),0):E+1)},[]),g=x.useCallback(()=>{const E=new Date;a(E.getFullYear()),c(E.getMonth()),e(Ac())},[]),_=x.useCallback((E,b)=>{a(E),c(b)},[]);return{selectedDate:i,setSelectedDate:e,today:t,viewYear:r,setViewYear:a,viewMonth:l,setViewMonth:c,prevMonth:f,nextMonth:m,goToday:g,setViewYearMonth:_}}const w1="entrypoint-v2-custom-types",zP=["#0d9488","#84cc16","#e11d48","#6366f1","#f97316","#06b6d4","#a21caf","#65a30d","#be185d","#1d4ed8","#c026d3","#ea580c","#0f766e","#4f46e5","#15803d","#9333ea"],BP=new Set(Object.values(es).map(i=>i.border.toLowerCase())),Pg=zP.filter(i=>!BP.has(i.toLowerCase()));function qP(i){if(i.startsWith("hsl"))return{bg:i.replace(")",", 0.10)").replace("hsl(","hsla("),border:i,text:i};const e=parseInt(i.slice(1,3),16),t=parseInt(i.slice(3,5),16),r=parseInt(i.slice(5,7),16);return{bg:`rgba(${e}, ${t}, ${r}, 0.10)`,border:i,text:i}}function FP(i){if(i<Pg.length)return Pg[i];const e=((i-Pg.length)*137.5+30)%360;return`hsl(${Math.round(e)}, 65%, 50%)`}function HP(){try{const i=localStorage.getItem(w1);return i?JSON.parse(i).map(t=>({key:t.key,name:t.name})):[]}catch{return[]}}function kg(i){localStorage.setItem(w1,JSON.stringify(i.map(e=>({key:e.key,name:e.name}))))}function GP(){const[i,e]=x.useState(HP),t=x.useMemo(()=>i.map((f,m)=>{const g=FP(m);return{...f,color:g,colors:qP(g)}}),[i]),r=x.useCallback(f=>{const m=f.toLowerCase().replace(/\s+/g,"-");return e(g=>{if(g.find(E=>E.key===m))return g;const _=[...g,{key:m,name:f}];return kg(_),_}),m},[]),a=x.useCallback(f=>{e(m=>{const g=m.filter(_=>_.key!==f);return kg(g),g})},[]),l=x.useCallback(f=>{e(m=>{const g=new Set(m.map(b=>b.key)),_=f.filter(b=>!g.has(b.key));if(_.length===0)return m;const E=[...m,..._.map(b=>({key:b.key,name:b.name}))];return kg(E),E})},[]),c=x.useMemo(()=>t.reduce((f,m)=>(f[m.key]=m.colors,f),{}),[t]);return{customTypes:t,customTypeColors:c,addCustomType:r,removeCustomType:a,mergeCustomTypes:l}}const I1="entrypoint-v2-location";function KP(){try{const i=localStorage.getItem(I1);return i?JSON.parse(i):null}catch{return null}}function RS(i){localStorage.setItem(I1,JSON.stringify(i))}async function YP(i,e){const a=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${i}&lon=${e}&format=json&accept-language=en`)).json()).address||{},l=a.city||a.town||a.village||a.county||"Unknown",c=a.country||"Unknown";return{city:l,country:c}}function QP(){const[i,e]=x.useState(KP),[t,r]=x.useState(!1),[a,l]=x.useState(!1),c=x.useCallback(f=>{RS(f),e(f),l(!1)},[]);return x.useEffect(()=>{if(!i){if(!navigator.geolocation){l(!0);return}r(!0),navigator.geolocation.getCurrentPosition(async f=>{try{const{latitude:m,longitude:g}=f.coords,{city:_,country:E}=await YP(m,g),b={city:_,country:E,lat:m,lng:g};RS(b),e(b)}catch{l(!0)}finally{r(!1)}},()=>{l(!0),r(!1)},{timeout:1e4})}},[i]),{location:i,setLocation:c,hasLocation:!!i,detecting:t,geoFailed:a}}function R1({title:i,message:e,confirmLabel:t="Delete",onConfirm:r,onClose:a}){return x.useEffect(()=>{const l=c=>{c.key==="Escape"&&a()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[a]),I.jsx("div",{className:"modal-overlay",onClick:a,children:I.jsxs("div",{className:"modal",onClick:l=>l.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:i}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 20px",lineHeight:1.5},children:e}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{className:"btn-secondary",onClick:a,children:"Cancel"}),I.jsx("button",{className:"btn-danger",onClick:r,children:t})]})]})})}function $P({plans:i,activePlanId:e,onSelect:t,onCreate:r,onEdit:a,onDelete:l}){const[c,f]=x.useState(null),[m,g]=x.useState(null),_=x.useRef(null);x.useEffect(()=>{if(!c)return;const w=P=>{P.key==="Escape"&&f(null)};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[c]);const E=(w,P)=>{w.preventDefault(),f({x:w.clientX,y:w.clientY,plan:P})},b=w=>{const P=_.current;P&&P.scrollWidth>P.clientWidth&&(w.preventDefault(),P.scrollLeft+=w.deltaY)};return I.jsxs("div",{className:"plan-sidebar",children:[I.jsxs("div",{className:"plan-list",ref:_,onWheel:b,children:[i.map(w=>I.jsxs("button",{className:`plan-item ${w.id===e?"active":""}`,onClick:()=>t(w.id),onContextMenu:P=>E(P,w),children:[I.jsx("span",{className:"plan-dot",style:{background:w.color}}),I.jsxs("div",{className:"plan-info",children:[I.jsx("span",{className:"plan-label",children:w.label}),w.startDate&&w.endDate&&I.jsx("span",{className:"plan-dates",children:_P(w.startDate,w.endDate)})]})]},w.id)),I.jsx("button",{className:"plan-item plan-add",onClick:r,children:"+ New Plan"})]}),c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:()=>f(null)}),I.jsxs("div",{className:"context-menu",style:{top:c.y,left:c.x},children:[I.jsx("button",{onClick:()=>{a(c.plan),f(null)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{g(c.plan),f(null)},children:"Delete"})]})]}),m&&I.jsx(R1,{title:"Delete Plan",message:`Delete "${m.label}"? This cannot be undone.`,onConfirm:()=>{l(m.id),g(null)},onClose:()=>g(null)})]})}function XP(i,e,t,r){if(!i||!e)return null;for(const a of t)if(a.id!==r&&!(!a.startDate||!a.endDate)&&i<=a.endDate&&e>=a.startDate)return a;return null}function CS({plan:i,plans:e=[],onSave:t,onClose:r}){const a=!!i,[l,c]=x.useState((i==null?void 0:i.label)||""),[f,m]=x.useState((i==null?void 0:i.color)||jl[0]),[g,_]=x.useState((i==null?void 0:i.startDate)||""),[E,b]=x.useState((i==null?void 0:i.endDate)||""),[w,P]=x.useState(""),D=M=>{if(M.preventDefault(),P(""),E<g){P("End date must be after start date.");return}const U=XP(g,E,e,i==null?void 0:i.id);if(U){P(`Overlaps with "${U.label}" (${U.startDate}  ${U.endDate}).`);return}t({label:l.trim(),color:f,startDate:g,endDate:E})};return I.jsx("div",{className:"modal-overlay",onClick:r,onKeyDown:M=>{M.key==="Escape"&&r()},children:I.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),children:[I.jsx("h3",{className:"modal-title",children:a?"Edit Plan":"New Plan"}),I.jsxs("form",{onSubmit:D,className:"modal-form",children:[I.jsxs("label",{className:"modal-label",children:["Label",I.jsx("input",{className:"modal-input",value:l,onChange:M=>c(M.target.value),placeholder:"e.g. Ramadan",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start Date",I.jsx("input",{className:"modal-input",type:"date",value:g,onChange:M=>_(M.target.value),required:!0})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End Date",I.jsx("input",{className:"modal-input",type:"date",value:E,onChange:M=>b(M.target.value),required:!0})]})]}),w&&I.jsx("div",{className:"plan-error",children:w}),I.jsxs("div",{className:"modal-label",children:["Color",I.jsx("div",{className:"color-grid",children:jl.map(M=>I.jsx("button",{type:"button",className:`color-btn ${f===M?"active":""}`,style:{background:M},onClick:()=>m(M)},M))})]}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{type:"button",className:"btn-secondary",onClick:r,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const JP=["January","February","March","April","May","June","July","August","September","October","November","December"],WP=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function ZP({viewYear:i,viewMonth:e,selectedDate:t,today:r,plans:a,highlightDate:l,onPrevMonth:c,onNextMonth:f,onGoToday:m,onSelectDate:g,onPlanClick:_}){const E=x.useMemo(()=>{const w=TP(i,e),P=(w[0].date.getDay()+6)%7;return[...Array.from({length:P},()=>null),...w]},[i,e]),b=x.useMemo(()=>{const w={};for(const P of E){if(!P)continue;const D=a.find(M=>M.startDate&&M.endDate&&b1(P.iso,M.startDate,M.endDate));D&&(w[P.iso]=D)}return w},[E,a]);return I.jsxs("div",{className:"calendar-view",children:[I.jsxs("div",{className:"cal-header",children:[I.jsx("button",{className:"cal-nav",onClick:c,children:""}),I.jsxs("div",{className:"cal-title",children:[I.jsx("span",{className:"cal-month",children:JP[e]}),I.jsx("span",{className:"cal-year",children:i})]}),I.jsx("button",{className:"cal-nav",onClick:f,children:""}),I.jsx("button",{className:"cal-today-btn",onClick:m,children:"Today"})]}),I.jsxs("div",{className:"cal-grid",children:[WP.map(w=>I.jsx("div",{className:"cal-dow",children:w},w)),E.map((w,P)=>{if(!w)return I.jsx("div",{className:"cal-cell cal-blank"},`blank-${P}`);const D=b[w.iso],M=w.iso===r,U=w.iso===t,G=w.iso===l;return I.jsxs("button",{className:`cal-cell ${M?"cal-today":""} ${U?"cal-selected":""} ${D?"cal-has-plan":""} ${G?"cal-highlight":""}`,style:D?{"--plan-color":D.color}:void 0,onClick:()=>g(w.iso),children:[I.jsx("span",{className:"cal-day-num",children:w.date.getDate()}),D&&I.jsx("span",{className:"cal-plan-dot",style:{background:D.color}})]},w.iso)})]}),a.length>0&&I.jsx("div",{className:"cal-plan-legend",children:a.filter(w=>w.startDate&&w.endDate).map(w=>I.jsxs("button",{className:"cal-plan-chip",onClick:()=>_==null?void 0:_(w),children:[I.jsx("span",{className:"cal-plan-chip-dot",style:{background:w.color}}),I.jsx("span",{children:w.label})]},w.id))})]})}const gr=60,Od=5,ic=15,zf=52,DS=8;function rl(i){return Math.max(0,Math.min(1435,Math.round(i/Od)*Od))}function yr(i){return i=Math.round(i),`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function xS({block:i,top:e,height:t,col:r=0,totalCols:a=1,isNew:l,isPrayer:c,extraTypeColors:f={},onEdit:m,onDelete:g,onTimeChange:_,onResize:E,onToggleTask:b}){var Le;const w=x.useRef(null),P=x.useRef(null),D=x.useRef(null),M=x.useRef(null),U=x.useRef(null),[G,H]=x.useState(null),re=es[i.type]||f[i.type]||es.neutral,se=c?"#2d8a4e":re.text==="#94a3b8"?"#b0b0ba":re.text,W=i.type==="prayer"||c?600:400,R=e/gr*60,S=t/gr*60,N=yr(Math.min(R+S,1440)),O=i.time,k=`calc(100% - ${zf}px - ${DS}px)`,z=`calc((${k}) / ${a})`,V=`calc(${zf}px + (${k}) * ${r} / ${a})`,we=x.useCallback((he,De)=>{const Ve=w.current,nt=P.current;if(Ve){if(De==="move"){const oe=e+he;Ve.style.top=`${oe}px`,Ve.style.left=`${zf}px`,Ve.style.width=`calc(100% - ${zf}px - ${DS}px)`,Ve.style.zIndex="10000",Ve.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Ve.style.opacity="0.85",Ve.style.cursor="grabbing";const Se=rl((e+he)/gr*60);nt&&(nt.textContent=`${yr(Se)}  ${yr(Math.min(Se+S,1440))}`)}else if(De==="top"){const oe=e+he,Se=Math.max(t-he,ic/60*gr);Ve.style.top=`${oe}px`,Ve.style.height=`${Math.max(Se,24)}px`,Ve.style.zIndex="10000",Ve.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Ve.style.opacity="0.85";const Me=rl(R+he/gr*60);nt&&(nt.textContent=`${yr(Me)}  ${yr(Math.min(R+S,1440))}`)}else if(De==="bottom"){const oe=Math.max(t+he,ic/60*gr);Ve.style.height=`${Math.max(oe,24)}px`,Ve.style.zIndex="10000",Ve.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",Ve.style.opacity="0.85";const Se=R+Math.max(ic,rl(S+he/gr*60));nt&&(nt.textContent=`${yr(R)}  ${yr(Math.min(Se,1440))}`)}}},[e,t,R,S]),Ne=x.useCallback(()=>{const he=w.current;if(!he)return;he.style.top=`${e}px`,he.style.height=`${Math.max(t,24)}px`,he.style.left=V,he.style.width=z,he.style.zIndex=c?"10":String(Math.ceil(e)+1),he.style.boxShadow="none",he.style.opacity="1",he.style.cursor=c?"default":"pointer";const De=t<36;P.current&&(P.current.textContent=De?O:`${O}  ${N}`)},[e,t,V,z,O,N,c]);x.useEffect(()=>{const he=t<36;P.current&&(P.current.textContent=he?O:`${O}  ${N}`)},[O,N,t]);const X=300,ue=10,_e=he=>{if(c||he.button!==0)return;if(he.pointerType==="touch"){const Ve=he.pointerId,nt=he.clientY;U.current={startY:nt,tid:setTimeout(()=>{var oe;U.current=null,D.current={y:nt,mode:"move",moved:!1,touch:!0},(oe=w.current)==null||oe.setPointerCapture(Ve)},X)}}else D.current={y:he.clientY,mode:"move",moved:!1,touch:!1},w.current.setPointerCapture(he.pointerId)},Ce=he=>{if(U.current){Math.abs(he.clientY-U.current.startY)>ue&&(clearTimeout(U.current.tid),U.current=null);return}if(!D.current)return;const De=he.clientY-D.current.y;!D.current.moved&&Math.abs(De)>4&&(D.current.moved=!0),D.current.moved&&(M.current&&cancelAnimationFrame(M.current),M.current=requestAnimationFrame(()=>we(De,D.current.mode)))},ke=he=>{if(U.current){clearTimeout(U.current.tid),U.current=null,he.pointerType==="touch"&&!c&&m(i);return}if(!D.current)return;const De=he.clientY-D.current.y,{mode:Ve,moved:nt}=D.current;if(D.current=null,M.current&&cancelAnimationFrame(M.current),Ne(),!nt){c||m(i);return}if(Ve==="move"){const oe=rl((e+De)/gr*60);_(i.id,yr(oe))}else if(Ve==="top"){const oe=rl(R+De/gr*60),Se=Math.max(ic,Math.round((R+S-oe)/Od)*Od);E(i.id,yr(oe),Se)}else if(Ve==="bottom"){const oe=Math.max(ic,rl(S+De/gr*60));E(i.id,yr(R),oe)}},j=()=>{U.current&&(clearTimeout(U.current.tid),U.current=null),D.current&&(D.current=null,Ne())},te=he=>De=>{if(c||(De.stopPropagation(),De.button!==0))return;if(De.pointerType==="touch"){const nt=De.pointerId,oe=De.clientY;U.current={startY:oe,tid:setTimeout(()=>{var Se;U.current=null,D.current={y:oe,mode:he,moved:!0,touch:!0},(Se=De.target)==null||Se.setPointerCapture(nt)},X)}}else D.current={y:De.clientY,mode:he,moved:!0,touch:!1},De.target.setPointerCapture(De.pointerId)},$=he=>{c||(he.preventDefault(),he.stopPropagation(),H({x:he.clientX,y:he.clientY}))},ce=()=>H(null);x.useEffect(()=>{if(!G)return;const he=De=>{De.key==="Escape"&&ce()};return window.addEventListener("keydown",he),()=>window.removeEventListener("keydown",he)},[G]);const ge=!c&&((Le=i.tasks)==null?void 0:Le.length)>0,ye=ge?i.tasks.filter(he=>he.done).length:0,Oe=t<36,Ke=ge&&t>=60;return I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:w,className:`timeline-block ${l?"new-block":""} ${c?"prayer-block":""}`,style:{top:e,height:Math.max(t,24),left:V,width:z,right:"auto",background:c?"rgba(34, 139, 34, 0.10)":re.bg,borderLeft:`3px solid ${c?"#2d8a4e":re.border}`,zIndex:c?10:Math.ceil(e)+1,cursor:c?"default":"pointer",transition:"box-shadow 0.15s"},onPointerDown:_e,onPointerMove:Ce,onPointerUp:ke,onPointerCancel:j,onContextMenu:$,children:[!c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"resize-handle resize-handle-top",onPointerDown:te("top"),onPointerMove:Ce,onPointerUp:ke}),I.jsx("div",{className:"resize-handle resize-handle-bottom",onPointerDown:te("bottom"),onPointerMove:Ce,onPointerUp:ke})]}),Oe?I.jsxs("div",{className:"block-compact",children:[I.jsx("span",{ref:P,className:"block-time-sm",children:O}),I.jsx("span",{className:"block-icon-sm",children:i.icon}),I.jsx("span",{className:"block-act-sm",style:{color:se,fontWeight:W},children:i.activity}),ge&&I.jsxs("span",{className:"block-task-badge",children:[ye,"/",i.tasks.length]})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:P,className:"block-time-sm",children:[O,"  ",N]}),I.jsxs("div",{className:"block-row",children:[I.jsx("span",{className:"block-icon-sm",children:i.icon}),I.jsx("span",{className:"block-act",style:{color:se,fontWeight:W},children:i.activity}),ge&&!Ke&&I.jsxs("span",{className:"block-task-badge",children:[ye,"/",i.tasks.length]})]}),Ke&&I.jsx("div",{className:"block-tasks",onWheel:he=>{const De=he.currentTarget;De.scrollHeight>De.clientHeight&&he.stopPropagation()},children:i.tasks.map(he=>I.jsxs("label",{className:`block-task-item ${he.done?"done":""}`,onPointerDown:De=>De.stopPropagation(),onClick:De=>De.stopPropagation(),children:[I.jsx("input",{type:"checkbox",checked:he.done,onChange:()=>b==null?void 0:b(i.id,he.id)}),I.jsx("span",{children:he.text})]},he.id))})]})]}),G&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:he=>{he.stopPropagation(),ce()}}),I.jsxs("div",{className:"context-menu",style:{top:G.y,left:G.x},onClick:he=>he.stopPropagation(),children:[I.jsx("button",{onClick:()=>{ce(),m(i)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{ce(),g(i.id)},children:"Delete"})]})]})]})}const e4=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function NS(i){return`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function t4({block:i,defaultTime:e,segments:t,onSave:r,onDelete:a,onClose:l,customTypes:c=[],customTypeColors:f={},onAddCustomType:m,onRemoveCustomType:g}){x.useEffect(()=>{if(!i)return;const $=ce=>{ce.key==="Delete"&&(ce.preventDefault(),a(i.id))};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[i,a]);const _=!!i,E=(i==null?void 0:i.time)||e||"08:00",b=(i==null?void 0:i.duration)||60,[w,P]=x.useState(E),[D,M]=x.useState(()=>{const[$,ce]=E.split(":").map(Number),ge=$*60+ce+b;return NS(ge)}),[U,G]=x.useState((i==null?void 0:i.activity)||""),[H,re]=x.useState((i==null?void 0:i.type)||"neutral"),[se,W]=x.useState((i==null?void 0:i.icon)||""),[R,S]=x.useState((i==null?void 0:i.tasks)||[]),[N,O]=x.useState(""),[k,z]=x.useState(!1),[V,we]=x.useState(!1),[Ne,X]=x.useState(""),ue=new Set(c.map($=>$.key)),_e=[...pP,...c.map($=>$.key)],Ce={...es,...f},ke=Ce[H]||es.neutral,j=()=>{const[$,ce]=w.split(":").map(Number),[ge,ye]=D.split(":").map(Number);return Math.max(15,ge*60+ye-($*60+ce))},te=$=>{$.preventDefault(),r({id:(i==null?void 0:i.id)||crypto.randomUUID(),time:w,activity:U.trim(),type:H,icon:se,duration:j(),segment:null,offsetMinutes:0,tasks:R})};return I.jsx("div",{className:"modal-overlay",onClick:l,onKeyDown:$=>{$.key==="Escape"&&l()},children:I.jsxs("div",{className:"modal",onClick:$=>{$.stopPropagation(),k&&z(!1)},children:[I.jsx("h3",{className:"modal-title",children:_?"Edit Block":"Add Block"}),I.jsxs("form",{onSubmit:te,className:"modal-form",children:[I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start",I.jsx("input",{className:"modal-input",value:w,onChange:$=>{const ce=$.target.value;P(ce);const[ge,ye]=w.split(":").map(Number),[Oe,Ke]=D.split(":").map(Number),Le=Oe*60+Ke-(ge*60+ye);if(Le>0&&/^\d{2}:\d{2}$/.test(ce)){const[he,De]=ce.split(":").map(Number);M(NS(he*60+De+Le))}},placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End",I.jsx("input",{className:"modal-input",value:D,onChange:$=>M($.target.value),placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]})]}),I.jsxs("label",{className:"modal-label",children:["Activity",I.jsx("input",{className:"modal-input",value:U,onChange:$=>G($.target.value),placeholder:"e.g. Quran revision",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-label",children:["Type",I.jsxs("div",{className:"modal-row",style:{gap:6,alignItems:"center"},children:[I.jsxs("div",{className:"type-picker",style:{flex:1},onClick:$=>$.stopPropagation(),children:[I.jsxs("button",{type:"button",className:"type-picker-btn",onClick:()=>z($=>!$),children:[I.jsx("span",{className:"type-color-dot",style:{background:ke.border}}),I.jsx("span",{children:H.charAt(0).toUpperCase()+H.slice(1).replace(/-/g," ")}),I.jsx("span",{className:"type-picker-arrow",children:k?"":""})]}),k&&I.jsx("div",{className:"type-dropdown",children:_e.map($=>{const ce=Ce[$]||es.neutral,ge=ue.has($);return I.jsxs("div",{className:`type-dropdown-item${$===H?" active":""}`,children:[I.jsxs("button",{type:"button",className:"type-dropdown-select",onClick:()=>{re($),z(!1)},children:[I.jsx("span",{className:"type-color-dot",style:{background:ce.border}}),I.jsx("span",{children:$.charAt(0).toUpperCase()+$.slice(1).replace(/-/g," ")})]}),ge&&g&&I.jsx("button",{type:"button",className:"type-delete-btn",onClick:()=>{g($),H===$&&re("neutral")},children:""})]},$)})})]}),I.jsx("button",{type:"button",className:"btn-add-type",onClick:()=>we($=>!$),title:"Add custom type",children:"+"})]})]}),V&&I.jsxs("div",{className:"new-type-form",children:[I.jsx("input",{className:"modal-input",placeholder:"Type name",value:Ne,onChange:$=>X($.target.value),onKeyDown:$=>{if($.key==="Enter"&&Ne.trim()&&m){$.preventDefault();const ce=m(Ne.trim());re(ce),X(""),we(!1)}}}),I.jsx("button",{type:"button",className:"btn-primary btn-sm",disabled:!Ne.trim(),onClick:()=>{if(!Ne.trim()||!m)return;const $=m(Ne.trim());re($),X(""),we(!1)},children:"Add"})]}),I.jsxs("div",{className:"modal-label",children:["Icon",I.jsx("div",{className:"icon-grid",children:e4.map($=>I.jsx("button",{type:"button",className:`icon-btn ${se===$?"active":""}`,onClick:()=>W($),children:$},$))})]}),I.jsxs("div",{className:"modal-label",children:["Tasks",I.jsxs("div",{className:"task-list-editor",children:[R.map(($,ce)=>I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{type:"checkbox",checked:$.done,onChange:()=>{const ge=[...R];ge[ce]={...$,done:!$.done},S(ge)}}),I.jsx("input",{className:`modal-input task-edit-input${$.done?" task-done":""}`,value:$.text,onChange:ge=>{const ye=[...R];ye[ce]={...$,text:ge.target.value},S(ye)}}),I.jsx("button",{type:"button",className:"task-remove-btn",onClick:()=>S(R.filter((ge,ye)=>ye!==ce)),children:""})]},$.id)),I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{className:"modal-input task-edit-input",placeholder:"Add task...",value:N,onChange:$=>O($.target.value),onKeyDown:$=>{$.key==="Enter"&&N.trim()&&($.preventDefault(),S([...R,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),O(""))}}),I.jsx("button",{type:"button",className:"task-add-btn",disabled:!N.trim(),onClick:()=>{N.trim()&&(S([...R,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),O(""))},children:"+"})]})]})]}),I.jsxs("div",{className:"modal-actions",children:[_&&I.jsx("button",{type:"button",className:"btn-danger",onClick:()=>a(i.id),children:"Delete"}),I.jsx("div",{style:{flex:1}}),I.jsx("button",{type:"button",className:"btn-secondary",onClick:l,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}var fc=$S();function n4(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return x.useMemo(()=>r=>{e.forEach(a=>a(r))},e)}const dm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $l(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function q_(i){return"nodeType"in i}function Gn(i){var e,t;return i?$l(i)?i:q_(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function F_(i){const{Document:e}=Gn(i);return i instanceof e}function ah(i){return $l(i)?!1:i instanceof Gn(i).HTMLElement}function C1(i){return i instanceof Gn(i).SVGElement}function Xl(i){return i?$l(i)?i.document:q_(i)?F_(i)?i:ah(i)||C1(i)?i.ownerDocument:document:document:document}const Xi=dm?x.useLayoutEffect:x.useEffect;function mm(i){const e=x.useRef(i);return Xi(()=>{e.current=i}),x.useCallback(function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.current==null?void 0:e.current(...r)},[])}function i4(){const i=x.useRef(null),e=x.useCallback((r,a)=>{i.current=setInterval(r,a)},[]),t=x.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function Hc(i,e){e===void 0&&(e=[i]);const t=x.useRef(i);return Xi(()=>{t.current!==i&&(t.current=i)},e),t}function oh(i,e){const t=x.useRef();return x.useMemo(()=>{const r=i(t.current);return t.current=r,r},[...e])}function Vd(i){const e=mm(i),t=x.useRef(null),r=x.useCallback(a=>{a!==t.current&&(e==null||e(a,t.current)),t.current=a},[]);return[t,r]}function Pd(i){const e=x.useRef();return x.useEffect(()=>{e.current=i},[i]),e.current}let Lg={};function lh(i,e){return x.useMemo(()=>{if(e)return e;const t=Lg[i]==null?0:Lg[i]+1;return Lg[i]=t,i+"-"+t},[i,e])}function D1(i){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((l,c)=>{const f=Object.entries(c);for(const[m,g]of f){const _=l[m];_!=null&&(l[m]=_+i*g)}return l},{...e})}}const gl=D1(1),kd=D1(-1);function r4(i){return"clientX"in i&&"clientY"in i}function pm(i){if(!i)return!1;const{KeyboardEvent:e}=Gn(i.target);return e&&i instanceof e}function s4(i){if(!i)return!1;const{TouchEvent:e}=Gn(i.target);return e&&i instanceof e}function Ld(i){if(s4(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return r4(i)?{x:i.clientX,y:i.clientY}:null}const aa=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[aa.Translate.toString(i),aa.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:r}=i;return e+" "+t+"ms "+r}}}),MS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function a4(i){return i.matches(MS)?i:i.querySelector(MS)}const o4={display:"none"};function l4(i){let{id:e,value:t}=i;return Vt.createElement("div",{id:e,style:o4},t)}function u4(i){let{id:e,announcement:t,ariaLiveType:r="assertive"}=i;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Vt.createElement("div",{id:e,style:a,role:"status","aria-live":r,"aria-atomic":!0},t)}function c4(){const[i,e]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&e(r)},[]),announcement:i}}const x1=x.createContext(null);function h4(i){const e=x.useContext(x1);x.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function f4(){const[i]=x.useState(()=>new Set),e=x.useCallback(r=>(i.add(r),()=>i.delete(r)),[i]);return[x.useCallback(r=>{let{type:a,event:l}=r;i.forEach(c=>{var f;return(f=c[a])==null?void 0:f.call(c,l)})},[i]),e]}const d4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},m4={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function p4(i){let{announcements:e=m4,container:t,hiddenTextDescribedById:r,screenReaderInstructions:a=d4}=i;const{announce:l,announcement:c}=c4(),f=lh("DndLiveRegion"),[m,g]=x.useState(!1);if(x.useEffect(()=>{g(!0)},[]),h4(x.useMemo(()=>({onDragStart(E){let{active:b}=E;l(e.onDragStart({active:b}))},onDragMove(E){let{active:b,over:w}=E;e.onDragMove&&l(e.onDragMove({active:b,over:w}))},onDragOver(E){let{active:b,over:w}=E;l(e.onDragOver({active:b,over:w}))},onDragEnd(E){let{active:b,over:w}=E;l(e.onDragEnd({active:b,over:w}))},onDragCancel(E){let{active:b,over:w}=E;l(e.onDragCancel({active:b,over:w}))}}),[l,e])),!m)return null;const _=Vt.createElement(Vt.Fragment,null,Vt.createElement(l4,{id:r,value:a.draggable}),Vt.createElement(u4,{id:f,announcement:c}));return t?fc.createPortal(_,t):_}var hn;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(hn||(hn={}));function Ud(){}function OS(i,e){return x.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function g4(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return x.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Ji=Object.freeze({x:0,y:0});function y4(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function _4(i,e){const t=Ld(i);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function v4(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return t-r}function E4(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return r-t}function T4(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function VS(i,e,t){return e===void 0&&(e=i.left),t===void 0&&(t=i.top),{x:e+i.width*.5,y:t+i.height*.5}}const b4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const a=VS(e,e.left,e.top),l=[];for(const c of r){const{id:f}=c,m=t.get(f);if(m){const g=y4(VS(m),a);l.push({id:f,data:{droppableContainer:c,value:g}})}}return l.sort(v4)};function S4(i,e){const t=Math.max(e.top,i.top),r=Math.max(e.left,i.left),a=Math.min(e.left+e.width,i.left+i.width),l=Math.min(e.top+e.height,i.top+i.height),c=a-r,f=l-t;if(r<a&&t<l){const m=e.width*e.height,g=i.width*i.height,_=c*f,E=_/(m+g-_);return Number(E.toFixed(4))}return 0}const A4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const a=[];for(const l of r){const{id:c}=l,f=t.get(c);if(f){const m=S4(f,e);m>0&&a.push({id:c,data:{droppableContainer:l,value:m}})}}return a.sort(E4)};function w4(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function N1(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:Ji}function I4(i){return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((c,f)=>({...c,top:c.top+i*f.y,bottom:c.bottom+i*f.y,left:c.left+i*f.x,right:c.right+i*f.x}),{...t})}}const R4=I4(1);function M1(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function C4(i,e,t){const r=M1(e);if(!r)return i;const{scaleX:a,scaleY:l,x:c,y:f}=r,m=i.left-c-(1-a)*parseFloat(t),g=i.top-f-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),_=a?i.width/a:i.width,E=l?i.height/l:i.height;return{width:_,height:E,top:g,right:m+_,bottom:g+E,left:m}}const D4={ignoreTransform:!1};function Jl(i,e){e===void 0&&(e=D4);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:g,transformOrigin:_}=Gn(i).getComputedStyle(i);g&&(t=C4(t,g,_))}const{top:r,left:a,width:l,height:c,bottom:f,right:m}=t;return{top:r,left:a,width:l,height:c,bottom:f,right:m}}function PS(i){return Jl(i,{ignoreTransform:!0})}function x4(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function N4(i,e){return e===void 0&&(e=Gn(i).getComputedStyle(i)),e.position==="fixed"}function M4(i,e){e===void 0&&(e=Gn(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=e[a];return typeof l=="string"?t.test(l):!1})}function H_(i,e){const t=[];function r(a){if(e!=null&&t.length>=e||!a)return t;if(F_(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!ah(a)||C1(a)||t.includes(a))return t;const l=Gn(i).getComputedStyle(a);return a!==i&&M4(a,l)&&t.push(a),N4(a,l)?t:r(a.parentNode)}return i?r(i):t}function O1(i){const[e]=H_(i,1);return e??null}function Ug(i){return!dm||!i?null:$l(i)?i:q_(i)?F_(i)||i===Xl(i).scrollingElement?window:ah(i)?i:null:null}function V1(i){return $l(i)?i.scrollX:i.scrollLeft}function P1(i){return $l(i)?i.scrollY:i.scrollTop}function Iy(i){return{x:V1(i),y:P1(i)}}var vn;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(vn||(vn={}));function k1(i){return!dm||!i?!1:i===document.scrollingElement}function L1(i){const e={x:0,y:0},t=k1(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},r={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},a=i.scrollTop<=e.y,l=i.scrollLeft<=e.x,c=i.scrollTop>=r.y,f=i.scrollLeft>=r.x;return{isTop:a,isLeft:l,isBottom:c,isRight:f,maxScroll:r,minScroll:e}}const O4={x:.2,y:.2};function V4(i,e,t,r,a){let{top:l,left:c,right:f,bottom:m}=t;r===void 0&&(r=10),a===void 0&&(a=O4);const{isTop:g,isBottom:_,isLeft:E,isRight:b}=L1(i),w={x:0,y:0},P={x:0,y:0},D={height:e.height*a.y,width:e.width*a.x};return!g&&l<=e.top+D.height?(w.y=vn.Backward,P.y=r*Math.abs((e.top+D.height-l)/D.height)):!_&&m>=e.bottom-D.height&&(w.y=vn.Forward,P.y=r*Math.abs((e.bottom-D.height-m)/D.height)),!b&&f>=e.right-D.width?(w.x=vn.Forward,P.x=r*Math.abs((e.right-D.width-f)/D.width)):!E&&c<=e.left+D.width&&(w.x=vn.Backward,P.x=r*Math.abs((e.left+D.width-c)/D.width)),{direction:w,speed:P}}function P4(i){if(i===document.scrollingElement){const{innerWidth:l,innerHeight:c}=window;return{top:0,left:0,right:l,bottom:c,width:l,height:c}}const{top:e,left:t,right:r,bottom:a}=i.getBoundingClientRect();return{top:e,left:t,right:r,bottom:a,width:i.clientWidth,height:i.clientHeight}}function U1(i){return i.reduce((e,t)=>gl(e,Iy(t)),Ji)}function k4(i){return i.reduce((e,t)=>e+V1(t),0)}function L4(i){return i.reduce((e,t)=>e+P1(t),0)}function j1(i,e){if(e===void 0&&(e=Jl),!i)return;const{top:t,left:r,bottom:a,right:l}=e(i);O1(i)&&(a<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const U4=[["x",["left","right"],k4],["y",["top","bottom"],L4]];class G_{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=H_(t),a=U1(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,c,f]of U4)for(const m of c)Object.defineProperty(this,m,{get:()=>{const g=f(r),_=a[l]-g;return this.rect[m]+_},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class wc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var a;(a=this.target)==null||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function j4(i){const{EventTarget:e}=Gn(i);return i instanceof e?i:Xl(i)}function jg(i,e){const t=Math.abs(i.x),r=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Vi;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Vi||(Vi={}));function kS(i){i.preventDefault()}function z4(i){i.stopPropagation()}var ut;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(ut||(ut={}));const z1={start:[ut.Space,ut.Enter],cancel:[ut.Esc],end:[ut.Space,ut.Enter,ut.Tab]},B4=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case ut.Right:return{...t,x:t.x+25};case ut.Left:return{...t,x:t.x-25};case ut.Down:return{...t,y:t.y+25};case ut.Up:return{...t,y:t.y-25}}};class B1{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new wc(Xl(t)),this.windowListeners=new wc(Gn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vi.Resize,this.handleCancel),this.windowListeners.add(Vi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&j1(r),t(Ji)}handleKeyDown(e){if(pm(e)){const{active:t,context:r,options:a}=this.props,{keyboardCodes:l=z1,coordinateGetter:c=B4,scrollBehavior:f="smooth"}=a,{code:m}=e;if(l.end.includes(m)){this.handleEnd(e);return}if(l.cancel.includes(m)){this.handleCancel(e);return}const{collisionRect:g}=r.current,_=g?{x:g.left,y:g.top}:Ji;this.referenceCoordinates||(this.referenceCoordinates=_);const E=c(e,{active:t,context:r.current,currentCoordinates:_});if(E){const b=kd(E,_),w={x:0,y:0},{scrollableAncestors:P}=r.current;for(const D of P){const M=e.code,{isTop:U,isRight:G,isLeft:H,isBottom:re,maxScroll:se,minScroll:W}=L1(D),R=P4(D),S={x:Math.min(M===ut.Right?R.right-R.width/2:R.right,Math.max(M===ut.Right?R.left:R.left+R.width/2,E.x)),y:Math.min(M===ut.Down?R.bottom-R.height/2:R.bottom,Math.max(M===ut.Down?R.top:R.top+R.height/2,E.y))},N=M===ut.Right&&!G||M===ut.Left&&!H,O=M===ut.Down&&!re||M===ut.Up&&!U;if(N&&S.x!==E.x){const k=D.scrollLeft+b.x,z=M===ut.Right&&k<=se.x||M===ut.Left&&k>=W.x;if(z&&!b.y){D.scrollTo({left:k,behavior:f});return}z?w.x=D.scrollLeft-k:w.x=M===ut.Right?D.scrollLeft-se.x:D.scrollLeft-W.x,w.x&&D.scrollBy({left:-w.x,behavior:f});break}else if(O&&S.y!==E.y){const k=D.scrollTop+b.y,z=M===ut.Down&&k<=se.y||M===ut.Up&&k>=W.y;if(z&&!b.x){D.scrollTo({top:k,behavior:f});return}z?w.y=D.scrollTop-k:w.y=M===ut.Down?D.scrollTop-se.y:D.scrollTop-W.y,w.y&&D.scrollBy({top:-w.y,behavior:f});break}}this.handleMove(e,gl(kd(E,this.referenceCoordinates),w))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}B1.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:r=z1,onActivation:a}=e,{active:l}=t;const{code:c}=i.nativeEvent;if(r.start.includes(c)){const f=l.activatorNode.current;return f&&i.target!==f?!1:(i.preventDefault(),a==null||a({event:i.nativeEvent}),!0)}return!1}}];function LS(i){return!!(i&&"distance"in i)}function US(i){return!!(i&&"delay"in i)}class K_{constructor(e,t,r){var a;r===void 0&&(r=j4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:c}=l;this.props=e,this.events=t,this.document=Xl(c),this.documentListeners=new wc(this.document),this.listeners=new wc(r),this.windowListeners=new wc(Gn(c)),this.initialCoordinates=(a=Ld(l))!=null?a:Ji,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Vi.Resize,this.handleCancel),this.windowListeners.add(Vi.DragStart,kS),this.windowListeners.add(Vi.VisibilityChange,this.handleCancel),this.windowListeners.add(Vi.ContextMenu,kS),this.documentListeners.add(Vi.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(US(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(LS(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Vi.Click,z4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:a,props:l}=this,{onMove:c,options:{activationConstraint:f}}=l;if(!a)return;const m=(t=Ld(e))!=null?t:Ji,g=kd(a,m);if(!r&&f){if(LS(f)){if(f.tolerance!=null&&jg(g,f.tolerance))return this.handleCancel();if(jg(g,f.distance))return this.handleStart()}if(US(f)&&jg(g,f.tolerance))return this.handleCancel();this.handlePending(f,g);return}e.cancelable&&e.preventDefault(),c(m)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ut.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const q4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Y_ extends K_{constructor(e){const{event:t}=e,r=Xl(t.target);super(e,q4,r)}}Y_.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const F4={move:{name:"mousemove"},end:{name:"mouseup"}};var Ry;(function(i){i[i.RightClick=2]="RightClick"})(Ry||(Ry={}));class H4 extends K_{constructor(e){super(e,F4,Xl(e.event.target))}}H4.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return t.button===Ry.RightClick?!1:(r==null||r({event:t}),!0)}}];const zg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class q1 extends K_{constructor(e){super(e,zg)}static setup(){return window.addEventListener(zg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(zg.move.name,e)};function e(){}}}q1.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;const{touches:a}=t;return a.length>1?!1:(r==null||r({event:t}),!0)}}];var Ic;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Ic||(Ic={}));var jd;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(jd||(jd={}));function G4(i){let{acceleration:e,activator:t=Ic.Pointer,canScroll:r,draggingRect:a,enabled:l,interval:c=5,order:f=jd.TreeOrder,pointerCoordinates:m,scrollableAncestors:g,scrollableAncestorRects:_,delta:E,threshold:b}=i;const w=Y4({delta:E,disabled:!l}),[P,D]=i4(),M=x.useRef({x:0,y:0}),U=x.useRef({x:0,y:0}),G=x.useMemo(()=>{switch(t){case Ic.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case Ic.DraggableRect:return a}},[t,a,m]),H=x.useRef(null),re=x.useCallback(()=>{const W=H.current;if(!W)return;const R=M.current.x*U.current.x,S=M.current.y*U.current.y;W.scrollBy(R,S)},[]),se=x.useMemo(()=>f===jd.TreeOrder?[...g].reverse():g,[f,g]);x.useEffect(()=>{if(!l||!g.length||!G){D();return}for(const W of se){if((r==null?void 0:r(W))===!1)continue;const R=g.indexOf(W),S=_[R];if(!S)continue;const{direction:N,speed:O}=V4(W,S,G,e,b);for(const k of["x","y"])w[k][N[k]]||(O[k]=0,N[k]=0);if(O.x>0||O.y>0){D(),H.current=W,P(re,c),M.current=O,U.current=N;return}}M.current={x:0,y:0},U.current={x:0,y:0},D()},[e,re,r,D,l,c,JSON.stringify(G),JSON.stringify(w),P,g,se,_,JSON.stringify(b)])}const K4={x:{[vn.Backward]:!1,[vn.Forward]:!1},y:{[vn.Backward]:!1,[vn.Forward]:!1}};function Y4(i){let{delta:e,disabled:t}=i;const r=Pd(e);return oh(a=>{if(t||!r||!a)return K4;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[vn.Backward]:a.x[vn.Backward]||l.x===-1,[vn.Forward]:a.x[vn.Forward]||l.x===1},y:{[vn.Backward]:a.y[vn.Backward]||l.y===-1,[vn.Forward]:a.y[vn.Forward]||l.y===1}}},[t,e,r])}function Q4(i,e){const t=e!=null?i.get(e):void 0,r=t?t.node.current:null;return oh(a=>{var l;return e==null?null:(l=r??a)!=null?l:null},[r,e])}function $4(i,e){return x.useMemo(()=>i.reduce((t,r)=>{const{sensor:a}=r,l=a.activators.map(c=>({eventName:c.eventName,handler:e(c.handler,r)}));return[...t,...l]},[]),[i,e])}var Gc;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Gc||(Gc={}));var Cy;(function(i){i.Optimized="optimized"})(Cy||(Cy={}));const jS=new Map;function X4(i,e){let{dragging:t,dependencies:r,config:a}=e;const[l,c]=x.useState(null),{frequency:f,measure:m,strategy:g}=a,_=x.useRef(i),E=M(),b=Hc(E),w=x.useCallback(function(U){U===void 0&&(U=[]),!b.current&&c(G=>G===null?U:G.concat(U.filter(H=>!G.includes(H))))},[b]),P=x.useRef(null),D=oh(U=>{if(E&&!t)return jS;if(!U||U===jS||_.current!==i||l!=null){const G=new Map;for(let H of i){if(!H)continue;if(l&&l.length>0&&!l.includes(H.id)&&H.rect.current){G.set(H.id,H.rect.current);continue}const re=H.node.current,se=re?new G_(m(re),re):null;H.rect.current=se,se&&G.set(H.id,se)}return G}return U},[i,l,t,E,m]);return x.useEffect(()=>{_.current=i},[i]),x.useEffect(()=>{E||w()},[t,E]),x.useEffect(()=>{l&&l.length>0&&c(null)},[JSON.stringify(l)]),x.useEffect(()=>{E||typeof f!="number"||P.current!==null||(P.current=setTimeout(()=>{w(),P.current=null},f))},[f,E,w,...r]),{droppableRects:D,measureDroppableContainers:w,measuringScheduled:l!=null};function M(){switch(g){case Gc.Always:return!1;case Gc.BeforeDragging:return t;default:return!t}}}function Q_(i,e){return oh(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function J4(i,e){return Q_(i,e)}function W4(i){let{callback:e,disabled:t}=i;const r=mm(e),a=x.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return x.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function gm(i){let{callback:e,disabled:t}=i;const r=mm(e),a=x.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return x.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Z4(i){return new G_(Jl(i),i)}function zS(i,e,t){e===void 0&&(e=Z4);const[r,a]=x.useState(null);function l(){a(m=>{if(!i)return null;if(i.isConnected===!1){var g;return(g=m??t)!=null?g:null}const _=e(i);return JSON.stringify(m)===JSON.stringify(_)?m:_})}const c=W4({callback(m){if(i)for(const g of m){const{type:_,target:E}=g;if(_==="childList"&&E instanceof HTMLElement&&E.contains(i)){l();break}}}}),f=gm({callback:l});return Xi(()=>{l(),i?(f==null||f.observe(i),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(f==null||f.disconnect(),c==null||c.disconnect())},[i]),r}function ek(i){const e=Q_(i);return N1(i,e)}const BS=[];function tk(i){const e=x.useRef(i),t=oh(r=>i?r&&r!==BS&&i&&e.current&&i.parentNode===e.current.parentNode?r:H_(i):BS,[i]);return x.useEffect(()=>{e.current=i},[i]),t}function nk(i){const[e,t]=x.useState(null),r=x.useRef(i),a=x.useCallback(l=>{const c=Ug(l.target);c&&t(f=>f?(f.set(c,Iy(c)),new Map(f)):null)},[]);return x.useEffect(()=>{const l=r.current;if(i!==l){c(l);const f=i.map(m=>{const g=Ug(m);return g?(g.addEventListener("scroll",a,{passive:!0}),[g,Iy(g)]):null}).filter(m=>m!=null);t(f.length?new Map(f):null),r.current=i}return()=>{c(i),c(l)};function c(f){f.forEach(m=>{const g=Ug(m);g==null||g.removeEventListener("scroll",a)})}},[a,i]),x.useMemo(()=>i.length?e?Array.from(e.values()).reduce((l,c)=>gl(l,c),Ji):U1(i):Ji,[i,e])}function qS(i,e){e===void 0&&(e=[]);const t=x.useRef(null);return x.useEffect(()=>{t.current=null},e),x.useEffect(()=>{const r=i!==Ji;r&&!t.current&&(t.current=i),!r&&t.current&&(t.current=null)},[i]),t.current?kd(i,t.current):Ji}function ik(i){x.useEffect(()=>{if(!dm)return;const e=i.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},i.map(e=>{let{sensor:t}=e;return t}))}function rk(i,e){return x.useMemo(()=>i.reduce((t,r)=>{let{eventName:a,handler:l}=r;return t[a]=c=>{l(c,e)},t},{}),[i,e])}function F1(i){return x.useMemo(()=>i?x4(i):null,[i])}const FS=[];function sk(i,e){e===void 0&&(e=Jl);const[t]=i,r=F1(t?Gn(t):null),[a,l]=x.useState(FS);function c(){l(()=>i.length?i.map(m=>k1(m)?r:new G_(e(m),m)):FS)}const f=gm({callback:c});return Xi(()=>{f==null||f.disconnect(),c(),i.forEach(m=>f==null?void 0:f.observe(m))},[i]),a}function H1(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return ah(e)?e:i}function ak(i){let{measure:e}=i;const[t,r]=x.useState(null),a=x.useCallback(g=>{for(const{target:_}of g)if(ah(_)){r(E=>{const b=e(_);return E?{...E,width:b.width,height:b.height}:b});break}},[e]),l=gm({callback:a}),c=x.useCallback(g=>{const _=H1(g);l==null||l.disconnect(),_&&(l==null||l.observe(_)),r(_?e(_):null)},[e,l]),[f,m]=Vd(c);return x.useMemo(()=>({nodeRef:f,rect:t,setRef:m}),[t,f,m])}const ok=[{sensor:Y_,options:{}},{sensor:B1,options:{}}],lk={current:{}},sd={draggable:{measure:PS},droppable:{measure:PS,strategy:Gc.WhileDragging,frequency:Cy.Optimized},dragOverlay:{measure:Jl}};class Rc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const uk={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Rc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ud},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sd,measureDroppableContainers:Ud,windowRect:null,measuringScheduled:!1},G1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ud,draggableNodes:new Map,over:null,measureDroppableContainers:Ud},uh=x.createContext(G1),K1=x.createContext(uk);function ck(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Rc}}}function hk(i,e){switch(e.type){case hn.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case hn.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case hn.DragEnd:case hn.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case hn.RegisterDroppable:{const{element:t}=e,{id:r}=t,a=new Rc(i.droppable.containers);return a.set(r,t),{...i,droppable:{...i.droppable,containers:a}}}case hn.SetDroppableDisabled:{const{id:t,key:r,disabled:a}=e,l=i.droppable.containers.get(t);if(!l||r!==l.key)return i;const c=new Rc(i.droppable.containers);return c.set(t,{...l,disabled:a}),{...i,droppable:{...i.droppable,containers:c}}}case hn.UnregisterDroppable:{const{id:t,key:r}=e,a=i.droppable.containers.get(t);if(!a||r!==a.key)return i;const l=new Rc(i.droppable.containers);return l.delete(t),{...i,droppable:{...i.droppable,containers:l}}}default:return i}}function fk(i){let{disabled:e}=i;const{active:t,activatorEvent:r,draggableNodes:a}=x.useContext(uh),l=Pd(r),c=Pd(t==null?void 0:t.id);return x.useEffect(()=>{if(!e&&!r&&l&&c!=null){if(!pm(l)||document.activeElement===l.target)return;const f=a.get(c);if(!f)return;const{activatorNode:m,node:g}=f;if(!m.current&&!g.current)return;requestAnimationFrame(()=>{for(const _ of[m.current,g.current]){if(!_)continue;const E=a4(_);if(E){E.focus();break}}})}},[r,e,a,c,l]),null}function Y1(i,e){let{transform:t,...r}=e;return i!=null&&i.length?i.reduce((a,l)=>l({transform:a,...r}),t):t}function dk(i){return x.useMemo(()=>({draggable:{...sd.draggable,...i==null?void 0:i.draggable},droppable:{...sd.droppable,...i==null?void 0:i.droppable},dragOverlay:{...sd.dragOverlay,...i==null?void 0:i.dragOverlay}}),[i==null?void 0:i.draggable,i==null?void 0:i.droppable,i==null?void 0:i.dragOverlay])}function mk(i){let{activeNode:e,measure:t,initialRect:r,config:a=!0}=i;const l=x.useRef(!1),{x:c,y:f}=typeof a=="boolean"?{x:a,y:a}:a;Xi(()=>{if(!c&&!f||!e){l.current=!1;return}if(l.current||!r)return;const g=e==null?void 0:e.node.current;if(!g||g.isConnected===!1)return;const _=t(g),E=N1(_,r);if(c||(E.x=0),f||(E.y=0),l.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const b=O1(g);b&&b.scrollBy({top:E.y,left:E.x})}},[e,c,f,r,t])}const ym=x.createContext({...Ji,scaleX:1,scaleY:1});var Fs;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(Fs||(Fs={}));const pk=x.memo(function(e){var t,r,a,l;let{id:c,accessibility:f,autoScroll:m=!0,children:g,sensors:_=ok,collisionDetection:E=A4,measuring:b,modifiers:w,...P}=e;const D=x.useReducer(hk,void 0,ck),[M,U]=D,[G,H]=f4(),[re,se]=x.useState(Fs.Uninitialized),W=re===Fs.Initialized,{draggable:{active:R,nodes:S,translate:N},droppable:{containers:O}}=M,k=R!=null?S.get(R):null,z=x.useRef({initial:null,translated:null}),V=x.useMemo(()=>{var Ye;return R!=null?{id:R,data:(Ye=k==null?void 0:k.data)!=null?Ye:lk,rect:z}:null},[R,k]),we=x.useRef(null),[Ne,X]=x.useState(null),[ue,_e]=x.useState(null),Ce=Hc(P,Object.values(P)),ke=lh("DndDescribedBy",c),j=x.useMemo(()=>O.getEnabled(),[O]),te=dk(b),{droppableRects:$,measureDroppableContainers:ce,measuringScheduled:ge}=X4(j,{dragging:W,dependencies:[N.x,N.y],config:te.droppable}),ye=Q4(S,R),Oe=x.useMemo(()=>ue?Ld(ue):null,[ue]),Ke=xr(),Le=J4(ye,te.draggable.measure);mk({activeNode:R!=null?S.get(R):null,config:Ke.layoutShiftCompensation,initialRect:Le,measure:te.draggable.measure});const he=zS(ye,te.draggable.measure,Le),De=zS(ye?ye.parentElement:null),Ve=x.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),nt=O.getNodeFor((t=Ve.current.over)==null?void 0:t.id),oe=ak({measure:te.dragOverlay.measure}),Se=(r=oe.nodeRef.current)!=null?r:ye,Me=W?(a=oe.rect)!=null?a:he:null,rt=!!(oe.nodeRef.current&&oe.rect),ht=ek(rt?null:he),He=F1(Se?Gn(Se):null),et=tk(W?nt??ye:null),Cn=sk(et),Wi=Y1(w,{transform:{x:N.x-ht.x,y:N.y-ht.y,scaleX:1,scaleY:1},activatorEvent:ue,active:V,activeNodeRect:he,containerNodeRect:De,draggingNodeRect:Me,over:Ve.current.over,overlayNodeRect:oe.rect,scrollableAncestors:et,scrollableAncestorRects:Cn,windowRect:He}),ki=Oe?gl(Oe,N):null,Yt=nk(et),vi=qS(Yt),Rr=qS(Yt,[he]),Kn=gl(Wi,vi),Qt=Me?R4(Me,Wi):null,Yn=V&&Qt?E({active:V,collisionRect:Qt,droppableRects:$,droppableContainers:j,pointerCoordinates:ki}):null,Cr=T4(Yn,"id"),[Ue,St]=x.useState(null),on=rt?Wi:gl(Wi,Rr),ln=w4(on,(l=Ue==null?void 0:Ue.rect)!=null?l:null,he),Dn=x.useRef(null),Rt=x.useCallback((Ye,Ct)=>{let{sensor:Dt,options:$t}=Ct;if(we.current==null)return;const xn=S.get(we.current);if(!xn)return;const mn=Ye.nativeEvent,jt=new Dt({active:we.current,activeNode:xn,event:mn,options:$t,context:Ve,onAbort(zt){if(!S.get(zt))return;const{onDragAbort:Mn}=Ce.current,jn={id:zt};Mn==null||Mn(jn),G({type:"onDragAbort",event:jn})},onPending(zt,Nn,Mn,jn){if(!S.get(zt))return;const{onDragPending:zn}=Ce.current,si={id:zt,constraint:Nn,initialCoordinates:Mn,offset:jn};zn==null||zn(si),G({type:"onDragPending",event:si})},onStart(zt){const Nn=we.current;if(Nn==null)return;const Mn=S.get(Nn);if(!Mn)return;const{onDragStart:jn}=Ce.current,ri={activatorEvent:mn,active:{id:Nn,data:Mn.data,rect:z}};fc.unstable_batchedUpdates(()=>{jn==null||jn(ri),se(Fs.Initializing),U({type:hn.DragStart,initialCoordinates:zt,active:Nn}),G({type:"onDragStart",event:ri}),X(Dn.current),_e(mn)})},onMove(zt){U({type:hn.DragMove,coordinates:zt})},onEnd:Qn(hn.DragEnd),onCancel:Qn(hn.DragCancel)});Dn.current=jt;function Qn(zt){return async function(){const{active:Mn,collisions:jn,over:ri,scrollAdjustedTranslate:zn}=Ve.current;let si=null;if(Mn&&zn){const{cancelDrop:Tn}=Ce.current;si={activatorEvent:mn,active:Mn,collisions:jn,delta:zn,over:ri},zt===hn.DragEnd&&typeof Tn=="function"&&await Promise.resolve(Tn(si))&&(zt=hn.DragCancel)}we.current=null,fc.unstable_batchedUpdates(()=>{U({type:zt}),se(Fs.Uninitialized),St(null),X(null),_e(null),Dn.current=null;const Tn=zt===hn.DragEnd?"onDragEnd":"onDragCancel";if(si){const Bn=Ce.current[Tn];Bn==null||Bn(si),G({type:Tn,event:si})}})}}},[S]),uo=x.useCallback((Ye,Ct)=>(Dt,$t)=>{const xn=Dt.nativeEvent,mn=S.get($t);if(we.current!==null||!mn||xn.dndKit||xn.defaultPrevented)return;const jt={active:mn};Ye(Dt,Ct.options,jt)===!0&&(xn.dndKit={capturedBy:Ct.sensor},we.current=$t,Rt(Dt,Ct))},[S,Rt]),Dr=$4(_,uo);ik(_),Xi(()=>{he&&re===Fs.Initializing&&se(Fs.Initialized)},[he,re]),x.useEffect(()=>{const{onDragMove:Ye}=Ce.current,{active:Ct,activatorEvent:Dt,collisions:$t,over:xn}=Ve.current;if(!Ct||!Dt)return;const mn={active:Ct,activatorEvent:Dt,collisions:$t,delta:{x:Kn.x,y:Kn.y},over:xn};fc.unstable_batchedUpdates(()=>{Ye==null||Ye(mn),G({type:"onDragMove",event:mn})})},[Kn.x,Kn.y]),x.useEffect(()=>{const{active:Ye,activatorEvent:Ct,collisions:Dt,droppableContainers:$t,scrollAdjustedTranslate:xn}=Ve.current;if(!Ye||we.current==null||!Ct||!xn)return;const{onDragOver:mn}=Ce.current,jt=$t.get(Cr),Qn=jt&&jt.rect.current?{id:jt.id,rect:jt.rect.current,data:jt.data,disabled:jt.disabled}:null,zt={active:Ye,activatorEvent:Ct,collisions:Dt,delta:{x:xn.x,y:xn.y},over:Qn};fc.unstable_batchedUpdates(()=>{St(Qn),mn==null||mn(zt),G({type:"onDragOver",event:zt})})},[Cr]),Xi(()=>{Ve.current={activatorEvent:ue,active:V,activeNode:ye,collisionRect:Qt,collisions:Yn,droppableRects:$,draggableNodes:S,draggingNode:Se,draggingNodeRect:Me,droppableContainers:O,over:Ue,scrollableAncestors:et,scrollAdjustedTranslate:Kn},z.current={initial:Me,translated:Qt}},[V,ye,Yn,Qt,S,Se,Me,$,O,Ue,et,Kn]),G4({...Ke,delta:N,draggingRect:Qt,pointerCoordinates:ki,scrollableAncestors:et,scrollableAncestorRects:Cn});const co=x.useMemo(()=>({active:V,activeNode:ye,activeNodeRect:he,activatorEvent:ue,collisions:Yn,containerNodeRect:De,dragOverlay:oe,draggableNodes:S,droppableContainers:O,droppableRects:$,over:Ue,measureDroppableContainers:ce,scrollableAncestors:et,scrollableAncestorRects:Cn,measuringConfiguration:te,measuringScheduled:ge,windowRect:He}),[V,ye,he,ue,Yn,De,oe,S,O,$,Ue,ce,et,Cn,te,ge,He]),Ei=x.useMemo(()=>({activatorEvent:ue,activators:Dr,active:V,activeNodeRect:he,ariaDescribedById:{draggable:ke},dispatch:U,draggableNodes:S,over:Ue,measureDroppableContainers:ce}),[ue,Dr,V,he,U,ke,S,Ue,ce]);return Vt.createElement(x1.Provider,{value:H},Vt.createElement(uh.Provider,{value:Ei},Vt.createElement(K1.Provider,{value:co},Vt.createElement(ym.Provider,{value:ln},g)),Vt.createElement(fk,{disabled:(f==null?void 0:f.restoreFocus)===!1})),Vt.createElement(p4,{...f,hiddenTextDescribedById:ke}));function xr(){const Ye=(Ne==null?void 0:Ne.autoScrollEnabled)===!1,Ct=typeof m=="object"?m.enabled===!1:m===!1,Dt=W&&!Ye&&!Ct;return typeof m=="object"?{...m,enabled:Dt}:{enabled:Dt}}}),gk=x.createContext(null),HS="button",yk="Draggable";function _k(i){let{id:e,data:t,disabled:r=!1,attributes:a}=i;const l=lh(yk),{activators:c,activatorEvent:f,active:m,activeNodeRect:g,ariaDescribedById:_,draggableNodes:E,over:b}=x.useContext(uh),{role:w=HS,roleDescription:P="draggable",tabIndex:D=0}=a??{},M=(m==null?void 0:m.id)===e,U=x.useContext(M?ym:gk),[G,H]=Vd(),[re,se]=Vd(),W=rk(c,e),R=Hc(t);Xi(()=>(E.set(e,{id:e,key:l,node:G,activatorNode:re,data:R}),()=>{const N=E.get(e);N&&N.key===l&&E.delete(e)}),[E,e]);const S=x.useMemo(()=>({role:w,tabIndex:D,"aria-disabled":r,"aria-pressed":M&&w===HS?!0:void 0,"aria-roledescription":P,"aria-describedby":_.draggable}),[r,w,D,M,P,_.draggable]);return{active:m,activatorEvent:f,activeNodeRect:g,attributes:S,isDragging:M,listeners:r?void 0:W,node:G,over:b,setNodeRef:H,setActivatorNodeRef:se,transform:U}}function Q1(){return x.useContext(K1)}const vk="Droppable",Ek={timeout:25};function $1(i){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:a}=i;const l=lh(vk),{active:c,dispatch:f,over:m,measureDroppableContainers:g}=x.useContext(uh),_=x.useRef({disabled:t}),E=x.useRef(!1),b=x.useRef(null),w=x.useRef(null),{disabled:P,updateMeasurementsFor:D,timeout:M}={...Ek,...a},U=Hc(D??r),G=x.useCallback(()=>{if(!E.current){E.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{g(Array.isArray(U.current)?U.current:[U.current]),w.current=null},M)},[M]),H=gm({callback:G,disabled:P||!c}),re=x.useCallback((S,N)=>{H&&(N&&(H.unobserve(N),E.current=!1),S&&H.observe(S))},[H]),[se,W]=Vd(re),R=Hc(e);return x.useEffect(()=>{!H||!se.current||(H.disconnect(),E.current=!1,H.observe(se.current))},[se,H]),x.useEffect(()=>(f({type:hn.RegisterDroppable,element:{id:r,key:l,disabled:t,node:se,rect:b,data:R}}),()=>f({type:hn.UnregisterDroppable,key:l,id:r})),[r]),x.useEffect(()=>{t!==_.current.disabled&&(f({type:hn.SetDroppableDisabled,id:r,key:l,disabled:t}),_.current.disabled=t)},[r,l,t,f]),{active:c,rect:b,isOver:(m==null?void 0:m.id)===r,node:se,over:m,setNodeRef:W}}function Tk(i){let{animation:e,children:t}=i;const[r,a]=x.useState(null),[l,c]=x.useState(null),f=Pd(t);return!t&&!r&&f&&a(f),Xi(()=>{if(!l)return;const m=r==null?void 0:r.key,g=r==null?void 0:r.props.id;if(m==null||g==null){a(null);return}Promise.resolve(e(g,l)).then(()=>{a(null)})},[e,r,l]),Vt.createElement(Vt.Fragment,null,t,r?x.cloneElement(r,{ref:c}):null)}const bk={x:0,y:0,scaleX:1,scaleY:1};function Sk(i){let{children:e}=i;return Vt.createElement(uh.Provider,{value:G1},Vt.createElement(ym.Provider,{value:bk},e))}const Ak={position:"fixed",touchAction:"none"},wk=i=>pm(i)?"transform 250ms ease":void 0,Ik=x.forwardRef((i,e)=>{let{as:t,activatorEvent:r,adjustScale:a,children:l,className:c,rect:f,style:m,transform:g,transition:_=wk}=i;if(!f)return null;const E=a?g:{...g,scaleX:1,scaleY:1},b={...Ak,width:f.width,height:f.height,top:f.top,left:f.left,transform:aa.Transform.toString(E),transformOrigin:a&&r?_4(r,f):void 0,transition:typeof _=="function"?_(r):_,...m};return Vt.createElement(t,{className:c,style:b,ref:e},l)}),Rk=i=>e=>{let{active:t,dragOverlay:r}=e;const a={},{styles:l,className:c}=i;if(l!=null&&l.active)for(const[f,m]of Object.entries(l.active))m!==void 0&&(a[f]=t.node.style.getPropertyValue(f),t.node.style.setProperty(f,m));if(l!=null&&l.dragOverlay)for(const[f,m]of Object.entries(l.dragOverlay))m!==void 0&&r.node.style.setProperty(f,m);return c!=null&&c.active&&t.node.classList.add(c.active),c!=null&&c.dragOverlay&&r.node.classList.add(c.dragOverlay),function(){for(const[m,g]of Object.entries(a))t.node.style.setProperty(m,g);c!=null&&c.active&&t.node.classList.remove(c.active)}},Ck=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:aa.Transform.toString(e)},{transform:aa.Transform.toString(t)}]},Dk={duration:250,easing:"ease",keyframes:Ck,sideEffects:Rk({styles:{active:{opacity:"0"}}})};function xk(i){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:a}=i;return mm((l,c)=>{if(e===null)return;const f=t.get(l);if(!f)return;const m=f.node.current;if(!m)return;const g=H1(c);if(!g)return;const{transform:_}=Gn(c).getComputedStyle(c),E=M1(_);if(!E)return;const b=typeof e=="function"?e:Nk(e);return j1(m,a.draggable.measure),b({active:{id:l,data:f.data,node:m,rect:a.draggable.measure(m)},draggableNodes:t,dragOverlay:{node:c,rect:a.dragOverlay.measure(g)},droppableContainers:r,measuringConfiguration:a,transform:E})})}function Nk(i){const{duration:e,easing:t,sideEffects:r,keyframes:a}={...Dk,...i};return l=>{let{active:c,dragOverlay:f,transform:m,...g}=l;if(!e)return;const _={x:f.rect.left-c.rect.left,y:f.rect.top-c.rect.top},E={scaleX:m.scaleX!==1?c.rect.width*m.scaleX/f.rect.width:1,scaleY:m.scaleY!==1?c.rect.height*m.scaleY/f.rect.height:1},b={x:m.x-_.x,y:m.y-_.y,...E},w=a({...g,active:c,dragOverlay:f,transform:{initial:m,final:b}}),[P]=w,D=w[w.length-1];if(JSON.stringify(P)===JSON.stringify(D))return;const M=r==null?void 0:r({active:c,dragOverlay:f,...g}),U=f.node.animate(w,{duration:e,easing:t,fill:"forwards"});return new Promise(G=>{U.onfinish=()=>{M==null||M(),G()}})}}let GS=0;function Mk(i){return x.useMemo(()=>{if(i!=null)return GS++,GS},[i])}const Ok=Vt.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:a,transition:l,modifiers:c,wrapperElement:f="div",className:m,zIndex:g=999}=i;const{activatorEvent:_,active:E,activeNodeRect:b,containerNodeRect:w,draggableNodes:P,droppableContainers:D,dragOverlay:M,over:U,measuringConfiguration:G,scrollableAncestors:H,scrollableAncestorRects:re,windowRect:se}=Q1(),W=x.useContext(ym),R=Mk(E==null?void 0:E.id),S=Y1(c,{activatorEvent:_,active:E,activeNodeRect:b,containerNodeRect:w,draggingNodeRect:M.rect,over:U,overlayNodeRect:M.rect,scrollableAncestors:H,scrollableAncestorRects:re,transform:W,windowRect:se}),N=Q_(b),O=xk({config:r,draggableNodes:P,droppableContainers:D,measuringConfiguration:G}),k=N?M.setRef:void 0;return Vt.createElement(Sk,null,Vt.createElement(Tk,{animation:O},E&&R?Vt.createElement(Ik,{key:R,id:E.id,ref:k,as:f,activatorEvent:_,adjustScale:e,className:m,transition:l,rect:N,style:{zIndex:g,...a},transform:S},t):null))});function $_(i,e,t){const r=i.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function Vk(i,e){return i.reduce((t,r,a)=>{const l=e.get(r);return l&&(t[a]=l),t},Array(i.length))}function Bf(i){return i!==null&&i>=0}function Pk(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function kk(i){return typeof i=="boolean"?{draggable:i,droppable:i}:i}const X1=i=>{let{rects:e,activeIndex:t,overIndex:r,index:a}=i;const l=$_(e,r,t),c=e[a],f=l[a];return!f||!c?null:{x:f.left-c.left,y:f.top-c.top,scaleX:f.width/c.width,scaleY:f.height/c.height}},qf={scaleX:1,scaleY:1},Lk=i=>{var e;let{activeIndex:t,activeNodeRect:r,index:a,rects:l,overIndex:c}=i;const f=(e=l[t])!=null?e:r;if(!f)return null;if(a===t){const g=l[c];return g?{x:0,y:t<c?g.top+g.height-(f.top+f.height):g.top-f.top,...qf}:null}const m=Uk(l,a,t);return a>t&&a<=c?{x:0,y:-f.height-m,...qf}:a<t&&a>=c?{x:0,y:f.height+m,...qf}:{x:0,y:0,...qf}};function Uk(i,e,t){const r=i[e],a=i[e-1],l=i[e+1];return r?t<e?a?r.top-(a.top+a.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const J1="Sortable",W1=Vt.createContext({activeIndex:-1,containerId:J1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:X1,disabled:{draggable:!1,droppable:!1}});function jk(i){let{children:e,id:t,items:r,strategy:a=X1,disabled:l=!1}=i;const{active:c,dragOverlay:f,droppableRects:m,over:g,measureDroppableContainers:_}=Q1(),E=lh(J1,t),b=f.rect!==null,w=x.useMemo(()=>r.map(W=>typeof W=="object"&&"id"in W?W.id:W),[r]),P=c!=null,D=c?w.indexOf(c.id):-1,M=g?w.indexOf(g.id):-1,U=x.useRef(w),G=!Pk(w,U.current),H=M!==-1&&D===-1||G,re=kk(l);Xi(()=>{G&&P&&_(w)},[G,w,P,_]),x.useEffect(()=>{U.current=w},[w]);const se=x.useMemo(()=>({activeIndex:D,containerId:E,disabled:re,disableTransforms:H,items:w,overIndex:M,useDragOverlay:b,sortedRects:Vk(w,m),strategy:a}),[D,E,re.draggable,re.droppable,H,w,M,m,b,a]);return Vt.createElement(W1.Provider,{value:se},e)}const zk=i=>{let{id:e,items:t,activeIndex:r,overIndex:a}=i;return $_(t,r,a).indexOf(e)},Bk=i=>{let{containerId:e,isSorting:t,wasDragging:r,index:a,items:l,newIndex:c,previousItems:f,previousContainerId:m,transition:g}=i;return!g||!r||f!==l&&a===c?!1:t?!0:c!==a&&e===m},qk={duration:200,easing:"ease"},Z1="transform",Fk=aa.Transition.toString({property:Z1,duration:0,easing:"linear"}),Hk={roleDescription:"sortable"};function Gk(i){let{disabled:e,index:t,node:r,rect:a}=i;const[l,c]=x.useState(null),f=x.useRef(t);return Xi(()=>{if(!e&&t!==f.current&&r.current){const m=a.current;if(m){const g=Jl(r.current,{ignoreTransform:!0}),_={x:m.left-g.left,y:m.top-g.top,scaleX:m.width/g.width,scaleY:m.height/g.height};(_.x||_.y)&&c(_)}}t!==f.current&&(f.current=t)},[e,t,r,a]),x.useEffect(()=>{l&&c(null)},[l]),l}function Kk(i){let{animateLayoutChanges:e=Bk,attributes:t,disabled:r,data:a,getNewIndex:l=zk,id:c,strategy:f,resizeObserverConfig:m,transition:g=qk}=i;const{items:_,containerId:E,activeIndex:b,disabled:w,disableTransforms:P,sortedRects:D,overIndex:M,useDragOverlay:U,strategy:G}=x.useContext(W1),H=Yk(r,w),re=_.indexOf(c),se=x.useMemo(()=>({sortable:{containerId:E,index:re,items:_},...a}),[E,a,re,_]),W=x.useMemo(()=>_.slice(_.indexOf(c)),[_,c]),{rect:R,node:S,isOver:N,setNodeRef:O}=$1({id:c,data:se,disabled:H.droppable,resizeObserverConfig:{updateMeasurementsFor:W,...m}}),{active:k,activatorEvent:z,activeNodeRect:V,attributes:we,setNodeRef:Ne,listeners:X,isDragging:ue,over:_e,setActivatorNodeRef:Ce,transform:ke}=_k({id:c,data:se,attributes:{...Hk,...t},disabled:H.draggable}),j=n4(O,Ne),te=!!k,$=te&&!P&&Bf(b)&&Bf(M),ce=!U&&ue,ge=ce&&$?ke:null,Oe=$?ge??(f??G)({rects:D,activeNodeRect:V,activeIndex:b,overIndex:M,index:re}):null,Ke=Bf(b)&&Bf(M)?l({id:c,items:_,activeIndex:b,overIndex:M}):re,Le=k==null?void 0:k.id,he=x.useRef({activeId:Le,items:_,newIndex:Ke,containerId:E}),De=_!==he.current.items,Ve=e({active:k,containerId:E,isDragging:ue,isSorting:te,id:c,index:re,items:_,newIndex:he.current.newIndex,previousItems:he.current.items,previousContainerId:he.current.containerId,transition:g,wasDragging:he.current.activeId!=null}),nt=Gk({disabled:!Ve,index:re,node:S,rect:R});return x.useEffect(()=>{te&&he.current.newIndex!==Ke&&(he.current.newIndex=Ke),E!==he.current.containerId&&(he.current.containerId=E),_!==he.current.items&&(he.current.items=_)},[te,Ke,E,_]),x.useEffect(()=>{if(Le===he.current.activeId)return;if(Le!=null&&he.current.activeId==null){he.current.activeId=Le;return}const Se=setTimeout(()=>{he.current.activeId=Le},50);return()=>clearTimeout(Se)},[Le]),{active:k,activeIndex:b,attributes:we,data:se,rect:R,index:re,newIndex:Ke,items:_,isOver:N,isSorting:te,isDragging:ue,listeners:X,node:S,overIndex:M,over:_e,setNodeRef:j,setActivatorNodeRef:Ce,setDroppableNodeRef:O,setDraggableNodeRef:Ne,transform:nt??Oe,transition:oe()};function oe(){if(nt||De&&he.current.newIndex===re)return Fk;if(!(ce&&!pm(z)||!g)&&(te||Ve))return aa.Transition.toString({...g,property:Z1})}}function Yk(i,e){var t,r;return typeof i=="boolean"?{draggable:i,droppable:!1}:{draggable:(t=i==null?void 0:i.draggable)!=null?t:e.draggable,droppable:(r=i==null?void 0:i.droppable)!=null?r:e.droppable}}ut.Down,ut.Right,ut.Up,ut.Left;const Qk=["","","","","","","","","","","","","","","",""];function $k({value:i,onChange:e}){const[t,r]=x.useState(!1),a=x.useRef(null);return x.useEffect(()=>{if(!t)return;const l=c=>{a.current&&!a.current.contains(c.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[t]),I.jsxs("div",{className:"pipeline-emoji-picker",ref:a,children:[I.jsx("button",{className:"pipeline-emoji-btn",onClick:()=>r(!t),children:i||""}),t&&I.jsx("div",{className:"pipeline-emoji-grid",children:Qk.map(l=>I.jsx("button",{className:"pipeline-emoji-option",onClick:()=>{e(l),r(!1)},children:l},l))})]})}function Dy({value:i,onChange:e,className:t,placeholder:r,singleClick:a}){const[l,c]=x.useState(!1),[f,m]=x.useState(i),g=x.useRef(null);x.useEffect(()=>{l&&g.current&&g.current.focus()},[l]);const _=()=>{c(!1),f.trim()!==i&&e(f.trim())},E=w=>{w.stopPropagation(),m(i),c(!0)};if(l)return I.jsx("input",{ref:g,className:`pipeline-inline-input ${t||""}`,value:f,placeholder:r,onClick:w=>w.stopPropagation(),onChange:w=>m(w.target.value),onBlur:_,onKeyDown:w=>{w.key==="Enter"&&_(),w.key==="Escape"&&(m(i),c(!1))}});const b=a?{onClick:E}:{onDoubleClick:E};return I.jsx("span",{className:`pipeline-inline-text ${t||""} ${i?"":"pipeline-placeholder"}`,...b,children:i||r})}function Xk({listeners:i,attributes:e}){return I.jsx("button",{className:"pipeline-item-drag-handle",...i,...e,children:""})}function Jk({item:i,sectionId:e,onUpdate:t,onDelete:r}){const{attributes:a,listeners:l,setNodeRef:c,transform:f,transition:m,isDragging:g}=Kk({id:i.id}),_={transform:aa.Transform.toString(f),transition:m};return I.jsxs("div",{ref:c,style:_,className:`pipeline-item${g?" dragging":""}`,children:[I.jsx(Xk,{listeners:l,attributes:a}),I.jsx($k,{value:i.icon,onChange:E=>t(e,i.id,{icon:E})}),I.jsxs("div",{className:"pipeline-item-content",children:[I.jsx(Dy,{value:i.title,onChange:E=>t(e,i.id,{title:E}),className:"pipeline-item-title",placeholder:"Item title"}),I.jsx(Dy,{value:i.description,onChange:E=>t(e,i.id,{description:E}),className:"pipeline-item-desc",placeholder:"Description"})]}),I.jsx("button",{className:"pipeline-item-delete",onClick:()=>r(e,i.id),children:""})]})}function Wk({item:i}){return I.jsxs("div",{className:"pipeline-item pipeline-item-overlay",children:[I.jsx("span",{className:"pipeline-item-drag-handle",children:""}),I.jsx("div",{className:"pipeline-emoji-picker",children:I.jsx("button",{className:"pipeline-emoji-btn",children:i.icon||""})}),I.jsxs("div",{className:"pipeline-item-content",children:[I.jsx("span",{className:"pipeline-inline-text pipeline-item-title",children:i.title||"Item title"}),I.jsx("span",{className:"pipeline-inline-text pipeline-item-desc",children:i.description||"Description"})]})]})}function Zk({sectionId:i,children:e}){const{setNodeRef:t}=$1({id:`section-${i}`});return I.jsx("div",{ref:t,children:e})}function e6({sections:i,addSection:e,updateSection:t,deleteSection:r,toggleCollapse:a,addItem:l,updateItem:c,deleteItem:f,moveItem:m,reorderItems:g}){var se;const[_,E]=x.useState(null),[b,w]=x.useState(null),P=g4(OS(Y_,{activationConstraint:{distance:5}}),OS(q1,{activationConstraint:{delay:200,tolerance:5}})),D=x.useMemo(()=>{const W={};for(const R of i)for(const S of R.items||[])W[S.id]={item:S,sectionId:R.id};return W},[i]),M=x.useCallback(W=>{var R;return typeof W=="string"&&W.startsWith("section-")?W.replace("section-",""):((R=D[W])==null?void 0:R.sectionId)||null},[D]),U=x.useCallback(W=>{w(W.active.id)},[]),G=x.useCallback(W=>{const{active:R,over:S}=W;if(!S)return;const N=M(R.id),O=M(S.id);if(!N||!O||N===O)return;const k=i.find(ue=>ue.id===N),z=i.find(ue=>ue.id===O);if(!k||!z)return;const V=k.items||[],we=z.items||[];V.findIndex(ue=>ue.id===R.id);const Ne=we.findIndex(ue=>ue.id===S.id),X=Ne>=0?Ne:we.length;m(N,O,R.id,X)},[M,i,m]),H=x.useCallback(W=>{const{active:R,over:S}=W;if(w(null),!S)return;const N=M(R.id),O=M(S.id);if(!(!N||!O)&&N===O){const k=i.find(Ne=>Ne.id===N);if(!k)return;const z=k.items||[],V=z.findIndex(Ne=>Ne.id===R.id),we=z.findIndex(Ne=>Ne.id===S.id);V!==we&&V>=0&&we>=0&&g(N,$_(z,V,we))}},[M,i,g]),re=b?(se=D[b])==null?void 0:se.item:null;return I.jsxs(pk,{sensors:P,collisionDetection:b4,onDragStart:U,onDragOver:G,onDragEnd:H,children:[I.jsxs("div",{className:"pipeline-sections",children:[i.map(W=>{const R=W.items||[],S=R.map(N=>N.id);return I.jsxs("div",{className:"pipeline-section",children:[I.jsxs("div",{className:"pipeline-section-header",onClick:()=>a(W.id),children:[I.jsx("span",{className:"pipeline-collapse-btn",children:W.collapsed?"":""}),I.jsx(Dy,{value:W.title,onChange:N=>t(W.id,{title:N}),className:"pipeline-section-title",placeholder:"Section title",singleClick:!0}),I.jsx("button",{className:"pipeline-section-delete",onClick:N=>{N.stopPropagation(),E(W.id)},children:""})]}),!W.collapsed&&I.jsx(Zk,{sectionId:W.id,children:I.jsx(jk,{items:S,strategy:Lk,children:I.jsxs("div",{className:"pipeline-section-body",children:[R.map(N=>I.jsx(Jk,{item:N,sectionId:W.id,onUpdate:c,onDelete:f},N.id)),I.jsx("button",{className:"pipeline-add-item",onClick:()=>l(W.id,{}),children:"+ Add"})]})})})]},W.id)}),I.jsx("button",{className:"pipeline-add-section",onClick:()=>e("New Section"),children:"+ New Section"}),_&&I.jsx(R1,{title:"Delete Section",message:"This will delete the section and all its items.",onConfirm:()=>{r(_),E(null)},onClose:()=>E(null)})]}),I.jsx(Ok,{children:re?I.jsx(Wk,{item:re}):null})]})}const xy="prayerTimesCache";function eR(i,e,t){return`${i}|${e}|${t}`}function Bg(i,e,t){try{const r=localStorage.getItem(xy);return r&&JSON.parse(r)[eR(i,e,t)]||null}catch{return null}}function t6(i,e,t,r){try{const a=localStorage.getItem(xy),l=a?JSON.parse(a):{};l[eR(i,e,t)]=r;const c=Object.keys(l);c.length>30&&(c.sort(),delete l[c[0]]),localStorage.setItem(xy,JSON.stringify(l))}catch{}}function n6({date:i,city:e="Lyon",country:t="France",lat:r,lng:a}={}){const l=i||Ac(),[c,f]=x.useState(()=>Bg(l,e,t)),[m,g]=x.useState(!Bg(l,e,t)),[_,E]=x.useState(null);return x.useEffect(()=>{const b=Bg(l,e,t);if(b){f(b),g(!1);return}let w=!1;g(!0);async function P(){try{const D=vP(l);let M;if(r!=null&&a!=null)M=`https://api.aladhan.com/v1/timings/${D}?latitude=${r}&longitude=${a}`;else{const H=`${e},${t}`;M=`https://api.aladhan.com/v1/timingsByAddress/${D}?address=${encodeURIComponent(H)}`}const G=await(await fetch(M)).json();if(!w&&G.data){const H=G.data.timings,re={Fajr:H.Fajr,Dhuhr:H.Dhuhr,Asr:H.Asr,Maghrib:H.Maghrib,Isha:H.Isha};f(re),t6(l,e,t,re)}}catch(D){w||E(D.message)}finally{w||g(!1)}}return P(),()=>{w=!0}},[l,e,t,r,a]),{times:c,loading:m,error:_}}const i6=["pre-fajr","fajr-dhuhr","dhuhr-asr","asr-maghrib","maghrib-isha","post-isha"],r6={"pre-fajr":"Pre-Fajr","fajr-dhuhr":"Fajr  Dhuhr","dhuhr-asr":"Dhuhr  Asr","asr-maghrib":"Asr  Maghrib","maghrib-isha":"Maghrib  Isha","post-isha":"Post-Isha"};function rc(i){const[e,t]=i.split(":").map(Number);return e*60+t}function s6(i){return i=Math.round(i),`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function a6(i){if(!i)return null;const e=rc(i.Fajr),t=rc(i.Dhuhr),r=rc(i.Asr),a=rc(i.Maghrib),l=rc(i.Isha);return{"pre-fajr":{start:"00:00",end:i.Fajr,startMin:0,endMin:e},"fajr-dhuhr":{start:i.Fajr,end:i.Dhuhr,startMin:e,endMin:t},"dhuhr-asr":{start:i.Dhuhr,end:i.Asr,startMin:t,endMin:r},"asr-maghrib":{start:i.Asr,end:i.Maghrib,startMin:r,endMin:a},"maghrib-isha":{start:i.Maghrib,end:i.Isha,startMin:a,endMin:l},"post-isha":{start:i.Isha,end:"23:59",startMin:l,endMin:1439}}}function o6(i,e){if(!i.segment||!e||!e[i.segment])return i.time||"08:00";const r=e[i.segment].startMin+(i.offsetMinutes||0);return s6(Math.max(0,Math.min(1435,r)))}const sc=25;function l6(i){return i?[{id:"prayer-fajr",time:i.Fajr,activity:"Fajr",type:"prayer",icon:"",duration:sc,isPrayer:!0},{id:"prayer-dhuhr",time:i.Dhuhr,activity:"Dhuhr",type:"prayer",icon:"",duration:sc,isPrayer:!0},{id:"prayer-asr",time:i.Asr,activity:"Asr",type:"prayer",icon:"",duration:sc,isPrayer:!0},{id:"prayer-maghrib",time:i.Maghrib,activity:"Maghrib",type:"prayer",icon:"",duration:sc,isPrayer:!0},{id:"prayer-isha",time:i.Isha,activity:"Isha",type:"prayer",icon:"",duration:sc,isPrayer:!0}]:[]}const u6=60;function c6(i){const[e,t]=i.split(":").map(Number);return e*60+t}function h6(i){return i=Math.round(i),`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function f6(i,e=5){return Math.max(0,Math.min(1435,Math.round(i/e)*e))}function d6(i,{hourHeight:e=0,minBlockH:t=0}={}){if(!i.length)return[];const r=e>0&&t>0?t/e*60:0,a=i.map(E=>{const b=c6(E.time),w=E.duration||u6,P=r?b+Math.max(w,r):b+w;return{...E,startMin:b,endMin:b+w,visualEnd:P}});a.sort((E,b)=>E.startMin-b.startMin||b.endMin-b.startMin-(E.endMin-E.startMin));const l=[],c=[];for(const E of a){let b=-1;for(let w=0;w<l.length;w++)if(l[w]<=E.startMin){b=w;break}b===-1&&(b=l.length,l.push(0)),l[b]=E.visualEnd,c.push({...E,col:b})}const f=[];let m=[],g=0;for(const E of c)m.length===0||E.startMin<g?(m.push(E),g=Math.max(g,E.visualEnd)):(f.push(m),m=[E],g=E.visualEnd);m.length&&f.push(m);const _=[];for(const E of f){const b=Math.max(...E.map(w=>w.col))+1;for(const w of E)_.push({...w,totalCols:b})}return _}const _r=60,KS=24,qg=60,m6=Array.from({length:24},(i,e)=>e),p6=["rgba(34, 139, 34, 0.03)","rgba(34, 139, 34, 0.06)"],YS={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},g6=["M","T","W","T","F","S","S"];function y6({date:i,plan:e,location:t,onOpenLocation:r,onUpdateBlocks:a,onMonth:l,onSelectDate:c,customTypes:f=[],customTypeColors:m={},onAddCustomType:g,onRemoveCustomType:_,pipelineSections:E=[],onAddSection:b,onUpdateSection:w,onDeleteSection:P,onToggleCollapse:D,onAddItem:M,onUpdateItem:U,onDeleteItem:G,onMoveItem:H,onReorderItems:re}){var Ve,nt;const[se,W]=x.useState(null),[R,S]=x.useState(null),N=x.useRef(null),O=AS(z_(i)),k=i===Ac(),z=AS(new Date),{times:V}=n6({date:i,city:t==null?void 0:t.city,country:t==null?void 0:t.country,lat:t==null?void 0:t.lat,lng:t==null?void 0:t.lng}),we=x.useMemo(()=>a6(V),[V]),Ne=x.useMemo(()=>l6(V),[V]),X=((nt=(Ve=e==null?void 0:e.routine)==null?void 0:Ve[O])==null?void 0:nt.blocks)||[],ue=x.useMemo(()=>X.map(oe=>oe.segment&&we?{...oe,time:o6(oe,we)}:oe),[X,we]),{userBlocks:_e,positionedPrayers:Ce}=x.useMemo(()=>{const oe=ue.map(He=>({...He,duration:He.duration||qg})),Se=[...Ne,...oe],Me=d6(Se,{hourHeight:_r,minBlockH:KS}),rt=[],ht=[];for(const He of Me){const et={...He,top:He.startMin/60*_r,height:Math.max(He.duration/60*_r,KS)};He.isPrayer?ht.push(et):rt.push(et)}return{userBlocks:rt,positionedPrayers:ht}},[ue,Ne]),ke=x.useMemo(()=>{const oe={};for(const Se of ue){const Me=Se.activity||"(Untitled)";oe[Me]||(oe[Me]={activity:Me,icon:Se.icon,type:Se.type,total:0}),oe[Me].total+=Se.duration||qg}return Object.values(oe).sort((Se,Me)=>Me.total-Se.total)},[ue]),j=x.useMemo(()=>we?i6.map((oe,Se)=>{const Me=we[oe],rt=Me.startMin/60*_r,ht=(Me.endMin-Me.startMin)/60*_r;return{id:oe,top:rt,height:ht,color:p6[Se%2],label:r6[oe]}}):[],[we]),te=oe=>{if(!e||oe.target.closest(".timeline-block")||oe.target.closest(".segment-label"))return;const Se=N.current.getBoundingClientRect(),Me=oe.clientY-Se.top,rt=f6(Me/_r*60),ht=h6(rt),He=crypto.randomUUID(),et={id:He,time:ht,activity:"(New)",type:"neutral",icon:"",duration:qg,segment:null,offsetMinutes:0,tasks:[]};a(O,[...X,et]),S(He)},$=(oe,Se)=>{const Me=X.map(rt=>rt.id===oe?{...rt,time:Se,segment:null,offsetMinutes:0}:rt);a(O,Me)},ce=(oe,Se,Me)=>{const rt=X.map(ht=>ht.id===oe?{...ht,time:Se,duration:Me,segment:null,offsetMinutes:0}:ht);a(O,rt)},ge=oe=>{let Se=X.map(Me=>Me.id===oe.id?oe:Me);X.find(Me=>Me.id===oe.id)||Se.push(oe),a(O,Se),W(null),S(null)},ye=oe=>{a(O,X.filter(Se=>Se.id!==oe)),W(null),S(null)},Oe=(oe,Se)=>{const Me=X.map(rt=>rt.id!==oe?rt:{...rt,tasks:(rt.tasks||[]).map(ht=>ht.id===Se?{...ht,done:!ht.done}:ht)});a(O,Me)},Ke=()=>{R&&(a(O,X.filter(oe=>oe.id!==R)),S(null)),W(null)},Le=new Date,De=(Le.getHours()*60+Le.getMinutes())/60*_r;return I.jsxs("div",{className:"daily-view",children:[I.jsxs("div",{className:"daily-header",children:[I.jsx("button",{className:"daily-back",onClick:l,children:" Month"}),I.jsxs("div",{className:"daily-date-info",children:[I.jsx("span",{className:"daily-day-name",children:YS[O]}),I.jsxs("span",{className:"daily-date-str",children:[Nd(i),k?" (today)":""]})]}),e&&I.jsx("span",{className:"daily-plan-badge",style:{borderColor:e.color,color:e.color},children:e.label})]}),I.jsx("div",{className:"day-selector",children:j_.map((oe,Se)=>I.jsx("button",{className:`day-btn${oe===O?" active":""}${oe===z?" today":""}`,onClick:()=>c(EP(i,oe)),children:g6[Se]},oe))}),V&&I.jsxs("div",{className:"prayer-banner",children:[I.jsxs("div",{className:"prayer-banner-title",onClick:r,style:{cursor:"pointer"},children:["PRAYER TIMES",t!=null&&t.city?`  ${t.city.toUpperCase()}`:""]}),I.jsx("div",{className:"prayer-times-row",children:Object.entries(V).map(([oe,Se])=>I.jsxs("div",{className:"prayer-time-item",children:[I.jsx("span",{className:"prayer-name",children:oe}),I.jsx("span",{className:"prayer-time",children:Se})]},oe))})]}),ke.length>0&&I.jsx("div",{className:"activity-summary",children:ke.map(oe=>{const Se=es[oe.type]||m[oe.type]||es.neutral,Me=Math.floor(oe.total/60),rt=oe.total%60,ht=Me>0?rt>0?`${Me}h${rt}m`:`${Me}h`:`${rt}m`;return I.jsxs("div",{className:"activity-summary-item",style:{borderColor:Se.border},children:[I.jsx("span",{className:"activity-summary-icon",children:oe.icon}),I.jsx("span",{className:"activity-summary-name",children:oe.activity}),I.jsx("span",{className:"activity-summary-dur",style:{color:Se.border},children:ht})]},oe.activity)})}),!e&&I.jsxs("div",{className:"daily-empty",children:["No plan covers this date. Create a plan that includes ",Nd(i),"."]}),e&&X.length===0&&I.jsxs("div",{className:"daily-hint",children:["Tap the timeline to add your first block for ",YS[O],"."]}),I.jsx("div",{className:"timeline-scroll",children:I.jsxs("div",{className:"timeline",ref:N,style:{height:24*_r},onClick:te,children:[j.map(oe=>I.jsx("div",{className:"segment-band",style:{top:oe.top,height:oe.height,background:oe.color},children:I.jsx("span",{className:"segment-label",children:oe.label})},oe.id)),m6.map(oe=>I.jsxs("div",{className:"hour-row",style:{top:oe*_r,height:_r},children:[I.jsx("span",{className:"hour-label",children:yP(oe*60)}),I.jsx("div",{className:"hour-line"})]},oe)),k&&I.jsx("div",{className:"now-line",style:{top:De},children:I.jsx("div",{className:"now-dot"})}),Ce.map(oe=>I.jsx(xS,{block:oe,top:oe.top,height:oe.height,col:oe.col,totalCols:oe.totalCols,isPrayer:!0,onEdit:()=>{},onDelete:()=>{},onTimeChange:()=>{},onResize:()=>{}},oe.id)),_e.map(oe=>I.jsx(xS,{block:oe,top:oe.top,height:oe.height,col:oe.col,totalCols:oe.totalCols,isNew:oe.id===R,extraTypeColors:m,onEdit:Se=>{S(null),W(Se)},onDelete:ye,onTimeChange:$,onResize:ce,onToggleTask:Oe},oe.id))]})}),I.jsx(e6,{sections:E,addSection:b,updateSection:w,deleteSection:P,toggleCollapse:D,addItem:M,updateItem:U,deleteItem:G,moveItem:H,reorderItems:re}),se&&I.jsx(t4,{block:se,segments:we,customTypes:f,customTypeColors:m,onAddCustomType:g,onRemoveCustomType:_,onSave:ge,onDelete:ye,onClose:Ke},se.id+se.time+(se.duration||0))]})}function _6(i){const e=JSON.parse(i);if(Array.isArray(e))return{plans:e.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:[],pipelines:[]};if(e&&Array.isArray(e.plans))return{plans:e.plans.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:Array.isArray(e.customTypes)?e.customTypes:[],pipelines:Array.isArray(e.pipelines)?e.pipelines:[]};throw new Error("Unrecognized format")}function v6(i,e,t,r=[]){const a=new Set(e.map(f=>f.id)),l=new Set([...E1,...t.map(f=>f.key)]),c=new Set(r.map(f=>f.id));return{newPlans:i.plans.filter(f=>!a.has(f.id)),skippedPlans:i.plans.filter(f=>a.has(f.id)),newTypes:i.customTypes.filter(f=>!l.has(f.key)),skippedTypes:i.customTypes.filter(f=>l.has(f.key)),newPipelines:(i.pipelines||[]).filter(f=>!c.has(f.id)),skippedPipelines:(i.pipelines||[]).filter(f=>c.has(f.id))}}function E6({file:i,existingPlans:e,existingCustomTypes:t,existingPipelines:r=[],onConfirm:a,onClose:l}){const[c,f]=x.useState(null),[m,g]=x.useState(null),[_,E]=x.useState(null),[b,w]=x.useState(new Set),[P,D]=x.useState(new Set),[M,U]=x.useState(new Set);x.useState(()=>{const S=new FileReader;S.onload=N=>{try{const O=_6(N.target.result);if(O.plans.length===0&&O.customTypes.length===0){f("File contains no data to import.");return}const k=v6(O,e,t,r);g(O),E(k),w(new Set(k.newPlans.map(z=>z.id))),D(new Set(k.newTypes.map(z=>z.key))),U(new Set(k.newPipelines.map(z=>z.id)))}catch(O){f("Invalid file: "+O.message)}},S.readAsText(i)});const G=x.useCallback(S=>{w(N=>{const O=new Set(N);return O.has(S)?O.delete(S):O.add(S),O})},[]),H=x.useCallback(S=>{D(N=>{const O=new Set(N);return O.has(S)?O.delete(S):O.add(S),O})},[]),re=x.useCallback(S=>{U(N=>{const O=new Set(N);return O.has(S)?O.delete(S):O.add(S),O})},[]),se=x.useCallback(()=>{if(!_)return;const S=_.newPlans.filter(k=>b.has(k.id)),N=_.newTypes.filter(k=>P.has(k.key)),O=_.newPipelines.filter(k=>M.has(k.id));a(S,N,O)},[_,b,P,M,a]),W=b.size+P.size+M.size,R=_&&_.newPlans.length===0&&_.newTypes.length===0&&_.newPipelines.length===0;return I.jsx("div",{className:"modal-overlay",onClick:l,children:I.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Import Data"}),c&&I.jsxs(I.Fragment,{children:[I.jsx("p",{style:{color:"#ef4444",fontSize:13,margin:"0 0 16px"},children:c}),I.jsx("div",{className:"modal-actions",children:I.jsx("button",{className:"btn-secondary",onClick:l,children:"Close"})})]}),!c&&!_&&I.jsx("p",{style:{color:"#94a3b8",fontSize:13},children:"Reading file..."}),_&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),_.newPlans.length>0&&I.jsx("div",{className:"import-items",children:_.newPlans.map(S=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:b.has(S.id),onChange:()=>G(S.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:S.label}),S.startDate&&I.jsxs("span",{className:"import-item-date",children:[S.startDate,"  ",S.endDate]})]},S.id))}),_.skippedPlans.length>0&&I.jsx("div",{className:"import-items",children:_.skippedPlans.map(S=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:S.label})]},S.id))}),m.plans.length===0&&I.jsx("p",{className:"import-empty",children:"No plans in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),_.newTypes.length>0&&I.jsx("div",{className:"import-items",children:_.newTypes.map(S=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:P.has(S.key),onChange:()=>H(S.key)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:S.name})]},S.key))}),_.skippedTypes.length>0&&I.jsx("div",{className:"import-items",children:_.skippedTypes.map(S=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:S.name||S.key})]},S.key))}),m.customTypes.length===0&&I.jsx("p",{className:"import-empty",children:"No custom types in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),_.newPipelines.length>0&&I.jsx("div",{className:"import-items",children:_.newPipelines.map(S=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:M.has(S.id),onChange:()=>re(S.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:S.title}),I.jsxs("span",{className:"import-item-date",children:[(S.items||[]).length," items"]})]},S.id))}),_.skippedPipelines.length>0&&I.jsx("div",{className:"import-items",children:_.skippedPipelines.map(S=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:S.title})]},S.id))}),(m.pipelines||[]).length===0&&I.jsx("p",{className:"import-empty",children:"No pipeline sections in file"})]}),R&&I.jsx("p",{style:{color:"#f59e0b",fontSize:13,marginTop:8},children:"Everything already exists. Nothing to import."}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:l,children:"Cancel"}),!R&&I.jsxs("button",{className:"btn-primary",onClick:se,disabled:W===0,children:["Import",W>0?` ${W} item${W!==1?"s":""}`:""]})]})]})]})})}function T6({plans:i,customTypes:e,pipelineSections:t=[],onClose:r}){const[a,l]=x.useState(()=>new Set(i.map(D=>D.id))),[c,f]=x.useState(()=>new Set(e.map(D=>D.key))),[m,g]=x.useState(()=>new Set(t.map(D=>D.id))),_=x.useCallback(D=>{l(M=>{const U=new Set(M);return U.has(D)?U.delete(D):U.add(D),U})},[]),E=x.useCallback(D=>{f(M=>{const U=new Set(M);return U.has(D)?U.delete(D):U.add(D),U})},[]),b=x.useCallback(D=>{g(M=>{const U=new Set(M);return U.has(D)?U.delete(D):U.add(D),U})},[]),w=a.size+c.size+m.size,P=x.useCallback(()=>{const D=i.filter(W=>a.has(W.id)),M=e.filter(W=>c.has(W.key)).map(W=>({key:W.key,name:W.name})),U=t.filter(W=>m.has(W.id)),G={version:2,plans:D,customTypes:M,pipelines:U},H=new Blob([JSON.stringify(G,null,2)],{type:"application/json"}),re=URL.createObjectURL(H),se=document.createElement("a");se.href=re,se.download="entrypoint-v2-plans.json",se.click(),URL.revokeObjectURL(re),r()},[i,e,t,a,c,m,r]);return I.jsx("div",{className:"modal-overlay",onClick:r,children:I.jsxs("div",{className:"modal",onClick:D=>D.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Export Data"}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),i.length>0?I.jsx("div",{className:"import-items",children:i.map(D=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:a.has(D.id),onChange:()=>_(D.id)}),I.jsx("span",{className:"import-item-label",children:D.label}),D.startDate&&I.jsxs("span",{className:"import-item-date",children:[D.startDate,"  ",D.endDate]})]},D.id))}):I.jsx("p",{className:"import-empty",children:"No plans to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),e.length>0?I.jsx("div",{className:"import-items",children:e.map(D=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:c.has(D.key),onChange:()=>E(D.key)}),I.jsx("span",{className:"import-item-label",children:D.name})]},D.key))}):I.jsx("p",{className:"import-empty",children:"No custom types to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),t.length>0?I.jsx("div",{className:"import-items",children:t.map(D=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:m.has(D.id),onChange:()=>b(D.id)}),I.jsx("span",{className:"import-item-label",children:D.title}),I.jsxs("span",{className:"import-item-date",children:[(D.items||[]).length," items"]})]},D.id))}):I.jsx("p",{className:"import-empty",children:"No pipeline sections to export"})]}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:r,children:"Cancel"}),I.jsxs("button",{className:"btn-primary",onClick:P,disabled:w===0,children:["Export",w>0?` ${w} item${w!==1?"s":""}`:""]})]})]})})}function b6({onSave:i,onClose:e}){const[t,r]=x.useState(""),[a,l]=x.useState("");x.useEffect(()=>{const m=g=>{g.key==="Escape"&&e&&e()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[e]);const c=()=>{const m=t.trim(),g=a.trim();!m||!g||i({city:m,country:g})},f=m=>{m.key==="Enter"&&c()};return I.jsx("div",{className:"modal-overlay",onClick:e||void 0,children:I.jsxs("div",{className:"modal",onClick:m=>m.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:"Set Your Location"}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 16px",lineHeight:1.5},children:"Used to calculate prayer times."}),I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[I.jsx("input",{className:"modal-input",placeholder:"City (e.g. Lyon)",value:t,onChange:m=>r(m.target.value),onKeyDown:f,autoFocus:!0}),I.jsx("input",{className:"modal-input",placeholder:"Country (e.g. France)",value:a,onChange:m=>l(m.target.value),onKeyDown:f})]}),I.jsxs("div",{className:"modal-actions",children:[e&&I.jsx("button",{className:"btn-secondary",onClick:e,children:"Cancel"}),I.jsx("button",{className:"btn-primary",onClick:c,disabled:!t.trim()||!a.trim(),children:"Save"})]})]})})}function QS(){const i=U_(),e=(i==null?void 0:i.user)||null,t=(i==null?void 0:i.logout)||null,{plans:r,loading:a,activePlan:l,activePlanId:c,setActivePlanId:f,createPlan:m,updatePlan:g,deletePlan:_,updateRoutineBlocks:E,getPlanForDate:b,mergePlans:w}=OP((e==null?void 0:e.uid)||null),{selectedDate:P,setSelectedDate:D,today:M,viewYear:U,viewMonth:G,prevMonth:H,nextMonth:re,setViewYearMonth:se}=jP(),{customTypes:W,customTypeColors:R,addCustomType:S,removeCustomType:N,mergeCustomTypes:O}=GP(),{location:k,setLocation:z,hasLocation:V,geoFailed:we}=QP(),[Ne,X]=x.useState(!1),{sections:ue,addSection:_e,updateSection:Ce,deleteSection:ke,reorderSections:j,toggleCollapse:te,addItem:$,updateItem:ce,deleteItem:ge,moveItem:ye,reorderItems:Oe,mergeSections:Ke}=UP((e==null?void 0:e.uid)||null),Le=x.useRef(null),[he,De]=x.useState(null),[Ve,nt]=x.useState(!1),[oe,Se]=x.useState("daily"),[Me,rt]=x.useState(null),[ht,He]=x.useState(null),[et,Cn]=x.useState(!1),Wi=x.useCallback((Ue,St,on)=>{Ue.length>0&&w(Ue),St.length>0&&O(St),on&&on.length>0&&Ke(on),He(null)},[w,O,Ke]),ki=x.useCallback(Ue=>{if(!Ue.startDate)return;f(Ue.id),D(Ue.startDate);const St=new Date(Ue.startDate+"T00:00:00");se(St.getFullYear(),St.getMonth()),rt(Ue.startDate),setTimeout(()=>rt(null),1500)},[se,D,f]),Yt=x.useCallback(Ue=>{const St=r.find(on=>on.id===Ue);St!=null&&St.startDate?ki(St):f(Ue)},[r,ki,f]),vi=x.useCallback(Ue=>{D(Ue);const St=b(Ue);St&&f(St.id),Se("daily")},[D,b,f]),Rr=x.useCallback(Ue=>{D(Ue);const St=b(Ue);St&&f(St.id)},[D,b,f]),Kn=x.useCallback(()=>{Se("calendar")},[]),Qt=b(P),Yn=l&&(Qt==null?void 0:Qt.id)===l.id?l:Qt,Cr=x.useCallback((Ue,St)=>{Yn&&E(Yn.id,Ue,St)},[Yn,E]);return a?I.jsx("div",{className:"loading",children:"loading plans..."}):I.jsxs("div",{className:"app",children:[I.jsxs("header",{className:"app-header",children:[I.jsxs("div",{children:[I.jsx("div",{className:"header-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"header-title",children:"Lock-In"}),I.jsx("div",{className:"header-quote",children:'"While enjoying every single day on the way."'})]}),I.jsxs("div",{className:"header-actions",children:[I.jsx("button",{className:"header-btn",onClick:()=>Cn(!0),title:"Export",children:"Export"}),I.jsx("button",{className:"header-btn",onClick:()=>{var Ue;return(Ue=Le.current)==null?void 0:Ue.click()},title:"Import",children:"Import"}),I.jsx("input",{ref:Le,type:"file",accept:".json",hidden:!0,onChange:Ue=>{Ue.target.files[0]&&He(Ue.target.files[0]),Ue.target.value=""}}),t&&I.jsx("button",{className:"logout-btn",onClick:t,children:"Logout"})]})]}),I.jsx($P,{plans:r,activePlanId:l==null?void 0:l.id,onSelect:Yt,onCreate:()=>nt(!0),onEdit:De,onDelete:_}),oe==="calendar"?I.jsx(ZP,{viewYear:U,viewMonth:G,selectedDate:P,today:M,plans:r,highlightDate:Me,onPrevMonth:H,onNextMonth:re,onGoToday:()=>vi(M),onSelectDate:vi,onPlanClick:ki}):I.jsx(y6,{date:P,plan:Yn,location:k,onOpenLocation:()=>X(!0),onUpdateBlocks:Cr,onSelectDate:Rr,onMonth:Kn,customTypes:W,customTypeColors:R,onAddCustomType:S,onRemoveCustomType:N,pipelineSections:ue,onAddSection:_e,onUpdateSection:Ce,onDeleteSection:ke,onToggleCollapse:te,onAddItem:$,onUpdateItem:ce,onDeleteItem:ge,onMoveItem:ye,onReorderItems:Oe}),Ve&&I.jsx(CS,{plan:null,plans:r,onSave:Ue=>{m(Ue),nt(!1)},onClose:()=>nt(!1)}),he&&I.jsx(CS,{plan:he,plans:r,onSave:Ue=>{g(he.id,Ue),De(null)},onClose:()=>De(null)}),et&&I.jsx(T6,{plans:r,customTypes:W,pipelineSections:ue,onClose:()=>Cn(!1)}),ht&&I.jsx(E6,{file:ht,existingPlans:r,existingCustomTypes:W,existingPipelines:ue,onConfirm:Wi,onClose:()=>He(null)}),(!V&&we||Ne)&&I.jsx(b6,{onSave:Ue=>{z(Ue),X(!1)},onClose:V?()=>X(!1):void 0})]})}zC.createRoot(document.getElementById("root")).render(I.jsx(x.StrictMode,{children:Ul?I.jsx(fP,{children:I.jsx(mP,{children:I.jsx(QS,{})})}):I.jsx(QS,{})}));
