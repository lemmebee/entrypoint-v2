(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function NC(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var fg={exports:{}},$u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function MC(){if(pb)return $u;pb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:l}}return $u.Fragment=e,$u.jsx=t,$u.jsxs=t,$u}var gb;function OC(){return gb||(gb=1,fg.exports=MC()),fg.exports}var I=OC(),dg={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function VC(){if(yb)return je;yb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function w(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,M={};function U(z,te,$){this.props=z,this.context=te,this.refs=M,this.updater=$||P}U.prototype.isReactComponent={},U.prototype.setState=function(z,te){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,te,"setState")},U.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function G(){}G.prototype=U.prototype;function H(z,te,$){this.props=z,this.context=te,this.refs=M,this.updater=$||P}var re=H.prototype=new G;re.constructor=H,D(re,U.prototype),re.isPureReactComponent=!0;var se=Array.isArray;function W(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(z,te,$){var ce=$.ref;return{$$typeof:i,type:z,key:te,ref:ce!==void 0?ce:null,props:$}}function O(z,te){return N(z.type,te,z.props)}function k(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function j(z){var te={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function($){return te[$]})}var V=/\/+/g;function we(z,te){return typeof z=="object"&&z!==null&&z.key!=null?j(""+z.key):te.toString(36)}function Me(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(W,W):(z.status="pending",z.then(function(te){z.status==="pending"&&(z.status="fulfilled",z.value=te)},function(te){z.status==="pending"&&(z.status="rejected",z.reason=te)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function X(z,te,$,ce,ge){var ye=typeof z;(ye==="undefined"||ye==="boolean")&&(z=null);var Oe=!1;if(z===null)Oe=!0;else switch(ye){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(z.$$typeof){case i:case e:Oe=!0;break;case _:return Oe=z._init,X(Oe(z._payload),te,$,ce,ge)}}if(Oe)return ge=ge(z),Oe=ce===""?"."+we(z,0):ce,se(ge)?($="",Oe!=null&&($=Oe.replace(V,"$&/")+"/"),X(ge,te,$,"",function(ze){return ze})):ge!=null&&(k(ge)&&(ge=O(ge,$+(ge.key==null||z&&z.key===ge.key?"":(""+ge.key).replace(V,"$&/")+"/")+Oe)),te.push(ge)),1;Oe=0;var Ge=ce===""?".":ce+":";if(se(z))for(var Ve=0;Ve<z.length;Ve++)ce=z[Ve],ye=Ge+we(ce,Ve),Oe+=X(ce,te,$,ye,ge);else if(Ve=w(z),typeof Ve=="function")for(z=Ve.call(z),Ve=0;!(ce=z.next()).done;)ce=ce.value,ye=Ge+we(ce,Ve++),Oe+=X(ce,te,$,ye,ge);else if(ye==="object"){if(typeof z.then=="function")return X(Me(z),te,$,ce,ge);throw te=String(z),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function le(z,te,$){if(z==null)return z;var ce=[],ge=0;return X(z,ce,"","",function(ye){return te.call($,ye,ge++)}),ce}function _e(z){if(z._status===-1){var te=z._result;te=te(),te.then(function($){(z._status===0||z._status===-1)&&(z._status=1,z._result=$)},function($){(z._status===0||z._status===-1)&&(z._status=2,z._result=$)}),z._status===-1&&(z._status=0,z._result=te)}if(z._status===1)return z._result.default;throw z._result}var De=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Ue={map:le,forEach:function(z,te,$){le(z,function(){te.apply(this,arguments)},$)},count:function(z){var te=0;return le(z,function(){te++}),te},toArray:function(z){return le(z,function(te){return te})||[]},only:function(z){if(!k(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return je.Activity=E,je.Children=Ue,je.Component=U,je.Fragment=t,je.Profiler=a,je.PureComponent=H,je.StrictMode=r,je.Suspense=m,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,je.__COMPILER_RUNTIME={__proto__:null,c:function(z){return R.H.useMemoCache(z)}},je.cache=function(z){return function(){return z.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(z,te,$){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ce=D({},z.props),ge=z.key;if(te!=null)for(ye in te.key!==void 0&&(ge=""+te.key),te)!S.call(te,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&te.ref===void 0||(ce[ye]=te[ye]);var ye=arguments.length-2;if(ye===1)ce.children=$;else if(1<ye){for(var Oe=Array(ye),Ge=0;Ge<ye;Ge++)Oe[Ge]=arguments[Ge+2];ce.children=Oe}return N(z.type,ge,ce)},je.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},je.createElement=function(z,te,$){var ce,ge={},ye=null;if(te!=null)for(ce in te.key!==void 0&&(ye=""+te.key),te)S.call(te,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ge[ce]=te[ce]);var Oe=arguments.length-2;if(Oe===1)ge.children=$;else if(1<Oe){for(var Ge=Array(Oe),Ve=0;Ve<Oe;Ve++)Ge[Ve]=arguments[Ve+2];ge.children=Ge}if(z&&z.defaultProps)for(ce in Oe=z.defaultProps,Oe)ge[ce]===void 0&&(ge[ce]=Oe[ce]);return N(z,ye,ge)},je.createRef=function(){return{current:null}},je.forwardRef=function(z){return{$$typeof:f,render:z}},je.isValidElement=k,je.lazy=function(z){return{$$typeof:_,_payload:{_status:-1,_result:z},_init:_e}},je.memo=function(z,te){return{$$typeof:g,type:z,compare:te===void 0?null:te}},je.startTransition=function(z){var te=R.T,$={};R.T=$;try{var ce=z(),ge=R.S;ge!==null&&ge($,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(W,De)}catch(ye){De(ye)}finally{te!==null&&$.types!==null&&(te.types=$.types),R.T=te}},je.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},je.use=function(z){return R.H.use(z)},je.useActionState=function(z,te,$){return R.H.useActionState(z,te,$)},je.useCallback=function(z,te){return R.H.useCallback(z,te)},je.useContext=function(z){return R.H.useContext(z)},je.useDebugValue=function(){},je.useDeferredValue=function(z,te){return R.H.useDeferredValue(z,te)},je.useEffect=function(z,te){return R.H.useEffect(z,te)},je.useEffectEvent=function(z){return R.H.useEffectEvent(z)},je.useId=function(){return R.H.useId()},je.useImperativeHandle=function(z,te,$){return R.H.useImperativeHandle(z,te,$)},je.useInsertionEffect=function(z,te){return R.H.useInsertionEffect(z,te)},je.useLayoutEffect=function(z,te){return R.H.useLayoutEffect(z,te)},je.useMemo=function(z,te){return R.H.useMemo(z,te)},je.useOptimistic=function(z,te){return R.H.useOptimistic(z,te)},je.useReducer=function(z,te,$){return R.H.useReducer(z,te,$)},je.useRef=function(z){return R.H.useRef(z)},je.useState=function(z){return R.H.useState(z)},je.useSyncExternalStore=function(z,te,$){return R.H.useSyncExternalStore(z,te,$)},je.useTransition=function(){return R.H.useTransition()},je.version="19.2.4",je}var _b;function xy(){return _b||(_b=1,dg.exports=VC()),dg.exports}var x=xy();const Ot=NC(x);var mg={exports:{}},Xu={},pg={exports:{}},gg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function PC(){return vb||(vb=1,(function(i){function e(X,le){var _e=X.length;X.push(le);e:for(;0<_e;){var De=_e-1>>>1,Ue=X[De];if(0<a(Ue,le))X[De]=le,X[_e]=Ue,_e=De;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var le=X[0],_e=X.pop();if(_e!==le){X[0]=_e;e:for(var De=0,Ue=X.length,z=Ue>>>1;De<z;){var te=2*(De+1)-1,$=X[te],ce=te+1,ge=X[ce];if(0>a($,_e))ce<Ue&&0>a(ge,$)?(X[De]=ge,X[ce]=_e,De=ce):(X[De]=$,X[te]=_e,De=te);else if(ce<Ue&&0>a(ge,_e))X[De]=ge,X[ce]=_e,De=ce;else break e}}return le}function a(X,le){var _e=X.sortIndex-le.sortIndex;return _e!==0?_e:X.id-le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var m=[],g=[],_=1,E=null,b=3,w=!1,P=!1,D=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function re(X){for(var le=t(g);le!==null;){if(le.callback===null)r(g);else if(le.startTime<=X)r(g),le.sortIndex=le.expirationTime,e(m,le);else break;le=t(g)}}function se(X){if(D=!1,re(X),!P)if(t(m)!==null)P=!0,W||(W=!0,j());else{var le=t(g);le!==null&&Me(se,le.startTime-X)}}var W=!1,R=-1,S=5,N=-1;function O(){return M?!0:!(i.unstable_now()-N<S)}function k(){if(M=!1,W){var X=i.unstable_now();N=X;var le=!0;try{e:{P=!1,D&&(D=!1,G(R),R=-1),w=!0;var _e=b;try{t:{for(re(X),E=t(m);E!==null&&!(E.expirationTime>X&&O());){var De=E.callback;if(typeof De=="function"){E.callback=null,b=E.priorityLevel;var Ue=De(E.expirationTime<=X);if(X=i.unstable_now(),typeof Ue=="function"){E.callback=Ue,re(X),le=!0;break t}E===t(m)&&r(m),re(X)}else r(m);E=t(m)}if(E!==null)le=!0;else{var z=t(g);z!==null&&Me(se,z.startTime-X),le=!1}}break e}finally{E=null,b=_e,w=!1}le=void 0}}finally{le?j():W=!1}}}var j;if(typeof H=="function")j=function(){H(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,we=V.port2;V.port1.onmessage=k,j=function(){we.postMessage(null)}}else j=function(){U(k,0)};function Me(X,le){R=U(function(){X(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(X){switch(b){case 1:case 2:case 3:var le=3;break;default:le=b}var _e=b;b=le;try{return X()}finally{b=_e}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(X,le){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _e=b;b=X;try{return le()}finally{b=_e}},i.unstable_scheduleCallback=function(X,le,_e){var De=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?De+_e:De):_e=De,X){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=_e+Ue,X={id:_++,callback:le,priorityLevel:X,startTime:_e,expirationTime:Ue,sortIndex:-1},_e>De?(X.sortIndex=_e,e(g,X),t(m)===null&&X===t(g)&&(D?(G(R),R=-1):D=!0,Me(se,_e-De))):(X.sortIndex=Ue,e(m,X),P||w||(P=!0,W||(W=!0,j()))),X},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(X){var le=b;return function(){var _e=b;b=le;try{return X.apply(this,arguments)}finally{b=_e}}}})(gg)),gg}var Eb;function kC(){return Eb||(Eb=1,pg.exports=PC()),pg.exports}var yg={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function LC(){if(Tb)return Vn;Tb=1;var i=xy();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Vn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},Vn.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},Vn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Vn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Vn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:w}):_==="script"&&r.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Vn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=f(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Vn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Vn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=f(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Vn.requestFormReset=function(m){r.d.r(m)},Vn.unstable_batchedUpdates=function(m,g){return m(g)},Vn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},Vn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Vn.version="19.2.4",Vn}var bb;function $S(){if(bb)return yg.exports;bb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),yg.exports=LC(),yg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function UC(){if(Sb)return Xu;Sb=1;var i=kC(),e=xy(),t=$S();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,u=s;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return m(d),n;if(p===u)return m(d),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=d,u=p;else{for(var v=!1,A=d.child;A;){if(A===o){v=!0,o=d,u=p;break}if(A===u){v=!0,u=d,o=p;break}A=A.sibling}if(!v){for(A=p.child;A;){if(A===o){v=!0,o=p,u=d;break}if(A===u){v=!0,u=p,o=d;break}A=A.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),H=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var V=Symbol.for("react.client.reference");function we(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===V?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case U:return"Profiler";case M:return"StrictMode";case se:return"Suspense";case W:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case H:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case re:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return s=n.displayName||null,s!==null?s:we(n.type)||"Memo";case S:s=n._payload,n=n._init;try{return we(n(s))}catch{}}return null}var Me=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},De=[],Ue=-1;function z(n){return{current:n}}function te(n){0>Ue||(n.current=De[Ue],De[Ue]=null,Ue--)}function $(n,s){Ue++,De[Ue]=n.current,n.current=s}var ce=z(null),ge=z(null),ye=z(null),Oe=z(null);function Ge(n,s){switch($(ye,s),$(ge,n),$(ce,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?UT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=UT(s),n=zT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}te(ce),$(ce,n)}function Ve(){te(ce),te(ge),te(ye)}function ze(n){n.memoizedState!==null&&$(Oe,n);var s=ce.current,o=zT(s,n.type);s!==o&&($(ge,n),$(ce,o))}function me(n){ge.current===n&&(te(ce),te(ge)),Oe.current===n&&(te(Oe),Gu._currentValue=_e)}var Ie,ue;function Se(n){if(Ie===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ie=s&&s[1]||"",ue=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ie+n+ue}var xe=!1;function Pe(n,s){if(!n||xe)return"";xe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var J=ee}Reflect.construct(n,[],oe)}else{try{oe.call()}catch(ee){J=ee}n.call(oe.prototype)}}else{try{throw Error()}catch(ee){J=ee}(oe=n())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],A=p[1];if(v&&A){var L=v.split(`
`),Q=A.split(`
`);for(d=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;d<Q.length&&!Q[d].includes("DetermineComponentFrameRoot");)d++;if(u===L.length||d===Q.length)for(u=L.length-1,d=Q.length-1;1<=u&&0<=d&&L[u]!==Q[d];)d--;for(;1<=u&&0<=d;u--,d--)if(L[u]!==Q[d]){if(u!==1||d!==1)do if(u--,d--,0>d||L[u]!==Q[d]){var ie=`
`+L[u].replace(" at new "," at ");return n.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",n.displayName)),ie}while(1<=u&&0<=d);break}}}finally{xe=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Se(o):""}function ut(n,s){switch(n.tag){case 26:case 27:case 5:return Se(n.type);case 16:return Se("Lazy");case 13:return n.child!==s&&s!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return Pe(n.type,!1);case 11:return Pe(n.type.render,!1);case 1:return Pe(n.type,!0);case 31:return Se("Activity");default:return""}}function Ut(n){try{var s="",o=null;do s+=ut(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var nt=Object.prototype.hasOwnProperty,ct=i.unstable_scheduleCallback,En=i.unstable_cancelCallback,Wi=i.unstable_shouldYield,Zi=i.unstable_requestPaint,Yt=i.unstable_now,ki=i.unstable_getCurrentPriorityLevel,vi=i.unstable_ImmediatePriority,Tn=i.unstable_UserBlockingPriority,bn=i.unstable_NormalPriority,Be=i.unstable_LowPriority,bt=i.unstable_IdlePriority,an=i.log,ua=i.unstable_setDisableYieldValue,ii=null,on=null;function xn(n){if(typeof an=="function"&&ua(n),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(ii,n)}catch{}}var It=Math.clz32?Math.clz32:co,uo=Math.log,Cr=Math.LN2;function co(n){return n>>>=0,n===0?32:31-(uo(n)/Cr|0)|0}var Ei=256,Dr=262144,Ye=4194304;function Rt(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ct(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,p=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?d=Rt(u):(v&=A,v!==0?d=Rt(v):o||(o=A&~n,o!==0&&(d=Rt(o))))):(A=u&~p,A!==0?d=Rt(A):v!==0?d=Rt(v):o||(o=u&~n,o!==0&&(d=Rt(o)))),d===0?0:s!==0&&s!==d&&(s&p)===0&&(p=d&-d,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:d}function Qt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Nn(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dn(){var n=Ye;return Ye<<=1,(Ye&62914560)===0&&(Ye=4194304),n}function zt(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Yn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function jt(n,s,o,u,d,p){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,L=n.expirationTimes,Q=n.hiddenUpdates;for(o=v&~o;0<o;){var ie=31-It(o),oe=1<<ie;A[ie]=0,L[ie]=-1;var J=Q[ie];if(J!==null)for(Q[ie]=null,ie=0;ie<J.length;ie++){var ee=J[ie];ee!==null&&(ee.lane&=-536870913)}o&=~oe}u!==0&&Mn(n,u,0),p!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=p&~(v&~s))}function Mn(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-It(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function On(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-It(o),d=1<<u;d&s|n[u]&s&&(n[u]|=s),o&=~d}}function jn(n,s){var o=s&-s;return o=(o&42)!==0?1:ri(o),(o&(n.suspendedLanes|s))!==0?0:o}function ri(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Bn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function si(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:lb(n.type))}function Sn(n,s){var o=le.p;try{return le.p=n,s()}finally{le.p=o}}var qn=Math.random().toString(36).slice(2),$t="__reactFiber$"+qn,mn="__reactProps$"+qn,er="__reactContainer$"+qn,ho="__reactEvents$"+qn,_m="__reactListeners$"+qn,ch="__reactHandles$"+qn,hh="__reactResources$"+qn,tr="__reactMarker$"+qn;function fo(n){delete n[$t],delete n[mn],delete n[ho],delete n[_m],delete n[ch]}function nr(n){var s=n[$t];if(s)return s;for(var o=n.parentNode;o;){if(s=o[er]||o[$t]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=KT(n);n!==null;){if(o=n[$t])return o;n=KT(n)}return s}n=o,o=n.parentNode}return null}function Ti(n){if(n=n[$t]||n[er]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function ai(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function ir(n){var s=n[hh];return s||(s=n[hh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Xt(n){n[tr]=!0}var Wl=new Set,Zl={};function rr(n,s){sr(n,s),sr(n+"Capture",s)}function sr(n,s){for(Zl[n]=s,n=0;n<s.length;n++)Wl.add(s[n])}var eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tu={},nu={};function fh(n){return nt.call(nu,n)?!0:nt.call(tu,n)?!1:eu.test(n)?nu[n]=!0:(tu[n]=!0,!1)}function mo(n,s,o){if(fh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function oi(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Jt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function pn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function as(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function iu(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,p=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ht(n){if(!n._valueTracker){var s=as(n)?"checked":"value";n._valueTracker=iu(n,s,""+n[s])}}function ca(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=as(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function ar(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ha=/[\n"\\]/g;function Qn(n){return n.replace(ha,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function po(n,s,o,u,d,p,v,A){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+pn(s)):n.value!==""+pn(s)&&(n.value=""+pn(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?ru(n,v,pn(s)):o!=null?ru(n,v,pn(o)):u!=null&&n.removeAttribute("value"),d==null&&p!=null&&(n.defaultChecked=!!p),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+pn(A):n.removeAttribute("name")}function dh(n,s,o,u,d,p,v,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){ht(n);return}o=o!=null?""+pn(o):"",s=s!=null?""+pn(s):o,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),ht(n)}function ru(n,s,o){s==="number"&&ar(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function os(n,s,o,u){if(n=n.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=s.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+pn(o),s=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function mh(n,s,o){if(s!=null&&(s=""+pn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+pn(o):""}function ls(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Me(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=pn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),ht(n)}function $n(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var ph=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||ph.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function au(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&su(n,d,u)}else for(var p in s)s.hasOwnProperty(p)&&su(n,p,s[p])}function go(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),us=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yo(n){return us.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Li(){}var ou=null;function bi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var cs=null,or=null;function fa(n){var s=Ti(n);if(s&&(n=s.stateNode)){var o=n[mn]||null;e:switch(n=s.stateNode,s.type){case"input":if(po(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Qn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var d=u[mn]||null;if(!d)throw Error(r(90));po(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&ca(u)}break e;case"textarea":mh(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&os(n,!!o.multiple,s,!1)}}}var _o=!1;function hs(n,s,o){if(_o)return n(s,o);_o=!0;try{var u=n(s);return u}finally{if(_o=!1,(cs!==null||or!==null)&&(cf(),cs&&(s=cs,n=or,or=cs=null,fa(s),n)))for(s=0;s<n.length;s++)fa(n[s])}}function Ui(n,s){var o=n.stateNode;if(o===null)return null;var u=o[mn]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),da=!1;if(Si)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){da=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{da=!1}var lr=null,lu=null,ma=null;function uu(){if(ma)return ma;var n,s=lu,o=s.length,u,d="value"in lr?lr.value:lr.textContent,p=d.length;for(n=0;n<o&&s[n]===d[n];n++);var v=o-n;for(u=1;u<=v&&s[o-u]===d[p-u];u++);return ma=d.slice(n,1<u?1-u:void 0)}function pa(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function xr(){return!0}function zi(){return!1}function An(n){function s(o,u,d,p,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?xr:zi,this.isPropagationStopped=zi,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),s}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=An(Nr),fs=E({},Nr,{view:0,detail:0}),cu=An(fs),ds,vo,cr,Eo=E({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==cr&&(cr&&n.type==="mousemove"?(ds=n.screenX-cr.screenX,vo=n.screenY-cr.screenY):vo=ds=0,cr=n),ds)},movementY:function(n){return"movementY"in n?n.movementY:vo}}),hu=An(Eo),ga=E({},Eo,{dataTransfer:0}),yh=An(ga),_h=E({},fs,{relatedTarget:0}),ya=An(_h),fu=E({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),vh=An(fu),To=E({},Nr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Eh=An(To),Th=E({},Nr,{data:0}),hr=An(Th),bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ah[n])?!!s[n]:!1}function ms(){return wh}var Fn=E({},fs,{key:function(n){if(n.key){var s=bh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=pa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Sh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(n){return n.type==="keypress"?pa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?pa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ih=An(Fn),Rh=E({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mr=An(Rh),h=E({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),y=An(h),T=E({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=An(T),K=E({},Eo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=An(K),de=E({},Nr,{newState:0,oldState:0}),qe=An(de),Bt=[9,13,27,32],st=Si&&"CompositionEvent"in window,Dt=null;Si&&"documentMode"in document&&(Dt=document.documentMode);var Ai=Si&&"TextEvent"in window&&!Dt,fr=Si&&(!st||Dt&&8<Dt&&11>=Dt),ji=" ",Bi=!1;function _a(n,s){switch(n){case"keyup":return Bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var So=!1;function tR(n,s){switch(n){case"compositionend":return bo(s);case"keypress":return s.which!==32?null:(Bi=!0,ji);case"textInput":return n=s.data,n===ji&&Bi?null:n;default:return null}}function nR(n,s){if(So)return n==="compositionend"||!st&&_a(n,s)?(n=uu(),ma=lu=lr=null,So=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return fr&&s.locale!=="ko"?null:s.data;default:return null}}var iR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!iR[n.type]:s==="textarea"}function X_(n,s,o,u){cs?or?or.push(u):or=[u]:cs=u,s=yf(s,"onChange"),0<s.length&&(o=new ur("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var du=null,mu=null;function rR(n){MT(n,0)}function Ch(n){var s=ai(n);if(ca(s))return n}function J_(n,s){if(n==="change")return s}var W_=!1;if(Si){var vm;if(Si){var Em="oninput"in document;if(!Em){var Z_=document.createElement("div");Z_.setAttribute("oninput","return;"),Em=typeof Z_.oninput=="function"}vm=Em}else vm=!1;W_=vm&&(!document.documentMode||9<document.documentMode)}function ev(){du&&(du.detachEvent("onpropertychange",tv),mu=du=null)}function tv(n){if(n.propertyName==="value"&&Ch(mu)){var s=[];X_(s,mu,n,bi(n)),hs(rR,s)}}function sR(n,s,o){n==="focusin"?(ev(),du=s,mu=o,du.attachEvent("onpropertychange",tv)):n==="focusout"&&ev()}function aR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ch(mu)}function oR(n,s){if(n==="click")return Ch(s)}function lR(n,s){if(n==="input"||n==="change")return Ch(s)}function uR(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var li=typeof Object.is=="function"?Object.is:uR;function pu(n,s){if(li(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!nt.call(s,d)||!li(n[d],s[d]))return!1}return!0}function nv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function iv(n,s){var o=nv(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=nv(o)}}function rv(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?rv(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function sv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ar(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=ar(n.document)}return s}function Tm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var cR=Si&&"documentMode"in document&&11>=document.documentMode,Ao=null,bm=null,gu=null,Sm=!1;function av(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Sm||Ao==null||Ao!==ar(u)||(u=Ao,"selectionStart"in u&&Tm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),gu&&pu(gu,u)||(gu=u,u=yf(bm,"onSelect"),0<u.length&&(s=new ur("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ao)))}function va(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var wo={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},Am={},ov={};Si&&(ov=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function Ea(n){if(Am[n])return Am[n];if(!wo[n])return n;var s=wo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in ov)return Am[n]=s[o];return n}var lv=Ea("animationend"),uv=Ea("animationiteration"),cv=Ea("animationstart"),hR=Ea("transitionrun"),fR=Ea("transitionstart"),dR=Ea("transitioncancel"),hv=Ea("transitionend"),fv=new Map,wm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wm.push("scrollEnd");function qi(n,s){fv.set(n,s),rr(s,[n])}var Dh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},wi=[],Io=0,Im=0;function xh(){for(var n=Io,s=Im=Io=0;s<n;){var o=wi[s];wi[s++]=null;var u=wi[s];wi[s++]=null;var d=wi[s];wi[s++]=null;var p=wi[s];if(wi[s++]=null,u!==null&&d!==null){var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}p!==0&&dv(o,d,p)}}function Nh(n,s,o,u){wi[Io++]=n,wi[Io++]=s,wi[Io++]=o,wi[Io++]=u,Im|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Rm(n,s,o,u){return Nh(n,s,o,u),Mh(n)}function Ta(n,s){return Nh(n,null,null,s),Mh(n)}function dv(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(d=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,d&&s!==null&&(d=31-It(o),n=p.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=o|536870912),p):null}function Mh(n){if(50<Uu)throw Uu=0,kp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ro={};function mR(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(n,s,o,u){return new mR(n,s,o,u)}function Cm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Or(n,s){var o=n.alternate;return o===null?(o=ui(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function mv(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Oh(n,s,o,u,d,p){var v=0;if(u=n,typeof n=="function")Cm(n)&&(v=1);else if(typeof n=="string")v=vC(n,o,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=ui(31,o,s,d),n.elementType=N,n.lanes=p,n;case D:return ba(o.children,d,p,s);case M:v=8,d|=24;break;case U:return n=ui(12,o,s,d|2),n.elementType=U,n.lanes=p,n;case se:return n=ui(13,o,s,d),n.elementType=se,n.lanes=p,n;case W:return n=ui(19,o,s,d),n.elementType=W,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:v=10;break e;case G:v=9;break e;case re:v=11;break e;case R:v=14;break e;case S:v=16,u=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=ui(v,o,s,d),s.elementType=n,s.type=u,s.lanes=p,s}function ba(n,s,o,u){return n=ui(7,n,u,s),n.lanes=o,n}function Dm(n,s,o){return n=ui(6,n,null,s),n.lanes=o,n}function pv(n){var s=ui(18,null,null,0);return s.stateNode=n,s}function xm(n,s,o){return s=ui(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var gv=new WeakMap;function Ii(n,s){if(typeof n=="object"&&n!==null){var o=gv.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Ut(s)},gv.set(n,s),s)}return{value:n,source:s,stack:Ut(s)}}var Co=[],Do=0,Vh=null,yu=0,Ri=[],Ci=0,ps=null,dr=1,mr="";function Vr(n,s){Co[Do++]=yu,Co[Do++]=Vh,Vh=n,yu=s}function yv(n,s,o){Ri[Ci++]=dr,Ri[Ci++]=mr,Ri[Ci++]=ps,ps=n;var u=dr;n=mr;var d=32-It(u)-1;u&=~(1<<d),o+=1;var p=32-It(s)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,dr=1<<32-It(s)+d|o<<d|u,mr=p+n}else dr=1<<p|o<<d|u,mr=n}function Nm(n){n.return!==null&&(Vr(n,1),yv(n,1,0))}function Mm(n){for(;n===Vh;)Vh=Co[--Do],Co[Do]=null,yu=Co[--Do],Co[Do]=null;for(;n===ps;)ps=Ri[--Ci],Ri[Ci]=null,mr=Ri[--Ci],Ri[Ci]=null,dr=Ri[--Ci],Ri[Ci]=null}function _v(n,s){Ri[Ci++]=dr,Ri[Ci++]=mr,Ri[Ci++]=ps,dr=s.id,mr=s.overflow,ps=n}var wn=null,At=null,et=!1,gs=null,Di=!1,Om=Error(r(519));function ys(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _u(Ii(s,n)),Om}function vv(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[$t]=n,s[mn]=u,o){case"dialog":$e("cancel",s),$e("close",s);break;case"iframe":case"object":case"embed":$e("load",s);break;case"video":case"audio":for(o=0;o<ju.length;o++)$e(ju[o],s);break;case"source":$e("error",s);break;case"img":case"image":case"link":$e("error",s),$e("load",s);break;case"details":$e("toggle",s);break;case"input":$e("invalid",s),dh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":$e("invalid",s);break;case"textarea":$e("invalid",s),ls(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||kT(s.textContent,o)?(u.popover!=null&&($e("beforetoggle",s),$e("toggle",s)),u.onScroll!=null&&$e("scroll",s),u.onScrollEnd!=null&&$e("scrollend",s),u.onClick!=null&&(s.onclick=Li),s=!0):s=!1,s||ys(n,!0)}function Ev(n){for(wn=n.return;wn;)switch(wn.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:wn=wn.return}}function xo(n){if(n!==wn)return!1;if(!et)return Ev(n),et=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Jp(n.type,n.memoizedProps)),o=!o),o&&At&&ys(n),Ev(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));At=GT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));At=GT(n)}else s===27?(s=At,Ns(n.type)?(n=ng,ng=null,At=n):At=s):At=wn?Ni(n.stateNode.nextSibling):null;return!0}function Sa(){At=wn=null,et=!1}function Vm(){var n=gs;return n!==null&&(Zn===null?Zn=n:Zn.push.apply(Zn,n),gs=null),n}function _u(n){gs===null?gs=[n]:gs.push(n)}var Pm=z(null),Aa=null,Pr=null;function _s(n,s,o){$(Pm,s._currentValue),s._currentValue=o}function kr(n){n._currentValue=Pm.current,te(Pm)}function km(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Lm(n,s,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var p=d.dependencies;if(p!==null){var v=d.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=d;for(var L=0;L<s.length;L++)if(A.context===s[L]){p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),km(p.return,o,n),u||(v=null);break e}p=A.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(r(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),km(v,o,n),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===n){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function No(n,s,o,u){n=null;for(var d=s,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var A=d.type;li(d.pendingProps.value,v.value)||(n!==null?n.push(A):n=[A])}}else if(d===Oe.current){if(v=d.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Gu):n=[Gu])}d=d.return}n!==null&&Lm(s,n,o,u),s.flags|=262144}function Ph(n){for(n=n.firstContext;n!==null;){if(!li(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function wa(n){Aa=n,Pr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function In(n){return Tv(Aa,n)}function kh(n,s){return Aa===null&&wa(n),Tv(n,s)}function Tv(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Pr===null){if(n===null)throw Error(r(308));Pr=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Pr=Pr.next=s;return o}var pR=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},gR=i.unstable_scheduleCallback,yR=i.unstable_NormalPriority,Wt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Um(){return{controller:new pR,data:new Map,refCount:0}}function vu(n){n.refCount--,n.refCount===0&&gR(yR,function(){n.controller.abort()})}var Eu=null,zm=0,Mo=0,Oo=null;function _R(n,s){if(Eu===null){var o=Eu=[];zm=0,Mo=qp(),Oo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return zm++,s.then(bv,bv),s}function bv(){if(--zm===0&&Eu!==null){Oo!==null&&(Oo.status="fulfilled");var n=Eu;Eu=null,Mo=0,Oo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function vR(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Sv=X.S;X.S=function(n,s){aT=Yt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&_R(n,s),Sv!==null&&Sv(n,s)};var Ia=z(null);function jm(){var n=Ia.current;return n!==null?n:Tt.pooledCache}function Lh(n,s){s===null?$(Ia,Ia.current):$(Ia,s.pool)}function Av(){var n=jm();return n===null?null:{parent:Wt._currentValue,pool:n}}var Vo=Error(r(460)),Bm=Error(r(474)),Uh=Error(r(542)),zh={then:function(){}};function wv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Iv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Li,Li),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Cv(n),n;default:if(typeof s.status=="string")s.then(Li,Li);else{if(n=Tt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Cv(n),n}throw Ca=s,Vo}}function Ra(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ca=o,Vo):o}}var Ca=null;function Rv(){if(Ca===null)throw Error(r(459));var n=Ca;return Ca=null,n}function Cv(n){if(n===Vo||n===Uh)throw Error(r(483))}var Po=null,Tu=0;function jh(n){var s=Tu;return Tu+=1,Po===null&&(Po=[]),Iv(Po,n,s)}function bu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Bh(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Dv(n){function s(q,B){if(n){var Y=q.deletions;Y===null?(q.deletions=[B],q.flags|=16):Y.push(B)}}function o(q,B){if(!n)return null;for(;B!==null;)s(q,B),B=B.sibling;return null}function u(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function d(q,B){return q=Or(q,B),q.index=0,q.sibling=null,q}function p(q,B,Y){return q.index=Y,n?(Y=q.alternate,Y!==null?(Y=Y.index,Y<B?(q.flags|=67108866,B):Y):(q.flags|=67108866,B)):(q.flags|=1048576,B)}function v(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function A(q,B,Y,ae){return B===null||B.tag!==6?(B=Dm(Y,q.mode,ae),B.return=q,B):(B=d(B,Y),B.return=q,B)}function L(q,B,Y,ae){var Re=Y.type;return Re===D?ie(q,B,Y.props.children,ae,Y.key):B!==null&&(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===S&&Ra(Re)===B.type)?(B=d(B,Y.props),bu(B,Y),B.return=q,B):(B=Oh(Y.type,Y.key,Y.props,null,q.mode,ae),bu(B,Y),B.return=q,B)}function Q(q,B,Y,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=xm(Y,q.mode,ae),B.return=q,B):(B=d(B,Y.children||[]),B.return=q,B)}function ie(q,B,Y,ae,Re){return B===null||B.tag!==7?(B=ba(Y,q.mode,ae,Re),B.return=q,B):(B=d(B,Y),B.return=q,B)}function oe(q,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Dm(""+B,q.mode,Y),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return Y=Oh(B.type,B.key,B.props,null,q.mode,Y),bu(Y,B),Y.return=q,Y;case P:return B=xm(B,q.mode,Y),B.return=q,B;case S:return B=Ra(B),oe(q,B,Y)}if(Me(B)||j(B))return B=ba(B,q.mode,Y,null),B.return=q,B;if(typeof B.then=="function")return oe(q,jh(B),Y);if(B.$$typeof===H)return oe(q,kh(q,B),Y);Bh(q,B)}return null}function J(q,B,Y,ae){var Re=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Re!==null?null:A(q,B,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===Re?L(q,B,Y,ae):null;case P:return Y.key===Re?Q(q,B,Y,ae):null;case S:return Y=Ra(Y),J(q,B,Y,ae)}if(Me(Y)||j(Y))return Re!==null?null:ie(q,B,Y,ae,null);if(typeof Y.then=="function")return J(q,B,jh(Y),ae);if(Y.$$typeof===H)return J(q,B,kh(q,Y),ae);Bh(q,Y)}return null}function ee(q,B,Y,ae,Re){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return q=q.get(Y)||null,A(B,q,""+ae,Re);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return q=q.get(ae.key===null?Y:ae.key)||null,L(B,q,ae,Re);case P:return q=q.get(ae.key===null?Y:ae.key)||null,Q(B,q,ae,Re);case S:return ae=Ra(ae),ee(q,B,Y,ae,Re)}if(Me(ae)||j(ae))return q=q.get(Y)||null,ie(B,q,ae,Re,null);if(typeof ae.then=="function")return ee(q,B,Y,jh(ae),Re);if(ae.$$typeof===H)return ee(q,B,Y,kh(B,ae),Re);Bh(B,ae)}return null}function Ee(q,B,Y,ae){for(var Re=null,it=null,be=B,He=B=0,Je=null;be!==null&&He<Y.length;He++){be.index>He?(Je=be,be=null):Je=be.sibling;var rt=J(q,be,Y[He],ae);if(rt===null){be===null&&(be=Je);break}n&&be&&rt.alternate===null&&s(q,be),B=p(rt,B,He),it===null?Re=rt:it.sibling=rt,it=rt,be=Je}if(He===Y.length)return o(q,be),et&&Vr(q,He),Re;if(be===null){for(;He<Y.length;He++)be=oe(q,Y[He],ae),be!==null&&(B=p(be,B,He),it===null?Re=be:it.sibling=be,it=be);return et&&Vr(q,He),Re}for(be=u(be);He<Y.length;He++)Je=ee(be,q,He,Y[He],ae),Je!==null&&(n&&Je.alternate!==null&&be.delete(Je.key===null?He:Je.key),B=p(Je,B,He),it===null?Re=Je:it.sibling=Je,it=Je);return n&&be.forEach(function(ks){return s(q,ks)}),et&&Vr(q,He),Re}function Ne(q,B,Y,ae){if(Y==null)throw Error(r(151));for(var Re=null,it=null,be=B,He=B=0,Je=null,rt=Y.next();be!==null&&!rt.done;He++,rt=Y.next()){be.index>He?(Je=be,be=null):Je=be.sibling;var ks=J(q,be,rt.value,ae);if(ks===null){be===null&&(be=Je);break}n&&be&&ks.alternate===null&&s(q,be),B=p(ks,B,He),it===null?Re=ks:it.sibling=ks,it=ks,be=Je}if(rt.done)return o(q,be),et&&Vr(q,He),Re;if(be===null){for(;!rt.done;He++,rt=Y.next())rt=oe(q,rt.value,ae),rt!==null&&(B=p(rt,B,He),it===null?Re=rt:it.sibling=rt,it=rt);return et&&Vr(q,He),Re}for(be=u(be);!rt.done;He++,rt=Y.next())rt=ee(be,q,He,rt.value,ae),rt!==null&&(n&&rt.alternate!==null&&be.delete(rt.key===null?He:rt.key),B=p(rt,B,He),it===null?Re=rt:it.sibling=rt,it=rt);return n&&be.forEach(function(xC){return s(q,xC)}),et&&Vr(q,He),Re}function Et(q,B,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===D&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var Re=Y.key;B!==null;){if(B.key===Re){if(Re=Y.type,Re===D){if(B.tag===7){o(q,B.sibling),ae=d(B,Y.props.children),ae.return=q,q=ae;break e}}else if(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===S&&Ra(Re)===B.type){o(q,B.sibling),ae=d(B,Y.props),bu(ae,Y),ae.return=q,q=ae;break e}o(q,B);break}else s(q,B);B=B.sibling}Y.type===D?(ae=ba(Y.props.children,q.mode,ae,Y.key),ae.return=q,q=ae):(ae=Oh(Y.type,Y.key,Y.props,null,q.mode,ae),bu(ae,Y),ae.return=q,q=ae)}return v(q);case P:e:{for(Re=Y.key;B!==null;){if(B.key===Re)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){o(q,B.sibling),ae=d(B,Y.children||[]),ae.return=q,q=ae;break e}else{o(q,B);break}else s(q,B);B=B.sibling}ae=xm(Y,q.mode,ae),ae.return=q,q=ae}return v(q);case S:return Y=Ra(Y),Et(q,B,Y,ae)}if(Me(Y))return Ee(q,B,Y,ae);if(j(Y)){if(Re=j(Y),typeof Re!="function")throw Error(r(150));return Y=Re.call(Y),Ne(q,B,Y,ae)}if(typeof Y.then=="function")return Et(q,B,jh(Y),ae);if(Y.$$typeof===H)return Et(q,B,kh(q,Y),ae);Bh(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(o(q,B.sibling),ae=d(B,Y),ae.return=q,q=ae):(o(q,B),ae=Dm(Y,q.mode,ae),ae.return=q,q=ae),v(q)):o(q,B)}return function(q,B,Y,ae){try{Tu=0;var Re=Et(q,B,Y,ae);return Po=null,Re}catch(be){if(be===Vo||be===Uh)throw be;var it=ui(29,be,null,q.mode);return it.lanes=ae,it.return=q,it}finally{}}}var Da=Dv(!0),xv=Dv(!1),vs=!1;function qm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Es(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ts(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(at&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Mh(n),dv(n,null,o),s}return Nh(n,u,s,o),Mh(n)}function Su(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,On(n,o)}}function Hm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?d=p=s:p=p.next=s}else d=p=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Gm=!1;function Au(){if(Gm){var n=Oo;if(n!==null)throw n}}function wu(n,s,o,u){Gm=!1;var d=n.updateQueue;vs=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var L=A,Q=L.next;L.next=null,v===null?p=Q:v.next=Q,v=L;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==v&&(A===null?ie.firstBaseUpdate=Q:A.next=Q,ie.lastBaseUpdate=L))}if(p!==null){var oe=d.baseState;v=0,ie=Q=L=null,A=p;do{var J=A.lane&-536870913,ee=J!==A.lane;if(ee?(Xe&J)===J:(u&J)===J){J!==0&&J===Mo&&(Gm=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ee=n,Ne=A;J=s;var Et=o;switch(Ne.tag){case 1:if(Ee=Ne.payload,typeof Ee=="function"){oe=Ee.call(Et,oe,J);break e}oe=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ne.payload,J=typeof Ee=="function"?Ee.call(Et,oe,J):Ee,J==null)break e;oe=E({},oe,J);break e;case 2:vs=!0}}J=A.callback,J!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=d.callbacks,ee===null?d.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(Q=ie=ee,L=oe):ie=ie.next=ee,v|=J;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);ie===null&&(L=oe),d.baseState=L,d.firstBaseUpdate=Q,d.lastBaseUpdate=ie,p===null&&(d.shared.lanes=0),Is|=v,n.lanes=v,n.memoizedState=oe}}function Nv(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Mv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Nv(o[n],s)}var ko=z(null),qh=z(0);function Ov(n,s){n=Gr,$(qh,n),$(ko,s),Gr=n|s.baseLanes}function Km(){$(qh,Gr),$(ko,ko.current)}function Ym(){Gr=qh.current,te(ko),te(qh)}var ci=z(null),xi=null;function bs(n){var s=n.alternate;$(qt,qt.current&1),$(ci,n),xi===null&&(s===null||ko.current!==null||s.memoizedState!==null)&&(xi=n)}function Qm(n){$(qt,qt.current),$(ci,n),xi===null&&(xi=n)}function Vv(n){n.tag===22?($(qt,qt.current),$(ci,n),xi===null&&(xi=n)):Ss()}function Ss(){$(qt,qt.current),$(ci,ci.current)}function hi(n){te(ci),xi===n&&(xi=null),te(qt)}var qt=z(0);function Fh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||eg(o)||tg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Lr=0,Fe=null,_t=null,Zt=null,Hh=!1,Lo=!1,xa=!1,Gh=0,Iu=0,Uo=null,ER=0;function Pt(){throw Error(r(321))}function $m(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!li(n[o],s[o]))return!1;return!0}function Xm(n,s,o,u,d,p){return Lr=p,Fe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=n===null||n.memoizedState===null?yE:hp,xa=!1,p=o(u,d),xa=!1,Lo&&(p=kv(s,o,u,d)),Pv(n),p}function Pv(n){X.H=Du;var s=_t!==null&&_t.next!==null;if(Lr=0,Zt=_t=Fe=null,Hh=!1,Iu=0,Uo=null,s)throw Error(r(300));n===null||en||(n=n.dependencies,n!==null&&Ph(n)&&(en=!0))}function kv(n,s,o,u){Fe=n;var d=0;do{if(Lo&&(Uo=null),Iu=0,Lo=!1,25<=d)throw Error(r(301));if(d+=1,Zt=_t=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=_E,p=s(o,u)}while(Lo);return p}function TR(){var n=X.H,s=n.useState()[0];return s=typeof s.then=="function"?Ru(s):s,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(Fe.flags|=1024),s}function Jm(){var n=Gh!==0;return Gh=0,n}function Wm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Zm(n){if(Hh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Hh=!1}Lr=0,Zt=_t=Fe=null,Lo=!1,Iu=Gh=0,Uo=null}function Hn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Fe.memoizedState=Zt=n:Zt=Zt.next=n,Zt}function Ft(){if(_t===null){var n=Fe.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var s=Zt===null?Fe.memoizedState:Zt.next;if(s!==null)Zt=s,_t=n;else{if(n===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Zt===null?Fe.memoizedState=Zt=n:Zt=Zt.next=n}return Zt}function Kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(n){var s=Iu;return Iu+=1,Uo===null&&(Uo=[]),n=Iv(Uo,n,s),s=Fe,(Zt===null?s.memoizedState:Zt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?yE:hp),n}function Yh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ru(n);if(n.$$typeof===H)return In(n)}throw Error(r(438,String(n)))}function ep(n){var s=null,o=Fe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Fe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Kh(),Fe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=O;return s.index++,o}function Ur(n,s){return typeof s=="function"?s(n):s}function Qh(n){var s=Ft();return tp(s,_t,n)}function tp(n,s,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var d=n.baseQueue,p=u.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}s.baseQueue=d=p,u.pending=null}if(p=n.baseState,d===null)n.memoizedState=p;else{s=d.next;var A=v=null,L=null,Q=s,ie=!1;do{var oe=Q.lane&-536870913;if(oe!==Q.lane?(Xe&oe)===oe:(Lr&oe)===oe){var J=Q.revertLane;if(J===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),oe===Mo&&(ie=!0);else if((Lr&J)===J){Q=Q.next,J===Mo&&(ie=!0);continue}else oe={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(A=L=oe,v=p):L=L.next=oe,Fe.lanes|=J,Is|=J;oe=Q.action,xa&&o(p,oe),p=Q.hasEagerState?Q.eagerState:o(p,oe)}else J={lane:oe,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(A=L=J,v=p):L=L.next=J,Fe.lanes|=oe,Is|=oe;Q=Q.next}while(Q!==null&&Q!==s);if(L===null?v=p:L.next=A,!li(p,n.memoizedState)&&(en=!0,ie&&(o=Oo,o!==null)))throw o;n.memoizedState=p,n.baseState=v,n.baseQueue=L,u.lastRenderedState=p}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function np(n){var s=Ft(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,p=s.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);li(p,s.memoizedState)||(en=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function Lv(n,s,o){var u=Fe,d=Ft(),p=et;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var v=!li((_t||d).memoizedState,o);if(v&&(d.memoizedState=o,en=!0),d=d.queue,sp(jv.bind(null,u,d,n),[n]),d.getSnapshot!==s||v||Zt!==null&&Zt.memoizedState.tag&1){if(u.flags|=2048,zo(9,{destroy:void 0},zv.bind(null,u,d,o,s),null),Tt===null)throw Error(r(349));p||(Lr&127)!==0||Uv(u,s,o)}return o}function Uv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Fe.updateQueue,s===null?(s=Kh(),Fe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function zv(n,s,o,u){s.value=o,s.getSnapshot=u,Bv(s)&&qv(n)}function jv(n,s,o){return o(function(){Bv(s)&&qv(n)})}function Bv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!li(n,o)}catch{return!0}}function qv(n){var s=Ta(n,2);s!==null&&ei(s,n,2)}function ip(n){var s=Hn();if(typeof n=="function"){var o=n;if(n=o(),xa){xn(!0);try{o()}finally{xn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:n},s}function Fv(n,s,o,u){return n.baseState=o,tp(n,_t,typeof u=="function"?u:Ur)}function bR(n,s,o,u,d){if(Jh(n))throw Error(r(485));if(n=s.action,n!==null){var p={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};X.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,Hv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function Hv(n,s){var o=s.action,u=s.payload,d=n.state;if(s.isTransition){var p=X.T,v={};X.T=v;try{var A=o(d,u),L=X.S;L!==null&&L(v,A),Gv(n,s,A)}catch(Q){rp(n,s,Q)}finally{p!==null&&v.types!==null&&(p.types=v.types),X.T=p}}else try{p=o(d,u),Gv(n,s,p)}catch(Q){rp(n,s,Q)}}function Gv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Kv(n,s,u)},function(u){return rp(n,s,u)}):Kv(n,s,o)}function Kv(n,s,o){s.status="fulfilled",s.value=o,Yv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Hv(n,o)))}function rp(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Yv(s),s=s.next;while(s!==u)}n.action=null}function Yv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Qv(n,s){return s}function $v(n,s){if(et){var o=Tt.formState;if(o!==null){e:{var u=Fe;if(et){if(At){t:{for(var d=At,p=Di;d.nodeType!==8;){if(!p){d=null;break t}if(d=Ni(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){At=Ni(d.nextSibling),u=d.data==="F!";break e}}ys(u)}u=!1}u&&(s=o[0])}}return o=Hn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qv,lastRenderedState:s},o.queue=u,o=mE.bind(null,Fe,u),u.dispatch=o,u=ip(!1),p=cp.bind(null,Fe,!1,u.queue),u=Hn(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,o=bR.bind(null,Fe,d,p,o),d.dispatch=o,u.memoizedState=n,[s,o,!1]}function Xv(n){var s=Ft();return Jv(s,_t,n)}function Jv(n,s,o){if(s=tp(n,s,Qv)[0],n=Qh(Ur)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ru(s)}catch(v){throw v===Vo?Uh:v}else u=s;s=Ft();var d=s.queue,p=d.dispatch;return o!==s.memoizedState&&(Fe.flags|=2048,zo(9,{destroy:void 0},SR.bind(null,d,o),null)),[u,p,n]}function SR(n,s){n.action=s}function Wv(n){var s=Ft(),o=_t;if(o!==null)return Jv(s,o,n);Ft(),s=s.memoizedState,o=Ft();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function zo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Fe.updateQueue,s===null&&(s=Kh(),Fe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Zv(){return Ft().memoizedState}function $h(n,s,o,u){var d=Hn();Fe.flags|=n,d.memoizedState=zo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Xh(n,s,o,u){var d=Ft();u=u===void 0?null:u;var p=d.memoizedState.inst;_t!==null&&u!==null&&$m(u,_t.memoizedState.deps)?d.memoizedState=zo(s,p,o,u):(Fe.flags|=n,d.memoizedState=zo(1|s,p,o,u))}function eE(n,s){$h(8390656,8,n,s)}function sp(n,s){Xh(2048,8,n,s)}function AR(n){Fe.flags|=4;var s=Fe.updateQueue;if(s===null)s=Kh(),Fe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function tE(n){var s=Ft().memoizedState;return AR({ref:s,nextImpl:n}),function(){if((at&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function nE(n,s){return Xh(4,2,n,s)}function iE(n,s){return Xh(4,4,n,s)}function rE(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function sE(n,s,o){o=o!=null?o.concat([n]):null,Xh(4,4,rE.bind(null,s,n),o)}function ap(){}function aE(n,s){var o=Ft();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&$m(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function oE(n,s){var o=Ft();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&$m(s,u[1]))return u[0];if(u=n(),xa){xn(!0);try{n()}finally{xn(!1)}}return o.memoizedState=[u,s],u}function op(n,s,o){return o===void 0||(Lr&1073741824)!==0&&(Xe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=lT(),Fe.lanes|=n,Is|=n,o)}function lE(n,s,o,u){return li(o,s)?o:ko.current!==null?(n=op(n,o,u),li(n,s)||(en=!0),n):(Lr&42)===0||(Lr&1073741824)!==0&&(Xe&261930)===0?(en=!0,n.memoizedState=o):(n=lT(),Fe.lanes|=n,Is|=n,s)}function uE(n,s,o,u,d){var p=le.p;le.p=p!==0&&8>p?p:8;var v=X.T,A={};X.T=A,cp(n,!1,s,o);try{var L=d(),Q=X.S;if(Q!==null&&Q(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ie=vR(L,u);Cu(n,s,ie,mi(n))}else Cu(n,s,u,mi(n))}catch(oe){Cu(n,s,{then:function(){},status:"rejected",reason:oe},mi())}finally{le.p=p,v!==null&&A.types!==null&&(v.types=A.types),X.T=v}}function wR(){}function lp(n,s,o,u){if(n.tag!==5)throw Error(r(476));var d=cE(n).queue;uE(n,d,s,_e,o===null?wR:function(){return hE(n),o(u)})}function cE(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function hE(n){var s=cE(n);s.next===null&&(s=n.alternate.memoizedState),Cu(n,s.next.queue,{},mi())}function up(){return In(Gu)}function fE(){return Ft().memoizedState}function dE(){return Ft().memoizedState}function IR(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=mi();n=Es(o);var u=Ts(s,n,o);u!==null&&(ei(u,s,o),Su(u,s,o)),s={cache:Um()},n.payload=s;return}s=s.return}}function RR(n,s,o){var u=mi();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jh(n)?pE(s,o):(o=Rm(n,s,o,u),o!==null&&(ei(o,n,u),gE(o,s,u)))}function mE(n,s,o){var u=mi();Cu(n,s,o,u)}function Cu(n,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jh(n))pE(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,A=p(v,o);if(d.hasEagerState=!0,d.eagerState=A,li(A,v))return Nh(n,s,d,0),Tt===null&&xh(),!1}catch{}finally{}if(o=Rm(n,s,d,u),o!==null)return ei(o,n,u),gE(o,s,u),!0}return!1}function cp(n,s,o,u){if(u={lane:2,revertLane:qp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Jh(n)){if(s)throw Error(r(479))}else s=Rm(n,o,u,2),s!==null&&ei(s,n,2)}function Jh(n){var s=n.alternate;return n===Fe||s!==null&&s===Fe}function pE(n,s){Lo=Hh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function gE(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,On(n,o)}}var Du={readContext:In,use:Yh,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};Du.useEffectEvent=Pt;var yE={readContext:In,use:Yh,useCallback:function(n,s){return Hn().memoizedState=[n,s===void 0?null:s],n},useContext:In,useEffect:eE,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,$h(4194308,4,rE.bind(null,s,n),o)},useLayoutEffect:function(n,s){return $h(4194308,4,n,s)},useInsertionEffect:function(n,s){$h(4,2,n,s)},useMemo:function(n,s){var o=Hn();s=s===void 0?null:s;var u=n();if(xa){xn(!0);try{n()}finally{xn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=Hn();if(o!==void 0){var d=o(s);if(xa){xn(!0);try{o(s)}finally{xn(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=RR.bind(null,Fe,n),[u.memoizedState,n]},useRef:function(n){var s=Hn();return n={current:n},s.memoizedState=n},useState:function(n){n=ip(n);var s=n.queue,o=mE.bind(null,Fe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:ap,useDeferredValue:function(n,s){var o=Hn();return op(o,n,s)},useTransition:function(){var n=ip(!1);return n=uE.bind(null,Fe,n.queue,!0,!1),Hn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Fe,d=Hn();if(et){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Tt===null)throw Error(r(349));(Xe&127)!==0||Uv(u,s,o)}d.memoizedState=o;var p={value:o,getSnapshot:s};return d.queue=p,eE(jv.bind(null,u,p,n),[n]),u.flags|=2048,zo(9,{destroy:void 0},zv.bind(null,u,p,o,s),null),o},useId:function(){var n=Hn(),s=Tt.identifierPrefix;if(et){var o=mr,u=dr;o=(u&~(1<<32-It(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Gh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=ER++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:up,useFormState:$v,useActionState:$v,useOptimistic:function(n){var s=Hn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=cp.bind(null,Fe,!0,o),o.dispatch=s,[n,s]},useMemoCache:ep,useCacheRefresh:function(){return Hn().memoizedState=IR.bind(null,Fe)},useEffectEvent:function(n){var s=Hn(),o={impl:n};return s.memoizedState=o,function(){if((at&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},hp={readContext:In,use:Yh,useCallback:aE,useContext:In,useEffect:sp,useImperativeHandle:sE,useInsertionEffect:nE,useLayoutEffect:iE,useMemo:oE,useReducer:Qh,useRef:Zv,useState:function(){return Qh(Ur)},useDebugValue:ap,useDeferredValue:function(n,s){var o=Ft();return lE(o,_t.memoizedState,n,s)},useTransition:function(){var n=Qh(Ur)[0],s=Ft().memoizedState;return[typeof n=="boolean"?n:Ru(n),s]},useSyncExternalStore:Lv,useId:fE,useHostTransitionStatus:up,useFormState:Xv,useActionState:Xv,useOptimistic:function(n,s){var o=Ft();return Fv(o,_t,n,s)},useMemoCache:ep,useCacheRefresh:dE};hp.useEffectEvent=tE;var _E={readContext:In,use:Yh,useCallback:aE,useContext:In,useEffect:sp,useImperativeHandle:sE,useInsertionEffect:nE,useLayoutEffect:iE,useMemo:oE,useReducer:np,useRef:Zv,useState:function(){return np(Ur)},useDebugValue:ap,useDeferredValue:function(n,s){var o=Ft();return _t===null?op(o,n,s):lE(o,_t.memoizedState,n,s)},useTransition:function(){var n=np(Ur)[0],s=Ft().memoizedState;return[typeof n=="boolean"?n:Ru(n),s]},useSyncExternalStore:Lv,useId:fE,useHostTransitionStatus:up,useFormState:Wv,useActionState:Wv,useOptimistic:function(n,s){var o=Ft();return _t!==null?Fv(o,_t,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:ep,useCacheRefresh:dE};_E.useEffectEvent=tE;function fp(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var dp={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=mi(),d=Es(u);d.payload=s,o!=null&&(d.callback=o),s=Ts(n,d,u),s!==null&&(ei(s,n,u),Su(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=mi(),d=Es(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Ts(n,d,u),s!==null&&(ei(s,n,u),Su(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=mi(),u=Es(o);u.tag=2,s!=null&&(u.callback=s),s=Ts(n,u,o),s!==null&&(ei(s,n,o),Su(s,n,o))}};function vE(n,s,o,u,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):s.prototype&&s.prototype.isPureReactComponent?!pu(o,u)||!pu(d,p):!0}function EE(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&dp.enqueueReplaceState(s,s.state,null)}function Na(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function TE(n){Dh(n)}function bE(n){console.error(n)}function SE(n){Dh(n)}function Wh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function AE(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function mp(n,s,o){return o=Es(o),o.tag=3,o.payload={element:null},o.callback=function(){Wh(n,s)},o}function wE(n){return n=Es(n),n.tag=3,n}function IE(n,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;n.payload=function(){return d(p)},n.callback=function(){AE(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){AE(s,o,u),typeof d!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function CR(n,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&No(s,o,d,!0),o=ci.current,o!==null){switch(o.tag){case 31:case 13:return xi===null?hf():o.alternate===null&&kt===0&&(kt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===zh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),zp(n,u,d)),!1;case 22:return o.flags|=65536,u===zh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),zp(n,u,d)),!1}throw Error(r(435,o.tag))}return zp(n,u,d),hf(),!1}if(et)return s=ci.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Om&&(n=Error(r(422),{cause:u}),_u(Ii(n,o)))):(u!==Om&&(s=Error(r(423),{cause:u}),_u(Ii(s,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Ii(u,o),d=mp(n.stateNode,u,d),Hm(n,d),kt!==4&&(kt=2)),!1;var p=Error(r(520),{cause:u});if(p=Ii(p,o),Lu===null?Lu=[p]:Lu.push(p),kt!==4&&(kt=2),s===null)return!0;u=Ii(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=mp(o.stateNode,u,n),Hm(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Rs===null||!Rs.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=wE(d),IE(d,n,o,u),Hm(o,d),!1}o=o.return}while(o!==null);return!1}var pp=Error(r(461)),en=!1;function Rn(n,s,o,u){s.child=n===null?xv(s,null,o,u):Da(s,n.child,o,u)}function RE(n,s,o,u,d){o=o.render;var p=s.ref;if("ref"in u){var v={};for(var A in u)A!=="ref"&&(v[A]=u[A])}else v=u;return wa(s),u=Xm(n,s,o,v,p,d),A=Jm(),n!==null&&!en?(Wm(n,s,d),zr(n,s,d)):(et&&A&&Nm(s),s.flags|=1,Rn(n,s,u,d),s.child)}function CE(n,s,o,u,d){if(n===null){var p=o.type;return typeof p=="function"&&!Cm(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,DE(n,s,p,u,d)):(n=Oh(o.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!Sp(n,d)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:pu,o(v,u)&&n.ref===s.ref)return zr(n,s,d)}return s.flags|=1,n=Or(p,u),n.ref=s.ref,n.return=s,s.child=n}function DE(n,s,o,u,d){if(n!==null){var p=n.memoizedProps;if(pu(p,u)&&n.ref===s.ref)if(en=!1,s.pendingProps=u=p,Sp(n,d))(n.flags&131072)!==0&&(en=!0);else return s.lanes=n.lanes,zr(n,s,d)}return gp(n,s,o,u,d)}function xE(n,s,o,u){var d=u.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=s.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~p}else u=0,s.child=null;return NE(n,s,p,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Lh(s,p!==null?p.cachePool:null),p!==null?Ov(s,p):Km(),Vv(s);else return u=s.lanes=536870912,NE(n,s,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Lh(s,p.cachePool),Ov(s,p),Ss(),s.memoizedState=null):(n!==null&&Lh(s,null),Km(),Ss());return Rn(n,s,d,o),s.child}function xu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function NE(n,s,o,u,d){var p=jm();return p=p===null?null:{parent:Wt._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},n!==null&&Lh(s,null),Km(),Vv(s),n!==null&&No(n,s,u,!0),s.childLanes=d,null}function Zh(n,s){return s=tf({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function ME(n,s,o){return Da(s,n.child,null,o),n=Zh(s,s.pendingProps),n.flags|=2,hi(s),s.memoizedState=null,n}function DR(n,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(et){if(u.mode==="hidden")return n=Zh(s,u),s.lanes=536870912,xu(null,n);if(Qm(s),(n=At)?(n=HT(n,Di),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ps!==null?{id:dr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},o=pv(n),o.return=s,s.child=o,wn=s,At=null)):n=null,n===null)throw ys(s);return s.lanes=536870912,null}return Zh(s,u)}var p=n.memoizedState;if(p!==null){var v=p.dehydrated;if(Qm(s),d)if(s.flags&256)s.flags&=-257,s=ME(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(en||No(n,s,o,!1),d=(o&n.childLanes)!==0,en||d){if(u=Tt,u!==null&&(v=jn(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,Ta(n,v),ei(u,n,v),pp;hf(),s=ME(n,s,o)}else n=p.treeContext,At=Ni(v.nextSibling),wn=s,et=!0,gs=null,Di=!1,n!==null&&_v(s,n),s=Zh(s,u),s.flags|=4096;return s}return n=Or(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function ef(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function gp(n,s,o,u,d){return wa(s),o=Xm(n,s,o,u,void 0,d),u=Jm(),n!==null&&!en?(Wm(n,s,d),zr(n,s,d)):(et&&u&&Nm(s),s.flags|=1,Rn(n,s,o,d),s.child)}function OE(n,s,o,u,d,p){return wa(s),s.updateQueue=null,o=kv(s,u,o,d),Pv(n),u=Jm(),n!==null&&!en?(Wm(n,s,p),zr(n,s,p)):(et&&u&&Nm(s),s.flags|=1,Rn(n,s,o,p),s.child)}function VE(n,s,o,u,d){if(wa(s),s.stateNode===null){var p=Ro,v=o.contextType;typeof v=="object"&&v!==null&&(p=In(v)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=dp,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},qm(s),v=o.contextType,p.context=typeof v=="object"&&v!==null?In(v):Ro,p.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(fp(s,o,v,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&dp.enqueueReplaceState(p,p.state,null),wu(s,u,p,d),Au(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){p=s.stateNode;var A=s.memoizedProps,L=Na(o,A);p.props=L;var Q=p.context,ie=o.contextType;v=Ro,typeof ie=="object"&&ie!==null&&(v=In(ie));var oe=o.getDerivedStateFromProps;ie=typeof oe=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,ie||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||Q!==v)&&EE(s,p,u,v),vs=!1;var J=s.memoizedState;p.state=J,wu(s,u,p,d),Au(),Q=s.memoizedState,A||J!==Q||vs?(typeof oe=="function"&&(fp(s,o,oe,u),Q=s.memoizedState),(L=vs||vE(s,o,L,u,J,Q,v))?(ie||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=Q),p.props=u,p.state=Q,p.context=v,u=L):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Fm(n,s),v=s.memoizedProps,ie=Na(o,v),p.props=ie,oe=s.pendingProps,J=p.context,Q=o.contextType,L=Ro,typeof Q=="object"&&Q!==null&&(L=In(Q)),A=o.getDerivedStateFromProps,(Q=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==oe||J!==L)&&EE(s,p,u,L),vs=!1,J=s.memoizedState,p.state=J,wu(s,u,p,d),Au();var ee=s.memoizedState;v!==oe||J!==ee||vs||n!==null&&n.dependencies!==null&&Ph(n.dependencies)?(typeof A=="function"&&(fp(s,o,A,u),ee=s.memoizedState),(ie=vs||vE(s,o,ie,u,J,ee,L)||n!==null&&n.dependencies!==null&&Ph(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ee,L),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ee,L)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ee),p.props=u,p.state=ee,p.context=L,u=ie):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),u=!1)}return p=u,ef(n,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&u?(s.child=Da(s,n.child,null,d),s.child=Da(s,null,o,d)):Rn(n,s,o,d),s.memoizedState=p.state,n=s.child):n=zr(n,s,d),n}function PE(n,s,o,u){return Sa(),s.flags|=256,Rn(n,s,o,u),s.child}var yp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _p(n){return{baseLanes:n,cachePool:Av()}}function vp(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=di),n}function kE(n,s,o){var u=s.pendingProps,d=!1,p=(s.flags&128)!==0,v;if((v=p)||(v=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(et){if(d?bs(s):Ss(),(n=At)?(n=HT(n,Di),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ps!==null?{id:dr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},o=pv(n),o.return=s,s.child=o,wn=s,At=null)):n=null,n===null)throw ys(s);return tg(n)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,d?(Ss(),d=s.mode,A=tf({mode:"hidden",children:A},d),u=ba(u,d,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=_p(o),u.childLanes=vp(n,v,o),s.memoizedState=yp,xu(null,u)):(bs(s),Ep(s,A))}var L=n.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(p)s.flags&256?(bs(s),s.flags&=-257,s=Tp(n,s,o)):s.memoizedState!==null?(Ss(),s.child=n.child,s.flags|=128,s=null):(Ss(),A=u.fallback,d=s.mode,u=tf({mode:"visible",children:u.children},d),A=ba(A,d,o,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,Da(s,n.child,null,o),u=s.child,u.memoizedState=_p(o),u.childLanes=vp(n,v,o),s.memoizedState=yp,s=xu(null,u));else if(bs(s),tg(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var Q=v.dgst;v=Q,u=Error(r(419)),u.stack="",u.digest=v,_u({value:u,source:null,stack:null}),s=Tp(n,s,o)}else if(en||No(n,s,o,!1),v=(o&n.childLanes)!==0,en||v){if(v=Tt,v!==null&&(u=jn(v,o),u!==0&&u!==L.retryLane))throw L.retryLane=u,Ta(n,u),ei(v,n,u),pp;eg(A)||hf(),s=Tp(n,s,o)}else eg(A)?(s.flags|=192,s.child=n.child,s=null):(n=L.treeContext,At=Ni(A.nextSibling),wn=s,et=!0,gs=null,Di=!1,n!==null&&_v(s,n),s=Ep(s,u.children),s.flags|=4096);return s}return d?(Ss(),A=u.fallback,d=s.mode,L=n.child,Q=L.sibling,u=Or(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,Q!==null?A=Or(Q,A):(A=ba(A,d,o,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,xu(null,u),u=s.child,A=n.child.memoizedState,A===null?A=_p(o):(d=A.cachePool,d!==null?(L=Wt._currentValue,d=d.parent!==L?{parent:L,pool:L}:d):d=Av(),A={baseLanes:A.baseLanes|o,cachePool:d}),u.memoizedState=A,u.childLanes=vp(n,v,o),s.memoizedState=yp,xu(n.child,u)):(bs(s),o=n.child,n=o.sibling,o=Or(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=o,s.memoizedState=null,o)}function Ep(n,s){return s=tf({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function tf(n,s){return n=ui(22,n,null,s),n.lanes=0,n}function Tp(n,s,o){return Da(s,n.child,null,o),n=Ep(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function LE(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),km(n.return,s,o)}function bp(n,s,o,u,d,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=d,v.treeForkCount=p)}function UE(n,s,o){var u=s.pendingProps,d=u.revealOrder,p=u.tail;u=u.children;var v=qt.current,A=(v&2)!==0;if(A?(v=v&1|2,s.flags|=128):v&=1,$(qt,v),Rn(n,s,u,o),u=et?yu:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&LE(n,o,s);else if(n.tag===19)LE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)n=o.alternate,n!==null&&Fh(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),bp(s,!1,d,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Fh(n)===null){s.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}bp(s,!0,o,null,p,u);break;case"together":bp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function zr(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Is|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(No(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=Or(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Or(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Sp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ph(n)))}function xR(n,s,o){switch(s.tag){case 3:Ge(s,s.stateNode.containerInfo),_s(s,Wt,n.memoizedState.cache),Sa();break;case 27:case 5:ze(s);break;case 4:Ge(s,s.stateNode.containerInfo);break;case 10:_s(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Qm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(bs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?kE(n,s,o):(bs(s),n=zr(n,s,o),n!==null?n.sibling:null);bs(s);break;case 19:var d=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(No(n,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return UE(n,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),$(qt,qt.current),u)break;return null;case 22:return s.lanes=0,xE(n,s,o,s.pendingProps);case 24:_s(s,Wt,n.memoizedState.cache)}return zr(n,s,o)}function zE(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)en=!0;else{if(!Sp(n,o)&&(s.flags&128)===0)return en=!1,xR(n,s,o);en=(n.flags&131072)!==0}else en=!1,et&&(s.flags&1048576)!==0&&yv(s,yu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Ra(s.elementType),s.type=n,typeof n=="function")Cm(n)?(u=Na(n,u),s.tag=1,s=VE(null,s,n,u,o)):(s.tag=0,s=gp(null,s,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===re){s.tag=11,s=RE(null,s,n,u,o);break e}else if(d===R){s.tag=14,s=CE(null,s,n,u,o);break e}}throw s=we(n)||n,Error(r(306,s,""))}}return s;case 0:return gp(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=Na(u,s.pendingProps),VE(n,s,u,d,o);case 3:e:{if(Ge(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;d=p.element,Fm(n,s),wu(s,u,null,o);var v=s.memoizedState;if(u=v.cache,_s(s,Wt,u),u!==p.cache&&Lm(s,[Wt],o,!0),Au(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=PE(n,s,u,o);break e}else if(u!==d){d=Ii(Error(r(424)),s),_u(d),s=PE(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(At=Ni(n.firstChild),wn=s,et=!0,gs=null,Di=!0,o=xv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Sa(),u===d){s=zr(n,s,o);break e}Rn(n,s,u,o)}s=s.child}return s;case 26:return ef(n,s),n===null?(o=XT(s.type,null,s.pendingProps,null))?s.memoizedState=o:et||(o=s.type,n=s.pendingProps,u=_f(ye.current).createElement(o),u[$t]=s,u[mn]=n,Cn(u,o,n),Xt(u),s.stateNode=u):s.memoizedState=XT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ze(s),n===null&&et&&(u=s.stateNode=YT(s.type,s.pendingProps,ye.current),wn=s,Di=!0,d=At,Ns(s.type)?(ng=d,At=Ni(u.firstChild)):At=d),Rn(n,s,s.pendingProps.children,o),ef(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&et&&((d=u=At)&&(u=aC(u,s.type,s.pendingProps,Di),u!==null?(s.stateNode=u,wn=s,At=Ni(u.firstChild),Di=!1,d=!0):d=!1),d||ys(s)),ze(s),d=s.type,p=s.pendingProps,v=n!==null?n.memoizedProps:null,u=p.children,Jp(d,p)?u=null:v!==null&&Jp(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=Xm(n,s,TR,null,null,o),Gu._currentValue=d),ef(n,s),Rn(n,s,u,o),s.child;case 6:return n===null&&et&&((n=o=At)&&(o=oC(o,s.pendingProps,Di),o!==null?(s.stateNode=o,wn=s,At=null,n=!0):n=!1),n||ys(s)),null;case 13:return kE(n,s,o);case 4:return Ge(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Da(s,null,u,o):Rn(n,s,u,o),s.child;case 11:return RE(n,s,s.type,s.pendingProps,o);case 7:return Rn(n,s,s.pendingProps,o),s.child;case 8:return Rn(n,s,s.pendingProps.children,o),s.child;case 12:return Rn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,_s(s,s.type,u.value),Rn(n,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,wa(s),d=In(d),u=u(d),s.flags|=1,Rn(n,s,u,o),s.child;case 14:return CE(n,s,s.type,s.pendingProps,o);case 15:return DE(n,s,s.type,s.pendingProps,o);case 19:return UE(n,s,o);case 31:return DR(n,s,o);case 22:return xE(n,s,o,s.pendingProps);case 24:return wa(s),u=In(Wt),n===null?(d=jm(),d===null&&(d=Tt,p=Um(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),s.memoizedState={parent:u,cache:d},qm(s),_s(s,Wt,d)):((n.lanes&o)!==0&&(Fm(n,s),wu(s,null,null,o),Au()),d=n.memoizedState,p=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),_s(s,Wt,u)):(u=p.cache,_s(s,Wt,u),u!==d.cache&&Lm(s,[Wt],o,!0))),Rn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function jr(n){n.flags|=4}function Ap(n,s,o,u,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(fT())n.flags|=8192;else throw Ca=zh,Bm}else n.flags&=-16777217}function jE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!tb(s))if(fT())n.flags|=8192;else throw Ca=zh,Bm}function nf(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?dn():536870912,n.lanes|=s,Fo|=s)}function Nu(n,s){if(!et)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function wt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function NR(n,s,o){var u=s.pendingProps;switch(Mm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(s),null;case 1:return wt(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),kr(Wt),Ve(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(xo(s)?jr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Vm())),wt(s),null;case 26:var d=s.type,p=s.memoizedState;return n===null?(jr(s),p!==null?(wt(s),jE(s,p)):(wt(s),Ap(s,d,null,u,o))):p?p!==n.memoizedState?(jr(s),wt(s),jE(s,p)):(wt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&jr(s),wt(s),Ap(s,d,n,u,o)),null;case 27:if(me(s),o=ye.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&jr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return wt(s),null}n=ce.current,xo(s)?vv(s):(n=YT(d,u,o),s.stateNode=n,jr(s))}return wt(s),null;case 5:if(me(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&jr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return wt(s),null}if(p=ce.current,xo(s))vv(s);else{var v=_f(ye.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(d,{is:u.is}):v.createElement(d)}}p[$t]=s,p[mn]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=p;e:switch(Cn(p,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&jr(s)}}return wt(s),Ap(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&jr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=ye.current,xo(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,d=wn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[$t]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||kT(n.nodeValue,o)),n||ys(s,!0)}else n=_f(n).createTextNode(u),n[$t]=s,s.stateNode=n}return wt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=xo(s),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[$t]=s}else Sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),n=!1}else o=Vm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(hi(s),s):(hi(s),null);if((s.flags&128)!==0)throw Error(r(558))}return wt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=xo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[$t]=s}else Sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),d=!1}else d=Vm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(hi(s),s):(hi(s),null)}return hi(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),nf(s,s.updateQueue),wt(s),null);case 4:return Ve(),n===null&&Kp(s.stateNode.containerInfo),wt(s),null;case 10:return kr(s.type),wt(s),null;case 19:if(te(qt),u=s.memoizedState,u===null)return wt(s),null;if(d=(s.flags&128)!==0,p=u.rendering,p===null)if(d)Nu(u,!1);else{if(kt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=Fh(n),p!==null){for(s.flags|=128,Nu(u,!1),n=p.updateQueue,s.updateQueue=n,nf(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)mv(o,n),o=o.sibling;return $(qt,qt.current&1|2),et&&Vr(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Yt()>lf&&(s.flags|=128,d=!0,Nu(u,!1),s.lanes=4194304)}else{if(!d)if(n=Fh(p),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,nf(s,n),Nu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!et)return wt(s),null}else 2*Yt()-u.renderingStartTime>lf&&o!==536870912&&(s.flags|=128,d=!0,Nu(u,!1),s.lanes=4194304);u.isBackwards?(p.sibling=s.child,s.child=p):(n=u.last,n!==null?n.sibling=p:s.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Yt(),n.sibling=null,o=qt.current,$(qt,d?o&1|2:o&1),et&&Vr(s,u.treeForkCount),n):(wt(s),null);case 22:case 23:return hi(s),Ym(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(wt(s),s.subtreeFlags&6&&(s.flags|=8192)):wt(s),o=s.updateQueue,o!==null&&nf(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&te(Ia),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),kr(Wt),wt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function MR(n,s){switch(Mm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return kr(Wt),Ve(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return me(s),null;case 31:if(s.memoizedState!==null){if(hi(s),s.alternate===null)throw Error(r(340));Sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(hi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return te(qt),null;case 4:return Ve(),null;case 10:return kr(s.type),null;case 22:case 23:return hi(s),Ym(),n!==null&&te(Ia),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return kr(Wt),null;case 25:return null;default:return null}}function BE(n,s){switch(Mm(s),s.tag){case 3:kr(Wt),Ve();break;case 26:case 27:case 5:me(s);break;case 4:Ve();break;case 31:s.memoizedState!==null&&hi(s);break;case 13:hi(s);break;case 19:te(qt);break;case 10:kr(s.type);break;case 22:case 23:hi(s),Ym(),n!==null&&te(Ia);break;case 24:kr(Wt)}}function Mu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==d)}}catch(A){dt(s,s.return,A)}}function As(n,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&n)===n){var v=u.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,d=s;var L=o,Q=A;try{Q()}catch(ie){dt(d,L,ie)}}}u=u.next}while(u!==p)}}catch(ie){dt(s,s.return,ie)}}function qE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Mv(s,o)}catch(u){dt(n,n.return,u)}}}function FE(n,s,o){o.props=Na(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){dt(n,s,u)}}function Ou(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){dt(n,s,d)}}function pr(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){dt(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){dt(n,s,d)}else o.current=null}function HE(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){dt(n,n.return,d)}}function wp(n,s,o){try{var u=n.stateNode;eC(u,n.type,o,s),u[mn]=s}catch(d){dt(n,n.return,d)}}function GE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ns(n.type)||n.tag===4}function Ip(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||GE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ns(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rp(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Li));else if(u!==4&&(u===27&&Ns(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Rp(n,s,o),n=n.sibling;n!==null;)Rp(n,s,o),n=n.sibling}function rf(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Ns(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(rf(n,s,o),n=n.sibling;n!==null;)rf(n,s,o),n=n.sibling}function KE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Cn(s,u,o),s[$t]=n,s[mn]=o}catch(p){dt(n,n.return,p)}}var Br=!1,tn=!1,Cp=!1,YE=typeof WeakSet=="function"?WeakSet:Set,gn=null;function OR(n,s){if(n=n.containerInfo,$p=wf,n=sv(n),Tm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,A=-1,L=-1,Q=0,ie=0,oe=n,J=null;t:for(;;){for(var ee;oe!==o||d!==0&&oe.nodeType!==3||(A=v+d),oe!==p||u!==0&&oe.nodeType!==3||(L=v+u),oe.nodeType===3&&(v+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)J=oe,oe=ee;for(;;){if(oe===n)break t;if(J===o&&++Q===d&&(A=v),J===p&&++ie===u&&(L=v),(ee=oe.nextSibling)!==null)break;oe=J,J=oe.parentNode}oe=ee}o=A===-1||L===-1?null:{start:A,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(Xp={focusedElem:n,selectionRange:o},wf=!1,gn=s;gn!==null;)if(s=gn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,gn=n;else for(;gn!==null;){switch(s=gn,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,d=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ee=Na(o.type,d);n=u.getSnapshotBeforeUpdate(Ee,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){dt(o,o.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Zp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Zp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,gn=n;break}gn=s.return}}function QE(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Fr(n,o),u&4&&Mu(5,o);break;case 1:if(Fr(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(v){dt(o,o.return,v)}else{var d=Na(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){dt(o,o.return,v)}}u&64&&qE(o),u&512&&Ou(o,o.return);break;case 3:if(Fr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Mv(n,s)}catch(v){dt(o,o.return,v)}}break;case 27:s===null&&u&4&&KE(o);case 26:case 5:Fr(n,o),s===null&&u&4&&HE(o),u&512&&Ou(o,o.return);break;case 12:Fr(n,o);break;case 31:Fr(n,o),u&4&&JE(n,o);break;case 13:Fr(n,o),u&4&&WE(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=qR.bind(null,o),lC(n,o))));break;case 22:if(u=o.memoizedState!==null||Br,!u){s=s!==null&&s.memoizedState!==null||tn,d=Br;var p=tn;Br=u,(tn=s)&&!p?Hr(n,o,(o.subtreeFlags&8772)!==0):Fr(n,o),Br=d,tn=p}break;case 30:break;default:Fr(n,o)}}function $E(n){var s=n.alternate;s!==null&&(n.alternate=null,$E(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&fo(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var xt=null,Xn=!1;function qr(n,s,o){for(o=o.child;o!==null;)XE(n,s,o),o=o.sibling}function XE(n,s,o){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(ii,o)}catch{}switch(o.tag){case 26:tn||pr(o,s),qr(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:tn||pr(o,s);var u=xt,d=Xn;Ns(o.type)&&(xt=o.stateNode,Xn=!1),qr(n,s,o),qu(o.stateNode),xt=u,Xn=d;break;case 5:tn||pr(o,s);case 6:if(u=xt,d=Xn,xt=null,qr(n,s,o),xt=u,Xn=d,xt!==null)if(Xn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(o.stateNode)}catch(p){dt(o,s,p)}else try{xt.removeChild(o.stateNode)}catch(p){dt(o,s,p)}break;case 18:xt!==null&&(Xn?(n=xt,qT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Jo(n)):qT(xt,o.stateNode));break;case 4:u=xt,d=Xn,xt=o.stateNode.containerInfo,Xn=!0,qr(n,s,o),xt=u,Xn=d;break;case 0:case 11:case 14:case 15:As(2,o,s),tn||As(4,o,s),qr(n,s,o);break;case 1:tn||(pr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&FE(o,s,u)),qr(n,s,o);break;case 21:qr(n,s,o);break;case 22:tn=(u=tn)||o.memoizedState!==null,qr(n,s,o),tn=u;break;default:qr(n,s,o)}}function JE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Jo(n)}catch(o){dt(s,s.return,o)}}}function WE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Jo(n)}catch(o){dt(s,s.return,o)}}function VR(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new YE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new YE),s;default:throw Error(r(435,n.tag))}}function sf(n,s){var o=VR(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=FR.bind(null,n,u);u.then(d,d)}})}function Jn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],p=n,v=s,A=v;e:for(;A!==null;){switch(A.tag){case 27:if(Ns(A.type)){xt=A.stateNode,Xn=!1;break e}break;case 5:xt=A.stateNode,Xn=!1;break e;case 3:case 4:xt=A.stateNode.containerInfo,Xn=!0;break e}A=A.return}if(xt===null)throw Error(r(160));XE(p,v,d),xt=null,Xn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ZE(s,n),s=s.sibling}var Fi=null;function ZE(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Jn(s,n),Wn(n),u&4&&(As(3,n,n.return),Mu(3,n),As(5,n,n.return));break;case 1:Jn(s,n),Wn(n),u&512&&(tn||o===null||pr(o,o.return)),u&64&&Br&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=Fi;if(Jn(s,n),Wn(n),u&512&&(tn||o===null||pr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[tr]||p[$t]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),Cn(p,u,o),p[$t]=n,Xt(p),u=p;break e;case"link":var v=ZT("link","href",d).get(u+(o.href||""));if(v){for(var A=0;A<v.length;A++)if(p=v[A],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(A,1);break t}}p=d.createElement(u),Cn(p,u,o),d.head.appendChild(p);break;case"meta":if(v=ZT("meta","content",d).get(u+(o.content||""))){for(A=0;A<v.length;A++)if(p=v[A],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(A,1);break t}}p=d.createElement(u),Cn(p,u,o),d.head.appendChild(p);break;default:throw Error(r(468,u))}p[$t]=n,Xt(p),u=p}n.stateNode=u}else eb(d,n.type,n.stateNode);else n.stateNode=WT(d,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?eb(d,n.type,n.stateNode):WT(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&wp(n,n.memoizedProps,o.memoizedProps)}break;case 27:Jn(s,n),Wn(n),u&512&&(tn||o===null||pr(o,o.return)),o!==null&&u&4&&wp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Jn(s,n),Wn(n),u&512&&(tn||o===null||pr(o,o.return)),n.flags&32){d=n.stateNode;try{$n(d,"")}catch(Ee){dt(n,n.return,Ee)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,wp(n,d,o!==null?o.memoizedProps:d)),u&1024&&(Cp=!0);break;case 6:if(Jn(s,n),Wn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Ee){dt(n,n.return,Ee)}}break;case 3:if(Tf=null,d=Fi,Fi=vf(s.containerInfo),Jn(s,n),Fi=d,Wn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Jo(s.containerInfo)}catch(Ee){dt(n,n.return,Ee)}Cp&&(Cp=!1,eT(n));break;case 4:u=Fi,Fi=vf(n.stateNode.containerInfo),Jn(s,n),Wn(n),Fi=u;break;case 12:Jn(s,n),Wn(n);break;case 31:Jn(s,n),Wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,sf(n,u)));break;case 13:Jn(s,n),Wn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(of=Yt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,sf(n,u)));break;case 22:d=n.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,Q=Br,ie=tn;if(Br=Q||d,tn=ie||L,Jn(s,n),tn=ie,Br=Q,Wn(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||L||Br||tn||Ma(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){L=o=s;try{if(p=L.stateNode,d)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=L.stateNode;var oe=L.memoizedProps.style,J=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;A.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ee){dt(L,L.return,Ee)}}}else if(s.tag===6){if(o===null){L=s;try{L.stateNode.nodeValue=d?"":L.memoizedProps}catch(Ee){dt(L,L.return,Ee)}}}else if(s.tag===18){if(o===null){L=s;try{var ee=L.stateNode;d?FT(ee,!0):FT(L.stateNode,!1)}catch(Ee){dt(L,L.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,sf(n,o))));break;case 19:Jn(s,n),Wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,sf(n,u)));break;case 30:break;case 21:break;default:Jn(s,n),Wn(n)}}function Wn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(GE(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var d=o.stateNode,p=Ip(n);rf(n,p,d);break;case 5:var v=o.stateNode;o.flags&32&&($n(v,""),o.flags&=-33);var A=Ip(n);rf(n,A,v);break;case 3:case 4:var L=o.stateNode.containerInfo,Q=Ip(n);Rp(n,Q,L);break;default:throw Error(r(161))}}catch(ie){dt(n,n.return,ie)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function eT(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;eT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Fr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)QE(n,s.alternate,s),s=s.sibling}function Ma(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:As(4,s,s.return),Ma(s);break;case 1:pr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&FE(s,s.return,o),Ma(s);break;case 27:qu(s.stateNode);case 26:case 5:pr(s,s.return),Ma(s);break;case 22:s.memoizedState===null&&Ma(s);break;case 30:Ma(s);break;default:Ma(s)}n=n.sibling}}function Hr(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,p=s,v=p.flags;switch(p.tag){case 0:case 11:case 15:Hr(d,p,o),Mu(4,p);break;case 1:if(Hr(d,p,o),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Q){dt(u,u.return,Q)}if(u=p,d=u.updateQueue,d!==null){var A=u.stateNode;try{var L=d.shared.hiddenCallbacks;if(L!==null)for(d.shared.hiddenCallbacks=null,d=0;d<L.length;d++)Nv(L[d],A)}catch(Q){dt(u,u.return,Q)}}o&&v&64&&qE(p),Ou(p,p.return);break;case 27:KE(p);case 26:case 5:Hr(d,p,o),o&&u===null&&v&4&&HE(p),Ou(p,p.return);break;case 12:Hr(d,p,o);break;case 31:Hr(d,p,o),o&&v&4&&JE(d,p);break;case 13:Hr(d,p,o),o&&v&4&&WE(d,p);break;case 22:p.memoizedState===null&&Hr(d,p,o),Ou(p,p.return);break;case 30:break;default:Hr(d,p,o)}s=s.sibling}}function Dp(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&vu(o))}function xp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vu(n))}function Hi(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tT(n,s,o,u),s=s.sibling}function tT(n,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Hi(n,s,o,u),d&2048&&Mu(9,s);break;case 1:Hi(n,s,o,u);break;case 3:Hi(n,s,o,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vu(n)));break;case 12:if(d&2048){Hi(n,s,o,u),n=s.stateNode;try{var p=s.memoizedProps,v=p.id,A=p.onPostCommit;typeof A=="function"&&A(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){dt(s,s.return,L)}}else Hi(n,s,o,u);break;case 31:Hi(n,s,o,u);break;case 13:Hi(n,s,o,u);break;case 23:break;case 22:p=s.stateNode,v=s.alternate,s.memoizedState!==null?p._visibility&2?Hi(n,s,o,u):Vu(n,s):p._visibility&2?Hi(n,s,o,u):(p._visibility|=2,jo(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Dp(v,s);break;case 24:Hi(n,s,o,u),d&2048&&xp(s.alternate,s);break;default:Hi(n,s,o,u)}}function jo(n,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,v=s,A=o,L=u,Q=v.flags;switch(v.tag){case 0:case 11:case 15:jo(p,v,A,L,d),Mu(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?jo(p,v,A,L,d):Vu(p,v):(ie._visibility|=2,jo(p,v,A,L,d)),d&&Q&2048&&Dp(v.alternate,v);break;case 24:jo(p,v,A,L,d),d&&Q&2048&&xp(v.alternate,v);break;default:jo(p,v,A,L,d)}s=s.sibling}}function Vu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,d=u.flags;switch(u.tag){case 22:Vu(o,u),d&2048&&Dp(u.alternate,u);break;case 24:Vu(o,u),d&2048&&xp(u.alternate,u);break;default:Vu(o,u)}s=s.sibling}}var Pu=8192;function Bo(n,s,o){if(n.subtreeFlags&Pu)for(n=n.child;n!==null;)nT(n,s,o),n=n.sibling}function nT(n,s,o){switch(n.tag){case 26:Bo(n,s,o),n.flags&Pu&&n.memoizedState!==null&&EC(o,Fi,n.memoizedState,n.memoizedProps);break;case 5:Bo(n,s,o);break;case 3:case 4:var u=Fi;Fi=vf(n.stateNode.containerInfo),Bo(n,s,o),Fi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Pu,Pu=16777216,Bo(n,s,o),Pu=u):Bo(n,s,o));break;default:Bo(n,s,o)}}function iT(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function ku(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];gn=u,sT(u,n)}iT(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)rT(n),n=n.sibling}function rT(n){switch(n.tag){case 0:case 11:case 15:ku(n),n.flags&2048&&As(9,n,n.return);break;case 3:ku(n);break;case 12:ku(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,af(n)):ku(n);break;default:ku(n)}}function af(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];gn=u,sT(u,n)}iT(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:As(8,s,s.return),af(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,af(s));break;default:af(s)}n=n.sibling}}function sT(n,s){for(;gn!==null;){var o=gn;switch(o.tag){case 0:case 11:case 15:As(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,gn=u;else e:for(o=n;gn!==null;){u=gn;var d=u.sibling,p=u.return;if($E(u),u===o){gn=null;break e}if(d!==null){d.return=p,gn=d;break e}gn=p}}}var PR={getCacheForType:function(n){var s=In(Wt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return In(Wt).controller.signal}},kR=typeof WeakMap=="function"?WeakMap:Map,at=0,Tt=null,Qe=null,Xe=0,ft=0,fi=null,ws=!1,qo=!1,Np=!1,Gr=0,kt=0,Is=0,Oa=0,Mp=0,di=0,Fo=0,Lu=null,Zn=null,Op=!1,of=0,aT=0,lf=1/0,uf=null,Rs=null,ln=0,Cs=null,Ho=null,Kr=0,Vp=0,Pp=null,oT=null,Uu=0,kp=null;function mi(){return(at&2)!==0&&Xe!==0?Xe&-Xe:X.T!==null?qp():si()}function lT(){if(di===0)if((Xe&536870912)===0||et){var n=Dr;Dr<<=1,(Dr&3932160)===0&&(Dr=262144),di=n}else di=536870912;return n=ci.current,n!==null&&(n.flags|=32),di}function ei(n,s,o){(n===Tt&&(ft===2||ft===9)||n.cancelPendingCommit!==null)&&(Go(n,0),Ds(n,Xe,di,!1)),Yn(n,o),((at&2)===0||n!==Tt)&&(n===Tt&&((at&2)===0&&(Oa|=o),kt===4&&Ds(n,Xe,di,!1)),gr(n))}function uT(n,s,o){if((at&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Qt(n,s),d=u?zR(n,s):Up(n,s,!0),p=u;do{if(d===0){qo&&!u&&Ds(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!LR(o)){d=Up(n,s,!1),p=!1;continue}if(d===2){if(p=s,n.errorRecoveryDisabledLanes&p)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var A=n;d=Lu;var L=A.current.memoizedState.isDehydrated;if(L&&(Go(A,v).flags|=256),v=Up(A,v,!1),v!==2){if(Np&&!L){A.errorRecoveryDisabledLanes|=p,Oa|=p,d=4;break e}p=Zn,Zn=d,p!==null&&(Zn===null?Zn=p:Zn.push.apply(Zn,p))}d=v}if(p=!1,d!==2)continue}}if(d===1){Go(n,0),Ds(n,s,0,!0);break}e:{switch(u=n,p=d,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ds(u,s,di,!ws);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=of+300-Yt(),10<d)){if(Ds(u,s,di,!ws),Ct(u,0,!0)!==0)break e;Kr=s,u.timeoutHandle=jT(cT.bind(null,u,o,Zn,uf,Op,s,di,Oa,Fo,ws,p,"Throttled",-0,0),d);break e}cT(u,o,Zn,uf,Op,s,di,Oa,Fo,ws,p,null,-0,0)}}break}while(!0);gr(n)}function cT(n,s,o,u,d,p,v,A,L,Q,ie,oe,J,ee){if(n.timeoutHandle=-1,oe=s.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Li},nT(s,p,oe);var Ee=(p&62914560)===p?of-Yt():(p&4194048)===p?aT-Yt():0;if(Ee=TC(oe,Ee),Ee!==null){Kr=p,n.cancelPendingCommit=Ee(_T.bind(null,n,s,p,o,u,d,v,A,L,ie,oe,null,J,ee)),Ds(n,p,v,!Q);return}}_T(n,s,p,o,u,d,v,A,L)}function LR(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!li(p(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ds(n,s,o,u){s&=~Mp,s&=~Oa,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var p=31-It(d),v=1<<p;u[p]=-1,d&=~v}o!==0&&Mn(n,o,s)}function cf(){return(at&6)===0?(zu(0),!1):!0}function Lp(){if(Qe!==null){if(ft===0)var n=Qe.return;else n=Qe,Pr=Aa=null,Zm(n),Po=null,Tu=0,n=Qe;for(;n!==null;)BE(n.alternate,n),n=n.return;Qe=null}}function Go(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,iC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Kr=0,Lp(),Tt=n,Qe=o=Or(n.current,null),Xe=s,ft=0,fi=null,ws=!1,qo=Qt(n,s),Np=!1,Fo=di=Mp=Oa=Is=kt=0,Zn=Lu=null,Op=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-It(u),p=1<<d;s|=n[d],u&=~p}return Gr=s,xh(),o}function hT(n,s){Fe=null,X.H=Du,s===Vo||s===Uh?(s=Rv(),ft=3):s===Bm?(s=Rv(),ft=4):ft=s===pp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fi=s,Qe===null&&(kt=1,Wh(n,Ii(s,n.current)))}function fT(){var n=ci.current;return n===null?!0:(Xe&4194048)===Xe?xi===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?n===xi:!1}function dT(){var n=X.H;return X.H=Du,n===null?Du:n}function mT(){var n=X.A;return X.A=PR,n}function hf(){kt=4,ws||(Xe&4194048)!==Xe&&ci.current!==null||(qo=!0),(Is&134217727)===0&&(Oa&134217727)===0||Tt===null||Ds(Tt,Xe,di,!1)}function Up(n,s,o){var u=at;at|=2;var d=dT(),p=mT();(Tt!==n||Xe!==s)&&(uf=null,Go(n,s)),s=!1;var v=kt;e:do try{if(ft!==0&&Qe!==null){var A=Qe,L=fi;switch(ft){case 8:Lp(),v=6;break e;case 3:case 2:case 9:case 6:ci.current===null&&(s=!0);var Q=ft;if(ft=0,fi=null,Ko(n,A,L,Q),o&&qo){v=0;break e}break;default:Q=ft,ft=0,fi=null,Ko(n,A,L,Q)}}UR(),v=kt;break}catch(ie){hT(n,ie)}while(!0);return s&&n.shellSuspendCounter++,Pr=Aa=null,at=u,X.H=d,X.A=p,Qe===null&&(Tt=null,Xe=0,xh()),v}function UR(){for(;Qe!==null;)pT(Qe)}function zR(n,s){var o=at;at|=2;var u=dT(),d=mT();Tt!==n||Xe!==s?(uf=null,lf=Yt()+500,Go(n,s)):qo=Qt(n,s);e:do try{if(ft!==0&&Qe!==null){s=Qe;var p=fi;t:switch(ft){case 1:ft=0,fi=null,Ko(n,s,p,1);break;case 2:case 9:if(wv(p)){ft=0,fi=null,gT(s);break}s=function(){ft!==2&&ft!==9||Tt!==n||(ft=7),gr(n)},p.then(s,s);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:wv(p)?(ft=0,fi=null,gT(s)):(ft=0,fi=null,Ko(n,s,p,7));break;case 5:var v=null;switch(Qe.tag){case 26:v=Qe.memoizedState;case 5:case 27:var A=Qe;if(v?tb(v):A.stateNode.complete){ft=0,fi=null;var L=A.sibling;if(L!==null)Qe=L;else{var Q=A.return;Q!==null?(Qe=Q,ff(Q)):Qe=null}break t}}ft=0,fi=null,Ko(n,s,p,5);break;case 6:ft=0,fi=null,Ko(n,s,p,6);break;case 8:Lp(),kt=6;break e;default:throw Error(r(462))}}jR();break}catch(ie){hT(n,ie)}while(!0);return Pr=Aa=null,X.H=u,X.A=d,at=o,Qe!==null?0:(Tt=null,Xe=0,xh(),kt)}function jR(){for(;Qe!==null&&!Wi();)pT(Qe)}function pT(n){var s=zE(n.alternate,n,Gr);n.memoizedProps=n.pendingProps,s===null?ff(n):Qe=s}function gT(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=OE(o,s,s.pendingProps,s.type,void 0,Xe);break;case 11:s=OE(o,s,s.pendingProps,s.type.render,s.ref,Xe);break;case 5:Zm(s);default:BE(o,s),s=Qe=mv(s,Gr),s=zE(o,s,Gr)}n.memoizedProps=n.pendingProps,s===null?ff(n):Qe=s}function Ko(n,s,o,u){Pr=Aa=null,Zm(s),Po=null,Tu=0;var d=s.return;try{if(CR(n,d,s,o,Xe)){kt=1,Wh(n,Ii(o,n.current)),Qe=null;return}}catch(p){if(d!==null)throw Qe=d,p;kt=1,Wh(n,Ii(o,n.current)),Qe=null;return}s.flags&32768?(et||u===1?n=!0:qo||(Xe&536870912)!==0?n=!1:(ws=n=!0,(u===2||u===9||u===3||u===6)&&(u=ci.current,u!==null&&u.tag===13&&(u.flags|=16384))),yT(s,n)):ff(s)}function ff(n){var s=n;do{if((s.flags&32768)!==0){yT(s,ws);return}n=s.return;var o=NR(s.alternate,s,Gr);if(o!==null){Qe=o;return}if(s=s.sibling,s!==null){Qe=s;return}Qe=s=n}while(s!==null);kt===0&&(kt=5)}function yT(n,s){do{var o=MR(n.alternate,n);if(o!==null){o.flags&=32767,Qe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Qe=n;return}Qe=n=o}while(n!==null);kt=6,Qe=null}function _T(n,s,o,u,d,p,v,A,L){n.cancelPendingCommit=null;do df();while(ln!==0);if((at&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=Im,jt(n,o,p,v,A,L),n===Tt&&(Qe=Tt=null,Xe=0),Ho=s,Cs=n,Kr=o,Vp=p,Pp=d,oT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,HR(bn,function(){return ST(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,d=le.p,le.p=2,v=at,at|=4;try{OR(n,s,o)}finally{at=v,le.p=d,X.T=u}}ln=1,vT(),ET(),TT()}}function vT(){if(ln===1){ln=0;var n=Cs,s=Ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=le.p;le.p=2;var d=at;at|=4;try{ZE(s,n);var p=Xp,v=sv(n.containerInfo),A=p.focusedElem,L=p.selectionRange;if(v!==A&&A&&A.ownerDocument&&rv(A.ownerDocument.documentElement,A)){if(L!==null&&Tm(A)){var Q=L.start,ie=L.end;if(ie===void 0&&(ie=Q),"selectionStart"in A)A.selectionStart=Q,A.selectionEnd=Math.min(ie,A.value.length);else{var oe=A.ownerDocument||document,J=oe&&oe.defaultView||window;if(J.getSelection){var ee=J.getSelection(),Ee=A.textContent.length,Ne=Math.min(L.start,Ee),Et=L.end===void 0?Ne:Math.min(L.end,Ee);!ee.extend&&Ne>Et&&(v=Et,Et=Ne,Ne=v);var q=iv(A,Ne),B=iv(A,Et);if(q&&B&&(ee.rangeCount!==1||ee.anchorNode!==q.node||ee.anchorOffset!==q.offset||ee.focusNode!==B.node||ee.focusOffset!==B.offset)){var Y=oe.createRange();Y.setStart(q.node,q.offset),ee.removeAllRanges(),Ne>Et?(ee.addRange(Y),ee.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),ee.addRange(Y))}}}}for(oe=[],ee=A;ee=ee.parentNode;)ee.nodeType===1&&oe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<oe.length;A++){var ae=oe[A];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}wf=!!$p,Xp=$p=null}finally{at=d,le.p=u,X.T=o}}n.current=s,ln=2}}function ET(){if(ln===2){ln=0;var n=Cs,s=Ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=le.p;le.p=2;var d=at;at|=4;try{QE(n,s.alternate,s)}finally{at=d,le.p=u,X.T=o}}ln=3}}function TT(){if(ln===4||ln===3){ln=0,Zi();var n=Cs,s=Ho,o=Kr,u=oT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ln=5:(ln=0,Ho=Cs=null,bT(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Rs=null),Bn(o),s=s.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(ii,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,d=le.p,le.p=2,X.T=null;try{for(var p=n.onRecoverableError,v=0;v<u.length;v++){var A=u[v];p(A.value,{componentStack:A.stack})}}finally{X.T=s,le.p=d}}(Kr&3)!==0&&df(),gr(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===kp?Uu++:(Uu=0,kp=n):Uu=0,zu(0)}}function bT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,vu(s)))}function df(){return vT(),ET(),TT(),ST()}function ST(){if(ln!==5)return!1;var n=Cs,s=Vp;Vp=0;var o=Bn(Kr),u=X.T,d=le.p;try{le.p=32>o?32:o,X.T=null,o=Pp,Pp=null;var p=Cs,v=Kr;if(ln=0,Ho=Cs=null,Kr=0,(at&6)!==0)throw Error(r(331));var A=at;if(at|=4,rT(p.current),tT(p,p.current,v,o),at=A,zu(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(ii,p)}catch{}return!0}finally{le.p=d,X.T=u,bT(n,s)}}function AT(n,s,o){s=Ii(o,s),s=mp(n.stateNode,s,2),n=Ts(n,s,2),n!==null&&(Yn(n,2),gr(n))}function dt(n,s,o){if(n.tag===3)AT(n,n,o);else for(;s!==null;){if(s.tag===3){AT(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Rs===null||!Rs.has(u))){n=Ii(o,n),o=wE(2),u=Ts(s,o,2),u!==null&&(IE(o,u,s,n),Yn(u,2),gr(u));break}}s=s.return}}function zp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new kR;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(Np=!0,d.add(o),n=BR.bind(null,n,s,o),s.then(n,n))}function BR(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Tt===n&&(Xe&o)===o&&(kt===4||kt===3&&(Xe&62914560)===Xe&&300>Yt()-of?(at&2)===0&&Go(n,0):Mp|=o,Fo===Xe&&(Fo=0)),gr(n)}function wT(n,s){s===0&&(s=dn()),n=Ta(n,s),n!==null&&(Yn(n,s),gr(n))}function qR(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),wT(n,o)}function FR(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),wT(n,o)}function HR(n,s){return ct(n,s)}var mf=null,Yo=null,jp=!1,pf=!1,Bp=!1,xs=0;function gr(n){n!==Yo&&n.next===null&&(Yo===null?mf=Yo=n:Yo=Yo.next=n),pf=!0,jp||(jp=!0,KR())}function zu(n,s){if(!Bp&&pf){Bp=!0;do for(var o=!1,u=mf;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var v=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-It(42|n)+1)-1,p&=d&~(v&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,DT(u,p))}else p=Xe,p=Ct(u,u===Tt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Qt(u,p)||(o=!0,DT(u,p));u=u.next}while(o);Bp=!1}}function GR(){IT()}function IT(){pf=jp=!1;var n=0;xs!==0&&nC()&&(n=xs);for(var s=Yt(),o=null,u=mf;u!==null;){var d=u.next,p=RT(u,s);p===0?(u.next=null,o===null?mf=d:o.next=d,d===null&&(Yo=o)):(o=u,(n!==0||(p&3)!==0)&&(pf=!0)),u=d}ln!==0&&ln!==5||zu(n),xs!==0&&(xs=0)}function RT(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var v=31-It(p),A=1<<v,L=d[v];L===-1?((A&o)===0||(A&u)!==0)&&(d[v]=Nn(A,s)):L<=s&&(n.expiredLanes|=A),p&=~A}if(s=Tt,o=Xe,o=Ct(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(ft===2||ft===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&En(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Qt(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&En(u),Bn(o)){case 2:case 8:o=Tn;break;case 32:o=bn;break;case 268435456:o=bt;break;default:o=bn}return u=CT.bind(null,n),o=ct(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&En(u),n.callbackPriority=2,n.callbackNode=null,2}function CT(n,s){if(ln!==0&&ln!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(df()&&n.callbackNode!==o)return null;var u=Xe;return u=Ct(n,n===Tt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(uT(n,u,s),RT(n,Yt()),n.callbackNode!=null&&n.callbackNode===o?CT.bind(null,n):null)}function DT(n,s){if(df())return null;uT(n,s,!0)}function KR(){rC(function(){(at&6)!==0?ct(vi,GR):IT()})}function qp(){if(xs===0){var n=Mo;n===0&&(n=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),xs=n}return xs}function xT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yo(""+n)}function NT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function YR(n,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var p=xT((d[mn]||null).action),v=u.submitter;v&&(s=(s=v[mn]||null)?xT(s.formAction):v.getAttribute("formAction"),s!==null&&(p=s,v=null));var A=new ur("action","action",null,u,d);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(xs!==0){var L=v?NT(d,v):new FormData(d);lp(o,{pending:!0,data:L,method:d.method,action:p},null,L)}}else typeof p=="function"&&(A.preventDefault(),L=v?NT(d,v):new FormData(d),lp(o,{pending:!0,data:L,method:d.method,action:p},p,L))},currentTarget:d}]})}}for(var Fp=0;Fp<wm.length;Fp++){var Hp=wm[Fp],QR=Hp.toLowerCase(),$R=Hp[0].toUpperCase()+Hp.slice(1);qi(QR,"on"+$R)}qi(lv,"onAnimationEnd"),qi(uv,"onAnimationIteration"),qi(cv,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(hR,"onTransitionRun"),qi(fR,"onTransitionStart"),qi(dR,"onTransitionCancel"),qi(hv,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function MT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var v=u.length-1;0<=v;v--){var A=u[v],L=A.instance,Q=A.currentTarget;if(A=A.listener,L!==p&&d.isPropagationStopped())break e;p=A,d.currentTarget=Q;try{p(d)}catch(ie){Dh(ie)}d.currentTarget=null,p=L}else for(v=0;v<u.length;v++){if(A=u[v],L=A.instance,Q=A.currentTarget,A=A.listener,L!==p&&d.isPropagationStopped())break e;p=A,d.currentTarget=Q;try{p(d)}catch(ie){Dh(ie)}d.currentTarget=null,p=L}}}}function $e(n,s){var o=s[ho];o===void 0&&(o=s[ho]=new Set);var u=n+"__bubble";o.has(u)||(OT(s,n,2,!1),o.add(u))}function Gp(n,s,o){var u=0;s&&(u|=4),OT(o,n,u,s)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Kp(n){if(!n[gf]){n[gf]=!0,Wl.forEach(function(o){o!=="selectionchange"&&(XR.has(o)||Gp(o,!1,n),Gp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[gf]||(s[gf]=!0,Gp("selectionchange",!1,s))}}function OT(n,s,o,u){switch(lb(s)){case 2:var d=AC;break;case 8:d=wC;break;default:d=og}o=d.bind(null,s,o,n),d=void 0,!da||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,o,{capture:!0,passive:d}):n.addEventListener(s,o,!0):d!==void 0?n.addEventListener(s,o,{passive:d}):n.addEventListener(s,o,!1)}function Yp(n,s,o,u,d){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var A=u.stateNode.containerInfo;if(A===d)break;if(v===4)for(v=u.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;A!==null;){if(v=nr(A),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){u=p=v;continue e}A=A.parentNode}}u=u.return}hs(function(){var Q=p,ie=bi(o),oe=[];e:{var J=fv.get(n);if(J!==void 0){var ee=ur,Ee=n;switch(n){case"keypress":if(pa(o)===0)break e;case"keydown":case"keyup":ee=Ih;break;case"focusin":Ee="focus",ee=ya;break;case"focusout":Ee="blur",ee=ya;break;case"beforeblur":case"afterblur":ee=ya;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case lv:case uv:case cv:ee=vh;break;case hv:ee=C;break;case"scroll":case"scrollend":ee=cu;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=Eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Mr;break;case"toggle":case"beforetoggle":ee=qe}var Ne=(s&4)!==0,Et=!Ne&&(n==="scroll"||n==="scrollend"),q=Ne?J!==null?J+"Capture":null:J;Ne=[];for(var B=Q,Y;B!==null;){var ae=B;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||q===null||(ae=Ui(B,q),ae!=null&&Ne.push(Bu(B,ae,Y))),Et)break;B=B.return}0<Ne.length&&(J=new ee(J,Ee,null,o,ie),oe.push({event:J,listeners:Ne}))}}if((s&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",J&&o!==ou&&(Ee=o.relatedTarget||o.fromElement)&&(nr(Ee)||Ee[er]))break e;if((ee||J)&&(J=ie.window===ie?ie:(J=ie.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(Ee=o.relatedTarget||o.toElement,ee=Q,Ee=Ee?nr(Ee):null,Ee!==null&&(Et=l(Ee),Ne=Ee.tag,Ee!==Et||Ne!==5&&Ne!==27&&Ne!==6)&&(Ee=null)):(ee=null,Ee=Q),ee!==Ee)){if(Ne=hu,ae="onMouseLeave",q="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Mr,ae="onPointerLeave",q="onPointerEnter",B="pointer"),Et=ee==null?J:ai(ee),Y=Ee==null?J:ai(Ee),J=new Ne(ae,B+"leave",ee,o,ie),J.target=Et,J.relatedTarget=Y,ae=null,nr(ie)===Q&&(Ne=new Ne(q,B+"enter",Ee,o,ie),Ne.target=Y,Ne.relatedTarget=Et,ae=Ne),Et=ae,ee&&Ee)t:{for(Ne=JR,q=ee,B=Ee,Y=0,ae=q;ae;ae=Ne(ae))Y++;ae=0;for(var Re=B;Re;Re=Ne(Re))ae++;for(;0<Y-ae;)q=Ne(q),Y--;for(;0<ae-Y;)B=Ne(B),ae--;for(;Y--;){if(q===B||B!==null&&q===B.alternate){Ne=q;break t}q=Ne(q),B=Ne(B)}Ne=null}else Ne=null;ee!==null&&VT(oe,J,ee,Ne,!1),Ee!==null&&Et!==null&&VT(oe,Et,Ee,Ne,!0)}}e:{if(J=Q?ai(Q):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var it=J_;else if($_(J))if(W_)it=lR;else{it=aR;var be=sR}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Q&&go(Q.elementType)&&(it=J_):it=oR;if(it&&(it=it(n,Q))){X_(oe,it,o,ie);break e}be&&be(n,J,Q),n==="focusout"&&Q&&J.type==="number"&&Q.memoizedProps.value!=null&&ru(J,"number",J.value)}switch(be=Q?ai(Q):window,n){case"focusin":($_(be)||be.contentEditable==="true")&&(Ao=be,bm=Q,gu=null);break;case"focusout":gu=bm=Ao=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,av(oe,o,ie);break;case"selectionchange":if(cR)break;case"keydown":case"keyup":av(oe,o,ie)}var He;if(st)e:{switch(n){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else So?_a(n,o)&&(Je="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Je="onCompositionStart");Je&&(fr&&o.locale!=="ko"&&(So||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&So&&(He=uu()):(lr=ie,lu="value"in lr?lr.value:lr.textContent,So=!0)),be=yf(Q,Je),0<be.length&&(Je=new hr(Je,n,null,o,ie),oe.push({event:Je,listeners:be}),He?Je.data=He:(He=bo(o),He!==null&&(Je.data=He)))),(He=Ai?tR(n,o):nR(n,o))&&(Je=yf(Q,"onBeforeInput"),0<Je.length&&(be=new hr("onBeforeInput","beforeinput",null,o,ie),oe.push({event:be,listeners:Je}),be.data=He)),YR(oe,n,Q,o,ie)}MT(oe,s)})}function Bu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function yf(n,s){for(var o=s+"Capture",u=[];n!==null;){var d=n,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Ui(n,o),d!=null&&u.unshift(Bu(n,d,p)),d=Ui(n,s),d!=null&&u.push(Bu(n,d,p))),n.tag===3)return u;n=n.return}return[]}function JR(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function VT(n,s,o,u,d){for(var p=s._reactName,v=[];o!==null&&o!==u;){var A=o,L=A.alternate,Q=A.stateNode;if(A=A.tag,L!==null&&L===u)break;A!==5&&A!==26&&A!==27||Q===null||(L=Q,d?(Q=Ui(o,p),Q!=null&&v.unshift(Bu(o,Q,L))):d||(Q=Ui(o,p),Q!=null&&v.push(Bu(o,Q,L)))),o=o.return}v.length!==0&&n.push({event:s,listeners:v})}var WR=/\r\n?/g,ZR=/\u0000|\uFFFD/g;function PT(n){return(typeof n=="string"?n:""+n).replace(WR,`
`).replace(ZR,"")}function kT(n,s){return s=PT(s),PT(n)===s}function vt(n,s,o,u,d,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||$n(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&$n(n,""+u);break;case"className":oi(n,"class",u);break;case"tabIndex":oi(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(n,o,u);break;case"style":au(n,u,p);break;case"data":if(s!=="object"){oi(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=yo(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&vt(n,s,"name",d.name,d,null),vt(n,s,"formEncType",d.formEncType,d,null),vt(n,s,"formMethod",d.formMethod,d,null),vt(n,s,"formTarget",d.formTarget,d,null)):(vt(n,s,"encType",d.encType,d,null),vt(n,s,"method",d.method,d,null),vt(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=yo(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Li);break;case"onScroll":u!=null&&$e("scroll",n);break;case"onScrollEnd":u!=null&&$e("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=yo(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":$e("beforetoggle",n),$e("toggle",n),mo(n,"popover",u);break;case"xlinkActuate":Jt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Jt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Jt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Jt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Jt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Jt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":mo(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gh.get(o)||o,mo(n,o,u))}}function Qp(n,s,o,u,d,p){switch(o){case"style":au(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?$n(n,u):(typeof u=="number"||typeof u=="bigint")&&$n(n,""+u);break;case"onScroll":u!=null&&$e("scroll",n);break;case"onScrollEnd":u!=null&&$e("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),p=n[mn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):mo(n,o,u)}}}function Cn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",n),$e("load",n);var u=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:vt(n,s,p,v,o,null)}}d&&vt(n,s,"srcSet",o.srcSet,o,null),u&&vt(n,s,"src",o.src,o,null);return;case"input":$e("invalid",n);var A=p=v=d=null,L=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var ie=o[u];if(ie!=null)switch(u){case"name":d=ie;break;case"type":v=ie;break;case"checked":L=ie;break;case"defaultChecked":Q=ie;break;case"value":p=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,s));break;default:vt(n,s,u,ie,o,null)}}dh(n,p,A,L,Q,v,d,!1);return;case"select":$e("invalid",n),u=v=p=null;for(d in o)if(o.hasOwnProperty(d)&&(A=o[d],A!=null))switch(d){case"value":p=A;break;case"defaultValue":v=A;break;case"multiple":u=A;default:vt(n,s,d,A,o,null)}s=p,o=v,n.multiple=!!u,s!=null?os(n,!!u,s,!1):o!=null&&os(n,!!u,o,!0);return;case"textarea":$e("invalid",n),p=d=u=null;for(v in o)if(o.hasOwnProperty(v)&&(A=o[v],A!=null))switch(v){case"value":u=A;break;case"defaultValue":d=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:vt(n,s,v,A,o,null)}ls(n,u,d,p);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(u=o[L],u!=null))switch(L){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:vt(n,s,L,u,o,null)}return;case"dialog":$e("beforetoggle",n),$e("toggle",n),$e("cancel",n),$e("close",n);break;case"iframe":case"object":$e("load",n);break;case"video":case"audio":for(u=0;u<ju.length;u++)$e(ju[u],n);break;case"image":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"embed":case"source":case"link":$e("error",n),$e("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:vt(n,s,Q,u,o,null)}return;default:if(go(s)){for(ie in o)o.hasOwnProperty(ie)&&(u=o[ie],u!==void 0&&Qp(n,s,ie,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&vt(n,s,A,u,o,null))}function eC(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,v=null,A=null,L=null,Q=null,ie=null;for(ee in o){var oe=o[ee];if(o.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":L=oe;default:u.hasOwnProperty(ee)||vt(n,s,ee,null,u,oe)}}for(var J in u){var ee=u[J];if(oe=o[J],u.hasOwnProperty(J)&&(ee!=null||oe!=null))switch(J){case"type":p=ee;break;case"name":d=ee;break;case"checked":Q=ee;break;case"defaultChecked":ie=ee;break;case"value":v=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:ee!==oe&&vt(n,s,J,ee,u,oe)}}po(n,v,A,L,Q,ie,p,d);return;case"select":ee=v=A=J=null;for(p in o)if(L=o[p],o.hasOwnProperty(p)&&L!=null)switch(p){case"value":break;case"multiple":ee=L;default:u.hasOwnProperty(p)||vt(n,s,p,null,u,L)}for(d in u)if(p=u[d],L=o[d],u.hasOwnProperty(d)&&(p!=null||L!=null))switch(d){case"value":J=p;break;case"defaultValue":A=p;break;case"multiple":v=p;default:p!==L&&vt(n,s,d,p,u,L)}s=A,o=v,u=ee,J!=null?os(n,!!o,J,!1):!!u!=!!o&&(s!=null?os(n,!!o,s,!0):os(n,!!o,o?[]:"",!1));return;case"textarea":ee=J=null;for(A in o)if(d=o[A],o.hasOwnProperty(A)&&d!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:vt(n,s,A,null,u,d)}for(v in u)if(d=u[v],p=o[v],u.hasOwnProperty(v)&&(d!=null||p!=null))switch(v){case"value":J=d;break;case"defaultValue":ee=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==p&&vt(n,s,v,d,u,p)}mh(n,J,ee);return;case"option":for(var Ee in o)if(J=o[Ee],o.hasOwnProperty(Ee)&&J!=null&&!u.hasOwnProperty(Ee))switch(Ee){case"selected":n.selected=!1;break;default:vt(n,s,Ee,null,u,J)}for(L in u)if(J=u[L],ee=o[L],u.hasOwnProperty(L)&&J!==ee&&(J!=null||ee!=null))switch(L){case"selected":n.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:vt(n,s,L,J,u,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in o)J=o[Ne],o.hasOwnProperty(Ne)&&J!=null&&!u.hasOwnProperty(Ne)&&vt(n,s,Ne,null,u,J);for(Q in u)if(J=u[Q],ee=o[Q],u.hasOwnProperty(Q)&&J!==ee&&(J!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:vt(n,s,Q,J,u,ee)}return;default:if(go(s)){for(var Et in o)J=o[Et],o.hasOwnProperty(Et)&&J!==void 0&&!u.hasOwnProperty(Et)&&Qp(n,s,Et,void 0,u,J);for(ie in u)J=u[ie],ee=o[ie],!u.hasOwnProperty(ie)||J===ee||J===void 0&&ee===void 0||Qp(n,s,ie,J,u,ee);return}}for(var q in o)J=o[q],o.hasOwnProperty(q)&&J!=null&&!u.hasOwnProperty(q)&&vt(n,s,q,null,u,J);for(oe in u)J=u[oe],ee=o[oe],!u.hasOwnProperty(oe)||J===ee||J==null&&ee==null||vt(n,s,oe,J,u,ee)}function LT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tC(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],p=d.transferSize,v=d.initiatorType,A=d.duration;if(p&&A&&LT(v)){for(v=0,A=d.responseEnd,u+=1;u<o.length;u++){var L=o[u],Q=L.startTime;if(Q>A)break;var ie=L.transferSize,oe=L.initiatorType;ie&&LT(oe)&&(L=L.responseEnd,v+=ie*(L<A?1:(A-Q)/(L-Q)))}if(--u,s+=8*(p+v)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var $p=null,Xp=null;function _f(n){return n.nodeType===9?n:n.ownerDocument}function UT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Jp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wp=null;function nC(){var n=window.event;return n&&n.type==="popstate"?n===Wp?!1:(Wp=n,!0):(Wp=null,!1)}var jT=typeof setTimeout=="function"?setTimeout:void 0,iC=typeof clearTimeout=="function"?clearTimeout:void 0,BT=typeof Promise=="function"?Promise:void 0,rC=typeof queueMicrotask=="function"?queueMicrotask:typeof BT<"u"?function(n){return BT.resolve(null).then(n).catch(sC)}:jT;function sC(n){setTimeout(function(){throw n})}function Ns(n){return n==="head"}function qT(n,s){var o=s,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),Jo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")qu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,qu(o);for(var p=o.firstChild;p;){var v=p.nextSibling,A=p.nodeName;p[tr]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&qu(n.ownerDocument.body);o=d}while(o);Jo(s)}function FT(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Zp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zp(o),fo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function aC(n,s,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[tr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Ni(n.nextSibling),n===null)break}return null}function oC(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ni(n.nextSibling),n===null))return null;return n}function HT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ni(n.nextSibling),n===null))return null;return n}function eg(n){return n.data==="$?"||n.data==="$~"}function tg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function lC(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ni(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var ng=null;function GT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Ni(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function KT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function YT(n,s,o){switch(s=_f(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function qu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);fo(n)}var Mi=new Map,QT=new Set;function vf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Yr=le.d;le.d={f:uC,r:cC,D:hC,C:fC,L:dC,m:mC,X:gC,S:pC,M:yC};function uC(){var n=Yr.f(),s=cf();return n||s}function cC(n){var s=Ti(n);s!==null&&s.tag===5&&s.type==="form"?hE(s):Yr.r(n)}var Qo=typeof document>"u"?null:document;function $T(n,s,o){var u=Qo;if(u&&typeof s=="string"&&s){var d=Qn(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),QT.has(d)||(QT.add(d),n={rel:n,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Cn(s,"link",n),Xt(s),u.head.appendChild(s)))}}function hC(n){Yr.D(n),$T("dns-prefetch",n,null)}function fC(n,s){Yr.C(n,s),$T("preconnect",n,s)}function dC(n,s,o){Yr.L(n,s,o);var u=Qo;if(u&&n&&s){var d='link[rel="preload"][as="'+Qn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Qn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Qn(o.imageSizes)+'"]')):d+='[href="'+Qn(n)+'"]';var p=d;switch(s){case"style":p=$o(n);break;case"script":p=Xo(n)}Mi.has(p)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Mi.set(p,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(Fu(p))||s==="script"&&u.querySelector(Hu(p))||(s=u.createElement("link"),Cn(s,"link",n),Xt(s),u.head.appendChild(s)))}}function mC(n,s){Yr.m(n,s);var o=Qo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Qn(u)+'"][href="'+Qn(n)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Xo(n)}if(!Mi.has(p)&&(n=E({rel:"modulepreload",href:n},s),Mi.set(p,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Hu(p)))return}u=o.createElement("link"),Cn(u,"link",n),Xt(u),o.head.appendChild(u)}}}function pC(n,s,o){Yr.S(n,s,o);var u=Qo;if(u&&n){var d=ir(u).hoistableStyles,p=$o(n);s=s||"default";var v=d.get(p);if(!v){var A={loading:0,preload:null};if(v=u.querySelector(Fu(p)))A.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Mi.get(p))&&ig(n,o);var L=v=u.createElement("link");Xt(L),Cn(L,"link",n),L._p=new Promise(function(Q,ie){L.onload=Q,L.onerror=ie}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ef(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:A},d.set(p,v)}}}function gC(n,s){Yr.X(n,s);var o=Qo;if(o&&n){var u=ir(o).hoistableScripts,d=Xo(n),p=u.get(d);p||(p=o.querySelector(Hu(d)),p||(n=E({src:n,async:!0},s),(s=Mi.get(d))&&rg(n,s),p=o.createElement("script"),Xt(p),Cn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function yC(n,s){Yr.M(n,s);var o=Qo;if(o&&n){var u=ir(o).hoistableScripts,d=Xo(n),p=u.get(d);p||(p=o.querySelector(Hu(d)),p||(n=E({src:n,async:!0,type:"module"},s),(s=Mi.get(d))&&rg(n,s),p=o.createElement("script"),Xt(p),Cn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function XT(n,s,o,u){var d=(d=ye.current)?vf(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=$o(o.href),o=ir(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=$o(o.href);var p=ir(d).hoistableStyles,v=p.get(n);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,v),(p=d.querySelector(Fu(n)))&&!p._p&&(v.instance=p,v.state.loading=5),Mi.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Mi.set(n,o),p||_C(d,n,o,v.state))),s&&u===null)throw Error(r(528,""));return v}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xo(o),o=ir(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function $o(n){return'href="'+Qn(n)+'"'}function Fu(n){return'link[rel="stylesheet"]['+n+"]"}function JT(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function _C(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Cn(s,"link",o),Xt(s),n.head.appendChild(s))}function Xo(n){return'[src="'+Qn(n)+'"]'}function Hu(n){return"script[async]"+n}function WT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Qn(o.href)+'"]');if(u)return s.instance=u,Xt(u),u;var d=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Xt(u),Cn(u,"style",d),Ef(u,o.precedence,n),s.instance=u;case"stylesheet":d=$o(o.href);var p=n.querySelector(Fu(d));if(p)return s.state.loading|=4,s.instance=p,Xt(p),p;u=JT(o),(d=Mi.get(d))&&ig(u,d),p=(n.ownerDocument||n).createElement("link"),Xt(p);var v=p;return v._p=new Promise(function(A,L){v.onload=A,v.onerror=L}),Cn(p,"link",u),s.state.loading|=4,Ef(p,o.precedence,n),s.instance=p;case"script":return p=Xo(o.src),(d=n.querySelector(Hu(p)))?(s.instance=d,Xt(d),d):(u=o,(d=Mi.get(p))&&(u=E({},o),rg(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Xt(d),Cn(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ef(u,o.precedence,n));return s.instance}function Ef(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,v=0;v<u.length;v++){var A=u[v];if(A.dataset.precedence===s)p=A;else if(p!==d)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function ig(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function rg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Tf=null;function ZT(n,s,o){if(Tf===null){var u=new Map,d=Tf=new Map;d.set(o,u)}else d=Tf,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var p=o[d];if(!(p[tr]||p[$t]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(s)||"";v=n+v;var A=u.get(v);A?A.push(p):u.set(v,[p])}}return u}function eb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function vC(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function tb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function EC(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=$o(u.href),p=s.querySelector(Fu(d));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=bf.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=p,Xt(p);return}p=s.ownerDocument||s,u=JT(u),(d=Mi.get(d))&&ig(u,d),p=p.createElement("link"),Xt(p);var v=p;v._p=new Promise(function(A,L){v.onload=A,v.onerror=L}),Cn(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=bf.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var sg=0;function TC(n,s){return n.stylesheets&&n.count===0&&Af(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Af(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&sg===0&&(sg=62500*tC());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Af(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>sg?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function bf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Af(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Sf=null;function Af(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Sf=new Map,s.forEach(bC,n),Sf=null,bf.call(n))}function bC(n,s){if(!(s.state.loading&4)){var o=Sf.get(n);if(o)var u=o.get(null);else{o=new Map,Sf.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var v=d[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}d=s.instance,v=d.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,d),o.set(v,d),this.count++,u=bf.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var Gu={$$typeof:H,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function SC(n,s,o,u,d,p,v,A,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function nb(n,s,o,u,d,p,v,A,L,Q,ie,oe){return n=new SC(n,s,o,v,L,Q,ie,oe,A),s=1,p===!0&&(s|=24),p=ui(3,null,null,s),n.current=p,p.stateNode=n,s=Um(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},qm(p),n}function ib(n){return n?(n=Ro,n):Ro}function rb(n,s,o,u,d,p){d=ib(d),u.context===null?u.context=d:u.pendingContext=d,u=Es(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ts(n,u,s),o!==null&&(ei(o,n,s),Su(o,n,s))}function sb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function ag(n,s){sb(n,s),(n=n.alternate)&&sb(n,s)}function ab(n){if(n.tag===13||n.tag===31){var s=Ta(n,67108864);s!==null&&ei(s,n,67108864),ag(n,67108864)}}function ob(n){if(n.tag===13||n.tag===31){var s=mi();s=ri(s);var o=Ta(n,s);o!==null&&ei(o,n,s),ag(n,s)}}var wf=!0;function AC(n,s,o,u){var d=X.T;X.T=null;var p=le.p;try{le.p=2,og(n,s,o,u)}finally{le.p=p,X.T=d}}function wC(n,s,o,u){var d=X.T;X.T=null;var p=le.p;try{le.p=8,og(n,s,o,u)}finally{le.p=p,X.T=d}}function og(n,s,o,u){if(wf){var d=lg(u);if(d===null)Yp(n,s,u,If,o),ub(n,u);else if(RC(d,n,s,o,u))u.stopPropagation();else if(ub(n,u),s&4&&-1<IC.indexOf(n)){for(;d!==null;){var p=Ti(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Rt(p.pendingLanes);if(v!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var L=1<<31-It(v);A.entanglements[1]|=L,v&=~L}gr(p),(at&6)===0&&(lf=Yt()+500,zu(0))}}break;case 31:case 13:A=Ta(p,2),A!==null&&ei(A,p,2),cf(),ag(p,2)}if(p=lg(u),p===null&&Yp(n,s,u,If,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else Yp(n,s,u,null,o)}}function lg(n){return n=bi(n),ug(n)}var If=null;function ug(n){if(If=null,n=nr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=f(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return If=n,null}function lb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ki()){case vi:return 2;case Tn:return 8;case bn:case Be:return 32;case bt:return 268435456;default:return 32}default:return 32}}var cg=!1,Ms=null,Os=null,Vs=null,Ku=new Map,Yu=new Map,Ps=[],IC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ub(n,s){switch(n){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":Ku.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(s.pointerId)}}function Qu(n,s,o,u,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},s!==null&&(s=Ti(s),s!==null&&ab(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function RC(n,s,o,u,d){switch(s){case"focusin":return Ms=Qu(Ms,n,s,o,u,d),!0;case"dragenter":return Os=Qu(Os,n,s,o,u,d),!0;case"mouseover":return Vs=Qu(Vs,n,s,o,u,d),!0;case"pointerover":var p=d.pointerId;return Ku.set(p,Qu(Ku.get(p)||null,n,s,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Yu.set(p,Qu(Yu.get(p)||null,n,s,o,u,d)),!0}return!1}function cb(n){var s=nr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Sn(n.priority,function(){ob(o)});return}}else if(s===31){if(s=f(o),s!==null){n.blockedOn=s,Sn(n.priority,function(){ob(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=lg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);ou=u,o.target.dispatchEvent(u),ou=null}else return s=Ti(o),s!==null&&ab(s),n.blockedOn=o,!1;s.shift()}return!0}function hb(n,s,o){Rf(n)&&o.delete(s)}function CC(){cg=!1,Ms!==null&&Rf(Ms)&&(Ms=null),Os!==null&&Rf(Os)&&(Os=null),Vs!==null&&Rf(Vs)&&(Vs=null),Ku.forEach(hb),Yu.forEach(hb)}function Cf(n,s){n.blockedOn===s&&(n.blockedOn=null,cg||(cg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,CC)))}var Df=null;function fb(n){Df!==n&&(Df=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Df===n&&(Df=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(ug(u||o)===null)continue;break}var p=Ti(o);p!==null&&(n.splice(s,3),s-=3,lp(p,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Jo(n){function s(L){return Cf(L,n)}Ms!==null&&Cf(Ms,n),Os!==null&&Cf(Os,n),Vs!==null&&Cf(Vs,n),Ku.forEach(s),Yu.forEach(s);for(var o=0;o<Ps.length;o++){var u=Ps[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ps.length&&(o=Ps[0],o.blockedOn===null);)cb(o),o.blockedOn===null&&Ps.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],p=o[u+1],v=d[mn]||null;if(typeof p=="function")v||fb(o);else if(v){var A=null;if(p&&p.hasAttribute("formAction")){if(d=p,v=p[mn]||null)A=v.formAction;else if(ug(d)!==null)continue}else A=v.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),fb(o)}}}function db(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function hg(n){this._internalRoot=n}xf.prototype.render=hg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=mi();rb(o,u,n,s,null,null)},xf.prototype.unmount=hg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;rb(n.current,2,null,n,null,null),cf(),s[er]=null}};function xf(n){this._internalRoot=n}xf.prototype.unstable_scheduleHydration=function(n){if(n){var s=si();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Ps.length&&s!==0&&s<Ps[o].priority;o++);Ps.splice(o,0,n),o===0&&cb(n)}};var mb=e.version;if(mb!=="19.2.4")throw Error(r(527,mb,"19.2.4"));le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var DC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{ii=Nf.inject(DC),on=Nf}catch{}}return Xu.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,u="",d=TE,p=bE,v=SE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=nb(n,1,!1,null,null,o,u,null,d,p,v,db),n[er]=s.current,Kp(n),new hg(s)},Xu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var u=!1,d="",p=TE,v=bE,A=SE,L=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(L=o.formState)),s=nb(n,1,!0,s,o??null,u,d,L,p,v,A,db),s.context=ib(null),o=s.current,u=mi(),u=ri(u),d=Es(u),d.callback=null,Ts(o,d,u),o=u,s.current.lanes=o,Yn(s,o),gr(s),n[er]=s.current,Kp(n),new xf(s)},Xu.version="19.2.4",Xu}var Ab;function zC(){if(Ab)return mg.exports;Ab=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),mg.exports=UC(),mg.exports}var jC=zC();const BC=()=>{};var wb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},qC=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],f=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},JS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,f=c?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let b=(f&15)<<2|g>>6,w=g&63;m||(w=64,c||(b=64)),r.push(t[_],t[E],t[b],t[w])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(XS(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):qC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const E=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||g==null||E==null)throw new FC;const b=l<<2|f>>4;if(r.push(b),g!==64){const w=f<<4&240|g>>2;if(r.push(w),E!==64){const P=g<<6&192|E;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class FC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HC=function(i){const e=XS(i);return JS.encodeByteArray(e,!0)},WS=function(i){return HC(i).replace(/\./g,"")},ZS=function(i){try{return JS.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=()=>eA().__FIREBASE_DEFAULTS__,KC=()=>{if(typeof process>"u"||typeof wb>"u")return;const i=wb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},YC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ZS(i[1]);return e&&JSON.parse(e)},jd=()=>{try{return BC()||GC()||KC()||YC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},QC=i=>{var e,t;return(t=(e=jd())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},tA=()=>{var i;return(i=jd())==null?void 0:i.config},nA=i=>{var e;return(e=jd())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iA(i){return(await fetch(i,{credentials:"include"})).ok}const dc={};function XC(){const i={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?i.emulator.push(e):i.prod.push(e);return i}function JC(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Ib=!1;function WC(i,e){if(typeof window>"u"||typeof document>"u"||!jl(window.location.host)||dc[i]===e||dc[i]||Ib)return;dc[i]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=XC().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Ib=!0,c()},b}function _(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=JC(r),w=t("text"),P=document.getElementById(w)||document.createElement("span"),D=t("learnmore"),M=document.getElementById(D)||document.createElement("a"),U=t("preprendIcon"),G=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const H=b.element;f(H),_(M,D);const re=g();m(G,U),H.append(G,P,M,re),document.body.appendChild(H)}l?(P.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function rA(){var e;const i=(e=jd())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tD(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function nD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iD(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function sA(){return!rA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aA(){return!rA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function oA(){try{return typeof indexedDB=="object"}catch{return!1}}function rD(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="FirebaseError";class is extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=sD,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kc.prototype.create)}}class Kc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?aD(l,r):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new is(a,f,r)}}function aD(i,e){return i.replace(oD,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const oD=/\{\$([^}]+)}/g;function lD(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Xa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],c=e[a];if(Rb(l)&&Rb(c)){if(!Xa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Rb(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uD(i,e){const t=new cD(i,e);return t.subscribe.bind(t)}class cD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");hD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=_g),a.error===void 0&&(a.error=_g),a.complete===void 0&&(a.complete=_g);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hD(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function _g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(i){return i&&i._delegate?i._delegate:i}class Ja{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new $C;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mD(e))try{this.getOrInitializeService({instanceIdentifier:Pa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pa){return this.instances.has(e)}getOptions(e=Pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pa){return this.component?this.component.multipleInstances?e:Pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dD(i){return i===Pa?void 0:i}function mD(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(We||(We={}));const gD={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},yD=We.INFO,_D={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},vD=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=_D[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ny{constructor(e){this.name=e,this._logLevel=yD,this._logHandler=vD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const ED=(i,e)=>e.some(t=>i instanceof t);let Cb,Db;function TD(){return Cb||(Cb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bD(){return Db||(Db=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lA=new WeakMap,qg=new WeakMap,uA=new WeakMap,vg=new WeakMap,My=new WeakMap;function SD(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(Ys(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&lA.set(t,i)}).catch(()=>{}),My.set(e,i),e}function AD(i){if(qg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});qg.set(i,e)}let Fg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return qg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||uA.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ys(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function wD(i){Fg=i(Fg)}function ID(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Eg(this),e,...t);return uA.set(r,e.sort?e.sort():[e]),Ys(r)}:bD().includes(i)?function(...e){return i.apply(Eg(this),e),Ys(lA.get(this))}:function(...e){return Ys(i.apply(Eg(this),e))}}function RD(i){return typeof i=="function"?ID(i):(i instanceof IDBTransaction&&AD(i),ED(i,TD())?new Proxy(i,Fg):i)}function Ys(i){if(i instanceof IDBRequest)return SD(i);if(vg.has(i))return vg.get(i);const e=RD(i);return e!==i&&(vg.set(i,e),My.set(e,i)),e}const Eg=i=>My.get(i);function CD(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),f=Ys(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Ys(c.result),m.oldVersion,m.newVersion,Ys(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const DD=["get","getKey","getAll","getAllKeys","count"],xD=["put","add","delete","clear"],Tg=new Map;function xb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Tg.get(e))return Tg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=xD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||DD.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return Tg.set(e,l),l}wD(i=>({...i,get:(e,t,r)=>xb(e,t)||i.get(e,t,r),has:(e,t)=>!!xb(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(MD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function MD(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hg="@firebase/app",Nb="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Ny("@firebase/app"),OD="@firebase/app-compat",VD="@firebase/analytics-compat",PD="@firebase/analytics",kD="@firebase/app-check-compat",LD="@firebase/app-check",UD="@firebase/auth",zD="@firebase/auth-compat",jD="@firebase/database",BD="@firebase/data-connect",qD="@firebase/database-compat",FD="@firebase/functions",HD="@firebase/functions-compat",GD="@firebase/installations",KD="@firebase/installations-compat",YD="@firebase/messaging",QD="@firebase/messaging-compat",$D="@firebase/performance",XD="@firebase/performance-compat",JD="@firebase/remote-config",WD="@firebase/remote-config-compat",ZD="@firebase/storage",ex="@firebase/storage-compat",tx="@firebase/firestore",nx="@firebase/ai",ix="@firebase/firestore-compat",rx="firebase",sx="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="[DEFAULT]",ax={[Hg]:"fire-core",[OD]:"fire-core-compat",[PD]:"fire-analytics",[VD]:"fire-analytics-compat",[LD]:"fire-app-check",[kD]:"fire-app-check-compat",[UD]:"fire-auth",[zD]:"fire-auth-compat",[jD]:"fire-rtdb",[BD]:"fire-data-connect",[qD]:"fire-rtdb-compat",[FD]:"fire-fn",[HD]:"fire-fn-compat",[GD]:"fire-iid",[KD]:"fire-iid-compat",[YD]:"fire-fcm",[QD]:"fire-fcm-compat",[$D]:"fire-perf",[XD]:"fire-perf-compat",[JD]:"fire-rc",[WD]:"fire-rc-compat",[ZD]:"fire-gcs",[ex]:"fire-gcs-compat",[tx]:"fire-fst",[ix]:"fire-fst-compat",[nx]:"fire-vertex","fire-js":"fire-js",[rx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Map,ox=new Map,Kg=new Map;function Mb(i,e){try{i.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function yl(i){const e=i.name;if(Kg.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;Kg.set(e,i);for(const t of ad.values())Mb(t,i);for(const t of ox.values())Mb(t,i);return!0}function Oy(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ki(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new Kc("app","Firebase",lx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=sx;function cA(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Gg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Qs.create("bad-app-name",{appName:String(a)});if(t||(t=tA()),!t)throw Qs.create("no-options");const l=ad.get(a);if(l){if(Xa(t,l.options)&&Xa(r,l.config))return l;throw Qs.create("duplicate-app",{appName:a})}const c=new pD(a);for(const m of Kg.values())c.addComponent(m);const f=new ux(t,r,c);return ad.set(a,f),f}function cx(i=Gg){const e=ad.get(i);if(!e&&i===Gg&&tA())return cA();if(!e)throw Qs.create("no-app",{appName:i});return e}function $s(i,e,t){let r=ax[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(c.join(" "));return}yl(new Ja(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="firebase-heartbeat-database",fx=1,Cc="firebase-heartbeat-store";let bg=null;function hA(){return bg||(bg=CD(hx,fx,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Cc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Qs.create("idb-open",{originalErrorMessage:i.message})})),bg}async function dx(i){try{const t=(await hA()).transaction(Cc),r=await t.objectStore(Cc).get(fA(i));return await t.done,r}catch(e){if(e instanceof is)Zr.warn(e.message);else{const t=Qs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(t.message)}}}async function Ob(i,e){try{const r=(await hA()).transaction(Cc,"readwrite");await r.objectStore(Cc).put(e,fA(i)),await r.done}catch(t){if(t instanceof is)Zr.warn(t.message);else{const r=Qs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Zr.warn(r.message)}}}function fA(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=1024,px=30;class gx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _x(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Vb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>px){const c=vx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Vb(),{heartbeatsToSend:r,unsentEntries:a}=yx(this._heartbeatsCache.heartbeats),l=WS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Zr.warn(t),""}}}function Vb(){return new Date().toISOString().substring(0,10)}function yx(i,e=mx){const t=[];let r=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Pb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Pb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _x{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oA()?rD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Pb(i){return WS(JSON.stringify({version:2,heartbeats:i})).length}function vx(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(i){yl(new Ja("platform-logger",e=>new ND(e),"PRIVATE")),yl(new Ja("heartbeat",e=>new gx(e),"PRIVATE")),$s(Hg,Nb,i),$s(Hg,Nb,"esm2020"),$s("fire-js","")}Ex("");var Tx="firebase",bx="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$s(Tx,bx,"app");function dA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sx=dA,mA=new Kc("auth","Firebase",dA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=new Ny("@firebase/auth");function Ax(i,...e){od.logLevel<=We.WARN&&od.warn(`Auth (${Bl}): ${i}`,...e)}function Ff(i,...e){od.logLevel<=We.ERROR&&od.error(`Auth (${Bl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(i,...e){throw Py(i,...e)}function Qi(i,...e){return Py(i,...e)}function Vy(i,e,t){const r={...Sx(),[e]:t};return new Kc("auth","Firebase",r).create(e,{appName:i.name})}function Ha(i){return Vy(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wx(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ir(i,"argument-error"),Vy(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Py(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return mA.create(i,...e)}function ke(i,e,...t){if(!i)throw Py(e,...t)}function $r(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ff(e),new Error(e)}function es(i,e){i||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function Ix(){return kb()==="http:"||kb()==="https:"}function kb(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ix()||tD()||"connection"in navigator)?navigator.onLine:!0}function Cx(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,es(t>e,"Short delay should be less than long delay!"),this.isMobile=ZC()||nD()}get(){return Rx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(i,e){es(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Nx=new Qc(3e4,6e4);function Ly(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ql(i,e,t,r,a={}){return gA(i,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const f=Yc({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...l};return eD()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&jl(i.emulatorConfig.host)&&(g.credentials="include"),pA.fetch()(await yA(i,i.config.apiHost,t,f),g)})}async function gA(i,e,t){i._canInitEmulator=!1;const r={...Dx,...e};try{const a=new Ox(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Mf(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mf(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Mf(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw Mf(i,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Vy(i,_,g);Ir(i,_)}}catch(a){if(a instanceof is)throw a;Ir(i,"network-request-failed",{message:String(a)})}}async function Mx(i,e,t,r,a={}){const l=await ql(i,e,t,r,a);return"mfaPendingCredential"in l&&Ir(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function yA(i,e,t,r){const a=`${e}${t}?${r}`,l=i,c=l.config.emulator?ky(i.config,a):`${i.config.apiScheme}://${a}`;return xx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class Ox{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),Nx.get())})}}function Mf(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Qi(i,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(i,e){return ql(i,"POST","/v1/accounts:delete",e)}async function ld(i,e){return ql(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Px(i,e=!1){const t=sn(i),r=await t.getIdToken(e),a=Uy(r);ke(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:mc(Sg(a.auth_time)),issuedAtTime:mc(Sg(a.iat)),expirationTime:mc(Sg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sg(i){return Number(i)*1e3}function Uy(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Ff("JWT malformed, contained fewer than 3 sections"),null;try{const a=ZS(t);return a?JSON.parse(a):(Ff("Failed to decode base64 JWT payload"),null)}catch(a){return Ff("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Lb(i){const e=Uy(i);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof is&&kx(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function kx({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(i){var E;const e=i.auth,t=await i.getIdToken(),r=await Dc(i,ld(e,{idToken:t}));ke(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?_A(a.providerUserInfo):[],c=zx(i.providerData,l),f=i.isAnonymous,m=!(i.email&&a.passwordHash)&&!(c!=null&&c.length),g=f?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Qg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function Ux(i){const e=sn(i);await ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zx(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function _A(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(i,e){const t=await gA(i,{},async()=>{const r=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await yA(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return i.emulatorConfig&&jl(i.emulatorConfig.host)&&(m.credentials="include"),pA.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Bx(i,e){return ql(i,"POST","/v2/accounts:revokeToken",Ly(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Lb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await jx(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new cl;return r&&(ke(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(ke(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(ke(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(i,e){ke(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Yi{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new Lx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Qg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Px(this,e)}reload(){return Ux(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ud(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ki(this.auth.app))return Promise.reject(Ha(this.auth));const e=await this.getIdToken();return await Dc(this,Vx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:w,providerData:P,stsTokenManager:D}=t;ke(E&&D,e,"internal-error");const M=cl.fromJSON(this.name,D);ke(typeof E=="string",e,"internal-error"),Ls(r,e.name),Ls(a,e.name),ke(typeof b=="boolean",e,"internal-error"),ke(typeof w=="boolean",e,"internal-error"),Ls(l,e.name),Ls(c,e.name),Ls(f,e.name),Ls(m,e.name),Ls(g,e.name),Ls(_,e.name);const U=new Yi({uid:E,auth:e,email:a,emailVerified:b,displayName:r,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:M,createdAt:g,lastLoginAt:_});return P&&Array.isArray(P)&&(U.providerData=P.map(G=>({...G}))),m&&(U._redirectEventId=m),U}static async _fromIdTokenResponse(e,t,r=!1){const a=new cl;a.updateFromServerResponse(t);const l=new Yi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await ud(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];ke(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?_A(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new cl;f.updateFromIdToken(r);const m=new Yi({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Qg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new Map;function Xr(i){es(i instanceof Function,"Expected a class definition");let e=Ub.get(i);return e?(es(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Ub.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vA.type="NONE";const zb=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(i,e,t){return`firebase:${i}:${e}:${t}`}class hl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Hf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Hf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ld(this.auth,{idToken:e}).catch(()=>{});return t?Yi._fromGetAccountInfoResponse(this.auth,t,e):null}return Yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new hl(Xr(zb),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Xr(zb);const c=Hf(r,e.config.apiKey,e.name);let f=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const b=await ld(e,{idToken:_}).catch(()=>{});if(!b)break;E=await Yi._fromGetAccountInfoResponse(e,b,_)}else E=Yi._fromJSON(e,_);g!==l&&(f=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new hl(l,e,r):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new hl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wA(e))return"Blackberry";if(IA(e))return"Webos";if(TA(e))return"Safari";if((e.includes("chrome/")||bA(e))&&!e.includes("edge/"))return"Chrome";if(AA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EA(i=hn()){return/firefox\//i.test(i)}function TA(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bA(i=hn()){return/crios\//i.test(i)}function SA(i=hn()){return/iemobile/i.test(i)}function AA(i=hn()){return/android/i.test(i)}function wA(i=hn()){return/blackberry/i.test(i)}function IA(i=hn()){return/webos/i.test(i)}function zy(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function qx(i=hn()){var e;return zy(i)&&!!((e=window.navigator)!=null&&e.standalone)}function Fx(){return iD()&&document.documentMode===10}function RA(i=hn()){return zy(i)||AA(i)||IA(i)||wA(i)||/windows phone/i.test(i)||SA(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(i,e=[]){let t;switch(i){case"Browser":t=jb(hn());break;case"Worker":t=`${jb(hn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(i,e={}){return ql(i,"GET","/v2/passwordPolicy",Ly(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=6;class Yx{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Kx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bb(this),this.idTokenSubscription=new Bb(this),this.beforeStateQueue=new Hx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ld(this,{idToken:e}),r=await Yi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ki(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ud(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Cx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ki(this.app))return Promise.reject(Ha(this));const t=e?sn(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ki(this.app)?Promise.reject(Ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ki(this.app)?Promise.reject(Ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Gx(this),t=new Yx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Bx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Ki(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Ax(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bd(i){return sn(i)}class Bb{constructor(e){this.auth=e,this.observer=null,this.addObserver=uD(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $x(i){jy=i}function Xx(i){return jy.loadJS(i)}function Jx(){return jy.gapiScript}function Wx(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(i,e){const t=Oy(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Xa(l,e??{}))return a;Ir(a,"already-initialized")}return t.initialize({options:e})}function eN(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Xr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tN(i,e,t){const r=Bd(i);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=DA(e),{host:c,port:f}=nN(e),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(Xa(g,r.config.emulator)&&Xa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,jl(c)?(iA(`${l}//${c}${m}`),WC("Auth",!0)):iN()}function DA(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function nN(i){const e=DA(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:qb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:qb(c)}}}function qb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function iN(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,t){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(i,e){return Mx(i,"POST","/v1/accounts:signInWithIdp",Ly(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="http://localhost";class Wa extends xA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Wa(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return fl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,fl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fl(e,t)}buildRequest(){const e={requestUri:rN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends By{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends $c{constructor(){super("facebook.com")}static credential(e){return Wa._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends $c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wa._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Qr.credential(t,r)}catch{return null}}}Qr.GOOGLE_SIGN_IN_METHOD="google.com";Qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends $c{constructor(){super("github.com")}static credential(e){return Wa._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends $c{constructor(){super("twitter.com")}static credential(e,t){return Wa._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hs.credential(t,r)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Yi._fromIdTokenResponse(e,r,a),c=Fb(r);return new _l({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=Fb(r);return new _l({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function Fb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends is{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new cd(e,t,r,a)}}function NA(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?cd._fromErrorAndOperation(i,l,e,r):l})}async function sN(i,e,t=!1){const r=await Dc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return _l._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(i,e,t=!1){const{auth:r}=i;if(Ki(r.app))return Promise.reject(Ha(r));const a="reauthenticate";try{const l=await Dc(i,NA(r,a,e,i),t);ke(l.idToken,r,"internal-error");const c=Uy(l.idToken);ke(c,r,"internal-error");const{sub:f}=c;return ke(i.uid===f,r,"user-mismatch"),_l._forOperation(i,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ir(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(i,e,t=!1){if(Ki(i.app))return Promise.reject(Ha(i));const r="signIn",a=await NA(i,r,e),l=await _l._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}function lN(i,e,t,r){return sn(i).onIdTokenChanged(e,t,r)}function uN(i,e,t){return sn(i).beforeAuthStateChanged(e,t)}function cN(i,e,t,r){return sn(i).onAuthStateChanged(e,t,r)}function hN(i){return sn(i).signOut()}const hd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hd,"1"),this.storage.removeItem(hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=1e3,dN=10;class OA extends MA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Fx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,dN):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},fN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}OA.type="LOCAL";const mN=OA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA extends MA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}VA.type="SESSION";const PA=VA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new qd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(c).map(async g=>g(t.origin,l)),m=await pN(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=qy("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function yN(i){Ar().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function _N(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vN(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function EN(){return kA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebaseLocalStorageDb",TN=1,fd="firebaseLocalStorage",UA="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fd(i,e){return i.transaction([fd],e?"readwrite":"readonly").objectStore(fd)}function bN(){const i=indexedDB.deleteDatabase(LA);return new Xc(i).toPromise()}function $g(){const i=indexedDB.open(LA,TN);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(fd,{keyPath:UA})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(fd)?e(r):(r.close(),await bN(),e(await $g()))})})}async function Hb(i,e,t){const r=Fd(i,!0).put({[UA]:e,value:t});return new Xc(r).toPromise()}async function SN(i,e){const t=Fd(i,!1).get(e),r=await new Xc(t).toPromise();return r===void 0?null:r.value}function Gb(i,e){const t=Fd(i,!0).delete(e);return new Xc(t).toPromise()}const AN=800,wN=3;class zA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>wN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qd._getInstance(EN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await _N(),!this.activeServiceWorker)return;this.sender=new gN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await Hb(e,hd,"1"),await Gb(e,hd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>SN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Fd(a,!1).getAll();return new Xc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zA.type="LOCAL";const IN=zA;new Qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(i,e){return e?Xr(e):(ke(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy extends xA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RN(i){return oN(i.auth,new Fy(i),i.bypassAuthState)}function CN(i){const{auth:e,user:t}=i;return ke(t,e,"internal-error"),aN(t,new Fy(i),i.bypassAuthState)}async function DN(i){const{auth:e,user:t}=i;return ke(t,e,"internal-error"),sN(t,new Fy(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RN;case"linkViaPopup":case"linkViaRedirect":return DN;case"reauthViaPopup":case"reauthViaRedirect":return CN;default:Ir(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new Qc(2e3,1e4);async function NN(i,e,t){if(Ki(i.app))return Promise.reject(Qi(i,"operation-not-supported-in-this-environment"));const r=Bd(i);wx(i,e,By);const a=jA(r,t);return new qa(r,"signInViaPopup",e,a).executeNotNull()}class qa extends BA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=qy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xN.get())};e()}}qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="pendingRedirect",Gf=new Map;class ON extends BA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Gf.get(this.auth._key());if(!e){try{const r=await VN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gf.set(this.auth._key(),e)}return this.bypassAuthState||Gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VN(i,e){const t=LN(e),r=kN(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function PN(i,e){Gf.set(i._key(),e)}function kN(i){return Xr(i._redirectPersistence)}function LN(i){return Hf(MN,i.config.apiKey,i.name)}async function UN(i,e,t=!1){if(Ki(i.app))return Promise.reject(Ha(i));const r=Bd(i),a=jA(r,e),c=await new ON(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=600*1e3;class jN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!qA(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kb(e))}saveEventToCache(e){this.cachedEventUids.add(Kb(e)),this.lastProcessedEventTime=Date.now()}}function Kb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function qA({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qA(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(i,e={}){return ql(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HN=/^https?/;async function GN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await qN(i);for(const t of e)try{if(KN(t))return}catch{}Ir(i,"unauthorized-domain")}function KN(i){const e=Yg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!HN.test(t))return!1;if(FN.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=new Qc(3e4,6e4);function Yb(){const i=Ar().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function QN(i){return new Promise((e,t)=>{var a,l,c;function r(){Yb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yb(),t(Qi(i,"network-request-failed"))},timeout:YN.get()})}if((l=(a=Ar().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Ar().gapi)!=null&&c.load)r();else{const f=Wx("iframefcb");return Ar()[f]=()=>{gapi.load?r():t(Qi(i,"network-request-failed"))},Xx(`${Jx()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Kf=null,e})}let Kf=null;function $N(i){return Kf=Kf||QN(i),Kf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Qc(5e3,15e3),JN="__/auth/iframe",WN="emulator/auth/iframe",ZN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t2(i){const e=i.config;ke(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?ky(e,WN):`https://${i.config.authDomain}/${JN}`,r={apiKey:e.apiKey,appName:i.name,v:Bl},a=e2.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Yc(r).slice(1)}`}async function n2(i){const e=await $N(i),t=Ar().gapi;return ke(t,i,"internal-error"),e.open({where:document.body,url:t2(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZN,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Qi(i,"network-request-failed"),f=Ar().setTimeout(()=>{l(c)},XN.get());function m(){Ar().clearTimeout(f),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r2=500,s2=600,a2="_blank",o2="http://localhost";class Qb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l2(i,e,t,r=r2,a=s2){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m={...i2,width:r.toString(),height:a.toString(),top:l,left:c},g=hn().toLowerCase();t&&(f=bA(g)?a2:t),EA(g)&&(e=e||o2,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[w,P])=>`${b}${w}=${P},`,"");if(qx(g)&&f!=="_self")return u2(e||"",f),new Qb(null);const E=window.open(e||"",f,_);ke(E,i,"popup-blocked");try{E.focus()}catch{}return new Qb(E)}function u2(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="__/auth/handler",h2="emulator/auth/handler",f2=encodeURIComponent("fac");async function $b(i,e,t,r,a,l){ke(i.config.authDomain,i,"auth-domain-config-required"),ke(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Bl,eventId:a};if(e instanceof By){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",lD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof $c){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}i.tenantId&&(c.tid=i.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await i._getAppCheckToken(),g=m?`#${f2}=${encodeURIComponent(m)}`:"";return`${d2(i)}?${Yc(f).slice(1)}${g}`}function d2({config:i}){return i.emulator?ky(i,h2):`https://${i.authDomain}/${c2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="webStorageSupport";class m2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PA,this._completeRedirectFn=UN,this._overrideRedirectResult=PN}async _openPopup(e,t,r,a){var c;es((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await $b(e,t,r,Yg(),a);return l2(e,l,qy())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await $b(e,t,r,Yg(),a);return yN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(es(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await n2(e),r=new jN(e);return t.register("authEvent",a=>(ke(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ag,{type:Ag},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[Ag];l!==void 0&&t(!!l),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RA()||TA()||zy()}}const p2=m2;var Xb="@firebase/auth",Jb="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _2(i){yl(new Ja("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;ke(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CA(i)},g=new Qx(r,a,l,m);return eN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),yl(new Ja("auth-internal",e=>{const t=Bd(e.getProvider("auth").getImmediate());return(r=>new g2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$s(Xb,Jb,y2(i)),$s(Xb,Jb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=300,E2=nA("authIdTokenMaxAge")||v2;let Wb=null;const T2=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>E2)return;const a=t==null?void 0:t.token;Wb!==a&&(Wb=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function b2(i=cx()){const e=Oy(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Zx(i,{popupRedirectResolver:p2,persistence:[IN,mN,PA]}),r=nA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=T2(l.toString());uN(t,c,()=>c(t.currentUser)),lN(t,f=>c(f))}}const a=QC("auth");return a&&tN(t,`http://${a}`),t}function S2(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}$x({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=Qi("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",S2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_2("Browser");var Zb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,FA;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function N(){}N.prototype=S.prototype,R.F=S.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(O,k,j){for(var V=Array(arguments.length-2),we=2;we<arguments.length;we++)V[we-2]=arguments[we];return S.prototype[k].apply(O,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,S,N){N||(N=0);const O=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)O[k]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(k=0;k<16;++k)O[k]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=R.g[0],N=R.g[1],k=R.g[2];let j=R.g[3],V;V=S+(j^N&(k^j))+O[0]+3614090360&4294967295,S=N+(V<<7&4294967295|V>>>25),V=j+(k^S&(N^k))+O[1]+3905402710&4294967295,j=S+(V<<12&4294967295|V>>>20),V=k+(N^j&(S^N))+O[2]+606105819&4294967295,k=j+(V<<17&4294967295|V>>>15),V=N+(S^k&(j^S))+O[3]+3250441966&4294967295,N=k+(V<<22&4294967295|V>>>10),V=S+(j^N&(k^j))+O[4]+4118548399&4294967295,S=N+(V<<7&4294967295|V>>>25),V=j+(k^S&(N^k))+O[5]+1200080426&4294967295,j=S+(V<<12&4294967295|V>>>20),V=k+(N^j&(S^N))+O[6]+2821735955&4294967295,k=j+(V<<17&4294967295|V>>>15),V=N+(S^k&(j^S))+O[7]+4249261313&4294967295,N=k+(V<<22&4294967295|V>>>10),V=S+(j^N&(k^j))+O[8]+1770035416&4294967295,S=N+(V<<7&4294967295|V>>>25),V=j+(k^S&(N^k))+O[9]+2336552879&4294967295,j=S+(V<<12&4294967295|V>>>20),V=k+(N^j&(S^N))+O[10]+4294925233&4294967295,k=j+(V<<17&4294967295|V>>>15),V=N+(S^k&(j^S))+O[11]+2304563134&4294967295,N=k+(V<<22&4294967295|V>>>10),V=S+(j^N&(k^j))+O[12]+1804603682&4294967295,S=N+(V<<7&4294967295|V>>>25),V=j+(k^S&(N^k))+O[13]+4254626195&4294967295,j=S+(V<<12&4294967295|V>>>20),V=k+(N^j&(S^N))+O[14]+2792965006&4294967295,k=j+(V<<17&4294967295|V>>>15),V=N+(S^k&(j^S))+O[15]+1236535329&4294967295,N=k+(V<<22&4294967295|V>>>10),V=S+(k^j&(N^k))+O[1]+4129170786&4294967295,S=N+(V<<5&4294967295|V>>>27),V=j+(N^k&(S^N))+O[6]+3225465664&4294967295,j=S+(V<<9&4294967295|V>>>23),V=k+(S^N&(j^S))+O[11]+643717713&4294967295,k=j+(V<<14&4294967295|V>>>18),V=N+(j^S&(k^j))+O[0]+3921069994&4294967295,N=k+(V<<20&4294967295|V>>>12),V=S+(k^j&(N^k))+O[5]+3593408605&4294967295,S=N+(V<<5&4294967295|V>>>27),V=j+(N^k&(S^N))+O[10]+38016083&4294967295,j=S+(V<<9&4294967295|V>>>23),V=k+(S^N&(j^S))+O[15]+3634488961&4294967295,k=j+(V<<14&4294967295|V>>>18),V=N+(j^S&(k^j))+O[4]+3889429448&4294967295,N=k+(V<<20&4294967295|V>>>12),V=S+(k^j&(N^k))+O[9]+568446438&4294967295,S=N+(V<<5&4294967295|V>>>27),V=j+(N^k&(S^N))+O[14]+3275163606&4294967295,j=S+(V<<9&4294967295|V>>>23),V=k+(S^N&(j^S))+O[3]+4107603335&4294967295,k=j+(V<<14&4294967295|V>>>18),V=N+(j^S&(k^j))+O[8]+1163531501&4294967295,N=k+(V<<20&4294967295|V>>>12),V=S+(k^j&(N^k))+O[13]+2850285829&4294967295,S=N+(V<<5&4294967295|V>>>27),V=j+(N^k&(S^N))+O[2]+4243563512&4294967295,j=S+(V<<9&4294967295|V>>>23),V=k+(S^N&(j^S))+O[7]+1735328473&4294967295,k=j+(V<<14&4294967295|V>>>18),V=N+(j^S&(k^j))+O[12]+2368359562&4294967295,N=k+(V<<20&4294967295|V>>>12),V=S+(N^k^j)+O[5]+4294588738&4294967295,S=N+(V<<4&4294967295|V>>>28),V=j+(S^N^k)+O[8]+2272392833&4294967295,j=S+(V<<11&4294967295|V>>>21),V=k+(j^S^N)+O[11]+1839030562&4294967295,k=j+(V<<16&4294967295|V>>>16),V=N+(k^j^S)+O[14]+4259657740&4294967295,N=k+(V<<23&4294967295|V>>>9),V=S+(N^k^j)+O[1]+2763975236&4294967295,S=N+(V<<4&4294967295|V>>>28),V=j+(S^N^k)+O[4]+1272893353&4294967295,j=S+(V<<11&4294967295|V>>>21),V=k+(j^S^N)+O[7]+4139469664&4294967295,k=j+(V<<16&4294967295|V>>>16),V=N+(k^j^S)+O[10]+3200236656&4294967295,N=k+(V<<23&4294967295|V>>>9),V=S+(N^k^j)+O[13]+681279174&4294967295,S=N+(V<<4&4294967295|V>>>28),V=j+(S^N^k)+O[0]+3936430074&4294967295,j=S+(V<<11&4294967295|V>>>21),V=k+(j^S^N)+O[3]+3572445317&4294967295,k=j+(V<<16&4294967295|V>>>16),V=N+(k^j^S)+O[6]+76029189&4294967295,N=k+(V<<23&4294967295|V>>>9),V=S+(N^k^j)+O[9]+3654602809&4294967295,S=N+(V<<4&4294967295|V>>>28),V=j+(S^N^k)+O[12]+3873151461&4294967295,j=S+(V<<11&4294967295|V>>>21),V=k+(j^S^N)+O[15]+530742520&4294967295,k=j+(V<<16&4294967295|V>>>16),V=N+(k^j^S)+O[2]+3299628645&4294967295,N=k+(V<<23&4294967295|V>>>9),V=S+(k^(N|~j))+O[0]+4096336452&4294967295,S=N+(V<<6&4294967295|V>>>26),V=j+(N^(S|~k))+O[7]+1126891415&4294967295,j=S+(V<<10&4294967295|V>>>22),V=k+(S^(j|~N))+O[14]+2878612391&4294967295,k=j+(V<<15&4294967295|V>>>17),V=N+(j^(k|~S))+O[5]+4237533241&4294967295,N=k+(V<<21&4294967295|V>>>11),V=S+(k^(N|~j))+O[12]+1700485571&4294967295,S=N+(V<<6&4294967295|V>>>26),V=j+(N^(S|~k))+O[3]+2399980690&4294967295,j=S+(V<<10&4294967295|V>>>22),V=k+(S^(j|~N))+O[10]+4293915773&4294967295,k=j+(V<<15&4294967295|V>>>17),V=N+(j^(k|~S))+O[1]+2240044497&4294967295,N=k+(V<<21&4294967295|V>>>11),V=S+(k^(N|~j))+O[8]+1873313359&4294967295,S=N+(V<<6&4294967295|V>>>26),V=j+(N^(S|~k))+O[15]+4264355552&4294967295,j=S+(V<<10&4294967295|V>>>22),V=k+(S^(j|~N))+O[6]+2734768916&4294967295,k=j+(V<<15&4294967295|V>>>17),V=N+(j^(k|~S))+O[13]+1309151649&4294967295,N=k+(V<<21&4294967295|V>>>11),V=S+(k^(N|~j))+O[4]+4149444226&4294967295,S=N+(V<<6&4294967295|V>>>26),V=j+(N^(S|~k))+O[11]+3174756917&4294967295,j=S+(V<<10&4294967295|V>>>22),V=k+(S^(j|~N))+O[2]+718787259&4294967295,k=j+(V<<15&4294967295|V>>>17),V=N+(j^(k|~S))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+j&4294967295}r.prototype.v=function(R,S){S===void 0&&(S=R.length);const N=S-this.blockSize,O=this.C;let k=this.h,j=0;for(;j<S;){if(k==0)for(;j<=N;)a(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<S;)if(O[k++]=R.charCodeAt(j++),k==this.blockSize){a(this,O),k=0;break}}else for(;j<S;)if(O[k++]=R[j++],k==this.blockSize){a(this,O),k=0;break}}this.h=k,this.o+=S},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)R[S++]=this.g[N]>>>O&255;return R};function l(R,S){var N=f;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=S(R)}function c(R,S){this.h=S;const N=[];let O=!0;for(let k=R.length-1;k>=0;k--){const j=R[k]|0;O&&j==S||(N[k]=j,O=!1)}this.g=N}var f={};function m(R){return-128<=R&&R<128?l(R,function(S){return new c([S|0],S<0?-1:0)}):new c([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return M(g(-R));const S=[];let N=1;for(let O=0;R>=N;O++)S[O]=R/N|0,N*=4294967296;return new c(S,0)}function _(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return M(_(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(S,8));let O=E;for(let j=0;j<R.length;j+=8){var k=Math.min(8,R.length-j);const V=parseInt(R.substring(j,j+k),S);k<8?(k=g(Math.pow(S,k)),O=O.j(k).add(g(V))):(O=O.j(N),O=O.add(g(V)))}return O}var E=m(0),b=m(1),w=m(16777216);i=c.prototype,i.m=function(){if(D(this))return-M(this).m();let R=0,S=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);R+=(O>=0?O:4294967296+O)*S,S*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(P(this))return"0";if(D(this))return"-"+M(this).toString(R);const S=g(Math.pow(R,6));var N=this;let O="";for(;;){const k=re(N,S).g;N=U(N,k.j(S));let j=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=k,P(N))return j+O;for(;j.length<6;)j="0"+j;O=j+O}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function P(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function D(R){return R.h==-1}i.l=function(R){return R=U(this,R),D(R)?-1:P(R)?0:1};function M(R){const S=R.g.length,N=[];for(let O=0;O<S;O++)N[O]=~R.g[O];return new c(N,~R.h).add(b)}i.abs=function(){return D(this)?M(this):this},i.add=function(R){const S=Math.max(this.g.length,R.g.length),N=[];let O=0;for(let k=0;k<=S;k++){let j=O+(this.i(k)&65535)+(R.i(k)&65535),V=(j>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);O=V>>>16,j&=65535,V&=65535,N[k]=V<<16|j}return new c(N,N[N.length-1]&-2147483648?-1:0)};function U(R,S){return R.add(M(S))}i.j=function(R){if(P(this)||P(R))return E;if(D(this))return D(R)?M(this).j(M(R)):M(M(this).j(R));if(D(R))return M(this.j(M(R)));if(this.l(w)<0&&R.l(w)<0)return g(this.m()*R.m());const S=this.g.length+R.g.length,N=[];for(var O=0;O<2*S;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let k=0;k<R.g.length;k++){const j=this.i(O)>>>16,V=this.i(O)&65535,we=R.i(k)>>>16,Me=R.i(k)&65535;N[2*O+2*k]+=V*Me,G(N,2*O+2*k),N[2*O+2*k+1]+=j*Me,G(N,2*O+2*k+1),N[2*O+2*k+1]+=V*we,G(N,2*O+2*k+1),N[2*O+2*k+2]+=j*we,G(N,2*O+2*k+2)}for(R=0;R<S;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=S;R<2*S;R++)N[R]=0;return new c(N,0)};function G(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function H(R,S){this.g=R,this.h=S}function re(R,S){if(P(S))throw Error("division by zero");if(P(R))return new H(E,E);if(D(R))return S=re(M(R),S),new H(M(S.g),M(S.h));if(D(S))return S=re(R,M(S)),new H(M(S.g),S.h);if(R.g.length>30){if(D(R)||D(S))throw Error("slowDivide_ only works with positive integers.");for(var N=b,O=S;O.l(R)<=0;)N=se(N),O=se(O);var k=W(N,1),j=W(O,1);for(O=W(O,2),N=W(N,2);!P(O);){var V=j.add(O);V.l(R)<=0&&(k=k.add(N),j=V),O=W(O,1),N=W(N,1)}return S=U(R,k.j(S)),new H(k,S)}for(k=E;R.l(S)>=0;){for(N=Math.max(1,Math.floor(R.m()/S.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),j=g(N),V=j.j(S);D(V)||V.l(R)>0;)N-=O,j=g(N),V=j.j(S);P(j)&&(j=b),k=k.add(j),R=U(R,V)}return new H(k,R)}i.B=function(R){return re(this,R).h},i.and=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<S;O++)N[O]=this.i(O)&R.i(O);return new c(N,this.h&R.h)},i.or=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<S;O++)N[O]=this.i(O)|R.i(O);return new c(N,this.h|R.h)},i.xor=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<S;O++)N[O]=this.i(O)^R.i(O);return new c(N,this.h^R.h)};function se(R){const S=R.g.length+1,N=[];for(let O=0;O<S;O++)N[O]=R.i(O)<<1|R.i(O-1)>>>31;return new c(N,R.h)}function W(R,S){const N=S>>5;S%=32;const O=R.g.length-N,k=[];for(let j=0;j<O;j++)k[j]=S>0?R.i(j+N)>>>S|R.i(j+N+1)<<32-S:R.i(j+N);return new c(k,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,FA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,Xs=c}).apply(typeof Zb<"u"?Zb:typeof self<"u"?self:typeof window<"u"?window:{});var Of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HA,ac,GA,Yf,Xg,KA,YA,QA;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Of=="object"&&Of];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var T=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var K=h[C];if(!(K in T))break e;T=T[K]}h=h[h.length-1],C=T[h],y=y(C),y!=C&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&T.push([C,y[C]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=m,g.apply(null,arguments)}function _(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(C,K,Z){for(var de=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)de[qe-2]=arguments[qe];return y.prototype[K].apply(C,de)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const y=h.length;if(y>0){const T=Array(y);for(let C=0;C<y;C++)T[C]=h[C];return T}return[]}function P(h,y){for(let C=1;C<arguments.length;C++){const K=arguments[C];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=h.length||0;const Z=K.length||0;h.length=T+Z;for(let de=0;de<Z;de++)h[T+de]=K[de]}else h.push(K)}}class D{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function M(h){c.setTimeout(()=>{throw h},0)}function U(){var h=R;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class G{constructor(){this.h=this.g=null}add(y,T){const C=H.get();C.set(y,T),this.h?this.h.next=C:this.g=C,this.h=C}}var H=new D(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let se,W=!1,R=new G,S=()=>{const h=Promise.resolve(void 0);se=()=>{h.then(N)}};function N(){for(var h;h=U();){try{h.h.call(h.g)}catch(T){M(T)}var y=H;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}W=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function V(h){return/^[\s\xa0]*$/.test(h)}function we(h,y){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(we,k),we.prototype.init=function(h,y){const T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),X=0;function le(h,y,T,C,K){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!C,this.ha=K,this.key=++X,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h,y,T){for(const C in h)y.call(T,h[C],C,h)}function Ue(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function z(h){const y={};for(const T in h)y[T]=h[T];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(h,y){let T,C;for(let K=1;K<arguments.length;K++){C=arguments[K];for(T in C)h[T]=C[T];for(let Z=0;Z<te.length;Z++)T=te[Z],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,T,C,K){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const de=ye(h,y,C,K);return de>-1?(y=h[de],T||(y.fa=!1)):(y=new le(y,this.src,Z,!!C,K),y.fa=T,h.push(y)),y};function ge(h,y){const T=y.type;if(T in h.g){var C=h.g[T],K=Array.prototype.indexOf.call(C,y,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(C,K,1),Z&&(_e(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ye(h,y,T,C){for(let K=0;K<h.length;++K){const Z=h[K];if(!Z.da&&Z.listener==y&&Z.capture==!!T&&Z.ha==C)return K}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),Ge={};function Ve(h,y,T,C,K){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)Ve(h,y[Z],T,C,K);return null}return T=Ut(T),h&&h[Me]?h.J(y,T,f(C)?!!C.capture:!1,K):ze(h,y,T,!1,C,K)}function ze(h,y,T,C,K,Z){if(!y)throw Error("Invalid event type");const de=f(K)?!!K.capture:!!K;let qe=Pe(h);if(qe||(h[Oe]=qe=new ce(h)),T=qe.add(y,T,C,de,Z),T.proxy)return T;if(C=me(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)j||(K=de),K===void 0&&(K=!1),h.addEventListener(y.toString(),C,K);else if(h.attachEvent)h.attachEvent(Se(y.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function me(){function h(T){return y.call(h.src,h.listener,T)}const y=xe;return h}function Ie(h,y,T,C,K){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Ie(h,y[Z],T,C,K);else C=f(C)?!!C.capture:!!C,T=Ut(T),h&&h[Me]?(h=h.i,Z=String(y).toString(),Z in h.g&&(y=h.g[Z],T=ye(y,T,C,K),T>-1&&(_e(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[Z],h.h--)))):h&&(h=Pe(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ye(y,T,C,K)),(T=h>-1?y[h]:null)&&ue(T))}function ue(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Me])ge(y.i,h);else{var T=h.type,C=h.proxy;y.removeEventListener?y.removeEventListener(T,C,h.capture):y.detachEvent?y.detachEvent(Se(T),C):y.addListener&&y.removeListener&&y.removeListener(C),(T=Pe(y))?(ge(T,h),T.h==0&&(T.src=null,y[Oe]=null)):_e(h)}}}function Se(h){return h in Ge?Ge[h]:Ge[h]="on"+h}function xe(h,y){if(h.da)h=!0;else{y=new we(y,this);const T=h.listener,C=h.ha||h.src;h.fa&&ue(h),h=T.call(C,y)}return h}function Pe(h){return h=h[Oe],h instanceof ce?h:null}var ut="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ut(h){return typeof h=="function"?h:(h[ut]||(h[ut]=function(y){return h.handleEvent(y)}),h[ut])}function nt(){O.call(this),this.i=new ce(this),this.M=this,this.G=null}E(nt,O),nt.prototype[Me]=!0,nt.prototype.removeEventListener=function(h,y,T,C){Ie(this,h,y,T,C)};function ct(h,y){var T,C=h.G;if(C)for(T=[];C;C=C.G)T.push(C);if(h=h.M,C=y.type||y,typeof y=="string")y=new k(y,h);else if(y instanceof k)y.target=y.target||h;else{var K=y;y=new k(C,h),$(y,K)}K=!0;let Z,de;if(T)for(de=T.length-1;de>=0;de--)Z=y.g=T[de],K=En(Z,C,!0,y)&&K;if(Z=y.g=h,K=En(Z,C,!0,y)&&K,K=En(Z,C,!1,y)&&K,T)for(de=0;de<T.length;de++)Z=y.g=T[de],K=En(Z,C,!1,y)&&K}nt.prototype.N=function(){if(nt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let C=0;C<T.length;C++)_e(T[C]);delete h.g[y],h.h--}}this.G=null},nt.prototype.J=function(h,y,T,C){return this.i.add(String(h),y,!1,T,C)},nt.prototype.K=function(h,y,T,C){return this.i.add(String(h),y,!0,T,C)};function En(h,y,T,C){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let K=!0;for(let Z=0;Z<y.length;++Z){const de=y[Z];if(de&&!de.da&&de.capture==T){const qe=de.listener,Bt=de.ha||de.src;de.fa&&ge(h.i,de),K=qe.call(Bt,C)!==!1&&K}}return K&&!C.defaultPrevented}function Wi(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Zi(h){h.g=Wi(()=>{h.g=null,h.i&&(h.i=!1,Zi(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Yt extends O{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Zi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(h){O.call(this),this.h=h,this.g={}}E(ki,O);var vi=[];function Tn(h){De(h.g,function(y,T){this.g.hasOwnProperty(T)&&ue(y)},h),h.g={}}ki.prototype.N=function(){ki.Z.N.call(this),Tn(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=c.JSON.stringify,Be=c.JSON.parse,bt=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function an(){}function ua(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){k.call(this,"d")}E(on,k);function xn(){k.call(this,"c")}E(xn,k);var It={},uo=null;function Cr(){return uo=uo||new nt}It.Ia="serverreachability";function co(h){k.call(this,It.Ia,h)}E(co,k);function Ei(h){const y=Cr();ct(y,new co(y))}It.STAT_EVENT="statevent";function Dr(h,y){k.call(this,It.STAT_EVENT,h),this.stat=y}E(Dr,k);function Ye(h){const y=Cr();ct(y,new Dr(y,h))}It.Ja="timingevent";function Rt(h,y){k.call(this,It.Ja,h),this.size=y}E(Rt,k);function Ct(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Qt(){this.g=!0}Qt.prototype.ua=function(){this.g=!1};function Nn(h,y,T,C,K,Z){h.info(function(){if(h.g)if(Z){var de="",qe=Z.split("&");for(let st=0;st<qe.length;st++){var Bt=qe[st].split("=");if(Bt.length>1){const Dt=Bt[0];Bt=Bt[1];const Ai=Dt.split("_");de=Ai.length>=2&&Ai[1]=="type"?de+(Dt+"="+Bt+"&"):de+(Dt+"=redacted&")}}}else de=null;else de=Z;return"XMLHTTP REQ ("+C+") [attempt "+K+"]: "+y+`
`+T+`
`+de})}function dn(h,y,T,C,K,Z,de){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+K+"]: "+y+`
`+T+`
`+Z+" "+de})}function zt(h,y,T,C){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+jt(h,T)+(C?" "+C:"")})}function Yn(h,y){h.info(function(){return"TIMEOUT: "+y})}Qt.prototype.info=function(){};function jt(h,y){if(!h.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var T=Z[h];if(!(T.length<2)){var C=T[1];if(Array.isArray(C)&&!(C.length<1)){var K=C[0];if(K!="noop"&&K!="stop"&&K!="close")for(let de=1;de<C.length;de++)C[de]=""}}}}return bn(Z)}catch{return y}}var Mn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},On={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jn;function ri(){}E(ri,an),ri.prototype.g=function(){return new XMLHttpRequest},jn=new ri;function Bn(h){return encodeURIComponent(String(h))}function si(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Sn(h,y,T,C){this.j=h,this.i=y,this.l=T,this.S=C||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var $t={},mn={};function er(h,y,T){h.M=1,h.A=ca(Jt(y)),h.u=T,h.R=!0,ho(h,null)}function ho(h,y){h.F=Date.now(),tr(h),h.B=Jt(h.A);var T=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),go(T.i,"t",C),h.C=0,T=h.j.L,h.h=new qn,h.g=Ah(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Yt(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,C=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(vi[0]=K.toString()),K=vi);for(let Z=0;Z<K.length;Z++){const de=Ve(T,K[Z],C||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=h.J?z(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ei(),Nn(h.i,h.v,h.B,h.l,h.S,h.u)}Sn.prototype.ba=function(h){h=h.target;const y=this.O;y&&zi(h)==3?y.j():this.Y(h)},Sn.prototype.Y=function(h){try{if(h==this.g)e:{const qe=zi(this.g),Bt=this.g.ya(),st=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||qe!=4||Bt==7||(Bt==8||st<=0?Ei(3):Ei(2)),nr(this);var y=this.g.ca();this.X=y;var T=_m(this);if(this.o=y==200,dn(this.i,this.v,this.B,this.l,this.S,qe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,K=this.g;if((C=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(C)){var Z=C;break t}}Z=null}if(h=Z)zt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ir(this,h);else{this.o=!1,this.m=3,Ye(12),ai(this),Ti(this);break e}}if(this.R){h=!0;let Dt;for(;!this.K&&this.C<T.length;)if(Dt=hh(this,T),Dt==mn){qe==4&&(this.m=4,Ye(14),h=!1),zt(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==$t){this.m=4,Ye(15),zt(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else zt(this.i,this.l,Dt,null),ir(this,Dt);if(ch(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||T.length!=0||this.h.h||(this.m=1,Ye(16),h=!1),this.o=this.o&&h,!h)zt(this.i,this.l,T,"[Invalid Chunked Response]"),ai(this),Ti(this);else if(T.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),fu(de),de.P=!0,Ye(11))}}else zt(this.i,this.l,T,null),ir(this,T);qe==4&&ai(this),this.o&&!this.K&&(qe==4?Eh(this.j,this):(this.o=!1,tr(this)))}else Nr(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ye(12)):(this.m=0,Ye(13)),ai(this),Ti(this)}}}catch{}finally{}};function _m(h){if(!ch(h))return h.g.la();const y=An(h.g);if(y==="")return"";let T="";const C=y.length,K=zi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ai(h),Ti(h),"";h.h.i=new c.TextDecoder}for(let Z=0;Z<C;Z++)h.h.h=!0,T+=h.h.i.decode(y[Z],{stream:!(K&&Z==C-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function ch(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function hh(h,y){var T=h.C,C=y.indexOf(`
`,T);return C==-1?mn:(T=Number(y.substring(T,C)),isNaN(T)?$t:(C+=1,C+T>y.length?mn:(y=y.slice(C,C+T),h.C=C+T,y)))}Sn.prototype.cancel=function(){this.K=!0,ai(this)};function tr(h){h.T=Date.now()+h.H,fo(h,h.H)}function fo(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ct(g(h.aa,h),y)}function nr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Sn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Yn(this.i,this.B),this.M!=2&&(Ei(),Ye(17)),ai(this),this.m=2,Ti(this)):fo(this,this.T-h)};function Ti(h){h.j.I==0||h.K||Eh(h.j,h)}function ai(h){nr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Tn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ir(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||sr(T.h,h))){if(!h.L&&sr(T.h,h)&&T.I==3){try{var C=T.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var K=C;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)To(T),ds(T);else break e;ya(T),Ye(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Ct(g(T.Va,T),6e3));rr(T.h)<=1&&T.ta&&(T.ta=void 0)}else hr(T,11)}else if((h.L||T.g==h)&&To(T),!V(y))for(K=T.Ba.g.parse(y),y=0;y<K.length;y++){let st=K[y];const Dt=st[0];if(!(Dt<=T.K))if(T.K=Dt,st=st[1],T.I==2)if(st[0]=="c"){T.M=st[1],T.ba=st[2];const Ai=st[3];Ai!=null&&(T.ka=Ai,T.j.info("VER="+T.ka));const fr=st[4];fr!=null&&(T.za=fr,T.j.info("SVER="+T.za));const ji=st[5];ji!=null&&typeof ji=="number"&&ji>0&&(C=1.5*ji,T.O=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const Bi=h.g;if(Bi){const _a=Bi.g?Bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var Z=C.h;Z.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(eu(Z,Z.h),Z.h=null))}if(C.G){const bo=Bi.g?Bi.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(C.wa=bo,ht(C.J,C.G,bo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),C=T;var de=h;if(C.na=Sh(C,C.L?C.ba:null,C.W),de.L){tu(C.h,de);var qe=de,Bt=C.O;Bt&&(qe.H=Bt),qe.D&&(nr(qe),tr(qe)),C.g=de}else _h(C);T.i.length>0&&cr(T)}else st[0]!="stop"&&st[0]!="close"||hr(T,7);else T.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?hr(T,7):cu(T):st[0]!="noop"&&T.l&&T.l.qa(st),T.A=0)}}Ei(4)}catch{}}var Xt=class{constructor(h,y){this.g=h,this.map=y}};function Wl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function rr(h){return h.h?1:h.g?h.g.size:0}function sr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function eu(h,y){h.g?h.g.add(y):h.h=y}function tu(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Wl.prototype.cancel=function(){if(this.i=nu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function nu(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return w(h.i)}var fh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mo(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const C=h[T].indexOf("=");let K,Z=null;C>=0?(K=h[T].substring(0,C),Z=h[T].substring(C+1)):K=h[T],y(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function oi(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof oi?(this.l=h.l,pn(this,h.j),this.o=h.o,this.g=h.g,as(this,h.u),this.h=h.h,iu(this,gh(h.i)),this.m=h.m):h&&(y=String(h).match(fh))?(this.l=!1,pn(this,y[1]||"",!0),this.o=ar(y[2]||""),this.g=ar(y[3]||"",!0),as(this,y[4]),this.h=ar(y[5]||"",!0),iu(this,y[6]||"",!0),this.m=ar(y[7]||"")):(this.l=!1,this.i=new ls(null,this.l))}oi.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ha(y,po,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ha(y,po,!0),"@"),h.push(Bn(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ha(T,T.charAt(0)=="/"?ru:dh,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ha(T,mh)),h.join("")},oi.prototype.resolve=function(h){const y=Jt(this);let T=!!h.j;T?pn(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var C=h.h;if(T)as(y,h.u);else if(T=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var K=y.h.lastIndexOf("/");K!=-1&&(C=y.h.slice(0,K+1)+C)}if(K=C,K==".."||K==".")C="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){C=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let de=0;de<K.length;){const qe=K[de++];qe=="."?C&&de==K.length&&Z.push(""):qe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),C&&de==K.length&&Z.push("")):(Z.push(qe),C=!0)}C=Z.join("/")}else C=K}return T?y.h=C:T=h.i.toString()!=="",T?iu(y,gh(h.i)):T=!!h.m,T&&(y.m=h.m),y};function Jt(h){return new oi(h)}function pn(h,y,T){h.j=T?ar(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function as(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function iu(h,y,T){y instanceof ls?(h.i=y,yo(h.i,h.l)):(T||(y=ha(y,os)),h.i=new ls(y,h.l))}function ht(h,y,T){h.i.set(y,T)}function ca(h){return ht(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ar(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ha(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,Qn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Qn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var po=/[#\/\?@]/g,dh=/[#\?:]/g,ru=/[#\?]/g,os=/[#\?@]/g,mh=/#/g;function ls(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function $n(h){h.g||(h.g=new Map,h.h=0,h.i&&mo(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}i=ls.prototype,i.add=function(h,y){$n(this),this.i=null,h=us(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function ph(h,y){$n(h),y=us(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function su(h,y){return $n(h),y=us(h,y),h.g.has(y)}i.forEach=function(h,y){$n(this),this.g.forEach(function(T,C){T.forEach(function(K){h.call(y,K,C,this)},this)},this)};function au(h,y){$n(h);let T=[];if(typeof y=="string")su(h,y)&&(T=T.concat(h.g.get(us(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}i.set=function(h,y){return $n(this),this.i=null,h=us(this,h),su(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=au(this,h),h.length>0?String(h[0]):y):y};function go(h,y,T){ph(h,y),T.length>0&&(h.i=null,h.g.set(us(h,y),w(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var T=y[C];const K=Bn(T);T=au(this,T);for(let Z=0;Z<T.length;Z++){let de=K;T[Z]!==""&&(de+="="+Bn(T[Z])),h.push(de)}}return this.i=h.join("&")};function gh(h){const y=new ls;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function us(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function yo(h,y){y&&!h.j&&($n(h),h.i=null,h.g.forEach(function(T,C){const K=C.toLowerCase();C!=K&&(ph(this,C),go(this,K,T))},h)),h.j=y}function Li(h,y){const T=new Qt;if(c.Image){const C=new Image;C.onload=_(bi,T,"TestLoadImage: loaded",!0,y,C),C.onerror=_(bi,T,"TestLoadImage: error",!1,y,C),C.onabort=_(bi,T,"TestLoadImage: abort",!1,y,C),C.ontimeout=_(bi,T,"TestLoadImage: timeout",!1,y,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else y(!1)}function ou(h,y){const T=new Qt,C=new AbortController,K=setTimeout(()=>{C.abort(),bi(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:C.signal}).then(Z=>{clearTimeout(K),Z.ok?bi(T,"TestPingServer: ok",!0,y):bi(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(K),bi(T,"TestPingServer: error",!1,y)})}function bi(h,y,T,C,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),C(T)}catch{}}function cs(){this.g=new bt}function or(h){this.i=h.Sb||null,this.h=h.ab||!1}E(or,an),or.prototype.g=function(){return new fa(this.i,this.h)};function fa(h,y){nt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(fa,nt),i=fa.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Ui(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_o(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _o(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?hs(this):Ui(this),this.readyState==3&&_o(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,hs(this))},i.Na=function(h){this.g&&(this.response=h,hs(this))},i.ga=function(){this.g&&hs(this)};function hs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ui(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Ui(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Si(h){let y="";return De(h,function(T,C){y+=C,y+=":",y+=T,y+=`\r
`}),y}function da(h,y,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=Si(T),typeof h=="string"?T!=null&&Bn(T):ht(h,y,T))}function yt(h){nt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(yt,nt);var lr=/^https?$/i,lu=["POST","PUT"];i=yt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jn.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){ma(this,Z);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var K in C)T.set(K,C[K]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Z of C.keys())T.set(Z,C.get(Z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(lu,y,void 0)>=0)||C||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,de]of T)this.g.setRequestHeader(Z,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){ma(this,Z)}};function ma(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,uu(h),xr(h)}function uu(h){h.A||(h.A=!0,ct(h,"complete"),ct(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ct(this,"complete"),ct(this,"abort"),xr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),yt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?pa(this):this.Xa())},i.Xa=function(){pa(this)};function pa(h){if(h.h&&typeof l<"u"){if(h.v&&zi(h)==4)setTimeout(h.Ca.bind(h),0);else if(ct(h,"readystatechange"),zi(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var C;if(C=Z===0){let de=String(h.D).match(fh)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),C=!lr.test(de?de.toLowerCase():"")}T=C}if(T)ct(h,"complete"),ct(h,"success");else{h.o=6;try{var K=zi(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",uu(h)}}finally{xr(h)}}}}function xr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||ct(h,"ready");try{T.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function zi(h){return h.g?h.g.readyState:0}i.ca=function(){try{return zi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Be(y)}};function An(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Nr(h){const y={};h=(h.g&&zi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(V(h[C]))continue;var T=si(h[C]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=y[K]||[];y[K]=Z,Z.push(T)}Ue(y,function(C){return C.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ur(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function fs(h){this.za=0,this.i=[],this.j=new Qt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ur("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ur("baseRetryDelayMs",5e3,h),this.Za=ur("retryDelaySeedMs",1e4,h),this.Ta=ur("forwardChannelMaxRetries",2,h),this.va=ur("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Wl(h&&h.concurrentRequestLimit),this.Ba=new cs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=fs.prototype,i.ka=8,i.I=1,i.connect=function(h,y,T,C){Ye(0),this.W=h,this.H=y||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.J=Sh(this,null,this.W),cr(this)};function cu(h){if(vo(h),h.I==3){var y=h.V++,T=Jt(h.J);if(ht(T,"SID",h.M),ht(T,"RID",y),ht(T,"TYPE","terminate"),ga(h,T),y=new Sn(h,h.j,y),y.M=2,y.A=ca(Jt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Ah(y.j,null),y.g.ea(y.A)),y.F=Date.now(),tr(y)}bh(h)}function ds(h){h.g&&(fu(h),h.g.cancel(),h.g=null)}function vo(h){ds(h),h.v&&(c.clearTimeout(h.v),h.v=null),To(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function cr(h){if(!Zl(h.h)&&!h.m){h.m=!0;var y=h.Ea;se||S(),W||(se(),W=!0),R.add(y,h),h.D=0}}function Eo(h,y){return rr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ct(g(h.Ea,h,y),Th(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new Sn(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=z(Z),$(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=yh(this,K,y),T=Jt(this.J),ht(T,"RID",h),ht(T,"CVER",22),this.G&&ht(T,"X-HTTP-Session-Id",this.G),ga(this,T),Z&&(this.R?y="headers="+Bn(Si(Z))+"&"+y:this.u&&da(T,this.u,Z)),eu(this.h,K),this.Ra&&ht(T,"TYPE","init"),this.S?(ht(T,"$req",y),ht(T,"SID","null"),K.U=!0,er(K,T,null)):er(K,T,y),this.I=2}}else this.I==3&&(h?hu(this,h):this.i.length==0||Zl(this.h)||hu(this))};function hu(h,y){var T;y?T=y.l:T=h.V++;const C=Jt(h.J);ht(C,"SID",h.M),ht(C,"RID",T),ht(C,"AID",h.K),ga(h,C),h.u&&h.o&&da(C,h.u,h.o),T=new Sn(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=yh(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),eu(h.h,T),er(T,C,y)}function ga(h,y){h.H&&De(h.H,function(T,C){ht(y,C,T)}),h.l&&De({},function(T,C){ht(y,C,T)})}function yh(h,y,T){T=Math.min(h.i.length,T);const C=h.l?g(h.l.Ka,h.l,h):null;e:{var K=h.i;let qe=-1;for(;;){const Bt=["count="+T];qe==-1?T>0?(qe=K[0].g,Bt.push("ofs="+qe)):qe=0:Bt.push("ofs="+qe);let st=!0;for(let Dt=0;Dt<T;Dt++){var Z=K[Dt].g;const Ai=K[Dt].map;if(Z-=qe,Z<0)qe=Math.max(0,K[Dt].g-100),st=!1;else try{Z="req"+Z+"_"||"";try{var de=Ai instanceof Map?Ai:Object.entries(Ai);for(const[fr,ji]of de){let Bi=ji;f(ji)&&(Bi=bn(ji)),Bt.push(Z+fr+"="+encodeURIComponent(Bi))}}catch(fr){throw Bt.push(Z+"type="+encodeURIComponent("_badmap")),fr}}catch{C&&C(Ai)}}if(st){de=Bt.join("&");break e}}de=void 0}return h=h.i.splice(0,T),y.G=h,de}function _h(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;se||S(),W||(se(),W=!0),R.add(y,h),h.A=0}}function ya(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ct(g(h.Da,h),Th(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,vh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ct(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ye(10),ds(this),vh(this))};function fu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function vh(h){h.g=new Sn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Jt(h.na);ht(y,"RID","rpc"),ht(y,"SID",h.M),ht(y,"AID",h.K),ht(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&ht(y,"TO",h.ia),ht(y,"TYPE","xmlhttp"),ga(h,y),h.u&&h.o&&da(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=ca(Jt(y)),T.u=null,T.R=!0,ho(T,h)}i.Va=function(){this.C!=null&&(this.C=null,ds(this),ya(this),Ye(19))};function To(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Eh(h,y){var T=null;if(h.g==y){To(h),fu(h),h.g=null;var C=2}else if(sr(h.h,y))T=y.G,tu(h.h,y),C=1;else return;if(h.I!=0){if(y.o)if(C==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var K=h.D;C=Cr(),ct(C,new Rt(C,T)),cr(h)}else _h(h);else if(K=y.m,K==3||K==0&&y.X>0||!(C==1&&Eo(h,y)||C==2&&ya(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),K){case 1:hr(h,5);break;case 4:hr(h,10);break;case 3:hr(h,6);break;default:hr(h,2)}}}function Th(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function hr(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),C=h.Ua;const K=!C;C=new oi(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||pn(C,"https"),ca(C),K?Li(C.toString(),T):ou(C.toString(),T)}else Ye(2);h.I=0,h.l&&h.l.pa(y),bh(h),vo(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function bh(h){if(h.I=0,h.ja=[],h.l){const y=nu(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ja,y),P(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function Sh(h,y,T){var C=T instanceof oi?Jt(T):new oi(T);if(C.g!="")y&&(C.g=y+"."+C.g),as(C,C.u);else{var K=c.location;C=K.protocol,y=y?y+"."+K.hostname:K.hostname,K=+K.port;const Z=new oi(null);C&&pn(Z,C),y&&(Z.g=y),K&&as(Z,K),T&&(Z.h=T),C=Z}return T=h.G,y=h.wa,T&&y&&ht(C,T,y),ht(C,"VER",h.ka),ga(h,C),C}function Ah(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new yt(new or({ab:T})):new yt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function wh(){}i=wh.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function ms(){}ms.prototype.g=function(h,y){return new Fn(h,y)};function Fn(h,y){nt.call(this),this.g=new fs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!V(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!V(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Mr(this)}E(Fn,nt),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){cu(this.g)},Fn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=bn(h),h=T);y.i.push(new Xt(y.Ya++,h)),y.I==3&&cr(y)},Fn.prototype.N=function(){this.g.l=null,delete this.j,cu(this.g),delete this.g,Fn.Z.N.call(this)};function Ih(h){on.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Ih,on);function Rh(){xn.call(this),this.status=1}E(Rh,xn);function Mr(h){this.g=h}E(Mr,wh),Mr.prototype.ra=function(){ct(this.g,"a")},Mr.prototype.qa=function(h){ct(this.g,new Ih(h))},Mr.prototype.pa=function(h){ct(this.g,new Rh)},Mr.prototype.oa=function(){ct(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,QA=function(){return new ms},YA=function(){return Cr()},KA=It,Xg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mn.NO_ERROR=0,Mn.TIMEOUT=8,Mn.HTTP_ERROR=6,Yf=Mn,On.COMPLETE="complete",GA=On,ua.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",nt.prototype.listen=nt.prototype.J,ac=ua,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,HA=yt}).apply(typeof Of<"u"?Of:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="12.9.0";function A2(i){Fl=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new Ny("@firebase/firestore");function sl(){return Za.logLevel}function he(i,...e){if(Za.logLevel<=We.DEBUG){const t=e.map(Hy);Za.debug(`Firestore (${Fl}): ${i}`,...t)}}function Ht(i,...e){if(Za.logLevel<=We.ERROR){const t=e.map(Hy);Za.error(`Firestore (${Fl}): ${i}`,...t)}}function vl(i,...e){if(Za.logLevel<=We.WARN){const t=e.map(Hy);Za.warn(`Firestore (${Fl}): ${i}`,...t)}}function Hy(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$A(i,r,t)}function $A(i,e,t){let r=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ht(r),new Error(r)}function Ae(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||$A(e,a,r)}function Te(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(kn.UNAUTHENTICATED)))}shutdown(){}}class R2{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Js;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Js,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Js)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new w2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new kn(e)}}class C2{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class D2{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new C2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(kn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class e0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ki(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const r=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new e0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new e0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=N2(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Le(i,e){return i<e?-1:i>e?1:0}function Jg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return wg(a)===wg(l)?Le(a,l):wg(a)?1:-1}return Le(i.length,e.length)}const M2=55296,O2=57343;function wg(i){const e=i.charCodeAt(0);return e>=M2&&e<=O2}function El(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}function XA(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="__name__";class Er{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Er.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Er?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Er.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const r=Er.isNumericId(e),a=Er.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Er.extractNumericId(e).compare(Er.extractNumericId(t)):Jg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class lt extends Er{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const V2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Er{construct(e,t,r){return new Vt(e,t,r)}static isValidIdentifier(e){return V2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t0}static keyField(){return new Vt([t0])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(r+=f,a++):(l(),a++)}if(l(),c)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(lt.fromString(e))}static fromName(e){return new pe(lt.fromString(e).popFirst(5))}static empty(){return new pe(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(i,e,t){if(!t)throw new fe(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function P2(i,e,t,r){if(e===!0&&r===!0)throw new fe(ne.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function n0(i){if(!pe.isDocumentKey(i))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function i0(i){if(pe.isDocumentKey(i))throw new fe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function WA(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Hd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ve(12329,{type:typeof i})}function Wr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hd(i);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Jc(i,e){if(!WA(i))throw new fe(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new fe(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=-62135596800,s0=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*s0);return new mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<r0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/s0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jc(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:rn("string",mt._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new mt(0,0))}static max(){return new Ce(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=-1;class dd{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Wg(i){return i.fields.find((e=>e.kind===2))}function ka(i){return i.fields.filter((e=>e.kind!==2))}dd.UNKNOWN_ID=-1;class Qf{constructor(e,t){this.fieldPath=e,this.kind=t}}class xc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xc(0,_i.min())}}function ZA(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(r===1e9?new mt(t+1,0):new mt(t,r));return new _i(a,pe.empty(),e)}function ew(i){return new _i(i.readTime,i.key,Tl)}class _i{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _i(Ce.min(),pe.empty(),Tl)}static max(){return new _i(Ce.max(),pe.empty(),Tl)}}function Ky(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(i.documentKey,e.documentKey),t!==0?t:Le(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==tw)throw i;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,r)=>{t(e)}))}static reject(e){return new F(((t,r)=>{r(e)}))}static waitFor(e){return new F(((t,r)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=F.resolve(!1);for(const r of e)t=t.next((a=>a?F.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new F(((r,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++f,f===l&&r(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new F(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="SimpleDb";class Gd{static open(e,t,r,a){try{return new Gd(t,e.transaction(a,r))}catch(l){throw new pc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Js,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new pc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Yy(r.target.error);this.S.reject(new pc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(he(pi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new L2(t)}}class Ws{static delete(e){return he(pi,"Removing database:",e),Ua(eA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!oA())return!1;if(Ws.F())return!0;const e=hn(),t=Ws.M(e),r=0<t&&t<10,a=iw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ws.M(hn())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(he(pi,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new pc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new fe(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new fe(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new pc(e,c))},a.onupgradeneeded=l=>{he(pi,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{he(pi,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const f=Gd.open(this.db,e,l?"readonly":"readwrite",r),m=a(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),F.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(he(pi,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function iw(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class k2{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Ua(this.U.delete())}}class pc extends fe{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function aa(i){return i.name==="IndexedDbTransactionError"}class L2{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(he(pi,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(he(pi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ua(r)}add(e){return he(pi,"ADD",this.store.name,e,e),Ua(this.store.add(e))}get(e){return Ua(this.store.get(e)).next((t=>(t===void 0&&(t=null),he(pi,"GET",this.store.name,e,t),t)))}delete(e){return he(pi,"DELETE",this.store.name,e),Ua(this.store.delete(e))}count(){return he(pi,"COUNT",this.store.name),Ua(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new F(((c,f)=>{l.onerror=m=>{f(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(r),c=[];return this.J(l,((f,m)=>{c.push(m)})).next((()=>c))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new F(((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}X(e,t){he(pi,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,c,f)=>f.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new F(((r,a)=>{t.onerror=l=>{const c=Yy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((f=>{f?c.continue():r()})):r()}}))}J(e,t){const r=[];return new F(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void a();const m=new k2(f),g=t(f.primaryKey,f.value,m);if(g instanceof F){const _=g.catch((E=>(m.done(),F.reject(E))));r.push(_)}m.isDone?a():m.G===null?f.continue():f.continue(m.G)}})).next((()=>F.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ua(i){return new F(((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=Yy(r.target.error);t(a)}}))}let a0=!1;function Yy(i){const e=Ws.M(hn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return a0||(a0=!0,setTimeout((()=>{throw r}),0)),r}}return i}const gc="IndexBackfiller";class U2{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){he(gc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();he(gc,`Documents written: ${t}`)}catch(t){aa(t)?he(gc,"Ignoring IndexedDB error during index backfill: ",t):await sa(t)}await this.re(6e4)}))}}class z2{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return F.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return he(gc,`Processing collection: ${c}`),this.oe(e,c,a).next((f=>{a-=f,r.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((f=>(he(gc,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const c=ew(l);Ky(c,r)>0&&(r=c)})),new _i(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ti.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=-1;function Kd(i){return i==null}function Nc(i){return i===0&&1/i==-1/0}function rw(i){return typeof i=="number"&&Number.isInteger(i)&&!Nc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="";function zn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=o0(e)),e=j2(i.get(t),e);return o0(e)}function j2(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case md:t+="";break;default:t+=l}}return t}function o0(i){return i+md+""}function br(i){const e=i.length;if(Ae(e>=2,64408,{path:i}),e===2)return Ae(i.charAt(0)===md&&i.charAt(1)==="",56145,{path:i}),lt.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=i.indexOf(md,l);switch((c<0||c>t)&&ve(50515,{path:i}),i.charAt(c+1)){case"":const f=i.substring(l,c);let m;a.length===0?m=f:(a+=f,m=a,a=""),r.push(m);break;case"":a+=i.substring(l,c),a+="\0";break;case"":a+=i.substring(l,c+1);break;default:ve(61167,{path:i})}l=c+2}return new lt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="remoteDocuments",Wc="owner",Wo="owner",Mc="mutationQueues",B2="userId",Gi="mutations",l0="batchId",Fa="userMutationsIndex",u0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(i,e){return[i,zn(e)]}function sw(i,e,t){return[i,zn(e),t]}const q2={},bl="documentMutations",pd="remoteDocumentsV14",F2=["prefixPath","collectionGroup","readTime","documentId"],Xf="documentKeyIndex",H2=["prefixPath","collectionGroup","documentId"],aw="collectionGroupIndex",G2=["collectionGroup","readTime","prefixPath","documentId"],Oc="remoteDocumentGlobal",Zg="remoteDocumentGlobalKey",Sl="targets",ow="queryTargetsIndex",K2=["canonicalId","targetId"],Al="targetDocuments",Y2=["targetId","path"],Qy="documentTargetsIndex",Q2=["path","targetId"],gd="targetGlobalKey",Ka="targetGlobal",Vc="collectionParents",$2=["collectionId","parent"],wl="clientMetadata",X2="clientId",Yd="bundles",J2="bundleId",Qd="namedQueries",W2="name",$y="indexConfiguration",Z2="indexId",ey="collectionGroupIndex",eM="collectionGroup",yc="indexState",tM=["indexId","uid"],lw="sequenceNumberIndex",nM=["uid","sequenceNumber"],_c="indexEntries",iM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uw="documentKeyIndex",rM=["indexId","uid","orderedDocumentKey"],$d="documentOverlays",sM=["userId","collectionPath","documentId"],ty="collectionPathOverlayIndex",aM=["userId","collectionPath","largestBatchId"],cw="collectionGroupOverlayIndex",oM=["userId","collectionGroup","largestBatchId"],Xy="globals",lM="name",hw=[Mc,Gi,bl,La,Sl,Wc,Ka,Al,wl,Oc,Vc,Yd,Qd],uM=[...hw,$d],fw=[Mc,Gi,bl,pd,Sl,Wc,Ka,Al,wl,Oc,Vc,Yd,Qd,$d],dw=fw,Jy=[...dw,$y,yc,_c],cM=Jy,mw=[...Jy,Xy],hM=mw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny extends nw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function fn(i,e){const t=Te(i);return Ws.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function oa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function pw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=a??Dn.EMPTY,this.right=l??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Dn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Dn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h0(this.data.getIterator())}getIteratorFrom(e){return new h0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class h0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zo(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new ni([])}unionWith(e){let t=new gt(Vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new gw("Invalid base64 string: "+l):l}})(e);return new Kt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const fM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(i){if(Ae(!!i,39018),typeof i=="string"){let e=0;const t=fM.exec(i);if(Ae(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(i.seconds),nanos:Mt(i.nanos)}}function Mt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ns(i){return typeof i=="string"?Kt.fromBase64String(i):Kt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="server_timestamp",_w="__type__",vw="__previous_value__",Ew="__local_write_time__";function Wy(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[_w])==null?void 0:r.stringValue)===yw}function Xd(i){const e=i.mapValue.fields[vw];return Wy(e)?Xd(e):e}function Pc(i){const e=ts(i.mapValue.fields[Ew].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t,r,a,l,c,f,m,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_,this.apiKey=E}}const yd="(default)";class eo{constructor(e,t){this.projectId=e,this.database=t||yd}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database===yd}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}function mM(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(i.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="__type__",Tw="__max__",Ks={mapValue:{fields:{__type__:{stringValue:Tw}}}},e_="__vector__",Il="value",Jf={nullValue:"NULL_VALUE"};function ea(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Wy(i)?4:bw(i)?9007199254740991:Jd(i)?10:11:ve(28295,{value:i})}function Rr(i,e){if(i===e)return!0;const t=ea(i);if(t!==ea(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Pc(i).isEqual(Pc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ts(a.timestampValue),f=ts(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return ns(a.bytesValue).isEqual(ns(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return Mt(a.geoPointValue.latitude)===Mt(l.geoPointValue.latitude)&&Mt(a.geoPointValue.longitude)===Mt(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Mt(a.integerValue)===Mt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Mt(a.doubleValue),f=Mt(l.doubleValue);return c===f?Nc(c)===Nc(f):isNaN(c)&&isNaN(f)}return!1})(i,e);case 9:return El(i.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(c0(c)!==c0(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Rr(c[m],f[m])))return!1;return!0})(i,e);default:return ve(52216,{left:i})}}function kc(i,e){return(i.values||[]).find((t=>Rr(t,e)))!==void 0}function ta(i,e){if(i===e)return 0;const t=ea(i),r=ea(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Mt(l.integerValue||l.doubleValue),m=Mt(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(i,e);case 3:return f0(i.timestampValue,e.timestampValue);case 4:return f0(Pc(i),Pc(e));case 5:return Jg(i.stringValue,e.stringValue);case 6:return(function(l,c){const f=ns(l),m=ns(c);return f.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const _=Le(f[g],m[g]);if(_!==0)return _}return Le(f.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Le(Mt(l.latitude),Mt(c.latitude));return f!==0?f:Le(Mt(l.longitude),Mt(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return d0(i.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,w,P,D;const f=l.fields||{},m=c.fields||{},g=(b=f[Il])==null?void 0:b.arrayValue,_=(w=m[Il])==null?void 0:w.arrayValue,E=Le(((P=g==null?void 0:g.values)==null?void 0:P.length)||0,((D=_==null?void 0:_.values)==null?void 0:D.length)||0);return E!==0?E:d0(g,_)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ks.mapValue&&c===Ks.mapValue)return 0;if(l===Ks.mapValue)return 1;if(c===Ks.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const b=Jg(m[E],_[E]);if(b!==0)return b;const w=ta(f[m[E]],g[_[E]]);if(w!==0)return w}return Le(m.length,_.length)})(i.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function f0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Le(i,e);const t=ts(i),r=ts(e),a=Le(t.seconds,r.seconds);return a!==0?a:Le(t.nanos,r.nanos)}function d0(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ta(t[a],r[a]);if(l)return l}return Le(t.length,r.length)}function Rl(i){return iy(i)}function iy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=ts(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return ns(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return pe.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=iy(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${iy(t.fields[c])}`;return a+"}"})(i.mapValue):ve(61005,{value:i})}function Wf(i){switch(ea(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xd(i);return e?16+Wf(e):16;case 5:return 2*i.stringValue.length;case 6:return ns(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Wf(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return oa(r.fields,((l,c)=>{a+=l.length+Wf(c)})),a})(i.mapValue);default:throw ve(13486,{value:i})}}function Lc(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ry(i){return!!i&&"integerValue"in i}function Uc(i){return!!i&&"arrayValue"in i}function m0(i){return!!i&&"nullValue"in i}function p0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Zf(i){return!!i&&"mapValue"in i}function Jd(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[Zy])==null?void 0:r.stringValue)===e_}function vc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return oa(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=vc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vc(i.arrayValue.values[t]);return e}return{...i}}function bw(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Tw}const Sw={mapValue:{fields:{[Zy]:{stringValue:e_},[Il]:{arrayValue:{}}}}};function pM(i){return"nullValue"in i?Jf:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Lc(eo.empty(),pe.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Jd(i)?Sw:{mapValue:{}}:ve(35942,{value:i})}function gM(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Lc(eo.empty(),pe.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?Sw:"mapValue"in i?Jd(i)?{mapValue:{}}:Ks:ve(61959,{value:i})}function g0(i,e){const t=ta(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function y0(i,e){const t=ta(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(t)}setAll(e){let t=Vt.emptyPath(),r={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=f.popLast()}c?r[f.lastSegment()]=vc(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Zf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){oa(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Un(vc(this.value))}}function Aw(i){const e=[];return oa(i.fields,((t,r)=>{const a=new Vt([t]);if(Zf(r)){const l=Aw(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t,r,a,l,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Lt(e,0,Ce.min(),Ce.min(),Ce.min(),Un.empty(),0)}static newFoundDocument(e,t,r,a){return new Lt(e,1,t,Ce.min(),r,a,0)}static newNoDocument(e,t){return new Lt(e,2,t,Ce.min(),Ce.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new Lt(e,3,t,Ce.min(),Ce.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.position=e,this.inclusive=t}}function _0(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?r=pe.comparator(pe.fromName(c.referenceValue),t.key):r=ta(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function v0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Rr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function yM(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Ze extends ww{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _M(e,t,r):t==="array-contains"?new TM(e,r):t==="in"?new Nw(e,r):t==="not-in"?new bM(e,r):t==="array-contains-any"?new SM(e,r):new Ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vM(e,r):new EM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ta(t,this.value)):t!==null&&ea(this.value)===ea(t)&&this.matchesComparison(ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pt extends ww{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pt(e,t)}matches(e){return Dl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Dl(i){return i.op==="and"}function sy(i){return i.op==="or"}function t_(i){return Iw(i)&&Dl(i)}function Iw(i){for(const e of i.filters)if(e instanceof pt)return!1;return!0}function ay(i){if(i instanceof Ze)return i.field.canonicalString()+i.op.toString()+Rl(i.value);if(t_(i))return i.filters.map((e=>ay(e))).join(",");{const e=i.filters.map((t=>ay(t))).join(",");return`${i.op}(${e})`}}function Rw(i,e){return i instanceof Ze?(function(r,a){return a instanceof Ze&&r.op===a.op&&r.field.isEqual(a.field)&&Rr(r.value,a.value)})(i,e):i instanceof pt?(function(r,a){return a instanceof pt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,f)=>l&&Rw(c,a.filters[f])),!0):!1})(i,e):void ve(19439)}function Cw(i,e){const t=i.filters.concat(e);return pt.create(t,i.op)}function Dw(i){return i instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${Rl(t.value)}`})(i):i instanceof pt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Dw).join(" ,")+"}"})(i):"Filter"}class _M extends Ze{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class vM extends Ze{constructor(e,t){super(e,"in",t),this.keys=xw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class EM extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=xw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xw(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>pe.fromName(r.referenceValue)))}class TM extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uc(t)&&kc(t.arrayValue,this.value)}}class Nw extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}}class bM extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kc(this.value.arrayValue,t)}}class SM extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>kc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,t=null,r=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function oy(i,e=null,t=[],r=[],a=null,l=null,c=null){return new AM(i,e,t,r,a,l,c)}function to(i){const e=Te(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ay(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Kd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Rl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Rl(r))).join(",")),e.Te=t}return e.Te}function Zc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!yM(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Rw(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!v0(i.startAt,e.startAt)&&v0(i.endAt,e.endAt)}function _d(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function vd(i,e){return i.filters.filter((t=>t instanceof Ze&&t.field.isEqual(e)))}function E0(i,e,t){let r=Jf,a=!0;for(const l of vd(i,e)){let c=Jf,f=!0;switch(l.op){case"<":case"<=":c=pM(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=Jf}g0({value:r,inclusive:a},{value:c,inclusive:f})<0&&(r=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];g0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function T0(i,e,t){let r=Ks,a=!0;for(const l of vd(i,e)){let c=Ks,f=!0;switch(l.op){case">=":case">":c=gM(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=Ks}y0({value:r,inclusive:a},{value:c,inclusive:f})>0&&(r=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];y0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t=null,r=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Mw(i,e,t,r,a,l,c,f){return new Hl(i,e,t,r,a,l,c,f)}function Wd(i){return new Hl(i)}function b0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function wM(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Ow(i){return i.collectionGroup!==null}function Ec(i){const e=Te(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new gt(Vt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new zc(l,r))})),t.has(Vt.keyField().canonicalString())||e.Ie.push(new zc(Vt.keyField(),r))}return e.Ie}function yi(i){const e=Te(i);return e.Ee||(e.Ee=IM(e,Ec(i))),e.Ee}function IM(i,e){if(i.limitType==="F")return oy(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new zc(a.field,l)}));const t=i.endAt?new Cl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Cl(i.startAt.position,i.startAt.inclusive):null;return oy(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function ly(i,e){const t=i.filters.concat([e]);return new Hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function RM(i,e){const t=i.explicitOrderBy.concat([e]);return new Hl(i.path,i.collectionGroup,t,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function uy(i,e,t){return new Hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Zd(i,e){return Zc(yi(i),yi(e))&&i.limitType===e.limitType}function Vw(i){return`${to(yi(i))}|lt:${i.limitType}`}function al(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Dw(a))).join(", ")}]`),Kd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Rl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Rl(a))).join(",")),`Target(${r})`})(yi(i))}; limitType=${i.limitType})`}function eh(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):pe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of Ec(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(c,f,m){const g=_0(c,f,m);return c.inclusive?g<=0:g<0})(r.startAt,Ec(r),a)||r.endAt&&!(function(c,f,m){const g=_0(c,f,m);return c.inclusive?g>=0:g>0})(r.endAt,Ec(r),a))})(i,e)}function Pw(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function kw(i){return(e,t)=>{let r=!1;for(const a of Ec(i)){const l=CM(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function CM(i,e,t){const r=i.field.isKeyField()?pe.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?ta(m,g):ve(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return pw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new St(pe.comparator);function gi(){return DM}const Lw=new St(pe.comparator);function oc(...i){let e=Lw;for(const t of i)e=e.insert(t.key,t);return e}function Uw(i){let e=Lw;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Sr(){return Tc()}function zw(){return Tc()}function Tc(){return new rs((i=>i.toString()),((i,e)=>i.isEqual(e)))}const xM=new St(pe.comparator),NM=new gt(pe.comparator);function Ke(...i){let e=NM;for(const t of i)e=e.add(t);return e}const MM=new gt(Le);function n_(){return MM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function jw(i){return{integerValue:""+i}}function OM(i,e){return rw(e)?jw(e):i_(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this._=void 0}}function VM(i,e,t){return i instanceof jc?(function(a,l){const c={fields:{[_w]:{stringValue:yw},[Ew]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Wy(l)&&(l=Xd(l)),l&&(c.fields[vw]=l),{mapValue:c}})(t,e):i instanceof xl?qw(i,e):i instanceof Nl?Fw(i,e):(function(a,l){const c=Bw(a,l),f=S0(c)+S0(a.Ae);return ry(c)&&ry(a.Ae)?jw(f):i_(a.serializer,f)})(i,e)}function PM(i,e,t){return i instanceof xl?qw(i,e):i instanceof Nl?Fw(i,e):t}function Bw(i,e){return i instanceof Bc?(function(r){return ry(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class jc extends em{}class xl extends em{constructor(e){super(),this.elements=e}}function qw(i,e){const t=Hw(e);for(const r of i.elements)t.some((a=>Rr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Nl extends em{constructor(e){super(),this.elements=e}}function Fw(i,e){let t=Hw(e);for(const r of i.elements)t=t.filter((a=>!Rr(a,r)));return{arrayValue:{values:t}}}class Bc extends em{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function S0(i){return Mt(i.integerValue||i.doubleValue)}function Hw(i){return Uc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t){this.field=e,this.transform=t}}function LM(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof xl&&a instanceof xl||r instanceof Nl&&a instanceof Nl?El(r.elements,a.elements,Rr):r instanceof Bc&&a instanceof Bc?Rr(r.Ae,a.Ae):r instanceof jc&&a instanceof jc})(i.transform,e.transform)}class UM{constructor(e,t){this.version=e,this.transformResults=t}}class vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ed(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class tm{}function Gw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new th(i.key,vn.none()):new Gl(i.key,i.data,vn.none());{const t=i.data,r=Un.empty();let a=new gt(Vt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ss(i.key,r,new ni(a.toArray()),vn.none())}}function zM(i,e,t){i instanceof Gl?(function(a,l,c){const f=a.value.clone(),m=w0(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(i,e,t):i instanceof ss?(function(a,l,c){if(!ed(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=w0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Kw(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function bc(i,e,t,r){return i instanceof Gl?(function(l,c,f,m){if(!ed(l.precondition,c))return f;const g=l.value.clone(),_=I0(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,t,r):i instanceof ss?(function(l,c,f,m){if(!ed(l.precondition,c))return f;const g=I0(l.fieldTransforms,m,c),_=c.data;return _.setAll(Kw(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(l,c,f){return ed(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(i,e,t)}function jM(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=Bw(r.transform,a||null);l!=null&&(t===null&&(t=Un.empty()),t.set(r.field,l))}return t||null}function A0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&El(r,a,((l,c)=>LM(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Gl extends tm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ss extends tm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Kw(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function w0(i,e,t){const r=new Map;Ae(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,f=e.data.field(l.field);r.set(l.field,PM(c,f,t[a]))}return r}function I0(i,e,t){const r=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);r.set(a.field,VM(l,c,e))}return r}class th extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yw extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&zM(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=zw();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=Gw(c,f);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((t,r)=>A0(t,r)))&&El(this.baseMutations,e.baseMutations,((t,r)=>A0(t,r)))}}class s_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return xM})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new s_(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,tt;function qM(i){switch(i){case ne.OK:return ve(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return ve(15467,{code:i})}}function Qw(i){if(i===void 0)return Ht("GRPC error has no .code"),ne.UNKNOWN;switch(i){case nn.OK:return ne.OK;case nn.CANCELLED:return ne.CANCELLED;case nn.UNKNOWN:return ne.UNKNOWN;case nn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case nn.INTERNAL:return ne.INTERNAL;case nn.UNAVAILABLE:return ne.UNAVAILABLE;case nn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case nn.NOT_FOUND:return ne.NOT_FOUND;case nn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case nn.ABORTED:return ne.ABORTED;case nn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case nn.DATA_LOSS:return ne.DATA_LOSS;default:return ve(39323,{code:i})}}(tt=nn||(nn={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=new Xs([4294967295,4294967295],0);function R0(i){const e=FM().encode(i),t=new FA;return t.update(e),new Uint8Array(t.digest())}function C0(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Xs([t,r],0),new Xs([a,l],0)]}class o_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lc(`Invalid padding: ${t}`);if(r<0)throw new lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new lc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Xs.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(Xs.fromNumber(r)));return a.compare(HM)===1&&(a=new Xs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=R0(e),[r,a]=C0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new o_(l,a,t);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=R0(e),[r,a]=C0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,ih.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nh(Ce.min(),a,new St(Le),gi(),Ke())}}class ih{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ih(r,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class $w{constructor(e,t){this.targetId=e,this.Ce=t}}class Xw{constructor(e,t,r=Kt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class D0{constructor(){this.ve=0,this.Fe=x0(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),t=Ke(),r=Ke();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ve(38017,{changeType:l})}})),new ih(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=x0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class GM{constructor(e){this.Ge=e,this.ze=new Map,this.je=gi(),this.He=Pf(),this.Je=Pf(),this.Ze=new St(Le)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(_d(l))if(r===0){const c=new pe(l.path);this.et(t,c,Lt.newNoDocument(c,Ce.min()))}else Ae(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=ns(r).toUint8Array()}catch(m){if(m instanceof gw)return vl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new o_(c,a,l)}catch(m){return vl(m instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&_d(f.target)){const m=new pe(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Lt.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=Ke();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new nh(e,t,this.Ze,this.je,r);return this.je=gi(),this.He=Pf(),this.Je=Pf(),this.Ze=new St(Le),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new D0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new gt(Le),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new gt(Le),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new D0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Pf(){return new St(pe.comparator)}function x0(){return new St(pe.comparator)}const KM={asc:"ASCENDING",desc:"DESCENDING"},YM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QM={and:"AND",or:"OR"};class $M{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cy(i,e){return i.useProto3Json||Kd(e)?e:{value:e}}function Ml(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function XM(i,e){return Ml(i,e.toTimestamp())}function Gn(i){return Ae(!!i,49232),Ce.fromTimestamp((function(t){const r=ts(t);return new mt(r.seconds,r.nanos)})(i))}function l_(i,e){return hy(i,e).canonicalString()}function hy(i,e){const t=(function(a){return new lt(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function Ww(i){const e=lt.fromString(i);return Ae(oI(e),10190,{key:e.toString()}),e}function Ed(i,e){return l_(i.databaseId,e.path)}function Ya(i,e){const t=Ww(e);if(t.get(1)!==i.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new pe(tI(t))}function Zw(i,e){return l_(i.databaseId,e)}function eI(i){const e=Ww(i);return e.length===4?lt.emptyPath():tI(e)}function fy(i){return new lt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function tI(i){return Ae(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function N0(i,e,t){return{name:Ed(i,e),fields:t.value.mapValue.fields}}function JM(i,e,t){const r=Ya(i,e.name),a=Gn(e.updateTime),l=e.createTime?Gn(e.createTime):Ce.min(),c=new Un({mapValue:{fields:e.fields}}),f=Lt.newFoundDocument(r,a,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function WM(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ve(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(Ae(_===void 0||typeof _=="string",58123),Kt.fromBase64String(_||"")):(Ae(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Kt.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(g){const _=g.code===void 0?ne.UNKNOWN:Qw(g.code);return new fe(_,g.message||"")})(c);t=new Xw(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Ya(i,r.document.name),l=Gn(r.document.updateTime),c=r.document.createTime?Gn(r.document.createTime):Ce.min(),f=new Un({mapValue:{fields:r.document.fields}}),m=Lt.newFoundDocument(a,l,c,f),g=r.targetIds||[],_=r.removedTargetIds||[];t=new td(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Ya(i,r.document),l=r.readTime?Gn(r.readTime):Ce.min(),c=Lt.newNoDocument(a,l),f=r.removedTargetIds||[];t=new td([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Ya(i,r.document),l=r.removedTargetIds||[];t=new td([],l,a,null)}else{if(!("filter"in e))return ve(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new BM(a,l),f=r.targetId;t=new $w(f,c)}}return t}function Td(i,e){let t;if(e instanceof Gl)t={update:N0(i,e.key,e.value)};else if(e instanceof th)t={delete:Ed(i,e.key)};else if(e instanceof ss)t={update:N0(i,e.key,e.data),updateMask:rO(e.fieldMask)};else{if(!(e instanceof Yw))return ve(16599,{dt:e.type});t={verify:Ed(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const f=c.transform;if(f instanceof jc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof xl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Nl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Bc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw ve(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:XM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve(27497)})(i,e.precondition)),t}function dy(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?vn.updateTime(Gn(l.updateTime)):l.exists!==void 0?vn.exists(l.exists):vn.none()})(e.currentDocument):vn.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,f){let m=null;if("setToServerValue"in f)Ae(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new jc;else if("appendMissingElements"in f){const _=f.appendMissingElements.values||[];m=new xl(_)}else if("removeAllFromArray"in f){const _=f.removeAllFromArray.values||[];m=new Nl(_)}else"increment"in f?m=new Bc(c,f.increment):ve(16584,{proto:f});const g=Vt.fromServerFormat(f.fieldPath);return new kM(g,m)})(i,a))):[];if(e.update){e.update.name;const a=Ya(i,e.update.name),l=new Un({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new ni(g.map((_=>Vt.fromServerFormat(_))))})(e.updateMask);return new ss(a,l,c,t,r)}return new Gl(a,l,t,r)}if(e.delete){const a=Ya(i,e.delete);return new th(a,t)}if(e.verify){const a=Ya(i,e.verify);return new Yw(a,t)}return ve(1463,{proto:e})}function ZM(i,e){return i&&i.length>0?(Ae(e!==void 0,14353),i.map((t=>(function(a,l){let c=a.updateTime?Gn(a.updateTime):Gn(l);return c.isEqual(Ce.min())&&(c=Gn(l)),new UM(c,a.transformResults||[])})(t,e)))):[]}function nI(i,e){return{documents:[Zw(i,e.path)]}}function iI(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Zw(i,a);const l=(function(g){if(g.length!==0)return aI(pt.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:ol(b.field),direction:tO(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=cy(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function rI(i){let e=eI(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ae(r===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const b=sI(E);return b instanceof pt&&t_(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(P){return new zc(ll(P.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let b;return b=typeof E=="object"?E.value:E,Kd(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(E){const b=!!E.before,w=E.values||[];return new Cl(w,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,w=E.values||[];return new Cl(w,b)})(t.endAt)),Mw(e,a,c,l,f,"F",m,g)}function eO(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sI(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ll(t.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=ll(t.unaryFilter.field);return Ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ll(t.unaryFilter.field);return Ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ll(t.unaryFilter.field);return Ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Ze.create(ll(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return pt.create(t.compositeFilter.filters.map((r=>sI(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(i):ve(30097,{filter:i})}function tO(i){return KM[i]}function nO(i){return YM[i]}function iO(i){return QM[i]}function ol(i){return{fieldPath:i.canonicalString()}}function ll(i){return Vt.fromServerFormat(i.fieldPath)}function aI(i){return i instanceof Ze?(function(t){if(t.op==="=="){if(p0(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NAN"}};if(m0(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(p0(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NAN"}};if(m0(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(t.field),op:nO(t.op),value:t.value}}})(i):i instanceof pt?(function(t){const r=t.getFilters().map((a=>aI(a)));return r.length===1?r[0]:{compositeFilter:{op:iO(t.op),filters:r}}})(i):ve(54877,{filter:i})}function rO(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function oI(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function lI(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t,r,a,l=Ce.min(),c=Ce.min(),f=Kt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.yt=e}}function sO(i,e){let t;if(e.document)t=JM(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),a=io(e.noDocument.readTime);t=Lt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve(56709);{const r=pe.fromSegments(e.unknownDocument.path),a=io(e.unknownDocument.version);t=Lt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new mt(a[0],a[1]);return Ce.fromTimestamp(l)})(e.readTime)),t}function M0(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Ed(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Ml(l,c.version.toTimestamp()),createTime:Ml(l,c.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:no(e.version)};else{if(!e.isUnknownDocument())return ve(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:no(e.version)}}return r}function bd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function no(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function io(i){const e=new mt(i.seconds,i.nanoseconds);return Ce.fromTimestamp(e)}function za(i,e){const t=(e.baseMutations||[]).map((l=>dy(i.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];c.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>dy(i.yt,l))),a=mt.fromMillis(e.localWriteTimeMs);return new r_(e.batchId,a,t,r)}function uc(i){const e=io(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?io(i.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const c=l.documents.length;return Ae(c===1,1966,{count:c}),yi(Wd(eI(l.documents[0])))})(i.query):(function(l){return yi(rI(l))})(i.query),new Jr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Kt.fromBase64String(i.resumeToken))}function cI(i,e){const t=no(e.snapshotVersion),r=no(e.lastLimboFreeSnapshotVersion);let a;a=_d(e.target)?nI(i.yt,e.target):iI(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:to(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function hI(i){const e=rI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?uy(e,e.limit,"L"):e}function Ig(i,e){return new a_(e.largestBatchId,dy(i.yt,e.overlayMutation))}function O0(i,e){const t=e.path.lastSegment();return[i,zn(e.path.popLast()),t]}function V0(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:no(r.readTime),documentKey:zn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{getBundleMetadata(e,t){return P0(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:io(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return P0(e).put((function(a){return{bundleId:a.id,createTime:no(Gn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return k0(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:hI(l.bundledQuery),readTime:io(l.readTime)}})(r)}))}saveNamedQuery(e,t){return k0(e).put((function(a){return{name:a.name,readTime:no(Gn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function P0(i){return fn(i,Yd)}function k0(i){return fn(i,Qd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new nm(e,r)}getOverlay(e,t){return Ju(e).get(O0(this.userId,t)).next((r=>r?Ig(this.serializer,r):null))}getOverlays(e,t){const r=Sr();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,c)=>{const f=new a_(t,c);a.push(this.bt(e,f))})),F.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(zn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Ju(e).X(ty,f))})),F.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Sr(),l=zn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ju(e).H(ty,c).next((f=>{for(const m of f){const g=Ig(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Sr();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ju(e).ee({index:cw,range:f},((m,g,_)=>{const E=Ig(this.serializer,g);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):_.done()})).next((()=>l))}bt(e,t){return Ju(e).put((function(a,l,c){const[f,m,g]=O0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Td(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Ju(i){return fn(i,$d)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{St(e){return fn(e,Xy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Kt.fromUint8Array(r):Kt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Mt(e.integerValue));else if("doubleValue"in e){const r=Mt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Nc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ts(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ns(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?bw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Jd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ve(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){var c,f;const r=e.fields||{};this.Ft(t,53);const a=Il,l=((f=(c=r[a].arrayValue)==null?void 0:c.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(Mt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),pe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ja.Wt=new ja;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=255;function lO(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function L0(i){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const c=lO(255&r[l]);if(a+=c,c!==8)break}return a})(i);return Math.ceil(e/8)}class uO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=L0(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=L0(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(el),this.sn(255)}_n(){this.an(el),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===el?(this.sn(el),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===el?(this.an(el),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class cO{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class hO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Wu{constructor(){this.cn=new uO,this.ascending=new cO(this.cn),this.descending=new hO(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new Ba(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:nd(this.Tn),directionalValue:nd(this.In),orderedDocumentKey:nd(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Us(i,e){let t=i.hn-e.hn;return t!==0?t:(t=U0(i.Tn,e.Tn),t!==0?t:(t=U0(i.In,e.In),t!==0?t:pe.comparator(i.Pn,e.Pn)))}function U0(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function nd(i){return aA()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(i):i}function z0(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(i)}class j0{constructor(e){this.Vn=new gt(((t,r)=>Vt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Wg(e);if(t!==void 0&&!this.pn(t))return!1;const r=ka(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const m=r[l];if(!this.yn(f,m)||!this.wn(this.dn[c++],m))return!1}++l}for(;l<r.length;++l){const f=r[l];if(c>=this.dn.length||!this.wn(this.dn[c++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new gt(Vt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Qf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Qf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Qf(r.field,r.dir==="asc"?0:1)));return new dd(dd.UNKNOWN_ID,this.collectionId,t,xc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(i){var t,r;if(Ae(i instanceof Ze||i instanceof pt,20012),i instanceof Ze){if(i instanceof Nw){const a=((r=(t=i.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((l=>Ze.create(i.field,"==",l))))||[];return pt.create(a,"or")}return i}const e=i.filters.map((a=>fI(a)));return pt.create(e,i.op)}function fO(i){if(i.getFilters().length===0)return[];const e=gy(fI(i));return Ae(dI(e),7391),my(e)||py(e)?[e]:e.getFilters()}function my(i){return i instanceof Ze}function py(i){return i instanceof pt&&t_(i)}function dI(i){return my(i)||py(i)||(function(t){if(t instanceof pt&&sy(t)){for(const r of t.getFilters())if(!my(r)&&!py(r))return!1;return!0}return!1})(i)}function gy(i){if(Ae(i instanceof Ze||i instanceof pt,34018),i instanceof Ze)return i;if(i.filters.length===1)return gy(i.filters[0]);const e=i.filters.map((r=>gy(r)));let t=pt.create(e,i.op);return t=Sd(t),dI(t)?t:(Ae(t instanceof pt,64498),Ae(Dl(t),40251),Ae(t.filters.length>1,57927),t.filters.reduce(((r,a)=>u_(r,a))))}function u_(i,e){let t;return Ae(i instanceof Ze||i instanceof pt,38388),Ae(e instanceof Ze||e instanceof pt,25473),t=i instanceof Ze?e instanceof Ze?(function(a,l){return pt.create([a,l],"and")})(i,e):B0(i,e):e instanceof Ze?B0(e,i):(function(a,l){if(Ae(a.filters.length>0&&l.filters.length>0,48005),Dl(a)&&Dl(l))return Cw(a,l.getFilters());const c=sy(a)?a:l,f=sy(a)?l:a,m=c.filters.map((g=>u_(g,f)));return pt.create(m,"or")})(i,e),Sd(t)}function B0(i,e){if(Dl(e))return Cw(e,i.getFilters());{const t=e.filters.map((r=>u_(i,r)));return pt.create(t,"or")}}function Sd(i){if(Ae(i instanceof Ze||i instanceof pt,11850),i instanceof Ze)return i;const e=i.getFilters();if(e.length===1)return Sd(e[0]);if(Iw(i))return i;const t=e.map((a=>Sd(a))),r=[];return t.forEach((a=>{a instanceof Ze?r.push(a):a instanceof pt&&(a.op===i.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:pt.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.Sn=new c_}addToCollectionParentIndex(e,t){return this.Sn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(_i.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class c_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new gt(lt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new gt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="IndexedDbIndexManager",kf=new Uint8Array(0);class mO{constructor(e,t){this.databaseId=t,this.Dn=new c_,this.Cn=new rs((r=>to(r)),((r,a)=>Zc(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:zn(a)};return F0(e).put(l)}return F.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[XA(t),""],!1,!0);return F0(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(br(c.parent))}return r}))}addFieldIndex(e,t){const r=Zu(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=nl(e);return l.next((f=>{c.put(V0(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Zu(e),a=nl(e),l=tl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Zu(e),r=tl(e),a=nl(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return F.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new j0(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=tl(e);let a=!0;const l=new Map;return F.forEach(this.vn(t),(c=>this.Fn(e,c).next((f=>{a&&(a=!!f),l.set(c,f)})))).next((()=>{if(a){let c=Ke();const f=[];return F.forEach(l,((m,g)=>{he(q0,`Using index ${(function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map((re=>`${re.fieldPath}:${re.kind}`)).join(",")}`})(m)} to execute ${to(t)}`);const _=(function(H,re){const se=Wg(re);if(se===void 0)return null;for(const W of vd(H,se.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null})(g,m),E=(function(H,re){const se=new Map;for(const W of ka(re))for(const R of vd(H,W.fieldPath))switch(R.op){case"==":case"in":se.set(W.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return se.set(W.fieldPath.canonicalString(),R.value),Array.from(se.values())}return null})(g,m),b=(function(H,re){const se=[];let W=!0;for(const R of ka(re)){const S=R.kind===0?E0(H,R.fieldPath,H.startAt):T0(H,R.fieldPath,H.startAt);se.push(S.value),W&&(W=S.inclusive)}return new Cl(se,W)})(g,m),w=(function(H,re){const se=[];let W=!0;for(const R of ka(re)){const S=R.kind===0?T0(H,R.fieldPath,H.endAt):E0(H,R.fieldPath,H.endAt);se.push(S.value),W&&(W=S.inclusive)}return new Cl(se,W)})(g,m),P=this.Mn(m,g,b),D=this.Mn(m,g,w),M=this.xn(m,g,E),U=this.On(m.indexId,_,P,b.inclusive,D,w.inclusive,M);return F.forEach(U,(G=>r.Z(G,t.limit).next((H=>{H.forEach((re=>{const se=pe.fromSegments(re.documentKey);c.has(se)||(c=c.add(se),f.push(se))}))}))))})).next((()=>f))}return F.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=fO(pt.create(e.filters,"and")).map((r=>oy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,c,f){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let E=0;E<m;++E){const b=t?this.Nn(t[E/g]):kf,w=this.Bn(e,b,r[E%g],a),P=this.Ln(e,b,l[E%g],c),D=f.map((M=>this.Bn(e,b,M,!0)));_.push(...this.createRange(w,P,D))}return _}Bn(e,t,r,a){const l=new Ba(e,pe.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new Ba(e,pe.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new j0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const f of l)r.gn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(e,t){let r=2;const a=this.vn(t);return F.forEach(a,(l=>this.Fn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(m){let g=new gt(Vt.comparator),_=!1;for(const E of m.filters)for(const b of E.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:g=g.add(b.field));for(const E of m.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(_?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new Wu;for(const a of ka(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.ln(a.kind);ja.Wt.Dt(l,c)}return r.un()}Nn(e){const t=new Wu;return ja.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Wu;return ja.Wt.Dt(Lc(this.databaseId,t),r.ln((function(l){const c=ka(l);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new Wu);let l=0;for(const c of ka(e)){const f=r[l++];for(const m of a)if(this.qn(t,c.fieldPath)&&Uc(f))a=this.Un(a,c,f);else{const g=m.ln(c.kind);ja.Wt.Dt(f,g)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const f of a){const m=new Wu;m.seed(f.un()),ja.Wt.Dt(c,m.ln(t.kind)),l.push(m)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof Ze&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Zu(e),a=nl(e);return(t?r.H(ey,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const c=[];return F.forEach(l,(f=>a.get([f.indexId,this.uid]).next((m=>{c.push((function(_,E){const b=E?new xc(E.sequenceNumber,new _i(io(E.readTime),new pe(br(E.documentKey)),E.largestBatchId)):xc.empty(),w=_.fields.map((([P,D])=>new Qf(Vt.fromServerFormat(P),D)));return new dd(_.indexId,_.collectionGroup,w,b)})(f,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Le(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Zu(e),l=nl(e);return this.Wn(e).next((c=>a.H(ey,IDBKeyRange.bound(t,t)).next((f=>F.forEach(f,(m=>l.put(V0(m.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return F.forEach(t,((a,l)=>{const c=r.get(a.collectionGroup);return(c?F.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(r.set(a.collectionGroup,f),F.forEach(f,(m=>this.Qn(e,a,m).next((g=>{const _=this.Gn(l,m);return g.isEqual(_)?F.resolve():this.zn(e,l,m,g,_)})))))))}))}jn(e,t,r,a){return tl(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return tl(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=tl(e);let l=new gt(Us);return a.ee({index:uw,range:IDBKeyRange.only([r.indexId,this.uid,nd(this.Kn(r,t))])},((c,f)=>{l=l.add(new Ba(r.indexId,t,z0(f.arrayValue),z0(f.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new gt(Us);const a=this.kn(t,e);if(a==null)return r;const l=Wg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Uc(c))for(const f of c.arrayValue.values||[])r=r.add(new Ba(t.indexId,e.key,this.Nn(f),a))}else r=r.add(new Ba(t.indexId,e.key,kf,a));return r}zn(e,t,r,a,l){he(q0,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,_,E,b){const w=m.getIterator(),P=g.getIterator();let D=Zo(w),M=Zo(P);for(;D||M;){let U=!1,G=!1;if(D&&M){const H=_(D,M);H<0?G=!0:H>0&&(U=!0)}else D!=null?G=!0:U=!0;U?(E(M),M=Zo(P)):G?(b(D),D=Zo(w)):(D=Zo(w),M=Zo(P))}})(a,l,Us,(f=>{c.push(this.jn(e,t,r,f))}),(f=>{c.push(this.Hn(e,t,r,f))})),F.waitFor(c)}Wn(e){let t=1;return nl(e).ee({index:lw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,f)=>Us(c,f))).filter(((c,f,m)=>!f||Us(c,m[f-1])!==0));const a=[];a.push(e);for(const c of r){const f=Us(c,e),m=Us(c,t);if(f===0)a[0]=e.En();else if(f>0&&m<0)a.push(c),a.push(c.En());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const f=a[c].An(this.uid,kf,pe.empty()),m=a[c+1].An(this.uid,kf,pe.empty());l.push(IDBKeyRange.bound(f,m))}return l}Jn(e,t){return Us(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(H0)}getMinOffset(e,t){return F.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||ve(44426))))).next(H0)}}function F0(i){return fn(i,Vc)}function tl(i){return fn(i,_c)}function Zu(i){return fn(i,$y)}function nl(i){return fn(i,yc)}function H0(i){Ae(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;Ky(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new _i(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mI=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(i,e,t){const r=i.store(Gi),a=i.store(bl),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=r.ee({range:c},((_,E,b)=>(f++,b.delete())));l.push(m.next((()=>{Ae(f===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const E=sw(e,_.key.path,t.batchId);l.push(a.delete(E)),g.push(_.key)}return F.waitFor(l).next((()=>g))}function Ad(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ve(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(mI,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);class im{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Ae(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new im(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zs(e).ee({index:Fa,range:r},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=ul(e),c=zs(e);return c.add({}).next((f=>{Ae(typeof f=="number",49019);const m=new r_(f,t,r,a),g=(function(w,P,D){const M=D.baseMutations.map((G=>Td(w.yt,G))),U=D.mutations.map((G=>Td(w.yt,G)));return{userId:P,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:M,mutations:U}})(this.serializer,this.userId,m),_=[];let E=new gt(((b,w)=>Le(b.canonicalString(),w.canonicalString())));for(const b of a){const w=sw(this.userId,b.key.path,f);E=E.add(b.key.path.popLast()),_.push(c.put(g)),_.push(l.put(w,q2))}return E.forEach((b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),F.waitFor(_).next((()=>m))}))}lookupMutationBatch(e,t){return zs(e).get(t).next((r=>r?(Ae(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),za(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?F.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return zs(e).ee({index:Fa,range:a},((c,f,m)=>{f.userId===this.userId&&(Ae(f.batchId>=r,47524,{Yn:r}),l=za(this.serializer,f)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ga;return zs(e).ee({index:Fa,range:t,reverse:!0},((a,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ga],[this.userId,Number.POSITIVE_INFINITY]);return zs(e).H(Fa,t).next((r=>r.map((a=>za(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=$f(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return ul(e).ee({range:a},((c,f,m)=>{const[g,_,E]=c,b=br(_);if(g===this.userId&&t.path.isEqual(b))return zs(e).get(E).next((w=>{if(!w)throw ve(61480,{er:c,batchId:E});Ae(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:E}),l.push(za(this.serializer,w))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gt(Le);const a=[];return t.forEach((l=>{const c=$f(this.userId,l.path),f=IDBKeyRange.lowerBound(c),m=ul(e).ee({range:f},((g,_,E)=>{const[b,w,P]=g,D=br(w);b===this.userId&&l.path.isEqual(D)?r=r.add(P):E.done()}));a.push(m)})),F.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=$f(this.userId,r),c=IDBKeyRange.lowerBound(l);let f=new gt(Le);return ul(e).ee({range:c},((m,g,_)=>{const[E,b,w]=m,P=br(b);E===this.userId&&r.isPrefixOf(P)?P.length===a&&(f=f.add(w)):_.done()})).next((()=>this.tr(e,f)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(zs(e).get(l).next((c=>{if(c===null)throw ve(35274,{batchId:l});Ae(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(za(this.serializer,c))})))})),F.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return pI(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),F.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return F.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return ul(e).ee({range:r},((l,c,f)=>{if(l[0]===this.userId){const m=br(l[1]);a.push(m)}else f.done()})).next((()=>{Ae(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return gI(e,this.userId,t)}ir(e){return yI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ga,lastStreamToken:""}))}}function gI(i,e,t){const r=$f(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return ul(i).ee({range:l,Y:!0},((f,m,g)=>{const[_,E,b]=f;_===e&&E===a&&(c=!0),g.done()})).next((()=>c))}function zs(i){return fn(i,Gi)}function ul(i){return fn(i,bl)}function yI(i){return fn(i,Mc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ro(0)}static ar(){return new ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new ro(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ce.fromTimestamp(new mt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>il(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Ae(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return il(e).ee(((c,f)=>{const m=uc(f);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>F.waitFor(l))).next((()=>a))}forEachTarget(e,t){return il(e).ee(((r,a)=>{const l=uc(a);t(l)}))}ur(e){return K0(e).get(gd).next((t=>(Ae(t!==null,2888),t)))}cr(e,t){return K0(e).put(gd,t)}lr(e,t){return il(e).put(cI(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=to(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return il(e).ee({range:a,index:ow},((c,f,m)=>{const g=uc(f);Zc(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Gs(e);return t.forEach((c=>{const f=zn(c.path);a.push(l.put({targetId:r,path:f})),a.push(this.referenceDelegate.addReference(e,r,c))})),F.waitFor(a)}removeMatchingKeys(e,t,r){const a=Gs(e);return F.forEach(t,(l=>{const c=zn(l.path);return F.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Gs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Gs(e);let l=Ke();return a.ee({range:r,Y:!0},((c,f,m)=>{const g=br(c[1]),_=new pe(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const r=zn(t.path),a=IDBKeyRange.bound([r],[XA(r)],!1,!0);let l=0;return Gs(e).ee({index:Qy,Y:!0,range:a},(([c,f],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return il(e).get(t).next((r=>r?uc(r):null))}}function il(i){return fn(i,Sl)}function K0(i){return fn(i,Ka)}function Gs(i){return fn(i,Al)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="LruGarbageCollector",_I=1048576;function Q0([i,e],[t,r]){const a=Le(i,t);return a===0?Le(e,r):a}class gO{constructor(e){this.Pr=e,this.buffer=new gt(Q0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Q0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(Y0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?he(Y0,"Ignoring IndexedDB error during garbage collection: ",t):await sa(t)}await this.Ar(3e5)}))}}class yO{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(ti.ce);const r=new gO(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(G0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,c,f,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,f=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),sl()<=We.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function EI(i,e){return new yO(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t){this.db=e,this.garbageCollector=EI(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return Lf(e,r)}removeReference(e,t,r){return Lf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Lf(e,t)}wr(e,t){return(function(a,l){let c=!1;return yI(a).te((f=>gI(a,f,l).next((m=>(m&&(c=!0),F.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,f)=>{if(f<=t){const m=this.wr(e,c).next((g=>{if(!g)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Ce.min()),Gs(e).delete((function(E){return[0,zn(E.path)]})(c)))))}));a.push(m)}})).next((()=>F.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Lf(e,t)}yr(e,t){const r=Gs(e);let a,l=ti.ce;return r.ee({index:Qy},(([c,f],{path:m,sequenceNumber:g})=>{c===0?(l!==ti.ce&&t(new pe(br(a)),l),l=g,a=m):l=ti.ce})).next((()=>{l!==ti.ce&&t(new pe(br(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(i,e){return Gs(i).put((function(r,a){return{targetId:0,path:zn(r.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.changes=new rs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Va(e).put(r)}removeEntry(e,t,r){return Va(e).delete((function(l,c){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],bd(c),f[f.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Lt.newInvalidDocument(t);return Va(e).ee({index:Xf,range:IDBKeyRange.only(ec(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:Lt.newInvalidDocument(t)};return Va(e).ee({index:Xf,range:IDBKeyRange.only(ec(t))},((a,l)=>{r={document:this.Sr(t,l),size:Ad(l)}})).next((()=>r))}getEntries(e,t){let r=gi();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);r=r.insert(a,c)})).next((()=>r))}vr(e,t){let r=gi(),a=new St(pe.comparator);return this.Cr(e,t,((l,c)=>{const f=this.Sr(l,c);r=r.insert(l,f),a=a.insert(l,Ad(c))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return F.resolve();let a=new gt(J0);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(ec(a.first()),ec(a.last())),c=a.getIterator();let f=c.getNext();return Va(e).ee({index:Xf,range:l},((m,g,_)=>{const E=pe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&J0(f,E)<0;)r(f,null),f=c.getNext();f&&f.isEqual(E)&&(r(f,g),f=c.hasNext()?c.getNext():null),f?_.j(ec(f)):_.done()})).next((()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),bd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Va(e).H(IDBKeyRange.bound(f,m,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let _=gi();for(const E of g){const b=this.Sr(pe.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);b.isFoundDocument()&&(eh(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _}))}getAllFromCollectionGroup(e,t,r,a){let l=gi();const c=X0(t,r),f=X0(t,_i.max());return Va(e).ee({index:aw,range:IDBKeyRange.bound(c,f,!0)},((m,g,_)=>{const E=this.Sr(pe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new EO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return $0(e).get(Zg).next((t=>(Ae(!!t,20021),t)))}br(e,t){return $0(e).put(Zg,t)}Sr(e,t){if(t){const r=sO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return Lt.newInvalidDocument(e)}}function bI(i){return new vO(i)}class EO extends TI{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new rs((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new gt(((l,c)=>Le(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const f=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,f.readTime)),c.isValidDocument()){const m=M0(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=Ad(m);r+=g-f.size,t.push(this.Mr.addEntry(e,l,m))}else if(r-=f.size,this.trackRemovals){const m=M0(this.Mr.serializer,c.convertToNoDocument(Ce.min()));t.push(this.Mr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function $0(i){return fn(i,Oc)}function Va(i){return fn(i,pd)}function ec(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function X0(i,e){const t=e.documentKey.path.toArray();return[i,bd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function J0(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Le(t[l],r[l]),a)return a;return a=Le(t.length,r.length),a||(a=Le(t[t.length-2],r[r.length-2]),a||Le(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&bc(r.mutation,a,ni.empty(),mt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ke()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ke()){const a=Sr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=oc();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Sr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ke())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,r,a){let l=gi();const c=Tc(),f=(function(){return Tc()})();return t.forEach(((m,g)=>{const _=r.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof ss)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),bc(_.mutation,g,_.mutation.getFieldMask(),mt.now())):c.set(g.key,ni.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>f.set(g,new TO(_,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Tc();let a=new St(((c,f)=>c-f)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||ni.empty();_=f.applyToLocalView(g,_),r.set(m,_);const E=(a.get(f.batchId)||Ke()).add(m);a=a.insert(f.batchId,E)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,_=m.value,E=zw();_.forEach((b=>{if(!l.has(b)){const w=Gw(t.get(b),r.get(b));w!==null&&E.set(b,w),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return F.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return wM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):F.resolve(Sr());let f=Tl,m=l;return c.next((g=>F.forEach(g,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?F.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Ke()))).next((_=>({batchId:f,changes:Uw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((r=>{let a=oc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=oc();return this.indexManager.getCollectionParents(e,l).next((f=>F.forEach(f,(m=>{const g=(function(E,b){return new Hl(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((_=>{_.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Lt.newInvalidDocument(_)))}));let f=oc();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&bc(_.mutation,g,ni.empty(),mt.now()),eh(t,g)&&(f=f.insert(m,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return F.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Gn(a.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:hI(a.bundledQuery),readTime:Gn(a.readTime)}})(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.overlays=new St(pe.comparator),this.Lr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Sr();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),F.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){const a=Sr(),l=t.length+1,c=new pe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return F.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new St(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=Sr(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const f=Sr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>f.set(g,_))),!(f.size()>=a)););return F.resolve(f)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new a_(t,r));let l=this.Lr.get(t);l===void 0&&(l=Ke(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.kr=new gt(yn.Kr),this.qr=new gt(yn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new yn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new yn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new pe(new lt([])),r=new yn(t,e),a=new yn(t,e+1),l=[];return this.qr.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new pe(new lt([])),r=new yn(t,e),a=new yn(t,e+1);let l=Ke();return this.qr.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new yn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class yn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return pe.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new gt(yn.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new r_(l,t,r,a);this.mutationQueue.push(c);for(const f of a)this.Jr=this.Jr.add(new yn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return F.resolve(c)}lookupMutationBatch(e,t){return F.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return F.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Ga:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yn(t,0),a=new yn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),F.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gt(Le);return t.forEach((a=>{const l=new yn(a,0),c=new yn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{r=r.add(f.Hr)}))})),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;pe.isDocumentKey(l)||(l=l.child(""));const c=new yn(new pe(l),0);let f=new gt(Le);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Hr)),!0)}),c),F.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ae(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(t.mutations,(a=>{const l=new yn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new yn(t,0),a=this.Jr.firstAfterOrEqual(r);return F.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.ti=e,this.docs=(function(){return new St(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Lt.newInvalidDocument(a))})),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=gi();const c=t.path,f=new pe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Ky(ew(_),r)<=0||(a.has(_.key)||eh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return F.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ve(9500)}ni(e,t){return F.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new RO(this)}getSize(e){return F.resolve(this.size)}}class RO extends TI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),F.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.persistence=e,this.ri=new rs((t=>to(t)),Zc),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new h_,this.targetCount=0,this.oi=ro._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),F.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ro(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.lr(t),F.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),F.waitFor(l).next((()=>a))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),F.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,t){this._i={},this.overlays={},this.ai=new ti(0),this.ui=!1,this.ui=!0,this.ci=new AO,this.referenceDelegate=e(this),this.li=new CO(this),this.indexManager=new dO,this.remoteDocumentCache=(function(a){return new IO(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new uI(t),this.Pi=new bO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new wO(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const a=new DO(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return F.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class DO extends nw{constructor(e){super(),this.currentSequenceNumber=e}}class rm{constructor(e){this.persistence=e,this.Ri=new h_,this.Ai=null}static Vi(e){return new rm(e)}get di(){if(this.Ai)return this.Ai;throw ve(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,(r=>{const a=pe.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ce.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class wd{constructor(e,t){this.persistence=e,this.fi=new rs((r=>zn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=EI(this,t)}static Vi(e,t){return new wd(e,t)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return F.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?F.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(r++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wf(e.data.value)),t}wr(e,t,r){return F.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return F.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Gd("createOrUpgrade",t);r<1&&a>=1&&((function(m){m.createObjectStore(Wc)})(e),(function(m){m.createObjectStore(Mc,{keyPath:B2}),m.createObjectStore(Gi,{keyPath:l0,autoIncrement:!0}).createIndex(Fa,u0,{unique:!0}),m.createObjectStore(bl)})(e),W0(e),(function(m){m.createObjectStore(La)})(e));let c=F.resolve();return r<3&&a>=3&&(r!==0&&((function(m){m.deleteObjectStore(Al),m.deleteObjectStore(Sl),m.deleteObjectStore(Ka)})(e),W0(e)),c=c.next((()=>(function(m){const g=m.store(Ka),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return g.put(gd,_)})(l)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(m,g){return g.store(Gi).H().next((E=>{m.deleteObjectStore(Gi),m.createObjectStore(Gi,{keyPath:l0,autoIncrement:!0}).createIndex(Fa,u0,{unique:!0});const b=g.store(Gi),w=E.map((P=>b.put(P)));return F.waitFor(w)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(wl,{keyPath:X2})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.gi(l)))),r<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore(Oc)})(e),this.pi(l))))),r<7&&a>=7&&(c=c.next((()=>this.yi(l)))),r<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),r<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.bi(l)))),r<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Yd,{keyPath:J2})})(e),(function(m){m.createObjectStore(Qd,{keyPath:W2})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore($d,{keyPath:sM});g.createIndex(ty,aM,{unique:!1}),g.createIndex(cw,oM,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(pd,{keyPath:F2});g.createIndex(Xf,H2),g.createIndex(aw,G2)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(La)))),r<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),r<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore($y,{keyPath:Z2,autoIncrement:!0}).createIndex(ey,eM,{unique:!1}),m.createObjectStore(yc,{keyPath:tM}).createIndex(lw,nM,{unique:!1}),m.createObjectStore(_c,{keyPath:iM}).createIndex(uw,rM,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore(yc).clear()})).next((()=>{t.objectStore(_c).clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(Xy,{keyPath:lM})})(e)}))),r<18&&a>=18&&aA()&&(c=c.next((()=>{t.objectStore(yc).clear()})).next((()=>{t.objectStore(_c).clear()}))),c}pi(e){let t=0;return e.store(La).ee(((r,a)=>{t+=Ad(a)})).next((()=>{const r={byteSize:t};return e.store(Oc).put(Zg,r)}))}gi(e){const t=e.store(Mc),r=e.store(Gi);return t.H().next((a=>F.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Ga],[l.userId,l.lastAcknowledgedBatchId]);return r.H(Fa,c).next((f=>F.forEach(f,(m=>{Ae(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=za(this.serializer,m);return pI(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(Al),r=e.store(La);return e.store(Ka).get(gd).next((a=>{const l=[];return r.ee(((c,f)=>{const m=new lt(c),g=(function(E){return[0,zn(E)]})(m);l.push(t.get(g).next((_=>_?F.resolve():(E=>t.put({targetId:0,path:zn(E),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>F.waitFor(l)))}))}wi(e,t){e.createObjectStore(Vc,{keyPath:$2});const r=t.store(Vc),a=new c_,l=c=>{if(a.add(c)){const f=c.lastSegment(),m=c.popLast();return r.put({collectionId:f,parent:zn(m)})}};return t.store(La).ee({Y:!0},((c,f)=>{const m=new lt(c);return l(m.popLast())})).next((()=>t.store(bl).ee({Y:!0},(([c,f,m],g)=>{const _=br(f);return l(_.popLast())}))))}bi(e){const t=e.store(Sl);return t.ee(((r,a)=>{const l=uc(a),c=cI(this.serializer,l);return t.put(c)}))}Si(e,t){const r=t.store(La),a=[];return r.ee(((l,c)=>{const f=t.store(pd),m=(function(E){return E.document?new pe(lt.fromString(E.document.name).popFirst(5)):E.noDocument?pe.fromSegments(E.noDocument.path):E.unknownDocument?pe.fromSegments(E.unknownDocument.path):ve(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(f.put(g))})).next((()=>F.waitFor(a)))}Di(e,t){const r=t.store(Gi),a=bI(this.serializer),l=new f_(rm.Vi,this.serializer.yt);return r.H().next((c=>{const f=new Map;return c.forEach((m=>{let g=f.get(m.userId)??Ke();za(this.serializer,m).keys().forEach((_=>g=g.add(_))),f.set(m.userId,g)})),F.forEach(f,((m,g)=>{const _=new kn(g),E=nm.wt(this.serializer,_),b=l.getIndexManager(_),w=im.wt(_,this.serializer,b,l.referenceDelegate);return new SI(a,w,E,b).recalculateAndSaveOverlaysForDocumentKeys(new ny(t,ti.ce),m).next()}))}))}}function W0(i){i.createObjectStore(Al,{keyPath:Y2}).createIndex(Qy,Q2,{unique:!0}),i.createObjectStore(Sl,{keyPath:"targetId"}).createIndex(ow,K2,{unique:!0}),i.createObjectStore(Ka)}const js="IndexedDbPersistence",Rg=18e5,Cg=5e3,Dg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",NO="main";class d_{constructor(e,t,r,a,l,c,f,m,g,_,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=c,this.document=f,this.Fi=g,this.Mi=_,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=b=>Promise.resolve(),!d_.v())throw new fe(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _O(this,a),this.Ki=t+NO,this.serializer=new uI(m),this.qi=new Ws(this.Ki,this.xi,new xO(this.serializer)),this.ci=new oO,this.li=new pO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bI(this.serializer),this.Pi=new aO,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&Ht(js,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(ne.FAILED_PRECONDITION,Dg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new ti(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(aa(e))return he(js,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he(js,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return tc(e).get(Wo).next((t=>F.resolve(this.Xi(t))))}Yi(e){return Uf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Rg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=fn(t,wl);return r.H().next((a=>{const l=this.ns(a,Rg),c=a.filter((f=>l.indexOf(f)===-1));return F.forEach(c,(f=>r.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?F.resolve(!0):tc(e).get(Wo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cg)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new fe(ne.FAILED_PRECONDITION,Dg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uf(e).H().next((r=>this.ns(r,Cg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||c&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&he(js,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Wc,wl],(e=>{const t=new ny(e,ti.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Uf(e).H().next((t=>this.ns(t,Rg).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return im.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return nm.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){he(js,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?hM:m===17?mw:m===16?cM:m===15?Jy:m===14?dw:m===13?fw:m===12?uM:m===11?hw:void ve(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(f=>(c=new ny(f,this.ai?this.ai.next():ti.ce),t==="readwrite-primary"?this.ji(c).next((m=>!!m||this.Hi(c))).next((m=>{if(!m)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new fe(ne.FAILED_PRECONDITION,tw);return r(c)})).next((m=>this.Zi(c).next((()=>m)))):this.Ps(c).next((()=>r(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Ps(e){return tc(e).get(Wo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cg)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new fe(ne.FAILED_PRECONDITION,Dg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tc(e).put(Wo,t)}static v(){return Ws.v()}Ji(e){const t=tc(e);return t.get(Wo).next((r=>this.Xi(r)?(he(js,"Releasing primary lease."),t.delete(Wo)):F.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;sA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const r=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return he(js,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ht(js,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tc(i){return fn(i,Wc)}function Uf(i){return fn(i,wl)}function AI(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Ke(),a=Ke();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new m_(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return sA()?8:iw(hn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new MO;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(sl()<=We.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(sl()<=We.DEBUG&&he("QueryEngine","Query:",al(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(sl()<=We.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(t))):F.resolve())}gs(e,t){if(b0(t))return F.resolve(null);let r=yi(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=uy(t,null,"F"),r=yi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ke(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.bs(t,f);return this.Ss(t,g,c,m.readTime)?this.gs(e,uy(t,null,"F")):this.Ds(e,g,t,m)}))))})))))}ps(e,t,r,a){return b0(t)||a.isEqual(Ce.min())?F.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,a)?F.resolve(null):(sl()<=We.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),al(t)),this.Ds(e,c,t,ZA(a,Tl)).next((f=>f)))}))}bs(e,t){let r=new gt(kw(e));return t.forEach(((a,l)=>{eh(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return sl()<=We.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",al(t)),this.fs.getDocumentsMatchingQuery(e,t,_i.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="LocalStore",OO=3e8;class VO{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new St(Le),this.Fs=new rs((l=>to(l)),Zc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function II(i,e,t,r){return new VO(i,e,t,r)}async function RI(i,e){const t=Te(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],f=[];let m=Ke();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){f.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function PO(i,e){const t=Te(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,_){const E=g.batch,b=E.keys();let w=F.resolve();return b.forEach((P=>{w=w.next((()=>_.getEntry(m,P))).next((D=>{const M=g.docVersions.get(P);Ae(M!==null,48541),D.version.compareTo(M)<0&&(E.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),_.addEntry(D)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=Ke();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function CI(i){const e=Te(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function kO(i,e){const t=Te(i),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((_,E)=>{const b=a.get(E);if(!b)return;f.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let w=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Kt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,r)),a=a.insert(E,w),(function(D,M,U){return D.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=OO?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(b,w,_)&&f.push(t.li.updateTargetData(l,w))}));let m=gi(),g=Ke();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(LO(l,c,e.documentUpdates).next((_=>{m=_.Bs,g=_.Ls}))),!r.isEqual(Ce.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(_)}return F.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.vs=a,l)))}function LO(i,e,t){let r=Ke(),a=Ke();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=gi();return t.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):he(p_,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:a}}))}function UO(i,e){const t=Te(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ga),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Id(i,e){const t=Te(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,F.resolve(a)):t.li.allocateTargetId(r).next((c=>(a=new Jr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Ol(i,e,t){const r=Te(i),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!aa(c))throw c;he(p_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function yy(i,e,t){const r=Te(i);let a=Ce.min(),l=Ke();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const E=Te(m),b=E.Fs.get(_);return b!==void 0?F.resolve(E.vs.get(b)):E.li.getTargetData(g,_)})(r,c,yi(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?a:Ce.min(),t?l:Ke()))).next((f=>(NI(r,Pw(e),f),{documents:f,ks:l})))))}function DI(i,e){const t=Te(i),r=Te(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((c=>c?c.target:null))))}function xI(i,e){const t=Te(i),r=t.Ms.get(e)||Ce.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,ZA(r,Tl),Number.MAX_SAFE_INTEGER))).then((a=>(NI(t,e,a),a)))}function NI(i,e,t){let r=i.Ms.get(e)||Ce.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.Ms.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="firestore_clients";function Z0(i,e){return`${MI}_${i}_${e}`}const OI="firestore_mutations";function eS(i,e,t){let r=`${OI}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const VI="firestore_targets";function xg(i,e){return`${VI}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="SharedClientState";class Rd{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new fe(a.error.code,a.error.message))),c?new Rd(e,t,a.state,l):(Ht(Tr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new fe(r.error.code,r.error.message))),l?new Sc(e,r.state,a):(Ht(Tr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=n_();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=rw(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Cd(e,l):(Ht(Tr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class g_{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new g_(t.clientId,t.onlineState):(Ht(Tr,`Failed to parse online state: ${e}`),null)}}class _y{constructor(){this.activeTargetIds=n_()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ng{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new St(Le),this.started=!1,this.Zs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=Z0(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new _y),this.eo=new RegExp(`^${MI}_${c}_([^_]*)$`),this.no=new RegExp(`^${OI}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${VI}_${c}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(Z0(this.persistenceKey,r));if(a){const l=Cd.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(xg(this.persistenceKey,e));if(a){const l=Sc.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return he(Tr,"READ",e,t),t}setItem(e,t){he(Tr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){he(Tr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(he(Tr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let c=ti.ce;if(l!=null)try{const f=JSON.parse(l);Ae(typeof f=="number",30636,{yo:l}),c=f}catch(f){Ht(Tr,"Failed to read sequence number from WebStorage",f)}return c})(t.newValue);r!==ti.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new Rd(this.currentUser,e,t,r),l=eS(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=eS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=xg(this.persistenceKey,e),l=new Sc(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return Cd.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Rd.$s(new kn(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return Sc.$s(a,t)}_o(e){return g_.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);he(Tr,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),c=[],f=[];return l.forEach((m=>{a.has(m)||c.push(m)})),a.forEach((m=>{l.has(m)||f.push(m)})),this.syncEngine.Co(c,f).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=n_();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class PI{constructor(){this.vo=new _y,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new _y,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="ConnectivityMonitor";class nS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(tS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(tS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf=null;function vy(){return zf===null?zf=(function(){return 268435456+Math.round(2147483648*Math.random())})():zf++,"0x"+zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="RestConnection",jO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class BO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===yd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const c=vy(),f=this.Qo(e,t.toUriEncodedString());he(Mg,`Sending RPC '${e}' ${c}:`,f,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:g}=new URL(f),_=jl(g);return this.zo(e,f,m,r,_).then((E=>(he(Mg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw vl(Mg,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",r),E}))}jo(e,t,r,a,l,c){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=jO[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection",nc=(i,e,t)=>{i.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class dl extends BO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!dl.c_){const e=YA();nc(e,KA.STAT_EVENT,(t=>{t.stat===Xg.PROXY?he(Pn,"STAT_EVENT: detected buffering proxy"):t.stat===Xg.NOPROXY&&he(Pn,"STAT_EVENT: detected no buffering proxy")})),dl.c_=!0}}zo(e,t,r,a,l){const c=vy();return new Promise(((f,m)=>{const g=new HA;g.setWithCredentials(!0),g.listenOnce(GA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Yf.NO_ERROR:const E=g.getResponseJson();he(Pn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case Yf.TIMEOUT:he(Pn,`RPC '${e}' ${c} timed out`),m(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const b=g.getStatus();if(he(Pn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w==null?void 0:w.error;if(P&&P.status&&P.message){const D=(function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(G)>=0?G:ne.UNKNOWN})(P.status);m(new fe(D,P.message))}else m(new fe(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{he(Pn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);he(Pn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,r,15)}))}T_(e,t,r){const a=vy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const g=l.join("");he(Pn,`Creating RPC '${e}' stream ${a}: ${g}`,f);const _=c.createWebChannel(g,f);this.I_(_);let E=!1,b=!1;const w=new qO({Ho:P=>{b?he(Pn,`Not sending because RPC '${e}' stream ${a} is closed:`,P):(E||(he(Pn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),E=!0),he(Pn,`RPC '${e}' stream ${a} sending:`,P),_.send(P))},Jo:()=>_.close()});return nc(_,ac.EventType.OPEN,(()=>{b||(he(Pn,`RPC '${e}' stream ${a} transport opened.`),w.i_())})),nc(_,ac.EventType.CLOSE,(()=>{b||(b=!0,he(Pn,`RPC '${e}' stream ${a} transport closed`),w.o_(),this.E_(_))})),nc(_,ac.EventType.ERROR,(P=>{b||(b=!0,vl(Pn,`RPC '${e}' stream ${a} transport errored. Name:`,P.name,"Message:",P.message),w.o_(new fe(ne.UNAVAILABLE,"The operation could not be completed")))})),nc(_,ac.EventType.MESSAGE,(P=>{var D;if(!b){const M=P.data[0];Ae(!!M,16349);const U=M,G=(U==null?void 0:U.error)||((D=U[0])==null?void 0:D.error);if(G){he(Pn,`RPC '${e}' stream ${a} received error:`,G);const H=G.status;let re=(function(R){const S=nn[R];if(S!==void 0)return Qw(S)})(H),se=G.message;H==="NOT_FOUND"&&se.includes("database")&&se.includes("does not exist")&&se.includes(this.databaseId.database)&&vl(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),re===void 0&&(re=ne.INTERNAL,se="Unknown error status: "+H+" with message "+G.message),b=!0,w.o_(new fe(re,se)),_.close()}else he(Pn,`RPC '${e}' stream ${a} received:`,M),w.__(M)}})),dl.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return QA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(i){return new dl(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(){return typeof window<"u"?window:null}function id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(i){return new $M(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dl.c_=!1;class LI{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&he("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="PersistentStream";class UI{constructor(e,t,r,a,l,c,f,m){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Ht(t.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new fe(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(iS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(he(iS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HO extends UI{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=WM(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?Gn(c.readTime):Ce.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=fy(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=_d(m)?{documents:nI(l,m)}:{query:iI(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Jw(l,c.resumeToken);const g=cy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ce.min())>0){f.readTime=Ml(l,c.snapshotVersion.toTimestamp());const g=cy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const r=eO(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=fy(this.serializer),t.removeTarget=e,this.K_(t)}}class GO extends UI{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZM(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=fy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Td(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{}class YO extends KO{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,hy(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(ne.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,hy(t,r),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new fe(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function QO(i,e,t,r){return new YO(i,e,t,r)}class $O{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ht(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class XO{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{oo(this)&&(he(so,"Restarting streams for network reachability change."),await(async function(m){const g=Te(m);g.Ea.add(4),await rh(g),g.Va.set("Unknown"),g.Ea.delete(4),await am(g)})(this))}))})),this.Va=new $O(r,a)}}async function am(i){if(oo(i))for(const e of i.Ra)await e(!0)}async function rh(i){for(const e of i.Ra)await e(!1)}function om(i,e){const t=Te(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),v_(t)?__(t):Yl(t).O_()&&y_(t,e))}function Vl(i,e){const t=Te(i),r=Yl(t);t.Ia.delete(e),r.O_()&&zI(t,e),t.Ia.size===0&&(r.O_()?r.L_():oo(t)&&t.Va.set("Unknown"))}function y_(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yl(i).Z_(e)}function zI(i,e){i.da.$e(e),Yl(i).X_(e)}function __(i){i.da=new GM({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Yl(i).start(),i.Va.ua()}function v_(i){return oo(i)&&!Yl(i).x_()&&i.Ia.size>0}function oo(i){return Te(i).Ea.size===0}function jI(i){i.da=void 0}async function JO(i){i.Va.set("Online")}async function WO(i){i.Ia.forEach(((e,t)=>{y_(i,e)}))}async function ZO(i,e){jI(i),v_(i)?(i.Va.ha(e),__(i)):i.Va.set("Unknown")}async function eV(i,e,t){if(i.Va.set("Online"),e instanceof Xw&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.da.removeTarget(f))})(i,e)}catch(r){he(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dd(i,r)}else if(e instanceof td?i.da.Xe(e):e instanceof $w?i.da.st(e):i.da.tt(e),!t.isEqual(Ce.min()))try{const r=await CI(i.localStore);t.compareTo(r)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Kt.EMPTY_BYTE_STRING,_.snapshotVersion)),zI(l,m);const E=new Jr(_.target,m,g,_.sequenceNumber);y_(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(i,t)}catch(r){he(so,"Failed to raise snapshot:",r),await Dd(i,r)}}async function Dd(i,e,t){if(!aa(e))throw e;i.Ea.add(1),await rh(i),i.Va.set("Offline"),t||(t=()=>CI(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{he(so,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await am(i)}))}function BI(i,e){return e().catch((t=>Dd(i,t,e)))}async function Kl(i){const e=Te(i),t=na(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ga;for(;tV(e);)try{const a=await UO(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,nV(e,a)}catch(a){await Dd(e,a)}qI(e)&&FI(e)}function tV(i){return oo(i)&&i.Ta.length<10}function nV(i,e){i.Ta.push(e);const t=na(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function qI(i){return oo(i)&&!na(i).x_()&&i.Ta.length>0}function FI(i){na(i).start()}async function iV(i){na(i).ra()}async function rV(i){const e=na(i);for(const t of i.Ta)e.ea(t.mutations)}async function sV(i,e,t){const r=i.Ta.shift(),a=s_.from(r,e,t);await BI(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Kl(i)}async function aV(i,e){e&&na(i).Y_&&await(async function(r,a){if((function(c){return qM(c)&&c!==ne.ABORTED})(a.code)){const l=r.Ta.shift();na(r).B_(),await BI(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Kl(r)}})(i,e),qI(i)&&FI(i)}async function rS(i,e){const t=Te(i);t.asyncQueue.verifyOperationInProgress(),he(so,"RemoteStore received new credentials");const r=oo(t);t.Ea.add(3),await rh(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await am(t)}async function Ey(i,e){const t=Te(i);e?(t.Ea.delete(2),await am(t)):e||(t.Ea.add(2),await rh(t),t.Va.set("Unknown"))}function Yl(i){return i.ma||(i.ma=(function(t,r,a){const l=Te(t);return l.sa(),new HO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:JO.bind(null,i),Yo:WO.bind(null,i),t_:ZO.bind(null,i),J_:eV.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),v_(i)?__(i):i.Va.set("Unknown")):(await i.ma.stop(),jI(i))}))),i.ma}function na(i){return i.fa||(i.fa=(function(t,r,a){const l=Te(t);return l.sa(),new GO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:iV.bind(null,i),t_:aV.bind(null,i),ta:rV.bind(null,i),na:sV.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Kl(i)):(await i.fa.stop(),i.Ta.length>0&&(he(so,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,f=new E_(e,t,c,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T_(i,e){if(Ht("AsyncQueue",`${e}: ${i}`),aa(i))return new fe(ne.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=oc(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.ga=new St(pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Pl{constructor(e,t,r,a,l,c,f,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Pl(e,t,ml.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class lV{constructor(){this.queries=aS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Te(t),l=a.queries;a.queries=aS(),l.forEach(((c,f)=>{for(const m of f.ba)m.onError(r)}))})(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function aS(){return new rs((i=>Vw(i)),Zd)}async function uV(i,e){const t=Te(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new oV,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=T_(c,`Initialization of query '${al(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&b_(t)}async function cV(i,e){const t=Te(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function hV(i,e){const t=Te(i);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(a)&&(r=!0);c.wa=a}}r&&b_(t)}function fV(i,e,t){const r=Te(i),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function b_(i){i.Ca.forEach((e=>{e.next()}))}var Ty,oS;(oS=Ty||(Ty={})).Ma="default",oS.Cache="cache";class dV{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ty.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.key=e}}class GI{constructor(e){this.key=e}}class mV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ke(),this.mutatedKeys=Ke(),this.eu=kw(e),this.tu=new ml(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new sS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,E)=>{const b=a.get(_),w=eh(this.query,E)?E:null,P=!!b&&this.mutatedKeys.has(b.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;b&&w?b.data.isEqual(w.data)?P!==D&&(r.track({type:3,doc:w}),M=!0):this.su(b,w)||(r.track({type:2,doc:w}),M=!0,(m&&this.eu(w,m)>0||g&&this.eu(w,g)<0)&&(f=!0)):!b&&w?(r.track({type:0,doc:w}),M=!0):b&&!w&&(r.track({type:1,doc:b}),M=!0,(m||g)&&(f=!0)),M&&(w?(c=c.add(w),l=D?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:c,iu:r,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(w,P){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Vt:M})}};return D(w)-D(P)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),a=a??!1;const f=t&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new Pl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ke(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new GI(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new HI(r))})),t}cu(e){this.Za=e.ks,this.Ya=Ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ql="SyncEngine";class pV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gV{constructor(e){this.key=e,this.hu=!1}}class yV{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new rs((f=>Vw(f)),Zd),this.Iu=new Map,this.Eu=new Set,this.Ru=new St(pe.comparator),this.Au=new Map,this.Vu=new h_,this.du={},this.mu=new Map,this.fu=ro.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _V(i,e,t=!0){const r=lm(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await KI(r,e,t,!0),a}async function vV(i,e){const t=lm(i);await KI(t,e,!0,!1)}async function KI(i,e,t,r){const a=await Id(i.localStore,yi(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await S_(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&om(i.remoteStore,a),f}async function S_(i,e,t,r,a){i.pu=(E,b,w)=>(async function(D,M,U,G){let H=M.view.ru(U);H.Ss&&(H=await yy(D.localStore,M.query,!1).then((({documents:R})=>M.view.ru(R,H))));const re=G&&G.targetChanges.get(M.targetId),se=G&&G.targetMismatches.get(M.targetId)!=null,W=M.view.applyChanges(H,D.isPrimaryClient,re,se);return by(D,M.targetId,W.au),W.snapshot})(i,E,b,w);const l=await yy(i.localStore,e,!0),c=new mV(e,l.ks),f=c.ru(l.documents),m=ih.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),g=c.applyChanges(f,i.isPrimaryClient,m);by(i,t,g.au);const _=new pV(e,t,c);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function EV(i,e,t){const r=Te(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!Zd(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ol(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Vl(r.remoteStore,a.targetId),kl(r,a.targetId)})).catch(sa)):(kl(r,a.targetId),await Ol(r.localStore,a.targetId,!0))}async function TV(i,e){const t=Te(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vl(t.remoteStore,r.targetId))}async function bV(i,e,t){const r=R_(i);try{const a=await(function(c,f){const m=Te(c),g=mt.now(),_=f.reduce(((w,P)=>w.add(P.key)),Ke());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let P=gi(),D=Ke();return m.xs.getEntries(w,_).next((M=>{P=M,P.forEach(((U,G)=>{G.isValidDocument()||(D=D.add(U))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,P))).next((M=>{E=M;const U=[];for(const G of f){const H=jM(G,E.get(G.key).overlayedDocument);H!=null&&U.push(new ss(G.key,H,Aw(H.value.mapValue),vn.exists(!0)))}return m.mutationQueue.addMutationBatch(w,g,U,f)})).next((M=>{b=M;const U=M.applyToLocalDocumentSet(E,D);return m.documentOverlayCache.saveOverlays(w,M.batchId,U)}))})).then((()=>({batchId:b.batchId,changes:Uw(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let g=c.du[c.currentUser.toKey()];g||(g=new St(Le)),g=g.insert(f,m),c.du[c.currentUser.toKey()]=g})(r,a.batchId,t),await la(r,a.changes),await Kl(r.remoteStore)}catch(a){const l=T_(a,"Failed to persist write");t.reject(l)}}async function YI(i,e){const t=Te(i);try{const r=await kO(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Ae(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ae(c.hu,14607):a.removedDocuments.size>0&&(Ae(c.hu,42227),c.hu=!1))})),await la(t,r,e)}catch(r){await sa(r)}}function lS(i,e,t){const r=Te(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=Te(c);m.onlineState=f;let g=!1;m.queries.forEach(((_,E)=>{for(const b of E.ba)b.va(f)&&(g=!0)})),g&&b_(m)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SV(i,e,t){const r=Te(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new St(pe.comparator);c=c.insert(l,Lt.newNoDocument(l,Ce.min()));const f=Ke().add(l),m=new nh(Ce.min(),new Map,new St(Le),c,f);await YI(r,m),r.Ru=r.Ru.remove(l),r.Au.delete(e),I_(r)}else await Ol(r.localStore,e,!1).then((()=>kl(r,e,t))).catch(sa)}async function AV(i,e){const t=Te(i),r=e.batch.batchId;try{const a=await PO(t.localStore,e);w_(t,r,null),A_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await la(t,a)}catch(a){await sa(a)}}async function wV(i,e,t){const r=Te(i);try{const a=await(function(c,f){const m=Te(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,f).next((E=>(Ae(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(r.localStore,e);w_(r,e,t),A_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await la(r,a)}catch(a){await sa(a)}}function A_(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function w_(i,e,t){const r=Te(i);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function kl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||QI(i,r)}))}function QI(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(Vl(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),I_(i))}function by(i,e,t){for(const r of t)r instanceof HI?(i.Vu.addReference(r.key,e),IV(i,r)):r instanceof GI?(he(Ql,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||QI(i,r.key)):ve(19791,{wu:r})}function IV(i,e){const t=e.key,r=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(r)||(he(Ql,"New document in limbo: "+t),i.Eu.add(r),I_(i))}function I_(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new pe(lt.fromString(e)),r=i.fu.next();i.Au.set(r,new gV(t)),i.Ru=i.Ru.insert(t,r),om(i.remoteStore,new Jr(yi(Wd(t.path)),r,"TargetPurposeLimboResolution",ti.ce))}}async function la(i,e,t){const r=Te(i),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,m)=>{c.push(r.pu(m,e,t).then((g=>{var _;if((g||t)&&r.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){a.push(g);const E=m_.Es(m.targetId,g);l.push(E)}})))})),await Promise.all(c),r.Pu.J_(a),await(async function(m,g){const _=Te(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>F.forEach(g,(b=>F.forEach(b.Ts,(w=>_.persistence.referenceDelegate.addReference(E,b.targetId,w))).next((()=>F.forEach(b.Is,(w=>_.persistence.referenceDelegate.removeReference(E,b.targetId,w)))))))))}catch(E){if(!aa(E))throw E;he(p_,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const w=_.vs.get(b),P=w.snapshotVersion,D=w.withLastLimboFreeSnapshotVersion(P);_.vs=_.vs.insert(b,D)}}})(r.localStore,l))}async function RV(i,e){const t=Te(i);if(!t.currentUser.isEqual(e)){he(Ql,"User change. New user:",e.toKey());const r=await RI(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new fe(ne.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await la(t,r.Ns)}}function CV(i,e){const t=Te(i),r=t.Au.get(e);if(r&&r.hu)return Ke().add(r.key);{let a=Ke();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}async function DV(i,e){const t=Te(i),r=await yy(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&by(t,e.targetId,a.au),a}async function xV(i,e){const t=Te(i);return xI(t.localStore,e).then((r=>la(t,r)))}async function NV(i,e,t,r){const a=Te(i),l=await(function(f,m){const g=Te(f),_=Te(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(E=>_.Xn(E,m).next((b=>b?g.localDocuments.getDocuments(E,b):F.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Kl(a.remoteStore):t==="acknowledged"||t==="rejected"?(w_(a,e,r||null),A_(a,e),(function(f,m){Te(Te(f).mutationQueue).nr(m)})(a.localStore,e)):ve(6720,"Unknown batchState",{bu:t}),await la(a,l)):he(Ql,"Cannot apply mutation batch with id: "+e)}async function MV(i,e){const t=Te(i);if(lm(t),R_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await uS(t,r.toArray());t.gu=!0,await Ey(t.remoteStore,!0);for(const l of a)om(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then((()=>(kl(t,c),Ol(t.localStore,c,!0)))),Vl(t.remoteStore,c)})),await a,await uS(t,r),(function(c){const f=Te(c);f.Au.forEach(((m,g)=>{Vl(f.remoteStore,g)})),f.Vu.zr(),f.Au=new Map,f.Ru=new St(pe.comparator)})(t),t.gu=!1,await Ey(t.remoteStore,!1)}}async function uS(i,e,t){const r=Te(i),a=[],l=[];for(const c of e){let f;const m=r.Iu.get(c);if(m&&m.length!==0){f=await Id(r.localStore,yi(m[0]));for(const g of m){const _=r.Tu.get(g),E=await DV(r,_);E.snapshot&&l.push(E.snapshot)}}else{const g=await DI(r.localStore,c);f=await Id(r.localStore,g),await S_(r,$I(g),c,!1,f.resumeToken)}a.push(f)}return r.Pu.J_(l),a}function $I(i){return Mw(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function OV(i){return(function(t){return Te(Te(t).persistence).hs()})(Te(i).localStore)}async function VV(i,e,t,r){const a=Te(i);if(a.gu)return void he(Ql,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await xI(a.localStore,Pw(l[0])),f=nh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Kt.EMPTY_BYTE_STRING);await la(a,c,f);break}case"rejected":await Ol(a.localStore,e,!0),kl(a,e,r);break;default:ve(64155,t)}}async function PV(i,e,t){const r=lm(i);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){he(Ql,"Adding an already active target "+a);continue}const l=await DI(r.localStore,a),c=await Id(r.localStore,l);await S_(r,$I(l),c.targetId,!1,c.resumeToken),om(r.remoteStore,c)}for(const a of t)r.Iu.has(a)&&await Ol(r.localStore,a,!1).then((()=>{Vl(r.remoteStore,a),kl(r,a)})).catch(sa)}}function lm(i){const e=Te(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=YI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SV.bind(null,e),e.Pu.J_=hV.bind(null,e.eventManager),e.Pu.yu=fV.bind(null,e.eventManager),e}function R_(i){const e=Te(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wV.bind(null,e),e}class qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return II(this.persistence,new wI,e.initialUser,this.serializer)}Cu(e){return new f_(rm.Vi,this.serializer)}Du(e){return new PI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qc.provider={build:()=>new qc};class kV extends qc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof wd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vI(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new f_((r=>wd.Vi(r,t)),this.serializer)}}class XI extends qc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await R_(this.xu.syncEngine),await Kl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return II(this.persistence,new wI,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new vI(r,e.asyncQueue,t)}Mu(e,t){const r=new z2(t,this.persistence);return new U2(e.asyncQueue,r)}Cu(e){const t=AI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new d_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kI(),id(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new PI}}class LV extends XI{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Ng&&(this.sharedClientState.syncEngine={So:NV.bind(null,t),Do:VV.bind(null,t),Co:PV.bind(null,t),hs:OV.bind(null,t),bo:xV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await MV(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=kI();if(!Ng.v(t))throw new fe(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=AI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ng(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RV.bind(null,this.syncEngine),await Ey(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new lV})()}createDatastore(e){const t=sm(e.databaseInfo.databaseId),r=FO(e.databaseInfo);return QO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,f){return new XO(r,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>lS(this.syncEngine,t,0)),(function(){return nS.v()?new nS:new zO})())}createSyncEngine(e,t){return(function(a,l,c,f,m,g,_){const E=new yV(a,l,c,f,m,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Te(a);he(so,"RemoteStore shutting down."),l.Ea.add(5),await rh(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Fc.provider={build:()=>new Fc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="FirestoreClient";class zV{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=kn.UNAUTHENTICATED,this.clientId=Gy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{he(ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(he(ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=T_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Og(i,e){i.asyncQueue.verifyOperationInProgress(),he(ia,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await RI(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function cS(i,e){i.asyncQueue.verifyOperationInProgress();const t=await jV(i);he(ia,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>rS(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>rS(e.remoteStore,a))),i._onlineComponents=e}async function jV(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){he(ia,"Using user provided OfflineComponentProvider");try{await Og(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ne.FAILED_PRECONDITION||a.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;vl("Error using user provided cache. Falling back to memory cache: "+t),await Og(i,new qc)}}else he(ia,"Using default OfflineComponentProvider"),await Og(i,new kV(void 0));return i._offlineComponents}async function JI(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(he(ia,"Using user provided OnlineComponentProvider"),await cS(i,i._uninitializedComponentsProvider._online)):(he(ia,"Using default OnlineComponentProvider"),await cS(i,new Fc))),i._onlineComponents}function BV(i){return JI(i).then((e=>e.syncEngine))}async function hS(i){const e=await JI(i),t=e.eventManager;return t.onListen=_V.bind(null,e.syncEngine),t.onUnlisten=EV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TV.bind(null,e.syncEngine),t}function qV(i,e,t,r){const a=new UV(r),l=new dV(e,a,t);return i.asyncQueue.enqueueAndForget((async()=>uV(await hS(i),l))),()=>{a.Nu(),i.asyncQueue.enqueueAndForget((async()=>cV(await hS(i),l)))}}function FV(i,e){const t=new Js;return i.asyncQueue.enqueueAndForget((async()=>bV(await BV(i),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV="ComponentProvider",fS=new Map;function GV(i,e,t,r,a){return new dM(i,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,WI(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV="firestore.googleapis.com",dS=!0;class mS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KV,this.ssl=dS}else this.host=e.host,this.ssl=e.ssl??dS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_I)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class C_{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new I2;switch(r.type){case"firstParty":return new D2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=fS.get(t);r&&(he(HV,"Removing Datastore"),fS.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lo(this.firestore,e,this._query)}}class Gt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Jc(t,Gt._jsonSchema))return new Gt(e,r||null,new pe(lt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:rn("string",Gt._jsonSchemaVersion),referencePath:rn("string")};class Zs extends lo{constructor(e,t,r){super(e,t,Wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new pe(e))}withConverter(e){return new Zs(this.firestore,e,this._path)}}function ZI(i,e,...t){if(i=sn(i),JA("collection","path",e),i instanceof C_){const r=lt.fromString(e,...t);return i0(r),new Zs(i,null,r)}{if(!(i instanceof Gt||i instanceof Zs))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(lt.fromString(e,...t));return i0(r),new Zs(i.firestore,null,r)}}function un(i,e,...t){if(i=sn(i),arguments.length===1&&(e=Gy.newId()),JA("doc","path",e),i instanceof C_){const r=lt.fromString(e,...t);return n0(r),new Gt(i,null,new pe(r))}{if(!(i instanceof Gt||i instanceof Zs))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(lt.fromString(e,...t));return n0(r),new Gt(i.firestore,i instanceof Zs?i.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="AsyncQueue";class gS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LI(this,"async_queue_retry"),this._c=()=>{const r=id();r&&he(pS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=id();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=id();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Js;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;he(pS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ht("INTERNAL UNHANDLED ERROR: ",yS(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=E_.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ve(47125,{Pc:yS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function yS(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ao extends C_{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new gS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gS(e),this._firestoreClient=void 0,await e}}}function YV(i,e,t){t||(t=yd);const r=Oy(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Xa(l,e))return a;throw new fe(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new fe(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_I)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&jl(e.host)&&iA(e.host),r.initialize({options:e,instanceIdentifier:t})}function D_(i){if(i._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||QV(i),i._firestoreClient}function QV(i){var r,a,l,c;const e=i._freezeSettings(),t=GV(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,(a=i._app)==null?void 0:a.options.apiKey,e);i._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new zV(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pi(Kt.fromBase64String(e))}catch(t){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pi(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jc(e,Pi._jsonSchema))return Pi.fromBase64String(e.bytes)}}Pi._jsonSchemaVersion="firestore/bytes/1.0",Pi._jsonSchema={type:rn("string",Pi._jsonSchemaVersion),bytes:rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(Jc(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:rn("string",wr._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jc(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $i(e.vectorValues);throw new fe(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:rn("string",$i._jsonSchemaVersion),vectorValues:rn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=/^__.*__$/;class XV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gl(e,this.data,t,this.fieldTransforms)}}class e1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function t1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{dataSource:i})}}class N_{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new N_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return xd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(t1(this.dataSource)&&$V.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class JV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sm(e)}createContext(e,t,r,a=!1){return new N_({dataSource:e,methodName:t,targetDoc:r,path:Vt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cm(i){const e=i._freezeSettings(),t=sm(i._databaseId);return new JV(i._databaseId,!!e.ignoreUndefinedProperties,t)}function n1(i,e,t,r,a,l={}){const c=i.createContext(l.merge||l.mergeFields?2:0,e,t,a);M_("Data must be an object, but it was:",c,r);const f=s1(r,c);let m,g;if(l.merge)m=new ni(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const b=Ll(e,E,t);if(!c.contains(b))throw new fe(ne.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);l1(_,b)||_.push(b)}m=new ni(_),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new XV(new Un(f),m,g)}class hm extends x_{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hm}}function i1(i,e,t,r){const a=i.createContext(1,e,t);M_("Data must be an object, but it was:",a,r);const l=[],c=Un.empty();oa(r,((m,g)=>{const _=o1(e,m,t);g=sn(g);const E=a.childContextForFieldPath(_);if(g instanceof hm)l.push(_);else{const b=sh(g,E);b!=null&&(l.push(_),c.set(_,b))}}));const f=new ni(l);return new e1(c,f,a.fieldTransforms)}function r1(i,e,t,r,a,l){const c=i.createContext(1,e,t),f=[Ll(e,r,t)],m=[a];if(l.length%2!=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(Ll(e,l[b])),m.push(l[b+1]);const g=[],_=Un.empty();for(let b=f.length-1;b>=0;--b)if(!l1(g,f[b])){const w=f[b];let P=m[b];P=sn(P);const D=c.childContextForFieldPath(w);if(P instanceof hm)g.push(w);else{const M=sh(P,D);M!=null&&(g.push(w),_.set(w,M))}}const E=new ni(g);return new e1(_,E,c.fieldTransforms)}function WV(i,e,t,r=!1){return sh(t,i.createContext(r?4:3,e))}function sh(i,e){if(a1(i=sn(i)))return M_("Unsupported field value:",e,i),s1(i,e);if(i instanceof x_)return(function(r,a){if(!t1(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const f of r){let m=sh(f,a.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OM(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=mt.fromDate(r);return{timestampValue:Ml(a.serializer,l)}}if(r instanceof mt){const l=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ml(a.serializer,l)}}if(r instanceof wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pi)return{bytesValue:Jw(a.serializer,r._byteString)};if(r instanceof Gt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:l_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof $i)return(function(c,f){const m=c instanceof $i?c.toArray():c;return{mapValue:{fields:{[Zy]:{stringValue:e_},[Il]:{arrayValue:{values:m.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return i_(f.serializer,_)}))}}}}}})(r,a);if(lI(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Hd(r)}`)})(i,e)}function s1(i,e){const t={};return pw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(i,((r,a)=>{const l=sh(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function a1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof mt||i instanceof wr||i instanceof Pi||i instanceof Gt||i instanceof x_||i instanceof $i||lI(i))}function M_(i,e,t){if(!a1(t)||!WA(t)){const r=Hd(t);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function Ll(i,e,t){if((e=sn(e))instanceof um)return e._internalPath;if(typeof e=="string")return o1(i,e);throw xd("Field path arguments must be of type string or ",i,!1,void 0,t)}const ZV=new RegExp("[~\\*/\\[\\]]");function o1(i,e,t){if(e.search(ZV)>=0)throw xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new um(...e.split("."))._internalPath}catch{throw xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function xd(i,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new fe(ne.INVALID_ARGUMENT,f+i+m)}function l1(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{convertValue(e,t="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return oa(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,a,l;const t=(l=(a=(r=e.fields)==null?void 0:r[Il].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Mt(c.doubleValue)));return new $i(t)}convertGeoPoint(e){return new wr(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const t=ts(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);Ae(oI(r),9688,{name:e});const a=new eo(r.get(1),r.get(3)),l=new pe(r.popFirst(5));return a.isEqual(t)||Ht(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1 extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}const _S="@firebase/firestore",vS="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(i,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ll("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tP extends c1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O_{}class h1 extends O_{}function f1(i,e,...t){let r=[];e instanceof O_&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof P_)).length,f=l.filter((m=>m instanceof V_)).length;if(c>1||c>0&&f>0)throw new fe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)i=a._apply(i);return i}class V_ extends h1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new V_(e,t,r)}_apply(e){const t=this._parse(e);return m1(e._query,t),new lo(e.firestore,e.converter,ly(e._query,t))}_parse(e){const t=cm(e.firestore);return(function(l,c,f,m,g,_,E){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){bS(E,_);const P=[];for(const D of E)P.push(TS(m,l,D));b={arrayValue:{values:P}}}else b=TS(m,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||bS(E,_),b=WV(f,c,E,_==="in"||_==="not-in");return Ze.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class P_ extends O_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new P_(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:pt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)m1(c,m),c=ly(c,m)})(e._query,t),new lo(e.firestore,e.converter,ly(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class k_ extends h1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new k_(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(l,c)})(e._query,this._field,this._direction);return new lo(e.firestore,e.converter,RM(e._query,t))}}function d1(i,e="asc"){const t=e,r=Ll("orderBy",i);return k_._create(r,t)}function TS(i,e,t){if(typeof(t=sn(t))=="string"){if(t==="")throw new fe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ow(e)&&t.indexOf("/")!==-1)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(lt.fromString(t));if(!pe.isDocumentKey(r))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lc(i,new pe(r))}if(t instanceof Gt)return Lc(i,t._key);throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(t)}.`)}function bS(i,e){if(!Array.isArray(i)||i.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m1(i,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function p1(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class iP{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=oP(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function rP(i){return new iP(i)}class sP{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fc.provider,this._offlineComponentProvider={build:t=>new XI(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class aP{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fc.provider,this._offlineComponentProvider={build:t=>new LV(t,e==null?void 0:e.cacheSizeBytes)}}}function oP(i){return new sP(i==null?void 0:i.forceOwnership)}function lP(){return new aP}class cc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qa extends c1{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ll("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qa._jsonSchema={type:rn("string",Qa._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};class rd extends Qa{data(e={}){return super.data(e)}}class pl{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new cc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new rd(this._firestore,this._userDataWriter,r.key,r,new cc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new rd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new cc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new rd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new cc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:uP(f.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pl._jsonSchemaVersion="firestore/querySnapshot/1.0",pl._jsonSchema={type:rn("string",pl._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cm(e)}set(e,t,r){this._verifyNotCommitted();const a=Vg(e,this._firestore),l=p1(a.converter,t,r),c=n1(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,vn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=Vg(e,this._firestore);let c;return c=typeof(t=sn(t))=="string"||t instanceof um?r1(this._dataReader,"WriteBatch.update",l._key,t,r,a):i1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vg(e,this._firestore);return this._mutations=this._mutations.concat(new th(t._key,vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vg(i,e){if((i=sn(i)).firestore!==e)throw new fe(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function Sy(i,e,t){i=Wr(i,Gt);const r=Wr(i.firestore,ao),a=p1(i.converter,e,t),l=cm(r);return fm(r,[n1(l,"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,vn.none())])}function Oi(i,e,t,...r){i=Wr(i,Gt);const a=Wr(i.firestore,ao),l=cm(a);let c;return c=typeof(e=sn(e))=="string"||e instanceof um?r1(l,"updateDoc",i._key,e,t,r):i1(l,"updateDoc",i._key,e),fm(a,[c.toMutation(i._key,vn.exists(!0))])}function g1(i){return fm(Wr(i.firestore,ao),[new th(i._key,vn.none())])}function y1(i,...e){var g,_,E;i=sn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||ES(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(ES(e[r])){const b=e[r];e[r]=(g=b.next)==null?void 0:g.bind(b),e[r+1]=(_=b.error)==null?void 0:_.bind(b),e[r+2]=(E=b.complete)==null?void 0:E.bind(b)}let l,c,f;if(i instanceof Gt)c=Wr(i.firestore,ao),f=Wd(i._key.path),l={next:b=>{e[r]&&e[r](hP(c,i,b))},error:e[r+1],complete:e[r+2]};else{const b=Wr(i,lo);c=Wr(b.firestore,ao),f=b._query;const w=new u1(c);l={next:P=>{e[r]&&e[r](new pl(c,w,b,P))},error:e[r+1],complete:e[r+2]},nP(i._query)}const m=D_(c);return qV(m,f,a,l)}function fm(i,e){const t=D_(i);return FV(t,e)}function hP(i,e,t){const r=t.docs.get(e._key),a=new u1(i);return new Qa(i,a,e._key,r,new cc(t.hasPendingWrites,t.fromCache),e.converter)}function _1(i){return i=Wr(i,ao),D_(i),new cP(i,(e=>fm(i,e)))}(function(e,t=!0){A2(Bl),yl(new Ja("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),f=new ao(new R2(r.getProvider("auth-internal")),new x2(c,r.getProvider("app-check-internal")),mM(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),$s(_S,vS,e),$s(_S,vS,"esm2020")})();const Ay={apiKey:"AIzaSyCMQRCfBaVdJWgqMkaWrBHgHlMX51K7tbM",authDomain:"entrypoint-v2.firebaseapp.com",projectId:"entrypoint-v2",storageBucket:"entrypoint-v2.firebasestorage.app",messagingSenderId:"240107297798",appId:"1:240107297798:web:9e4a6c13a2751aead9b787"},Ul=!!Ay.apiKey&&!!Ay.projectId;let hc=null,Nt=null;if(Ul){const i=cA(Ay);hc=b2(i),Nt=YV(i,{localCache:rP({tabManager:lP()})})}const v1=x.createContext(null);function fP({children:i}){const[e,t]=x.useState(null),[r,a]=x.useState(Ul);x.useEffect(()=>!Ul||!hc?void 0:cN(hc,m=>{t(m),a(!1)}),[]);const l=()=>NN(hc,new Qr),c=()=>hN(hc);return I.jsx(v1.Provider,{value:{user:e,loading:r,signinGoogle:l,logout:c},children:i})}function L_(){return x.useContext(v1)}function dP(){const{signinGoogle:i}=L_(),[e,t]=x.useState(""),[r,a]=x.useState(!1),l=async()=>{t(""),a(!0);try{await i()}catch(c){t(c.message.replace("Firebase: ",""))}finally{a(!1)}};return I.jsxs("div",{className:"auth-container",children:[I.jsxs("div",{className:"auth-header",children:[I.jsx("div",{className:"auth-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"auth-title",children:"Lock-In"})]}),I.jsx("button",{className:"auth-google-btn",onClick:l,disabled:r,children:r?"...":"Sign in with Google"}),e&&I.jsx("div",{className:"auth-error",children:e})]})}function mP({children:i}){const{user:e,loading:t}=L_();return t?I.jsx("div",{className:"loading",children:"loading..."}):e?i:I.jsx(dP,{})}const $a={prayer:{bg:"rgba(34, 139, 34, 0.12)",border:"#22a845",text:"#22a845"},spiritual:{bg:"rgba(234, 179, 8, 0.10)",border:"#ca8a04",text:"#ca8a04"},course:{bg:"rgba(37, 99, 235, 0.10)",border:"#2563eb",text:"#2563eb"},study:{bg:"rgba(8, 145, 178, 0.10)",border:"#0891b2",text:"#0891b2"},work:{bg:"rgba(180, 83, 9, 0.10)",border:"#b45309",text:"#b45309"},project:{bg:"rgba(124, 58, 237, 0.10)",border:"#7c3aed",text:"#7c3aed"},sport:{bg:"rgba(220, 38, 38, 0.10)",border:"#dc2626",text:"#dc2626"},therapy:{bg:"rgba(219, 39, 119, 0.10)",border:"#db2777",text:"#db2777"},rest:{bg:"rgba(100, 116, 139, 0.08)",border:"#64748b",text:"#64748b"},neutral:{bg:"rgba(163, 163, 163, 0.06)",border:"#a3a3a3",text:"#a3a3a3"}},E1=Object.keys($a),pP=E1,gP=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function yP(i){const e=Math.floor(i/60)%24,t=Math.round(i%60),r=e>=12?"PM":"AM";return`${e%12||12}:${String(t).padStart(2,"0")} ${r}`}const zl=["#2d8a4e","#0055a4","#7c3aed","#b45309","#dc2626","#db2777","#0891b2","#64748b"],T1=()=>{const i={};return gP.forEach(e=>{i[e]={blocks:[]}}),i},U_=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function z_(i){const[e,t,r]=i.split("-").map(Number);return new Date(e,t-1,r)}function j_(i){const e=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0"),r=String(i.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function Ac(){return j_(new Date)}function SS(i){const e=(i.getDay()+6)%7;return U_[e]}function b1(i,e,t){return i>=e&&i<=t}function Nd(i){return z_(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function _P(i,e){return`${Nd(i)}  ${Nd(e)}`}function vP(i){const[e,t,r]=i.split("-");return`${r}-${t}-${e}`}function EP(i,e){const t=z_(i),r=(t.getDay()+6)%7,l=U_.indexOf(e)-r,c=new Date(t);return c.setDate(c.getDate()+l),j_(c)}function TP(i,e){const t=[],r=new Date(i,e,1);for(;r.getMonth()===e;)t.push({iso:j_(r),date:new Date(r)}),r.setDate(r.getDate()+1);return t}const bP=new Date().getFullYear(),SP={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};function AS(i){const e=i.trim().match(/^(\w{3})\s+(\d{1,2})$/);if(!e)return null;const t=SP[e[1]],r=parseInt(e[2],10);if(t==null||isNaN(r))return null;const a=new Date(bP,t,r),l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),f=String(a.getDate()).padStart(2,"0");return`${l}-${c}-${f}`}function AP(i){if(!i)return{startDate:"",endDate:""};const e=i.split(/\u2192|->||/).map(a=>a.trim()),t=AS(e[0]),r=e[1]?AS(e[1]):t;return{startDate:t||"",endDate:r||""}}function wP(i){return{id:i.id||crypto.randomUUID(),activity:i.activity||"",type:i.type||"neutral",icon:i.icon||"",duration:i.duration||60,segment:null,offsetMinutes:0,time:i.time||"08:00",tasks:[]}}function IP(i,e){var c;const{startDate:t,endDate:r}=AP(i.dates),a={},l=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const f of l){const m=(c=i.days)==null?void 0:c[f];a[f]={blocks:((m==null?void 0:m.blocks)||[]).map(wP)}}return{id:i.id||crypto.randomUUID(),label:i.label||`Plan ${e+1}`,color:zl[e%zl.length],startDate:t,endDate:r,order:i.order??e,routine:a}}function RP(){const e=localStorage.getItem("entrypoint-v2-tabs");if(!e)return null;try{const t=JSON.parse(e);return!Array.isArray(t)||t.length===0?null:t.map(IP)}catch{return null}}function CP(){const i=!!localStorage.getItem("entrypoint-v2-tabs"),e=!!localStorage.getItem("entrypoint-v2-plans");return i&&!e}const Md="entrypoint-v2-plans",DP="entrypoint-v2-tabs";function wS(){if(CP()){const i=RP();if(i)return S1(i),i}try{const i=localStorage.getItem(Md);if(i){const e=JSON.parse(i);if(Array.isArray(e)&&e.length>0)return e}}catch{}return[]}function S1(i){localStorage.setItem(Md,JSON.stringify(i))}async function xP(i){const e=`entrypoint-v2-migrated-${i}`;if(localStorage.getItem(e))return;let t=null;try{const r=localStorage.getItem(Md);if(r){const a=JSON.parse(r);Array.isArray(a)&&a.length>0&&(t=a)}}catch{}if(t&&t.length>0){const r=_1(Nt);for(const a of t)r.set(un(Nt,"users",i,"plans",a.id),{...a});await r.commit()}localStorage.setItem(e,"1"),localStorage.removeItem(Md),localStorage.removeItem(DP)}function NP(){const[i,e]=x.useState(()=>wS()),[t,r]=x.useState(()=>{var b;return((b=wS()[0])==null?void 0:b.id)||null}),a=i.find(b=>b.id===t)||i[0]||null;a&&t!==a.id&&r(a.id);const l=x.useCallback(b=>{e(w=>{const P=typeof b=="function"?b(w):b;return S1(P),P})},[]),c=x.useCallback(b=>{const w=crypto.randomUUID(),P={id:w,label:b.label||"New Plan",color:b.color||zl[0],startDate:b.startDate||"",endDate:b.endDate||"",order:b.order??i.length,routine:b.routine||T1()};return l(D=>[...D,P]),r(w),w},[l,i.length]),f=x.useCallback((b,w)=>{l(P=>P.map(D=>D.id===b?{...D,...w}:D))},[l]),m=x.useCallback(b=>{l(w=>w.filter(P=>P.id!==b)),t===b&&r(null)},[t,l]),g=x.useCallback((b,w,P)=>{const D=b||(a==null?void 0:a.id);D&&l(M=>M.map(U=>U.id===D?{...U,routine:{...U.routine,[w]:{...U.routine[w],blocks:P}}}:U))},[a,l]),_=x.useCallback(b=>i.find(w=>w.startDate&&w.endDate&&b1(b,w.startDate,w.endDate))||null,[i]),E=x.useCallback(b=>{const w=new Set(i.map(D=>D.id)),P=b.filter(D=>!w.has(D.id));P.length!==0&&l(D=>[...D,...P.map((M,U)=>({...M,order:D.length+U}))])},[i,l]);return{plans:i,loading:!1,activePlan:a,activePlanId:t,setActivePlanId:r,createPlan:c,updatePlan:f,deletePlan:m,updateRoutineBlocks:g,getPlanForDate:_,mergePlans:E}}function MP(i){const[e,t]=x.useState([]),[r,a]=x.useState(!0),[l,c]=x.useState(null),f=e.find(P=>P.id===l)||e[0]||null;f&&l!==f.id&&c(f.id),x.useEffect(()=>{if(!i){a(!1);return}xP(i).catch(()=>{});const P=f1(ZI(Nt,"users",i,"plans"),d1("order"));return y1(P,M=>{t(M.docs.map(U=>({id:U.id,...U.data()}))),a(!1)},()=>a(!1))},[i]),x.useEffect(()=>{e.length>0&&!l&&c(e[0].id)},[e,l]);const m=x.useCallback(async P=>{const D=crypto.randomUUID(),M={id:D,label:P.label||"New Plan",color:P.color||zl[0],startDate:P.startDate||"",endDate:P.endDate||"",order:P.order??e.length,routine:P.routine||T1()};return await Sy(un(Nt,"users",i,"plans",D),M),c(D),D},[i,e.length]),g=x.useCallback(async(P,D)=>{await Oi(un(Nt,"users",i,"plans",P),D)},[i]),_=x.useCallback(async P=>{await g1(un(Nt,"users",i,"plans",P)),l===P&&c(null)},[i,l]),E=x.useCallback(async(P,D,M)=>{const U=P||(f==null?void 0:f.id);U&&await Oi(un(Nt,"users",i,"plans",U),{[`routine.${D}.blocks`]:M})},[i,f]),b=x.useCallback(P=>e.find(D=>D.startDate&&D.endDate&&P>=D.startDate&&P<=D.endDate)||null,[e]),w=x.useCallback(async P=>{const D=new Set(e.map(G=>G.id)),M=P.filter(G=>!D.has(G.id));if(M.length===0)return;const U=_1(Nt);M.forEach((G,H)=>{const re={...G,order:e.length+H};U.set(un(Nt,"users",i,"plans",re.id),re)}),await U.commit()},[i,e]);return{plans:e,loading:r,activePlan:f,activePlanId:l,setActivePlanId:c,createPlan:m,updatePlan:g,deletePlan:_,updateRoutineBlocks:E,getPlanForDate:b,mergePlans:w}}function OP(i){return Ul&&i?MP(i):NP()}const A1="entrypoint-v2-pipelines";function VP(){try{const i=localStorage.getItem(A1);if(i){const e=JSON.parse(i);if(Array.isArray(e))return e}}catch{}return[]}function PP(i){localStorage.setItem(A1,JSON.stringify(i))}function kP(){const[i,e]=x.useState(()=>VP()),t=x.useCallback(P=>{e(D=>{const M=typeof P=="function"?P(D):P;return PP(M),M})},[]),r=x.useCallback(P=>{const D=crypto.randomUUID(),M={id:D,title:P||"New Section",order:i.length,collapsed:!1,items:[]};return t(U=>[...U,M]),D},[t,i.length]),a=x.useCallback((P,D)=>{t(M=>M.map(U=>U.id===P?{...U,...D}:U))},[t]),l=x.useCallback(P=>{t(D=>D.filter(M=>M.id!==P))},[t]),c=x.useCallback(P=>{t(P.map((D,M)=>({...D,order:M})))},[t]),f=x.useCallback(P=>{t(D=>D.map(M=>M.id===P?{...M,collapsed:!M.collapsed}:M))},[t]),m=x.useCallback((P,D)=>{const M={id:crypto.randomUUID(),icon:"",title:"",description:"",...D};t(U=>U.map(G=>G.id===P?{...G,items:[...G.items||[],M]}:G))},[t]),g=x.useCallback((P,D,M)=>{t(U=>U.map(G=>G.id===P?{...G,items:(G.items||[]).map(H=>H.id===D?{...H,...M}:H)}:G))},[t]),_=x.useCallback((P,D)=>{t(M=>M.map(U=>U.id===P?{...U,items:(U.items||[]).filter(G=>G.id!==D)}:U))},[t]),E=x.useCallback((P,D,M,U)=>{t(G=>{const H=G.find(se=>se.id===P);if(!H)return G;const re=(H.items||[]).find(se=>se.id===M);return re?G.map(se=>{if(se.id===P&&P===D){const W=(se.items||[]).filter(R=>R.id!==M);return W.splice(U,0,re),{...se,items:W}}if(se.id===P)return{...se,items:(se.items||[]).filter(W=>W.id!==M)};if(se.id===D){const W=[...se.items||[]];return W.splice(U,0,re),{...se,items:W}}return se}):G})},[t]),b=x.useCallback((P,D)=>{t(M=>M.map(U=>U.id===P?{...U,items:D}:U))},[t]),w=x.useCallback(P=>{const D=new Set(i.map(U=>U.id)),M=P.filter(U=>!D.has(U.id));M.length!==0&&t(U=>[...U,...M.map((G,H)=>({...G,order:U.length+H}))])},[i,t]);return{sections:i,loading:!1,addSection:r,updateSection:a,deleteSection:l,reorderSections:c,toggleCollapse:f,addItem:m,updateItem:g,deleteItem:_,moveItem:E,reorderItems:b,mergeSections:w}}function LP(i){const[e,t]=x.useState([]),[r,a]=x.useState(!0);x.useEffect(()=>{if(!i){a(!1);return}const M=f1(ZI(Nt,"users",i,"pipelines"),d1("order"));return y1(M,G=>{t(G.docs.map(H=>({id:H.id,...H.data()}))),a(!1)},()=>a(!1))},[i]);const l=x.useCallback(async M=>{const U=crypto.randomUUID(),G={id:U,title:M||"New Section",order:e.length,collapsed:!1,items:[]};return await Sy(un(Nt,"users",i,"pipelines",U),G),U},[i,e.length]),c=x.useCallback(async(M,U)=>{await Oi(un(Nt,"users",i,"pipelines",M),U)},[i]),f=x.useCallback(async M=>{await g1(un(Nt,"users",i,"pipelines",M))},[i]),m=x.useCallback(async M=>{for(let U=0;U<M.length;U++)await Oi(un(Nt,"users",i,"pipelines",M[U].id),{order:U})},[i]),g=x.useCallback(async M=>{const U=e.find(G=>G.id===M);U&&await Oi(un(Nt,"users",i,"pipelines",M),{collapsed:!U.collapsed})},[i,e]),_=x.useCallback(async(M,U)=>{const G=e.find(re=>re.id===M);if(!G)return;const H={id:crypto.randomUUID(),icon:"",title:"",description:"",...U};await Oi(un(Nt,"users",i,"pipelines",M),{items:[...G.items||[],H]})},[i,e]),E=x.useCallback(async(M,U,G)=>{const H=e.find(re=>re.id===M);H&&await Oi(un(Nt,"users",i,"pipelines",M),{items:(H.items||[]).map(re=>re.id===U?{...re,...G}:re)})},[i,e]),b=x.useCallback(async(M,U)=>{const G=e.find(H=>H.id===M);G&&await Oi(un(Nt,"users",i,"pipelines",M),{items:(G.items||[]).filter(H=>H.id!==U)})},[i,e]),w=x.useCallback(async(M,U,G,H)=>{const re=e.find(W=>W.id===M);if(!re)return;const se=(re.items||[]).find(W=>W.id===G);if(se)if(M===U){const W=(re.items||[]).filter(R=>R.id!==G);W.splice(H,0,se),await Oi(un(Nt,"users",i,"pipelines",M),{items:W})}else{const W=e.find(N=>N.id===U);if(!W)return;const R=(re.items||[]).filter(N=>N.id!==G),S=[...W.items||[]];S.splice(H,0,se),await Oi(un(Nt,"users",i,"pipelines",M),{items:R}),await Oi(un(Nt,"users",i,"pipelines",U),{items:S})}},[i,e]),P=x.useCallback(async(M,U)=>{await Oi(un(Nt,"users",i,"pipelines",M),{items:U})},[i]),D=x.useCallback(async M=>{const U=new Set(e.map(H=>H.id)),G=M.filter(H=>!U.has(H.id));if(G.length!==0)for(let H=0;H<G.length;H++){const re={...G[H],order:e.length+H};await Sy(un(Nt,"users",i,"pipelines",re.id),re)}},[i,e]);return{sections:e,loading:r,addSection:l,updateSection:c,deleteSection:f,reorderSections:m,toggleCollapse:g,addItem:_,updateItem:E,deleteItem:b,moveItem:w,reorderItems:P,mergeSections:D}}function UP(i){return Ul&&i?LP(i):kP()}function zP(){const[i,e]=x.useState(Ac()),t=Ac(),[r,a]=x.useState(()=>new Date().getFullYear()),[l,c]=x.useState(()=>new Date().getMonth()),f=x.useCallback(()=>{c(E=>E===0?(a(b=>b-1),11):E-1)},[]),m=x.useCallback(()=>{c(E=>E===11?(a(b=>b+1),0):E+1)},[]),g=x.useCallback(()=>{const E=new Date;a(E.getFullYear()),c(E.getMonth()),e(Ac())},[]),_=x.useCallback((E,b)=>{a(E),c(b)},[]);return{selectedDate:i,setSelectedDate:e,today:t,viewYear:r,setViewYear:a,viewMonth:l,setViewMonth:c,prevMonth:f,nextMonth:m,goToday:g,setViewYearMonth:_}}const w1="entrypoint-v2-custom-types",jP=["#0d9488","#84cc16","#e11d48","#6366f1","#f97316","#06b6d4","#a21caf","#65a30d","#be185d","#1d4ed8","#c026d3","#ea580c","#0f766e","#4f46e5","#15803d","#9333ea"],BP=new Set(Object.values($a).map(i=>i.border.toLowerCase())),Pg=jP.filter(i=>!BP.has(i.toLowerCase()));function qP(i){if(i.startsWith("hsl"))return{bg:i.replace(")",", 0.10)").replace("hsl(","hsla("),border:i,text:i};const e=parseInt(i.slice(1,3),16),t=parseInt(i.slice(3,5),16),r=parseInt(i.slice(5,7),16);return{bg:`rgba(${e}, ${t}, ${r}, 0.10)`,border:i,text:i}}function FP(i){if(i<Pg.length)return Pg[i];const e=((i-Pg.length)*137.5+30)%360;return`hsl(${Math.round(e)}, 65%, 50%)`}function HP(){try{const i=localStorage.getItem(w1);return i?JSON.parse(i).map(t=>({key:t.key,name:t.name})):[]}catch{return[]}}function kg(i){localStorage.setItem(w1,JSON.stringify(i.map(e=>({key:e.key,name:e.name}))))}function GP(){const[i,e]=x.useState(HP),t=x.useMemo(()=>i.map((f,m)=>{const g=FP(m);return{...f,color:g,colors:qP(g)}}),[i]),r=x.useCallback(f=>{const m=f.toLowerCase().replace(/\s+/g,"-");return e(g=>{if(g.find(E=>E.key===m))return g;const _=[...g,{key:m,name:f}];return kg(_),_}),m},[]),a=x.useCallback(f=>{e(m=>{const g=m.filter(_=>_.key!==f);return kg(g),g})},[]),l=x.useCallback(f=>{e(m=>{const g=new Set(m.map(b=>b.key)),_=f.filter(b=>!g.has(b.key));if(_.length===0)return m;const E=[...m,..._.map(b=>({key:b.key,name:b.name}))];return kg(E),E})},[]),c=x.useMemo(()=>t.reduce((f,m)=>(f[m.key]=m.colors,f),{}),[t]);return{customTypes:t,customTypeColors:c,addCustomType:r,removeCustomType:a,mergeCustomTypes:l}}const I1="entrypoint-v2-location";function KP(){try{const i=localStorage.getItem(I1);return i?JSON.parse(i):null}catch{return null}}function IS(i){localStorage.setItem(I1,JSON.stringify(i))}async function YP(i,e){const a=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${i}&lon=${e}&format=json&accept-language=en`)).json()).address||{},l=a.city||a.town||a.village||a.county||"Unknown",c=a.country||"Unknown";return{city:l,country:c}}function QP(){const[i,e]=x.useState(KP),[t,r]=x.useState(!1),[a,l]=x.useState(!1),c=x.useCallback(f=>{IS(f),e(f),l(!1)},[]);return x.useEffect(()=>{if(!i){if(!navigator.geolocation){l(!0);return}r(!0),navigator.geolocation.getCurrentPosition(async f=>{try{const{latitude:m,longitude:g}=f.coords,{city:_,country:E}=await YP(m,g),b={city:_,country:E,lat:m,lng:g};IS(b),e(b)}catch{l(!0)}finally{r(!1)}},()=>{l(!0),r(!1)},{timeout:1e4})}},[i]),{location:i,setLocation:c,hasLocation:!!i,detecting:t,geoFailed:a}}function R1({title:i,message:e,confirmLabel:t="Delete",onConfirm:r,onClose:a}){return x.useEffect(()=>{const l=c=>{c.key==="Escape"&&a()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[a]),I.jsx("div",{className:"modal-overlay",onClick:a,children:I.jsxs("div",{className:"modal",onClick:l=>l.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:i}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 20px",lineHeight:1.5},children:e}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{className:"btn-secondary",onClick:a,children:"Cancel"}),I.jsx("button",{className:"btn-danger",onClick:r,children:t})]})]})})}function $P({plans:i,activePlanId:e,onSelect:t,onCreate:r,onEdit:a,onDelete:l}){const[c,f]=x.useState(null),[m,g]=x.useState(null),_=x.useRef(null);x.useEffect(()=>{if(!c)return;const w=P=>{P.key==="Escape"&&f(null)};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[c]);const E=(w,P)=>{w.preventDefault(),f({x:w.clientX,y:w.clientY,plan:P})},b=w=>{const P=_.current;P&&P.scrollWidth>P.clientWidth&&(w.preventDefault(),P.scrollLeft+=w.deltaY)};return I.jsxs("div",{className:"plan-sidebar",children:[I.jsxs("div",{className:"plan-list",ref:_,onWheel:b,children:[i.map(w=>I.jsxs("button",{className:`plan-item ${w.id===e?"active":""}`,onClick:()=>t(w.id),onContextMenu:P=>E(P,w),children:[I.jsx("span",{className:"plan-dot",style:{background:w.color}}),I.jsxs("div",{className:"plan-info",children:[I.jsx("span",{className:"plan-label",children:w.label}),w.startDate&&w.endDate&&I.jsx("span",{className:"plan-dates",children:_P(w.startDate,w.endDate)})]})]},w.id)),I.jsx("button",{className:"plan-item plan-add",onClick:r,children:"+ New Plan"})]}),c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:()=>f(null)}),I.jsxs("div",{className:"context-menu",style:{top:c.y,left:c.x},children:[I.jsx("button",{onClick:()=>{a(c.plan),f(null)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{g(c.plan),f(null)},children:"Delete"})]})]}),m&&I.jsx(R1,{title:"Delete Plan",message:`Delete "${m.label}"? This cannot be undone.`,onConfirm:()=>{l(m.id),g(null)},onClose:()=>g(null)})]})}function XP(i,e,t,r){if(!i||!e)return null;for(const a of t)if(a.id!==r&&!(!a.startDate||!a.endDate)&&i<=a.endDate&&e>=a.startDate)return a;return null}function RS({plan:i,plans:e=[],onSave:t,onClose:r}){const a=!!i,[l,c]=x.useState((i==null?void 0:i.label)||""),[f,m]=x.useState((i==null?void 0:i.color)||zl[0]),[g,_]=x.useState((i==null?void 0:i.startDate)||""),[E,b]=x.useState((i==null?void 0:i.endDate)||""),[w,P]=x.useState(""),D=M=>{if(M.preventDefault(),P(""),E<g){P("End date must be after start date.");return}const U=XP(g,E,e,i==null?void 0:i.id);if(U){P(`Overlaps with "${U.label}" (${U.startDate}  ${U.endDate}).`);return}t({label:l.trim(),color:f,startDate:g,endDate:E})};return I.jsx("div",{className:"modal-overlay",onClick:r,onKeyDown:M=>{M.key==="Escape"&&r()},children:I.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),children:[I.jsx("h3",{className:"modal-title",children:a?"Edit Plan":"New Plan"}),I.jsxs("form",{onSubmit:D,className:"modal-form",children:[I.jsxs("label",{className:"modal-label",children:["Label",I.jsx("input",{className:"modal-input",value:l,onChange:M=>c(M.target.value),placeholder:"e.g. Ramadan",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start Date",I.jsx("input",{className:"modal-input",type:"date",value:g,onChange:M=>_(M.target.value),required:!0})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End Date",I.jsx("input",{className:"modal-input",type:"date",value:E,onChange:M=>b(M.target.value),required:!0})]})]}),w&&I.jsx("div",{className:"plan-error",children:w}),I.jsxs("div",{className:"modal-label",children:["Color",I.jsx("div",{className:"color-grid",children:zl.map(M=>I.jsx("button",{type:"button",className:`color-btn ${f===M?"active":""}`,style:{background:M},onClick:()=>m(M)},M))})]}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{type:"button",className:"btn-secondary",onClick:r,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}const JP=["January","February","March","April","May","June","July","August","September","October","November","December"],WP=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function ZP({viewYear:i,viewMonth:e,selectedDate:t,today:r,plans:a,highlightDate:l,onPrevMonth:c,onNextMonth:f,onGoToday:m,onSelectDate:g,onPlanClick:_}){const E=x.useMemo(()=>{const w=TP(i,e),P=(w[0].date.getDay()+6)%7;return[...Array.from({length:P},()=>null),...w]},[i,e]),b=x.useMemo(()=>{const w={};for(const P of E){if(!P)continue;const D=a.find(M=>M.startDate&&M.endDate&&b1(P.iso,M.startDate,M.endDate));D&&(w[P.iso]=D)}return w},[E,a]);return I.jsxs("div",{className:"calendar-view",children:[I.jsxs("div",{className:"cal-header",children:[I.jsx("button",{className:"cal-nav",onClick:c,children:""}),I.jsxs("div",{className:"cal-title",children:[I.jsx("span",{className:"cal-month",children:JP[e]}),I.jsx("span",{className:"cal-year",children:i})]}),I.jsx("button",{className:"cal-nav",onClick:f,children:""}),I.jsx("button",{className:"cal-today-btn",onClick:m,children:"Today"})]}),I.jsxs("div",{className:"cal-grid",children:[WP.map(w=>I.jsx("div",{className:"cal-dow",children:w},w)),E.map((w,P)=>{if(!w)return I.jsx("div",{className:"cal-cell cal-blank"},`blank-${P}`);const D=b[w.iso],M=w.iso===r,U=w.iso===t,G=w.iso===l;return I.jsxs("button",{className:`cal-cell ${M?"cal-today":""} ${U?"cal-selected":""} ${D?"cal-has-plan":""} ${G?"cal-highlight":""}`,style:D?{"--plan-color":D.color}:void 0,onClick:()=>g(w.iso),children:[I.jsx("span",{className:"cal-day-num",children:w.date.getDate()}),D&&I.jsx("span",{className:"cal-plan-dot",style:{background:D.color}})]},w.iso)})]}),a.length>0&&I.jsx("div",{className:"cal-plan-legend",children:a.filter(w=>w.startDate&&w.endDate).map(w=>I.jsxs("button",{className:"cal-plan-chip",onClick:()=>_==null?void 0:_(w),children:[I.jsx("span",{className:"cal-plan-chip-dot",style:{background:w.color}}),I.jsx("span",{children:w.label})]},w.id))})]})}const yr=60,Od=5,ic=15,jf=52,CS=8;function rl(i){return Math.max(0,Math.min(1435,Math.round(i/Od)*Od))}function _r(i){return i=Math.round(i),`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function DS({block:i,top:e,height:t,col:r=0,totalCols:a=1,isNew:l,isPrayer:c,extraTypeColors:f={},onEdit:m,onDelete:g,onTimeChange:_,onResize:E,onToggleTask:b}){var ze;const w=x.useRef(null),P=x.useRef(null),D=x.useRef(null),M=x.useRef(null),U=x.useRef(null),[G,H]=x.useState(null),re=$a[i.type]||f[i.type]||$a.neutral,se=c?"#2d8a4e":re.text==="#94a3b8"?"#b0b0ba":re.text,W=i.type==="prayer"||c?600:400,R=e/yr*60,S=i.duration||t/yr*60,N=_r(Math.min(R+S,1440)),O=i.time,k=`calc(100% - ${jf}px - ${CS}px)`,j=`calc((${k}) / ${a})`,V=`calc(${jf}px + (${k}) * ${r} / ${a})`,we=x.useCallback((me,Ie)=>{const ue=w.current,Se=P.current;if(ue){if(Ie==="move"){const xe=e+me;ue.style.top=`${xe}px`,ue.style.left=`${jf}px`,ue.style.width=`calc(100% - ${jf}px - ${CS}px)`,ue.style.zIndex="10000",ue.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",ue.style.opacity="0.85",ue.style.cursor="grabbing";const Pe=rl((e+me)/yr*60);Se&&(Se.textContent=`${_r(Pe)}  ${_r(Math.min(Pe+S,1440))}`)}else if(Ie==="top"){const xe=e+me,Pe=Math.max(t-me,ic/60*yr);ue.style.top=`${xe}px`,ue.style.height=`${Math.max(Pe,24)}px`,ue.style.zIndex="10000",ue.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",ue.style.opacity="0.85";const ut=rl(R+me/yr*60);Se&&(Se.textContent=`${_r(ut)}  ${_r(Math.min(R+S,1440))}`)}else if(Ie==="bottom"){const xe=Math.max(t+me,ic/60*yr);ue.style.height=`${Math.max(xe,24)}px`,ue.style.zIndex="10000",ue.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",ue.style.opacity="0.85";const Pe=R+Math.max(ic,rl(S+me/yr*60));Se&&(Se.textContent=`${_r(R)}  ${_r(Math.min(Pe,1440))}`)}}},[e,t,R,S]),Me=x.useCallback(()=>{const me=w.current;if(!me)return;me.style.top=`${e}px`,me.style.height=`${Math.max(t,24)}px`,me.style.left=V,me.style.width=j,me.style.zIndex=c?"10":String(Math.ceil(e)+1),me.style.boxShadow="none",me.style.opacity="1",me.style.cursor=c?"default":"pointer";const Ie=t<36;P.current&&(P.current.textContent=Ie?O:`${O}  ${N}`)},[e,t,V,j,O,N,c]);x.useEffect(()=>{const me=t<36;P.current&&(P.current.textContent=me?O:`${O}  ${N}`)},[O,N,t]);const X=300,le=10,_e=me=>{if(c||me.button!==0)return;if(me.pointerType==="touch"){const ue=me.pointerId,Se=me.clientY;U.current={startY:Se,tid:setTimeout(()=>{var xe;U.current=null,D.current={y:Se,mode:"move",moved:!1,touch:!0},(xe=w.current)==null||xe.setPointerCapture(ue)},X)}}else D.current={y:me.clientY,mode:"move",moved:!1,touch:!1},w.current.setPointerCapture(me.pointerId)},De=me=>{if(U.current){Math.abs(me.clientY-U.current.startY)>le&&(clearTimeout(U.current.tid),U.current=null);return}if(!D.current)return;const Ie=me.clientY-D.current.y;!D.current.moved&&Math.abs(Ie)>4&&(D.current.moved=!0),D.current.moved&&(M.current&&cancelAnimationFrame(M.current),M.current=requestAnimationFrame(()=>we(Ie,D.current.mode)))},Ue=me=>{if(U.current){clearTimeout(U.current.tid),U.current=null,me.pointerType==="touch"&&!c&&m(i);return}if(!D.current)return;const Ie=me.clientY-D.current.y,{mode:ue,moved:Se}=D.current;if(D.current=null,M.current&&cancelAnimationFrame(M.current),Me(),!Se){c||m(i);return}if(ue==="move"){const xe=rl((e+Ie)/yr*60);_(i.id,_r(xe))}else if(ue==="top"){const xe=rl(R+Ie/yr*60),Pe=Math.max(ic,Math.round((R+S-xe)/Od)*Od);E(i.id,_r(xe),Pe)}else if(ue==="bottom"){const xe=Math.max(ic,rl(S+Ie/yr*60));E(i.id,_r(R),xe)}},z=()=>{U.current&&(clearTimeout(U.current.tid),U.current=null),D.current&&(D.current=null,Me())},te=me=>Ie=>{if(c||(Ie.stopPropagation(),Ie.button!==0))return;if(Ie.pointerType==="touch"){const Se=Ie.pointerId,xe=Ie.clientY;U.current={startY:xe,tid:setTimeout(()=>{var Pe;U.current=null,D.current={y:xe,mode:me,moved:!0,touch:!0},(Pe=Ie.target)==null||Pe.setPointerCapture(Se)},X)}}else D.current={y:Ie.clientY,mode:me,moved:!0,touch:!1},Ie.target.setPointerCapture(Ie.pointerId)},$=me=>{c||(me.preventDefault(),me.stopPropagation(),H({x:me.clientX,y:me.clientY}))},ce=()=>H(null);x.useEffect(()=>{if(!G)return;const me=Ie=>{Ie.key==="Escape"&&ce()};return window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)},[G]);const ge=!c&&((ze=i.tasks)==null?void 0:ze.length)>0,ye=ge?i.tasks.filter(me=>me.done).length:0,Oe=t<36,Ge=ge&&t>=60,Ve=!c&&S>0?S>=60?`${Math.floor(S/60)}h${S%60?` ${Math.round(S%60)}m`:""}`:`${Math.round(S)}m`:null;return I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:w,className:`timeline-block ${l?"new-block":""} ${c?"prayer-block":""}`,style:{top:e,height:Math.max(t,24),left:V,width:j,right:"auto",background:c?"rgba(34, 139, 34, 0.10)":re.bg,borderLeft:`3px solid ${c?"#2d8a4e":re.border}`,zIndex:c?10:Math.ceil(e)+1,cursor:c?"default":"pointer",transition:"box-shadow 0.15s"},onPointerDown:_e,onPointerMove:De,onPointerUp:Ue,onPointerCancel:z,onContextMenu:$,children:[!c&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"resize-handle resize-handle-top",onPointerDown:te("top"),onPointerMove:De,onPointerUp:Ue}),I.jsx("div",{className:"resize-handle resize-handle-bottom",onPointerDown:te("bottom"),onPointerMove:De,onPointerUp:Ue})]}),Oe?I.jsxs("div",{className:"block-compact",children:[I.jsx("span",{ref:P,className:"block-time-sm",children:O}),I.jsx("span",{className:"block-icon-sm",children:i.icon}),I.jsx("span",{className:"block-act-sm",style:{color:se,fontWeight:W},children:i.activity}),ge&&I.jsxs("span",{className:"block-task-badge",children:[ye,"/",i.tasks.length]}),Ve&&I.jsx("span",{className:"block-duration",children:Ve})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:P,className:"block-time-sm",children:[O,"  ",N]}),I.jsxs("div",{className:"block-row",children:[I.jsx("span",{className:"block-icon-sm",children:i.icon}),I.jsx("span",{className:"block-act",style:{color:se,fontWeight:W},children:i.activity}),ge&&!Ge&&I.jsxs("span",{className:"block-task-badge",children:[ye,"/",i.tasks.length]}),Ve&&I.jsx("span",{className:"block-duration",children:Ve})]}),Ge&&I.jsx("div",{className:"block-tasks",onWheel:me=>{const Ie=me.currentTarget;Ie.scrollHeight>Ie.clientHeight&&me.stopPropagation()},children:i.tasks.map(me=>I.jsxs("label",{className:`block-task-item ${me.done?"done":""}`,onPointerDown:Ie=>Ie.stopPropagation(),onClick:Ie=>Ie.stopPropagation(),children:[I.jsx("input",{type:"checkbox",checked:me.done,onChange:()=>b==null?void 0:b(i.id,me.id)}),I.jsx("span",{children:me.text})]},me.id))})]})]}),G&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"context-overlay",onClick:me=>{me.stopPropagation(),ce()}}),I.jsxs("div",{className:"context-menu",style:{top:G.y,left:G.x},onClick:me=>me.stopPropagation(),children:[I.jsx("button",{onClick:()=>{ce(),m(i)},children:"Edit"}),I.jsx("button",{className:"danger",onClick:()=>{ce(),g(i.id)},children:"Delete"})]})]})]})}const e4=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function xS(i){return`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function t4({block:i,defaultTime:e,segments:t,onSave:r,onDelete:a,onClose:l,customTypes:c=[],customTypeColors:f={},onAddCustomType:m,onRemoveCustomType:g}){x.useEffect(()=>{if(!i)return;const $=ce=>{ce.key==="Delete"&&(ce.preventDefault(),a(i.id))};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[i,a]);const _=!!i,E=(i==null?void 0:i.time)||e||"08:00",b=(i==null?void 0:i.duration)||60,[w,P]=x.useState(E),[D,M]=x.useState(()=>{const[$,ce]=E.split(":").map(Number),ge=$*60+ce+b;return xS(ge)}),[U,G]=x.useState((i==null?void 0:i.activity)||""),[H,re]=x.useState((i==null?void 0:i.type)||"neutral"),[se,W]=x.useState((i==null?void 0:i.icon)||""),[R,S]=x.useState((i==null?void 0:i.tasks)||[]),[N,O]=x.useState(""),[k,j]=x.useState(!1),[V,we]=x.useState(!1),[Me,X]=x.useState(""),le=new Set(c.map($=>$.key)),_e=[...pP,...c.map($=>$.key)],De={...$a,...f},Ue=De[H]||$a.neutral,z=()=>{const[$,ce]=w.split(":").map(Number),[ge,ye]=D.split(":").map(Number);return Math.max(15,ge*60+ye-($*60+ce))},te=$=>{$.preventDefault(),r({id:(i==null?void 0:i.id)||crypto.randomUUID(),time:w,activity:U.trim(),type:H,icon:se,duration:z(),segment:null,offsetMinutes:0,tasks:R})};return I.jsx("div",{className:"modal-overlay",onClick:l,onKeyDown:$=>{$.key==="Escape"&&l()},children:I.jsxs("div",{className:"modal",onClick:$=>{$.stopPropagation(),k&&j(!1)},children:[I.jsx("h3",{className:"modal-title",children:_?"Edit Block":"Add Block"}),I.jsxs("form",{onSubmit:te,className:"modal-form",children:[I.jsxs("div",{className:"modal-row",children:[I.jsxs("label",{className:"modal-label",style:{flex:1},children:["Start",I.jsx("input",{className:"modal-input",value:w,onChange:$=>{const ce=$.target.value;P(ce);const[ge,ye]=w.split(":").map(Number),[Oe,Ge]=D.split(":").map(Number),Ve=Oe*60+Ge-(ge*60+ye);if(Ve>0&&/^\d{2}:\d{2}$/.test(ce)){const[ze,me]=ce.split(":").map(Number);M(xS(ze*60+me+Ve))}},placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]}),I.jsxs("label",{className:"modal-label",style:{flex:1},children:["End",I.jsx("input",{className:"modal-input",value:D,onChange:$=>M($.target.value),placeholder:"HH:MM",pattern:"\\d{2}:\\d{2}"})]})]}),I.jsxs("label",{className:"modal-label",children:["Activity",I.jsx("input",{className:"modal-input",value:U,onChange:$=>G($.target.value),placeholder:"e.g. Quran revision",required:!0,autoFocus:!0})]}),I.jsxs("div",{className:"modal-label",children:["Type",I.jsxs("div",{className:"modal-row",style:{gap:6,alignItems:"center"},children:[I.jsxs("div",{className:"type-picker",style:{flex:1},onClick:$=>$.stopPropagation(),children:[I.jsxs("button",{type:"button",className:"type-picker-btn",onClick:()=>j($=>!$),children:[I.jsx("span",{className:"type-color-dot",style:{background:Ue.border}}),I.jsx("span",{children:H.charAt(0).toUpperCase()+H.slice(1).replace(/-/g," ")}),I.jsx("span",{className:"type-picker-arrow",children:k?"":""})]}),k&&I.jsx("div",{className:"type-dropdown",children:_e.map($=>{const ce=De[$]||$a.neutral,ge=le.has($);return I.jsxs("div",{className:`type-dropdown-item${$===H?" active":""}`,children:[I.jsxs("button",{type:"button",className:"type-dropdown-select",onClick:()=>{re($),j(!1)},children:[I.jsx("span",{className:"type-color-dot",style:{background:ce.border}}),I.jsx("span",{children:$.charAt(0).toUpperCase()+$.slice(1).replace(/-/g," ")})]}),ge&&g&&I.jsx("button",{type:"button",className:"type-delete-btn",onClick:()=>{g($),H===$&&re("neutral")},children:""})]},$)})})]}),I.jsx("button",{type:"button",className:"btn-add-type",onClick:()=>we($=>!$),title:"Add custom type",children:"+"})]})]}),V&&I.jsxs("div",{className:"new-type-form",children:[I.jsx("input",{className:"modal-input",placeholder:"Type name",value:Me,onChange:$=>X($.target.value),onKeyDown:$=>{if($.key==="Enter"&&Me.trim()&&m){$.preventDefault();const ce=m(Me.trim());re(ce),X(""),we(!1)}}}),I.jsx("button",{type:"button",className:"btn-primary btn-sm",disabled:!Me.trim(),onClick:()=>{if(!Me.trim()||!m)return;const $=m(Me.trim());re($),X(""),we(!1)},children:"Add"})]}),I.jsxs("div",{className:"modal-label",children:["Icon",I.jsx("div",{className:"icon-grid",children:e4.map($=>I.jsx("button",{type:"button",className:`icon-btn ${se===$?"active":""}`,onClick:()=>W($),children:$},$))})]}),I.jsxs("div",{className:"modal-label",children:["Tasks",I.jsxs("div",{className:"task-list-editor",children:[R.map(($,ce)=>I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{type:"checkbox",checked:$.done,onChange:()=>{const ge=[...R];ge[ce]={...$,done:!$.done},S(ge)}}),I.jsx("input",{className:`modal-input task-edit-input${$.done?" task-done":""}`,value:$.text,onChange:ge=>{const ye=[...R];ye[ce]={...$,text:ge.target.value},S(ye)}}),I.jsx("button",{type:"button",className:"task-remove-btn",onClick:()=>S(R.filter((ge,ye)=>ye!==ce)),children:""})]},$.id)),I.jsxs("div",{className:"task-edit-row",children:[I.jsx("input",{className:"modal-input task-edit-input",placeholder:"Add task...",value:N,onChange:$=>O($.target.value),onKeyDown:$=>{$.key==="Enter"&&N.trim()&&($.preventDefault(),S([...R,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),O(""))}}),I.jsx("button",{type:"button",className:"task-add-btn",disabled:!N.trim(),onClick:()=>{N.trim()&&(S([...R,{id:crypto.randomUUID(),text:N.trim(),done:!1}]),O(""))},children:"+"})]})]})]}),I.jsxs("div",{className:"modal-actions",children:[_&&I.jsx("button",{type:"button",className:"btn-danger",onClick:()=>a(i.id),children:"Delete"}),I.jsx("div",{style:{flex:1}}),I.jsx("button",{type:"button",className:"btn-secondary",onClick:l,children:"Cancel"}),I.jsx("button",{type:"submit",className:"btn-primary",children:"Save"})]})]})]})})}var fc=$S();function n4(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return x.useMemo(()=>r=>{e.forEach(a=>a(r))},e)}const dm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $l(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function B_(i){return"nodeType"in i}function Kn(i){var e,t;return i?$l(i)?i:B_(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function q_(i){const{Document:e}=Kn(i);return i instanceof e}function ah(i){return $l(i)?!1:i instanceof Kn(i).HTMLElement}function C1(i){return i instanceof Kn(i).SVGElement}function Xl(i){return i?$l(i)?i.document:B_(i)?q_(i)?i:ah(i)||C1(i)?i.ownerDocument:document:document:document}const Xi=dm?x.useLayoutEffect:x.useEffect;function mm(i){const e=x.useRef(i);return Xi(()=>{e.current=i}),x.useCallback(function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.current==null?void 0:e.current(...r)},[])}function i4(){const i=x.useRef(null),e=x.useCallback((r,a)=>{i.current=setInterval(r,a)},[]),t=x.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function Hc(i,e){e===void 0&&(e=[i]);const t=x.useRef(i);return Xi(()=>{t.current!==i&&(t.current=i)},e),t}function oh(i,e){const t=x.useRef();return x.useMemo(()=>{const r=i(t.current);return t.current=r,r},[...e])}function Vd(i){const e=mm(i),t=x.useRef(null),r=x.useCallback(a=>{a!==t.current&&(e==null||e(a,t.current)),t.current=a},[]);return[t,r]}function Pd(i){const e=x.useRef();return x.useEffect(()=>{e.current=i},[i]),e.current}let Lg={};function lh(i,e){return x.useMemo(()=>{if(e)return e;const t=Lg[i]==null?0:Lg[i]+1;return Lg[i]=t,i+"-"+t},[i,e])}function D1(i){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((l,c)=>{const f=Object.entries(c);for(const[m,g]of f){const _=l[m];_!=null&&(l[m]=_+i*g)}return l},{...e})}}const gl=D1(1),kd=D1(-1);function r4(i){return"clientX"in i&&"clientY"in i}function pm(i){if(!i)return!1;const{KeyboardEvent:e}=Kn(i.target);return e&&i instanceof e}function s4(i){if(!i)return!1;const{TouchEvent:e}=Kn(i.target);return e&&i instanceof e}function Ld(i){if(s4(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return r4(i)?{x:i.clientX,y:i.clientY}:null}const ra=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[ra.Translate.toString(i),ra.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:r}=i;return e+" "+t+"ms "+r}}}),NS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function a4(i){return i.matches(NS)?i:i.querySelector(NS)}const o4={display:"none"};function l4(i){let{id:e,value:t}=i;return Ot.createElement("div",{id:e,style:o4},t)}function u4(i){let{id:e,announcement:t,ariaLiveType:r="assertive"}=i;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ot.createElement("div",{id:e,style:a,role:"status","aria-live":r,"aria-atomic":!0},t)}function c4(){const[i,e]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&e(r)},[]),announcement:i}}const x1=x.createContext(null);function h4(i){const e=x.useContext(x1);x.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function f4(){const[i]=x.useState(()=>new Set),e=x.useCallback(r=>(i.add(r),()=>i.delete(r)),[i]);return[x.useCallback(r=>{let{type:a,event:l}=r;i.forEach(c=>{var f;return(f=c[a])==null?void 0:f.call(c,l)})},[i]),e]}const d4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},m4={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function p4(i){let{announcements:e=m4,container:t,hiddenTextDescribedById:r,screenReaderInstructions:a=d4}=i;const{announce:l,announcement:c}=c4(),f=lh("DndLiveRegion"),[m,g]=x.useState(!1);if(x.useEffect(()=>{g(!0)},[]),h4(x.useMemo(()=>({onDragStart(E){let{active:b}=E;l(e.onDragStart({active:b}))},onDragMove(E){let{active:b,over:w}=E;e.onDragMove&&l(e.onDragMove({active:b,over:w}))},onDragOver(E){let{active:b,over:w}=E;l(e.onDragOver({active:b,over:w}))},onDragEnd(E){let{active:b,over:w}=E;l(e.onDragEnd({active:b,over:w}))},onDragCancel(E){let{active:b,over:w}=E;l(e.onDragCancel({active:b,over:w}))}}),[l,e])),!m)return null;const _=Ot.createElement(Ot.Fragment,null,Ot.createElement(l4,{id:r,value:a.draggable}),Ot.createElement(u4,{id:f,announcement:c}));return t?fc.createPortal(_,t):_}var cn;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(cn||(cn={}));function Ud(){}function MS(i,e){return x.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function g4(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return x.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Ji=Object.freeze({x:0,y:0});function y4(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function _4(i,e){const t=Ld(i);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function v4(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return t-r}function E4(i,e){let{data:{value:t}}=i,{data:{value:r}}=e;return r-t}function T4(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function OS(i,e,t){return e===void 0&&(e=i.left),t===void 0&&(t=i.top),{x:e+i.width*.5,y:t+i.height*.5}}const b4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const a=OS(e,e.left,e.top),l=[];for(const c of r){const{id:f}=c,m=t.get(f);if(m){const g=y4(OS(m),a);l.push({id:f,data:{droppableContainer:c,value:g}})}}return l.sort(v4)};function S4(i,e){const t=Math.max(e.top,i.top),r=Math.max(e.left,i.left),a=Math.min(e.left+e.width,i.left+i.width),l=Math.min(e.top+e.height,i.top+i.height),c=a-r,f=l-t;if(r<a&&t<l){const m=e.width*e.height,g=i.width*i.height,_=c*f,E=_/(m+g-_);return Number(E.toFixed(4))}return 0}const A4=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=i;const a=[];for(const l of r){const{id:c}=l,f=t.get(c);if(f){const m=S4(f,e);m>0&&a.push({id:c,data:{droppableContainer:l,value:m}})}}return a.sort(E4)};function w4(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function N1(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:Ji}function I4(i){return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((c,f)=>({...c,top:c.top+i*f.y,bottom:c.bottom+i*f.y,left:c.left+i*f.x,right:c.right+i*f.x}),{...t})}}const R4=I4(1);function M1(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function C4(i,e,t){const r=M1(e);if(!r)return i;const{scaleX:a,scaleY:l,x:c,y:f}=r,m=i.left-c-(1-a)*parseFloat(t),g=i.top-f-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),_=a?i.width/a:i.width,E=l?i.height/l:i.height;return{width:_,height:E,top:g,right:m+_,bottom:g+E,left:m}}const D4={ignoreTransform:!1};function Jl(i,e){e===void 0&&(e=D4);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:g,transformOrigin:_}=Kn(i).getComputedStyle(i);g&&(t=C4(t,g,_))}const{top:r,left:a,width:l,height:c,bottom:f,right:m}=t;return{top:r,left:a,width:l,height:c,bottom:f,right:m}}function VS(i){return Jl(i,{ignoreTransform:!0})}function x4(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function N4(i,e){return e===void 0&&(e=Kn(i).getComputedStyle(i)),e.position==="fixed"}function M4(i,e){e===void 0&&(e=Kn(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=e[a];return typeof l=="string"?t.test(l):!1})}function F_(i,e){const t=[];function r(a){if(e!=null&&t.length>=e||!a)return t;if(q_(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!ah(a)||C1(a)||t.includes(a))return t;const l=Kn(i).getComputedStyle(a);return a!==i&&M4(a,l)&&t.push(a),N4(a,l)?t:r(a.parentNode)}return i?r(i):t}function O1(i){const[e]=F_(i,1);return e??null}function Ug(i){return!dm||!i?null:$l(i)?i:B_(i)?q_(i)||i===Xl(i).scrollingElement?window:ah(i)?i:null:null}function V1(i){return $l(i)?i.scrollX:i.scrollLeft}function P1(i){return $l(i)?i.scrollY:i.scrollTop}function wy(i){return{x:V1(i),y:P1(i)}}var _n;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(_n||(_n={}));function k1(i){return!dm||!i?!1:i===document.scrollingElement}function L1(i){const e={x:0,y:0},t=k1(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},r={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},a=i.scrollTop<=e.y,l=i.scrollLeft<=e.x,c=i.scrollTop>=r.y,f=i.scrollLeft>=r.x;return{isTop:a,isLeft:l,isBottom:c,isRight:f,maxScroll:r,minScroll:e}}const O4={x:.2,y:.2};function V4(i,e,t,r,a){let{top:l,left:c,right:f,bottom:m}=t;r===void 0&&(r=10),a===void 0&&(a=O4);const{isTop:g,isBottom:_,isLeft:E,isRight:b}=L1(i),w={x:0,y:0},P={x:0,y:0},D={height:e.height*a.y,width:e.width*a.x};return!g&&l<=e.top+D.height?(w.y=_n.Backward,P.y=r*Math.abs((e.top+D.height-l)/D.height)):!_&&m>=e.bottom-D.height&&(w.y=_n.Forward,P.y=r*Math.abs((e.bottom-D.height-m)/D.height)),!b&&f>=e.right-D.width?(w.x=_n.Forward,P.x=r*Math.abs((e.right-D.width-f)/D.width)):!E&&c<=e.left+D.width&&(w.x=_n.Backward,P.x=r*Math.abs((e.left+D.width-c)/D.width)),{direction:w,speed:P}}function P4(i){if(i===document.scrollingElement){const{innerWidth:l,innerHeight:c}=window;return{top:0,left:0,right:l,bottom:c,width:l,height:c}}const{top:e,left:t,right:r,bottom:a}=i.getBoundingClientRect();return{top:e,left:t,right:r,bottom:a,width:i.clientWidth,height:i.clientHeight}}function U1(i){return i.reduce((e,t)=>gl(e,wy(t)),Ji)}function k4(i){return i.reduce((e,t)=>e+V1(t),0)}function L4(i){return i.reduce((e,t)=>e+P1(t),0)}function z1(i,e){if(e===void 0&&(e=Jl),!i)return;const{top:t,left:r,bottom:a,right:l}=e(i);O1(i)&&(a<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const U4=[["x",["left","right"],k4],["y",["top","bottom"],L4]];class H_{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=F_(t),a=U1(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,c,f]of U4)for(const m of c)Object.defineProperty(this,m,{get:()=>{const g=f(r),_=a[l]-g;return this.rect[m]+_},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class wc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var a;(a=this.target)==null||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function z4(i){const{EventTarget:e}=Kn(i);return i instanceof e?i:Xl(i)}function zg(i,e){const t=Math.abs(i.x),r=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Vi;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Vi||(Vi={}));function PS(i){i.preventDefault()}function j4(i){i.stopPropagation()}var ot;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(ot||(ot={}));const j1={start:[ot.Space,ot.Enter],cancel:[ot.Esc],end:[ot.Space,ot.Enter,ot.Tab]},B4=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case ot.Right:return{...t,x:t.x+25};case ot.Left:return{...t,x:t.x-25};case ot.Down:return{...t,y:t.y+25};case ot.Up:return{...t,y:t.y-25}}};class B1{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new wc(Xl(t)),this.windowListeners=new wc(Kn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vi.Resize,this.handleCancel),this.windowListeners.add(Vi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&z1(r),t(Ji)}handleKeyDown(e){if(pm(e)){const{active:t,context:r,options:a}=this.props,{keyboardCodes:l=j1,coordinateGetter:c=B4,scrollBehavior:f="smooth"}=a,{code:m}=e;if(l.end.includes(m)){this.handleEnd(e);return}if(l.cancel.includes(m)){this.handleCancel(e);return}const{collisionRect:g}=r.current,_=g?{x:g.left,y:g.top}:Ji;this.referenceCoordinates||(this.referenceCoordinates=_);const E=c(e,{active:t,context:r.current,currentCoordinates:_});if(E){const b=kd(E,_),w={x:0,y:0},{scrollableAncestors:P}=r.current;for(const D of P){const M=e.code,{isTop:U,isRight:G,isLeft:H,isBottom:re,maxScroll:se,minScroll:W}=L1(D),R=P4(D),S={x:Math.min(M===ot.Right?R.right-R.width/2:R.right,Math.max(M===ot.Right?R.left:R.left+R.width/2,E.x)),y:Math.min(M===ot.Down?R.bottom-R.height/2:R.bottom,Math.max(M===ot.Down?R.top:R.top+R.height/2,E.y))},N=M===ot.Right&&!G||M===ot.Left&&!H,O=M===ot.Down&&!re||M===ot.Up&&!U;if(N&&S.x!==E.x){const k=D.scrollLeft+b.x,j=M===ot.Right&&k<=se.x||M===ot.Left&&k>=W.x;if(j&&!b.y){D.scrollTo({left:k,behavior:f});return}j?w.x=D.scrollLeft-k:w.x=M===ot.Right?D.scrollLeft-se.x:D.scrollLeft-W.x,w.x&&D.scrollBy({left:-w.x,behavior:f});break}else if(O&&S.y!==E.y){const k=D.scrollTop+b.y,j=M===ot.Down&&k<=se.y||M===ot.Up&&k>=W.y;if(j&&!b.x){D.scrollTo({top:k,behavior:f});return}j?w.y=D.scrollTop-k:w.y=M===ot.Down?D.scrollTop-se.y:D.scrollTop-W.y,w.y&&D.scrollBy({top:-w.y,behavior:f});break}}this.handleMove(e,gl(kd(E,this.referenceCoordinates),w))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}B1.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:r=j1,onActivation:a}=e,{active:l}=t;const{code:c}=i.nativeEvent;if(r.start.includes(c)){const f=l.activatorNode.current;return f&&i.target!==f?!1:(i.preventDefault(),a==null||a({event:i.nativeEvent}),!0)}return!1}}];function kS(i){return!!(i&&"distance"in i)}function LS(i){return!!(i&&"delay"in i)}class G_{constructor(e,t,r){var a;r===void 0&&(r=z4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:c}=l;this.props=e,this.events=t,this.document=Xl(c),this.documentListeners=new wc(this.document),this.listeners=new wc(r),this.windowListeners=new wc(Kn(c)),this.initialCoordinates=(a=Ld(l))!=null?a:Ji,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Vi.Resize,this.handleCancel),this.windowListeners.add(Vi.DragStart,PS),this.windowListeners.add(Vi.VisibilityChange,this.handleCancel),this.windowListeners.add(Vi.ContextMenu,PS),this.documentListeners.add(Vi.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(LS(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(kS(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Vi.Click,j4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:a,props:l}=this,{onMove:c,options:{activationConstraint:f}}=l;if(!a)return;const m=(t=Ld(e))!=null?t:Ji,g=kd(a,m);if(!r&&f){if(kS(f)){if(f.tolerance!=null&&zg(g,f.tolerance))return this.handleCancel();if(zg(g,f.distance))return this.handleStart()}if(LS(f)&&zg(g,f.tolerance))return this.handleCancel();this.handlePending(f,g);return}e.cancelable&&e.preventDefault(),c(m)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ot.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const q4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class K_ extends G_{constructor(e){const{event:t}=e,r=Xl(t.target);super(e,q4,r)}}K_.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const F4={move:{name:"mousemove"},end:{name:"mouseup"}};var Iy;(function(i){i[i.RightClick=2]="RightClick"})(Iy||(Iy={}));class H4 extends G_{constructor(e){super(e,F4,Xl(e.event.target))}}H4.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;return t.button===Iy.RightClick?!1:(r==null||r({event:t}),!0)}}];const jg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class q1 extends G_{constructor(e){super(e,jg)}static setup(){return window.addEventListener(jg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(jg.move.name,e)};function e(){}}}q1.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:r}=e;const{touches:a}=t;return a.length>1?!1:(r==null||r({event:t}),!0)}}];var Ic;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Ic||(Ic={}));var zd;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(zd||(zd={}));function G4(i){let{acceleration:e,activator:t=Ic.Pointer,canScroll:r,draggingRect:a,enabled:l,interval:c=5,order:f=zd.TreeOrder,pointerCoordinates:m,scrollableAncestors:g,scrollableAncestorRects:_,delta:E,threshold:b}=i;const w=Y4({delta:E,disabled:!l}),[P,D]=i4(),M=x.useRef({x:0,y:0}),U=x.useRef({x:0,y:0}),G=x.useMemo(()=>{switch(t){case Ic.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case Ic.DraggableRect:return a}},[t,a,m]),H=x.useRef(null),re=x.useCallback(()=>{const W=H.current;if(!W)return;const R=M.current.x*U.current.x,S=M.current.y*U.current.y;W.scrollBy(R,S)},[]),se=x.useMemo(()=>f===zd.TreeOrder?[...g].reverse():g,[f,g]);x.useEffect(()=>{if(!l||!g.length||!G){D();return}for(const W of se){if((r==null?void 0:r(W))===!1)continue;const R=g.indexOf(W),S=_[R];if(!S)continue;const{direction:N,speed:O}=V4(W,S,G,e,b);for(const k of["x","y"])w[k][N[k]]||(O[k]=0,N[k]=0);if(O.x>0||O.y>0){D(),H.current=W,P(re,c),M.current=O,U.current=N;return}}M.current={x:0,y:0},U.current={x:0,y:0},D()},[e,re,r,D,l,c,JSON.stringify(G),JSON.stringify(w),P,g,se,_,JSON.stringify(b)])}const K4={x:{[_n.Backward]:!1,[_n.Forward]:!1},y:{[_n.Backward]:!1,[_n.Forward]:!1}};function Y4(i){let{delta:e,disabled:t}=i;const r=Pd(e);return oh(a=>{if(t||!r||!a)return K4;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[_n.Backward]:a.x[_n.Backward]||l.x===-1,[_n.Forward]:a.x[_n.Forward]||l.x===1},y:{[_n.Backward]:a.y[_n.Backward]||l.y===-1,[_n.Forward]:a.y[_n.Forward]||l.y===1}}},[t,e,r])}function Q4(i,e){const t=e!=null?i.get(e):void 0,r=t?t.node.current:null;return oh(a=>{var l;return e==null?null:(l=r??a)!=null?l:null},[r,e])}function $4(i,e){return x.useMemo(()=>i.reduce((t,r)=>{const{sensor:a}=r,l=a.activators.map(c=>({eventName:c.eventName,handler:e(c.handler,r)}));return[...t,...l]},[]),[i,e])}var Gc;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Gc||(Gc={}));var Ry;(function(i){i.Optimized="optimized"})(Ry||(Ry={}));const US=new Map;function X4(i,e){let{dragging:t,dependencies:r,config:a}=e;const[l,c]=x.useState(null),{frequency:f,measure:m,strategy:g}=a,_=x.useRef(i),E=M(),b=Hc(E),w=x.useCallback(function(U){U===void 0&&(U=[]),!b.current&&c(G=>G===null?U:G.concat(U.filter(H=>!G.includes(H))))},[b]),P=x.useRef(null),D=oh(U=>{if(E&&!t)return US;if(!U||U===US||_.current!==i||l!=null){const G=new Map;for(let H of i){if(!H)continue;if(l&&l.length>0&&!l.includes(H.id)&&H.rect.current){G.set(H.id,H.rect.current);continue}const re=H.node.current,se=re?new H_(m(re),re):null;H.rect.current=se,se&&G.set(H.id,se)}return G}return U},[i,l,t,E,m]);return x.useEffect(()=>{_.current=i},[i]),x.useEffect(()=>{E||w()},[t,E]),x.useEffect(()=>{l&&l.length>0&&c(null)},[JSON.stringify(l)]),x.useEffect(()=>{E||typeof f!="number"||P.current!==null||(P.current=setTimeout(()=>{w(),P.current=null},f))},[f,E,w,...r]),{droppableRects:D,measureDroppableContainers:w,measuringScheduled:l!=null};function M(){switch(g){case Gc.Always:return!1;case Gc.BeforeDragging:return t;default:return!t}}}function Y_(i,e){return oh(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function J4(i,e){return Y_(i,e)}function W4(i){let{callback:e,disabled:t}=i;const r=mm(e),a=x.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return x.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function gm(i){let{callback:e,disabled:t}=i;const r=mm(e),a=x.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return x.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Z4(i){return new H_(Jl(i),i)}function zS(i,e,t){e===void 0&&(e=Z4);const[r,a]=x.useState(null);function l(){a(m=>{if(!i)return null;if(i.isConnected===!1){var g;return(g=m??t)!=null?g:null}const _=e(i);return JSON.stringify(m)===JSON.stringify(_)?m:_})}const c=W4({callback(m){if(i)for(const g of m){const{type:_,target:E}=g;if(_==="childList"&&E instanceof HTMLElement&&E.contains(i)){l();break}}}}),f=gm({callback:l});return Xi(()=>{l(),i?(f==null||f.observe(i),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(f==null||f.disconnect(),c==null||c.disconnect())},[i]),r}function ek(i){const e=Y_(i);return N1(i,e)}const jS=[];function tk(i){const e=x.useRef(i),t=oh(r=>i?r&&r!==jS&&i&&e.current&&i.parentNode===e.current.parentNode?r:F_(i):jS,[i]);return x.useEffect(()=>{e.current=i},[i]),t}function nk(i){const[e,t]=x.useState(null),r=x.useRef(i),a=x.useCallback(l=>{const c=Ug(l.target);c&&t(f=>f?(f.set(c,wy(c)),new Map(f)):null)},[]);return x.useEffect(()=>{const l=r.current;if(i!==l){c(l);const f=i.map(m=>{const g=Ug(m);return g?(g.addEventListener("scroll",a,{passive:!0}),[g,wy(g)]):null}).filter(m=>m!=null);t(f.length?new Map(f):null),r.current=i}return()=>{c(i),c(l)};function c(f){f.forEach(m=>{const g=Ug(m);g==null||g.removeEventListener("scroll",a)})}},[a,i]),x.useMemo(()=>i.length?e?Array.from(e.values()).reduce((l,c)=>gl(l,c),Ji):U1(i):Ji,[i,e])}function BS(i,e){e===void 0&&(e=[]);const t=x.useRef(null);return x.useEffect(()=>{t.current=null},e),x.useEffect(()=>{const r=i!==Ji;r&&!t.current&&(t.current=i),!r&&t.current&&(t.current=null)},[i]),t.current?kd(i,t.current):Ji}function ik(i){x.useEffect(()=>{if(!dm)return;const e=i.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},i.map(e=>{let{sensor:t}=e;return t}))}function rk(i,e){return x.useMemo(()=>i.reduce((t,r)=>{let{eventName:a,handler:l}=r;return t[a]=c=>{l(c,e)},t},{}),[i,e])}function F1(i){return x.useMemo(()=>i?x4(i):null,[i])}const qS=[];function sk(i,e){e===void 0&&(e=Jl);const[t]=i,r=F1(t?Kn(t):null),[a,l]=x.useState(qS);function c(){l(()=>i.length?i.map(m=>k1(m)?r:new H_(e(m),m)):qS)}const f=gm({callback:c});return Xi(()=>{f==null||f.disconnect(),c(),i.forEach(m=>f==null?void 0:f.observe(m))},[i]),a}function H1(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return ah(e)?e:i}function ak(i){let{measure:e}=i;const[t,r]=x.useState(null),a=x.useCallback(g=>{for(const{target:_}of g)if(ah(_)){r(E=>{const b=e(_);return E?{...E,width:b.width,height:b.height}:b});break}},[e]),l=gm({callback:a}),c=x.useCallback(g=>{const _=H1(g);l==null||l.disconnect(),_&&(l==null||l.observe(_)),r(_?e(_):null)},[e,l]),[f,m]=Vd(c);return x.useMemo(()=>({nodeRef:f,rect:t,setRef:m}),[t,f,m])}const ok=[{sensor:K_,options:{}},{sensor:B1,options:{}}],lk={current:{}},sd={draggable:{measure:VS},droppable:{measure:VS,strategy:Gc.WhileDragging,frequency:Ry.Optimized},dragOverlay:{measure:Jl}};class Rc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const uk={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Rc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ud},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sd,measureDroppableContainers:Ud,windowRect:null,measuringScheduled:!1},G1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ud,draggableNodes:new Map,over:null,measureDroppableContainers:Ud},uh=x.createContext(G1),K1=x.createContext(uk);function ck(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Rc}}}function hk(i,e){switch(e.type){case cn.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case cn.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case cn.DragEnd:case cn.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case cn.RegisterDroppable:{const{element:t}=e,{id:r}=t,a=new Rc(i.droppable.containers);return a.set(r,t),{...i,droppable:{...i.droppable,containers:a}}}case cn.SetDroppableDisabled:{const{id:t,key:r,disabled:a}=e,l=i.droppable.containers.get(t);if(!l||r!==l.key)return i;const c=new Rc(i.droppable.containers);return c.set(t,{...l,disabled:a}),{...i,droppable:{...i.droppable,containers:c}}}case cn.UnregisterDroppable:{const{id:t,key:r}=e,a=i.droppable.containers.get(t);if(!a||r!==a.key)return i;const l=new Rc(i.droppable.containers);return l.delete(t),{...i,droppable:{...i.droppable,containers:l}}}default:return i}}function fk(i){let{disabled:e}=i;const{active:t,activatorEvent:r,draggableNodes:a}=x.useContext(uh),l=Pd(r),c=Pd(t==null?void 0:t.id);return x.useEffect(()=>{if(!e&&!r&&l&&c!=null){if(!pm(l)||document.activeElement===l.target)return;const f=a.get(c);if(!f)return;const{activatorNode:m,node:g}=f;if(!m.current&&!g.current)return;requestAnimationFrame(()=>{for(const _ of[m.current,g.current]){if(!_)continue;const E=a4(_);if(E){E.focus();break}}})}},[r,e,a,c,l]),null}function Y1(i,e){let{transform:t,...r}=e;return i!=null&&i.length?i.reduce((a,l)=>l({transform:a,...r}),t):t}function dk(i){return x.useMemo(()=>({draggable:{...sd.draggable,...i==null?void 0:i.draggable},droppable:{...sd.droppable,...i==null?void 0:i.droppable},dragOverlay:{...sd.dragOverlay,...i==null?void 0:i.dragOverlay}}),[i==null?void 0:i.draggable,i==null?void 0:i.droppable,i==null?void 0:i.dragOverlay])}function mk(i){let{activeNode:e,measure:t,initialRect:r,config:a=!0}=i;const l=x.useRef(!1),{x:c,y:f}=typeof a=="boolean"?{x:a,y:a}:a;Xi(()=>{if(!c&&!f||!e){l.current=!1;return}if(l.current||!r)return;const g=e==null?void 0:e.node.current;if(!g||g.isConnected===!1)return;const _=t(g),E=N1(_,r);if(c||(E.x=0),f||(E.y=0),l.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const b=O1(g);b&&b.scrollBy({top:E.y,left:E.x})}},[e,c,f,r,t])}const ym=x.createContext({...Ji,scaleX:1,scaleY:1});var Bs;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(Bs||(Bs={}));const pk=x.memo(function(e){var t,r,a,l;let{id:c,accessibility:f,autoScroll:m=!0,children:g,sensors:_=ok,collisionDetection:E=A4,measuring:b,modifiers:w,...P}=e;const D=x.useReducer(hk,void 0,ck),[M,U]=D,[G,H]=f4(),[re,se]=x.useState(Bs.Uninitialized),W=re===Bs.Initialized,{draggable:{active:R,nodes:S,translate:N},droppable:{containers:O}}=M,k=R!=null?S.get(R):null,j=x.useRef({initial:null,translated:null}),V=x.useMemo(()=>{var Ye;return R!=null?{id:R,data:(Ye=k==null?void 0:k.data)!=null?Ye:lk,rect:j}:null},[R,k]),we=x.useRef(null),[Me,X]=x.useState(null),[le,_e]=x.useState(null),De=Hc(P,Object.values(P)),Ue=lh("DndDescribedBy",c),z=x.useMemo(()=>O.getEnabled(),[O]),te=dk(b),{droppableRects:$,measureDroppableContainers:ce,measuringScheduled:ge}=X4(z,{dragging:W,dependencies:[N.x,N.y],config:te.droppable}),ye=Q4(S,R),Oe=x.useMemo(()=>le?Ld(le):null,[le]),Ge=Dr(),Ve=J4(ye,te.draggable.measure);mk({activeNode:R!=null?S.get(R):null,config:Ge.layoutShiftCompensation,initialRect:Ve,measure:te.draggable.measure});const ze=zS(ye,te.draggable.measure,Ve),me=zS(ye?ye.parentElement:null),Ie=x.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ue=O.getNodeFor((t=Ie.current.over)==null?void 0:t.id),Se=ak({measure:te.dragOverlay.measure}),xe=(r=Se.nodeRef.current)!=null?r:ye,Pe=W?(a=Se.rect)!=null?a:ze:null,ut=!!(Se.nodeRef.current&&Se.rect),Ut=ek(ut?null:ze),nt=F1(xe?Kn(xe):null),ct=tk(W?ue??ye:null),En=sk(ct),Wi=Y1(w,{transform:{x:N.x-Ut.x,y:N.y-Ut.y,scaleX:1,scaleY:1},activatorEvent:le,active:V,activeNodeRect:ze,containerNodeRect:me,draggingNodeRect:Pe,over:Ie.current.over,overlayNodeRect:Se.rect,scrollableAncestors:ct,scrollableAncestorRects:En,windowRect:nt}),Zi=Oe?gl(Oe,N):null,Yt=nk(ct),ki=BS(Yt),vi=BS(Yt,[ze]),Tn=gl(Wi,ki),bn=Pe?R4(Pe,Wi):null,Be=V&&bn?E({active:V,collisionRect:bn,droppableRects:$,droppableContainers:z,pointerCoordinates:Zi}):null,bt=T4(Be,"id"),[an,ua]=x.useState(null),ii=ut?Wi:gl(Wi,vi),on=w4(ii,(l=an==null?void 0:an.rect)!=null?l:null,ze),xn=x.useRef(null),It=x.useCallback((Ye,Rt)=>{let{sensor:Ct,options:Qt}=Rt;if(we.current==null)return;const Nn=S.get(we.current);if(!Nn)return;const dn=Ye.nativeEvent,zt=new Ct({active:we.current,activeNode:Nn,event:dn,options:Qt,context:Ie,onAbort(jt){if(!S.get(jt))return;const{onDragAbort:On}=De.current,jn={id:jt};On==null||On(jn),G({type:"onDragAbort",event:jn})},onPending(jt,Mn,On,jn){if(!S.get(jt))return;const{onDragPending:Bn}=De.current,si={id:jt,constraint:Mn,initialCoordinates:On,offset:jn};Bn==null||Bn(si),G({type:"onDragPending",event:si})},onStart(jt){const Mn=we.current;if(Mn==null)return;const On=S.get(Mn);if(!On)return;const{onDragStart:jn}=De.current,ri={activatorEvent:dn,active:{id:Mn,data:On.data,rect:j}};fc.unstable_batchedUpdates(()=>{jn==null||jn(ri),se(Bs.Initializing),U({type:cn.DragStart,initialCoordinates:jt,active:Mn}),G({type:"onDragStart",event:ri}),X(xn.current),_e(dn)})},onMove(jt){U({type:cn.DragMove,coordinates:jt})},onEnd:Yn(cn.DragEnd),onCancel:Yn(cn.DragCancel)});xn.current=zt;function Yn(jt){return async function(){const{active:On,collisions:jn,over:ri,scrollAdjustedTranslate:Bn}=Ie.current;let si=null;if(On&&Bn){const{cancelDrop:Sn}=De.current;si={activatorEvent:dn,active:On,collisions:jn,delta:Bn,over:ri},jt===cn.DragEnd&&typeof Sn=="function"&&await Promise.resolve(Sn(si))&&(jt=cn.DragCancel)}we.current=null,fc.unstable_batchedUpdates(()=>{U({type:jt}),se(Bs.Uninitialized),ua(null),X(null),_e(null),xn.current=null;const Sn=jt===cn.DragEnd?"onDragEnd":"onDragCancel";if(si){const qn=De.current[Sn];qn==null||qn(si),G({type:Sn,event:si})}})}}},[S]),uo=x.useCallback((Ye,Rt)=>(Ct,Qt)=>{const Nn=Ct.nativeEvent,dn=S.get(Qt);if(we.current!==null||!dn||Nn.dndKit||Nn.defaultPrevented)return;const zt={active:dn};Ye(Ct,Rt.options,zt)===!0&&(Nn.dndKit={capturedBy:Rt.sensor},we.current=Qt,It(Ct,Rt))},[S,It]),Cr=$4(_,uo);ik(_),Xi(()=>{ze&&re===Bs.Initializing&&se(Bs.Initialized)},[ze,re]),x.useEffect(()=>{const{onDragMove:Ye}=De.current,{active:Rt,activatorEvent:Ct,collisions:Qt,over:Nn}=Ie.current;if(!Rt||!Ct)return;const dn={active:Rt,activatorEvent:Ct,collisions:Qt,delta:{x:Tn.x,y:Tn.y},over:Nn};fc.unstable_batchedUpdates(()=>{Ye==null||Ye(dn),G({type:"onDragMove",event:dn})})},[Tn.x,Tn.y]),x.useEffect(()=>{const{active:Ye,activatorEvent:Rt,collisions:Ct,droppableContainers:Qt,scrollAdjustedTranslate:Nn}=Ie.current;if(!Ye||we.current==null||!Rt||!Nn)return;const{onDragOver:dn}=De.current,zt=Qt.get(bt),Yn=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,jt={active:Ye,activatorEvent:Rt,collisions:Ct,delta:{x:Nn.x,y:Nn.y},over:Yn};fc.unstable_batchedUpdates(()=>{ua(Yn),dn==null||dn(jt),G({type:"onDragOver",event:jt})})},[bt]),Xi(()=>{Ie.current={activatorEvent:le,active:V,activeNode:ye,collisionRect:bn,collisions:Be,droppableRects:$,draggableNodes:S,draggingNode:xe,draggingNodeRect:Pe,droppableContainers:O,over:an,scrollableAncestors:ct,scrollAdjustedTranslate:Tn},j.current={initial:Pe,translated:bn}},[V,ye,Be,bn,S,xe,Pe,$,O,an,ct,Tn]),G4({...Ge,delta:N,draggingRect:bn,pointerCoordinates:Zi,scrollableAncestors:ct,scrollableAncestorRects:En});const co=x.useMemo(()=>({active:V,activeNode:ye,activeNodeRect:ze,activatorEvent:le,collisions:Be,containerNodeRect:me,dragOverlay:Se,draggableNodes:S,droppableContainers:O,droppableRects:$,over:an,measureDroppableContainers:ce,scrollableAncestors:ct,scrollableAncestorRects:En,measuringConfiguration:te,measuringScheduled:ge,windowRect:nt}),[V,ye,ze,le,Be,me,Se,S,O,$,an,ce,ct,En,te,ge,nt]),Ei=x.useMemo(()=>({activatorEvent:le,activators:Cr,active:V,activeNodeRect:ze,ariaDescribedById:{draggable:Ue},dispatch:U,draggableNodes:S,over:an,measureDroppableContainers:ce}),[le,Cr,V,ze,U,Ue,S,an,ce]);return Ot.createElement(x1.Provider,{value:H},Ot.createElement(uh.Provider,{value:Ei},Ot.createElement(K1.Provider,{value:co},Ot.createElement(ym.Provider,{value:on},g)),Ot.createElement(fk,{disabled:(f==null?void 0:f.restoreFocus)===!1})),Ot.createElement(p4,{...f,hiddenTextDescribedById:Ue}));function Dr(){const Ye=(Me==null?void 0:Me.autoScrollEnabled)===!1,Rt=typeof m=="object"?m.enabled===!1:m===!1,Ct=W&&!Ye&&!Rt;return typeof m=="object"?{...m,enabled:Ct}:{enabled:Ct}}}),gk=x.createContext(null),FS="button",yk="Draggable";function _k(i){let{id:e,data:t,disabled:r=!1,attributes:a}=i;const l=lh(yk),{activators:c,activatorEvent:f,active:m,activeNodeRect:g,ariaDescribedById:_,draggableNodes:E,over:b}=x.useContext(uh),{role:w=FS,roleDescription:P="draggable",tabIndex:D=0}=a??{},M=(m==null?void 0:m.id)===e,U=x.useContext(M?ym:gk),[G,H]=Vd(),[re,se]=Vd(),W=rk(c,e),R=Hc(t);Xi(()=>(E.set(e,{id:e,key:l,node:G,activatorNode:re,data:R}),()=>{const N=E.get(e);N&&N.key===l&&E.delete(e)}),[E,e]);const S=x.useMemo(()=>({role:w,tabIndex:D,"aria-disabled":r,"aria-pressed":M&&w===FS?!0:void 0,"aria-roledescription":P,"aria-describedby":_.draggable}),[r,w,D,M,P,_.draggable]);return{active:m,activatorEvent:f,activeNodeRect:g,attributes:S,isDragging:M,listeners:r?void 0:W,node:G,over:b,setNodeRef:H,setActivatorNodeRef:se,transform:U}}function Q1(){return x.useContext(K1)}const vk="Droppable",Ek={timeout:25};function $1(i){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:a}=i;const l=lh(vk),{active:c,dispatch:f,over:m,measureDroppableContainers:g}=x.useContext(uh),_=x.useRef({disabled:t}),E=x.useRef(!1),b=x.useRef(null),w=x.useRef(null),{disabled:P,updateMeasurementsFor:D,timeout:M}={...Ek,...a},U=Hc(D??r),G=x.useCallback(()=>{if(!E.current){E.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{g(Array.isArray(U.current)?U.current:[U.current]),w.current=null},M)},[M]),H=gm({callback:G,disabled:P||!c}),re=x.useCallback((S,N)=>{H&&(N&&(H.unobserve(N),E.current=!1),S&&H.observe(S))},[H]),[se,W]=Vd(re),R=Hc(e);return x.useEffect(()=>{!H||!se.current||(H.disconnect(),E.current=!1,H.observe(se.current))},[se,H]),x.useEffect(()=>(f({type:cn.RegisterDroppable,element:{id:r,key:l,disabled:t,node:se,rect:b,data:R}}),()=>f({type:cn.UnregisterDroppable,key:l,id:r})),[r]),x.useEffect(()=>{t!==_.current.disabled&&(f({type:cn.SetDroppableDisabled,id:r,key:l,disabled:t}),_.current.disabled=t)},[r,l,t,f]),{active:c,rect:b,isOver:(m==null?void 0:m.id)===r,node:se,over:m,setNodeRef:W}}function Tk(i){let{animation:e,children:t}=i;const[r,a]=x.useState(null),[l,c]=x.useState(null),f=Pd(t);return!t&&!r&&f&&a(f),Xi(()=>{if(!l)return;const m=r==null?void 0:r.key,g=r==null?void 0:r.props.id;if(m==null||g==null){a(null);return}Promise.resolve(e(g,l)).then(()=>{a(null)})},[e,r,l]),Ot.createElement(Ot.Fragment,null,t,r?x.cloneElement(r,{ref:c}):null)}const bk={x:0,y:0,scaleX:1,scaleY:1};function Sk(i){let{children:e}=i;return Ot.createElement(uh.Provider,{value:G1},Ot.createElement(ym.Provider,{value:bk},e))}const Ak={position:"fixed",touchAction:"none"},wk=i=>pm(i)?"transform 250ms ease":void 0,Ik=x.forwardRef((i,e)=>{let{as:t,activatorEvent:r,adjustScale:a,children:l,className:c,rect:f,style:m,transform:g,transition:_=wk}=i;if(!f)return null;const E=a?g:{...g,scaleX:1,scaleY:1},b={...Ak,width:f.width,height:f.height,top:f.top,left:f.left,transform:ra.Transform.toString(E),transformOrigin:a&&r?_4(r,f):void 0,transition:typeof _=="function"?_(r):_,...m};return Ot.createElement(t,{className:c,style:b,ref:e},l)}),Rk=i=>e=>{let{active:t,dragOverlay:r}=e;const a={},{styles:l,className:c}=i;if(l!=null&&l.active)for(const[f,m]of Object.entries(l.active))m!==void 0&&(a[f]=t.node.style.getPropertyValue(f),t.node.style.setProperty(f,m));if(l!=null&&l.dragOverlay)for(const[f,m]of Object.entries(l.dragOverlay))m!==void 0&&r.node.style.setProperty(f,m);return c!=null&&c.active&&t.node.classList.add(c.active),c!=null&&c.dragOverlay&&r.node.classList.add(c.dragOverlay),function(){for(const[m,g]of Object.entries(a))t.node.style.setProperty(m,g);c!=null&&c.active&&t.node.classList.remove(c.active)}},Ck=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:ra.Transform.toString(e)},{transform:ra.Transform.toString(t)}]},Dk={duration:250,easing:"ease",keyframes:Ck,sideEffects:Rk({styles:{active:{opacity:"0"}}})};function xk(i){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:a}=i;return mm((l,c)=>{if(e===null)return;const f=t.get(l);if(!f)return;const m=f.node.current;if(!m)return;const g=H1(c);if(!g)return;const{transform:_}=Kn(c).getComputedStyle(c),E=M1(_);if(!E)return;const b=typeof e=="function"?e:Nk(e);return z1(m,a.draggable.measure),b({active:{id:l,data:f.data,node:m,rect:a.draggable.measure(m)},draggableNodes:t,dragOverlay:{node:c,rect:a.dragOverlay.measure(g)},droppableContainers:r,measuringConfiguration:a,transform:E})})}function Nk(i){const{duration:e,easing:t,sideEffects:r,keyframes:a}={...Dk,...i};return l=>{let{active:c,dragOverlay:f,transform:m,...g}=l;if(!e)return;const _={x:f.rect.left-c.rect.left,y:f.rect.top-c.rect.top},E={scaleX:m.scaleX!==1?c.rect.width*m.scaleX/f.rect.width:1,scaleY:m.scaleY!==1?c.rect.height*m.scaleY/f.rect.height:1},b={x:m.x-_.x,y:m.y-_.y,...E},w=a({...g,active:c,dragOverlay:f,transform:{initial:m,final:b}}),[P]=w,D=w[w.length-1];if(JSON.stringify(P)===JSON.stringify(D))return;const M=r==null?void 0:r({active:c,dragOverlay:f,...g}),U=f.node.animate(w,{duration:e,easing:t,fill:"forwards"});return new Promise(G=>{U.onfinish=()=>{M==null||M(),G()}})}}let HS=0;function Mk(i){return x.useMemo(()=>{if(i!=null)return HS++,HS},[i])}const Ok=Ot.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:a,transition:l,modifiers:c,wrapperElement:f="div",className:m,zIndex:g=999}=i;const{activatorEvent:_,active:E,activeNodeRect:b,containerNodeRect:w,draggableNodes:P,droppableContainers:D,dragOverlay:M,over:U,measuringConfiguration:G,scrollableAncestors:H,scrollableAncestorRects:re,windowRect:se}=Q1(),W=x.useContext(ym),R=Mk(E==null?void 0:E.id),S=Y1(c,{activatorEvent:_,active:E,activeNodeRect:b,containerNodeRect:w,draggingNodeRect:M.rect,over:U,overlayNodeRect:M.rect,scrollableAncestors:H,scrollableAncestorRects:re,transform:W,windowRect:se}),N=Y_(b),O=xk({config:r,draggableNodes:P,droppableContainers:D,measuringConfiguration:G}),k=N?M.setRef:void 0;return Ot.createElement(Sk,null,Ot.createElement(Tk,{animation:O},E&&R?Ot.createElement(Ik,{key:R,id:E.id,ref:k,as:f,activatorEvent:_,adjustScale:e,className:m,transition:l,rect:N,style:{zIndex:g,...a},transform:S},t):null))});function Q_(i,e,t){const r=i.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function Vk(i,e){return i.reduce((t,r,a)=>{const l=e.get(r);return l&&(t[a]=l),t},Array(i.length))}function Bf(i){return i!==null&&i>=0}function Pk(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function kk(i){return typeof i=="boolean"?{draggable:i,droppable:i}:i}const X1=i=>{let{rects:e,activeIndex:t,overIndex:r,index:a}=i;const l=Q_(e,r,t),c=e[a],f=l[a];return!f||!c?null:{x:f.left-c.left,y:f.top-c.top,scaleX:f.width/c.width,scaleY:f.height/c.height}},qf={scaleX:1,scaleY:1},Lk=i=>{var e;let{activeIndex:t,activeNodeRect:r,index:a,rects:l,overIndex:c}=i;const f=(e=l[t])!=null?e:r;if(!f)return null;if(a===t){const g=l[c];return g?{x:0,y:t<c?g.top+g.height-(f.top+f.height):g.top-f.top,...qf}:null}const m=Uk(l,a,t);return a>t&&a<=c?{x:0,y:-f.height-m,...qf}:a<t&&a>=c?{x:0,y:f.height+m,...qf}:{x:0,y:0,...qf}};function Uk(i,e,t){const r=i[e],a=i[e-1],l=i[e+1];return r?t<e?a?r.top-(a.top+a.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const J1="Sortable",W1=Ot.createContext({activeIndex:-1,containerId:J1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:X1,disabled:{draggable:!1,droppable:!1}});function zk(i){let{children:e,id:t,items:r,strategy:a=X1,disabled:l=!1}=i;const{active:c,dragOverlay:f,droppableRects:m,over:g,measureDroppableContainers:_}=Q1(),E=lh(J1,t),b=f.rect!==null,w=x.useMemo(()=>r.map(W=>typeof W=="object"&&"id"in W?W.id:W),[r]),P=c!=null,D=c?w.indexOf(c.id):-1,M=g?w.indexOf(g.id):-1,U=x.useRef(w),G=!Pk(w,U.current),H=M!==-1&&D===-1||G,re=kk(l);Xi(()=>{G&&P&&_(w)},[G,w,P,_]),x.useEffect(()=>{U.current=w},[w]);const se=x.useMemo(()=>({activeIndex:D,containerId:E,disabled:re,disableTransforms:H,items:w,overIndex:M,useDragOverlay:b,sortedRects:Vk(w,m),strategy:a}),[D,E,re.draggable,re.droppable,H,w,M,m,b,a]);return Ot.createElement(W1.Provider,{value:se},e)}const jk=i=>{let{id:e,items:t,activeIndex:r,overIndex:a}=i;return Q_(t,r,a).indexOf(e)},Bk=i=>{let{containerId:e,isSorting:t,wasDragging:r,index:a,items:l,newIndex:c,previousItems:f,previousContainerId:m,transition:g}=i;return!g||!r||f!==l&&a===c?!1:t?!0:c!==a&&e===m},qk={duration:200,easing:"ease"},Z1="transform",Fk=ra.Transition.toString({property:Z1,duration:0,easing:"linear"}),Hk={roleDescription:"sortable"};function Gk(i){let{disabled:e,index:t,node:r,rect:a}=i;const[l,c]=x.useState(null),f=x.useRef(t);return Xi(()=>{if(!e&&t!==f.current&&r.current){const m=a.current;if(m){const g=Jl(r.current,{ignoreTransform:!0}),_={x:m.left-g.left,y:m.top-g.top,scaleX:m.width/g.width,scaleY:m.height/g.height};(_.x||_.y)&&c(_)}}t!==f.current&&(f.current=t)},[e,t,r,a]),x.useEffect(()=>{l&&c(null)},[l]),l}function Kk(i){let{animateLayoutChanges:e=Bk,attributes:t,disabled:r,data:a,getNewIndex:l=jk,id:c,strategy:f,resizeObserverConfig:m,transition:g=qk}=i;const{items:_,containerId:E,activeIndex:b,disabled:w,disableTransforms:P,sortedRects:D,overIndex:M,useDragOverlay:U,strategy:G}=x.useContext(W1),H=Yk(r,w),re=_.indexOf(c),se=x.useMemo(()=>({sortable:{containerId:E,index:re,items:_},...a}),[E,a,re,_]),W=x.useMemo(()=>_.slice(_.indexOf(c)),[_,c]),{rect:R,node:S,isOver:N,setNodeRef:O}=$1({id:c,data:se,disabled:H.droppable,resizeObserverConfig:{updateMeasurementsFor:W,...m}}),{active:k,activatorEvent:j,activeNodeRect:V,attributes:we,setNodeRef:Me,listeners:X,isDragging:le,over:_e,setActivatorNodeRef:De,transform:Ue}=_k({id:c,data:se,attributes:{...Hk,...t},disabled:H.draggable}),z=n4(O,Me),te=!!k,$=te&&!P&&Bf(b)&&Bf(M),ce=!U&&le,ge=ce&&$?Ue:null,Oe=$?ge??(f??G)({rects:D,activeNodeRect:V,activeIndex:b,overIndex:M,index:re}):null,Ge=Bf(b)&&Bf(M)?l({id:c,items:_,activeIndex:b,overIndex:M}):re,Ve=k==null?void 0:k.id,ze=x.useRef({activeId:Ve,items:_,newIndex:Ge,containerId:E}),me=_!==ze.current.items,Ie=e({active:k,containerId:E,isDragging:le,isSorting:te,id:c,index:re,items:_,newIndex:ze.current.newIndex,previousItems:ze.current.items,previousContainerId:ze.current.containerId,transition:g,wasDragging:ze.current.activeId!=null}),ue=Gk({disabled:!Ie,index:re,node:S,rect:R});return x.useEffect(()=>{te&&ze.current.newIndex!==Ge&&(ze.current.newIndex=Ge),E!==ze.current.containerId&&(ze.current.containerId=E),_!==ze.current.items&&(ze.current.items=_)},[te,Ge,E,_]),x.useEffect(()=>{if(Ve===ze.current.activeId)return;if(Ve!=null&&ze.current.activeId==null){ze.current.activeId=Ve;return}const xe=setTimeout(()=>{ze.current.activeId=Ve},50);return()=>clearTimeout(xe)},[Ve]),{active:k,activeIndex:b,attributes:we,data:se,rect:R,index:re,newIndex:Ge,items:_,isOver:N,isSorting:te,isDragging:le,listeners:X,node:S,overIndex:M,over:_e,setNodeRef:z,setActivatorNodeRef:De,setDroppableNodeRef:O,setDraggableNodeRef:Me,transform:ue??Oe,transition:Se()};function Se(){if(ue||me&&ze.current.newIndex===re)return Fk;if(!(ce&&!pm(j)||!g)&&(te||Ie))return ra.Transition.toString({...g,property:Z1})}}function Yk(i,e){var t,r;return typeof i=="boolean"?{draggable:i,droppable:!1}:{draggable:(t=i==null?void 0:i.draggable)!=null?t:e.draggable,droppable:(r=i==null?void 0:i.droppable)!=null?r:e.droppable}}ot.Down,ot.Right,ot.Up,ot.Left;const Qk=["","","","","","","","","","","","","","","",""];function $k({value:i,onChange:e}){const[t,r]=x.useState(!1),a=x.useRef(null);return x.useEffect(()=>{if(!t)return;const l=c=>{a.current&&!a.current.contains(c.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[t]),I.jsxs("div",{className:"pipeline-emoji-picker",ref:a,children:[I.jsx("button",{className:"pipeline-emoji-btn",onClick:()=>r(!t),children:i||""}),t&&I.jsx("div",{className:"pipeline-emoji-grid",children:Qk.map(l=>I.jsx("button",{className:"pipeline-emoji-option",onClick:()=>{e(l),r(!1)},children:l},l))})]})}function Cy({value:i,onChange:e,className:t,placeholder:r,singleClick:a}){const[l,c]=x.useState(!1),[f,m]=x.useState(i),g=x.useRef(null);x.useEffect(()=>{l&&g.current&&g.current.focus()},[l]);const _=()=>{c(!1),f.trim()!==i&&e(f.trim())},E=w=>{w.stopPropagation(),m(i),c(!0)};if(l)return I.jsx("input",{ref:g,className:`pipeline-inline-input ${t||""}`,value:f,placeholder:r,onClick:w=>w.stopPropagation(),onChange:w=>m(w.target.value),onBlur:_,onKeyDown:w=>{w.key==="Enter"&&_(),w.key==="Escape"&&(m(i),c(!1))}});const b=a?{onClick:E}:{onDoubleClick:E};return I.jsx("span",{className:`pipeline-inline-text ${t||""} ${i?"":"pipeline-placeholder"}`,...b,children:i||r})}function Xk({listeners:i,attributes:e}){return I.jsx("button",{className:"pipeline-item-drag-handle",...i,...e,children:""})}function Jk({item:i,sectionId:e,onUpdate:t,onDelete:r}){const{attributes:a,listeners:l,setNodeRef:c,transform:f,transition:m,isDragging:g}=Kk({id:i.id}),_={transform:ra.Transform.toString(f),transition:m};return I.jsxs("div",{ref:c,style:_,className:`pipeline-item${g?" dragging":""}`,children:[I.jsx(Xk,{listeners:l,attributes:a}),I.jsx($k,{value:i.icon,onChange:E=>t(e,i.id,{icon:E})}),I.jsxs("div",{className:"pipeline-item-content",children:[I.jsx(Cy,{value:i.title,onChange:E=>t(e,i.id,{title:E}),className:"pipeline-item-title",placeholder:"Item title"}),I.jsx(Cy,{value:i.description,onChange:E=>t(e,i.id,{description:E}),className:"pipeline-item-desc",placeholder:"Description"})]}),I.jsx("button",{className:"pipeline-item-delete",onClick:()=>r(e,i.id),children:""})]})}function Wk({item:i}){return I.jsxs("div",{className:"pipeline-item pipeline-item-overlay",children:[I.jsx("span",{className:"pipeline-item-drag-handle",children:""}),I.jsx("div",{className:"pipeline-emoji-picker",children:I.jsx("button",{className:"pipeline-emoji-btn",children:i.icon||""})}),I.jsxs("div",{className:"pipeline-item-content",children:[I.jsx("span",{className:"pipeline-inline-text pipeline-item-title",children:i.title||"Item title"}),I.jsx("span",{className:"pipeline-inline-text pipeline-item-desc",children:i.description||"Description"})]})]})}function Zk({sectionId:i,children:e}){const{setNodeRef:t}=$1({id:`section-${i}`});return I.jsx("div",{ref:t,children:e})}function e6({sections:i,addSection:e,updateSection:t,deleteSection:r,toggleCollapse:a,addItem:l,updateItem:c,deleteItem:f,moveItem:m,reorderItems:g}){var se;const[_,E]=x.useState(null),[b,w]=x.useState(null),P=g4(MS(K_,{activationConstraint:{distance:5}}),MS(q1,{activationConstraint:{delay:200,tolerance:5}})),D=x.useMemo(()=>{const W={};for(const R of i)for(const S of R.items||[])W[S.id]={item:S,sectionId:R.id};return W},[i]),M=x.useCallback(W=>{var R;return typeof W=="string"&&W.startsWith("section-")?W.replace("section-",""):((R=D[W])==null?void 0:R.sectionId)||null},[D]),U=x.useCallback(W=>{w(W.active.id)},[]),G=x.useCallback(W=>{const{active:R,over:S}=W;if(!S)return;const N=M(R.id),O=M(S.id);if(!N||!O||N===O)return;const k=i.find(le=>le.id===N),j=i.find(le=>le.id===O);if(!k||!j)return;const V=k.items||[],we=j.items||[];V.findIndex(le=>le.id===R.id);const Me=we.findIndex(le=>le.id===S.id),X=Me>=0?Me:we.length;m(N,O,R.id,X)},[M,i,m]),H=x.useCallback(W=>{const{active:R,over:S}=W;if(w(null),!S)return;const N=M(R.id),O=M(S.id);if(!(!N||!O)&&N===O){const k=i.find(Me=>Me.id===N);if(!k)return;const j=k.items||[],V=j.findIndex(Me=>Me.id===R.id),we=j.findIndex(Me=>Me.id===S.id);V!==we&&V>=0&&we>=0&&g(N,Q_(j,V,we))}},[M,i,g]),re=b?(se=D[b])==null?void 0:se.item:null;return I.jsxs(pk,{sensors:P,collisionDetection:b4,onDragStart:U,onDragOver:G,onDragEnd:H,children:[I.jsxs("div",{className:"pipeline-sections",children:[i.map(W=>{const R=W.items||[],S=R.map(N=>N.id);return I.jsxs("div",{className:"pipeline-section",children:[I.jsxs("div",{className:"pipeline-section-header",onClick:()=>a(W.id),children:[I.jsx("span",{className:"pipeline-collapse-btn",children:W.collapsed?"":""}),I.jsx(Cy,{value:W.title,onChange:N=>t(W.id,{title:N}),className:"pipeline-section-title",placeholder:"Section title",singleClick:!0}),I.jsx("button",{className:"pipeline-section-delete",onClick:N=>{N.stopPropagation(),E(W.id)},children:""})]}),!W.collapsed&&I.jsx(Zk,{sectionId:W.id,children:I.jsx(zk,{items:S,strategy:Lk,children:I.jsxs("div",{className:"pipeline-section-body",children:[R.map(N=>I.jsx(Jk,{item:N,sectionId:W.id,onUpdate:c,onDelete:f},N.id)),I.jsx("button",{className:"pipeline-add-item",onClick:()=>l(W.id,{}),children:"+ Add"})]})})})]},W.id)}),I.jsx("button",{className:"pipeline-add-section",onClick:()=>e("New Section"),children:"+ New Section"}),_&&I.jsx(R1,{title:"Delete Section",message:"This will delete the section and all its items.",onConfirm:()=>{r(_),E(null)},onClose:()=>E(null)})]}),I.jsx(Ok,{children:re?I.jsx(Wk,{item:re}):null})]})}const Dy="prayerTimesCache";function eR(i,e,t){return`${i}|${e}|${t}`}function Bg(i,e,t){try{const r=localStorage.getItem(Dy);return r&&JSON.parse(r)[eR(i,e,t)]||null}catch{return null}}function t6(i,e,t,r){try{const a=localStorage.getItem(Dy),l=a?JSON.parse(a):{};l[eR(i,e,t)]=r;const c=Object.keys(l);c.length>30&&(c.sort(),delete l[c[0]]),localStorage.setItem(Dy,JSON.stringify(l))}catch{}}function n6({date:i,city:e="Lyon",country:t="France",lat:r,lng:a}={}){const l=i||Ac(),[c,f]=x.useState(()=>Bg(l,e,t)),[m,g]=x.useState(!Bg(l,e,t)),[_,E]=x.useState(null);return x.useEffect(()=>{const b=Bg(l,e,t);if(b){f(b),g(!1);return}let w=!1;g(!0);async function P(){try{const D=vP(l);let M;if(r!=null&&a!=null)M=`https://api.aladhan.com/v1/timings/${D}?latitude=${r}&longitude=${a}`;else{const H=`${e},${t}`;M=`https://api.aladhan.com/v1/timingsByAddress/${D}?address=${encodeURIComponent(H)}`}const G=await(await fetch(M)).json();if(!w&&G.data){const H=G.data.timings,re={Fajr:H.Fajr,Dhuhr:H.Dhuhr,Asr:H.Asr,Maghrib:H.Maghrib,Isha:H.Isha};f(re),t6(l,e,t,re)}}catch(D){w||E(D.message)}finally{w||g(!1)}}return P(),()=>{w=!0}},[l,e,t,r,a]),{times:c,loading:m,error:_}}const i6=["pre-fajr","fajr-dhuhr","dhuhr-asr","asr-maghrib","maghrib-isha","post-isha"],r6={"pre-fajr":"Pre-Fajr","fajr-dhuhr":"Fajr  Dhuhr","dhuhr-asr":"Dhuhr  Asr","asr-maghrib":"Asr  Maghrib","maghrib-isha":"Maghrib  Isha","post-isha":"Post-Isha"};function rc(i){const[e,t]=i.split(":").map(Number);return e*60+t}function s6(i){return i=Math.round(i),`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function a6(i){if(!i)return null;const e=rc(i.Fajr),t=rc(i.Dhuhr),r=rc(i.Asr),a=rc(i.Maghrib),l=rc(i.Isha);return{"pre-fajr":{start:"00:00",end:i.Fajr,startMin:0,endMin:e},"fajr-dhuhr":{start:i.Fajr,end:i.Dhuhr,startMin:e,endMin:t},"dhuhr-asr":{start:i.Dhuhr,end:i.Asr,startMin:t,endMin:r},"asr-maghrib":{start:i.Asr,end:i.Maghrib,startMin:r,endMin:a},"maghrib-isha":{start:i.Maghrib,end:i.Isha,startMin:a,endMin:l},"post-isha":{start:i.Isha,end:"23:59",startMin:l,endMin:1439}}}function o6(i,e){if(!i.segment||!e||!e[i.segment])return i.time||"08:00";const r=e[i.segment].startMin+(i.offsetMinutes||0);return s6(Math.max(0,Math.min(1435,r)))}const sc=25;function l6(i){return i?[{id:"prayer-fajr",time:i.Fajr,activity:"Fajr",type:"prayer",icon:"",duration:sc,isPrayer:!0},{id:"prayer-dhuhr",time:i.Dhuhr,activity:"Dhuhr",type:"prayer",icon:"",duration:sc,isPrayer:!0},{id:"prayer-asr",time:i.Asr,activity:"Asr",type:"prayer",icon:"",duration:sc,isPrayer:!0},{id:"prayer-maghrib",time:i.Maghrib,activity:"Maghrib",type:"prayer",icon:"",duration:sc,isPrayer:!0},{id:"prayer-isha",time:i.Isha,activity:"Isha",type:"prayer",icon:"",duration:sc,isPrayer:!0}]:[]}const u6=60;function c6(i){const[e,t]=i.split(":").map(Number);return e*60+t}function h6(i){return i=Math.round(i),`${String(Math.floor(i/60)%24).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`}function f6(i,e=5){return Math.max(0,Math.min(1435,Math.round(i/e)*e))}function d6(i,{hourHeight:e=0,minBlockH:t=0}={}){if(!i.length)return[];const r=e>0&&t>0?t/e*60:0,a=i.map(E=>{const b=c6(E.time),w=E.duration||u6,P=r?b+Math.max(w,r):b+w;return{...E,startMin:b,endMin:b+w,visualEnd:P}});a.sort((E,b)=>E.startMin-b.startMin||b.endMin-b.startMin-(E.endMin-E.startMin));const l=[],c=[];for(const E of a){let b=-1;for(let w=0;w<l.length;w++)if(l[w]<=E.startMin){b=w;break}b===-1&&(b=l.length,l.push(0)),l[b]=E.visualEnd,c.push({...E,col:b})}const f=[];let m=[],g=0;for(const E of c)m.length===0||E.startMin<g?(m.push(E),g=Math.max(g,E.visualEnd)):(f.push(m),m=[E],g=E.visualEnd);m.length&&f.push(m);const _=[];for(const E of f){const b=Math.max(...E.map(w=>w.col))+1;for(const w of E)_.push({...w,totalCols:b})}return _}const vr=60,GS=24,KS=60,m6=Array.from({length:24},(i,e)=>e),p6=["rgba(34, 139, 34, 0.03)","rgba(34, 139, 34, 0.06)"],YS={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},g6=["M","T","W","T","F","S","S"];function y6({date:i,plan:e,location:t,onOpenLocation:r,onUpdateBlocks:a,onMonth:l,onSelectDate:c,customTypes:f=[],customTypeColors:m={},onAddCustomType:g,onRemoveCustomType:_,pipelineSections:E=[],onAddSection:b,onUpdateSection:w,onDeleteSection:P,onToggleCollapse:D,onAddItem:M,onUpdateItem:U,onDeleteItem:G,onMoveItem:H,onReorderItems:re}){var me,Ie;const[se,W]=x.useState(null),[R,S]=x.useState(null),N=x.useRef(null),O=SS(z_(i)),k=i===Ac(),j=SS(new Date),{times:V}=n6({date:i,city:t==null?void 0:t.city,country:t==null?void 0:t.country,lat:t==null?void 0:t.lat,lng:t==null?void 0:t.lng}),we=x.useMemo(()=>a6(V),[V]),Me=x.useMemo(()=>l6(V),[V]),X=((Ie=(me=e==null?void 0:e.routine)==null?void 0:me[O])==null?void 0:Ie.blocks)||[],le=x.useMemo(()=>X.map(ue=>ue.segment&&we?{...ue,time:o6(ue,we)}:ue),[X,we]),{userBlocks:_e,positionedPrayers:De}=x.useMemo(()=>{const ue=le.map(Ut=>({...Ut,duration:Ut.duration||KS})),Se=[...Me,...ue],xe=d6(Se,{hourHeight:vr,minBlockH:GS}),Pe=[],ut=[];for(const Ut of xe){const nt={...Ut,top:Ut.startMin/60*vr,height:Math.max(Ut.duration/60*vr,GS)};Ut.isPrayer?ut.push(nt):Pe.push(nt)}return{userBlocks:Pe,positionedPrayers:ut}},[le,Me]),Ue=x.useMemo(()=>we?i6.map((ue,Se)=>{const xe=we[ue],Pe=xe.startMin/60*vr,ut=(xe.endMin-xe.startMin)/60*vr;return{id:ue,top:Pe,height:ut,color:p6[Se%2],label:r6[ue]}}):[],[we]),z=ue=>{if(!e||ue.target.closest(".timeline-block")||ue.target.closest(".segment-label"))return;const Se=N.current.getBoundingClientRect(),xe=ue.clientY-Se.top,Pe=f6(xe/vr*60),ut=h6(Pe),Ut=crypto.randomUUID(),nt={id:Ut,time:ut,activity:"(New)",type:"neutral",icon:"",duration:KS,segment:null,offsetMinutes:0,tasks:[]};a(O,[...X,nt]),S(Ut)},te=(ue,Se)=>{const xe=X.map(Pe=>Pe.id===ue?{...Pe,time:Se,segment:null,offsetMinutes:0}:Pe);a(O,xe)},$=(ue,Se,xe)=>{const Pe=X.map(ut=>ut.id===ue?{...ut,time:Se,duration:xe,segment:null,offsetMinutes:0}:ut);a(O,Pe)},ce=ue=>{let Se=X.map(xe=>xe.id===ue.id?ue:xe);X.find(xe=>xe.id===ue.id)||Se.push(ue),a(O,Se),W(null),S(null)},ge=ue=>{a(O,X.filter(Se=>Se.id!==ue)),W(null),S(null)},ye=(ue,Se)=>{const xe=X.map(Pe=>Pe.id!==ue?Pe:{...Pe,tasks:(Pe.tasks||[]).map(ut=>ut.id===Se?{...ut,done:!ut.done}:ut)});a(O,xe)},Oe=()=>{R&&(a(O,X.filter(ue=>ue.id!==R)),S(null)),W(null)},Ge=new Date,ze=(Ge.getHours()*60+Ge.getMinutes())/60*vr;return I.jsxs("div",{className:"daily-view",children:[I.jsxs("div",{className:"daily-header",children:[I.jsx("button",{className:"daily-back",onClick:l,children:" Month"}),I.jsxs("div",{className:"daily-date-info",children:[I.jsx("span",{className:"daily-day-name",children:YS[O]}),I.jsxs("span",{className:"daily-date-str",children:[Nd(i),k?" (today)":""]})]}),e&&I.jsx("span",{className:"daily-plan-badge",style:{borderColor:e.color,color:e.color},children:e.label})]}),I.jsx("div",{className:"day-selector",children:U_.map((ue,Se)=>I.jsx("button",{className:`day-btn${ue===O?" active":""}${ue===j?" today":""}`,onClick:()=>c(EP(i,ue)),children:g6[Se]},ue))}),V&&I.jsxs("div",{className:"prayer-banner",children:[I.jsxs("div",{className:"prayer-banner-title",onClick:r,style:{cursor:"pointer"},children:["PRAYER TIMES",t!=null&&t.city?`  ${t.city.toUpperCase()}`:""]}),I.jsx("div",{className:"prayer-times-row",children:Object.entries(V).map(([ue,Se])=>I.jsxs("div",{className:"prayer-time-item",children:[I.jsx("span",{className:"prayer-name",children:ue}),I.jsx("span",{className:"prayer-time",children:Se})]},ue))})]}),!e&&I.jsxs("div",{className:"daily-empty",children:["No plan covers this date. Create a plan that includes ",Nd(i),"."]}),e&&X.length===0&&I.jsxs("div",{className:"daily-hint",children:["Tap the timeline to add your first block for ",YS[O],"."]}),I.jsx("div",{className:"timeline-scroll",children:I.jsxs("div",{className:"timeline",ref:N,style:{height:24*vr},onClick:z,children:[Ue.map(ue=>I.jsx("div",{className:"segment-band",style:{top:ue.top,height:ue.height,background:ue.color},children:I.jsx("span",{className:"segment-label",children:ue.label})},ue.id)),m6.map(ue=>I.jsxs("div",{className:"hour-row",style:{top:ue*vr,height:vr},children:[I.jsx("span",{className:"hour-label",children:yP(ue*60)}),I.jsx("div",{className:"hour-line"})]},ue)),k&&I.jsx("div",{className:"now-line",style:{top:ze},children:I.jsx("div",{className:"now-dot"})}),De.map(ue=>I.jsx(DS,{block:ue,top:ue.top,height:ue.height,col:ue.col,totalCols:ue.totalCols,isPrayer:!0,onEdit:()=>{},onDelete:()=>{},onTimeChange:()=>{},onResize:()=>{}},ue.id)),_e.map(ue=>I.jsx(DS,{block:ue,top:ue.top,height:ue.height,col:ue.col,totalCols:ue.totalCols,isNew:ue.id===R,extraTypeColors:m,onEdit:Se=>{S(null),W(Se)},onDelete:ge,onTimeChange:te,onResize:$,onToggleTask:ye},ue.id))]})}),I.jsx(e6,{sections:E,addSection:b,updateSection:w,deleteSection:P,toggleCollapse:D,addItem:M,updateItem:U,deleteItem:G,moveItem:H,reorderItems:re}),se&&I.jsx(t4,{block:se,segments:we,customTypes:f,customTypeColors:m,onAddCustomType:g,onRemoveCustomType:_,onSave:ce,onDelete:ge,onClose:Oe},se.id+se.time+(se.duration||0))]})}function _6(i){const e=JSON.parse(i);if(Array.isArray(e))return{plans:e.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:[],pipelines:[]};if(e&&Array.isArray(e.plans))return{plans:e.plans.map(t=>({...t,id:t.id||crypto.randomUUID()})),customTypes:Array.isArray(e.customTypes)?e.customTypes:[],pipelines:Array.isArray(e.pipelines)?e.pipelines:[]};throw new Error("Unrecognized format")}function v6(i,e,t,r=[]){const a=new Set(e.map(f=>f.id)),l=new Set([...E1,...t.map(f=>f.key)]),c=new Set(r.map(f=>f.id));return{newPlans:i.plans.filter(f=>!a.has(f.id)),skippedPlans:i.plans.filter(f=>a.has(f.id)),newTypes:i.customTypes.filter(f=>!l.has(f.key)),skippedTypes:i.customTypes.filter(f=>l.has(f.key)),newPipelines:(i.pipelines||[]).filter(f=>!c.has(f.id)),skippedPipelines:(i.pipelines||[]).filter(f=>c.has(f.id))}}function E6({file:i,existingPlans:e,existingCustomTypes:t,existingPipelines:r=[],onConfirm:a,onClose:l}){const[c,f]=x.useState(null),[m,g]=x.useState(null),[_,E]=x.useState(null),[b,w]=x.useState(new Set),[P,D]=x.useState(new Set),[M,U]=x.useState(new Set);x.useState(()=>{const S=new FileReader;S.onload=N=>{try{const O=_6(N.target.result);if(O.plans.length===0&&O.customTypes.length===0){f("File contains no data to import.");return}const k=v6(O,e,t,r);g(O),E(k),w(new Set(k.newPlans.map(j=>j.id))),D(new Set(k.newTypes.map(j=>j.key))),U(new Set(k.newPipelines.map(j=>j.id)))}catch(O){f("Invalid file: "+O.message)}},S.readAsText(i)});const G=x.useCallback(S=>{w(N=>{const O=new Set(N);return O.has(S)?O.delete(S):O.add(S),O})},[]),H=x.useCallback(S=>{D(N=>{const O=new Set(N);return O.has(S)?O.delete(S):O.add(S),O})},[]),re=x.useCallback(S=>{U(N=>{const O=new Set(N);return O.has(S)?O.delete(S):O.add(S),O})},[]),se=x.useCallback(()=>{if(!_)return;const S=_.newPlans.filter(k=>b.has(k.id)),N=_.newTypes.filter(k=>P.has(k.key)),O=_.newPipelines.filter(k=>M.has(k.id));a(S,N,O)},[_,b,P,M,a]),W=b.size+P.size+M.size,R=_&&_.newPlans.length===0&&_.newTypes.length===0&&_.newPipelines.length===0;return I.jsx("div",{className:"modal-overlay",onClick:l,children:I.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Import Data"}),c&&I.jsxs(I.Fragment,{children:[I.jsx("p",{style:{color:"#ef4444",fontSize:13,margin:"0 0 16px"},children:c}),I.jsx("div",{className:"modal-actions",children:I.jsx("button",{className:"btn-secondary",onClick:l,children:"Close"})})]}),!c&&!_&&I.jsx("p",{style:{color:"#94a3b8",fontSize:13},children:"Reading file..."}),_&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),_.newPlans.length>0&&I.jsx("div",{className:"import-items",children:_.newPlans.map(S=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:b.has(S.id),onChange:()=>G(S.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:S.label}),S.startDate&&I.jsxs("span",{className:"import-item-date",children:[S.startDate,"  ",S.endDate]})]},S.id))}),_.skippedPlans.length>0&&I.jsx("div",{className:"import-items",children:_.skippedPlans.map(S=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:S.label})]},S.id))}),m.plans.length===0&&I.jsx("p",{className:"import-empty",children:"No plans in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),_.newTypes.length>0&&I.jsx("div",{className:"import-items",children:_.newTypes.map(S=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:P.has(S.key),onChange:()=>H(S.key)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:S.name})]},S.key))}),_.skippedTypes.length>0&&I.jsx("div",{className:"import-items",children:_.skippedTypes.map(S=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:S.name||S.key})]},S.key))}),m.customTypes.length===0&&I.jsx("p",{className:"import-empty",children:"No custom types in file"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),_.newPipelines.length>0&&I.jsx("div",{className:"import-items",children:_.newPipelines.map(S=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:M.has(S.id),onChange:()=>re(S.id)}),I.jsx("span",{className:"import-badge import-badge--new",children:"new"}),I.jsx("span",{className:"import-item-label",children:S.title}),I.jsxs("span",{className:"import-item-date",children:[(S.items||[]).length," items"]})]},S.id))}),_.skippedPipelines.length>0&&I.jsx("div",{className:"import-items",children:_.skippedPipelines.map(S=>I.jsxs("div",{className:"import-item import-item--disabled",children:[I.jsx("span",{className:"import-badge import-badge--skip",children:"exists"}),I.jsx("span",{className:"import-item-label",children:S.title})]},S.id))}),(m.pipelines||[]).length===0&&I.jsx("p",{className:"import-empty",children:"No pipeline sections in file"})]}),R&&I.jsx("p",{style:{color:"#f59e0b",fontSize:13,marginTop:8},children:"Everything already exists. Nothing to import."}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:l,children:"Cancel"}),!R&&I.jsxs("button",{className:"btn-primary",onClick:se,disabled:W===0,children:["Import",W>0?` ${W} item${W!==1?"s":""}`:""]})]})]})]})})}function T6({plans:i,customTypes:e,pipelineSections:t=[],onClose:r}){const[a,l]=x.useState(()=>new Set(i.map(D=>D.id))),[c,f]=x.useState(()=>new Set(e.map(D=>D.key))),[m,g]=x.useState(()=>new Set(t.map(D=>D.id))),_=x.useCallback(D=>{l(M=>{const U=new Set(M);return U.has(D)?U.delete(D):U.add(D),U})},[]),E=x.useCallback(D=>{f(M=>{const U=new Set(M);return U.has(D)?U.delete(D):U.add(D),U})},[]),b=x.useCallback(D=>{g(M=>{const U=new Set(M);return U.has(D)?U.delete(D):U.add(D),U})},[]),w=a.size+c.size+m.size,P=x.useCallback(()=>{const D=i.filter(W=>a.has(W.id)),M=e.filter(W=>c.has(W.key)).map(W=>({key:W.key,name:W.name})),U=t.filter(W=>m.has(W.id)),G={version:2,plans:D,customTypes:M,pipelines:U},H=new Blob([JSON.stringify(G,null,2)],{type:"application/json"}),re=URL.createObjectURL(H),se=document.createElement("a");se.href=re,se.download="entrypoint-v2-plans.json",se.click(),URL.revokeObjectURL(re),r()},[i,e,t,a,c,m,r]);return I.jsx("div",{className:"modal-overlay",onClick:r,children:I.jsxs("div",{className:"modal",onClick:D=>D.stopPropagation(),style:{maxWidth:440},children:[I.jsx("h3",{className:"modal-title",children:"Export Data"}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Plans"}),i.length>0?I.jsx("div",{className:"import-items",children:i.map(D=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:a.has(D.id),onChange:()=>_(D.id)}),I.jsx("span",{className:"import-item-label",children:D.label}),D.startDate&&I.jsxs("span",{className:"import-item-date",children:[D.startDate,"  ",D.endDate]})]},D.id))}):I.jsx("p",{className:"import-empty",children:"No plans to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Custom Types"}),e.length>0?I.jsx("div",{className:"import-items",children:e.map(D=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:c.has(D.key),onChange:()=>E(D.key)}),I.jsx("span",{className:"import-item-label",children:D.name})]},D.key))}):I.jsx("p",{className:"import-empty",children:"No custom types to export"})]}),I.jsxs("div",{className:"import-section",children:[I.jsx("div",{className:"import-section-title",children:"Pipeline Sections"}),t.length>0?I.jsx("div",{className:"import-items",children:t.map(D=>I.jsxs("label",{className:"import-item",style:{cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",className:"import-check",checked:m.has(D.id),onChange:()=>b(D.id)}),I.jsx("span",{className:"import-item-label",children:D.title}),I.jsxs("span",{className:"import-item-date",children:[(D.items||[]).length," items"]})]},D.id))}):I.jsx("p",{className:"import-empty",children:"No pipeline sections to export"})]}),I.jsxs("div",{className:"modal-actions",style:{marginTop:16},children:[I.jsx("button",{className:"btn-secondary",onClick:r,children:"Cancel"}),I.jsxs("button",{className:"btn-primary",onClick:P,disabled:w===0,children:["Export",w>0?` ${w} item${w!==1?"s":""}`:""]})]})]})})}function b6({onSave:i,onClose:e}){const[t,r]=x.useState(""),[a,l]=x.useState("");x.useEffect(()=>{const m=g=>{g.key==="Escape"&&e&&e()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[e]);const c=()=>{const m=t.trim(),g=a.trim();!m||!g||i({city:m,country:g})},f=m=>{m.key==="Enter"&&c()};return I.jsx("div",{className:"modal-overlay",onClick:e||void 0,children:I.jsxs("div",{className:"modal",onClick:m=>m.stopPropagation(),style:{maxWidth:360},children:[I.jsx("h3",{className:"modal-title",children:"Set Your Location"}),I.jsx("p",{style:{color:"#94a3b8",fontSize:13,margin:"0 0 16px",lineHeight:1.5},children:"Used to calculate prayer times."}),I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[I.jsx("input",{className:"modal-input",placeholder:"City (e.g. Lyon)",value:t,onChange:m=>r(m.target.value),onKeyDown:f,autoFocus:!0}),I.jsx("input",{className:"modal-input",placeholder:"Country (e.g. France)",value:a,onChange:m=>l(m.target.value),onKeyDown:f})]}),I.jsxs("div",{className:"modal-actions",children:[e&&I.jsx("button",{className:"btn-secondary",onClick:e,children:"Cancel"}),I.jsx("button",{className:"btn-primary",onClick:c,disabled:!t.trim()||!a.trim(),children:"Save"})]})]})})}function QS(){const i=L_(),e=(i==null?void 0:i.user)||null,t=(i==null?void 0:i.logout)||null,{plans:r,loading:a,activePlan:l,activePlanId:c,setActivePlanId:f,createPlan:m,updatePlan:g,deletePlan:_,updateRoutineBlocks:E,getPlanForDate:b,mergePlans:w}=OP((e==null?void 0:e.uid)||null),{selectedDate:P,setSelectedDate:D,today:M,viewYear:U,viewMonth:G,prevMonth:H,nextMonth:re,setViewYearMonth:se}=zP(),{customTypes:W,customTypeColors:R,addCustomType:S,removeCustomType:N,mergeCustomTypes:O}=GP(),{location:k,setLocation:j,hasLocation:V,geoFailed:we}=QP(),[Me,X]=x.useState(!1),{sections:le,addSection:_e,updateSection:De,deleteSection:Ue,reorderSections:z,toggleCollapse:te,addItem:$,updateItem:ce,deleteItem:ge,mergeSections:ye}=UP((e==null?void 0:e.uid)||null),Oe=x.useRef(null),[Ge,Ve]=x.useState(null),[ze,me]=x.useState(!1),[Ie,ue]=x.useState("daily"),[Se,xe]=x.useState(null),[Pe,ut]=x.useState(null),[Ut,nt]=x.useState(!1),ct=x.useCallback((Be,bt,an)=>{Be.length>0&&w(Be),bt.length>0&&O(bt),an&&an.length>0&&ye(an),ut(null)},[w,O,ye]),En=x.useCallback(Be=>{if(!Be.startDate)return;f(Be.id),D(Be.startDate);const bt=new Date(Be.startDate+"T00:00:00");se(bt.getFullYear(),bt.getMonth()),xe(Be.startDate),setTimeout(()=>xe(null),1500)},[se,D,f]),Wi=x.useCallback(Be=>{const bt=r.find(an=>an.id===Be);bt!=null&&bt.startDate?En(bt):f(Be)},[r,En,f]),Zi=x.useCallback(Be=>{D(Be);const bt=b(Be);bt&&f(bt.id),ue("daily")},[D,b,f]),Yt=x.useCallback(Be=>{D(Be);const bt=b(Be);bt&&f(bt.id)},[D,b,f]),ki=x.useCallback(()=>{ue("calendar")},[]),vi=b(P),Tn=l&&(vi==null?void 0:vi.id)===l.id?l:vi,bn=x.useCallback((Be,bt)=>{Tn&&E(Tn.id,Be,bt)},[Tn,E]);return a?I.jsx("div",{className:"loading",children:"loading plans..."}):I.jsxs("div",{className:"app",children:[I.jsxs("header",{className:"app-header",children:[I.jsxs("div",{children:[I.jsx("div",{className:"header-subtitle",children:"ENTRYPOINT V2"}),I.jsx("h1",{className:"header-title",children:"Lock-In"}),I.jsx("div",{className:"header-quote",children:'"While enjoying every single day on the way."'})]}),I.jsxs("div",{className:"header-actions",children:[I.jsx("button",{className:"header-btn",onClick:()=>nt(!0),title:"Export",children:"Export"}),I.jsx("button",{className:"header-btn",onClick:()=>{var Be;return(Be=Oe.current)==null?void 0:Be.click()},title:"Import",children:"Import"}),I.jsx("input",{ref:Oe,type:"file",accept:".json",hidden:!0,onChange:Be=>{Be.target.files[0]&&ut(Be.target.files[0]),Be.target.value=""}}),t&&I.jsx("button",{className:"logout-btn",onClick:t,children:"Logout"})]})]}),I.jsx($P,{plans:r,activePlanId:l==null?void 0:l.id,onSelect:Wi,onCreate:()=>me(!0),onEdit:Ve,onDelete:_}),Ie==="calendar"?I.jsx(ZP,{viewYear:U,viewMonth:G,selectedDate:P,today:M,plans:r,highlightDate:Se,onPrevMonth:H,onNextMonth:re,onGoToday:()=>Zi(M),onSelectDate:Zi,onPlanClick:En}):I.jsx(y6,{date:P,plan:Tn,location:k,onOpenLocation:()=>X(!0),onUpdateBlocks:bn,onSelectDate:Yt,onMonth:ki,customTypes:W,customTypeColors:R,onAddCustomType:S,onRemoveCustomType:N,pipelineSections:le,onAddSection:_e,onUpdateSection:De,onDeleteSection:Ue,onToggleCollapse:te,onAddItem:$,onUpdateItem:ce,onDeleteItem:ge}),ze&&I.jsx(RS,{plan:null,plans:r,onSave:Be=>{m(Be),me(!1)},onClose:()=>me(!1)}),Ge&&I.jsx(RS,{plan:Ge,plans:r,onSave:Be=>{g(Ge.id,Be),Ve(null)},onClose:()=>Ve(null)}),Ut&&I.jsx(T6,{plans:r,customTypes:W,pipelineSections:le,onClose:()=>nt(!1)}),Pe&&I.jsx(E6,{file:Pe,existingPlans:r,existingCustomTypes:W,existingPipelines:le,onConfirm:ct,onClose:()=>ut(null)}),(!V&&we||Me)&&I.jsx(b6,{onSave:Be=>{j(Be),X(!1)},onClose:V?()=>X(!1):void 0})]})}jC.createRoot(document.getElementById("root")).render(I.jsx(x.StrictMode,{children:Ul?I.jsx(fP,{children:I.jsx(mP,{children:I.jsx(QS,{})})}):I.jsx(QS,{})}));
